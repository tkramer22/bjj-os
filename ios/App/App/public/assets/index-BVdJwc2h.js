var FS=e=>{throw TypeError(e)};var zv=(e,t,r)=>t.has(e)||FS("Cannot "+r);var q=(e,t,r)=>(zv(e,t,"read from private field"),r?r.call(e):t.get(e)),He=(e,t,r)=>t.has(e)?FS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),_e=(e,t,r,i)=>(zv(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),st=(e,t,r)=>(zv(e,t,"access private method"),r);var Vh=(e,t,r,i)=>({set _(a){_e(e,t,a,r)},get _(){return q(e,t,i)}});function jL(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function It(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var HT={exports:{}},sx={},KT={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh=Symbol.for("react.element"),wL=Symbol.for("react.portal"),NL=Symbol.for("react.fragment"),SL=Symbol.for("react.strict_mode"),kL=Symbol.for("react.profiler"),CL=Symbol.for("react.provider"),AL=Symbol.for("react.context"),EL=Symbol.for("react.forward_ref"),PL=Symbol.for("react.suspense"),TL=Symbol.for("react.memo"),OL=Symbol.for("react.lazy"),DS=Symbol.iterator;function _L(e){return e===null||typeof e!="object"?null:(e=DS&&e[DS]||e["@@iterator"],typeof e=="function"?e:null)}var GT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YT=Object.assign,QT={};function gd(e,t,r){this.props=e,this.context=t,this.refs=QT,this.updater=r||GT}gd.prototype.isReactComponent={};gd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function JT(){}JT.prototype=gd.prototype;function Sw(e,t,r){this.props=e,this.context=t,this.refs=QT,this.updater=r||GT}var kw=Sw.prototype=new JT;kw.constructor=Sw;YT(kw,gd.prototype);kw.isPureReactComponent=!0;var LS=Array.isArray,XT=Object.prototype.hasOwnProperty,Cw={current:null},ZT={key:!0,ref:!0,__self:!0,__source:!0};function eO(e,t,r){var i,a={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)XT.call(t,i)&&!ZT.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps,l)a[i]===void 0&&(a[i]=l[i]);return{$$typeof:mh,type:e,key:s,ref:o,props:a,_owner:Cw.current}}function IL(e,t){return{$$typeof:mh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Aw(e){return typeof e=="object"&&e!==null&&e.$$typeof===mh}function RL(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var BS=/\/+/g;function qv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RL(""+e.key):t.toString(36)}function $m(e,t,r,i,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case mh:case wL:o=!0}}if(o)return o=e,a=a(o),e=i===""?"."+qv(o,0):i,LS(a)?(r="",e!=null&&(r=e.replace(BS,"$&/")+"/"),$m(a,t,r,"",function(d){return d})):a!=null&&(Aw(a)&&(a=IL(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(BS,"$&/")+"/")+e)),t.push(a)),1;if(o=0,i=i===""?".":i+":",LS(e))for(var l=0;l<e.length;l++){s=e[l];var c=i+qv(s,l);o+=$m(s,t,r,c,a)}else if(c=_L(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=i+qv(s,l++),o+=$m(s,t,r,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Hh(e,t,r){if(e==null)return e;var i=[],a=0;return $m(e,i,"","",function(s){return t.call(r,s,a++)}),i}function ML(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var on={current:null},Fm={transition:null},$L={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:Fm,ReactCurrentOwner:Cw};function tO(){throw Error("act(...) is not supported in production builds of React.")}dt.Children={map:Hh,forEach:function(e,t,r){Hh(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Hh(e,function(){t++}),t},toArray:function(e){return Hh(e,function(t){return t})||[]},only:function(e){if(!Aw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};dt.Component=gd;dt.Fragment=NL;dt.Profiler=kL;dt.PureComponent=Sw;dt.StrictMode=SL;dt.Suspense=PL;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$L;dt.act=tO;dt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=YT({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Cw.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)XT.call(t,c)&&!ZT.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:mh,type:e.type,key:a,ref:s,props:i,_owner:o}};dt.createContext=function(e){return e={$$typeof:AL,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:CL,_context:e},e.Consumer=e};dt.createElement=eO;dt.createFactory=function(e){var t=eO.bind(null,e);return t.type=e,t};dt.createRef=function(){return{current:null}};dt.forwardRef=function(e){return{$$typeof:EL,render:e}};dt.isValidElement=Aw;dt.lazy=function(e){return{$$typeof:OL,_payload:{_status:-1,_result:e},_init:ML}};dt.memo=function(e,t){return{$$typeof:TL,type:e,compare:t===void 0?null:t}};dt.startTransition=function(e){var t=Fm.transition;Fm.transition={};try{e()}finally{Fm.transition=t}};dt.unstable_act=tO;dt.useCallback=function(e,t){return on.current.useCallback(e,t)};dt.useContext=function(e){return on.current.useContext(e)};dt.useDebugValue=function(){};dt.useDeferredValue=function(e){return on.current.useDeferredValue(e)};dt.useEffect=function(e,t){return on.current.useEffect(e,t)};dt.useId=function(){return on.current.useId()};dt.useImperativeHandle=function(e,t,r){return on.current.useImperativeHandle(e,t,r)};dt.useInsertionEffect=function(e,t){return on.current.useInsertionEffect(e,t)};dt.useLayoutEffect=function(e,t){return on.current.useLayoutEffect(e,t)};dt.useMemo=function(e,t){return on.current.useMemo(e,t)};dt.useReducer=function(e,t,r){return on.current.useReducer(e,t,r)};dt.useRef=function(e){return on.current.useRef(e)};dt.useState=function(e){return on.current.useState(e)};dt.useSyncExternalStore=function(e,t,r){return on.current.useSyncExternalStore(e,t,r)};dt.useTransition=function(){return on.current.useTransition()};dt.version="18.3.1";KT.exports=dt;var g=KT.exports;const D=It(g),rO=jL({__proto__:null,default:D},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FL=g,DL=Symbol.for("react.element"),LL=Symbol.for("react.fragment"),BL=Object.prototype.hasOwnProperty,zL=FL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qL={key:!0,ref:!0,__self:!0,__source:!0};function nO(e,t,r){var i,a={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)BL.call(t,i)&&!qL.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:DL,type:e,key:s,ref:o,props:a,_owner:zL.current}}sx.Fragment=LL;sx.jsx=nO;sx.jsxs=nO;HT.exports=sx;var n=HT.exports,iO={exports:{}},Bn={},aO={exports:{}},sO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,L){var z=I.length;I.push(L);e:for(;0<z;){var ie=z-1>>>1,U=I[ie];if(0<a(U,L))I[ie]=L,I[z]=U,z=ie;else break e}}function r(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var L=I[0],z=I.pop();if(z!==L){I[0]=z;e:for(var ie=0,U=I.length,ee=U>>>1;ie<ee;){var de=2*(ie+1)-1,oe=I[de],Pe=de+1,ve=I[Pe];if(0>a(oe,z))Pe<U&&0>a(ve,oe)?(I[ie]=ve,I[Pe]=z,ie=Pe):(I[ie]=oe,I[de]=z,ie=de);else if(Pe<U&&0>a(ve,z))I[ie]=ve,I[Pe]=z,ie=Pe;else break e}}return L}function a(I,L){var z=I.sortIndex-L.sortIndex;return z!==0?z:I.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,h=3,p=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(I){for(var L=r(d);L!==null;){if(L.callback===null)i(d);else if(L.startTime<=I)i(d),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(d)}}function N(I){if(v=!1,j(I),!y)if(r(c)!==null)y=!0,$(w);else{var L=r(d);L!==null&&M(N,L.startTime-I)}}function w(I,L){y=!1,v&&(v=!1,x(k),k=-1),p=!0;var z=h;try{for(j(L),f=r(c);f!==null&&(!(f.expirationTime>L)||I&&!T());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,h=f.priorityLevel;var U=ie(f.expirationTime<=L);L=e.unstable_now(),typeof U=="function"?f.callback=U:f===r(c)&&i(c),j(L)}else i(c);f=r(c)}if(f!==null)var ee=!0;else{var de=r(d);de!==null&&M(N,de.startTime-L),ee=!1}return ee}finally{f=null,h=z,p=!1}}var S=!1,C=null,k=-1,A=5,E=-1;function T(){return!(e.unstable_now()-E<A)}function P(){if(C!==null){var I=e.unstable_now();E=I;var L=!0;try{L=C(!0,I)}finally{L?_():(S=!1,C=null)}}else S=!1}var _;if(typeof m=="function")_=function(){m(P)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,O=R.port2;R.port1.onmessage=P,_=function(){O.postMessage(null)}}else _=function(){b(P,0)};function $(I){C=I,S||(S=!0,_())}function M(I,L){k=b(function(){I(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,$(w))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var z=h;h=L;try{return I()}finally{h=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,L){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var z=h;h=I;try{return L()}finally{h=z}},e.unstable_scheduleCallback=function(I,L,z){var ie=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ie+z:ie):z=ie,I){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=z+U,I={id:u++,callback:L,priorityLevel:I,startTime:z,expirationTime:U,sortIndex:-1},z>ie?(I.sortIndex=z,t(d,I),r(c)===null&&I===r(d)&&(v?(x(k),k=-1):v=!0,M(N,z-ie))):(I.sortIndex=U,t(c,I),y||p||(y=!0,$(w))),I},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(I){var L=h;return function(){var z=h;h=L;try{return I.apply(this,arguments)}finally{h=z}}}})(sO);aO.exports=sO;var UL=aO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VL=g,Mn=UL;function ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oO=new Set,Vu={};function al(e,t){Sc(e,t),Sc(e+"Capture",t)}function Sc(e,t){for(Vu[e]=t,e=0;e<t.length;e++)oO.add(t[e])}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mb=Object.prototype.hasOwnProperty,WL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zS={},qS={};function HL(e){return mb.call(qS,e)?!0:mb.call(zS,e)?!1:WL.test(e)?qS[e]=!0:(zS[e]=!0,!1)}function KL(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function GL(e,t,r,i){if(t===null||typeof t>"u"||KL(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ln(e,t,r,i,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var $r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$r[e]=new ln(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$r[t]=new ln(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$r[e]=new ln(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$r[e]=new ln(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$r[e]=new ln(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$r[e]=new ln(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$r[e]=new ln(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$r[e]=new ln(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$r[e]=new ln(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ew=/[\-:]([a-z])/g;function Pw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ew,Pw);$r[t]=new ln(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ew,Pw);$r[t]=new ln(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ew,Pw);$r[t]=new ln(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$r[e]=new ln(e,1,!1,e.toLowerCase(),null,!1,!1)});$r.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$r[e]=new ln(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tw(e,t,r,i){var a=$r.hasOwnProperty(t)?$r[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(GL(t,r,a,i)&&(r=null),i||a===null?HL(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,i=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Ka=VL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kh=Symbol.for("react.element"),Pl=Symbol.for("react.portal"),Tl=Symbol.for("react.fragment"),Ow=Symbol.for("react.strict_mode"),pb=Symbol.for("react.profiler"),lO=Symbol.for("react.provider"),cO=Symbol.for("react.context"),_w=Symbol.for("react.forward_ref"),gb=Symbol.for("react.suspense"),xb=Symbol.for("react.suspense_list"),Iw=Symbol.for("react.memo"),as=Symbol.for("react.lazy"),dO=Symbol.for("react.offscreen"),US=Symbol.iterator;function Ud(e){return e===null||typeof e!="object"?null:(e=US&&e[US]||e["@@iterator"],typeof e=="function"?e:null)}var Kt=Object.assign,Uv;function mu(e){if(Uv===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Uv=t&&t[1]||""}return`
`+Uv+e}var Vv=!1;function Wv(e,t){if(!e||Vv)return"";Vv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),s=i.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vv=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?mu(e):""}function YL(e){switch(e.tag){case 5:return mu(e.type);case 16:return mu("Lazy");case 13:return mu("Suspense");case 19:return mu("SuspenseList");case 0:case 2:case 15:return e=Wv(e.type,!1),e;case 11:return e=Wv(e.type.render,!1),e;case 1:return e=Wv(e.type,!0),e;default:return""}}function vb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tl:return"Fragment";case Pl:return"Portal";case pb:return"Profiler";case Ow:return"StrictMode";case gb:return"Suspense";case xb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cO:return(e.displayName||"Context")+".Consumer";case lO:return(e._context.displayName||"Context")+".Provider";case _w:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Iw:return t=e.displayName||null,t!==null?t:vb(e.type)||"Memo";case as:t=e._payload,e=e._init;try{return vb(e(t))}catch{}}return null}function QL(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vb(t);case 8:return t===Ow?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JL(e){var t=uO(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gh(e){e._valueTracker||(e._valueTracker=JL(e))}function fO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=uO(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function lp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yb(e,t){var r=t.checked;return Kt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function VS(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=zs(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hO(e,t){t=t.checked,t!=null&&Tw(e,"checked",t,!1)}function bb(e,t){hO(e,t);var r=zs(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jb(e,t.type,r):t.hasOwnProperty("defaultValue")&&jb(e,t.type,zs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function WS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function jb(e,t,r){(t!=="number"||lp(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var pu=Array.isArray;function Kl(e,t,r,i){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&i&&(e[r].defaultSelected=!0)}else{for(r=""+zs(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function wb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Kt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function HS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ge(92));if(pu(r)){if(1<r.length)throw Error(ge(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:zs(r)}}function mO(e,t){var r=zs(t.value),i=zs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function KS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yh,gO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yh=Yh||document.createElement("div"),Yh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XL=["Webkit","ms","Moz","O"];Object.keys(wu).forEach(function(e){XL.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wu[t]=wu[e]})});function xO(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||wu.hasOwnProperty(e)&&wu[e]?(""+t).trim():t+"px"}function vO(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=xO(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,a):e[r]=a}}var ZL=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sb(e,t){if(t){if(ZL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ge(62))}}function kb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cb=null;function Rw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ab=null,Gl=null,Yl=null;function GS(e){if(e=xh(e)){if(typeof Ab!="function")throw Error(ge(280));var t=e.stateNode;t&&(t=ux(t),Ab(e.stateNode,e.type,t))}}function yO(e){Gl?Yl?Yl.push(e):Yl=[e]:Gl=e}function bO(){if(Gl){var e=Gl,t=Yl;if(Yl=Gl=null,GS(e),t)for(e=0;e<t.length;e++)GS(t[e])}}function jO(e,t){return e(t)}function wO(){}var Hv=!1;function NO(e,t,r){if(Hv)return e(t,r);Hv=!0;try{return jO(e,t,r)}finally{Hv=!1,(Gl!==null||Yl!==null)&&(wO(),bO())}}function Hu(e,t){var r=e.stateNode;if(r===null)return null;var i=ux(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ge(231,t,typeof r));return r}var Eb=!1;if(Ia)try{var Vd={};Object.defineProperty(Vd,"passive",{get:function(){Eb=!0}}),window.addEventListener("test",Vd,Vd),window.removeEventListener("test",Vd,Vd)}catch{Eb=!1}function e6(e,t,r,i,a,s,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Nu=!1,cp=null,dp=!1,Pb=null,t6={onError:function(e){Nu=!0,cp=e}};function r6(e,t,r,i,a,s,o,l,c){Nu=!1,cp=null,e6.apply(t6,arguments)}function n6(e,t,r,i,a,s,o,l,c){if(r6.apply(this,arguments),Nu){if(Nu){var d=cp;Nu=!1,cp=null}else throw Error(ge(198));dp||(dp=!0,Pb=d)}}function sl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function SO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function YS(e){if(sl(e)!==e)throw Error(ge(188))}function i6(e){var t=e.alternate;if(!t){if(t=sl(e),t===null)throw Error(ge(188));return t!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return YS(a),e;if(s===i)return YS(a),t;s=s.sibling}throw Error(ge(188))}if(r.return!==i.return)r=a,i=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o)throw Error(ge(189))}}if(r.alternate!==i)throw Error(ge(190))}if(r.tag!==3)throw Error(ge(188));return r.stateNode.current===r?e:t}function kO(e){return e=i6(e),e!==null?CO(e):null}function CO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=CO(e);if(t!==null)return t;e=e.sibling}return null}var AO=Mn.unstable_scheduleCallback,QS=Mn.unstable_cancelCallback,a6=Mn.unstable_shouldYield,s6=Mn.unstable_requestPaint,nr=Mn.unstable_now,o6=Mn.unstable_getCurrentPriorityLevel,Mw=Mn.unstable_ImmediatePriority,EO=Mn.unstable_UserBlockingPriority,up=Mn.unstable_NormalPriority,l6=Mn.unstable_LowPriority,PO=Mn.unstable_IdlePriority,ox=null,Qi=null;function c6(e){if(Qi&&typeof Qi.onCommitFiberRoot=="function")try{Qi.onCommitFiberRoot(ox,e,void 0,(e.current.flags&128)===128)}catch{}}var Pi=Math.clz32?Math.clz32:f6,d6=Math.log,u6=Math.LN2;function f6(e){return e>>>=0,e===0?32:31-(d6(e)/u6|0)|0}var Qh=64,Jh=4194304;function gu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fp(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?i=gu(l):(s&=o,s!==0&&(i=gu(s)))}else o=r&~a,o!==0?i=gu(o):s!==0&&(i=gu(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Pi(t),a=1<<r,i|=e[r],t&=~a;return i}function h6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m6(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Pi(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&i)&&(a[o]=h6(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function Tb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TO(){var e=Qh;return Qh<<=1,!(Qh&4194240)&&(Qh=64),e}function Kv(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ph(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pi(t),e[t]=r}function p6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Pi(r),s=1<<a;t[a]=0,i[a]=-1,e[a]=-1,r&=~s}}function $w(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Pi(r),a=1<<i;a&t|e[i]&t&&(e[i]|=t),r&=~a}}var Pt=0;function OO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _O,Fw,IO,RO,MO,Ob=!1,Xh=[],Cs=null,As=null,Es=null,Ku=new Map,Gu=new Map,cs=[],g6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JS(e,t){switch(e){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":Ku.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(t.pointerId)}}function Wd(e,t,r,i,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[a]},t!==null&&(t=xh(t),t!==null&&Fw(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function x6(e,t,r,i,a){switch(t){case"focusin":return Cs=Wd(Cs,e,t,r,i,a),!0;case"dragenter":return As=Wd(As,e,t,r,i,a),!0;case"mouseover":return Es=Wd(Es,e,t,r,i,a),!0;case"pointerover":var s=a.pointerId;return Ku.set(s,Wd(Ku.get(s)||null,e,t,r,i,a)),!0;case"gotpointercapture":return s=a.pointerId,Gu.set(s,Wd(Gu.get(s)||null,e,t,r,i,a)),!0}return!1}function $O(e){var t=bo(e.target);if(t!==null){var r=sl(t);if(r!==null){if(t=r.tag,t===13){if(t=SO(r),t!==null){e.blockedOn=t,MO(e.priority,function(){IO(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=_b(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Cb=i,r.target.dispatchEvent(i),Cb=null}else return t=xh(r),t!==null&&Fw(t),e.blockedOn=r,!1;t.shift()}return!0}function XS(e,t,r){Dm(e)&&r.delete(t)}function v6(){Ob=!1,Cs!==null&&Dm(Cs)&&(Cs=null),As!==null&&Dm(As)&&(As=null),Es!==null&&Dm(Es)&&(Es=null),Ku.forEach(XS),Gu.forEach(XS)}function Hd(e,t){e.blockedOn===t&&(e.blockedOn=null,Ob||(Ob=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,v6)))}function Yu(e){function t(a){return Hd(a,e)}if(0<Xh.length){Hd(Xh[0],e);for(var r=1;r<Xh.length;r++){var i=Xh[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Cs!==null&&Hd(Cs,e),As!==null&&Hd(As,e),Es!==null&&Hd(Es,e),Ku.forEach(t),Gu.forEach(t),r=0;r<cs.length;r++)i=cs[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<cs.length&&(r=cs[0],r.blockedOn===null);)$O(r),r.blockedOn===null&&cs.shift()}var Ql=Ka.ReactCurrentBatchConfig,hp=!0;function y6(e,t,r,i){var a=Pt,s=Ql.transition;Ql.transition=null;try{Pt=1,Dw(e,t,r,i)}finally{Pt=a,Ql.transition=s}}function b6(e,t,r,i){var a=Pt,s=Ql.transition;Ql.transition=null;try{Pt=4,Dw(e,t,r,i)}finally{Pt=a,Ql.transition=s}}function Dw(e,t,r,i){if(hp){var a=_b(e,t,r,i);if(a===null)ny(e,t,i,mp,r),JS(e,i);else if(x6(a,e,t,r,i))i.stopPropagation();else if(JS(e,i),t&4&&-1<g6.indexOf(e)){for(;a!==null;){var s=xh(a);if(s!==null&&_O(s),s=_b(e,t,r,i),s===null&&ny(e,t,i,mp,r),s===a)break;a=s}a!==null&&i.stopPropagation()}else ny(e,t,i,null,r)}}var mp=null;function _b(e,t,r,i){if(mp=null,e=Rw(i),e=bo(e),e!==null)if(t=sl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=SO(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mp=e,null}function FO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o6()){case Mw:return 1;case EO:return 4;case up:case l6:return 16;case PO:return 536870912;default:return 16}default:return 16}}var ws=null,Lw=null,Lm=null;function DO(){if(Lm)return Lm;var e,t=Lw,r=t.length,i,a="value"in ws?ws.value:ws.textContent,s=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(i=1;i<=o&&t[r-i]===a[s-i];i++);return Lm=a.slice(e,1<i?1-i:void 0)}function Bm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zh(){return!0}function ZS(){return!1}function zn(e){function t(r,i,a,s,o){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zh:ZS,this.isPropagationStopped=ZS,this}return Kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zh)},persist:function(){},isPersistent:Zh}),t}var xd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bw=zn(xd),gh=Kt({},xd,{view:0,detail:0}),j6=zn(gh),Gv,Yv,Kd,lx=Kt({},gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kd&&(Kd&&e.type==="mousemove"?(Gv=e.screenX-Kd.screenX,Yv=e.screenY-Kd.screenY):Yv=Gv=0,Kd=e),Gv)},movementY:function(e){return"movementY"in e?e.movementY:Yv}}),e2=zn(lx),w6=Kt({},lx,{dataTransfer:0}),N6=zn(w6),S6=Kt({},gh,{relatedTarget:0}),Qv=zn(S6),k6=Kt({},xd,{animationName:0,elapsedTime:0,pseudoElement:0}),C6=zn(k6),A6=Kt({},xd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),E6=zn(A6),P6=Kt({},xd,{data:0}),t2=zn(P6),T6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_6[e])?!!t[e]:!1}function zw(){return I6}var R6=Kt({},gh,{key:function(e){if(e.key){var t=T6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?O6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zw,charCode:function(e){return e.type==="keypress"?Bm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),M6=zn(R6),$6=Kt({},lx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r2=zn($6),F6=Kt({},gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zw}),D6=zn(F6),L6=Kt({},xd,{propertyName:0,elapsedTime:0,pseudoElement:0}),B6=zn(L6),z6=Kt({},lx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q6=zn(z6),U6=[9,13,27,32],qw=Ia&&"CompositionEvent"in window,Su=null;Ia&&"documentMode"in document&&(Su=document.documentMode);var V6=Ia&&"TextEvent"in window&&!Su,LO=Ia&&(!qw||Su&&8<Su&&11>=Su),n2=" ",i2=!1;function BO(e,t){switch(e){case"keyup":return U6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ol=!1;function W6(e,t){switch(e){case"compositionend":return zO(t);case"keypress":return t.which!==32?null:(i2=!0,n2);case"textInput":return e=t.data,e===n2&&i2?null:e;default:return null}}function H6(e,t){if(Ol)return e==="compositionend"||!qw&&BO(e,t)?(e=DO(),Lm=Lw=ws=null,Ol=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return LO&&t.locale!=="ko"?null:t.data;default:return null}}var K6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K6[e.type]:t==="textarea"}function qO(e,t,r,i){yO(i),t=pp(t,"onChange"),0<t.length&&(r=new Bw("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var ku=null,Qu=null;function G6(e){ZO(e,0)}function cx(e){var t=Rl(e);if(fO(t))return e}function Y6(e,t){if(e==="change")return t}var UO=!1;if(Ia){var Jv;if(Ia){var Xv="oninput"in document;if(!Xv){var s2=document.createElement("div");s2.setAttribute("oninput","return;"),Xv=typeof s2.oninput=="function"}Jv=Xv}else Jv=!1;UO=Jv&&(!document.documentMode||9<document.documentMode)}function o2(){ku&&(ku.detachEvent("onpropertychange",VO),Qu=ku=null)}function VO(e){if(e.propertyName==="value"&&cx(Qu)){var t=[];qO(t,Qu,e,Rw(e)),NO(G6,t)}}function Q6(e,t,r){e==="focusin"?(o2(),ku=t,Qu=r,ku.attachEvent("onpropertychange",VO)):e==="focusout"&&o2()}function J6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cx(Qu)}function X6(e,t){if(e==="click")return cx(t)}function Z6(e,t){if(e==="input"||e==="change")return cx(t)}function eB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oi=typeof Object.is=="function"?Object.is:eB;function Ju(e,t){if(Oi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!mb.call(t,a)||!Oi(e[a],t[a]))return!1}return!0}function l2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function c2(e,t){var r=l2(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=l2(r)}}function WO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?WO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function HO(){for(var e=window,t=lp();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=lp(e.document)}return t}function Uw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tB(e){var t=HO(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&WO(r.ownerDocument.documentElement,r)){if(i!==null&&Uw(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(i.start,a);i=i.end===void 0?s:Math.min(i.end,a),!e.extend&&s>i&&(a=i,i=s,s=a),a=c2(r,s);var o=c2(r,i);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rB=Ia&&"documentMode"in document&&11>=document.documentMode,_l=null,Ib=null,Cu=null,Rb=!1;function d2(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Rb||_l==null||_l!==lp(i)||(i=_l,"selectionStart"in i&&Uw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Cu&&Ju(Cu,i)||(Cu=i,i=pp(Ib,"onSelect"),0<i.length&&(t=new Bw("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=_l)))}function em(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Il={animationend:em("Animation","AnimationEnd"),animationiteration:em("Animation","AnimationIteration"),animationstart:em("Animation","AnimationStart"),transitionend:em("Transition","TransitionEnd")},Zv={},KO={};Ia&&(KO=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function dx(e){if(Zv[e])return Zv[e];if(!Il[e])return e;var t=Il[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in KO)return Zv[e]=t[r];return e}var GO=dx("animationend"),YO=dx("animationiteration"),QO=dx("animationstart"),JO=dx("transitionend"),XO=new Map,u2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(e,t){XO.set(e,t),al(t,[e])}for(var ey=0;ey<u2.length;ey++){var ty=u2[ey],nB=ty.toLowerCase(),iB=ty[0].toUpperCase()+ty.slice(1);Js(nB,"on"+iB)}Js(GO,"onAnimationEnd");Js(YO,"onAnimationIteration");Js(QO,"onAnimationStart");Js("dblclick","onDoubleClick");Js("focusin","onFocus");Js("focusout","onBlur");Js(JO,"onTransitionEnd");Sc("onMouseEnter",["mouseout","mouseover"]);Sc("onMouseLeave",["mouseout","mouseover"]);Sc("onPointerEnter",["pointerout","pointerover"]);Sc("onPointerLeave",["pointerout","pointerover"]);al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));al("onBeforeInput",["compositionend","keypress","textInput","paste"]);al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aB=new Set("cancel close invalid load scroll toggle".split(" ").concat(xu));function f2(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,n6(i,t,void 0,e),e.currentTarget=null}function ZO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],a=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;f2(a,l,d),s=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;f2(a,l,d),s=c}}}if(dp)throw e=Pb,dp=!1,Pb=null,e}function Dt(e,t){var r=t[Lb];r===void 0&&(r=t[Lb]=new Set);var i=e+"__bubble";r.has(i)||(e_(t,e,2,!1),r.add(i))}function ry(e,t,r){var i=0;t&&(i|=4),e_(r,e,i,t)}var tm="_reactListening"+Math.random().toString(36).slice(2);function Xu(e){if(!e[tm]){e[tm]=!0,oO.forEach(function(r){r!=="selectionchange"&&(aB.has(r)||ry(r,!1,e),ry(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tm]||(t[tm]=!0,ry("selectionchange",!1,t))}}function e_(e,t,r,i){switch(FO(t)){case 1:var a=y6;break;case 4:a=b6;break;default:a=Dw}r=a.bind(null,t,r,e),a=void 0,!Eb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ny(e,t,r,i,a){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=bo(l),o===null)return;if(c=o.tag,c===5||c===6){i=s=o;continue e}l=l.parentNode}}i=i.return}NO(function(){var d=s,u=Rw(r),f=[];e:{var h=XO.get(e);if(h!==void 0){var p=Bw,y=e;switch(e){case"keypress":if(Bm(r)===0)break e;case"keydown":case"keyup":p=M6;break;case"focusin":y="focus",p=Qv;break;case"focusout":y="blur",p=Qv;break;case"beforeblur":case"afterblur":p=Qv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=e2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=N6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=D6;break;case GO:case YO:case QO:p=C6;break;case JO:p=B6;break;case"scroll":p=j6;break;case"wheel":p=q6;break;case"copy":case"cut":case"paste":p=E6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=r2}var v=(t&4)!==0,b=!v&&e==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var m=d,j;m!==null;){j=m;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,x!==null&&(N=Hu(m,x),N!=null&&v.push(Zu(m,N,j)))),b)break;m=m.return}0<v.length&&(h=new p(h,y,null,r,u),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Cb&&(y=r.relatedTarget||r.fromElement)&&(bo(y)||y[Ra]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=d,y=y?bo(y):null,y!==null&&(b=sl(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=d),p!==y)){if(v=e2,N="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(v=r2,N="onPointerLeave",x="onPointerEnter",m="pointer"),b=p==null?h:Rl(p),j=y==null?h:Rl(y),h=new v(N,m+"leave",p,r,u),h.target=b,h.relatedTarget=j,N=null,bo(u)===d&&(v=new v(x,m+"enter",y,r,u),v.target=j,v.relatedTarget=b,N=v),b=N,p&&y)t:{for(v=p,x=y,m=0,j=v;j;j=gl(j))m++;for(j=0,N=x;N;N=gl(N))j++;for(;0<m-j;)v=gl(v),m--;for(;0<j-m;)x=gl(x),j--;for(;m--;){if(v===x||x!==null&&v===x.alternate)break t;v=gl(v),x=gl(x)}v=null}else v=null;p!==null&&h2(f,h,p,v,!1),y!==null&&b!==null&&h2(f,b,y,v,!0)}}e:{if(h=d?Rl(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=Y6;else if(a2(h))if(UO)w=Z6;else{w=J6;var S=Q6}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=X6);if(w&&(w=w(e,d))){qO(f,w,r,u);break e}S&&S(e,h,d),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&jb(h,"number",h.value)}switch(S=d?Rl(d):window,e){case"focusin":(a2(S)||S.contentEditable==="true")&&(_l=S,Ib=d,Cu=null);break;case"focusout":Cu=Ib=_l=null;break;case"mousedown":Rb=!0;break;case"contextmenu":case"mouseup":case"dragend":Rb=!1,d2(f,r,u);break;case"selectionchange":if(rB)break;case"keydown":case"keyup":d2(f,r,u)}var C;if(qw)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ol?BO(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(LO&&r.locale!=="ko"&&(Ol||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ol&&(C=DO()):(ws=u,Lw="value"in ws?ws.value:ws.textContent,Ol=!0)),S=pp(d,k),0<S.length&&(k=new t2(k,e,null,r,u),f.push({event:k,listeners:S}),C?k.data=C:(C=zO(r),C!==null&&(k.data=C)))),(C=V6?W6(e,r):H6(e,r))&&(d=pp(d,"onBeforeInput"),0<d.length&&(u=new t2("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=C))}ZO(f,t)})}function Zu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pp(e,t){for(var r=t+"Capture",i=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Hu(e,r),s!=null&&i.unshift(Zu(e,s,a)),s=Hu(e,t),s!=null&&i.push(Zu(e,s,a))),e=e.return}return i}function gl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function h2(e,t,r,i,a){for(var s=t._reactName,o=[];r!==null&&r!==i;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&d!==null&&(l=d,a?(c=Hu(r,s),c!=null&&o.unshift(Zu(r,c,l))):a||(c=Hu(r,s),c!=null&&o.push(Zu(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var sB=/\r\n?/g,oB=/\u0000|\uFFFD/g;function m2(e){return(typeof e=="string"?e:""+e).replace(sB,`
`).replace(oB,"")}function rm(e,t,r){if(t=m2(t),m2(e)!==t&&r)throw Error(ge(425))}function gp(){}var Mb=null,$b=null;function Fb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Db=typeof setTimeout=="function"?setTimeout:void 0,lB=typeof clearTimeout=="function"?clearTimeout:void 0,p2=typeof Promise=="function"?Promise:void 0,cB=typeof queueMicrotask=="function"?queueMicrotask:typeof p2<"u"?function(e){return p2.resolve(null).then(e).catch(dB)}:Db;function dB(e){setTimeout(function(){throw e})}function iy(e,t){var r=t,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){e.removeChild(a),Yu(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);Yu(t)}function Ps(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function g2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var vd=Math.random().toString(36).slice(2),Hi="__reactFiber$"+vd,ef="__reactProps$"+vd,Ra="__reactContainer$"+vd,Lb="__reactEvents$"+vd,uB="__reactListeners$"+vd,fB="__reactHandles$"+vd;function bo(e){var t=e[Hi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ra]||r[Hi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=g2(e);e!==null;){if(r=e[Hi])return r;e=g2(e)}return t}e=r,r=e.parentNode}return null}function xh(e){return e=e[Hi]||e[Ra],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ge(33))}function ux(e){return e[ef]||null}var Bb=[],Ml=-1;function Xs(e){return{current:e}}function zt(e){0>Ml||(e.current=Bb[Ml],Bb[Ml]=null,Ml--)}function $t(e,t){Ml++,Bb[Ml]=e.current,e.current=t}var qs={},Hr=Xs(qs),pn=Xs(!1),Bo=qs;function kc(e,t){var r=e.type.contextTypes;if(!r)return qs;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gn(e){return e=e.childContextTypes,e!=null}function xp(){zt(pn),zt(Hr)}function x2(e,t,r){if(Hr.current!==qs)throw Error(ge(168));$t(Hr,t),$t(pn,r)}function t_(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(ge(108,QL(e)||"Unknown",a));return Kt({},r,i)}function vp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qs,Bo=Hr.current,$t(Hr,e),$t(pn,pn.current),!0}function v2(e,t,r){var i=e.stateNode;if(!i)throw Error(ge(169));r?(e=t_(e,t,Bo),i.__reactInternalMemoizedMergedChildContext=e,zt(pn),zt(Hr),$t(Hr,e)):zt(pn),$t(pn,r)}var ga=null,fx=!1,ay=!1;function r_(e){ga===null?ga=[e]:ga.push(e)}function hB(e){fx=!0,r_(e)}function Zs(){if(!ay&&ga!==null){ay=!0;var e=0,t=Pt;try{var r=ga;for(Pt=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}ga=null,fx=!1}catch(a){throw ga!==null&&(ga=ga.slice(e+1)),AO(Mw,Zs),a}finally{Pt=t,ay=!1}}return null}var $l=[],Fl=0,yp=null,bp=0,Kn=[],Gn=0,zo=null,va=1,ya="";function ho(e,t){$l[Fl++]=bp,$l[Fl++]=yp,yp=e,bp=t}function n_(e,t,r){Kn[Gn++]=va,Kn[Gn++]=ya,Kn[Gn++]=zo,zo=e;var i=va;e=ya;var a=32-Pi(i)-1;i&=~(1<<a),r+=1;var s=32-Pi(t)+a;if(30<s){var o=a-a%5;s=(i&(1<<o)-1).toString(32),i>>=o,a-=o,va=1<<32-Pi(t)+a|r<<a|i,ya=s+e}else va=1<<s|r<<a|i,ya=e}function Vw(e){e.return!==null&&(ho(e,1),n_(e,1,0))}function Ww(e){for(;e===yp;)yp=$l[--Fl],$l[Fl]=null,bp=$l[--Fl],$l[Fl]=null;for(;e===zo;)zo=Kn[--Gn],Kn[Gn]=null,ya=Kn[--Gn],Kn[Gn]=null,va=Kn[--Gn],Kn[Gn]=null}var _n=null,On=null,Ut=!1,ji=null;function i_(e,t){var r=Yn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function y2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_n=e,On=Ps(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_n=e,On=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=zo!==null?{id:va,overflow:ya}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Yn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,_n=e,On=null,!0):!1;default:return!1}}function zb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qb(e){if(Ut){var t=On;if(t){var r=t;if(!y2(e,t)){if(zb(e))throw Error(ge(418));t=Ps(r.nextSibling);var i=_n;t&&y2(e,t)?i_(i,r):(e.flags=e.flags&-4097|2,Ut=!1,_n=e)}}else{if(zb(e))throw Error(ge(418));e.flags=e.flags&-4097|2,Ut=!1,_n=e}}}function b2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_n=e}function nm(e){if(e!==_n)return!1;if(!Ut)return b2(e),Ut=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fb(e.type,e.memoizedProps)),t&&(t=On)){if(zb(e))throw a_(),Error(ge(418));for(;t;)i_(e,t),t=Ps(t.nextSibling)}if(b2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){On=Ps(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}On=null}}else On=_n?Ps(e.stateNode.nextSibling):null;return!0}function a_(){for(var e=On;e;)e=Ps(e.nextSibling)}function Cc(){On=_n=null,Ut=!1}function Hw(e){ji===null?ji=[e]:ji.push(e)}var mB=Ka.ReactCurrentBatchConfig;function Gd(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ge(309));var i=r.stateNode}if(!i)throw Error(ge(147,e));var a=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ge(284));if(!r._owner)throw Error(ge(290,e))}return e}function im(e,t){throw e=Object.prototype.toString.call(t),Error(ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function j2(e){var t=e._init;return t(e._payload)}function s_(e){function t(x,m){if(e){var j=x.deletions;j===null?(x.deletions=[m],x.flags|=16):j.push(m)}}function r(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function i(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function a(x,m){return x=Is(x,m),x.index=0,x.sibling=null,x}function s(x,m,j){return x.index=j,e?(j=x.alternate,j!==null?(j=j.index,j<m?(x.flags|=2,m):j):(x.flags|=2,m)):(x.flags|=1048576,m)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,m,j,N){return m===null||m.tag!==6?(m=fy(j,x.mode,N),m.return=x,m):(m=a(m,j),m.return=x,m)}function c(x,m,j,N){var w=j.type;return w===Tl?u(x,m,j.props.children,N,j.key):m!==null&&(m.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===as&&j2(w)===m.type)?(N=a(m,j.props),N.ref=Gd(x,m,j),N.return=x,N):(N=Km(j.type,j.key,j.props,null,x.mode,N),N.ref=Gd(x,m,j),N.return=x,N)}function d(x,m,j,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==j.containerInfo||m.stateNode.implementation!==j.implementation?(m=hy(j,x.mode,N),m.return=x,m):(m=a(m,j.children||[]),m.return=x,m)}function u(x,m,j,N,w){return m===null||m.tag!==7?(m=$o(j,x.mode,N,w),m.return=x,m):(m=a(m,j),m.return=x,m)}function f(x,m,j){if(typeof m=="string"&&m!==""||typeof m=="number")return m=fy(""+m,x.mode,j),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Kh:return j=Km(m.type,m.key,m.props,null,x.mode,j),j.ref=Gd(x,null,m),j.return=x,j;case Pl:return m=hy(m,x.mode,j),m.return=x,m;case as:var N=m._init;return f(x,N(m._payload),j)}if(pu(m)||Ud(m))return m=$o(m,x.mode,j,null),m.return=x,m;im(x,m)}return null}function h(x,m,j,N){var w=m!==null?m.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return w!==null?null:l(x,m,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Kh:return j.key===w?c(x,m,j,N):null;case Pl:return j.key===w?d(x,m,j,N):null;case as:return w=j._init,h(x,m,w(j._payload),N)}if(pu(j)||Ud(j))return w!==null?null:u(x,m,j,N,null);im(x,j)}return null}function p(x,m,j,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(j)||null,l(m,x,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Kh:return x=x.get(N.key===null?j:N.key)||null,c(m,x,N,w);case Pl:return x=x.get(N.key===null?j:N.key)||null,d(m,x,N,w);case as:var S=N._init;return p(x,m,j,S(N._payload),w)}if(pu(N)||Ud(N))return x=x.get(j)||null,u(m,x,N,w,null);im(m,N)}return null}function y(x,m,j,N){for(var w=null,S=null,C=m,k=m=0,A=null;C!==null&&k<j.length;k++){C.index>k?(A=C,C=null):A=C.sibling;var E=h(x,C,j[k],N);if(E===null){C===null&&(C=A);break}e&&C&&E.alternate===null&&t(x,C),m=s(E,m,k),S===null?w=E:S.sibling=E,S=E,C=A}if(k===j.length)return r(x,C),Ut&&ho(x,k),w;if(C===null){for(;k<j.length;k++)C=f(x,j[k],N),C!==null&&(m=s(C,m,k),S===null?w=C:S.sibling=C,S=C);return Ut&&ho(x,k),w}for(C=i(x,C);k<j.length;k++)A=p(C,x,k,j[k],N),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?k:A.key),m=s(A,m,k),S===null?w=A:S.sibling=A,S=A);return e&&C.forEach(function(T){return t(x,T)}),Ut&&ho(x,k),w}function v(x,m,j,N){var w=Ud(j);if(typeof w!="function")throw Error(ge(150));if(j=w.call(j),j==null)throw Error(ge(151));for(var S=w=null,C=m,k=m=0,A=null,E=j.next();C!==null&&!E.done;k++,E=j.next()){C.index>k?(A=C,C=null):A=C.sibling;var T=h(x,C,E.value,N);if(T===null){C===null&&(C=A);break}e&&C&&T.alternate===null&&t(x,C),m=s(T,m,k),S===null?w=T:S.sibling=T,S=T,C=A}if(E.done)return r(x,C),Ut&&ho(x,k),w;if(C===null){for(;!E.done;k++,E=j.next())E=f(x,E.value,N),E!==null&&(m=s(E,m,k),S===null?w=E:S.sibling=E,S=E);return Ut&&ho(x,k),w}for(C=i(x,C);!E.done;k++,E=j.next())E=p(C,x,k,E.value,N),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?k:E.key),m=s(E,m,k),S===null?w=E:S.sibling=E,S=E);return e&&C.forEach(function(P){return t(x,P)}),Ut&&ho(x,k),w}function b(x,m,j,N){if(typeof j=="object"&&j!==null&&j.type===Tl&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Kh:e:{for(var w=j.key,S=m;S!==null;){if(S.key===w){if(w=j.type,w===Tl){if(S.tag===7){r(x,S.sibling),m=a(S,j.props.children),m.return=x,x=m;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===as&&j2(w)===S.type){r(x,S.sibling),m=a(S,j.props),m.ref=Gd(x,S,j),m.return=x,x=m;break e}r(x,S);break}else t(x,S);S=S.sibling}j.type===Tl?(m=$o(j.props.children,x.mode,N,j.key),m.return=x,x=m):(N=Km(j.type,j.key,j.props,null,x.mode,N),N.ref=Gd(x,m,j),N.return=x,x=N)}return o(x);case Pl:e:{for(S=j.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===j.containerInfo&&m.stateNode.implementation===j.implementation){r(x,m.sibling),m=a(m,j.children||[]),m.return=x,x=m;break e}else{r(x,m);break}else t(x,m);m=m.sibling}m=hy(j,x.mode,N),m.return=x,x=m}return o(x);case as:return S=j._init,b(x,m,S(j._payload),N)}if(pu(j))return y(x,m,j,N);if(Ud(j))return v(x,m,j,N);im(x,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,m!==null&&m.tag===6?(r(x,m.sibling),m=a(m,j),m.return=x,x=m):(r(x,m),m=fy(j,x.mode,N),m.return=x,x=m),o(x)):r(x,m)}return b}var Ac=s_(!0),o_=s_(!1),jp=Xs(null),wp=null,Dl=null,Kw=null;function Gw(){Kw=Dl=wp=null}function Yw(e){var t=jp.current;zt(jp),e._currentValue=t}function Ub(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Jl(e,t){wp=e,Kw=Dl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hn=!0),e.firstContext=null)}function ri(e){var t=e._currentValue;if(Kw!==e)if(e={context:e,memoizedValue:t,next:null},Dl===null){if(wp===null)throw Error(ge(308));Dl=e,wp.dependencies={lanes:0,firstContext:e}}else Dl=Dl.next=e;return t}var jo=null;function Qw(e){jo===null?jo=[e]:jo.push(e)}function l_(e,t,r,i){var a=t.interleaved;return a===null?(r.next=r,Qw(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ma(e,i)}function Ma(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ss=!1;function Jw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ts(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,xt&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Ma(e,r)}return a=i.interleaved,a===null?(t.next=t,Qw(i)):(t.next=a.next,a.next=t),i.interleaved=t,Ma(e,r)}function zm(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,$w(e,r)}}function w2(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=t:s=s.next=t}else a=s=t;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Np(e,t,r,i){var a=e.updateQueue;ss=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?s=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;o=0,u=d=c=null,l=s;do{var h=l.lane,p=l.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,v=l;switch(h=t,p=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(p,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,h=typeof y=="function"?y.call(p,f,h):y,h==null)break e;f=Kt({},f,h);break e;case 2:ss=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=f):u=u.next=p,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);Uo|=o,e.lanes=o,e.memoizedState=f}}function N2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(ge(191,a));a.call(i)}}}var vh={},Ji=Xs(vh),tf=Xs(vh),rf=Xs(vh);function wo(e){if(e===vh)throw Error(ge(174));return e}function Xw(e,t){switch($t(rf,t),$t(tf,e),$t(Ji,vh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Nb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Nb(t,e)}zt(Ji),$t(Ji,t)}function Ec(){zt(Ji),zt(tf),zt(rf)}function d_(e){wo(rf.current);var t=wo(Ji.current),r=Nb(t,e.type);t!==r&&($t(tf,e),$t(Ji,r))}function Zw(e){tf.current===e&&(zt(Ji),zt(tf))}var Wt=Xs(0);function Sp(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sy=[];function e1(){for(var e=0;e<sy.length;e++)sy[e]._workInProgressVersionPrimary=null;sy.length=0}var qm=Ka.ReactCurrentDispatcher,oy=Ka.ReactCurrentBatchConfig,qo=0,Ht=null,pr=null,kr=null,kp=!1,Au=!1,nf=0,pB=0;function Dr(){throw Error(ge(321))}function t1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Oi(e[r],t[r]))return!1;return!0}function r1(e,t,r,i,a,s){if(qo=s,Ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qm.current=e===null||e.memoizedState===null?yB:bB,e=r(i,a),Au){s=0;do{if(Au=!1,nf=0,25<=s)throw Error(ge(301));s+=1,kr=pr=null,t.updateQueue=null,qm.current=jB,e=r(i,a)}while(Au)}if(qm.current=Cp,t=pr!==null&&pr.next!==null,qo=0,kr=pr=Ht=null,kp=!1,t)throw Error(ge(300));return e}function n1(){var e=nf!==0;return nf=0,e}function zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?Ht.memoizedState=kr=e:kr=kr.next=e,kr}function ni(){if(pr===null){var e=Ht.alternate;e=e!==null?e.memoizedState:null}else e=pr.next;var t=kr===null?Ht.memoizedState:kr.next;if(t!==null)kr=t,pr=e;else{if(e===null)throw Error(ge(310));pr=e,e={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},kr===null?Ht.memoizedState=kr=e:kr=kr.next=e}return kr}function af(e,t){return typeof t=="function"?t(e):t}function ly(e){var t=ni(),r=t.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=e;var i=pr,a=i.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}i.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,i=i.baseState;var l=o=null,c=null,d=s;do{var u=d.lane;if((qo&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=i):c=c.next=f,Ht.lanes|=u,Uo|=u}d=d.next}while(d!==null&&d!==s);c===null?o=i:c.next=l,Oi(i,t.memoizedState)||(hn=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,r.lastRenderedState=i}if(e=r.interleaved,e!==null){a=e;do s=a.lane,Ht.lanes|=s,Uo|=s,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function cy(e){var t=ni(),r=t.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=e;var i=r.dispatch,a=r.pending,s=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);Oi(s,t.memoizedState)||(hn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function u_(){}function f_(e,t){var r=Ht,i=ni(),a=t(),s=!Oi(i.memoizedState,a);if(s&&(i.memoizedState=a,hn=!0),i=i.queue,i1(p_.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||kr!==null&&kr.memoizedState.tag&1){if(r.flags|=2048,sf(9,m_.bind(null,r,i,a,t),void 0,null),Cr===null)throw Error(ge(349));qo&30||h_(r,t,a)}return a}function h_(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function m_(e,t,r,i){t.value=r,t.getSnapshot=i,g_(t)&&x_(e)}function p_(e,t,r){return r(function(){g_(t)&&x_(e)})}function g_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Oi(e,r)}catch{return!0}}function x_(e){var t=Ma(e,1);t!==null&&Ti(t,e,1,-1)}function S2(e){var t=zi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:af,lastRenderedState:e},t.queue=e,e=e.dispatch=vB.bind(null,Ht,e),[t.memoizedState,e]}function sf(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function v_(){return ni().memoizedState}function Um(e,t,r,i){var a=zi();Ht.flags|=e,a.memoizedState=sf(1|t,r,void 0,i===void 0?null:i)}function hx(e,t,r,i){var a=ni();i=i===void 0?null:i;var s=void 0;if(pr!==null){var o=pr.memoizedState;if(s=o.destroy,i!==null&&t1(i,o.deps)){a.memoizedState=sf(t,r,s,i);return}}Ht.flags|=e,a.memoizedState=sf(1|t,r,s,i)}function k2(e,t){return Um(8390656,8,e,t)}function i1(e,t){return hx(2048,8,e,t)}function y_(e,t){return hx(4,2,e,t)}function b_(e,t){return hx(4,4,e,t)}function j_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function w_(e,t,r){return r=r!=null?r.concat([e]):null,hx(4,4,j_.bind(null,t,e),r)}function a1(){}function N_(e,t){var r=ni();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&t1(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function S_(e,t){var r=ni();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&t1(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function k_(e,t,r){return qo&21?(Oi(r,t)||(r=TO(),Ht.lanes|=r,Uo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hn=!0),e.memoizedState=r)}function gB(e,t){var r=Pt;Pt=r!==0&&4>r?r:4,e(!0);var i=oy.transition;oy.transition={};try{e(!1),t()}finally{Pt=r,oy.transition=i}}function C_(){return ni().memoizedState}function xB(e,t,r){var i=_s(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},A_(e))E_(t,r);else if(r=l_(e,t,r,i),r!==null){var a=an();Ti(r,e,i,a),P_(r,t,i)}}function vB(e,t,r){var i=_s(e),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(A_(e))E_(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,Oi(l,o)){var c=t.interleaved;c===null?(a.next=a,Qw(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=l_(e,t,a,i),r!==null&&(a=an(),Ti(r,e,i,a),P_(r,t,i))}}function A_(e){var t=e.alternate;return e===Ht||t!==null&&t===Ht}function E_(e,t){Au=kp=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function P_(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,$w(e,r)}}var Cp={readContext:ri,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},yB={readContext:ri,useCallback:function(e,t){return zi().memoizedState=[e,t===void 0?null:t],e},useContext:ri,useEffect:k2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Um(4194308,4,j_.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Um(4194308,4,e,t)},useInsertionEffect:function(e,t){return Um(4,2,e,t)},useMemo:function(e,t){var r=zi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=zi();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=xB.bind(null,Ht,e),[i.memoizedState,e]},useRef:function(e){var t=zi();return e={current:e},t.memoizedState=e},useState:S2,useDebugValue:a1,useDeferredValue:function(e){return zi().memoizedState=e},useTransition:function(){var e=S2(!1),t=e[0];return e=gB.bind(null,e[1]),zi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Ht,a=zi();if(Ut){if(r===void 0)throw Error(ge(407));r=r()}else{if(r=t(),Cr===null)throw Error(ge(349));qo&30||h_(i,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,k2(p_.bind(null,i,s,e),[e]),i.flags|=2048,sf(9,m_.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=zi(),t=Cr.identifierPrefix;if(Ut){var r=ya,i=va;r=(i&~(1<<32-Pi(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=nf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=pB++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bB={readContext:ri,useCallback:N_,useContext:ri,useEffect:i1,useImperativeHandle:w_,useInsertionEffect:y_,useLayoutEffect:b_,useMemo:S_,useReducer:ly,useRef:v_,useState:function(){return ly(af)},useDebugValue:a1,useDeferredValue:function(e){var t=ni();return k_(t,pr.memoizedState,e)},useTransition:function(){var e=ly(af)[0],t=ni().memoizedState;return[e,t]},useMutableSource:u_,useSyncExternalStore:f_,useId:C_,unstable_isNewReconciler:!1},jB={readContext:ri,useCallback:N_,useContext:ri,useEffect:i1,useImperativeHandle:w_,useInsertionEffect:y_,useLayoutEffect:b_,useMemo:S_,useReducer:cy,useRef:v_,useState:function(){return cy(af)},useDebugValue:a1,useDeferredValue:function(e){var t=ni();return pr===null?t.memoizedState=e:k_(t,pr.memoizedState,e)},useTransition:function(){var e=cy(af)[0],t=ni().memoizedState;return[e,t]},useMutableSource:u_,useSyncExternalStore:f_,useId:C_,unstable_isNewReconciler:!1};function pi(e,t){if(e&&e.defaultProps){t=Kt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Vb(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Kt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var mx={isMounted:function(e){return(e=e._reactInternals)?sl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=an(),a=_s(e),s=Na(i,a);s.payload=t,r!=null&&(s.callback=r),t=Ts(e,s,a),t!==null&&(Ti(t,e,a,i),zm(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=an(),a=_s(e),s=Na(i,a);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Ts(e,s,a),t!==null&&(Ti(t,e,a,i),zm(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=an(),i=_s(e),a=Na(r,i);a.tag=2,t!=null&&(a.callback=t),t=Ts(e,a,i),t!==null&&(Ti(t,e,i,r),zm(t,e,i))}};function C2(e,t,r,i,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Ju(r,i)||!Ju(a,s):!0}function T_(e,t,r){var i=!1,a=qs,s=t.contextType;return typeof s=="object"&&s!==null?s=ri(s):(a=gn(t)?Bo:Hr.current,i=t.contextTypes,s=(i=i!=null)?kc(e,a):qs),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mx,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function A2(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&mx.enqueueReplaceState(t,t.state,null)}function Wb(e,t,r,i){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Jw(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=ri(s):(s=gn(t)?Bo:Hr.current,a.context=kc(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Vb(e,t,s,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&mx.enqueueReplaceState(a,a.state,null),Np(e,r,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Pc(e,t){try{var r="",i=t;do r+=YL(i),i=i.return;while(i);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function dy(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Hb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var wB=typeof WeakMap=="function"?WeakMap:Map;function O_(e,t,r){r=Na(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Ep||(Ep=!0,r0=i),Hb(e,t)},r}function __(e,t,r){r=Na(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;r.payload=function(){return i(a)},r.callback=function(){Hb(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Hb(e,t),typeof i!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function E2(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new wB;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(r)||(a.add(r),e=$B.bind(null,e,t,r),t.then(e,e))}function P2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function T2(e,t,r,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Na(-1,1),t.tag=2,Ts(r,t,1))),r.lanes|=1),e)}var NB=Ka.ReactCurrentOwner,hn=!1;function en(e,t,r,i){t.child=e===null?o_(t,null,r,i):Ac(t,e.child,r,i)}function O2(e,t,r,i,a){r=r.render;var s=t.ref;return Jl(t,a),i=r1(e,t,r,i,s,a),r=n1(),e!==null&&!hn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$a(e,t,a)):(Ut&&r&&Vw(t),t.flags|=1,en(e,t,i,a),t.child)}function _2(e,t,r,i,a){if(e===null){var s=r.type;return typeof s=="function"&&!h1(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,I_(e,t,s,i,a)):(e=Km(r.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Ju,r(o,i)&&e.ref===t.ref)return $a(e,t,a)}return t.flags|=1,e=Is(s,i),e.ref=t.ref,e.return=t,t.child=e}function I_(e,t,r,i,a){if(e!==null){var s=e.memoizedProps;if(Ju(s,i)&&e.ref===t.ref)if(hn=!1,t.pendingProps=i=s,(e.lanes&a)!==0)e.flags&131072&&(hn=!0);else return t.lanes=e.lanes,$a(e,t,a)}return Kb(e,t,r,i,a)}function R_(e,t,r){var i=t.pendingProps,a=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(Bl,Cn),Cn|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$t(Bl,Cn),Cn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,$t(Bl,Cn),Cn|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,$t(Bl,Cn),Cn|=i;return en(e,t,a,r),t.child}function M_(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Kb(e,t,r,i,a){var s=gn(r)?Bo:Hr.current;return s=kc(t,s),Jl(t,a),r=r1(e,t,r,i,s,a),i=n1(),e!==null&&!hn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$a(e,t,a)):(Ut&&i&&Vw(t),t.flags|=1,en(e,t,r,a),t.child)}function I2(e,t,r,i,a){if(gn(r)){var s=!0;vp(t)}else s=!1;if(Jl(t,a),t.stateNode===null)Vm(e,t),T_(t,r,i),Wb(t,r,i,a),i=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=ri(d):(d=gn(r)?Bo:Hr.current,d=kc(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==d)&&A2(t,o,i,d),ss=!1;var h=t.memoizedState;o.state=h,Np(t,i,o,a),c=t.memoizedState,l!==i||h!==c||pn.current||ss?(typeof u=="function"&&(Vb(t,r,u,i),c=t.memoizedState),(l=ss||C2(t,r,l,i,h,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=d,i=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,c_(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:pi(t.type,l),o.props=d,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ri(c):(c=gn(r)?Bo:Hr.current,c=kc(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&A2(t,o,i,c),ss=!1,h=t.memoizedState,o.state=h,Np(t,i,o,a);var y=t.memoizedState;l!==f||h!==y||pn.current||ss?(typeof p=="function"&&(Vb(t,r,p,i),y=t.memoizedState),(d=ss||C2(t,r,d,i,h,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),o.props=i,o.state=y,o.context=c,i=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Gb(e,t,r,i,s,a)}function Gb(e,t,r,i,a,s){M_(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return a&&v2(t,r,!1),$a(e,t,s);i=t.stateNode,NB.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Ac(t,e.child,null,s),t.child=Ac(t,null,l,s)):en(e,t,l,s),t.memoizedState=i.state,a&&v2(t,r,!0),t.child}function $_(e){var t=e.stateNode;t.pendingContext?x2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&x2(e,t.context,!1),Xw(e,t.containerInfo)}function R2(e,t,r,i,a){return Cc(),Hw(a),t.flags|=256,en(e,t,r,i),t.child}var Yb={dehydrated:null,treeContext:null,retryLane:0};function Qb(e){return{baseLanes:e,cachePool:null,transitions:null}}function F_(e,t,r){var i=t.pendingProps,a=Wt.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),$t(Wt,a&1),e===null)return qb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xx(o,i,0,null),e=$o(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Qb(r),t.memoizedState=Yb,e):s1(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return SB(e,t,o,i,l,a,r);if(s){s=i.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=Is(a,c),i.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=Is(l,s):(s=$o(s,o,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?Qb(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Yb,i}return s=e.child,e=s.sibling,i=Is(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function s1(e,t){return t=xx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function am(e,t,r,i){return i!==null&&Hw(i),Ac(t,e.child,null,r),e=s1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function SB(e,t,r,i,a,s,o){if(r)return t.flags&256?(t.flags&=-257,i=dy(Error(ge(422))),am(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=xx({mode:"visible",children:i.children},a,0,null),s=$o(s,a,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Ac(t,e.child,null,o),t.child.memoizedState=Qb(o),t.memoizedState=Yb,s);if(!(t.mode&1))return am(e,t,o,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(ge(419)),i=dy(s,i,void 0),am(e,t,o,i)}if(l=(o&e.childLanes)!==0,hn||l){if(i=Cr,i!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,Ma(e,a),Ti(i,e,a,-1))}return f1(),i=dy(Error(ge(421))),am(e,t,o,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=FB.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,On=Ps(a.nextSibling),_n=t,Ut=!0,ji=null,e!==null&&(Kn[Gn++]=va,Kn[Gn++]=ya,Kn[Gn++]=zo,va=e.id,ya=e.overflow,zo=t),t=s1(t,i.children),t.flags|=4096,t)}function M2(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Ub(e.return,t,r)}function uy(e,t,r,i,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=a)}function D_(e,t,r){var i=t.pendingProps,a=i.revealOrder,s=i.tail;if(en(e,t,i.children,r),i=Wt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&M2(e,r,t);else if(e.tag===19)M2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if($t(Wt,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Sp(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),uy(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Sp(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}uy(t,!0,r,null,s);break;case"together":uy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $a(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Uo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ge(153));if(t.child!==null){for(e=t.child,r=Is(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Is(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function kB(e,t,r){switch(t.tag){case 3:$_(t),Cc();break;case 5:d_(t);break;case 1:gn(t.type)&&vp(t);break;case 4:Xw(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;$t(jp,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?($t(Wt,Wt.current&1),t.flags|=128,null):r&t.child.childLanes?F_(e,t,r):($t(Wt,Wt.current&1),e=$a(e,t,r),e!==null?e.sibling:null);$t(Wt,Wt.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return D_(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$t(Wt,Wt.current),i)break;return null;case 22:case 23:return t.lanes=0,R_(e,t,r)}return $a(e,t,r)}var L_,Jb,B_,z_;L_=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Jb=function(){};B_=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,wo(Ji.current);var s=null;switch(r){case"input":a=yb(e,a),i=yb(e,i),s=[];break;case"select":a=Kt({},a,{value:void 0}),i=Kt({},i,{value:void 0}),s=[];break;case"textarea":a=wb(e,a),i=wb(e,i),s=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=gp)}Sb(r,i);var o;r=null;for(d in a)if(!i.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Vu.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var c=i[d];if(l=a!=null?a[d]:void 0,i.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Vu.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Dt("scroll",e),s||l===c||(s=[])):(s=s||[]).push(d,c))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};z_=function(e,t,r,i){r!==i&&(t.flags|=4)};function Yd(e,t){if(!Ut)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function CB(e,t,r){var i=t.pendingProps;switch(Ww(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(t),null;case 1:return gn(t.type)&&xp(),Lr(t),null;case 3:return i=t.stateNode,Ec(),zt(pn),zt(Hr),e1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(nm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ji!==null&&(a0(ji),ji=null))),Jb(e,t),Lr(t),null;case 5:Zw(t);var a=wo(rf.current);if(r=t.type,e!==null&&t.stateNode!=null)B_(e,t,r,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(ge(166));return Lr(t),null}if(e=wo(Ji.current),nm(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[Hi]=t,i[ef]=s,e=(t.mode&1)!==0,r){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(a=0;a<xu.length;a++)Dt(xu[a],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":VS(i,s),Dt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Dt("invalid",i);break;case"textarea":HS(i,s),Dt("invalid",i)}Sb(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&rm(i.textContent,l,e),a=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&rm(i.textContent,l,e),a=["children",""+l]):Vu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Dt("scroll",i)}switch(r){case"input":Gh(i),WS(i,s,!0);break;case"textarea":Gh(i),KS(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=gp)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pO(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(r,{is:i.is}):(e=o.createElement(r),r==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,r),e[Hi]=t,e[ef]=i,L_(e,t,!1,!1),t.stateNode=e;e:{switch(o=kb(r,i),r){case"dialog":Dt("cancel",e),Dt("close",e),a=i;break;case"iframe":case"object":case"embed":Dt("load",e),a=i;break;case"video":case"audio":for(a=0;a<xu.length;a++)Dt(xu[a],e);a=i;break;case"source":Dt("error",e),a=i;break;case"img":case"image":case"link":Dt("error",e),Dt("load",e),a=i;break;case"details":Dt("toggle",e),a=i;break;case"input":VS(e,i),a=yb(e,i),Dt("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Kt({},i,{value:void 0}),Dt("invalid",e);break;case"textarea":HS(e,i),a=wb(e,i),Dt("invalid",e);break;default:a=i}Sb(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?vO(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gO(e,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Wu(e,c):typeof c=="number"&&Wu(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Vu.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Dt("scroll",e):c!=null&&Tw(e,s,c,o))}switch(r){case"input":Gh(e),WS(e,i,!1);break;case"textarea":Gh(e),KS(e);break;case"option":i.value!=null&&e.setAttribute("value",""+zs(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?Kl(e,!!i.multiple,s,!1):i.defaultValue!=null&&Kl(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=gp)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Lr(t),null;case 6:if(e&&t.stateNode!=null)z_(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ge(166));if(r=wo(rf.current),wo(Ji.current),nm(t)){if(i=t.stateNode,r=t.memoizedProps,i[Hi]=t,(s=i.nodeValue!==r)&&(e=_n,e!==null))switch(e.tag){case 3:rm(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rm(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Hi]=t,t.stateNode=i}return Lr(t),null;case 13:if(zt(Wt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ut&&On!==null&&t.mode&1&&!(t.flags&128))a_(),Cc(),t.flags|=98560,s=!1;else if(s=nm(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(ge(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ge(317));s[Hi]=t}else Cc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Lr(t),s=!1}else ji!==null&&(a0(ji),ji=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Wt.current&1?xr===0&&(xr=3):f1())),t.updateQueue!==null&&(t.flags|=4),Lr(t),null);case 4:return Ec(),Jb(e,t),e===null&&Xu(t.stateNode.containerInfo),Lr(t),null;case 10:return Yw(t.type._context),Lr(t),null;case 17:return gn(t.type)&&xp(),Lr(t),null;case 19:if(zt(Wt),s=t.memoizedState,s===null)return Lr(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Yd(s,!1);else{if(xr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Sp(e),o!==null){for(t.flags|=128,Yd(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $t(Wt,Wt.current&1|2),t.child}e=e.sibling}s.tail!==null&&nr()>Tc&&(t.flags|=128,i=!0,Yd(s,!1),t.lanes=4194304)}else{if(!i)if(e=Sp(o),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Yd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ut)return Lr(t),null}else 2*nr()-s.renderingStartTime>Tc&&r!==1073741824&&(t.flags|=128,i=!0,Yd(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=nr(),t.sibling=null,r=Wt.current,$t(Wt,i?r&1|2:r&1),t):(Lr(t),null);case 22:case 23:return u1(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Cn&1073741824&&(Lr(t),t.subtreeFlags&6&&(t.flags|=8192)):Lr(t),null;case 24:return null;case 25:return null}throw Error(ge(156,t.tag))}function AB(e,t){switch(Ww(t),t.tag){case 1:return gn(t.type)&&xp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ec(),zt(pn),zt(Hr),e1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zw(t),null;case 13:if(zt(Wt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ge(340));Cc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zt(Wt),null;case 4:return Ec(),null;case 10:return Yw(t.type._context),null;case 22:case 23:return u1(),null;case 24:return null;default:return null}}var sm=!1,qr=!1,EB=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Ll(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Jt(e,t,i)}else r.current=null}function Xb(e,t,r){try{r()}catch(i){Jt(e,t,i)}}var $2=!1;function PB(e,t){if(Mb=hp,e=HO(),Uw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=e,h=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==s||i!==0&&f.nodeType!==3||(c=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++d===a&&(l=o),h===s&&++u===i&&(c=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for($b={focusedElem:e,selectionRange:r},hp=!1,Me=t;Me!==null;)if(t=Me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Me=e;else for(;Me!==null;){t=Me;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:pi(t.type,v),b);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(N){Jt(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Me=e;break}Me=t.return}return y=$2,$2=!1,y}function Eu(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&Xb(t,r,s)}a=a.next}while(a!==i)}}function px(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Zb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function q_(e){var t=e.alternate;t!==null&&(e.alternate=null,q_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Hi],delete t[ef],delete t[Lb],delete t[uB],delete t[fB])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function U_(e){return e.tag===5||e.tag===3||e.tag===4}function F2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||U_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function e0(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=gp));else if(i!==4&&(e=e.child,e!==null))for(e0(e,t,r),e=e.sibling;e!==null;)e0(e,t,r),e=e.sibling}function t0(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(t0(e,t,r),e=e.sibling;e!==null;)t0(e,t,r),e=e.sibling}var Or=null,xi=!1;function Xa(e,t,r){for(r=r.child;r!==null;)V_(e,t,r),r=r.sibling}function V_(e,t,r){if(Qi&&typeof Qi.onCommitFiberUnmount=="function")try{Qi.onCommitFiberUnmount(ox,r)}catch{}switch(r.tag){case 5:qr||Ll(r,t);case 6:var i=Or,a=xi;Or=null,Xa(e,t,r),Or=i,xi=a,Or!==null&&(xi?(e=Or,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Or.removeChild(r.stateNode));break;case 18:Or!==null&&(xi?(e=Or,r=r.stateNode,e.nodeType===8?iy(e.parentNode,r):e.nodeType===1&&iy(e,r),Yu(e)):iy(Or,r.stateNode));break;case 4:i=Or,a=xi,Or=r.stateNode.containerInfo,xi=!0,Xa(e,t,r),Or=i,xi=a;break;case 0:case 11:case 14:case 15:if(!qr&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xb(r,t,o),a=a.next}while(a!==i)}Xa(e,t,r);break;case 1:if(!qr&&(Ll(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Jt(r,t,l)}Xa(e,t,r);break;case 21:Xa(e,t,r);break;case 22:r.mode&1?(qr=(i=qr)||r.memoizedState!==null,Xa(e,t,r),qr=i):Xa(e,t,r);break;default:Xa(e,t,r)}}function D2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new EB),t.forEach(function(i){var a=DB.bind(null,e,i);r.has(i)||(r.add(i),i.then(a,a))})}}function ui(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Or=l.stateNode,xi=!1;break e;case 3:Or=l.stateNode.containerInfo,xi=!0;break e;case 4:Or=l.stateNode.containerInfo,xi=!0;break e}l=l.return}if(Or===null)throw Error(ge(160));V_(s,o,a),Or=null,xi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Jt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)W_(t,e),t=t.sibling}function W_(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ui(t,e),Bi(e),i&4){try{Eu(3,e,e.return),px(3,e)}catch(v){Jt(e,e.return,v)}try{Eu(5,e,e.return)}catch(v){Jt(e,e.return,v)}}break;case 1:ui(t,e),Bi(e),i&512&&r!==null&&Ll(r,r.return);break;case 5:if(ui(t,e),Bi(e),i&512&&r!==null&&Ll(r,r.return),e.flags&32){var a=e.stateNode;try{Wu(a,"")}catch(v){Jt(e,e.return,v)}}if(i&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&hO(a,s),kb(l,o);var d=kb(l,s);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?vO(a,f):u==="dangerouslySetInnerHTML"?gO(a,f):u==="children"?Wu(a,f):Tw(a,u,f,d)}switch(l){case"input":bb(a,s);break;case"textarea":mO(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Kl(a,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Kl(a,!!s.multiple,s.defaultValue,!0):Kl(a,!!s.multiple,s.multiple?[]:"",!1))}a[ef]=s}catch(v){Jt(e,e.return,v)}}break;case 6:if(ui(t,e),Bi(e),i&4){if(e.stateNode===null)throw Error(ge(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(v){Jt(e,e.return,v)}}break;case 3:if(ui(t,e),Bi(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Yu(t.containerInfo)}catch(v){Jt(e,e.return,v)}break;case 4:ui(t,e),Bi(e);break;case 13:ui(t,e),Bi(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(c1=nr())),i&4&&D2(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(qr=(d=qr)||u,ui(t,e),qr=d):ui(t,e),Bi(e),i&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Me=e,u=e.child;u!==null;){for(f=Me=u;Me!==null;){switch(h=Me,p=h.child,h.tag){case 0:case 11:case 14:case 15:Eu(4,h,h.return);break;case 1:Ll(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){i=h,r=h.return;try{t=i,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){Jt(i,r,v)}}break;case 5:Ll(h,h.return);break;case 22:if(h.memoizedState!==null){B2(f);continue}}p!==null?(p.return=h,Me=p):B2(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,d?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=xO("display",o))}catch(v){Jt(e,e.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){Jt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ui(t,e),Bi(e),i&4&&D2(e);break;case 21:break;default:ui(t,e),Bi(e)}}function Bi(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(U_(r)){var i=r;break e}r=r.return}throw Error(ge(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Wu(a,""),i.flags&=-33);var s=F2(e);t0(e,s,a);break;case 3:case 4:var o=i.stateNode.containerInfo,l=F2(e);e0(e,l,o);break;default:throw Error(ge(161))}}catch(c){Jt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function TB(e,t,r){Me=e,H_(e)}function H_(e,t,r){for(var i=(e.mode&1)!==0;Me!==null;){var a=Me,s=a.child;if(a.tag===22&&i){var o=a.memoizedState!==null||sm;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||qr;l=sm;var d=qr;if(sm=o,(qr=c)&&!d)for(Me=a;Me!==null;)o=Me,c=o.child,o.tag===22&&o.memoizedState!==null?z2(a):c!==null?(c.return=o,Me=c):z2(a);for(;s!==null;)Me=s,H_(s),s=s.sibling;Me=a,sm=l,qr=d}L2(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Me=s):L2(e)}}function L2(e){for(;Me!==null;){var t=Me;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qr||px(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!qr)if(r===null)i.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:pi(t.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&N2(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}N2(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Yu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}qr||t.flags&512&&Zb(t)}catch(h){Jt(t,t.return,h)}}if(t===e){Me=null;break}if(r=t.sibling,r!==null){r.return=t.return,Me=r;break}Me=t.return}}function B2(e){for(;Me!==null;){var t=Me;if(t===e){Me=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Me=r;break}Me=t.return}}function z2(e){for(;Me!==null;){var t=Me;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{px(4,t)}catch(c){Jt(t,r,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(c){Jt(t,a,c)}}var s=t.return;try{Zb(t)}catch(c){Jt(t,s,c)}break;case 5:var o=t.return;try{Zb(t)}catch(c){Jt(t,o,c)}}}catch(c){Jt(t,t.return,c)}if(t===e){Me=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Me=l;break}Me=t.return}}var OB=Math.ceil,Ap=Ka.ReactCurrentDispatcher,o1=Ka.ReactCurrentOwner,Xn=Ka.ReactCurrentBatchConfig,xt=0,Cr=null,cr=null,Rr=0,Cn=0,Bl=Xs(0),xr=0,of=null,Uo=0,gx=0,l1=0,Pu=null,fn=null,c1=0,Tc=1/0,pa=null,Ep=!1,r0=null,Os=null,om=!1,Ns=null,Pp=0,Tu=0,n0=null,Wm=-1,Hm=0;function an(){return xt&6?nr():Wm!==-1?Wm:Wm=nr()}function _s(e){return e.mode&1?xt&2&&Rr!==0?Rr&-Rr:mB.transition!==null?(Hm===0&&(Hm=TO()),Hm):(e=Pt,e!==0||(e=window.event,e=e===void 0?16:FO(e.type)),e):1}function Ti(e,t,r,i){if(50<Tu)throw Tu=0,n0=null,Error(ge(185));ph(e,r,i),(!(xt&2)||e!==Cr)&&(e===Cr&&(!(xt&2)&&(gx|=r),xr===4&&ds(e,Rr)),xn(e,i),r===1&&xt===0&&!(t.mode&1)&&(Tc=nr()+500,fx&&Zs()))}function xn(e,t){var r=e.callbackNode;m6(e,t);var i=fp(e,e===Cr?Rr:0);if(i===0)r!==null&&QS(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&QS(r),t===1)e.tag===0?hB(q2.bind(null,e)):r_(q2.bind(null,e)),cB(function(){!(xt&6)&&Zs()}),r=null;else{switch(OO(i)){case 1:r=Mw;break;case 4:r=EO;break;case 16:r=up;break;case 536870912:r=PO;break;default:r=up}r=e4(r,K_.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function K_(e,t){if(Wm=-1,Hm=0,xt&6)throw Error(ge(327));var r=e.callbackNode;if(Xl()&&e.callbackNode!==r)return null;var i=fp(e,e===Cr?Rr:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Tp(e,i);else{t=i;var a=xt;xt|=2;var s=Y_();(Cr!==e||Rr!==t)&&(pa=null,Tc=nr()+500,Mo(e,t));do try{RB();break}catch(l){G_(e,l)}while(!0);Gw(),Ap.current=s,xt=a,cr!==null?t=0:(Cr=null,Rr=0,t=xr)}if(t!==0){if(t===2&&(a=Tb(e),a!==0&&(i=a,t=i0(e,a))),t===1)throw r=of,Mo(e,0),ds(e,i),xn(e,nr()),r;if(t===6)ds(e,i);else{if(a=e.current.alternate,!(i&30)&&!_B(a)&&(t=Tp(e,i),t===2&&(s=Tb(e),s!==0&&(i=s,t=i0(e,s))),t===1))throw r=of,Mo(e,0),ds(e,i),xn(e,nr()),r;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(ge(345));case 2:mo(e,fn,pa);break;case 3:if(ds(e,i),(i&130023424)===i&&(t=c1+500-nr(),10<t)){if(fp(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){an(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Db(mo.bind(null,e,fn,pa),t);break}mo(e,fn,pa);break;case 4:if(ds(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var o=31-Pi(i);s=1<<o,o=t[o],o>a&&(a=o),i&=~s}if(i=a,i=nr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*OB(i/1960))-i,10<i){e.timeoutHandle=Db(mo.bind(null,e,fn,pa),i);break}mo(e,fn,pa);break;case 5:mo(e,fn,pa);break;default:throw Error(ge(329))}}}return xn(e,nr()),e.callbackNode===r?K_.bind(null,e):null}function i0(e,t){var r=Pu;return e.current.memoizedState.isDehydrated&&(Mo(e,t).flags|=256),e=Tp(e,t),e!==2&&(t=fn,fn=r,t!==null&&a0(t)),e}function a0(e){fn===null?fn=e:fn.push.apply(fn,e)}function _B(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],s=a.getSnapshot;a=a.value;try{if(!Oi(s(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ds(e,t){for(t&=~l1,t&=~gx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Pi(t),i=1<<r;e[r]=-1,t&=~i}}function q2(e){if(xt&6)throw Error(ge(327));Xl();var t=fp(e,0);if(!(t&1))return xn(e,nr()),null;var r=Tp(e,t);if(e.tag!==0&&r===2){var i=Tb(e);i!==0&&(t=i,r=i0(e,i))}if(r===1)throw r=of,Mo(e,0),ds(e,t),xn(e,nr()),r;if(r===6)throw Error(ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mo(e,fn,pa),xn(e,nr()),null}function d1(e,t){var r=xt;xt|=1;try{return e(t)}finally{xt=r,xt===0&&(Tc=nr()+500,fx&&Zs())}}function Vo(e){Ns!==null&&Ns.tag===0&&!(xt&6)&&Xl();var t=xt;xt|=1;var r=Xn.transition,i=Pt;try{if(Xn.transition=null,Pt=1,e)return e()}finally{Pt=i,Xn.transition=r,xt=t,!(xt&6)&&Zs()}}function u1(){Cn=Bl.current,zt(Bl)}function Mo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,lB(r)),cr!==null)for(r=cr.return;r!==null;){var i=r;switch(Ww(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&xp();break;case 3:Ec(),zt(pn),zt(Hr),e1();break;case 5:Zw(i);break;case 4:Ec();break;case 13:zt(Wt);break;case 19:zt(Wt);break;case 10:Yw(i.type._context);break;case 22:case 23:u1()}r=r.return}if(Cr=e,cr=e=Is(e.current,null),Rr=Cn=t,xr=0,of=null,l1=gx=Uo=0,fn=Pu=null,jo!==null){for(t=0;t<jo.length;t++)if(r=jo[t],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,i.next=o}r.pending=i}jo=null}return e}function G_(e,t){do{var r=cr;try{if(Gw(),qm.current=Cp,kp){for(var i=Ht.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}kp=!1}if(qo=0,kr=pr=Ht=null,Au=!1,nf=0,o1.current=null,r===null||r.return===null){xr=1,of=t,cr=null;break}e:{var s=e,o=r.return,l=r,c=t;if(t=Rr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=P2(o);if(p!==null){p.flags&=-257,T2(p,o,l,s,t),p.mode&1&&E2(s,d,t),t=p,c=d;var y=t.updateQueue;if(y===null){var v=new Set;v.add(c),t.updateQueue=v}else y.add(c);break e}else{if(!(t&1)){E2(s,d,t),f1();break e}c=Error(ge(426))}}else if(Ut&&l.mode&1){var b=P2(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),T2(b,o,l,s,t),Hw(Pc(c,l));break e}}s=c=Pc(c,l),xr!==4&&(xr=2),Pu===null?Pu=[s]:Pu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=O_(s,c,t);w2(s,x);break e;case 1:l=c;var m=s.type,j=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Os===null||!Os.has(j)))){s.flags|=65536,t&=-t,s.lanes|=t;var N=__(s,l,t);w2(s,N);break e}}s=s.return}while(s!==null)}J_(r)}catch(w){t=w,cr===r&&r!==null&&(cr=r=r.return);continue}break}while(!0)}function Y_(){var e=Ap.current;return Ap.current=Cp,e===null?Cp:e}function f1(){(xr===0||xr===3||xr===2)&&(xr=4),Cr===null||!(Uo&268435455)&&!(gx&268435455)||ds(Cr,Rr)}function Tp(e,t){var r=xt;xt|=2;var i=Y_();(Cr!==e||Rr!==t)&&(pa=null,Mo(e,t));do try{IB();break}catch(a){G_(e,a)}while(!0);if(Gw(),xt=r,Ap.current=i,cr!==null)throw Error(ge(261));return Cr=null,Rr=0,xr}function IB(){for(;cr!==null;)Q_(cr)}function RB(){for(;cr!==null&&!a6();)Q_(cr)}function Q_(e){var t=Z_(e.alternate,e,Cn);e.memoizedProps=e.pendingProps,t===null?J_(e):cr=t,o1.current=null}function J_(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=AB(r,t),r!==null){r.flags&=32767,cr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xr=6,cr=null;return}}else if(r=CB(r,t,Cn),r!==null){cr=r;return}if(t=t.sibling,t!==null){cr=t;return}cr=t=e}while(t!==null);xr===0&&(xr=5)}function mo(e,t,r){var i=Pt,a=Xn.transition;try{Xn.transition=null,Pt=1,MB(e,t,r,i)}finally{Xn.transition=a,Pt=i}return null}function MB(e,t,r,i){do Xl();while(Ns!==null);if(xt&6)throw Error(ge(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ge(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(p6(e,s),e===Cr&&(cr=Cr=null,Rr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||om||(om=!0,e4(up,function(){return Xl(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Xn.transition,Xn.transition=null;var o=Pt;Pt=1;var l=xt;xt|=4,o1.current=null,PB(e,r),W_(r,e),tB($b),hp=!!Mb,$b=Mb=null,e.current=r,TB(r),s6(),xt=l,Pt=o,Xn.transition=s}else e.current=r;if(om&&(om=!1,Ns=e,Pp=a),s=e.pendingLanes,s===0&&(Os=null),c6(r.stateNode),xn(e,nr()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(Ep)throw Ep=!1,e=r0,r0=null,e;return Pp&1&&e.tag!==0&&Xl(),s=e.pendingLanes,s&1?e===n0?Tu++:(Tu=0,n0=e):Tu=0,Zs(),null}function Xl(){if(Ns!==null){var e=OO(Pp),t=Xn.transition,r=Pt;try{if(Xn.transition=null,Pt=16>e?16:e,Ns===null)var i=!1;else{if(e=Ns,Ns=null,Pp=0,xt&6)throw Error(ge(331));var a=xt;for(xt|=4,Me=e.current;Me!==null;){var s=Me,o=s.child;if(Me.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Me=d;Me!==null;){var u=Me;switch(u.tag){case 0:case 11:case 15:Eu(8,u,s)}var f=u.child;if(f!==null)f.return=u,Me=f;else for(;Me!==null;){u=Me;var h=u.sibling,p=u.return;if(q_(u),u===d){Me=null;break}if(h!==null){h.return=p,Me=h;break}Me=p}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Me=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Me=o;else e:for(;Me!==null;){if(s=Me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eu(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Me=x;break e}Me=s.return}}var m=e.current;for(Me=m;Me!==null;){o=Me;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,Me=j;else e:for(o=m;Me!==null;){if(l=Me,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:px(9,l)}}catch(w){Jt(l,l.return,w)}if(l===o){Me=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Me=N;break e}Me=l.return}}if(xt=a,Zs(),Qi&&typeof Qi.onPostCommitFiberRoot=="function")try{Qi.onPostCommitFiberRoot(ox,e)}catch{}i=!0}return i}finally{Pt=r,Xn.transition=t}}return!1}function U2(e,t,r){t=Pc(r,t),t=O_(e,t,1),e=Ts(e,t,1),t=an(),e!==null&&(ph(e,1,t),xn(e,t))}function Jt(e,t,r){if(e.tag===3)U2(e,e,r);else for(;t!==null;){if(t.tag===3){U2(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Os===null||!Os.has(i))){e=Pc(r,e),e=__(t,e,1),t=Ts(t,e,1),e=an(),t!==null&&(ph(t,1,e),xn(t,e));break}}t=t.return}}function $B(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=an(),e.pingedLanes|=e.suspendedLanes&r,Cr===e&&(Rr&r)===r&&(xr===4||xr===3&&(Rr&130023424)===Rr&&500>nr()-c1?Mo(e,0):l1|=r),xn(e,t)}function X_(e,t){t===0&&(e.mode&1?(t=Jh,Jh<<=1,!(Jh&130023424)&&(Jh=4194304)):t=1);var r=an();e=Ma(e,t),e!==null&&(ph(e,t,r),xn(e,r))}function FB(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),X_(e,r)}function DB(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ge(314))}i!==null&&i.delete(t),X_(e,r)}var Z_;Z_=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||pn.current)hn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return hn=!1,kB(e,t,r);hn=!!(e.flags&131072)}else hn=!1,Ut&&t.flags&1048576&&n_(t,bp,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Vm(e,t),e=t.pendingProps;var a=kc(t,Hr.current);Jl(t,r),a=r1(null,t,i,e,a,r);var s=n1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gn(i)?(s=!0,vp(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Jw(t),a.updater=mx,t.stateNode=a,a._reactInternals=t,Wb(t,i,e,r),t=Gb(null,t,i,!0,s,r)):(t.tag=0,Ut&&s&&Vw(t),en(null,t,a,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Vm(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=BB(i),e=pi(i,e),a){case 0:t=Kb(null,t,i,e,r);break e;case 1:t=I2(null,t,i,e,r);break e;case 11:t=O2(null,t,i,e,r);break e;case 14:t=_2(null,t,i,pi(i.type,e),r);break e}throw Error(ge(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:pi(i,a),Kb(e,t,i,a,r);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:pi(i,a),I2(e,t,i,a,r);case 3:e:{if($_(t),e===null)throw Error(ge(387));i=t.pendingProps,s=t.memoizedState,a=s.element,c_(e,t),Np(t,i,null,r);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=Pc(Error(ge(423)),t),t=R2(e,t,i,r,a);break e}else if(i!==a){a=Pc(Error(ge(424)),t),t=R2(e,t,i,r,a);break e}else for(On=Ps(t.stateNode.containerInfo.firstChild),_n=t,Ut=!0,ji=null,r=o_(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Cc(),i===a){t=$a(e,t,r);break e}en(e,t,i,r)}t=t.child}return t;case 5:return d_(t),e===null&&qb(t),i=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,Fb(i,a)?o=null:s!==null&&Fb(i,s)&&(t.flags|=32),M_(e,t),en(e,t,o,r),t.child;case 6:return e===null&&qb(t),null;case 13:return F_(e,t,r);case 4:return Xw(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ac(t,null,i,r):en(e,t,i,r),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:pi(i,a),O2(e,t,i,a,r);case 7:return en(e,t,t.pendingProps,r),t.child;case 8:return en(e,t,t.pendingProps.children,r),t.child;case 12:return en(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,$t(jp,i._currentValue),i._currentValue=o,s!==null)if(Oi(s.value,o)){if(s.children===a.children&&!pn.current){t=$a(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Na(-1,r&-r),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Ub(s.return,r,t),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ge(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ub(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}en(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Jl(t,r),a=ri(a),i=i(a),t.flags|=1,en(e,t,i,r),t.child;case 14:return i=t.type,a=pi(i,t.pendingProps),a=pi(i.type,a),_2(e,t,i,a,r);case 15:return I_(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:pi(i,a),Vm(e,t),t.tag=1,gn(i)?(e=!0,vp(t)):e=!1,Jl(t,r),T_(t,i,a),Wb(t,i,a,r),Gb(null,t,i,!0,e,r);case 19:return D_(e,t,r);case 22:return R_(e,t,r)}throw Error(ge(156,t.tag))};function e4(e,t){return AO(e,t)}function LB(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(e,t,r,i){return new LB(e,t,r,i)}function h1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function BB(e){if(typeof e=="function")return h1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_w)return 11;if(e===Iw)return 14}return 2}function Is(e,t){var r=e.alternate;return r===null?(r=Yn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Km(e,t,r,i,a,s){var o=2;if(i=e,typeof e=="function")h1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tl:return $o(r.children,a,s,t);case Ow:o=8,a|=8;break;case pb:return e=Yn(12,r,t,a|2),e.elementType=pb,e.lanes=s,e;case gb:return e=Yn(13,r,t,a),e.elementType=gb,e.lanes=s,e;case xb:return e=Yn(19,r,t,a),e.elementType=xb,e.lanes=s,e;case dO:return xx(r,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lO:o=10;break e;case cO:o=9;break e;case _w:o=11;break e;case Iw:o=14;break e;case as:o=16,i=null;break e}throw Error(ge(130,e==null?e:typeof e,""))}return t=Yn(o,r,t,a),t.elementType=e,t.type=i,t.lanes=s,t}function $o(e,t,r,i){return e=Yn(7,e,i,t),e.lanes=r,e}function xx(e,t,r,i){return e=Yn(22,e,i,t),e.elementType=dO,e.lanes=r,e.stateNode={isHidden:!1},e}function fy(e,t,r){return e=Yn(6,e,null,t),e.lanes=r,e}function hy(e,t,r){return t=Yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zB(e,t,r,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kv(0),this.expirationTimes=Kv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kv(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function m1(e,t,r,i,a,s,o,l,c){return e=new zB(e,t,r,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Yn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jw(s),e}function qB(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pl,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function t4(e){if(!e)return qs;e=e._reactInternals;e:{if(sl(e)!==e||e.tag!==1)throw Error(ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ge(171))}if(e.tag===1){var r=e.type;if(gn(r))return t_(e,r,t)}return t}function r4(e,t,r,i,a,s,o,l,c){return e=m1(r,i,!0,e,a,s,o,l,c),e.context=t4(null),r=e.current,i=an(),a=_s(r),s=Na(i,a),s.callback=t??null,Ts(r,s,a),e.current.lanes=a,ph(e,a,i),xn(e,i),e}function vx(e,t,r,i){var a=t.current,s=an(),o=_s(a);return r=t4(r),t.context===null?t.context=r:t.pendingContext=r,t=Na(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Ts(a,t,o),e!==null&&(Ti(e,a,o,s),zm(e,a,o)),o}function Op(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function V2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function p1(e,t){V2(e,t),(e=e.alternate)&&V2(e,t)}function UB(){return null}var n4=typeof reportError=="function"?reportError:function(e){console.error(e)};function g1(e){this._internalRoot=e}yx.prototype.render=g1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ge(409));vx(e,t,null,null)};yx.prototype.unmount=g1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vo(function(){vx(null,e,null,null)}),t[Ra]=null}};function yx(e){this._internalRoot=e}yx.prototype.unstable_scheduleHydration=function(e){if(e){var t=RO();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cs.length&&t!==0&&t<cs[r].priority;r++);cs.splice(r,0,e),r===0&&$O(e)}};function x1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function W2(){}function VB(e,t,r,i,a){if(a){if(typeof i=="function"){var s=i;i=function(){var d=Op(o);s.call(d)}}var o=r4(t,i,e,0,null,!1,!1,"",W2);return e._reactRootContainer=o,e[Ra]=o.current,Xu(e.nodeType===8?e.parentNode:e),Vo(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var l=i;i=function(){var d=Op(c);l.call(d)}}var c=m1(e,0,!1,null,null,!1,!1,"",W2);return e._reactRootContainer=c,e[Ra]=c.current,Xu(e.nodeType===8?e.parentNode:e),Vo(function(){vx(t,c,r,i)}),c}function jx(e,t,r,i,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=Op(o);l.call(c)}}vx(t,o,e,a)}else o=VB(r,t,e,a,i);return Op(o)}_O=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=gu(t.pendingLanes);r!==0&&($w(t,r|1),xn(t,nr()),!(xt&6)&&(Tc=nr()+500,Zs()))}break;case 13:Vo(function(){var i=Ma(e,1);if(i!==null){var a=an();Ti(i,e,1,a)}}),p1(e,1)}};Fw=function(e){if(e.tag===13){var t=Ma(e,134217728);if(t!==null){var r=an();Ti(t,e,134217728,r)}p1(e,134217728)}};IO=function(e){if(e.tag===13){var t=_s(e),r=Ma(e,t);if(r!==null){var i=an();Ti(r,e,t,i)}p1(e,t)}};RO=function(){return Pt};MO=function(e,t){var r=Pt;try{return Pt=e,t()}finally{Pt=r}};Ab=function(e,t,r){switch(t){case"input":if(bb(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var a=ux(i);if(!a)throw Error(ge(90));fO(i),bb(i,a)}}}break;case"textarea":mO(e,r);break;case"select":t=r.value,t!=null&&Kl(e,!!r.multiple,t,!1)}};jO=d1;wO=Vo;var WB={usingClientEntryPoint:!1,Events:[xh,Rl,ux,yO,bO,d1]},Qd={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HB={bundleType:Qd.bundleType,version:Qd.version,rendererPackageName:Qd.rendererPackageName,rendererConfig:Qd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kO(e),e===null?null:e.stateNode},findFiberByHostInstance:Qd.findFiberByHostInstance||UB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{ox=lm.inject(HB),Qi=lm}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WB;Bn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x1(t))throw Error(ge(200));return qB(e,t,null,r)};Bn.createRoot=function(e,t){if(!x1(e))throw Error(ge(299));var r=!1,i="",a=n4;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=m1(e,1,!1,null,null,r,!1,i,a),e[Ra]=t.current,Xu(e.nodeType===8?e.parentNode:e),new g1(t)};Bn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ge(188)):(e=Object.keys(e).join(","),Error(ge(268,e)));return e=kO(t),e=e===null?null:e.stateNode,e};Bn.flushSync=function(e){return Vo(e)};Bn.hydrate=function(e,t,r){if(!bx(t))throw Error(ge(200));return jx(null,e,t,!0,r)};Bn.hydrateRoot=function(e,t,r){if(!x1(e))throw Error(ge(405));var i=r!=null&&r.hydratedSources||null,a=!1,s="",o=n4;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=r4(t,null,e,1,r??null,a,!1,s,o),e[Ra]=t.current,Xu(e),i)for(e=0;e<i.length;e++)r=i[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new yx(t)};Bn.render=function(e,t,r){if(!bx(t))throw Error(ge(200));return jx(null,e,t,!1,r)};Bn.unmountComponentAtNode=function(e){if(!bx(e))throw Error(ge(40));return e._reactRootContainer?(Vo(function(){jx(null,null,e,!1,function(){e._reactRootContainer=null,e[Ra]=null})}),!0):!1};Bn.unstable_batchedUpdates=d1;Bn.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!bx(r))throw Error(ge(200));if(e==null||e._reactInternals===void 0)throw Error(ge(38));return jx(e,t,r,!1,i)};Bn.version="18.3.1-next-f1338f8080-20240426";function i4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i4)}catch(e){console.error(e)}}i4(),iO.exports=Bn;var ol=iO.exports;const KB=It(ol);var a4,H2=ol;a4=H2.createRoot,H2.hydrateRoot;function GB(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,i,a,s,o=[],l="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(o.push(r),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(i=a.indexOf("?",1),s=a.indexOf(".",1),o.push(a.substring(1,~i?i:~s?s:a.length)),l+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~i?"?":"")+"\\"+a.substring(s))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var s4={exports:{}},o4={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oc=g;function YB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var QB=typeof Object.is=="function"?Object.is:YB,JB=Oc.useState,XB=Oc.useEffect,ZB=Oc.useLayoutEffect,e8=Oc.useDebugValue;function t8(e,t){var r=t(),i=JB({inst:{value:r,getSnapshot:t}}),a=i[0].inst,s=i[1];return ZB(function(){a.value=r,a.getSnapshot=t,my(a)&&s({inst:a})},[e,r,t]),XB(function(){return my(a)&&s({inst:a}),e(function(){my(a)&&s({inst:a})})},[e]),e8(r),r}function my(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!QB(e,r)}catch{return!0}}function r8(e,t){return t()}var n8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r8:t8;o4.useSyncExternalStore=Oc.useSyncExternalStore!==void 0?Oc.useSyncExternalStore:n8;s4.exports=o4;var i8=s4.exports;const a8=rO.useInsertionEffect,s8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",o8=s8?g.useLayoutEffect:g.useEffect,l8=a8||o8,l4=e=>{const t=g.useRef([e,(...r)=>t[0](...r)]).current;return l8(()=>{t[0]=e}),t[1]},c8="popstate",v1="pushState",y1="replaceState",d8="hashchange",K2=[c8,v1,y1,d8],u8=e=>{for(const t of K2)addEventListener(t,e);return()=>{for(const t of K2)removeEventListener(t,e)}},c4=(e,t)=>i8.useSyncExternalStore(u8,e,t),f8=()=>location.search,h8=({ssrSearch:e=""}={})=>c4(f8,()=>e),G2=()=>location.pathname,m8=({ssrPath:e}={})=>c4(G2,e?()=>e:G2),p8=(e,{replace:t=!1,state:r=null}={})=>history[t?y1:v1](r,"",e),g8=(e={})=>[m8(e),p8],Y2=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Y2]>"u"){for(const e of[v1,y1]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),i=new Event(e);return i.arguments=arguments,dispatchEvent(i),r}}Object.defineProperty(window,Y2,{value:!0})}const x8=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",d4=(e="")=>e==="/"?"":e,v8=(e,t)=>e[0]==="~"?e.slice(1):d4(t)+e,y8=(e="",t)=>x8(s0(d4(e)),s0(t)),b8=e=>e[0]==="?"?e.slice(1):e,s0=e=>{try{return decodeURI(e)}catch{return e}},j8=e=>s0(b8(e)),u4={hook:g8,searchHook:h8,parser:GB,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},f4=g.createContext(u4),yd=()=>g.useContext(f4),h4={},m4=g.createContext(h4),w8=()=>g.useContext(m4),wx=e=>{const[t,r]=e.hook(e);return[y8(e.base,t),l4((i,a)=>r(v8(i,e.base),a))]},Ze=()=>wx(yd()),p4=()=>{const e=yd();return j8(e.searchHook(e))},g4=(e,t,r,i)=>{const{pattern:a,keys:s}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",i),o=a.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=s!==!1?Object.fromEntries(s.map((f,h)=>[f,c[h]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...i?[l]:[]]:[!1,null]},N8=({children:e,...t})=>{var u,f;const r=yd(),i=t.hook?u4:r;let a=i;const[s,o]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=s),t.hrefs=t.hrefs??((f=t.hook)==null?void 0:f.hrefs);let l=g.useRef({}),c=l.current,d=c;for(let h in i){const p=h==="base"?i[h]+(t[h]||""):t[h]||i[h];c===d&&p!==d[h]&&(l.current=d={...d}),d[h]=p,p!==i[h]&&(a=d)}return g.createElement(f4.Provider,{value:a,children:e})},Q2=({children:e,component:t},r)=>t?g.createElement(t,{params:r}):typeof e=="function"?e(r):e,S8=e=>{let t=g.useRef(h4),r=t.current;for(const i in e)e[i]!==r[i]&&(r=e);return Object.keys(e).length===0&&(r=e),t.current=r},Ne=({path:e,nest:t,match:r,...i})=>{const a=yd(),[s]=wx(a),[o,l,c]=r??g4(a.parser,e,s,t),d=S8({...w8(),...l});if(!o)return null;const u=c?g.createElement(N8,{base:c},Q2(i,d)):Q2(i,d);return g.createElement(m4.Provider,{value:d,children:u})},dr=g.forwardRef((e,t)=>{const r=yd(),[i,a]=wx(r),{to:s="",href:o=s,onClick:l,asChild:c,children:d,className:u,replace:f,state:h,...p}=e,y=l4(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(l==null||l(b),b.defaultPrevented||(b.preventDefault(),a(o,e)))}),v=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return c&&g.isValidElement(d)?g.cloneElement(d,{onClick:y,href:v}):g.createElement("a",{...p,onClick:y,href:v,className:u!=null&&u.call?u(i===o):u,children:d,ref:t})}),x4=e=>Array.isArray(e)?e.flatMap(t=>x4(t&&t.type===g.Fragment?t.props.children:t)):[e],k8=({children:e,location:t})=>{const r=yd(),[i]=wx(r);for(const a of x4(e)){let s=0;if(g.isValidElement(a)&&(s=g4(r.parser,a.props.path,t||i,a.props.nest))[0])return g.cloneElement(a,{match:s})}return null};var bd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Wo=typeof window>"u"||"Deno"in globalThis;function Hn(){}function C8(e,t){return typeof e=="function"?e(t):e}function o0(e){return typeof e=="number"&&e>=0&&e!==1/0}function v4(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Zl(e,t){return typeof e=="function"?e(t):e}function wi(e,t){return typeof e=="function"?e(t):e}function J2(e,t){const{type:r="all",exact:i,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(i){if(t.queryHash!==b1(o,t.options))return!1}else if(!lf(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function X2(e,t){const{exact:r,status:i,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Ho(t.options.mutationKey)!==Ho(s))return!1}else if(!lf(t.options.mutationKey,s))return!1}return!(i&&t.state.status!==i||a&&!a(t))}function b1(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ho)(e)}function Ho(e){return JSON.stringify(e,(t,r)=>l0(r)?Object.keys(r).sort().reduce((i,a)=>(i[a]=r[a],i),{}):r)}function lf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!lf(e[r],t[r])):!1}function y4(e,t){if(e===t)return e;const r=Z2(e)&&Z2(t);if(r||l0(e)&&l0(t)){const i=r?e:Object.keys(e),a=i.length,s=r?t:Object.keys(t),o=s.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:s[d];(!r&&i.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=y4(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function _p(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Z2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function l0(e){if(!ek(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!ek(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ek(e){return Object.prototype.toString.call(e)==="[object Object]"}function A8(e){return new Promise(t=>{setTimeout(t,e)})}function c0(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?y4(e,t):t}function E8(e,t,r=0){const i=[...e,t];return r&&i.length>r?i.slice(1):i}function P8(e,t,r=0){const i=[t,...e];return r&&i.length>r?i.slice(0,-1):i}var j1=Symbol();function b4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===j1?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Eo,hs,uc,$T,T8=($T=class extends bd{constructor(){super();He(this,Eo);He(this,hs);He(this,uc);_e(this,uc,t=>{if(!Wo&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){q(this,hs)||this.setEventListener(q(this,uc))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,hs))==null||t.call(this),_e(this,hs,void 0))}setEventListener(t){var r;_e(this,uc,t),(r=q(this,hs))==null||r.call(this),_e(this,hs,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){q(this,Eo)!==t&&(_e(this,Eo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof q(this,Eo)=="boolean"?q(this,Eo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Eo=new WeakMap,hs=new WeakMap,uc=new WeakMap,$T),w1=new T8,fc,ms,hc,FT,O8=(FT=class extends bd{constructor(){super();He(this,fc,!0);He(this,ms);He(this,hc);_e(this,hc,t=>{if(!Wo&&window.addEventListener){const r=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}})}onSubscribe(){q(this,ms)||this.setEventListener(q(this,hc))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,ms))==null||t.call(this),_e(this,ms,void 0))}setEventListener(t){var r;_e(this,hc,t),(r=q(this,ms))==null||r.call(this),_e(this,ms,t(this.setOnline.bind(this)))}setOnline(t){q(this,fc)!==t&&(_e(this,fc,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return q(this,fc)}},fc=new WeakMap,ms=new WeakMap,hc=new WeakMap,FT),Ip=new O8;function d0(){let e,t;const r=new Promise((a,s)=>{e=a,t=s});r.status="pending",r.catch(()=>{});function i(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{i({status:"fulfilled",value:a}),e(a)},r.reject=a=>{i({status:"rejected",reason:a}),t(a)},r}function _8(e){return Math.min(1e3*2**e,3e4)}function j4(e){return(e??"online")==="online"?Ip.isOnline():!0}var w4=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function py(e){return e instanceof w4}function N4(e){let t=!1,r=0,i=!1,a;const s=d0(),o=v=>{var b;i||(h(new w4(v)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>w1.isFocused()&&(e.networkMode==="always"||Ip.isOnline())&&e.canRun(),u=()=>j4(e.networkMode)&&e.canRun(),f=v=>{var b;i||(i=!0,(b=e.onSuccess)==null||b.call(e,v),a==null||a(),s.resolve(v))},h=v=>{var b;i||(i=!0,(b=e.onError)==null||b.call(e,v),a==null||a(),s.reject(v))},p=()=>new Promise(v=>{var b;a=x=>{(i||d())&&v(x)},(b=e.onPause)==null||b.call(e)}).then(()=>{var v;a=void 0,i||(v=e.onContinue)==null||v.call(e)}),y=()=>{if(i)return;let v;const b=r===0?e.initialPromise:void 0;try{v=b??e.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{var S;if(i)return;const m=e.retry??(Wo?0:3),j=e.retryDelay??_8,N=typeof j=="function"?j(r,x):j,w=m===!0||typeof m=="number"&&r<m||typeof m=="function"&&m(r,x);if(t||!w){h(x);return}r++,(S=e.onFail)==null||S.call(e,r,x),A8(N).then(()=>d()?void 0:p()).then(()=>{t?h(x):y()})})};return{promise:s,cancel:o,continue:()=>(a==null||a(),s),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():p().then(y),s)}}function I8(){let e=[],t=0,r=l=>{l()},i=l=>{l()},a=l=>setTimeout(l,0);const s=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{i(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{i=l},setScheduler:l=>{a=l}}}var gr=I8(),Po,DT,S4=(DT=class{constructor(){He(this,Po)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),o0(this.gcTime)&&_e(this,Po,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Wo?1/0:5*60*1e3))}clearGcTimeout(){q(this,Po)&&(clearTimeout(q(this,Po)),_e(this,Po,void 0))}},Po=new WeakMap,DT),mc,pc,Wn,Br,dh,To,gi,ma,LT,R8=(LT=class extends S4{constructor(t){super();He(this,gi);He(this,mc);He(this,pc);He(this,Wn);He(this,Br);He(this,dh);He(this,To);_e(this,To,!1),_e(this,dh,t.defaultOptions),this.setOptions(t.options),this.observers=[],_e(this,Wn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,_e(this,mc,M8(this.options)),this.state=t.state??q(this,mc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=q(this,Br))==null?void 0:t.promise}setOptions(t){this.options={...q(this,dh),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,Wn).remove(this)}setData(t,r){const i=c0(this.state.data,t,this.options);return st(this,gi,ma).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){st(this,gi,ma).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,a;const r=(i=q(this,Br))==null?void 0:i.promise;return(a=q(this,Br))==null||a.cancel(t),r?r.then(Hn).catch(Hn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,mc))}isActive(){return this.observers.some(t=>wi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===j1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!v4(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,Br))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,Br))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),q(this,Wn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(q(this,Br)&&(q(this,To)?q(this,Br).cancel({revert:!0}):q(this,Br).cancelRetry()),this.scheduleGc()),q(this,Wn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||st(this,gi,ma).call(this,{type:"invalidate"})}fetch(t,r){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(q(this,Br))return q(this,Br).continueRetry(),q(this,Br).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const i=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(_e(this,To,!0),i.signal)})},s=()=>{const f=b4(this.options,r),h={queryKey:this.queryKey,meta:this.meta};return a(h),_e(this,To,!1),this.options.persister?this.options.persister(f,h,this):f(h)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),_e(this,pc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&st(this,gi,ma).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=f=>{var h,p,y,v;py(f)&&f.silent||st(this,gi,ma).call(this,{type:"error",error:f}),py(f)||((p=(h=q(this,Wn).config).onError)==null||p.call(h,f,this),(v=(y=q(this,Wn).config).onSettled)==null||v.call(y,this.state.data,f,this)),this.scheduleGc()};return _e(this,Br,N4({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:i.abort.bind(i),onSuccess:f=>{var h,p,y,v;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(b){l(b);return}(p=(h=q(this,Wn).config).onSuccess)==null||p.call(h,f,this),(v=(y=q(this,Wn).config).onSettled)==null||v.call(y,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{st(this,gi,ma).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{st(this,gi,ma).call(this,{type:"pause"})},onContinue:()=>{st(this,gi,ma).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),q(this,Br).start()}},mc=new WeakMap,pc=new WeakMap,Wn=new WeakMap,Br=new WeakMap,dh=new WeakMap,To=new WeakMap,gi=new WeakSet,ma=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...k4(i.data,this.options),fetchMeta:t.meta??null};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return py(a)&&a.revert&&q(this,pc)?{...q(this,pc),fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),gr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),q(this,Wn).notify({query:this,type:"updated",action:t})})},LT);function k4(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:j4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function M8(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var qi,BT,$8=(BT=class extends bd{constructor(t={}){super();He(this,qi);this.config=t,_e(this,qi,new Map)}build(t,r,i){const a=r.queryKey,s=r.queryHash??b1(a,r);let o=this.get(s);return o||(o=new R8({cache:this,queryKey:a,queryHash:s,options:t.defaultQueryOptions(r),state:i,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){q(this,qi).has(t.queryHash)||(q(this,qi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=q(this,qi).get(t.queryHash);r&&(t.destroy(),r===t&&q(this,qi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){gr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return q(this,qi).get(t)}getAll(){return[...q(this,qi).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(i=>J2(r,i))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(i=>J2(t,i)):r}notify(t){gr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){gr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){gr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},qi=new WeakMap,BT),Ui,Jr,Oo,Vi,ns,zT,F8=(zT=class extends S4{constructor(t){super();He(this,Vi);He(this,Ui);He(this,Jr);He(this,Oo);this.mutationId=t.mutationId,_e(this,Jr,t.mutationCache),_e(this,Ui,[]),this.state=t.state||C4(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){q(this,Ui).includes(t)||(q(this,Ui).push(t),this.clearGcTimeout(),q(this,Jr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){_e(this,Ui,q(this,Ui).filter(r=>r!==t)),this.scheduleGc(),q(this,Jr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){q(this,Ui).length||(this.state.status==="pending"?this.scheduleGc():q(this,Jr).remove(this))}continue(){var t;return((t=q(this,Oo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,s,o,l,c,d,u,f,h,p,y,v,b,x,m,j,N,w,S,C;_e(this,Oo,N4({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,A)=>{st(this,Vi,ns).call(this,{type:"failed",failureCount:k,error:A})},onPause:()=>{st(this,Vi,ns).call(this,{type:"pause"})},onContinue:()=>{st(this,Vi,ns).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,Jr).canRun(this)}));const r=this.state.status==="pending",i=!q(this,Oo).canStart();try{if(!r){st(this,Vi,ns).call(this,{type:"pending",variables:t,isPaused:i}),await((s=(a=q(this,Jr).config).onMutate)==null?void 0:s.call(a,t,this));const A=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));A!==this.state.context&&st(this,Vi,ns).call(this,{type:"pending",context:A,variables:t,isPaused:i})}const k=await q(this,Oo).start();return await((d=(c=q(this,Jr).config).onSuccess)==null?void 0:d.call(c,k,t,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,k,t,this.state.context)),await((p=(h=q(this,Jr).config).onSettled)==null?void 0:p.call(h,k,null,this.state.variables,this.state.context,this)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,k,null,t,this.state.context)),st(this,Vi,ns).call(this,{type:"success",data:k}),k}catch(k){try{throw await((x=(b=q(this,Jr).config).onError)==null?void 0:x.call(b,k,t,this.state.context,this)),await((j=(m=this.options).onError)==null?void 0:j.call(m,k,t,this.state.context)),await((w=(N=q(this,Jr).config).onSettled)==null?void 0:w.call(N,void 0,k,this.state.variables,this.state.context,this)),await((C=(S=this.options).onSettled)==null?void 0:C.call(S,void 0,k,t,this.state.context)),k}finally{st(this,Vi,ns).call(this,{type:"error",error:k})}}finally{q(this,Jr).runNext(this)}}},Ui=new WeakMap,Jr=new WeakMap,Oo=new WeakMap,Vi=new WeakSet,ns=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),gr.batch(()=>{q(this,Ui).forEach(i=>{i.onMutationUpdate(t)}),q(this,Jr).notify({mutation:this,type:"updated",action:t})})},zT);function C4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var kn,uh,qT,D8=(qT=class extends bd{constructor(t={}){super();He(this,kn);He(this,uh);this.config=t,_e(this,kn,new Map),_e(this,uh,Date.now())}build(t,r,i){const a=new F8({mutationCache:this,mutationId:++Vh(this,uh)._,options:t.defaultMutationOptions(r),state:i});return this.add(a),a}add(t){const r=cm(t),i=q(this,kn).get(r)??[];i.push(t),q(this,kn).set(r,i),this.notify({type:"added",mutation:t})}remove(t){var i;const r=cm(t);if(q(this,kn).has(r)){const a=(i=q(this,kn).get(r))==null?void 0:i.filter(s=>s!==t);a&&(a.length===0?q(this,kn).delete(r):q(this,kn).set(r,a))}this.notify({type:"removed",mutation:t})}canRun(t){var i;const r=(i=q(this,kn).get(cm(t)))==null?void 0:i.find(a=>a.state.status==="pending");return!r||r===t}runNext(t){var i;const r=(i=q(this,kn).get(cm(t)))==null?void 0:i.find(a=>a!==t&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){gr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...q(this,kn).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(i=>X2(r,i))}findAll(t={}){return this.getAll().filter(r=>X2(t,r))}notify(t){gr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return gr.batch(()=>Promise.all(t.map(r=>r.continue().catch(Hn))))}},kn=new WeakMap,uh=new WeakMap,qT);function cm(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function tk(e){return{onFetch:(t,r)=>{var u,f,h,p,y;const i=t.options,a=(h=(f=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,s=((p=t.state.data)==null?void 0:p.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const b=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},x=b4(t.options,t.fetchOptions),m=async(j,N,w)=>{if(v)return Promise.reject();if(N==null&&j.pages.length)return Promise.resolve(j);const S={queryKey:t.queryKey,pageParam:N,direction:w?"backward":"forward",meta:t.options.meta};b(S);const C=await x(S),{maxPages:k}=t.options,A=w?P8:E8;return{pages:A(j.pages,C,k),pageParams:A(j.pageParams,N,k)}};if(a&&s.length){const j=a==="backward",N=j?L8:rk,w={pages:s,pageParams:o},S=N(i,w);l=await m(w,S,j)}else{const j=e??s.length;do{const N=c===0?o[0]??i.initialPageParam:rk(i,l);if(c>0&&N==null)break;l=await m(l,N),c++}while(c<j)}return l};t.options.persister?t.fetchFn=()=>{var v,b;return(b=(v=t.options).persister)==null?void 0:b.call(v,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function rk(e,{pages:t,pageParams:r}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,r[i],r):void 0}function L8(e,{pages:t,pageParams:r}){var i;return t.length>0?(i=e.getPreviousPageParam)==null?void 0:i.call(e,t[0],t,r[0],r):void 0}var Yt,ps,gs,gc,xc,xs,vc,yc,UT,B8=(UT=class{constructor(e={}){He(this,Yt);He(this,ps);He(this,gs);He(this,gc);He(this,xc);He(this,xs);He(this,vc);He(this,yc);_e(this,Yt,e.queryCache||new $8),_e(this,ps,e.mutationCache||new D8),_e(this,gs,e.defaultOptions||{}),_e(this,gc,new Map),_e(this,xc,new Map),_e(this,xs,0)}mount(){Vh(this,xs)._++,q(this,xs)===1&&(_e(this,vc,w1.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Yt).onFocus())})),_e(this,yc,Ip.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Yt).onOnline())})))}unmount(){var e,t;Vh(this,xs)._--,q(this,xs)===0&&((e=q(this,vc))==null||e.call(this),_e(this,vc,void 0),(t=q(this,yc))==null||t.call(this),_e(this,yc,void 0))}isFetching(e){return q(this,Yt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return q(this,ps).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,Yt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),i=q(this,Yt).build(this,r);return e.revalidateIfStale&&i.isStaleByTime(Zl(r.staleTime,i))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return q(this,Yt).findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),a=q(this,Yt).get(i.queryHash),s=a==null?void 0:a.state.data,o=C8(t,s);if(o!==void 0)return q(this,Yt).build(this,i).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return gr.batch(()=>q(this,Yt).findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,Yt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=q(this,Yt);gr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=q(this,Yt),i={type:"active",...e};return gr.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(i,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},i=gr.batch(()=>q(this,Yt).findAll(e).map(a=>a.cancel(r)));return Promise.all(i).then(Hn).catch(Hn)}invalidateQueries(e={},t={}){return gr.batch(()=>{if(q(this,Yt).findAll(e).forEach(i=>{i.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},i=gr.batch(()=>q(this,Yt).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let s=a.fetch(void 0,r);return r.throwOnError||(s=s.catch(Hn)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(Hn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=q(this,Yt).build(this,t);return r.isStaleByTime(Zl(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Hn).catch(Hn)}fetchInfiniteQuery(e){return e.behavior=tk(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Hn).catch(Hn)}ensureInfiniteQueryData(e){return e.behavior=tk(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ip.isOnline()?q(this,ps).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,Yt)}getMutationCache(){return q(this,ps)}getDefaultOptions(){return q(this,gs)}setDefaultOptions(e){_e(this,gs,e)}setQueryDefaults(e,t){q(this,gc).set(Ho(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...q(this,gc).values()];let r={};return t.forEach(i=>{lf(e,i.queryKey)&&(r={...r,...i.defaultOptions})}),r}setMutationDefaults(e,t){q(this,xc).set(Ho(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...q(this,xc).values()];let r={};return t.forEach(i=>{lf(e,i.mutationKey)&&(r={...r,...i.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...q(this,gs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=b1(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===j1&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...q(this,gs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){q(this,Yt).clear(),q(this,ps).clear()}},Yt=new WeakMap,ps=new WeakMap,gs=new WeakMap,gc=new WeakMap,xc=new WeakMap,xs=new WeakMap,vc=new WeakMap,yc=new WeakMap,UT),dn,mt,fh,Xr,_o,bc,vs,Wi,hh,jc,wc,Io,Ro,ys,Nc,At,vu,u0,f0,h0,m0,p0,g0,x0,A4,VT,z8=(VT=class extends bd{constructor(t,r){super();He(this,At);He(this,dn);He(this,mt);He(this,fh);He(this,Xr);He(this,_o);He(this,bc);He(this,vs);He(this,Wi);He(this,hh);He(this,jc);He(this,wc);He(this,Io);He(this,Ro);He(this,ys);He(this,Nc,new Set);this.options=r,_e(this,dn,t),_e(this,Wi,null),_e(this,vs,d0()),this.options.experimental_prefetchInRender||q(this,vs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,mt).addObserver(this),nk(q(this,mt),this.options)?st(this,At,vu).call(this):this.updateResult(),st(this,At,m0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return v0(q(this,mt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return v0(q(this,mt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,st(this,At,p0).call(this),st(this,At,g0).call(this),q(this,mt).removeObserver(this)}setOptions(t,r){const i=this.options,a=q(this,mt);if(this.options=q(this,dn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof wi(this.options.enabled,q(this,mt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");st(this,At,x0).call(this),q(this,mt).setOptions(this.options),i._defaulted&&!_p(this.options,i)&&q(this,dn).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,mt),observer:this});const s=this.hasListeners();s&&ik(q(this,mt),a,this.options,i)&&st(this,At,vu).call(this),this.updateResult(r),s&&(q(this,mt)!==a||wi(this.options.enabled,q(this,mt))!==wi(i.enabled,q(this,mt))||Zl(this.options.staleTime,q(this,mt))!==Zl(i.staleTime,q(this,mt)))&&st(this,At,u0).call(this);const o=st(this,At,f0).call(this);s&&(q(this,mt)!==a||wi(this.options.enabled,q(this,mt))!==wi(i.enabled,q(this,mt))||o!==q(this,ys))&&st(this,At,h0).call(this,o)}getOptimisticResult(t){const r=q(this,dn).getQueryCache().build(q(this,dn),t),i=this.createResult(r,t);return U8(this,i)&&(_e(this,Xr,i),_e(this,bc,this.options),_e(this,_o,q(this,mt).state)),i}getCurrentResult(){return q(this,Xr)}trackResult(t,r){const i={};return Object.keys(t).forEach(a=>{Object.defineProperty(i,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),r==null||r(a),t[a])})}),i}trackProp(t){q(this,Nc).add(t)}getCurrentQuery(){return q(this,mt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=q(this,dn).defaultQueryOptions(t),i=q(this,dn).getQueryCache().build(q(this,dn),r);return i.fetch().then(()=>this.createResult(i,r))}fetch(t){return st(this,At,vu).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,Xr)))}createResult(t,r){var k;const i=q(this,mt),a=this.options,s=q(this,Xr),o=q(this,_o),l=q(this,bc),d=t!==i?t.state:q(this,fh),{state:u}=t;let f={...u},h=!1,p;if(r._optimisticResults){const A=this.hasListeners(),E=!A&&nk(t,r),T=A&&ik(t,i,r,a);(E||T)&&(f={...f,...k4(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:b}=f;if(r.select&&f.data!==void 0)if(s&&f.data===(o==null?void 0:o.data)&&r.select===q(this,hh))p=q(this,jc);else try{_e(this,hh,r.select),p=r.select(f.data),p=c0(s==null?void 0:s.data,p,r),_e(this,jc,p),_e(this,Wi,null)}catch(A){_e(this,Wi,A)}else p=f.data;if(r.placeholderData!==void 0&&p===void 0&&b==="pending"){let A;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))A=s.data;else if(A=typeof r.placeholderData=="function"?r.placeholderData((k=q(this,wc))==null?void 0:k.state.data,q(this,wc)):r.placeholderData,r.select&&A!==void 0)try{A=r.select(A),_e(this,Wi,null)}catch(E){_e(this,Wi,E)}A!==void 0&&(b="success",p=c0(s==null?void 0:s.data,A,r),h=!0)}q(this,Wi)&&(y=q(this,Wi),p=q(this,jc),v=Date.now(),b="error");const x=f.fetchStatus==="fetching",m=b==="pending",j=b==="error",N=m&&x,w=p!==void 0,C={status:b,fetchStatus:f.fetchStatus,isPending:m,isSuccess:b==="success",isError:j,isInitialLoading:N,isLoading:N,data:p,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:x,isRefetching:x&&!m,isLoadingError:j&&!w,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:j&&w,isStale:N1(t,r),refetch:this.refetch,promise:q(this,vs)};if(this.options.experimental_prefetchInRender){const A=P=>{C.status==="error"?P.reject(C.error):C.data!==void 0&&P.resolve(C.data)},E=()=>{const P=_e(this,vs,C.promise=d0());A(P)},T=q(this,vs);switch(T.status){case"pending":t.queryHash===i.queryHash&&A(T);break;case"fulfilled":(C.status==="error"||C.data!==T.value)&&E();break;case"rejected":(C.status!=="error"||C.error!==T.reason)&&E();break}}return C}updateResult(t){const r=q(this,Xr),i=this.createResult(q(this,mt),this.options);if(_e(this,_o,q(this,mt).state),_e(this,bc,this.options),q(this,_o).data!==void 0&&_e(this,wc,q(this,mt)),_p(i,r))return;_e(this,Xr,i);const a={},s=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!q(this,Nc).size)return!0;const c=new Set(l??q(this,Nc));return this.options.throwOnError&&c.add("error"),Object.keys(q(this,Xr)).some(d=>{const u=d;return q(this,Xr)[u]!==r[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&s()&&(a.listeners=!0),st(this,At,A4).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&st(this,At,m0).call(this)}},dn=new WeakMap,mt=new WeakMap,fh=new WeakMap,Xr=new WeakMap,_o=new WeakMap,bc=new WeakMap,vs=new WeakMap,Wi=new WeakMap,hh=new WeakMap,jc=new WeakMap,wc=new WeakMap,Io=new WeakMap,Ro=new WeakMap,ys=new WeakMap,Nc=new WeakMap,At=new WeakSet,vu=function(t){st(this,At,x0).call(this);let r=q(this,mt).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Hn)),r},u0=function(){st(this,At,p0).call(this);const t=Zl(this.options.staleTime,q(this,mt));if(Wo||q(this,Xr).isStale||!o0(t))return;const i=v4(q(this,Xr).dataUpdatedAt,t)+1;_e(this,Io,setTimeout(()=>{q(this,Xr).isStale||this.updateResult()},i))},f0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,mt)):this.options.refetchInterval)??!1},h0=function(t){st(this,At,g0).call(this),_e(this,ys,t),!(Wo||wi(this.options.enabled,q(this,mt))===!1||!o0(q(this,ys))||q(this,ys)===0)&&_e(this,Ro,setInterval(()=>{(this.options.refetchIntervalInBackground||w1.isFocused())&&st(this,At,vu).call(this)},q(this,ys)))},m0=function(){st(this,At,u0).call(this),st(this,At,h0).call(this,st(this,At,f0).call(this))},p0=function(){q(this,Io)&&(clearTimeout(q(this,Io)),_e(this,Io,void 0))},g0=function(){q(this,Ro)&&(clearInterval(q(this,Ro)),_e(this,Ro,void 0))},x0=function(){const t=q(this,dn).getQueryCache().build(q(this,dn),this.options);if(t===q(this,mt))return;const r=q(this,mt);_e(this,mt,t),_e(this,fh,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},A4=function(t){gr.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(q(this,Xr))}),q(this,dn).getQueryCache().notify({query:q(this,mt),type:"observerResultsUpdated"})})},VT);function q8(e,t){return wi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function nk(e,t){return q8(e,t)||e.state.data!==void 0&&v0(e,t,t.refetchOnMount)}function v0(e,t,r){if(wi(t.enabled,e)!==!1){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&N1(e,t)}return!1}function ik(e,t,r,i){return(e!==t||wi(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&N1(e,r)}function N1(e,t){return wi(t.enabled,e)!==!1&&e.isStaleByTime(Zl(t.staleTime,e))}function U8(e,t){return!_p(e.getCurrentResult(),t)}var bs,js,un,xa,_a,Gm,y0,WT,V8=(WT=class extends bd{constructor(r,i){super();He(this,_a);He(this,bs);He(this,js);He(this,un);He(this,xa);_e(this,bs,r),this.setOptions(i),this.bindMethods(),st(this,_a,Gm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const i=this.options;this.options=q(this,bs).defaultMutationOptions(r),_p(this.options,i)||q(this,bs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,un),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&Ho(i.mutationKey)!==Ho(this.options.mutationKey)?this.reset():((a=q(this,un))==null?void 0:a.state.status)==="pending"&&q(this,un).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=q(this,un))==null||r.removeObserver(this)}onMutationUpdate(r){st(this,_a,Gm).call(this),st(this,_a,y0).call(this,r)}getCurrentResult(){return q(this,js)}reset(){var r;(r=q(this,un))==null||r.removeObserver(this),_e(this,un,void 0),st(this,_a,Gm).call(this),st(this,_a,y0).call(this)}mutate(r,i){var a;return _e(this,xa,i),(a=q(this,un))==null||a.removeObserver(this),_e(this,un,q(this,bs).getMutationCache().build(q(this,bs),this.options)),q(this,un).addObserver(this),q(this,un).execute(r)}},bs=new WeakMap,js=new WeakMap,un=new WeakMap,xa=new WeakMap,_a=new WeakSet,Gm=function(){var i;const r=((i=q(this,un))==null?void 0:i.state)??C4();_e(this,js,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},y0=function(r){gr.batch(()=>{var i,a,s,o,l,c,d,u;if(q(this,xa)&&this.hasListeners()){const f=q(this,js).variables,h=q(this,js).context;(r==null?void 0:r.type)==="success"?((a=(i=q(this,xa)).onSuccess)==null||a.call(i,r.data,f,h),(o=(s=q(this,xa)).onSettled)==null||o.call(s,r.data,null,f,h)):(r==null?void 0:r.type)==="error"&&((c=(l=q(this,xa)).onError)==null||c.call(l,r.error,f,h),(u=(d=q(this,xa)).onSettled)==null||u.call(d,void 0,r.error,f,h))}this.listeners.forEach(f=>{f(q(this,js))})})},WT),E4=g.createContext(void 0),eo=e=>{const t=g.useContext(E4);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},W8=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(E4.Provider,{value:e,children:t})),P4=g.createContext(!1),H8=()=>g.useContext(P4);P4.Provider;function K8(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var G8=g.createContext(K8()),Y8=()=>g.useContext(G8);function T4(e,t){return typeof e=="function"?e(...t):!!e}function b0(){}var Q8=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},J8=e=>{g.useEffect(()=>{e.clearReset()},[e])},X8=({result:e,errorResetBoundary:t,throwOnError:r,query:i})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&T4(r,[e.error,i]),Z8=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},ez=(e,t)=>e.isLoading&&e.isFetching&&!t,tz=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,ak=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function rz(e,t,r){var u,f,h,p,y;const i=eo(),a=H8(),s=Y8(),o=i.defaultQueryOptions(e);(f=(u=i.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||f.call(u,o),o._optimisticResults=a?"isRestoring":"optimistic",Z8(o),Q8(o,s),J8(s);const l=!i.getQueryCache().get(o.queryHash),[c]=g.useState(()=>new t(i,o)),d=c.getOptimisticResult(o);if(g.useSyncExternalStore(g.useCallback(v=>{const b=a?b0:c.subscribe(gr.batchCalls(v));return c.updateResult(),b},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),g.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),tz(o,d))throw ak(o,c,s);if(X8({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash)}))throw d.error;if((p=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||p.call(h,o,d),o.experimental_prefetchInRender&&!Wo&&ez(d,a)){const v=l?ak(o,c,s):(y=i.getQueryCache().get(o.queryHash))==null?void 0:y.promise;v==null||v.catch(b0).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function he(e,t){return rz(e,z8)}function Ve(e,t){const r=eo(),[i]=g.useState(()=>new V8(r,e));g.useEffect(()=>{i.setOptions(e)},[i,e]);const a=g.useSyncExternalStore(g.useCallback(o=>i.subscribe(gr.batchCalls(o)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),s=g.useCallback((o,l)=>{i.mutate(o,l).catch(b0)},[i]);if(a.error&&T4(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}/*! Capacitor: https://capacitorjs.com/ - MIT License */var _c;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(_c||(_c={}));class gy extends Error{constructor(t,r,i){super(t),this.message=t,this.code=r,this.data=i}}const nz=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},iz=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},i=r.Plugins=r.Plugins||{},a=()=>t!==null?t.name:nz(e),s=()=>a()!=="web",o=f=>{const h=d.get(f);return!!(h!=null&&h.platforms.has(a())||l(f))},l=f=>{var h;return(h=r.PluginHeaders)===null||h===void 0?void 0:h.find(p=>p.name===f)},c=f=>e.console.error(f),d=new Map,u=(f,h={})=>{const p=d.get(f);if(p)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),p.proxy;const y=a(),v=l(f);let b;const x=async()=>(!b&&y in h?b=typeof h[y]=="function"?b=await h[y]():b=h[y]:t!==null&&!b&&"web"in h&&(b=typeof h.web=="function"?b=await h.web():b=h.web),b),m=(k,A)=>{var E,T;if(v){const P=v==null?void 0:v.methods.find(_=>A===_.name);if(P)return P.rtype==="promise"?_=>r.nativePromise(f,A.toString(),_):(_,R)=>r.nativeCallback(f,A.toString(),_,R);if(k)return(E=k[A])===null||E===void 0?void 0:E.bind(k)}else{if(k)return(T=k[A])===null||T===void 0?void 0:T.bind(k);throw new gy(`"${f}" plugin is not implemented on ${y}`,_c.Unimplemented)}},j=k=>{let A;const E=(...T)=>{const P=x().then(_=>{const R=m(_,k);if(R){const O=R(...T);return A=O==null?void 0:O.remove,O}else throw new gy(`"${f}.${k}()" is not implemented on ${y}`,_c.Unimplemented)});return k==="addListener"&&(P.remove=async()=>A()),P};return E.toString=()=>`${k.toString()}() { [capacitor code] }`,Object.defineProperty(E,"name",{value:k,writable:!1,configurable:!1}),E},N=j("addListener"),w=j("removeListener"),S=(k,A)=>{const E=N({eventName:k},A),T=async()=>{const _=await E;w({eventName:k,callbackId:_},A)},P=new Promise(_=>E.then(()=>_({remove:T})));return P.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await T()},P},C=new Proxy({},{get(k,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?S:N;case"removeListener":return w;default:return j(A)}}});return i[f]=C,d.set(f,{name:f,proxy:C,platforms:new Set([...Object.keys(h),...v?[y]:[]])}),C};return r.convertFileSrc||(r.convertFileSrc=f=>f),r.getPlatform=a,r.handleError=c,r.isNativePlatform=s,r.isPluginAvailable=o,r.registerPlugin=u,r.Exception=gy,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},az=e=>e.Capacitor=iz(e),Us=az(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),jd=Us.registerPlugin;class S1{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let i=!1;this.listeners[t]||(this.listeners[t]=[],i=!0),this.listeners[t].push(r);const s=this.windowListeners[t];s&&!s.registered&&this.addWindowListener(s),i&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,r);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,i){const a=this.listeners[t];if(!a){if(i){let s=this.retainedEventArguments[t];s||(s=[]),s.push(r),this.retainedEventArguments[t]=s}return}a.forEach(s=>s(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:i=>{this.notifyListeners(r,i)}}}unimplemented(t="not implemented"){return new Us.Exception(t,_c.Unimplemented)}unavailable(t="not available"){return new Us.Exception(t,_c.Unavailable)}async removeListener(t,r){const i=this.listeners[t];if(!i)return;const a=i.indexOf(r);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(i=>{this.notifyListeners(t,i)}))}}const sk=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ok=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class sz extends S1{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(i=>{if(i.length<=0)return;let[a,s]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=ok(a).trim(),s=ok(s).trim(),r[a]=s}),r}async setCookie(t){try{const r=sk(t.key),i=sk(t.value),a=`; expires=${(t.expires||"").replace("expires=","")}`,s=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${i||""}${a}; path=${s}; ${o};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}jd("CapacitorCookies",{web:()=>new sz});const oz=async e=>new Promise((t,r)=>{const i=new FileReader;i.onload=()=>{const a=i.result;t(a.indexOf(",")>=0?a.split(",")[1]:a)},i.onerror=a=>r(a),i.readAsDataURL(e)}),lz=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(a=>a.toLocaleLowerCase()).reduce((a,s,o)=>(a[s]=e[t[o]],a),{})},cz=(e,t=!0)=>e?Object.entries(e).reduce((i,a)=>{const[s,o]=a;let l,c;return Array.isArray(o)?(c="",o.forEach(d=>{l=t?encodeURIComponent(d):d,c+=`${s}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(o):o,c=`${s}=${l}`),`${i}&${c}`},"").substr(1):null,dz=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),a=lz(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,l]of Object.entries(e.data||{}))s.set(o,l);r.body=s.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const s=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{s.append(c,l)});else for(const l of Object.keys(e.data))s.append(l,e.data[l]);r.body=s;const o=new Headers(r.headers);o.delete("content-type"),r.headers=o}else(a.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class uz extends S1{async request(t){const r=dz(t,t.webFetchExtra),i=cz(t.params,t.shouldEncodeUrlParams),a=i?`${t.url}?${i}`:t.url,s=await fetch(a,r),o=s.headers.get("content-type")||"";let{responseType:l="text"}=s.ok?t:{};o.includes("application/json")&&(l="json");let c,d;switch(l){case"arraybuffer":case"blob":d=await s.blob(),c=await oz(d);break;case"json":c=await s.json();break;case"document":case"text":default:c=await s.text()}const u={};return s.headers.forEach((f,h)=>{u[h]=f}),{data:c,headers:u,status:s.status,url:s.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}jd("CapacitorHttp",{web:()=>new uz});var lk;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(lk||(lk={}));var ck;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(ck||(ck={}));class fz extends S1{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}jd("SystemBars",{web:()=>new fz});const hz="modulepreload",mz=function(e){return"/"+e},dk={},yh=function(t,r,i){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=mz(c),c in dk)return;dk[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":hz,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},Qn=jd("Preferences",{web:()=>yh(()=>import("./web-D9mm5L_I.js"),[]).then(e=>new e.PreferencesWeb)}),k1="authToken",C1="userData",j0="mobileUserId",pz="https://bjjos.app";function yn(e){if(Us.isNativePlatform()){const t=e.startsWith("/")?e:`/${e}`;return`${pz}${t}`}return e}function Zt(){var e,t;return!!(Us.isNativePlatform()||typeof window<"u"&&((t=(e=window.Capacitor)==null?void 0:e.isNativePlatform)!=null&&t.call(e))||typeof window<"u"&&window.location.pathname.startsWith("/ios-")&&window.Capacitor!==void 0)}async function ec(e){Zt()&&await Qn.set({key:k1,value:e}),localStorage.setItem("sessionToken",e),localStorage.setItem("token",e)}async function tc(e){const t=JSON.stringify(e);Zt()&&await Qn.set({key:C1,value:t}),localStorage.setItem("user",t)}async function Nx(){Zt()&&(await Qn.remove({key:k1}),await Qn.remove({key:C1}),await Qn.remove({key:j0})),localStorage.removeItem("sessionToken"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("mobileUserId")}async function O4(){var e;if(!Zt())return!1;try{const{value:t}=await Qn.get({key:k1}),{value:r}=await Qn.get({key:C1}),{value:i}=await Qn.get({key:j0});if(t){if(localStorage.setItem("sessionToken",t),localStorage.setItem("token",t),r){localStorage.setItem("user",r);try{const a=JSON.parse(r),s=i||((e=a==null?void 0:a.id)==null?void 0:e.toString())||"1";localStorage.setItem("mobileUserId",s),!i&&(a!=null&&a.id)&&await Qn.set({key:j0,value:s})}catch{i&&localStorage.setItem("mobileUserId",i)}}else i&&localStorage.setItem("mobileUserId",i);return!0}}catch(t){console.error("Error restoring auth from native storage:",t)}return!1}const _4=Object.freeze(Object.defineProperty({__proto__:null,clearAuth:Nx,getApiUrl:yn,isNativeApp:Zt,restoreAuthFromNative:O4,saveAuthToken:ec,saveUserData:tc},Symbol.toStringTag,{value:"Module"}));async function I4(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}function R4(e){const t=e.includes("?")?"&":"?";return`${e}${t}_t=${Date.now()}`}function M4(){return localStorage.getItem("sessionToken")||localStorage.getItem("token")}async function ct(e,t,r){const i=yn(t),a=R4(i),s=localStorage.getItem("adminToken"),o=M4(),l=await fetch(a,{method:e,headers:{...r?{"Content-Type":"application/json"}:{},...s?{Authorization:`Bearer ${s}`}:o?{Authorization:`Bearer ${o}`}:{},"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"},body:r?JSON.stringify(r):void 0,credentials:"include",cache:"no-store"});return await I4(l),l}const gz=({on401:e})=>async({queryKey:t})=>{const r=t.join("/"),i=yn(r),a=R4(i),s=M4(),o=await fetch(a,{credentials:"include",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",...s?{Authorization:`Bearer ${s}`}:{}},cache:"no-store"});return e==="returnNull"&&o.status===401?null:(await I4(o),await o.json())},Te=new B8({defaultOptions:{queries:{queryFn:gz({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),xz=1,vz=1e6;let xy=0;function yz(){return xy=(xy+1)%Number.MAX_SAFE_INTEGER,xy.toString()}const vy=new Map,uk=e=>{if(vy.has(e))return;const t=setTimeout(()=>{vy.delete(e),Ou({type:"REMOVE_TOAST",toastId:e})},vz);vy.set(e,t)},bz=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,xz)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?uk(r):e.toasts.forEach(i=>{uk(i.id)}),{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Ym=[];let Qm={toasts:[]};function Ou(e){Qm=bz(Qm,e),Ym.forEach(t=>{t(Qm)})}function jz({...e}){const t=yz(),r=a=>Ou({type:"UPDATE_TOAST",toast:{...a,id:t}}),i=()=>Ou({type:"DISMISS_TOAST",toastId:t});return Ou({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||i()}}}),{id:t,dismiss:i,update:r}}function rt(){const[e,t]=g.useState(Qm);return g.useEffect(()=>(Ym.push(t),()=>{const r=Ym.indexOf(t);r>-1&&Ym.splice(r,1)}),[e]),{...e,toast:jz,dismiss:r=>Ou({type:"DISMISS_TOAST",toastId:r})}}function Re(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function fk(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function $4(...e){return t=>{let r=!1;const i=e.map(a=>{const s=fk(a,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let a=0;a<i.length;a++){const s=i[a];typeof s=="function"?s():fk(e[a],null)}}}}function at(...e){return g.useCallback($4(...e),e)}function wz(e,t){const r=g.createContext(t),i=s=>{const{children:o,...l}=s,c=g.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:c,children:o})};i.displayName=e+"Provider";function a(s){const o=g.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[i,a]}function jn(e,t=[]){let r=[];function i(s,o){const l=g.createContext(o),c=r.length;r=[...r,o];const d=f=>{var x;const{scope:h,children:p,...y}=f,v=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,b=g.useMemo(()=>y,Object.values(y));return n.jsx(v.Provider,{value:b,children:p})};d.displayName=s+"Provider";function u(f,h){var v;const p=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,y=g.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[d,u]}const a=()=>{const s=r.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[i,Nz(a,...t)]}function Nz(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const i=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=i.reduce((l,{useScope:c,scopeName:d})=>{const f=c(s)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Ic(e){const t=Sz(e),r=g.forwardRef((i,a)=>{const{children:s,...o}=i,l=g.Children.toArray(s),c=l.find(kz);if(c){const d=c.props.children,u=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...o,ref:a,children:g.isValidElement(d)?g.cloneElement(d,void 0,u):null})}return n.jsx(t,{...o,ref:a,children:s})});return r.displayName=`${e}.Slot`,r}var Sx=Ic("Slot");function Sz(e){const t=g.forwardRef((r,i)=>{const{children:a,...s}=r;if(g.isValidElement(a)){const o=Az(a),l=Cz(s,a.props);return a.type!==g.Fragment&&(l.ref=i?$4(i,o):o),g.cloneElement(a,l)}return g.Children.count(a)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var F4=Symbol("radix.slottable");function D4(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=F4,t}function kz(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===F4}function Cz(e,t){const r={...t};for(const i in t){const a=e[i],s=t[i];/^on[A-Z]/.test(i)?a&&s?r[i]=(...l)=>{s(...l),a(...l)}:a&&(r[i]=a):i==="style"?r[i]={...a,...s}:i==="className"&&(r[i]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function Az(e){var i,a;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function kx(e){const t=e+"CollectionProvider",[r,i]=jn(t),[a,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:x}=v,m=D.useRef(null),j=D.useRef(new Map).current;return n.jsx(a,{scope:b,itemMap:j,collectionRef:m,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Ic(l),d=D.forwardRef((v,b)=>{const{scope:x,children:m}=v,j=s(l,x),N=at(b,j.collectionRef);return n.jsx(c,{ref:N,children:m})});d.displayName=l;const u=e+"CollectionItemSlot",f="data-radix-collection-item",h=Ic(u),p=D.forwardRef((v,b)=>{const{scope:x,children:m,...j}=v,N=D.useRef(null),w=at(b,N),S=s(u,x);return D.useEffect(()=>(S.itemMap.set(N,{ref:N,...j}),()=>void S.itemMap.delete(N))),n.jsx(h,{[f]:"",ref:w,children:m})});p.displayName=u;function y(v){const b=s(e+"CollectionConsumer",v);return D.useCallback(()=>{const m=b.collectionRef.current;if(!m)return[];const j=Array.from(m.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((S,C)=>j.indexOf(S.ref.current)-j.indexOf(C.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},y,i]}var Ez=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ue=Ez.reduce((e,t)=>{const r=Ic(`Primitive.${t}`),i=g.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:s})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function L4(e,t){e&&ol.flushSync(()=>e.dispatchEvent(t))}function ir(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...r)=>{var i;return(i=t.current)==null?void 0:i.call(t,...r)},[])}function Pz(e,t=globalThis==null?void 0:globalThis.document){const r=ir(e);g.useEffect(()=>{const i=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[r,t])}var Tz="DismissableLayer",w0="dismissableLayer.update",Oz="dismissableLayer.pointerDownOutside",_z="dismissableLayer.focusOutside",hk,B4=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bh=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,d=g.useContext(B4),[u,f]=g.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),y=at(t,C=>f(C)),v=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(b),m=u?v.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,N=m>=x,w=Rz(C=>{const k=C.target,A=[...d.branches].some(E=>E.contains(k));!N||A||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},h),S=Mz(C=>{const k=C.target;[...d.branches].some(E=>E.contains(k))||(s==null||s(C),o==null||o(C),C.defaultPrevented||l==null||l())},h);return Pz(C=>{m===d.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),g.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(hk=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),mk(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=hk)}},[u,h,r,d]),g.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),mk())},[u,d]),g.useEffect(()=>{const C=()=>p({});return document.addEventListener(w0,C),()=>document.removeEventListener(w0,C)},[]),n.jsx(Ue.div,{...c,ref:y,style:{pointerEvents:j?N?"auto":"none":void 0,...e.style},onFocusCapture:Re(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Re(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Re(e.onPointerDownCapture,w.onPointerDownCapture)})});bh.displayName=Tz;var Iz="DismissableLayerBranch",z4=g.forwardRef((e,t)=>{const r=g.useContext(B4),i=g.useRef(null),a=at(t,i);return g.useEffect(()=>{const s=i.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),n.jsx(Ue.div,{...e,ref:a})});z4.displayName=Iz;function Rz(e,t=globalThis==null?void 0:globalThis.document){const r=ir(e),i=g.useRef(!1),a=g.useRef(()=>{});return g.useEffect(()=>{const s=l=>{if(l.target&&!i.current){let c=function(){q4(Oz,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>i.current=!0}}function Mz(e,t=globalThis==null?void 0:globalThis.document){const r=ir(e),i=g.useRef(!1);return g.useEffect(()=>{const a=s=>{s.target&&!i.current&&q4(_z,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function mk(){const e=new CustomEvent(w0);document.dispatchEvent(e)}function q4(e,t,r,{discrete:i}){const a=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),i?L4(a,s):a.dispatchEvent(s)}var $z=bh,Fz=z4,Fr=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},Dz="Portal",Cx=g.forwardRef((e,t)=>{var l;const{container:r,...i}=e,[a,s]=g.useState(!1);Fr(()=>s(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?KB.createPortal(n.jsx(Ue.div,{...i,ref:t}),o):null});Cx.displayName=Dz;function Lz(e,t){return g.useReducer((r,i)=>t[r][i]??r,e)}var ai=e=>{const{present:t,children:r}=e,i=Bz(t),a=typeof r=="function"?r({present:i.isPresent}):g.Children.only(r),s=at(i.ref,zz(a));return typeof r=="function"||i.isPresent?g.cloneElement(a,{ref:s}):null};ai.displayName="Presence";function Bz(e){const[t,r]=g.useState(),i=g.useRef({}),a=g.useRef(e),s=g.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Lz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=dm(i.current);s.current=l==="mounted"?d:"none"},[l]),Fr(()=>{const d=i.current,u=a.current;if(u!==e){const h=s.current,p=dm(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Fr(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,f=p=>{const v=dm(i.current).includes(p.animationName);if(p.target===t&&v&&(c("ANIMATION_END"),!a.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},h=p=>{p.target===t&&(s.current=dm(i.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{d&&(i.current=getComputedStyle(d)),r(d)},[])}}function dm(e){return(e==null?void 0:e.animationName)||"none"}function zz(e){var i,a;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ra({prop:e,defaultProp:t,onChange:r=()=>{}}){const[i,a]=qz({defaultProp:t,onChange:r}),s=e!==void 0,o=s?e:i,l=ir(r),c=g.useCallback(d=>{if(s){const f=typeof d=="function"?d(e):d;f!==e&&l(f)}else a(d)},[s,e,a,l]);return[o,c]}function qz({defaultProp:e,onChange:t}){const r=g.useState(e),[i]=r,a=g.useRef(i),s=ir(t);return g.useEffect(()=>{a.current!==i&&(s(i),a.current=i)},[i,a,s]),r}var Uz="VisuallyHidden",jh=g.forwardRef((e,t)=>n.jsx(Ue.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));jh.displayName=Uz;var Vz=jh,A1="ToastProvider",[E1,Wz,Hz]=kx("Toast"),[U4,iNe]=jn("Toast",[Hz]),[Kz,Ax]=U4(A1),V4=e=>{const{__scopeToast:t,label:r="Notification",duration:i=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:o}=e,[l,c]=g.useState(null),[d,u]=g.useState(0),f=g.useRef(!1),h=g.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${A1}\`. Expected non-empty \`string\`.`),n.jsx(E1.Provider,{scope:t,children:n.jsx(Kz,{scope:t,label:r,duration:i,swipeDirection:a,swipeThreshold:s,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>u(p=>p+1),[]),onToastRemove:g.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};V4.displayName=A1;var W4="ToastViewport",Gz=["F8"],N0="toast.viewportPause",S0="toast.viewportResume",H4=g.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:i=Gz,label:a="Notifications ({hotkey})",...s}=e,o=Ax(W4,r),l=Wz(r),c=g.useRef(null),d=g.useRef(null),u=g.useRef(null),f=g.useRef(null),h=at(t,f,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;g.useEffect(()=>{const b=x=>{var j;i.length!==0&&i.every(N=>x[N]||x.code===N)&&((j=f.current)==null||j.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[i]),g.useEffect(()=>{const b=c.current,x=f.current;if(y&&b&&x){const m=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(N0);x.dispatchEvent(S),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(S0);x.dispatchEvent(S),o.isClosePausedRef.current=!1}},N=S=>{!b.contains(S.relatedTarget)&&j()},w=()=>{b.contains(document.activeElement)||j()};return b.addEventListener("focusin",m),b.addEventListener("focusout",N),b.addEventListener("pointermove",m),b.addEventListener("pointerleave",w),window.addEventListener("blur",m),window.addEventListener("focus",j),()=>{b.removeEventListener("focusin",m),b.removeEventListener("focusout",N),b.removeEventListener("pointermove",m),b.removeEventListener("pointerleave",w),window.removeEventListener("blur",m),window.removeEventListener("focus",j)}}},[y,o.isClosePausedRef]);const v=g.useCallback(({tabbingDirection:b})=>{const m=l().map(j=>{const N=j.ref.current,w=[N,...o7(N)];return b==="forwards"?w:w.reverse()});return(b==="forwards"?m.reverse():m).flat()},[l]);return g.useEffect(()=>{const b=f.current;if(b){const x=m=>{var w,S,C;const j=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!j){const k=document.activeElement,A=m.shiftKey;if(m.target===b&&A){(w=d.current)==null||w.focus();return}const P=v({tabbingDirection:A?"backwards":"forwards"}),_=P.findIndex(R=>R===k);yy(P.slice(_+1))?m.preventDefault():A?(S=d.current)==null||S.focus():(C=u.current)==null||C.focus()}};return b.addEventListener("keydown",x),()=>b.removeEventListener("keydown",x)}},[l,v]),n.jsxs(Fz,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&n.jsx(k0,{ref:d,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"forwards"});yy(b)}}),n.jsx(E1.Slot,{scope:r,children:n.jsx(Ue.ol,{tabIndex:-1,...s,ref:h})}),y&&n.jsx(k0,{ref:u,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"backwards"});yy(b)}})]})});H4.displayName=W4;var K4="ToastFocusProxy",k0=g.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:i,...a}=e,s=Ax(K4,r);return n.jsx(jh,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=s.viewport)!=null&&d.contains(l))&&i()}})});k0.displayName=K4;var Ex="Toast",Yz="toast.swipeStart",Qz="toast.swipeMove",Jz="toast.swipeCancel",Xz="toast.swipeEnd",G4=g.forwardRef((e,t)=>{const{forceMount:r,open:i,defaultOpen:a,onOpenChange:s,...o}=e,[l=!0,c]=ra({prop:i,defaultProp:a,onChange:s});return n.jsx(ai,{present:r||l,children:n.jsx(t7,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:ir(e.onPause),onResume:ir(e.onResume),onSwipeStart:Re(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Re(e.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Re(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Re(e.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});G4.displayName=Ex;var[Zz,e7]=U4(Ex,{onClose(){}}),t7=g.forwardRef((e,t)=>{const{__scopeToast:r,type:i="foreground",duration:a,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:p,...y}=e,v=Ax(Ex,r),[b,x]=g.useState(null),m=at(t,R=>x(R)),j=g.useRef(null),N=g.useRef(null),w=a||v.duration,S=g.useRef(0),C=g.useRef(w),k=g.useRef(0),{onToastAdd:A,onToastRemove:E}=v,T=ir(()=>{var O;(b==null?void 0:b.contains(document.activeElement))&&((O=v.viewport)==null||O.focus()),o()}),P=g.useCallback(R=>{!R||R===1/0||(window.clearTimeout(k.current),S.current=new Date().getTime(),k.current=window.setTimeout(T,R))},[T]);g.useEffect(()=>{const R=v.viewport;if(R){const O=()=>{P(C.current),d==null||d()},$=()=>{const M=new Date().getTime()-S.current;C.current=C.current-M,window.clearTimeout(k.current),c==null||c()};return R.addEventListener(N0,$),R.addEventListener(S0,O),()=>{R.removeEventListener(N0,$),R.removeEventListener(S0,O)}}},[v.viewport,w,c,d,P]),g.useEffect(()=>{s&&!v.isClosePausedRef.current&&P(w)},[s,w,v.isClosePausedRef,P]),g.useEffect(()=>(A(),()=>E()),[A,E]);const _=g.useMemo(()=>b?tI(b):null,[b]);return v.viewport?n.jsxs(n.Fragment,{children:[_&&n.jsx(r7,{__scopeToast:r,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:_}),n.jsx(Zz,{scope:r,onClose:T,children:ol.createPortal(n.jsx(E1.ItemSlot,{scope:r,children:n.jsx($z,{asChild:!0,onEscapeKeyDown:Re(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||T(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(Ue.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:m,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Re(e.onKeyDown,R=>{R.key==="Escape"&&(l==null||l(R.nativeEvent),R.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Re(e.onPointerDown,R=>{R.button===0&&(j.current={x:R.clientX,y:R.clientY})}),onPointerMove:Re(e.onPointerMove,R=>{if(!j.current)return;const O=R.clientX-j.current.x,$=R.clientY-j.current.y,M=!!N.current,I=["left","right"].includes(v.swipeDirection),L=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,z=I?L(0,O):0,ie=I?0:L(0,$),U=R.pointerType==="touch"?10:2,ee={x:z,y:ie},de={originalEvent:R,delta:ee};M?(N.current=ee,um(Qz,f,de,{discrete:!1})):pk(ee,v.swipeDirection,U)?(N.current=ee,um(Yz,u,de,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(O)>U||Math.abs($)>U)&&(j.current=null)}),onPointerUp:Re(e.onPointerUp,R=>{const O=N.current,$=R.target;if($.hasPointerCapture(R.pointerId)&&$.releasePointerCapture(R.pointerId),N.current=null,j.current=null,O){const M=R.currentTarget,I={originalEvent:R,delta:O};pk(O,v.swipeDirection,v.swipeThreshold)?um(Xz,p,I,{discrete:!0}):um(Jz,h,I,{discrete:!0}),M.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),r7=e=>{const{__scopeToast:t,children:r,...i}=e,a=Ax(Ex,t),[s,o]=g.useState(!1),[l,c]=g.useState(!1);return a7(()=>o(!0)),g.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx(Cx,{asChild:!0,children:n.jsx(jh,{...i,children:s&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},n7="ToastTitle",Y4=g.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return n.jsx(Ue.div,{...i,ref:t})});Y4.displayName=n7;var i7="ToastDescription",Q4=g.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return n.jsx(Ue.div,{...i,ref:t})});Q4.displayName=i7;var J4="ToastAction",X4=g.forwardRef((e,t)=>{const{altText:r,...i}=e;return r.trim()?n.jsx(eI,{altText:r,asChild:!0,children:n.jsx(P1,{...i,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${J4}\`. Expected non-empty \`string\`.`),null)});X4.displayName=J4;var Z4="ToastClose",P1=g.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e,a=e7(Z4,r);return n.jsx(eI,{asChild:!0,children:n.jsx(Ue.button,{type:"button",...i,ref:t,onClick:Re(e.onClick,a.onClose)})})});P1.displayName=Z4;var eI=g.forwardRef((e,t)=>{const{__scopeToast:r,altText:i,...a}=e;return n.jsx(Ue.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...a,ref:t})});function tI(e){const t=[];return Array.from(e.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&t.push(i.textContent),s7(i)){const a=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...tI(i))}}),t}function um(e,t,r,{discrete:i}){const a=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),i?L4(a,s):a.dispatchEvent(s)}var pk=(e,t,r=0)=>{const i=Math.abs(e.x),a=Math.abs(e.y),s=i>a;return t==="left"||t==="right"?s&&i>r:!s&&a>r};function a7(e=()=>{}){const t=ir(e);Fr(()=>{let r=0,i=0;return r=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(i)}},[t])}function s7(e){return e.nodeType===e.ELEMENT_NODE}function o7(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function yy(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var l7=V4,rI=H4,nI=G4,iI=Y4,aI=Q4,sI=X4,oI=P1;function lI(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=lI(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function gt(){for(var e,t,r=0,i="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=lI(e))&&(i&&(i+=" "),i+=t);return i}const gk=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,xk=gt,wd=(e,t)=>r=>{var i;if((t==null?void 0:t.variants)==null)return xk(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:s}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],f=s==null?void 0:s[d];if(u===null)return null;const h=gk(u)||gk(f);return a[d][h]}),l=r&&Object.entries(r).reduce((d,u)=>{let[f,h]=u;return h===void 0||(d[f]=h),d},{}),c=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((d,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(y=>{let[v,b]=y;return Array.isArray(b)?b.includes({...s,...l}[v]):{...s,...l}[v]===b})?[...d,f,h]:d},[]);return xk(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cI=(...e)=>e.filter((t,r,i)=>!!t&&i.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:a="",children:s,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...d7,width:t,height:t,stroke:e,strokeWidth:i?Number(r)*24/Number(t):r,className:cI("lucide",a),...l},[...o.map(([d,u])=>g.createElement(d,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(e,t)=>{const r=g.forwardRef(({className:i,...a},s)=>g.createElement(u7,{ref:s,iconNode:t,className:cI(`lucide-${c7(e)}`,i),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=fe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=fe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=fe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=fe("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=fe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=fe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=fe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=fe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=fe("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=fe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=fe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=fe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=fe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=fe("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=fe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=fe("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=fe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=fe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=fe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=fe("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=fe("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=fe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=fe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=fe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=fe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=fe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=fe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=fe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=fe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=fe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=fe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=fe("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=fe("MailWarning",[["path",{d:"M22 10.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h12.5",key:"e61zoh"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M20 14v4",key:"1hm744"}],["path",{d:"M20 22v.01",key:"12bgn6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=fe("MailX",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9",key:"1j9vog"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m17 17 4 4",key:"1b3523"}],["path",{d:"m21 17-4 4",key:"uinynz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=fe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=fe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=fe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=fe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=fe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=fe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=fe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=fe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=fe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=fe("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=fe("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=fe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=fe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=fe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=fe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=fe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=fe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=fe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=fe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=fe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=fe("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=fe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=fe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=fe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=fe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=fe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=fe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=fe("Vibrate",[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=fe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=fe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=fe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=fe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),R1="-",B7=e=>{const t=q7(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:o=>{const l=o.split(R1);return l[0]===""&&l.length!==1&&l.shift(),vI(l,t)||z7(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&i[o]?[...c,...i[o]]:c}}},vI=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),a=i?vI(e.slice(1),i):void 0;if(a)return a;if(t.validators.length===0)return;const s=e.join(R1);return(o=t.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},Nk=/^\[(.+)\]$/,z7=e=>{if(Nk.test(e)){const t=Nk.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},q7=e=>{const{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return V7(Object.entries(e.classGroups),r).forEach(([s,o])=>{T0(o,i,s,t)}),i},T0=(e,t,r,i)=>{e.forEach(a=>{if(typeof a=="string"){const s=a===""?t:Sk(t,a);s.classGroupId=r;return}if(typeof a=="function"){if(U7(a)){T0(a(i),t,r,i);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([s,o])=>{T0(o,Sk(t,s),r,i)})})},Sk=(e,t)=>{let r=e;return t.split(R1).forEach(i=>{r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r},U7=e=>e.isThemeGetter,V7=(e,t)=>t?e.map(([r,i])=>{const a=i.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[t+o,l])):s);return[r,a]}):e,W7=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,i=new Map;const a=(s,o)=>{r.set(s,o),t++,t>e&&(t=0,i=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return a(s,o),o},set(s,o){r.has(s)?r.set(s,o):a(s,o)}}},yI="!",H7=e=>{const{separator:t,experimentalParseClassName:r}=e,i=t.length===1,a=t[0],s=t.length,o=l=>{const c=[];let d=0,u=0,f;for(let b=0;b<l.length;b++){let x=l[b];if(d===0){if(x===a&&(i||l.slice(b,b+s)===t)){c.push(l.slice(u,b)),u=b+s;continue}if(x==="/"){f=b;continue}}x==="["?d++:x==="]"&&d--}const h=c.length===0?l:l.substring(u),p=h.startsWith(yI),y=p?h.substring(1):h,v=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:o}):o},K7=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(i=>{i[0]==="["?(t.push(...r.sort(),i),r=[]):r.push(i)}),t.push(...r.sort()),t},G7=e=>({cache:W7(e.cacheSize),parseClassName:H7(e),...B7(e)}),Y7=/\s+/,Q7=(e,t)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:a}=t,s=[],o=e.trim().split(Y7);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=r(d);let y=!!p,v=i(y?h.substring(0,p):h);if(!v){if(!y){l=d+(l.length>0?" "+l:l);continue}if(v=i(h),!v){l=d+(l.length>0?" "+l:l);continue}y=!1}const b=K7(u).join(":"),x=f?b+yI:b,m=x+v;if(s.includes(m))continue;s.push(m);const j=a(v,y);for(let N=0;N<j.length;++N){const w=j[N];s.push(x+w)}l=d+(l.length>0?" "+l:l)}return l};function J7(){let e=0,t,r,i="";for(;e<arguments.length;)(t=arguments[e++])&&(r=bI(t))&&(i&&(i+=" "),i+=r);return i}const bI=e=>{if(typeof e=="string")return e;let t,r="";for(let i=0;i<e.length;i++)e[i]&&(t=bI(e[i]))&&(r&&(r+=" "),r+=t);return r};function X7(e,...t){let r,i,a,s=o;function o(c){const d=t.reduce((u,f)=>f(u),e());return r=G7(d),i=r.cache.get,a=r.cache.set,s=l,l(c)}function l(c){const d=i(c);if(d)return d;const u=Q7(c,r);return a(c,u),u}return function(){return s(J7.apply(null,arguments))}}const Ft=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},jI=/^\[(?:([a-z-]+):)?(.+)\]$/i,Z7=/^\d+\/\d+$/,eq=new Set(["px","full","screen"]),tq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,da=e=>nc(e)||eq.has(e)||Z7.test(e),Za=e=>kd(e,"length",hq),nc=e=>!!e&&!Number.isNaN(Number(e)),wy=e=>kd(e,"number",nc),Jd=e=>!!e&&Number.isInteger(Number(e)),sq=e=>e.endsWith("%")&&nc(e.slice(0,-1)),it=e=>jI.test(e),es=e=>tq.test(e),oq=new Set(["length","size","percentage"]),lq=e=>kd(e,oq,wI),cq=e=>kd(e,"position",wI),dq=new Set(["image","url"]),uq=e=>kd(e,dq,pq),fq=e=>kd(e,"",mq),Xd=()=>!0,kd=(e,t,r)=>{const i=jI.exec(e);return i?i[1]?typeof t=="string"?i[1]===t:t.has(i[1]):r(i[2]):!1},hq=e=>rq.test(e)&&!nq.test(e),wI=()=>!1,mq=e=>iq.test(e),pq=e=>aq.test(e),gq=()=>{const e=Ft("colors"),t=Ft("spacing"),r=Ft("blur"),i=Ft("brightness"),a=Ft("borderColor"),s=Ft("borderRadius"),o=Ft("borderSpacing"),l=Ft("borderWidth"),c=Ft("contrast"),d=Ft("grayscale"),u=Ft("hueRotate"),f=Ft("invert"),h=Ft("gap"),p=Ft("gradientColorStops"),y=Ft("gradientColorStopPositions"),v=Ft("inset"),b=Ft("margin"),x=Ft("opacity"),m=Ft("padding"),j=Ft("saturate"),N=Ft("scale"),w=Ft("sepia"),S=Ft("skew"),C=Ft("space"),k=Ft("translate"),A=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",it,t],P=()=>[it,t],_=()=>["",da,Za],R=()=>["auto",nc,it],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",it],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[nc,it];return{cacheSize:500,separator:":",theme:{colors:[Xd],spacing:[da,Za],blur:["none","",es,it],brightness:ie(),borderColor:[e],borderRadius:["none","","full",es,it],borderSpacing:P(),borderWidth:_(),contrast:ie(),grayscale:L(),hueRotate:ie(),invert:L(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[sq,Za],inset:T(),margin:T(),opacity:ie(),padding:P(),saturate:ie(),scale:ie(),sepia:L(),skew:ie(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",it]}],container:["container"],columns:[{columns:[es]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),it]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jd,it]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",it]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Jd,it]}],"grid-cols":[{"grid-cols":[Xd]}],"col-start-end":[{col:["auto",{span:["full",Jd,it]},it]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Xd]}],"row-start-end":[{row:["auto",{span:[Jd,it]},it]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",it]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",it]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",it,t]}],"min-w":[{"min-w":[it,t,"min","max","fit"]}],"max-w":[{"max-w":[it,t,"none","full","min","max","fit","prose",{screen:[es]},es]}],h:[{h:[it,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[it,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[it,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[it,t,"auto","min","max","fit"]}],"font-size":[{text:["base",es,Za]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wy]}],"font-family":[{font:[Xd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",it]}],"line-clamp":[{"line-clamp":["none",nc,wy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",da,it]}],"list-image":[{"list-image":["none",it]}],"list-style-type":[{list:["none","disc","decimal",it]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",da,Za]}],"underline-offset":[{"underline-offset":["auto",da,it]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",it]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",it]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),cq]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},uq]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:$()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[da,it]}],"outline-w":[{outline:[da,Za]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[da,Za]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",es,fq]}],"shadow-color":[{shadow:[Xd]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",es,it]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[j]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",it]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",it]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",it]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Jd,it]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",it]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",it]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",it]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[da,Za,wy]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xq=X7(gq);function we(...e){return xq(gt(e))}const vq=l7,NI=g.forwardRef(({className:e,...t},r)=>n.jsx(rI,{ref:r,className:we("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));NI.displayName=rI.displayName;const yq=wd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),SI=g.forwardRef(({className:e,variant:t,...r},i)=>n.jsx(nI,{ref:i,className:we(yq({variant:t}),e),...r}));SI.displayName=nI.displayName;const bq=g.forwardRef(({className:e,...t},r)=>n.jsx(sI,{ref:r,className:we("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));bq.displayName=sI.displayName;const kI=g.forwardRef(({className:e,...t},r)=>n.jsx(oI,{ref:r,className:we("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Fi,{className:"h-4 w-4"})}));kI.displayName=oI.displayName;const CI=g.forwardRef(({className:e,...t},r)=>n.jsx(iI,{ref:r,className:we("text-sm font-semibold",e),...t}));CI.displayName=iI.displayName;const AI=g.forwardRef(({className:e,...t},r)=>n.jsx(aI,{ref:r,className:we("text-sm opacity-90",e),...t}));AI.displayName=aI.displayName;function jq(){const{toasts:e}=rt();return n.jsxs(vq,{children:[e.map(function({id:t,title:r,description:i,action:a,...s}){return n.jsxs(SI,{...s,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(CI,{children:r}),i&&n.jsx(AI,{children:i})]}),a,n.jsx(kI,{})]},t)}),n.jsx(NI,{})]})}var wq=rO[" useId ".trim().toString()]||(()=>{}),Nq=0;function Ca(e){const[t,r]=g.useState(wq());return Fr(()=>{r(i=>i??String(Nq++))},[e]),t?`radix-${t}`:""}const Sq=["top","right","bottom","left"],Vs=Math.min,Pn=Math.max,Mp=Math.round,fm=Math.floor,Xi=e=>({x:e,y:e}),kq={left:"right",right:"left",bottom:"top",top:"bottom"},Cq={start:"end",end:"start"};function O0(e,t,r){return Pn(e,Vs(t,r))}function La(e,t){return typeof e=="function"?e(t):e}function Ba(e){return e.split("-")[0]}function Cd(e){return e.split("-")[1]}function M1(e){return e==="x"?"y":"x"}function $1(e){return e==="y"?"height":"width"}function Ws(e){return["top","bottom"].includes(Ba(e))?"y":"x"}function F1(e){return M1(Ws(e))}function Aq(e,t,r){r===void 0&&(r=!1);const i=Cd(e),a=F1(e),s=$1(a);let o=a==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=$p(o)),[o,$p(o)]}function Eq(e){const t=$p(e);return[_0(e),t,_0(t)]}function _0(e){return e.replace(/start|end/g,t=>Cq[t])}function Pq(e,t,r){const i=["left","right"],a=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:i:t?i:a;case"left":case"right":return t?s:o;default:return[]}}function Tq(e,t,r,i){const a=Cd(e);let s=Pq(Ba(e),r==="start",i);return a&&(s=s.map(o=>o+"-"+a),t&&(s=s.concat(s.map(_0)))),s}function $p(e){return e.replace(/left|right|bottom|top/g,t=>kq[t])}function Oq(e){return{top:0,right:0,bottom:0,left:0,...e}}function EI(e){return typeof e!="number"?Oq(e):{top:e,right:e,bottom:e,left:e}}function Fp(e){const{x:t,y:r,width:i,height:a}=e;return{width:i,height:a,top:r,left:t,right:t+i,bottom:r+a,x:t,y:r}}function kk(e,t,r){let{reference:i,floating:a}=e;const s=Ws(t),o=F1(t),l=$1(o),c=Ba(t),d=s==="y",u=i.x+i.width/2-a.width/2,f=i.y+i.height/2-a.height/2,h=i[l]/2-a[l]/2;let p;switch(c){case"top":p={x:u,y:i.y-a.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:f};break;case"left":p={x:i.x-a.width,y:f};break;default:p={x:i.x,y:i.y}}switch(Cd(t)){case"start":p[o]-=h*(r&&d?-1:1);break;case"end":p[o]+=h*(r&&d?-1:1);break}return p}const _q=async(e,t,r)=>{const{placement:i="bottom",strategy:a="absolute",middleware:s=[],platform:o}=r,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:f}=kk(d,i,c),h=i,p={},y=0;for(let v=0;v<l.length;v++){const{name:b,fn:x}=l[v],{x:m,y:j,data:N,reset:w}=await x({x:u,y:f,initialPlacement:i,placement:h,strategy:a,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=m??u,f=j??f,p={...p,[b]:{...p[b],...N}},w&&y<=50&&(y++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(d=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):w.rects),{x:u,y:f}=kk(d,h,c)),v=-1)}return{x:u,y:f,placement:h,strategy:a,middlewareData:p}};async function mf(e,t){var r;t===void 0&&(t={});const{x:i,y:a,platform:s,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=La(t,e),y=EI(p),b=l[h?f==="floating"?"reference":"floating":f],x=Fp(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(b)))==null||r?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),m=f==="floating"?{x:i,y:a,width:o.floating.width,height:o.floating.height}:o.reference,j=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),N=await(s.isElement==null?void 0:s.isElement(j))?await(s.getScale==null?void 0:s.getScale(j))||{x:1,y:1}:{x:1,y:1},w=Fp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:m,offsetParent:j,strategy:c}):m);return{top:(x.top-w.top+y.top)/N.y,bottom:(w.bottom-x.bottom+y.bottom)/N.y,left:(x.left-w.left+y.left)/N.x,right:(w.right-x.right+y.right)/N.x}}const Iq=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:i,placement:a,rects:s,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=La(e,t)||{};if(d==null)return{};const f=EI(u),h={x:r,y:i},p=F1(a),y=$1(p),v=await o.getDimensions(d),b=p==="y",x=b?"top":"left",m=b?"bottom":"right",j=b?"clientHeight":"clientWidth",N=s.reference[y]+s.reference[p]-h[p]-s.floating[y],w=h[p]-s.reference[p],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let C=S?S[j]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=l.floating[j]||s.floating[y]);const k=N/2-w/2,A=C/2-v[y]/2-1,E=Vs(f[x],A),T=Vs(f[m],A),P=E,_=C-v[y]-T,R=C/2-v[y]/2+k,O=O0(P,R,_),$=!c.arrow&&Cd(a)!=null&&R!==O&&s.reference[y]/2-(R<P?E:T)-v[y]/2<0,M=$?R<P?R-P:R-_:0;return{[p]:h[p]+M,data:{[p]:O,centerOffset:R-O-M,...$&&{alignmentOffset:M}},reset:$}}}),Rq=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,i;const{placement:a,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...b}=La(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const x=Ba(a),m=Ws(l),j=Ba(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),w=h||(j||!v?[$p(l)]:Eq(l)),S=y!=="none";!h&&S&&w.push(...Tq(l,v,y,N));const C=[l,...w],k=await mf(t,b),A=[];let E=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&A.push(k[x]),f){const R=Aq(a,o,N);A.push(k[R[0]],k[R[1]])}if(E=[...E,{placement:a,overflows:A}],!A.every(R=>R<=0)){var T,P;const R=(((T=s.flip)==null?void 0:T.index)||0)+1,O=C[R];if(O)return{data:{index:R,overflows:E},reset:{placement:O}};let $=(P=E.filter(M=>M.overflows[0]<=0).sort((M,I)=>M.overflows[1]-I.overflows[1])[0])==null?void 0:P.placement;if(!$)switch(p){case"bestFit":{var _;const M=(_=E.filter(I=>{if(S){const L=Ws(I.placement);return L===m||L==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(L=>L>0).reduce((L,z)=>L+z,0)]).sort((I,L)=>I[1]-L[1])[0])==null?void 0:_[0];M&&($=M);break}case"initialPlacement":$=l;break}if(a!==$)return{reset:{placement:$}}}return{}}}};function Ck(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ak(e){return Sq.some(t=>e[t]>=0)}const Mq=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...a}=La(e,t);switch(i){case"referenceHidden":{const s=await mf(t,{...a,elementContext:"reference"}),o=Ck(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Ak(o)}}}case"escaped":{const s=await mf(t,{...a,altBoundary:!0}),o=Ck(s,r.floating);return{data:{escapedOffsets:o,escaped:Ak(o)}}}default:return{}}}}};async function $q(e,t){const{placement:r,platform:i,elements:a}=e,s=await(i.isRTL==null?void 0:i.isRTL(a.floating)),o=Ba(r),l=Cd(r),c=Ws(r)==="y",d=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,f=La(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(p=l==="end"?y*-1:y),c?{x:p*u,y:h*d}:{x:h*d,y:p*u}}const Fq=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,i;const{x:a,y:s,placement:o,middlewareData:l}=t,c=await $q(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:a+c.x,y:s+c.y,data:{...c,placement:o}}}}},Dq=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:i,placement:a}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x,y:m}=b;return{x,y:m}}},...c}=La(e,t),d={x:r,y:i},u=await mf(t,c),f=Ws(Ba(a)),h=M1(f);let p=d[h],y=d[f];if(s){const b=h==="y"?"top":"left",x=h==="y"?"bottom":"right",m=p+u[b],j=p-u[x];p=O0(m,p,j)}if(o){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",m=y+u[b],j=y-u[x];y=O0(m,y,j)}const v=l.fn({...t,[h]:p,[f]:y});return{...v,data:{x:v.x-r,y:v.y-i,enabled:{[h]:s,[f]:o}}}}}},Lq=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:i,placement:a,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=La(e,t),u={x:r,y:i},f=Ws(a),h=M1(f);let p=u[h],y=u[f];const v=La(l,t),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const j=h==="y"?"height":"width",N=s.reference[h]-s.floating[j]+b.mainAxis,w=s.reference[h]+s.reference[j]-b.mainAxis;p<N?p=N:p>w&&(p=w)}if(d){var x,m;const j=h==="y"?"width":"height",N=["top","left"].includes(Ba(a)),w=s.reference[f]-s.floating[j]+(N&&((x=o.offset)==null?void 0:x[f])||0)+(N?0:b.crossAxis),S=s.reference[f]+s.reference[j]+(N?0:((m=o.offset)==null?void 0:m[f])||0)-(N?b.crossAxis:0);y<w?y=w:y>S&&(y=S)}return{[h]:p,[f]:y}}}},Bq=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,i;const{placement:a,rects:s,platform:o,elements:l}=t,{apply:c=()=>{},...d}=La(e,t),u=await mf(t,d),f=Ba(a),h=Cd(a),p=Ws(a)==="y",{width:y,height:v}=s.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,b=h==="end"?"top":"bottom");const m=v-u.top-u.bottom,j=y-u.left-u.right,N=Vs(v-u[b],m),w=Vs(y-u[x],j),S=!t.middlewareData.shift;let C=N,k=w;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=j),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(C=m),S&&!h){const E=Pn(u.left,0),T=Pn(u.right,0),P=Pn(u.top,0),_=Pn(u.bottom,0);p?k=y-2*(E!==0||T!==0?E+T:Pn(u.left,u.right)):C=v-2*(P!==0||_!==0?P+_:Pn(u.top,u.bottom))}await c({...t,availableWidth:k,availableHeight:C});const A=await o.getDimensions(l.floating);return y!==A.width||v!==A.height?{reset:{rects:!0}}:{}}}};function Ox(){return typeof window<"u"}function Ad(e){return PI(e)?(e.nodeName||"").toLowerCase():"#document"}function Rn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function oa(e){var t;return(t=(PI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function PI(e){return Ox()?e instanceof Node||e instanceof Rn(e).Node:!1}function Mi(e){return Ox()?e instanceof Element||e instanceof Rn(e).Element:!1}function ia(e){return Ox()?e instanceof HTMLElement||e instanceof Rn(e).HTMLElement:!1}function Ek(e){return!Ox()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Rn(e).ShadowRoot}function wh(e){const{overflow:t,overflowX:r,overflowY:i,display:a}=$i(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!["inline","contents"].includes(a)}function zq(e){return["table","td","th"].includes(Ad(e))}function _x(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function D1(e){const t=L1(),r=Mi(e)?$i(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(r.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(r.contain||"").includes(i))}function qq(e){let t=Hs(e);for(;ia(t)&&!Dc(t);){if(D1(t))return t;if(_x(t))return null;t=Hs(t)}return null}function L1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Dc(e){return["html","body","#document"].includes(Ad(e))}function $i(e){return Rn(e).getComputedStyle(e)}function Ix(e){return Mi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hs(e){if(Ad(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ek(e)&&e.host||oa(e);return Ek(t)?t.host:t}function TI(e){const t=Hs(e);return Dc(t)?e.ownerDocument?e.ownerDocument.body:e.body:ia(t)&&wh(t)?t:TI(t)}function pf(e,t,r){var i;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=TI(e),s=a===((i=e.ownerDocument)==null?void 0:i.body),o=Rn(a);if(s){const l=I0(o);return t.concat(o,o.visualViewport||[],wh(a)?a:[],l&&r?pf(l):[])}return t.concat(a,pf(a,[],r))}function I0(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function OI(e){const t=$i(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const a=ia(e),s=a?e.offsetWidth:r,o=a?e.offsetHeight:i,l=Mp(r)!==s||Mp(i)!==o;return l&&(r=s,i=o),{width:r,height:i,$:l}}function B1(e){return Mi(e)?e:e.contextElement}function ic(e){const t=B1(e);if(!ia(t))return Xi(1);const r=t.getBoundingClientRect(),{width:i,height:a,$:s}=OI(t);let o=(s?Mp(r.width):r.width)/i,l=(s?Mp(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Uq=Xi(0);function _I(e){const t=Rn(e);return!L1()||!t.visualViewport?Uq:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Vq(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Rn(e)?!1:t}function Qo(e,t,r,i){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),s=B1(e);let o=Xi(1);t&&(i?Mi(i)&&(o=ic(i)):o=ic(e));const l=Vq(s,r,i)?_I(s):Xi(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,f=a.height/o.y;if(s){const h=Rn(s),p=i&&Mi(i)?Rn(i):i;let y=h,v=I0(y);for(;v&&i&&p!==y;){const b=ic(v),x=v.getBoundingClientRect(),m=$i(v),j=x.left+(v.clientLeft+parseFloat(m.paddingLeft))*b.x,N=x.top+(v.clientTop+parseFloat(m.paddingTop))*b.y;c*=b.x,d*=b.y,u*=b.x,f*=b.y,c+=j,d+=N,y=Rn(v),v=I0(y)}}return Fp({width:u,height:f,x:c,y:d})}function z1(e,t){const r=Ix(e).scrollLeft;return t?t.left+r:Qo(oa(e)).left+r}function II(e,t,r){r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=i.left+t.scrollLeft-(r?0:z1(e,i)),s=i.top+t.scrollTop;return{x:a,y:s}}function Wq(e){let{elements:t,rect:r,offsetParent:i,strategy:a}=e;const s=a==="fixed",o=oa(i),l=t?_x(t.floating):!1;if(i===o||l&&s)return r;let c={scrollLeft:0,scrollTop:0},d=Xi(1);const u=Xi(0),f=ia(i);if((f||!f&&!s)&&((Ad(i)!=="body"||wh(o))&&(c=Ix(i)),ia(i))){const p=Qo(i);d=ic(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const h=o&&!f&&!s?II(o,c,!0):Xi(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:r.y*d.y-c.scrollTop*d.y+u.y+h.y}}function Hq(e){return Array.from(e.getClientRects())}function Kq(e){const t=oa(e),r=Ix(e),i=e.ownerDocument.body,a=Pn(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=Pn(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-r.scrollLeft+z1(e);const l=-r.scrollTop;return $i(i).direction==="rtl"&&(o+=Pn(t.clientWidth,i.clientWidth)-a),{width:a,height:s,x:o,y:l}}function Gq(e,t){const r=Rn(e),i=oa(e),a=r.visualViewport;let s=i.clientWidth,o=i.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;const d=L1();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l,y:c}}function Yq(e,t){const r=Qo(e,!0,t==="fixed"),i=r.top+e.clientTop,a=r.left+e.clientLeft,s=ia(e)?ic(e):Xi(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,c=a*s.x,d=i*s.y;return{width:o,height:l,x:c,y:d}}function Pk(e,t,r){let i;if(t==="viewport")i=Gq(e,r);else if(t==="document")i=Kq(oa(e));else if(Mi(t))i=Yq(t,r);else{const a=_I(e);i={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Fp(i)}function RI(e,t){const r=Hs(e);return r===t||!Mi(r)||Dc(r)?!1:$i(r).position==="fixed"||RI(r,t)}function Qq(e,t){const r=t.get(e);if(r)return r;let i=pf(e,[],!1).filter(l=>Mi(l)&&Ad(l)!=="body"),a=null;const s=$i(e).position==="fixed";let o=s?Hs(e):e;for(;Mi(o)&&!Dc(o);){const l=$i(o),c=D1(o);!c&&l.position==="fixed"&&(a=null),(s?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||wh(o)&&!c&&RI(e,o))?i=i.filter(u=>u!==o):a=l,o=Hs(o)}return t.set(e,i),i}function Jq(e){let{element:t,boundary:r,rootBoundary:i,strategy:a}=e;const o=[...r==="clippingAncestors"?_x(t)?[]:Qq(t,this._c):[].concat(r),i],l=o[0],c=o.reduce((d,u)=>{const f=Pk(t,u,a);return d.top=Pn(f.top,d.top),d.right=Vs(f.right,d.right),d.bottom=Vs(f.bottom,d.bottom),d.left=Pn(f.left,d.left),d},Pk(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Xq(e){const{width:t,height:r}=OI(e);return{width:t,height:r}}function Zq(e,t,r){const i=ia(t),a=oa(t),s=r==="fixed",o=Qo(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=Xi(0);if(i||!i&&!s)if((Ad(t)!=="body"||wh(a))&&(l=Ix(t)),i){const h=Qo(t,!0,s,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else a&&(c.x=z1(a));const d=a&&!i&&!s?II(a,l):Xi(0),u=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:u,y:f,width:o.width,height:o.height}}function Ny(e){return $i(e).position==="static"}function Tk(e,t){if(!ia(e)||$i(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return oa(e)===r&&(r=r.ownerDocument.body),r}function MI(e,t){const r=Rn(e);if(_x(e))return r;if(!ia(e)){let a=Hs(e);for(;a&&!Dc(a);){if(Mi(a)&&!Ny(a))return a;a=Hs(a)}return r}let i=Tk(e,t);for(;i&&zq(i)&&Ny(i);)i=Tk(i,t);return i&&Dc(i)&&Ny(i)&&!D1(i)?r:i||qq(e)||r}const eU=async function(e){const t=this.getOffsetParent||MI,r=this.getDimensions,i=await r(e.floating);return{reference:Zq(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function tU(e){return $i(e).direction==="rtl"}const rU={convertOffsetParentRelativeRectToViewportRelativeRect:Wq,getDocumentElement:oa,getClippingRect:Jq,getOffsetParent:MI,getElementRects:eU,getClientRects:Hq,getDimensions:Xq,getScale:ic,isElement:Mi,isRTL:tU};function $I(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function nU(e,t){let r=null,i;const a=oa(e);function s(){var l;clearTimeout(i),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const d=e.getBoundingClientRect(),{left:u,top:f,width:h,height:p}=d;if(l||t(),!h||!p)return;const y=fm(f),v=fm(a.clientWidth-(u+h)),b=fm(a.clientHeight-(f+p)),x=fm(u),j={rootMargin:-y+"px "+-v+"px "+-b+"px "+-x+"px",threshold:Pn(0,Vs(1,c))||1};let N=!0;function w(S){const C=S[0].intersectionRatio;if(C!==c){if(!N)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!$I(d,e.getBoundingClientRect())&&o(),N=!1}try{r=new IntersectionObserver(w,{...j,root:a.ownerDocument})}catch{r=new IntersectionObserver(w,j)}r.observe(e)}return o(!0),s}function iU(e,t,r,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=i,d=B1(e),u=a||s?[...d?pf(d):[],...pf(t)]:[];u.forEach(x=>{a&&x.addEventListener("scroll",r,{passive:!0}),s&&x.addEventListener("resize",r)});const f=d&&l?nU(d,r):null;let h=-1,p=null;o&&(p=new ResizeObserver(x=>{let[m]=x;m&&m.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var j;(j=p)==null||j.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let y,v=c?Qo(e):null;c&&b();function b(){const x=Qo(e);v&&!$I(v,x)&&r(),v=x,y=requestAnimationFrame(b)}return r(),()=>{var x;u.forEach(m=>{a&&m.removeEventListener("scroll",r),s&&m.removeEventListener("resize",r)}),f==null||f(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(y)}}const aU=Fq,sU=Dq,oU=Rq,lU=Bq,cU=Mq,Ok=Iq,dU=Lq,uU=(e,t,r)=>{const i=new Map,a={platform:rU,...r},s={...a.platform,_c:i};return _q(e,t,{...a,platform:s})};var Xm=typeof document<"u"?g.useLayoutEffect:g.useEffect;function Dp(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,i,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(i=r;i--!==0;)if(!Dp(e[i],t[i]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){const s=a[i];if(!(s==="_owner"&&e.$$typeof)&&!Dp(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function FI(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _k(e,t){const r=FI(e);return Math.round(t*r)/r}function Sy(e){const t=g.useRef(e);return Xm(()=>{t.current=e}),t}function fU(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:i=[],platform:a,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,f]=g.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=g.useState(i);Dp(h,i)||p(i);const[y,v]=g.useState(null),[b,x]=g.useState(null),m=g.useCallback(I=>{I!==S.current&&(S.current=I,v(I))},[]),j=g.useCallback(I=>{I!==C.current&&(C.current=I,x(I))},[]),N=s||y,w=o||b,S=g.useRef(null),C=g.useRef(null),k=g.useRef(u),A=c!=null,E=Sy(c),T=Sy(a),P=Sy(d),_=g.useCallback(()=>{if(!S.current||!C.current)return;const I={placement:t,strategy:r,middleware:h};T.current&&(I.platform=T.current),uU(S.current,C.current,I).then(L=>{const z={...L,isPositioned:P.current!==!1};R.current&&!Dp(k.current,z)&&(k.current=z,ol.flushSync(()=>{f(z)}))})},[h,t,r,T,P]);Xm(()=>{d===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(I=>({...I,isPositioned:!1})))},[d]);const R=g.useRef(!1);Xm(()=>(R.current=!0,()=>{R.current=!1}),[]),Xm(()=>{if(N&&(S.current=N),w&&(C.current=w),N&&w){if(E.current)return E.current(N,w,_);_()}},[N,w,_,E,A]);const O=g.useMemo(()=>({reference:S,floating:C,setReference:m,setFloating:j}),[m,j]),$=g.useMemo(()=>({reference:N,floating:w}),[N,w]),M=g.useMemo(()=>{const I={position:r,left:0,top:0};if(!$.floating)return I;const L=_k($.floating,u.x),z=_k($.floating,u.y);return l?{...I,transform:"translate("+L+"px, "+z+"px)",...FI($.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:L,top:z}},[r,l,$.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:_,refs:O,elements:$,floatingStyles:M}),[u,_,O,$,M])}const hU=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:i,padding:a}=typeof e=="function"?e(r):e;return i&&t(i)?i.current!=null?Ok({element:i.current,padding:a}).fn(r):{}:i?Ok({element:i,padding:a}).fn(r):{}}}},mU=(e,t)=>({...aU(e),options:[e,t]}),pU=(e,t)=>({...sU(e),options:[e,t]}),gU=(e,t)=>({...dU(e),options:[e,t]}),xU=(e,t)=>({...oU(e),options:[e,t]}),vU=(e,t)=>({...lU(e),options:[e,t]}),yU=(e,t)=>({...cU(e),options:[e,t]}),bU=(e,t)=>({...hU(e),options:[e,t]});var jU="Arrow",DI=g.forwardRef((e,t)=>{const{children:r,width:i=10,height:a=5,...s}=e;return n.jsx(Ue.svg,{...s,ref:t,width:i,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});DI.displayName=jU;var wU=DI;function Rx(e){const[t,r]=g.useState(void 0);return Fr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else r(void 0)},[e]),t}var q1="Popper",[LI,Mx]=jn(q1),[NU,BI]=LI(q1),zI=e=>{const{__scopePopper:t,children:r}=e,[i,a]=g.useState(null);return n.jsx(NU,{scope:t,anchor:i,onAnchorChange:a,children:r})};zI.displayName=q1;var qI="PopperAnchor",UI=g.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:i,...a}=e,s=BI(qI,r),o=g.useRef(null),l=at(t,o);return g.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:n.jsx(Ue.div,{...a,ref:l})});UI.displayName=qI;var U1="PopperContent",[SU,kU]=LI(U1),VI=g.forwardRef((e,t)=>{var ve,ye,ne,H,B,J;const{__scopePopper:r,side:i="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:y,...v}=e,b=BI(U1,r),[x,m]=g.useState(null),j=at(t,ze=>m(ze)),[N,w]=g.useState(null),S=Rx(N),C=(S==null?void 0:S.width)??0,k=(S==null?void 0:S.height)??0,A=i+(s!=="center"?"-"+s:""),E=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(d)?d:[d],P=T.length>0,_={padding:E,boundary:T.filter(AU),altBoundary:P},{refs:R,floatingStyles:O,placement:$,isPositioned:M,middlewareData:I}=fU({strategy:"fixed",placement:A,whileElementsMounted:(...ze)=>iU(...ze,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[mU({mainAxis:a+k,alignmentAxis:o}),c&&pU({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?gU():void 0,..._}),c&&xU({..._}),vU({..._,apply:({elements:ze,rects:ue,availableWidth:Ae,availableHeight:Ke})=>{const{width:nt,height:jt}=ue.reference,te=ze.floating.style;te.setProperty("--radix-popper-available-width",`${Ae}px`),te.setProperty("--radix-popper-available-height",`${Ke}px`),te.setProperty("--radix-popper-anchor-width",`${nt}px`),te.setProperty("--radix-popper-anchor-height",`${jt}px`)}}),N&&bU({element:N,padding:l}),EU({arrowWidth:C,arrowHeight:k}),h&&yU({strategy:"referenceHidden",..._})]}),[L,z]=KI($),ie=ir(y);Fr(()=>{M&&(ie==null||ie())},[M,ie]);const U=(ve=I.arrow)==null?void 0:ve.x,ee=(ye=I.arrow)==null?void 0:ye.y,de=((ne=I.arrow)==null?void 0:ne.centerOffset)!==0,[oe,Pe]=g.useState();return Fr(()=>{x&&Pe(window.getComputedStyle(x).zIndex)},[x]),n.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:M?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(H=I.transformOrigin)==null?void 0:H.x,(B=I.transformOrigin)==null?void 0:B.y].join(" "),...((J=I.hide)==null?void 0:J.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(SU,{scope:r,placedSide:L,onArrowChange:w,arrowX:U,arrowY:ee,shouldHideArrow:de,children:n.jsx(Ue.div,{"data-side":L,"data-align":z,...v,ref:j,style:{...v.style,animation:M?void 0:"none"}})})})});VI.displayName=U1;var WI="PopperArrow",CU={top:"bottom",right:"left",bottom:"top",left:"right"},HI=g.forwardRef(function(t,r){const{__scopePopper:i,...a}=t,s=kU(WI,i),o=CU[s.placedSide];return n.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:n.jsx(wU,{...a,ref:r,style:{...a.style,display:"block"}})})});HI.displayName=WI;function AU(e){return e!==null}var EU=e=>({name:"transformOrigin",options:e,fn(t){var b,x,m;const{placement:r,rects:i,middlewareData:a}=t,o=((b=a.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=KI(r),f={start:"0%",center:"50%",end:"100%"}[u],h=(((x=a.arrow)==null?void 0:x.x)??0)+l/2,p=(((m=a.arrow)==null?void 0:m.y)??0)+c/2;let y="",v="";return d==="bottom"?(y=o?f:`${h}px`,v=`${-c}px`):d==="top"?(y=o?f:`${h}px`,v=`${i.floating.height+c}px`):d==="right"?(y=`${-c}px`,v=o?f:`${p}px`):d==="left"&&(y=`${i.floating.width+c}px`,v=o?f:`${p}px`),{data:{x:y,y:v}}}});function KI(e){const[t,r="center"]=e.split("-");return[t,r]}var GI=zI,YI=UI,QI=VI,JI=HI,[$x,aNe]=jn("Tooltip",[Mx]),Fx=Mx(),XI="TooltipProvider",PU=700,R0="tooltip.open",[TU,V1]=$x(XI),ZI=e=>{const{__scopeTooltip:t,delayDuration:r=PU,skipDelayDuration:i=300,disableHoverableContent:a=!1,children:s}=e,o=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),n.jsx(TU,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,i)},[i]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:s})};ZI.displayName=XI;var Dx="Tooltip",[OU,Lx]=$x(Dx),eR=e=>{const{__scopeTooltip:t,children:r,open:i,defaultOpen:a=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=e,c=V1(Dx,e.__scopeTooltip),d=Fx(t),[u,f]=g.useState(null),h=Ca(),p=g.useRef(0),y=o??c.disableHoverableContent,v=l??c.delayDuration,b=g.useRef(!1),[x=!1,m]=ra({prop:i,defaultProp:a,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(R0))):c.onClose(),s==null||s(C)}}),j=g.useMemo(()=>x?b.current?"delayed-open":"instant-open":"closed",[x]),N=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b.current=!1,m(!0)},[m]),w=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,m(!1)},[m]),S=g.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,m(!0),p.current=0},v)},[v,m]);return g.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),n.jsx(GI,{...d,children:n.jsx(OU,{scope:t,contentId:h,open:x,stateAttribute:j,trigger:u,onTriggerChange:f,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayedRef.current?S():N()},[c.isOpenDelayedRef,S,N]),onTriggerLeave:g.useCallback(()=>{y?w():(window.clearTimeout(p.current),p.current=0)},[w,y]),onOpen:N,onClose:w,disableHoverableContent:y,children:r})})};eR.displayName=Dx;var M0="TooltipTrigger",tR=g.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,a=Lx(M0,r),s=V1(M0,r),o=Fx(r),l=g.useRef(null),c=at(t,l,a.onTriggerChange),d=g.useRef(!1),u=g.useRef(!1),f=g.useCallback(()=>d.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),n.jsx(YI,{asChild:!0,...o,children:n.jsx(Ue.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...i,ref:c,onPointerMove:Re(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Re(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Re(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Re(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Re(e.onBlur,a.onClose),onClick:Re(e.onClick,a.onClose)})})});tR.displayName=M0;var _U="TooltipPortal",[sNe,IU]=$x(_U,{forceMount:void 0}),Lc="TooltipContent",rR=g.forwardRef((e,t)=>{const r=IU(Lc,e.__scopeTooltip),{forceMount:i=r.forceMount,side:a="top",...s}=e,o=Lx(Lc,e.__scopeTooltip);return n.jsx(ai,{present:i||o.open,children:o.disableHoverableContent?n.jsx(nR,{side:a,...s,ref:t}):n.jsx(RU,{side:a,...s,ref:t})})}),RU=g.forwardRef((e,t)=>{const r=Lx(Lc,e.__scopeTooltip),i=V1(Lc,e.__scopeTooltip),a=g.useRef(null),s=at(t,a),[o,l]=g.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:f}=i,h=g.useCallback(()=>{l(null),f(!1)},[f]),p=g.useCallback((y,v)=>{const b=y.currentTarget,x={x:y.clientX,y:y.clientY},m=LU(x,b.getBoundingClientRect()),j=BU(x,m),N=zU(v.getBoundingClientRect()),w=UU([...j,...N]);l(w),f(!0)},[f]);return g.useEffect(()=>()=>h(),[h]),g.useEffect(()=>{if(c&&u){const y=b=>p(b,u),v=b=>p(b,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[c,u,p,h]),g.useEffect(()=>{if(o){const y=v=>{const b=v.target,x={x:v.clientX,y:v.clientY},m=(c==null?void 0:c.contains(b))||(u==null?void 0:u.contains(b)),j=!qU(x,o);m?h():j&&(h(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,o,d,h]),n.jsx(nR,{...e,ref:s})}),[MU,$U]=$x(Dx,{isInside:!1}),FU=D4("TooltipContent"),nR=g.forwardRef((e,t)=>{const{__scopeTooltip:r,children:i,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=Lx(Lc,r),d=Fx(r),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(R0,u),()=>document.removeEventListener(R0,u)),[u]),g.useEffect(()=>{if(c.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),n.jsx(bh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:n.jsxs(QI,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(FU,{children:i}),n.jsx(MU,{scope:r,isInside:!0,children:n.jsx(Vz,{id:c.contentId,role:"tooltip",children:a||i})})]})})});rR.displayName=Lc;var iR="TooltipArrow",DU=g.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,a=Fx(r);return $U(iR,r).isInside?null:n.jsx(JI,{...a,...i,ref:t})});DU.displayName=iR;function LU(e,t){const r=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,i,a,s)){case s:return"left";case a:return"right";case r:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function BU(e,t,r=5){const i=[];switch(t){case"top":i.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":i.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":i.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":i.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return i}function zU(e){const{top:t,right:r,bottom:i,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:i},{x:a,y:i}]}function qU(e,t){const{x:r,y:i}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s].x,c=t[s].y,d=t[o].x,u=t[o].y;c>i!=u>i&&r<(d-l)*(i-c)/(u-c)+l&&(a=!a)}return a}function UU(e){const t=e.slice();return t.sort((r,i)=>r.x<i.x?-1:r.x>i.x?1:r.y<i.y?-1:r.y>i.y?1:0),VU(t)}function VU(e){if(e.length<=1)return e.slice();const t=[];for(let i=0;i<e.length;i++){const a=e[i];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let i=e.length-1;i>=0;i--){const a=e[i];for(;r.length>=2;){const s=r[r.length-1],o=r[r.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var WU=ZI,HU=eR,KU=tR,aR=rR;const W1=WU,sR=HU,oR=KU,H1=g.forwardRef(({className:e,sideOffset:t=4,...r},i)=>n.jsx(aR,{ref:i,sideOffset:t,className:we("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));H1.displayName=aR.displayName;const GU=g.createContext(void 0);function YU({children:e,defaultTheme:t="dark"}){const[r,i]=g.useState(()=>localStorage.getItem("theme")||t);return g.useEffect(()=>{const a=document.documentElement;a.classList.remove("light","dark"),a.classList.add(r),localStorage.setItem("theme",r)},[r]),n.jsx(GU.Provider,{value:{theme:r,setTheme:i},children:e})}const lR=g.createContext(null);function QU(e){const t=new Set;return e.filter(r=>t.has(r.id)?!1:(t.add(r.id),!0))}function JU({children:e}){const[t,r]=g.useState([]),[i,a]=g.useState(!1),s=g.useCallback(d=>{r(u=>{const f=typeof d=="function"?d(u):d;return QU(f)})},[]),o=g.useCallback(d=>{r(u=>u.some(f=>f.id===d.id)?u:[...u,d])},[]),l=g.useCallback((d,u)=>{s(f=>f.map(h=>h.id===d?{...h,...u}:h))},[]),c=g.useCallback(()=>{s([]),a(!1)},[]);return n.jsx(lR.Provider,{value:{messages:t,setMessages:s,addMessage:o,updateMessage:l,clearMessages:c,historyLoaded:i,setHistoryLoaded:a},children:e})}function K1(){const e=g.useContext(lR);if(!e)throw new Error("useChatContext must be used within a ChatProvider");return e}async function XU(){try{const e=await fetch("/api/version");if(!e.ok){console.log("[VERSION] Server version check failed, using fallback");return}const t=await e.json(),r=localStorage.getItem("app_version");if(r&&r!==t.version){console.log(`[VERSION] Detected version change: ${r}  ${t.version}`),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(i=>{i.forEach(a=>{a.unregister()})}),"caches"in window&&caches.keys().then(i=>{i.forEach(a=>{caches.delete(a)})}),localStorage.setItem("app_version",t.version),console.log("[VERSION] Forcing reload for new version..."),window.location.reload();return}localStorage.setItem("app_version",t.version),console.log(`[VERSION] Current version: ${t.version}`)}catch(e){console.log("[VERSION] Version check skipped:",e)}}class ZU{constructor(){this.visitorId=this.getOrCreateVisitorId(),this.sessionId=this.getOrCreateSessionId(),this.pageLoadTime=Date.now()}getOrCreateVisitorId(){let t=localStorage.getItem("bjj_visitor_id");return t||(t="v_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),localStorage.setItem("bjj_visitor_id",t)),t}getOrCreateSessionId(){let t=sessionStorage.getItem("bjj_session_id");return t||(t="s_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),sessionStorage.setItem("bjj_session_id",t)),t}getTrafficSource(){const t=document.referrer,r=new URLSearchParams(window.location.search),i=r.get("utm_source");return i?{source:i,utmMedium:r.get("utm_medium"),utmCampaign:r.get("utm_campaign"),referrer:t}:t?t.includes("instagram.com")?{source:"instagram",referrer:t}:t.includes("google.com")?{source:"google",referrer:t}:t.includes("facebook.com")?{source:"facebook",referrer:t}:t.includes("twitter.com")||t.includes("t.co")?{source:"twitter",referrer:t}:t.includes("youtube.com")?{source:"youtube",referrer:t}:t.includes("reddit.com")?{source:"reddit",referrer:t}:t.includes("tiktok.com")?{source:"tiktok",referrer:t}:{source:"referral",referrer:t}:{source:"direct",referrer:""}}getDeviceInfo(){const t=navigator.userAgent;let r="desktop";/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(t)?r="tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)&&(r="mobile");let i="unknown";t.includes("Chrome")?i="Chrome":t.includes("Safari")?i="Safari":t.includes("Firefox")?i="Firefox":t.includes("Edge")&&(i="Edge");let a="unknown";return t.includes("Windows")?a="Windows":t.includes("Mac")?a="macOS":t.includes("iPhone")||t.includes("iPad")?a="iOS":t.includes("Android")?a="Android":t.includes("Linux")&&(a="Linux"),{deviceType:r,browser:i,os:a}}async trackPageView(){try{const t=this.getTrafficSource(),r=this.getDeviceInfo(),i={pagePath:window.location.pathname,pageTitle:document.title,visitorId:this.visitorId,sessionId:this.sessionId,referrer:t.referrer,source:t.source,utmSource:"utmMedium"in t?t.source:null,utmMedium:"utmMedium"in t?t.utmMedium:null,utmCampaign:"utmCampaign"in t?t.utmCampaign:null,deviceType:r.deviceType,browser:r.browser,os:r.os};await fetch("/api/analytics/pageview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),this.trackTimeOnPage()}catch(t){console.error("Analytics error:",t)}}trackTimeOnPage(){window.addEventListener("beforeunload",()=>{const t=Math.round((Date.now()-this.pageLoadTime)/1e3);navigator.sendBeacon("/api/analytics/time-on-page",JSON.stringify({visitorId:this.visitorId,sessionId:this.sessionId,pagePath:window.location.pathname,timeOnPage:t}))})}}if(window.location.pathname==="/"||window.location.pathname.startsWith("/pricing")){const e=new ZU;e.trackPageView(),window.bjjAnalytics=e}var cR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ik=D.createContext&&D.createContext(cR),eV=["attr","size","title"];function tV(e,t){if(e==null)return{};var r=rV(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function rV(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function Lp(){return Lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Lp.apply(this,arguments)}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function Bp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(i){nV(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function nV(e,t,r){return t=iV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iV(e){var t=aV(e,"string");return typeof t=="symbol"?t:t+""}function aV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dR(e){return e&&e.map((t,r)=>D.createElement(t.tag,Bp({key:r},t.attr),dR(t.child)))}function sV(e){return t=>D.createElement(oV,Lp({attr:Bp({},e.attr)},t),dR(e.child))}function oV(e){var t=r=>{var{attr:i,size:a,title:s}=e,o=tV(e,eV),l=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),D.createElement("svg",Lp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,o,{className:c,style:Bp(Bp({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&D.createElement("title",null,s),e.children)};return Ik!==void 0?D.createElement(Ik.Consumer,null,r=>t(r)):t(cR)}function lV(e){return sV({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"},child:[]}]})(e)}function cV(){const[,e]=Ze();return g.useEffect(()=>{const t=document.querySelectorAll("section:not(.landing-hero)"),r={root:null,rootMargin:"0px",threshold:.1},i=o=>{o.forEach(l=>{l.isIntersecting&&l.target.classList.add("visible")})},a=new IntersectionObserver(i,r);t.forEach(o=>{a.observe(o)});const s=document.querySelector(".landing-comparison");if(s){const o=c=>{const d=c,u=s.getBoundingClientRect(),f=(d.clientX-u.left)/u.width*100,h=(d.clientY-u.top)/u.height*100;s.style.setProperty("--mouse-x",`${f}%`),s.style.setProperty("--mouse-y",`${h}%`)},l=()=>{s.style.setProperty("--mouse-x","50%"),s.style.setProperty("--mouse-y","50%")};return s.addEventListener("mousemove",o),s.addEventListener("mouseleave",l),()=>{a.disconnect(),s.removeEventListener("mousemove",o),s.removeEventListener("mouseleave",l)}}return()=>{a.disconnect()}},[]),n.jsxs("div",{className:"landing-page page-container",children:[n.jsx("nav",{className:"landing-nav",children:n.jsxs("div",{className:"landing-nav-content",children:[n.jsx("div",{className:"landing-nav-left",children:n.jsx("a",{href:"/",className:"landing-logo-link","data-testid":"link-home",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"landing-logo-img"})})}),n.jsxs("div",{className:"landing-nav-right",children:[n.jsx("button",{className:"landing-nav-login",onClick:()=>e("/login"),"data-testid":"button-login",children:"Login"}),n.jsx("button",{className:"landing-nav-signup",onClick:()=>e("/pricing"),"data-testid":"button-signup",children:"Sign Up"})]})]})}),n.jsx("section",{className:"landing-hero hero-section",children:n.jsxs("div",{className:"landing-hero-content",children:[n.jsxs("h1",{className:"landing-hero-headline",children:["Stop training blindly.",n.jsx("br",{}),"Start training with intelligence."]}),n.jsx("p",{className:"landing-hero-paragraph",children:"Prof. OS autonomously searches and analyzes BJJ instructional content every dayfinding videos buried deep in YouTube you'd never discover, rating quality, verifying instructor credentials, timestamping the exact moments that matter. The database grows continuously, learning which instruction actually works. No more 20-minute tutorials. No more sifting through beginners teaching beginners. Just the best instruction, curated and ready."}),n.jsx("p",{className:"landing-hero-paragraph",children:"It learns your game at every level. Beginners discover why they keep getting caught in the same submissions. Intermediates identify which techniques work for their body type and which don't. Advanced players track success rates across hundreds of positions, spot subtle patterns in their competition footage, and compare their game against population data from thousands of grapplersinsights no single coach could provide. The intelligence scales with you."}),n.jsx("button",{className:"landing-cta-button cta-button",onClick:()=>e("/pricing"),"data-testid":"button-start-trial",children:"Start 7-Day Trial"}),n.jsx("p",{className:"landing-trust-line",children:"Used by white belts learning fundamentals to black belts preparing for Worlds"})]})}),n.jsx("section",{className:"landing-comparison comparison-section",children:n.jsx("div",{className:"landing-comparison-content",children:n.jsxs("div",{className:"landing-comparison-grid",children:[n.jsxs("div",{className:"landing-comparison-column landing-without-column",children:[n.jsx("h3",{className:"landing-comparison-header",children:"WITHOUT PROF. OS"}),n.jsxs("div",{className:"landing-comparison-items",children:[n.jsxs("p",{className:"landing-without-item",children:[n.jsx("span",{className:"landing-without-indicator",children:""})," Forget techniques from class by next session"]}),n.jsxs("p",{className:"landing-without-item",children:[n.jsx("span",{className:"landing-without-indicator",children:""})," Watch random YouTube for hours hoping something sticks"]}),n.jsxs("p",{className:"landing-without-item",children:[n.jsx("span",{className:"landing-without-indicator",children:""})," Wonder if you're actually improving"]}),n.jsxs("p",{className:"landing-without-item",children:[n.jsx("span",{className:"landing-without-indicator",children:""})," Repeat the same mistakes for months"]})]})]}),n.jsxs("div",{className:"landing-comparison-column landing-with-column",children:[n.jsx("h3",{className:"landing-comparison-header landing-with-header",children:"WITH PROF. OS"}),n.jsxs("div",{className:"landing-comparison-items",children:[n.jsxs("p",{className:"landing-with-item",children:[n.jsx("span",{className:"landing-with-indicator",children:""})," Remember every technique, tracked with full context"]}),n.jsxs("p",{className:"landing-with-item",children:[n.jsx("span",{className:"landing-with-indicator",children:""})," Get the exact video you needsaved and organized by technique and instructor"]}),n.jsxs("p",{className:"landing-with-item",children:[n.jsx("span",{className:"landing-with-indicator",children:""})," Know exactly what to drill next session"]}),n.jsxs("p",{className:"landing-with-item",children:[n.jsx("span",{className:"landing-with-indicator",children:""})," Build a complete model of your game over time"]})]})]})]})})}),n.jsx("section",{className:"landing-how-it-works how-it-works-section",children:n.jsxs("div",{className:"landing-how-content",children:[n.jsx("h2",{className:"landing-section-header",children:"THREE STEPS TO SMARTER TRAINING"}),n.jsxs("div",{className:"landing-steps-grid",children:[n.jsxs("div",{className:"landing-step step-card",children:[n.jsx("div",{className:"landing-step-number",children:"1."}),n.jsx("h3",{className:"landing-step-title",children:"LOG YOUR SESSIONS"}),n.jsx("p",{className:"landing-step-subtitle",children:"(30 seconds)"}),n.jsx("p",{className:"landing-step-description",children:'Voice or text. "Drilled triangles, got swept from half guard twice."'})]}),n.jsxs("div",{className:"landing-step step-card",children:[n.jsx("div",{className:"landing-step-number",children:"2."}),n.jsx("h3",{className:"landing-step-title",children:"GET PERSONALIZED COACHING"}),n.jsx("p",{className:"landing-step-description",children:"Prof. OS analyzes your patterns, recommends what to work on, suggests specific videos."})]}),n.jsxs("div",{className:"landing-step step-card",children:[n.jsx("div",{className:"landing-step-number",children:"3."}),n.jsx("h3",{className:"landing-step-title",children:"WATCH IT GET SMARTER"}),n.jsx("p",{className:"landing-step-description",children:"The more you use it, the better it understands your game. Intelligence that compounds."})]})]})]})}),n.jsx("section",{className:"landing-video-library video-library-section",children:n.jsxs("div",{className:"landing-video-content",children:[n.jsx("h2",{className:"landing-video-library-header",children:"YOUR PERSONAL VIDEO LIBRARY"}),n.jsx("p",{className:"landing-video-description",children:"Save any video Prof. OS recommends. They're automatically organized by technique and instructornot a messy pile of bookmarks. Curated, timestamped, ready when you need them."})]})}),n.jsx("section",{className:"landing-final-cta final-cta-section",children:n.jsxs("div",{className:"landing-final-content",children:[n.jsx("h2",{className:"landing-final-headline",children:"Start your 7-day trial."}),n.jsx("p",{className:"landing-final-subheadline",children:"No commitment. Cancel anytime."}),n.jsx("button",{className:"landing-cta-button cta-button",onClick:()=>e("/pricing"),"data-testid":"button-start-trial-footer",children:"Start 7-Day Trial"}),n.jsx("p",{className:"landing-final-footer",children:"You'll log your first session in under 60 seconds."})]})}),n.jsx("footer",{className:"landing-footer",children:n.jsxs("div",{className:"landing-footer-content",children:[n.jsxs("div",{className:"landing-footer-links",children:[n.jsxs("span",{className:"landing-footer-coming-soon",children:["Mobile App ",n.jsx("span",{className:"landing-coming-soon-label",children:"(Coming Soon)"})]}),n.jsx("a",{href:"mailto:support@bjjos.app",className:"landing-footer-link footer-link","data-testid":"link-support",children:"support@bjjos.app"}),n.jsx("a",{href:"/privacy",className:"landing-footer-link footer-link","data-testid":"link-privacy",children:"Privacy Policy"}),n.jsx("a",{href:"/terms",className:"landing-footer-link footer-link","data-testid":"link-terms",children:"Terms of Service"})]}),n.jsx("a",{href:"https://instagram.com/bjjosapp",target:"_blank",rel:"noopener noreferrer",className:"landing-footer-instagram","data-testid":"link-instagram","aria-label":"Follow us on Instagram",children:n.jsx(lV,{})}),n.jsx("p",{className:"landing-footer-copyright footer-copyright",children:" 2025 BJJ OS"})]})}),n.jsx("style",{children:`
        /* ==================== GLOBAL VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0A0A0A;
          --white: #FFFFFF;
          --gray-light: #B0B0B0;
          --gray-medium: #71717A;
          --gray-dim: #52525B;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --blue-hover-1: #1D4ED8;
          --purple-hover-1: #6D28D9;
          --blue-hover-2: #1E40AF;
          --purple-hover-2: #5B21B6;
          --green: #22C55E;
          --green-dim: rgba(34, 197, 94, 0.1);
          --green-glow: rgba(34, 197, 94, 0.3);
          --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
          --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
          
          /* Typography Scale - 5 Levels */
          --text-hero: clamp(48px, 8vw, 72px);
          --text-section: clamp(24px, 4vw, 36px);
          --text-subhead: clamp(16px, 2.5vw, 20px);
          --text-body: clamp(16px, 2vw, 18px);
          --text-small: clamp(12px, 1.5vw, 14px);
        }

        /* ==================== MOTION SYSTEM ==================== */
        
        /* Respect reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
          *,
          *::before,
          *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
          }
        }

        /* Smooth scroll */
        html {
          scroll-behavior: smooth;
          overflow-x: hidden;
          -webkit-overflow-scrolling: touch;
        }

        /* Sections start invisible and below */
        section {
          opacity: 0;
          transform: translateY(20px);
          transition: opacity 0.6s ease, transform 0.6s ease;
        }

        /* Hero is immediately visible */
        .hero-section {
          opacity: 1 !important;
          transform: translateY(0) !important;
          transition: none !important;
        }

        /* Visible state (triggered by Intersection Observer) */
        section.visible {
          opacity: 1;
          transform: translateY(0);
          will-change: auto;
        }

        /* Gradient animation on buttons */
        .cta-button {
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
        }

        @keyframes gradient-shift {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }

        /* ==================== BASE STYLES ==================== */
        .landing-page {
          font-family: var(--font-sans);
          background: var(--black);
          color: var(--white);
          min-height: 100vh;
          overflow-x: hidden;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          text-rendering: optimizeLegibility;
          font-feature-settings: "liga" 1, "kern" 1;
          position: relative;
        }

        /* Subtle grain texture overlay */
        .landing-page::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
          pointer-events: none;
          z-index: 9999;
          mix-blend-mode: overlay;
          opacity: 1;
        }

        .landing-page * {
          box-sizing: border-box;
        }

        /* ==================== NAVIGATION ==================== */
        .landing-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: var(--black);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid var(--gray-dark);
        }

        .landing-nav-content {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 40px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .landing-nav-left {
          display: flex;
          align-items: center;
        }

        .landing-logo-link {
          display: flex;
          align-items: center;
        }

        .landing-logo-img {
          height: 36px;
          width: auto;
        }

        .landing-nav-right {
          display: flex;
          align-items: center;
          gap: 24px;
        }

        .landing-nav-login {
          background: none;
          border: none;
          font-family: var(--font-sans);
          font-size: 15px;
          font-weight: 500;
          color: var(--gray-light);
          cursor: pointer;
          transition: color 150ms ease;
          padding: 16px;
          user-select: none;
        }

        .landing-nav-login:hover {
          color: var(--white);
        }

        .landing-nav-signup {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 0;
          font-family: var(--font-sans);
          font-weight: 600;
          font-size: 15px;
          color: var(--white);
          padding: 12px 24px;
          cursor: pointer;
          transition: background 150ms ease;
          user-select: none;
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
        }

        .landing-nav-signup:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .landing-nav-signup:active {
          background: linear-gradient(135deg, var(--blue-hover-2) 0%, var(--purple-hover-2) 100%);
          transform: translateY(1px);
        }

        /* ==================== HERO SECTION (ELEVATED) ==================== */
        .landing-hero {
          background: var(--black-elevated);
          padding: calc(140px + 72px) 40px 140px;
          position: relative;
        }

        .landing-hero-content {
          max-width: 1200px;
          margin: 0 auto;
        }

        /* LEVEL 1: Hero - Largest */
        .landing-hero-headline {
          font-family: var(--font-mono);
          font-size: var(--text-hero);
          font-weight: 700;
          line-height: 1.05;
          letter-spacing: -0.03em;
          color: var(--white);
          max-width: 900px;
          margin: 0 auto 48px;
          user-select: text;
        }

        /* LEVEL 4: Body - Comfortable reading */
        .landing-hero-paragraph {
          font-family: var(--font-sans);
          font-size: var(--text-body);
          font-weight: 400;
          line-height: 1.75;
          color: var(--gray-light);
          max-width: 720px;
          margin: 0 auto 28px;
          user-select: text;
        }

        .landing-hero-paragraph:last-of-type {
          margin-bottom: 72px;
        }

        .landing-cta-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 0;
          box-shadow: none;
          font-family: var(--font-sans);
          font-weight: 600;
          font-size: 16px;
          color: var(--white);
          padding: 18px 48px;
          cursor: pointer;
          transition: background 150ms ease;
          margin: 0 auto 20px;
          display: block;
          user-select: none;
          will-change: transform;
          transform: translateZ(0);
          backface-visibility: hidden;
        }

        .landing-cta-button:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .landing-cta-button:active {
          background: linear-gradient(135deg, var(--blue-hover-2) 0%, var(--purple-hover-2) 100%);
          transform: translateY(1px);
        }

        .landing-cta-button:focus-visible {
          box-shadow: 
            0 0 0 2px var(--black),
            0 0 0 4px var(--blue),
            0 0 0 6px var(--purple);
          outline: none;
        }

        /* LEVEL 5: Small - Captions */
        .landing-trust-line {
          font-family: var(--font-sans);
          font-size: var(--text-small);
          font-weight: 400;
          color: var(--gray-medium);
          line-height: 1.5;
          text-align: center;
          max-width: 600px;
          margin: 0 auto;
          user-select: text;
        }

        /* ==================== COMPARISON SECTION ==================== */
        .landing-comparison {
          background: var(--black);
          padding: 120px 40px;
          margin-top: 0;
          position: relative;
          overflow: hidden;
        }

        /* Cursor glow effect */
        .landing-comparison::before {
          content: '';
          position: absolute;
          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
          background: radial-gradient(
            circle 200px at var(--mouse-x, 50%) var(--mouse-y, 50%),
            rgba(37, 99, 235, 0.03),
            transparent 80%
          );
          pointer-events: none;
          transition: opacity 0.3s ease;
          opacity: 0;
          z-index: 0;
        }

        .landing-comparison:hover::before {
          opacity: 1;
        }

        .landing-comparison-content {
          max-width: 1000px;
          margin: 0 auto;
          position: relative;
          z-index: 1;
        }

        .landing-comparison-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 100px;
          position: relative;
        }

        /* Vertical divider line (desktop only) */
        .landing-comparison-grid::before {
          content: '';
          position: absolute;
          left: 50%;
          top: 60px;
          bottom: 0;
          width: 1px;
          background: var(--gray-dark);
          transform: translateX(-50%);
        }

        /* LEVEL 3: Sub-headlines */
        .landing-comparison-header {
          font-family: var(--font-mono);
          font-size: var(--text-subhead);
          font-weight: 700;
          color: var(--gray-dim);
          text-transform: uppercase;
          letter-spacing: 0.08em;
          margin: 0 0 40px;
        }

        .landing-with-header {
          color: var(--white);
        }

        .landing-comparison-items {
          display: flex;
          flex-direction: column;
          gap: 28px;
        }

        .landing-comparison-items p {
          font-family: var(--font-sans);
          font-size: var(--text-body);
          line-height: 1.6;
          margin: 0;
          user-select: text;
          display: flex;
          align-items: flex-start;
          gap: 14px;
        }

        /* WITHOUT items - Dimmed but readable */
        .landing-without-item {
          color: var(--gray-medium);
        }

        .landing-without-indicator {
          color: var(--gray-medium);
          font-size: 16px;
          font-weight: 400;
          flex-shrink: 0;
          margin-top: 2px;
        }

        /* WITH items - Bright */
        .landing-with-item {
          color: var(--white);
        }

        .landing-with-indicator {
          color: var(--purple);
          font-size: 16px;
          font-weight: 700;
          flex-shrink: 0;
          margin-top: 1px;
        }

        /* ==================== HOW IT WORKS ==================== */
        .landing-how-it-works {
          background: var(--black);
          padding: 120px 40px;
          margin-top: 0;
        }

        .landing-how-content {
          max-width: 1100px;
          margin: 0 auto;
        }

        /* LEVEL 2: Section Titles */
        .landing-section-header {
          font-family: var(--font-mono);
          font-size: var(--text-section);
          font-weight: 700;
          color: var(--white);
          text-align: center;
          letter-spacing: 0.04em;
          margin: 0 0 72px;
          user-select: text;
        }

        .landing-steps-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 48px;
        }

        .landing-step {
          background: transparent;
          padding: 32px 24px;
          text-align: center;
        }

        .landing-step-number {
          font-family: var(--font-mono);
          font-size: 56px;
          font-weight: 700;
          color: var(--white);
          line-height: 1;
          margin-bottom: 20px;
        }

        /* LEVEL 3: Sub-headlines */
        .landing-step-title {
          font-family: var(--font-mono);
          font-size: var(--text-subhead);
          font-weight: 700;
          color: var(--white);
          text-transform: uppercase;
          letter-spacing: 0.04em;
          line-height: 1.3;
          margin-bottom: 8px;
          user-select: text;
        }

        /* LEVEL 5: Small */
        .landing-step-subtitle {
          font-family: var(--font-sans);
          font-size: var(--text-small);
          font-weight: 400;
          color: var(--gray-medium);
          margin-bottom: 20px;
        }

        /* LEVEL 4: Body */
        .landing-step-description {
          font-family: var(--font-sans);
          font-size: var(--text-body);
          font-weight: 400;
          color: var(--gray-light);
          line-height: 1.7;
          max-width: 280px;
          margin: 0 auto;
          user-select: text;
        }

        /* ==================== VIDEO LIBRARY ==================== */
        .landing-video-library {
          background: var(--black);
          padding: 100px 40px;
          margin-top: 0;
        }

        .landing-video-content {
          max-width: 680px;
          margin: 0 auto;
          text-align: center;
        }

        /* LEVEL 2: Section Titles */
        .landing-video-library-header {
          font-family: var(--font-mono);
          font-size: var(--text-section);
          font-weight: 700;
          color: var(--white);
          letter-spacing: 0.02em;
          margin-bottom: 28px;
          user-select: text;
        }

        /* LEVEL 4: Body */
        .landing-video-description {
          font-family: var(--font-sans);
          font-size: var(--text-body);
          font-weight: 400;
          color: var(--gray-light);
          line-height: 1.75;
          user-select: text;
        }

        /* ==================== FINAL CTA (ELEVATED) ==================== */
        .landing-final-cta {
          background: var(--black-elevated);
          padding: 120px 40px;
          margin-top: 0;
          position: relative;
        }

        .landing-final-content {
          max-width: 600px;
          margin: 0 auto;
          text-align: center;
        }

        .landing-final-headline {
          font-family: var(--font-mono);
          font-size: clamp(36px, 6vw, 52px);
          font-weight: 700;
          color: var(--white);
          line-height: 1.15;
          margin-bottom: 12px;
          user-select: text;
        }

        /* LEVEL 5: Small */
        .landing-final-subheadline {
          font-family: var(--font-sans);
          font-size: var(--text-small);
          font-weight: 400;
          color: var(--gray-medium);
          line-height: 1.6;
          margin-bottom: 56px;
          user-select: text;
        }

        /* LEVEL 5: Small - Visible subtext */
        .landing-final-footer {
          font-family: var(--font-sans);
          font-size: var(--text-small);
          font-weight: 400;
          color: var(--gray-light);
          margin-top: 36px;
          user-select: text;
        }

        /* ==================== FOOTER ==================== */
        .landing-footer {
          background: var(--black);
          padding: 56px 24px;
        }

        .landing-footer-content {
          max-width: 1200px;
          margin: 0 auto;
          text-align: center;
        }

        .landing-footer-links {
          display: flex;
          flex-direction: column;
          gap: 24px;
          margin-bottom: 32px;
        }

        .landing-footer-link,
        .landing-footer-coming-soon {
          font-family: var(--font-sans);
          font-size: 15px;
          font-weight: 400;
          color: var(--gray-light);
          text-decoration: none;
          padding: 12px 0;
          transition: color 150ms ease;
        }

        .landing-footer-link:hover {
          color: var(--white);
        }

        .landing-footer-link:focus-visible {
          box-shadow: 0 0 0 2px var(--black), 0 0 0 4px var(--blue);
          outline: none;
        }

        .landing-coming-soon-label {
          font-size: 12px;
          color: var(--gray-medium);
          font-weight: 400;
          letter-spacing: 0.05em;
        }

        .landing-footer-copyright {
          font-family: var(--font-sans);
          font-size: var(--text-small);
          color: var(--gray-medium);
          border-top: 1px solid var(--gray-dark);
          padding-top: 32px;
          margin-top: 32px;
        }

        .landing-footer-instagram {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          margin-top: 24px;
          color: var(--gray-medium);
          font-size: 20px;
          transition: all 200ms ease;
        }

        .landing-footer-instagram:hover {
          color: var(--white);
          transform: scale(1.1);
        }

        .landing-footer-instagram:focus-visible {
          box-shadow: 0 0 0 2px var(--black), 0 0 0 4px var(--purple);
          outline: none;
          border-radius: 4px;
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .landing-nav {
            height: 64px;
          }

          .landing-nav-content {
            padding: 0 24px;
          }

          .landing-hero {
            padding: calc(100px + 64px) 24px 100px;
          }

          .landing-hero-headline {
            margin-bottom: 36px;
          }

          .landing-hero-paragraph {
            margin-bottom: 24px;
          }

          .landing-hero-paragraph:last-of-type {
            margin-bottom: 56px;
          }

          .landing-comparison {
            padding: 80px 24px;
          }

          /* Hide cursor glow on mobile */
          .landing-comparison::before {
            display: none;
          }

          .landing-comparison-grid {
            grid-template-columns: 1fr;
            gap: 56px;
          }

          .landing-comparison-grid::before {
            display: none;
          }

          .landing-without-column::after {
            content: '';
            display: block;
            width: 100%;
            height: 1px;
            background: var(--gray-dark);
            margin-top: 48px;
          }

          .landing-how-it-works {
            padding: 80px 24px;
          }

          .landing-section-header {
            margin-bottom: 56px;
          }

          .landing-steps-grid {
            grid-template-columns: 1fr;
            gap: 56px;
          }

          .landing-video-library {
            padding: 80px 24px;
          }

          .landing-final-cta {
            padding: 80px 24px;
          }

          .landing-footer {
            padding: 48px 24px;
          }

          .landing-footer-links {
            flex-direction: column;
            gap: 24px;
          }

          .landing-footer-copyright {
            border-top: 1px solid var(--gray-dark);
            padding-top: 32px;
            margin-top: 32px;
          }
        }

        /* Desktop footer with bullets */
        @media (min-width: 769px) {
          .landing-footer-links {
            flex-direction: row;
            justify-content: center;
            gap: 32px;
            margin-bottom: 16px;
          }

          .landing-footer-link:not(:last-child)::after,
          .landing-footer-coming-soon::after {
            content: '';
            margin-left: 32px;
            color: var(--gray-dark);
          }

          .landing-footer-copyright {
            border-top: none;
            padding-top: 0;
            margin-top: 0;
          }
        }

        /* Touch Targets (Mobile) */
        @media (max-width: 768px) {
          .landing-nav-login,
          .landing-nav-signup,
          .landing-cta-button {
            min-height: 44px;
            min-width: 44px;
          }
        }

        /* GPU Acceleration for performance */
        section,
        .landing-cta-button,
        .landing-comparison::before {
          will-change: transform, opacity;
          transform: translateZ(0);
          backface-visibility: hidden;
          perspective: 1000px;
        }
      `})]})}function dV(){const[,e]=Ze(),[t,r]=g.useState(""),[i,a]=g.useState(""),[s,o]=g.useState(!1);g.useEffect(()=>{window.scrollTo(0,0)},[]);const l=u=>{const f=u.toUpperCase();r(f),a(""),o(!1)},c=()=>{if(!t){a("Please enter a referral code"),o(!1);return}if(!/^[A-Z0-9]{4,12}$/.test(t)){a("Invalid code format"),o(!1);return}a(`Code ${t} applied - Extra 30 days free trial!`),o(!0)},d=()=>{const u=new URLSearchParams;u.set("plan","monthly"),s&&t&&u.set("ref",t),e(`/signup?${u.toString()}`)};return n.jsxs("div",{className:"pricing-page page-container",children:[n.jsx("nav",{className:"pricing-nav",children:n.jsxs("div",{className:"pricing-nav-content",children:[n.jsx("div",{className:"pricing-nav-left",children:n.jsx("a",{href:"/",className:"pricing-logo-link","data-testid":"link-home",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"pricing-logo-img"})})}),n.jsxs("div",{className:"pricing-nav-right",children:[n.jsx("button",{className:"pricing-nav-login",onClick:()=>e("/login"),"data-testid":"button-login",children:"Login"}),n.jsx("button",{className:"pricing-nav-signup",onClick:()=>e("/pricing"),"data-testid":"button-signup",children:"Sign Up"})]})]})}),n.jsxs("div",{className:"pricing-container",children:[n.jsxs("div",{className:"pricing-header",children:[n.jsx("h1",{className:"pricing-headline",children:"BJJ OS"}),n.jsx("p",{className:"pricing-subheadline",children:"Your AI-powered BJJ training partner"})]}),n.jsxs("div",{className:"pricing-single-card","data-testid":"card-plan",children:[n.jsxs("div",{className:"plan-price-section",children:[n.jsx("div",{className:"plan-price",children:"$14.99"}),n.jsx("div",{className:"plan-period",children:"/month"})]}),n.jsx("div",{className:"trial-badge",children:"7-day free trial"}),n.jsx("p",{className:"trial-note",children:"Credit card required. Auto-charges after 7 days. Cancel anytime."}),n.jsxs("div",{className:"features-list",children:[n.jsxs("div",{className:"feature-item","data-testid":"feature-coaching",children:[n.jsx("span",{className:"feature-check",children:""}),n.jsx("span",{children:"Unlimited Professor OS coaching"})]}),n.jsxs("div",{className:"feature-item","data-testid":"feature-videos",children:[n.jsx("span",{className:"feature-check",children:""}),n.jsx("span",{children:"Full video library (thousands of curated techniques, adding more daily)"})]}),n.jsxs("div",{className:"feature-item","data-testid":"feature-recommendations",children:[n.jsx("span",{className:"feature-check",children:""}),n.jsx("span",{children:"Personalized recommendations"})]}),n.jsxs("div",{className:"feature-item","data-testid":"feature-memory",children:[n.jsx("span",{className:"feature-check",children:""}),n.jsx("span",{children:"Training memory that learns your game"})]}),n.jsxs("div",{className:"feature-item","data-testid":"feature-support",children:[n.jsx("span",{className:"feature-check",children:""}),n.jsx("span",{children:"Priority support"})]})]}),n.jsx("button",{className:"start-trial-button",onClick:d,"data-testid":"button-start-trial",children:"Start 7-Day Free Trial"})]}),n.jsxs("div",{className:"referral-section",children:[n.jsx("div",{className:"referral-header",children:"Have a referral code?"}),n.jsxs("div",{className:"referral-input-group",children:[n.jsx("input",{type:"text",className:`referral-input ${s?"valid":""} ${i&&!s?"invalid":""}`,placeholder:"Enter code",value:t,onChange:u=>l(u.target.value),maxLength:12,readOnly:s,"data-testid":"input-referral"}),n.jsx("button",{className:"apply-button",onClick:c,disabled:s,"data-testid":"button-apply-referral",children:"Apply"})]}),i&&n.jsxs("div",{className:s?"referral-success":"referral-error","data-testid":"text-referral-message",children:[s&&n.jsx("span",{className:"success-indicator",children:""}),i]})]})]}),n.jsx("style",{children:`
        /* ==================== GLOBAL VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0F0F0F;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --blue-hover-1: #1D4ED8;
          --purple-hover-1: #6D28D9;
          --blue-hover-2: #1E40AF;
          --purple-hover-2: #5B21B6;
          --green: #22C55E;
          --green-dim: rgba(34, 197, 94, 0.1);
          --green-glow: rgba(34, 197, 94, 0.3);
          --red: #EF4444;
          --font-mono: 'JetBrains Mono', monospace;
        }

        /* ==================== MOTION SYSTEM ==================== */
        
        /* Respect reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
          *,
          *::before,
          *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
          }
        }

        /* Smooth scroll */
        html {
          scroll-behavior: smooth;
          overflow-x: hidden;
          -webkit-overflow-scrolling: touch;
        }

        /* Gradient animation on buttons */
        .continue-button,
        .select-button.selected,
        .pricing-nav-signup {
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
        }

        @keyframes gradient-shift {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }

        /* ==================== BASE STYLES ==================== */
        .pricing-page {
          font-family: var(--font-mono);
          background: var(--black);
          color: var(--white);
          min-height: 100vh;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          text-rendering: optimizeLegibility;
          font-feature-settings: "liga" 1, "kern" 1;
          position: relative;
        }

        /* Subtle grain texture overlay */
        .pricing-page::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
          pointer-events: none;
          z-index: 9999;
          mix-blend-mode: overlay;
          opacity: 1;
        }

        .pricing-page * {
          box-sizing: border-box;
        }

        /* ==================== NAVIGATION ==================== */
        .pricing-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: var(--black);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid var(--gray-dark);
        }

        .pricing-nav-content {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 40px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .pricing-nav-left {
          display: flex;
          align-items: center;
        }

        .pricing-logo-link {
          display: flex;
          align-items: center;
        }

        .pricing-logo-img {
          height: 36px;
          width: auto;
        }

        .pricing-nav-right {
          display: flex;
          align-items: center;
          gap: 24px;
        }

        .pricing-nav-login {
          background: none;
          border: none;
          font-family: var(--font-mono);
          font-size: 16px;
          color: var(--gray-light);
          cursor: pointer;
          transition: color 150ms ease;
          padding: 16px;
          user-select: none;
        }

        .pricing-nav-login:hover {
          color: var(--white);
        }

        .pricing-nav-signup {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 0;
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
          padding: 12px 24px;
          cursor: pointer;
          transition: background 150ms ease;
          user-select: none;
        }

        .pricing-nav-signup:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        /* ==================== CONTAINER ==================== */
        .pricing-container {
          padding: calc(80px + 72px) 40px 80px; /* Top padding + nav height */
          max-width: 900px;
          margin: 0 auto;
        }

        /* ==================== HEADER ==================== */
        .pricing-header {
          text-align: center;
          margin-bottom: 48px;
        }

        .pricing-headline {
          font-size: 48px;
          font-weight: 700;
          color: var(--white);
          line-height: 1.1;
          letter-spacing: -0.01em;
          margin-bottom: 16px;
        }

        .pricing-subheadline {
          font-size: 16px;
          font-weight: 400;
          color: var(--gray-light);
          line-height: 1.6;
          max-width: 600px;
          margin: 0 auto;
        }

        /* ==================== SINGLE PRICING CARD ==================== */
        .pricing-single-card {
          background: var(--black-elevated);
          padding: 48px;
          max-width: 480px;
          margin: 48px auto;
          text-align: center;
          border: 1px solid var(--gray-dark);
        }

        .plan-price-section {
          display: flex;
          align-items: baseline;
          justify-content: center;
          gap: 4px;
          margin-bottom: 16px;
        }

        .plan-price {
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 56px;
          color: var(--white);
          line-height: 1;
        }

        .plan-period {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 18px;
          color: var(--gray-medium);
        }

        .trial-badge {
          display: inline-block;
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          color: var(--white);
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 14px;
          padding: 8px 24px;
          letter-spacing: 0.02em;
          text-transform: uppercase;
          margin-bottom: 12px;
        }

        .trial-note {
          font-family: var(--font-mono);
          font-size: 13px;
          color: var(--gray-medium);
          margin: 0 0 32px;
        }

        .features-list {
          text-align: left;
          margin-bottom: 32px;
        }

        .feature-item {
          display: flex;
          align-items: center;
          gap: 12px;
          font-family: var(--font-mono);
          font-size: 15px;
          color: var(--gray-light);
          padding: 12px 0;
          border-bottom: 1px solid var(--gray-dark);
        }

        .feature-item:last-child {
          border-bottom: none;
        }

        .feature-check {
          color: var(--green);
          font-size: 16px;
          font-weight: 700;
        }

        .start-trial-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
          padding: 18px 48px;
          width: 100%;
          cursor: pointer;
          transition: all 150ms ease;
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
        }

        .start-trial-button:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .start-trial-button:active {
          transform: translateY(1px);
        }

        /* ==================== REFERRAL SECTION ==================== */
        .referral-section {
          margin: 48px auto 0;
          max-width: 500px;
        }

        .referral-header {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 16px;
          color: var(--white);
          margin-bottom: 16px;
          text-align: center;
        }

        .referral-input-group {
          display: flex;
          gap: 16px;
          margin-bottom: 8px;
        }

        /* Referral Input */
        .referral-input {
          background: var(--black-elevated);
          border: 1px solid var(--gray-dark);
          color: var(--white);
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 16px;
          padding: 12px 16px;
          border-radius: 0;
          flex: 1;
          transition: all 150ms ease;
        }

        .referral-input::placeholder {
          color: var(--gray-medium);
        }

        .referral-input:focus {
          outline: none;
          border: 1px solid var(--blue);
        }

        .referral-input.valid {
          border: 1px solid var(--green);
        }

        .referral-input.invalid {
          border: 1px solid var(--red);
          animation: shake 0.3s ease;
        }

        .referral-input:read-only {
          opacity: 0.7;
          cursor: not-allowed;
          border: 1px solid var(--green);
        }

        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-4px); }
          75% { transform: translateX(4px); }
        }

        /* Apply Button */
        .apply-button {
          background: transparent;
          border: 1px solid var(--blue);
          color: var(--blue);
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 14px;
          padding: 12px 32px;
          border-radius: 0;
          cursor: pointer;
          transition: all 150ms ease;
        }

        .apply-button:hover:not(:disabled) {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          color: var(--white);
        }

        .apply-button:active {
          transform: translateY(1px);
        }

        .apply-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Success/Error Messages */
        .referral-success {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 14px;
          color: var(--green);
          text-shadow: 0 0 20px var(--green-glow);
          margin-top: 8px;
          text-align: center;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          animation: success-fade-in 0.3s ease;
        }

        @keyframes success-fade-in {
          from { 
            opacity: 0; 
            transform: translateY(-4px); 
          }
          to { 
            opacity: 1; 
            transform: translateY(0); 
          }
        }

        /* Success checkmark animation */
        .success-indicator {
          color: var(--green);
          font-size: 16px;
          animation: checkmark-pop 0.4s ease;
        }

        @keyframes checkmark-pop {
          0% { 
            transform: scale(0); 
            opacity: 0; 
          }
          50% { 
            transform: scale(1.2); 
          }
          100% { 
            transform: scale(1); 
            opacity: 1; 
          }
        }

        .referral-error {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 14px;
          color: var(--red);
          margin-top: 8px;
          text-align: center;
        }

        /* ==================== CONTINUE SECTION ==================== */
        .continue-section {
          margin: 64px auto 0;
          max-width: 400px;
          text-align: center;
        }

        .continue-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 0;
          box-shadow: none;
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
          padding: 18px 48px;
          cursor: pointer;
          transition: all 150ms ease;
          width: 100%;
          max-width: 400px;
          display: block;
          margin: 0 auto 24px;
        }

        .continue-button:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .continue-button:active {
          background: linear-gradient(135deg, var(--blue-hover-2) 0%, var(--purple-hover-2) 100%);
          transform: translateY(1px);
        }

        .continue-button:disabled {
          background: var(--gray-dark);
          color: var(--gray-medium);
          cursor: not-allowed;
          opacity: 0.5;
        }

        .continue-button:focus {
          outline: 2px solid var(--blue);
          outline-offset: 2px;
        }

        .continue-footer-text {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 14px;
          color: var(--gray-medium);
          line-height: 1.5;
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .pricing-nav {
            height: 64px;
          }

          .pricing-nav-content {
            padding: 0 24px;
          }

          .pricing-container {
            padding: calc(60px + 64px) 24px 60px;
          }

          .pricing-headline {
            font-size: 36px;
          }

          .pricing-cards-grid {
            grid-template-columns: 1fr;
            gap: 24px;
          }

          .pricing-card {
            padding: 32px;
          }

          .referral-input-group {
            flex-direction: column;
            gap: 16px;
          }

          .referral-input,
          .apply-button {
            width: 100%;
          }

          .continue-button {
            width: 100%;
          }
        }

        /* Touch Targets (Mobile) */
        @media (max-width: 768px) {
          .pricing-nav-login,
          .pricing-nav-signup,
          .select-button,
          .apply-button,
          .continue-button {
            min-height: 44px;
            min-width: 44px;
          }
        }
      `})]})}const G1=wd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Q=g.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...a},s)=>{const o=i?Sx:"button";return n.jsx(o,{className:we(G1({variant:t,size:r,className:e})),ref:s,...a})});Q.displayName="Button";function Mk(){const[,e]=Ze(),[t,r]=g.useState(""),[i,a]=g.useState(!1);g.useEffect(()=>{const l=new URLSearchParams(window.location.search).get("email");l&&(a(!0),r(`Your account for ${l} is being created. You can now log in!`))},[]);const s=()=>{e(i?"/login":"/chat")};return i?n.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-6",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"mb-8 flex justify-center",children:n.jsx($n,{className:"w-20 h-20 text-green-500"})}),n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Payment Successful!"}),n.jsx("p",{className:"text-white/70 text-lg mb-8",children:t}),n.jsx(Q,{onClick:s,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 text-lg","data-testid":"button-continue-login",children:"Continue to Login"})]})}):n.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-8xl mb-8",children:""}),n.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white",children:"Check your phone."})]})})}function uV(){const[,e]=Ze();return n.jsxs("div",{className:"legal-page",children:[n.jsx("nav",{className:"legal-nav",children:n.jsxs("div",{className:"legal-nav-content",children:[n.jsx("div",{className:"legal-nav-left",children:n.jsx("a",{href:"/",className:"legal-logo-link","data-testid":"link-home",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"legal-logo-img"})})}),n.jsx("div",{className:"legal-nav-right",children:n.jsx("button",{className:"legal-nav-button",onClick:()=>e("/pricing"),"data-testid":"button-signup",children:"Sign Up"})})]})}),n.jsxs("main",{className:"legal-content",children:[n.jsx("h1",{className:"legal-title",children:"Terms of Service"}),n.jsx("p",{className:"legal-updated",children:"Last Updated: December 9, 2025"}),n.jsx("p",{className:"legal-intro",children:"Welcome to BJJ OS. By using our platform, you agree to these Terms."}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"1. Acceptance of Terms"}),n.jsx("p",{className:"legal-text",children:"By creating an account or using BJJ OS (bjjos.app), you agree to these Terms and our Privacy Policy."})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"2. Description of Service"}),n.jsx("p",{className:"legal-text",children:"BJJ OS provides:"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"AI-powered BJJ coaching via Professor OS"}),n.jsx("li",{children:"Curated instructional video recommendations"}),n.jsx("li",{children:"Training session logging"}),n.jsx("li",{children:"Personalized technique suggestions"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"3. Account Registration"}),n.jsx("p",{className:"legal-text",children:"You must:"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"Be at least 13 years old"}),n.jsx("li",{children:"Provide accurate information"}),n.jsx("li",{children:"Maintain account security"}),n.jsx("li",{children:"Notify us of unauthorized access"})]}),n.jsx("p",{className:"legal-text",children:"You are responsible for all activity under your account."})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"4. Subscription and Payment"}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Pricing"}),n.jsx("p",{className:"legal-text",children:"$14.99/month with 7-day free trial"})]}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Billing"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"Payments via Stripe"}),n.jsx("li",{children:"Subscriptions auto-renew"}),n.jsx("li",{children:"Cancel anytime in settings"})]})]}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Refunds"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"No charge if cancelled within trial"}),n.jsx("li",{children:"No refunds for partial months"}),n.jsx("li",{children:"Billing errors refunded upon verification"})]})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"5. Acceptable Use"}),n.jsx("p",{className:"legal-text",children:"You agree NOT to:"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"Share your account"}),n.jsx("li",{children:"Reverse engineer the platform"}),n.jsx("li",{children:"Scrape data"}),n.jsx("li",{children:"Use for illegal purposes"}),n.jsx("li",{children:"Harass others"}),n.jsx("li",{children:"Upload harmful content"}),n.jsx("li",{children:"Misrepresent identity"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"6. Intellectual Property"}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Our Content"}),n.jsx("p",{className:"legal-text",children:"All BJJ OS content is owned by us and protected by intellectual property laws."})]}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Third-Party Content"}),n.jsx("p",{className:"legal-text",children:"Instructional videos curated from public sources. Instructors retain their rights."})]}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Your Content"}),n.jsx("p",{className:"legal-text",children:"You retain ownership of training logs and notes. You grant us license to use your data to improve services."})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"7. Disclaimer"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"BJJ OS is a training companion, not a substitute for in-person instruction"}),n.jsx("li",{children:"We are not responsible for training injuries"}),n.jsx("li",{children:"Professor OS may contain errors - verify with qualified instructors"}),n.jsx("li",{children:"We do not provide medical advice"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"8. Limitation of Liability"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:'BJJ OS is provided "as is" without warranties'}),n.jsx("li",{children:"We are not liable for indirect or consequential damages"}),n.jsx("li",{children:"Total liability limited to amount paid in past 12 months"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"9. Indemnification"}),n.jsx("p",{className:"legal-text",children:"You agree to indemnify BJJ OS from claims arising from your use, violation of Terms, or violation of third-party rights."})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"10. Termination"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"You may cancel and delete your account anytime"}),n.jsx("li",{children:"We may suspend accounts that violate Terms"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"11. Changes to Terms"}),n.jsx("p",{className:"legal-text",children:"We may modify Terms anytime. Continued use constitutes acceptance."})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"12. Governing Law"}),n.jsx("p",{className:"legal-text",children:"Terms governed by Delaware law."})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"13. Dispute Resolution"}),n.jsx("p",{className:"legal-text",children:"Disputes resolved through binding arbitration per AAA rules."})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"14. Contact"}),n.jsx("p",{className:"legal-text",children:n.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-link","data-testid":"link-support-contact",children:"support@bjjos.app"})})]}),n.jsx("p",{className:"legal-agreement",children:"By using BJJ OS, you agree to these Terms of Service."})]}),n.jsx("footer",{className:"legal-footer",children:n.jsxs("div",{className:"legal-footer-content",children:[n.jsxs("div",{className:"legal-footer-links",children:[n.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-footer-link","data-testid":"link-footer-support",children:"support@bjjos.app"}),n.jsx("a",{href:"/privacy",className:"legal-footer-link","data-testid":"link-footer-privacy",children:"Privacy Policy"}),n.jsx("a",{href:"/terms",className:"legal-footer-link legal-footer-link-active","data-testid":"link-footer-terms",children:"Terms of Service"})]}),n.jsx("p",{className:"legal-footer-copyright",children:" 2025 BJJ OS"})]})}),n.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');
        
        :root {
          --black: #000000;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
        }

        .legal-page {
          font-family: var(--font-mono);
          background: var(--black);
          color: var(--white);
          min-height: 100vh;
          width: 100%;
          overflow-y: auto;
          overflow-x: hidden;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

        .legal-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: var(--black);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid var(--gray-dark);
        }

        .legal-nav-content {
          max-width: 800px;
          margin: 0 auto;
          padding: 0 24px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .legal-nav-left {
          display: flex;
          align-items: center;
        }

        .legal-logo-link {
          display: flex;
          align-items: center;
        }

        .legal-logo-img {
          height: 36px;
          width: auto;
        }

        .legal-nav-right {
          display: flex;
          align-items: center;
        }

        .legal-nav-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 4px;
          font-family: var(--font-mono);
          font-weight: 600;
          font-size: 14px;
          color: var(--white);
          padding: 10px 20px;
          cursor: pointer;
          transition: opacity 150ms ease;
        }

        .legal-nav-button:hover {
          opacity: 0.9;
        }

        .legal-content {
          max-width: 800px;
          width: 100%;
          margin: 0 auto;
          padding: calc(72px + 60px) 24px 80px;
        }

        .legal-title {
          font-family: var(--font-mono);
          font-size: 32px;
          font-weight: 700;
          color: var(--white);
          margin: 0 0 8px;
          letter-spacing: -0.02em;
        }

        .legal-updated {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-medium);
          margin: 0 0 32px;
        }

        .legal-intro {
          font-family: var(--font-mono);
          font-size: 16px;
          color: var(--gray-light);
          line-height: 1.7;
          margin: 0 0 40px;
        }

        .legal-section {
          margin-bottom: 40px;
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
        }

        .legal-page section {
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
        }

        .legal-section-title {
          font-family: var(--font-mono);
          font-size: 18px;
          font-weight: 700;
          color: var(--white);
          margin: 0 0 16px;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .legal-subsection {
          margin-bottom: 16px;
        }

        .legal-subsection-title {
          font-family: var(--font-mono);
          font-size: 14px;
          font-weight: 600;
          color: var(--white);
          margin: 0 0 4px;
        }

        .legal-text {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          line-height: 1.7;
          margin: 0 0 12px;
        }

        .legal-text strong {
          color: var(--white);
          font-weight: 600;
        }

        .legal-list {
          list-style: none;
          padding: 0;
          margin: 0 0 12px;
        }

        .legal-list li {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          line-height: 1.7;
          padding-left: 20px;
          position: relative;
          margin-bottom: 8px;
        }

        .legal-list li::before {
          content: '';
          position: absolute;
          left: 0;
          color: var(--gray-medium);
        }

        .legal-list li strong {
          color: var(--white);
          font-weight: 600;
        }

        .legal-link {
          color: var(--white);
          text-decoration: none;
          border-bottom: 1px solid var(--gray-medium);
          transition: border-color 150ms ease;
        }

        .legal-link:hover {
          border-color: var(--white);
        }

        .legal-agreement {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-medium);
          font-style: italic;
          margin-top: 48px;
          padding-top: 24px;
          border-top: 1px solid var(--gray-dark);
        }

        .legal-footer {
          background: var(--black);
          padding: 40px 24px;
          border-top: 1px solid var(--gray-dark);
        }

        .legal-footer-content {
          max-width: 800px;
          margin: 0 auto;
          text-align: center;
        }

        .legal-footer-links {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 24px;
          margin-bottom: 16px;
        }

        .legal-footer-link {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          text-decoration: none;
          transition: color 150ms ease;
        }

        .legal-footer-link:hover {
          color: var(--white);
        }

        .legal-footer-link-active {
          color: var(--white);
        }

        .legal-footer-copyright {
          font-family: var(--font-mono);
          font-size: 12px;
          color: var(--gray-medium);
          margin: 0;
        }

        @media (max-width: 768px) {
          .legal-nav {
            height: 64px;
          }

          .legal-content {
            padding: calc(64px + 40px) 20px 40px;
          }

          .legal-title {
            font-size: 28px;
          }

          .legal-section-title {
            font-size: 16px;
          }
        }
      `})]})}function fV(){const[,e]=Ze();return n.jsxs("div",{className:"legal-page",children:[n.jsx("nav",{className:"legal-nav",children:n.jsxs("div",{className:"legal-nav-content",children:[n.jsx("div",{className:"legal-nav-left",children:n.jsx("a",{href:"/",className:"legal-logo-link","data-testid":"link-home",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"legal-logo-img"})})}),n.jsx("div",{className:"legal-nav-right",children:n.jsx("button",{className:"legal-nav-button",onClick:()=>e("/pricing"),"data-testid":"button-signup",children:"Sign Up"})})]})}),n.jsxs("main",{className:"legal-content",children:[n.jsx("h1",{className:"legal-title",children:"Privacy Policy"}),n.jsx("p",{className:"legal-updated",children:"Last Updated: December 9, 2025"}),n.jsx("p",{className:"legal-intro",children:'BJJ OS ("we," "our," or "us") operates bjjos.app. This Privacy Policy explains how we collect, use, and safeguard your information.'}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"Information We Collect"}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Account Information"}),n.jsx("p",{className:"legal-text",children:"Email address, name, belt rank, training preferences, password (encrypted)"})]}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Training Data"}),n.jsx("p",{className:"legal-text",children:"Session logs, technique preferences, training goals, conversations with Professor OS"})]}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Payment Information"}),n.jsx("p",{className:"legal-text",children:"Billing details processed securely by Stripe. We do not store full credit card numbers."})]}),n.jsxs("div",{className:"legal-subsection",children:[n.jsx("h3",{className:"legal-subsection-title",children:"Usage Data"}),n.jsx("p",{className:"legal-text",children:"Device type, browser, pages visited, time on platform, feature usage patterns"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"How We Use Your Information"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"Provide and personalize Professor OS coaching"}),n.jsx("li",{children:"Process subscription payments"}),n.jsx("li",{children:"Improve platform and features"}),n.jsx("li",{children:"Send service-related communications"}),n.jsx("li",{children:"Respond to support requests"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"Data Sharing"}),n.jsx("p",{className:"legal-text",children:"We do not sell your personal information. We share data only with:"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"Stripe (payment processing)"}),n.jsx("li",{children:"Anthropic (AI coaching services - anonymized)"}),n.jsx("li",{children:"Service providers (hosting and infrastructure)"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"Data Security"}),n.jsx("p",{className:"legal-text",children:"We implement industry-standard security:"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"Encrypted transmission (HTTPS)"}),n.jsx("li",{children:"Secure password hashing"}),n.jsx("li",{children:"Regular security audits"}),n.jsx("li",{children:"Access controls and monitoring"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"Your Rights"}),n.jsx("p",{className:"legal-text",children:"You may:"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"Access your personal data"}),n.jsx("li",{children:"Request data correction"}),n.jsx("li",{children:"Request data deletion"}),n.jsx("li",{children:"Export your training data"}),n.jsx("li",{children:"Opt out of marketing emails"})]}),n.jsxs("p",{className:"legal-text",children:["To exercise these rights: ",n.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-link","data-testid":"link-support-rights",children:"support@bjjos.app"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"Data Retention"}),n.jsxs("ul",{className:"legal-list",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Active accounts:"})," Data retained while subscription active"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cancelled accounts:"})," Data deleted within 90 days upon request"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Training logs:"})," Retained to improve coaching until deletion requested"]})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"Children's Privacy"}),n.jsx("p",{className:"legal-text",children:"BJJ OS is not intended for users under 13. We do not knowingly collect information from children."})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"California Privacy Rights (CCPA)"}),n.jsx("p",{className:"legal-text",children:"California residents may:"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"Know what personal information is collected"}),n.jsx("li",{children:"Request deletion"}),n.jsx("li",{children:"Opt-out of sale (we do not sell data)"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"International Users (GDPR)"}),n.jsx("p",{className:"legal-text",children:"For EU/UK users:"}),n.jsxs("ul",{className:"legal-list",children:[n.jsx("li",{children:"Legal basis is contract performance and legitimate interests"}),n.jsx("li",{children:"Data transfers secured through standard contractual clauses"}),n.jsx("li",{children:"Right to lodge complaints with supervisory authorities"})]})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"Changes to This Policy"}),n.jsx("p",{className:"legal-text",children:"We may update this policy periodically. Material changes communicated via email or in-app notification."})]}),n.jsxs("section",{className:"legal-section",children:[n.jsx("h2",{className:"legal-section-title",children:"Contact"}),n.jsx("p",{className:"legal-text",children:n.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-link","data-testid":"link-support-contact",children:"support@bjjos.app"})})]}),n.jsx("p",{className:"legal-agreement",children:"By using BJJ OS, you agree to this Privacy Policy."})]}),n.jsx("footer",{className:"legal-footer",children:n.jsxs("div",{className:"legal-footer-content",children:[n.jsxs("div",{className:"legal-footer-links",children:[n.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-footer-link","data-testid":"link-footer-support",children:"support@bjjos.app"}),n.jsx("a",{href:"/privacy",className:"legal-footer-link legal-footer-link-active","data-testid":"link-footer-privacy",children:"Privacy Policy"}),n.jsx("a",{href:"/terms",className:"legal-footer-link","data-testid":"link-footer-terms",children:"Terms of Service"})]}),n.jsx("p",{className:"legal-footer-copyright",children:" 2025 BJJ OS"})]})}),n.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');
        
        :root {
          --black: #000000;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
        }

        .legal-page {
          font-family: var(--font-mono);
          background: var(--black);
          color: var(--white);
          min-height: 100vh;
          width: 100%;
          overflow-y: auto;
          overflow-x: hidden;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

        .legal-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: var(--black);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid var(--gray-dark);
        }

        .legal-nav-content {
          max-width: 800px;
          margin: 0 auto;
          padding: 0 24px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .legal-nav-left {
          display: flex;
          align-items: center;
        }

        .legal-logo-link {
          display: flex;
          align-items: center;
        }

        .legal-logo-img {
          height: 36px;
          width: auto;
        }

        .legal-nav-right {
          display: flex;
          align-items: center;
        }

        .legal-nav-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 4px;
          font-family: var(--font-mono);
          font-weight: 600;
          font-size: 14px;
          color: var(--white);
          padding: 10px 20px;
          cursor: pointer;
          transition: opacity 150ms ease;
        }

        .legal-nav-button:hover {
          opacity: 0.9;
        }

        .legal-content {
          max-width: 800px;
          width: 100%;
          margin: 0 auto;
          padding: calc(72px + 60px) 24px 80px;
        }

        .legal-title {
          font-family: var(--font-mono);
          font-size: 32px;
          font-weight: 700;
          color: var(--white);
          margin: 0 0 8px;
          letter-spacing: -0.02em;
        }

        .legal-updated {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-medium);
          margin: 0 0 32px;
        }

        .legal-intro {
          font-family: var(--font-mono);
          font-size: 16px;
          color: var(--gray-light);
          line-height: 1.7;
          margin: 0 0 40px;
        }

        .legal-section {
          margin-bottom: 40px;
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
        }

        .legal-page section {
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
        }

        .legal-section-title {
          font-family: var(--font-mono);
          font-size: 18px;
          font-weight: 700;
          color: var(--white);
          margin: 0 0 16px;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .legal-subsection {
          margin-bottom: 16px;
        }

        .legal-subsection-title {
          font-family: var(--font-mono);
          font-size: 14px;
          font-weight: 600;
          color: var(--white);
          margin: 0 0 4px;
        }

        .legal-text {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          line-height: 1.7;
          margin: 0 0 12px;
        }

        .legal-text strong {
          color: var(--white);
          font-weight: 600;
        }

        .legal-list {
          list-style: none;
          padding: 0;
          margin: 0 0 12px;
        }

        .legal-list li {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          line-height: 1.7;
          padding-left: 20px;
          position: relative;
          margin-bottom: 8px;
        }

        .legal-list li::before {
          content: '';
          position: absolute;
          left: 0;
          color: var(--gray-medium);
        }

        .legal-list li strong {
          color: var(--white);
          font-weight: 600;
        }

        .legal-link {
          color: var(--white);
          text-decoration: none;
          border-bottom: 1px solid var(--gray-medium);
          transition: border-color 150ms ease;
        }

        .legal-link:hover {
          border-color: var(--white);
        }

        .legal-agreement {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-medium);
          font-style: italic;
          margin-top: 48px;
          padding-top: 24px;
          border-top: 1px solid var(--gray-dark);
        }

        .legal-footer {
          background: var(--black);
          padding: 40px 24px;
          border-top: 1px solid var(--gray-dark);
        }

        .legal-footer-content {
          max-width: 800px;
          margin: 0 auto;
          text-align: center;
        }

        .legal-footer-links {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 24px;
          margin-bottom: 16px;
        }

        .legal-footer-link {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          text-decoration: none;
          transition: color 150ms ease;
        }

        .legal-footer-link:hover {
          color: var(--white);
        }

        .legal-footer-link-active {
          color: var(--white);
        }

        .legal-footer-copyright {
          font-family: var(--font-mono);
          font-size: 12px;
          color: var(--gray-medium);
          margin: 0;
        }

        @media (max-width: 768px) {
          .legal-nav {
            height: 64px;
          }

          .legal-content {
            padding: calc(64px + 40px) 20px 40px;
          }

          .legal-title {
            font-size: 28px;
          }

          .legal-section-title {
            font-size: 16px;
          }
        }
      `})]})}function hV(){const e=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return g.useEffect(()=>{const t=document.body.style.fontFamily;return document.body.style.fontFamily="'JetBrains Mono', monospace",()=>{document.body.style.fontFamily=t}},[]),n.jsx("div",{className:"min-h-screen bg-black text-white font-['JetBrains_Mono']",children:n.jsxs("div",{className:"max-w-[800px] mx-auto py-[60px] px-6",children:[n.jsx(dr,{href:"/",className:"text-blue-500 hover:text-blue-400 mb-8 inline-block","data-testid":"link-back-home",children:" Back to BJJ OS"}),n.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Refund Policy"}),n.jsxs("p",{className:"text-gray-400 mb-12",children:["Last Updated: ",e]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Free Tier"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4",children:[n.jsx("li",{children:"No payment required"}),n.jsx("li",{children:"No refunds needed (free forever)"}),n.jsx("li",{children:"Upgrade anytime to premium features"})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Annual Subscription Refunds"}),n.jsx("h3",{className:"text-xl font-semibold mb-3 text-blue-400",children:"Within 7 Days of Purchase:"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4 mb-6",children:[n.jsx("li",{children:"Full refund available for annual subscription"}),n.jsx("li",{children:"Applies to both Founding Member ($89/year) and Pro ($179/year)"}),n.jsxs("li",{children:["Contact: ",n.jsx("a",{href:"mailto:support@bjjos.app",className:"text-blue-500 hover:text-blue-400",children:"support@bjjos.app"})]}),n.jsx("li",{children:"Refund processed within 5-7 business days"}),n.jsx("li",{children:"Access will be canceled upon refund"})]}),n.jsx("h3",{className:"text-xl font-semibold mb-3 text-blue-400",children:"After 7 Days:"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4 mb-6",children:[n.jsx("li",{children:"No refunds for partial years"}),n.jsx("li",{children:"You can cancel to stop future renewals"}),n.jsx("li",{children:"Access continues until end of current annual period"})]}),n.jsx("h3",{className:"text-xl font-semibold mb-3 text-blue-400",children:"Annual Renewal:"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4",children:[n.jsx("li",{children:"Subscription renews automatically each year"}),n.jsx("li",{children:"7-day refund window applies to renewal charges"}),n.jsx("li",{children:"Cancel before renewal to avoid being charged"})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"How to Cancel"}),n.jsxs("ol",{className:"list-decimal list-inside text-gray-300 space-y-2 ml-4",children:[n.jsx("li",{children:"Open BJJ OS app"}),n.jsx("li",{children:"Go to Settings"}),n.jsx("li",{children:'Tap "Manage Subscription"'}),n.jsx("li",{children:'Tap "Cancel Subscription"'}),n.jsx("li",{children:"Confirm cancellation"})]}),n.jsx("p",{className:"text-gray-300 leading-relaxed mt-4",children:"Cancellation stops future charges immediately. Your access continues until the end of your current billing period."})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Refund Process"}),n.jsx("p",{className:"text-gray-300 leading-relaxed mb-3",children:"To request a refund (within 7 days of charge):"}),n.jsxs("ol",{className:"list-decimal list-inside text-gray-300 space-y-2 ml-4 mb-4",children:[n.jsxs("li",{children:["Email: ",n.jsx("a",{href:"mailto:support@bjjos.app",className:"text-blue-500 hover:text-blue-400",children:"support@bjjos.app"})]}),n.jsx("li",{children:'Subject: "Refund Request"'}),n.jsx("li",{children:"Include: Phone number and reason (optional)"}),n.jsx("li",{children:"We'll process within 2 business days"})]}),n.jsx("p",{className:"text-gray-300 leading-relaxed",children:"Refunds are issued to your original payment method."})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Special Circumstances"}),n.jsx("p",{className:"text-gray-300 leading-relaxed mb-3",children:"Refunds outside the 7-day window may be considered for:"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4 mb-4",children:[n.jsx("li",{children:"Technical issues preventing use"}),n.jsx("li",{children:"Unauthorized charges"}),n.jsx("li",{children:"Duplicate charges"})]}),n.jsxs("p",{className:"text-gray-300 leading-relaxed",children:["Contact ",n.jsx("a",{href:"mailto:support@bjjos.app",className:"text-blue-500 hover:text-blue-400",children:"support@bjjos.app"})," to discuss."]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Non-Refundable"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4",children:[n.jsx("li",{children:"Partial month subscriptions (after 7 days)"}),n.jsx("li",{children:"Free months earned via referrals"}),n.jsx("li",{children:"Account deletions (data recovery not possible)"})]})]}),n.jsxs("section",{className:"mb-12",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Contact"}),n.jsxs("p",{className:"text-gray-300 leading-relaxed mb-2",children:["Refund questions? Email: ",n.jsx("a",{href:"mailto:support@bjjos.app",className:"text-blue-500 hover:text-blue-400",children:"support@bjjos.app"})]}),n.jsx("p",{className:"text-gray-300 leading-relaxed",children:"Response time: Within 24 hours"})]}),n.jsxs("footer",{className:"border-t border-gray-800 pt-8 text-center",children:[n.jsxs("div",{className:"flex justify-center gap-4 mb-4 text-sm",children:[n.jsx(dr,{href:"/terms",className:"text-blue-500 hover:text-blue-400","data-testid":"link-terms",children:"Terms"}),n.jsx("span",{className:"text-gray-600",children:""}),n.jsx(dr,{href:"/privacy",className:"text-blue-500 hover:text-blue-400","data-testid":"link-privacy",children:"Privacy"}),n.jsx("span",{className:"text-gray-600",children:""}),n.jsx(dr,{href:"/refund",className:"text-blue-500 hover:text-blue-400","data-testid":"link-refund",children:"Refund"})]}),n.jsx("p",{className:"text-gray-600 text-sm",children:" 2025 BJJ OS"})]})]})})}var mV=Object.defineProperty,pV=Object.defineProperties,gV=Object.getOwnPropertyDescriptors,zp=Object.getOwnPropertySymbols,uR=Object.prototype.hasOwnProperty,fR=Object.prototype.propertyIsEnumerable,$k=(e,t,r)=>t in e?mV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xV=(e,t)=>{for(var r in t||(t={}))uR.call(t,r)&&$k(e,r,t[r]);if(zp)for(var r of zp(t))fR.call(t,r)&&$k(e,r,t[r]);return e},vV=(e,t)=>pV(e,gV(t)),yV=(e,t)=>{var r={};for(var i in e)uR.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&zp)for(var i of zp(e))t.indexOf(i)<0&&fR.call(e,i)&&(r[i]=e[i]);return r};function bV(e){let t=setTimeout(e,0),r=setTimeout(e,10),i=setTimeout(e,50);return[t,r,i]}function jV(e){let t=g.useRef();return g.useEffect(()=>{t.current=e}),t.current}var wV=18,hR=40,NV=`${hR}px`,SV=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function kV({containerRef:e,inputRef:t,pushPasswordManagerStrategy:r,isFocused:i}){let[a,s]=g.useState(!1),[o,l]=g.useState(!1),[c,d]=g.useState(!1),u=g.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&a&&o,[a,o,r]),f=g.useCallback(()=>{let h=e.current,p=t.current;if(!h||!p||c||r==="none")return;let y=h,v=y.getBoundingClientRect().left+y.offsetWidth,b=y.getBoundingClientRect().top+y.offsetHeight/2,x=v-wV,m=b;document.querySelectorAll(SV).length===0&&document.elementFromPoint(x,m)===h||(s(!0),d(!0))},[e,t,c,r]);return g.useEffect(()=>{let h=e.current;if(!h||r==="none")return;function p(){let v=window.innerWidth-h.getBoundingClientRect().right;l(v>=hR)}p();let y=setInterval(p,1e3);return()=>{clearInterval(y)}},[e,r]),g.useEffect(()=>{let h=i||document.activeElement===t.current;if(r==="none"||!h)return;let p=setTimeout(f,0),y=setTimeout(f,2e3),v=setTimeout(f,5e3),b=setTimeout(()=>{d(!0)},6e3);return()=>{clearTimeout(p),clearTimeout(y),clearTimeout(v),clearTimeout(b)}},[t,i,r,f]),{hasPWMBadge:a,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:NV}}var mR=g.createContext({}),pR=g.forwardRef((e,t)=>{var r=e,{value:i,onChange:a,maxLength:s,textAlign:o="left",pattern:l,placeholder:c,inputMode:d="numeric",onComplete:u,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:h,containerClassName:p,noScriptCSSFallback:y=CV,render:v,children:b}=r,x=yV(r,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),m,j,N,w,S;let[C,k]=g.useState(typeof x.defaultValue=="string"?x.defaultValue:""),A=i??C,E=jV(A),T=g.useCallback(ue=>{a==null||a(ue),k(ue)},[a]),P=g.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),_=g.useRef(null),R=g.useRef(null),O=g.useRef({value:A,onChange:T,isIOS:typeof window<"u"&&((j=(m=window==null?void 0:window.CSS)==null?void 0:m.supports)==null?void 0:j.call(m,"-webkit-touch-callout","none"))}),$=g.useRef({prev:[(N=_.current)==null?void 0:N.selectionStart,(w=_.current)==null?void 0:w.selectionEnd,(S=_.current)==null?void 0:S.selectionDirection]});g.useImperativeHandle(t,()=>_.current,[]),g.useEffect(()=>{let ue=_.current,Ae=R.current;if(!ue||!Ae)return;O.current.value!==ue.value&&O.current.onChange(ue.value),$.current.prev=[ue.selectionStart,ue.selectionEnd,ue.selectionDirection];function Ke(){if(document.activeElement!==ue){U(null),de(null);return}let te=ue.selectionStart,We=ue.selectionEnd,ut=ue.selectionDirection,F=ue.maxLength,re=ue.value,se=$.current.prev,xe=-1,pe=-1,me;if(re.length!==0&&te!==null&&We!==null){let Nr=te===We,Lv=te===re.length&&re.length<F;if(Nr&&!Lv){let di=te;if(di===0)xe=0,pe=1,me="forward";else if(di===F)xe=di-1,pe=di,me="backward";else if(F>1&&re.length>1){let uo=0;if(se[0]!==null&&se[1]!==null){me=di<se[1]?"backward":"forward";let Bv=se[0]===se[1]&&se[0]<F;me==="backward"&&!Bv&&(uo=-1)}xe=uo+di,pe=uo+di+1}}xe!==-1&&pe!==-1&&xe!==pe&&_.current.setSelectionRange(xe,pe,me)}let Fe=xe!==-1?xe:te,ht=pe!==-1?pe:We,Gt=me??ut;U(Fe),de(ht),$.current.prev=[Fe,ht,Gt]}if(document.addEventListener("selectionchange",Ke,{capture:!0}),Ke(),document.activeElement===ue&&z(!0),!document.getElementById("input-otp-style")){let te=document.createElement("style");if(te.id="input-otp-style",document.head.appendChild(te),te.sheet){let We="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Zd(te.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Zd(te.sheet,`[data-input-otp]:autofill { ${We} }`),Zd(te.sheet,`[data-input-otp]:-webkit-autofill { ${We} }`),Zd(te.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Zd(te.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let nt=()=>{Ae&&Ae.style.setProperty("--root-height",`${ue.clientHeight}px`)};nt();let jt=new ResizeObserver(nt);return jt.observe(ue),()=>{document.removeEventListener("selectionchange",Ke,{capture:!0}),jt.disconnect()}},[]);let[M,I]=g.useState(!1),[L,z]=g.useState(!1),[ie,U]=g.useState(null),[ee,de]=g.useState(null);g.useEffect(()=>{bV(()=>{var ue,Ae,Ke,nt;(ue=_.current)==null||ue.dispatchEvent(new Event("input"));let jt=(Ae=_.current)==null?void 0:Ae.selectionStart,te=(Ke=_.current)==null?void 0:Ke.selectionEnd,We=(nt=_.current)==null?void 0:nt.selectionDirection;jt!==null&&te!==null&&(U(jt),de(te),$.current.prev=[jt,te,We])})},[A,L]),g.useEffect(()=>{E!==void 0&&A!==E&&E.length<s&&A.length===s&&(u==null||u(A))},[s,u,E,A]);let oe=kV({containerRef:R,inputRef:_,pushPasswordManagerStrategy:f,isFocused:L}),Pe=g.useCallback(ue=>{let Ae=ue.currentTarget.value.slice(0,s);if(Ae.length>0&&P&&!P.test(Ae)){ue.preventDefault();return}typeof E=="string"&&Ae.length<E.length&&document.dispatchEvent(new Event("selectionchange")),T(Ae)},[s,T,E,P]),ve=g.useCallback(()=>{var ue;if(_.current){let Ae=Math.min(_.current.value.length,s-1),Ke=_.current.value.length;(ue=_.current)==null||ue.setSelectionRange(Ae,Ke),U(Ae),de(Ke)}z(!0)},[s]),ye=g.useCallback(ue=>{var Ae,Ke;let nt=_.current;if(!h&&(!O.current.isIOS||!ue.clipboardData||!nt))return;let jt=ue.clipboardData.getData("text/plain"),te=h?h(jt):jt;ue.preventDefault();let We=(Ae=_.current)==null?void 0:Ae.selectionStart,ut=(Ke=_.current)==null?void 0:Ke.selectionEnd,F=(We!==ut?A.slice(0,We)+te+A.slice(ut):A.slice(0,We)+te+A.slice(We)).slice(0,s);if(F.length>0&&P&&!P.test(F))return;nt.value=F,T(F);let re=Math.min(F.length,s-1),se=F.length;nt.setSelectionRange(re,se),U(re),de(se)},[s,T,P,A]),ne=g.useMemo(()=>({position:"relative",cursor:x.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[x.disabled]),H=g.useMemo(()=>({position:"absolute",inset:0,width:oe.willPushPWMBadge?`calc(100% + ${oe.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:oe.willPushPWMBadge?`inset(0 ${oe.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[oe.PWM_BADGE_SPACE_WIDTH,oe.willPushPWMBadge,o]),B=g.useMemo(()=>g.createElement("input",vV(xV({autoComplete:x.autoComplete||"one-time-code"},x),{"data-input-otp":!0,"data-input-otp-placeholder-shown":A.length===0||void 0,"data-input-otp-mss":ie,"data-input-otp-mse":ee,inputMode:d,pattern:P==null?void 0:P.source,"aria-placeholder":c,style:H,maxLength:s,value:A,ref:_,onPaste:ue=>{var Ae;ye(ue),(Ae=x.onPaste)==null||Ae.call(x,ue)},onChange:Pe,onMouseOver:ue=>{var Ae;I(!0),(Ae=x.onMouseOver)==null||Ae.call(x,ue)},onMouseLeave:ue=>{var Ae;I(!1),(Ae=x.onMouseLeave)==null||Ae.call(x,ue)},onFocus:ue=>{var Ae;ve(),(Ae=x.onFocus)==null||Ae.call(x,ue)},onBlur:ue=>{var Ae;z(!1),(Ae=x.onBlur)==null||Ae.call(x,ue)}})),[Pe,ve,ye,d,H,s,ee,ie,x,P==null?void 0:P.source,A]),J=g.useMemo(()=>({slots:Array.from({length:s}).map((ue,Ae)=>{var Ke;let nt=L&&ie!==null&&ee!==null&&(ie===ee&&Ae===ie||Ae>=ie&&Ae<ee),jt=A[Ae]!==void 0?A[Ae]:null,te=A[0]!==void 0?null:(Ke=c==null?void 0:c[Ae])!=null?Ke:null;return{char:jt,placeholderChar:te,isActive:nt,hasFakeCaret:nt&&jt===null}}),isFocused:L,isHovering:!x.disabled&&M}),[L,M,s,ee,ie,x.disabled,A]),ze=g.useMemo(()=>v?v(J):g.createElement(mR.Provider,{value:J},b),[b,J,v]);return g.createElement(g.Fragment,null,y!==null&&g.createElement("noscript",null,g.createElement("style",null,y)),g.createElement("div",{ref:R,"data-input-otp-container":!0,style:ne,className:p},ze,g.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},B)))});pR.displayName="Input";function Zd(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var CV=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const gR=g.forwardRef(({className:e,containerClassName:t,...r},i)=>n.jsx(pR,{ref:i,containerClassName:we("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:we("disabled:cursor-not-allowed",e),...r}));gR.displayName="InputOTP";const xR=g.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:we("flex items-center",e),...t}));xR.displayName="InputOTPGroup";const po=g.forwardRef(({index:e,className:t,...r},i)=>{const a=g.useContext(mR),{char:s,hasFakeCaret:o,isActive:l}=a.slots[e];return n.jsxs("div",{ref:i,className:we("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...r,children:[s,o&&n.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});po.displayName="InputOTPSlot";const AV=g.forwardRef(({...e},t)=>n.jsx("div",{ref:t,role:"separator",...e,children:n.jsx(x7,{})}));AV.displayName="InputOTPSeparator";function EV(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState("password"),[a,s]=g.useState(""),[o,l]=g.useState(""),[c,d]=g.useState(!1),[u,f]=g.useState(""),[h,p]=g.useState(!1),[y,v]=g.useState(""),[b,x]=g.useState(!1),[m,j]=g.useState(!0),[N,w]=g.useState(!1);g.useEffect(()=>{window.scrollTo(0,0)},[]);const S=async A=>{var T;if(A.preventDefault(),v(""),!a){v("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){v("Please enter a valid email address");return}if(!o){v("Password is required");return}p(!0);try{const P=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.toLowerCase().trim(),password:o,rememberMe:m})}),_=await P.json();if(!P.ok){if(_.error==="NO_PASSWORD_SET"){w(!0);return}throw new Error(_.error||"Invalid email or password")}_.sessionToken&&await ec(_.sessionToken),_.user&&await tc(_.user),t({title:"Welcome Back!",description:"Successfully logged in"}),_.redirect?e(_.redirect):(T=_.user)!=null&&T.onboardingCompleted?e("/chat"):e("/onboarding")}catch(P){v(P.message||"Invalid email or password. Please try again."),t({title:"Login Failed",description:P.message||"Invalid email or password",variant:"destructive"})}finally{p(!1)}},C=async()=>{v(""),p(!0);try{const A=await fetch("/api/auth/email/request-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.toLowerCase().trim()})}),E=await A.json();if(!A.ok)throw new Error(E.error||"Failed to send verification code");E.isAdmin&&x(!0),t({title:"Code Sent!",description:"Check your email for the 6-digit verification code"}),i("code")}catch(A){v(A.message||"Failed to send code. Please try again."),t({title:"Error",description:A.message||"Failed to send verification code",variant:"destructive"})}finally{p(!1)}},k=async A=>{if(A.preventDefault(),v(""),!u||u.length!==6){v("Please enter the 6-digit code");return}p(!0);try{const E=await fetch("/api/auth/email/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.toLowerCase().trim(),code:u,rememberMe:m})}),T=await E.json();if(!E.ok){if(T.subscriptionExpired){t({title:"Subscription Expired",description:"Your subscription has expired. Please resubscribe to continue.",variant:"destructive"}),e("/pricing");return}throw new Error(T.error||"Invalid verification code")}if(T.requiresPayment){t({title:"Email Verified!",description:"Redirecting to checkout..."});try{const P=await fetch("/api/signup/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.toLowerCase().trim(),priceId:"monthly"})}),_=await P.json();if(!P.ok)throw new Error(_.error||"Failed to create checkout session");if(_.devBypass&&_.token&&_.user){await ec(_.token),await tc(_.user),e("/onboarding");return}if(_.url)window.location.href=_.url;else throw new Error("No checkout URL received")}catch(P){v(P.message||"Failed to start checkout")}return}if(!T.token||!T.user)throw new Error("Login failed - no session token received");await ec(T.token),await tc(T.user),t({title:"Welcome Back!",description:"Successfully logged in"}),T.redirect?e(T.redirect):T.user.onboardingCompleted?e("/chat"):e("/onboarding")}catch(E){v(E.message||"Invalid code. Please try again."),t({title:"Verification Failed",description:E.message||"Invalid code",variant:"destructive"})}finally{p(!1)}};return N?n.jsxs("div",{className:"login-page page-container",children:[n.jsx("nav",{className:"login-nav",children:n.jsx("div",{className:"login-nav-content",children:n.jsx("div",{className:"login-nav-left",children:n.jsx("a",{href:"/",className:"login-logo-link","data-testid":"link-home",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"login-logo-img"})})})})}),n.jsxs("div",{className:"login-container",style:{textAlign:"center"},children:[n.jsx("div",{style:{width:"64px",height:"64px",margin:"0 auto 24px",background:"rgba(234, 179, 8, 0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Yo,{className:"w-8 h-8",style:{color:"#EAB308"}})}),n.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"white",marginBottom:"16px"},children:"Password Not Set Up"}),n.jsx("p",{style:{color:"#A0A0A0",marginBottom:"24px",lineHeight:1.6},children:"Your account uses email verification codes. You can either use a verification code to log in, or visit Settings to set up a password."}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[n.jsx("button",{onClick:()=>{w(!1),C()},className:"login-button",disabled:h,"data-testid":"button-use-code",children:h?n.jsx(qe,{className:"w-4 h-4 animate-spin"}):"Sign in with verification code"}),n.jsx("button",{onClick:()=>w(!1),style:{background:"transparent",border:"1px solid rgba(255,255,255,0.1)",color:"white",padding:"14px 24px",cursor:"pointer",fontSize:"16px"},"data-testid":"button-cancel",children:"Cancel"})]})]}),n.jsx("style",{children:Fk})]}):n.jsxs("div",{className:"login-page page-container",children:[n.jsx("nav",{className:"login-nav",children:n.jsxs("div",{className:"login-nav-content",children:[n.jsx("div",{className:"login-nav-left",children:n.jsx("a",{href:"/",className:"login-logo-link","data-testid":"link-home",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"login-logo-img"})})}),n.jsx("div",{className:"login-nav-right",children:n.jsx("button",{className:"login-nav-signup",onClick:()=>e("/pricing"),"data-testid":"button-signup",children:"Sign Up"})})]})}),n.jsxs("div",{className:"login-container",children:[r==="code"&&n.jsxs(Q,{variant:"ghost",onClick:()=>i("password"),className:"mb-8 text-white hover:text-white/80","data-testid":"button-back",children:[n.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Back"]}),n.jsxs("div",{className:"login-header",children:[n.jsx("h1",{className:"login-headline",children:r==="password"?"Welcome Back":"Enter Code"}),n.jsx("p",{className:"login-subheadline",children:r==="password"?"Sign in to continue training":b?"Use your admin bypass code":`We sent a 6-digit code to ${a}`})]}),r==="password"&&n.jsxs("form",{onSubmit:S,className:"login-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"email",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),n.jsx("input",{id:"email",type:"email",className:`form-input pl-11 ${y?"error":""}`,placeholder:"you@example.com",value:a,onChange:A=>s(A.target.value),disabled:h,"data-testid":"input-email"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"password",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Yo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),n.jsx("input",{id:"password",type:c?"text":"password",className:`form-input pl-11 pr-11 ${y?"error":""}`,placeholder:"Enter your password",value:o,onChange:A=>l(A.target.value),disabled:h,"data-testid":"input-password"}),n.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-3 text-gray-400 hover:text-white","data-testid":"button-toggle-password",children:c?n.jsx(Ms,{className:"h-5 w-5"}):n.jsx(Mr,{className:"h-5 w-5"})})]})]}),y&&n.jsx("div",{className:"form-error","data-testid":"text-error",children:y}),n.jsx("div",{className:"remember-me-container",children:n.jsxs("label",{className:"remember-me-label",children:[n.jsx("input",{type:"checkbox",checked:m,onChange:A=>j(A.target.checked),className:"remember-me-checkbox","data-testid":"checkbox-remember-me"}),n.jsx("span",{className:"remember-me-text",children:"Keep me signed in"})]})}),n.jsx("button",{type:"submit",className:"login-button",disabled:h,"data-testid":"button-sign-in",children:h?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing In..."]}):"Sign In"}),n.jsx("div",{className:"signup-link",children:n.jsx("button",{type:"button",onClick:()=>e("/forgot-password"),className:"signup-link-button","data-testid":"link-forgot-password",children:"Forgot password?"})}),n.jsx("div",{className:"divider",children:n.jsx("span",{children:"OR"})}),n.jsx("button",{type:"button",onClick:()=>{if(!a||!a.includes("@")){v("Please enter your email first");return}C()},className:"secondary-button",disabled:h,"data-testid":"button-use-code",children:"Sign in with verification code"}),n.jsxs("div",{className:"signup-link",children:["Don't have an account?"," ",n.jsx("button",{type:"button",onClick:()=>e("/pricing"),className:"signup-link-button","data-testid":"link-signup",children:"Sign Up"})]})]}),r==="code"&&n.jsxs("form",{onSubmit:k,className:"login-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label text-center block mb-6",children:"Enter 6-Digit Code"}),n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx(gR,{value:u,onChange:f,maxLength:6,"data-testid":"input-code",children:n.jsxs(xR,{children:[n.jsx(po,{index:0}),n.jsx(po,{index:1}),n.jsx(po,{index:2}),n.jsx(po,{index:3}),n.jsx(po,{index:4}),n.jsx(po,{index:5})]})})}),y&&n.jsx("div",{className:"form-error text-center","data-testid":"text-code-error",children:y})]}),n.jsx("button",{type:"submit",className:"login-button",disabled:h||u.length!==6,"data-testid":"button-verify-code",children:h?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify Code"}),n.jsxs("div",{className:"signup-link",children:["Didn't receive the code?"," ",n.jsx("button",{type:"button",onClick:C,className:"signup-link-button",disabled:h,"data-testid":"button-resend",children:"Resend Code"})]})]})]}),n.jsx("style",{children:Fk})]})}const Fk=`
  :root {
    --black: #000000;
    --black-elevated: #0F0F0F;
    --white: #FFFFFF;
    --gray-light: #A0A0A0;
    --gray-medium: #71717A;
    --gray-dark: #1A1A1A;
    --blue: #2563EB;
    --purple: #7C3AED;
    --blue-hover-1: #1D4ED8;
    --purple-hover-1: #6D28D9;
    --red: #EF4444;
  }

  .login-page {
    background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
    color: var(--white);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    position: relative;
  }

  .login-page::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
    mix-blend-mode: overlay;
  }

  .login-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(10, 8, 18, 0.8);
    backdrop-filter: blur(12px);
    height: 72px;
    z-index: 1000;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }

  .login-nav-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 40px;
    height: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .login-nav-left {
    display: flex;
    align-items: center;
  }

  .login-logo-link {
    display: flex;
    align-items: center;
  }

  .login-logo-img {
    height: 36px;
    width: auto;
  }

  .login-nav-right {
    display: flex;
    align-items: center;
  }

  .login-nav-signup {
    background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
    border: none;
    font-weight: 700;
    font-size: 16px;
    color: var(--white);
    padding: 12px 24px;
    cursor: pointer;
    transition: background 150ms ease;
  }

  .login-nav-signup:hover {
    background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
  }

  .login-container {
    padding: calc(80px + 72px) 40px 80px;
    max-width: 500px;
    margin: 0 auto;
  }

  .login-header {
    text-align: center;
    margin-bottom: 48px;
  }

  .login-headline {
    font-size: 48px;
    font-weight: 700;
    color: var(--white);
    line-height: 1.1;
    letter-spacing: -0.01em;
    margin-bottom: 16px;
  }

  .login-subheadline {
    font-size: 18px;
    color: var(--gray-light);
    line-height: 1.5;
  }

  .login-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .form-label {
    font-size: 14px;
    font-weight: 500;
    color: var(--gray-light);
  }

  .form-input {
    width: 100%;
    padding: 14px 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--white);
    font-size: 16px;
    transition: all 200ms ease;
  }

  .form-input:focus {
    outline: none;
    border-color: var(--purple);
    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.15);
  }

  .form-input.error {
    border-color: var(--red);
  }

  .form-input::placeholder {
    color: var(--gray-medium);
  }

  .form-error {
    color: var(--red);
    font-size: 14px;
    margin-top: 4px;
  }

  .remember-me-container {
    display: flex;
    align-items: center;
  }

  .remember-me-label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
  }

  .remember-me-checkbox {
    width: 18px;
    height: 18px;
    accent-color: var(--purple);
    cursor: pointer;
  }

  .remember-me-text {
    font-size: 14px;
    color: var(--gray-light);
  }

  .login-button {
    width: 100%;
    padding: 16px 24px;
    background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
    border: none;
    color: var(--white);
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 200ms ease;
  }

  .login-button:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
  }

  .login-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .secondary-button {
    width: 100%;
    padding: 16px 24px;
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--white);
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: all 200ms ease;
  }

  .secondary-button:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.3);
  }

  .secondary-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .divider {
    display: flex;
    align-items: center;
    gap: 16px;
    color: var(--gray-medium);
    font-size: 14px;
  }

  .divider::before,
  .divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: rgba(255, 255, 255, 0.1);
  }

  .signup-link {
    text-align: center;
    font-size: 14px;
    color: var(--gray-light);
  }

  .signup-link-button {
    background: none;
    border: none;
    color: var(--purple);
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: color 200ms ease;
  }

  .signup-link-button:hover {
    color: var(--white);
  }

  @media (max-width: 640px) {
    .login-nav-content {
      padding: 0 20px;
    }

    .login-container {
      padding: calc(60px + 72px) 20px 60px;
    }

    .login-headline {
      font-size: 32px;
    }

    .login-subheadline {
      font-size: 16px;
    }
  }
`;function PV(){const[,e]=Ze(),{toast:t}=rt(),r=new URLSearchParams(window.location.search),i=r.get("plan")||"monthly",a=r.get("ref")||"",s=r.get("invite")||"",[o,l]=g.useState(""),[c,d]=g.useState(""),[u,f]=g.useState(""),[h,p]=g.useState(""),[y,v]=g.useState(""),[b,x]=g.useState(!1),[m,j]=g.useState(!1),[N,w]=g.useState(!1),[S,C]=g.useState(!1),[k,A]=g.useState(""),[E,T]=g.useState(""),[P,_]=g.useState(""),[R,O]=g.useState(""),[$,M]=g.useState(null),[I,L]=g.useState([]),[z,ie]=g.useState(!1),[U,ee]=g.useState(!1);g.useEffect(()=>{window.scrollTo(0,0),s&&!S&&de()},[]);const de=async()=>{try{const H=await(await ct("GET",`/api/auth/validate-invite?token=${s}`)).json();H.valid?(w(!0),l(H.email||""),t({title:"Lifetime Access Invitation",description:"You've been invited to BJJ OS with lifetime access!"})):(t({variant:"destructive",title:"Invalid Invitation",description:H.error||"This invitation link is invalid or has expired."}),window.history.replaceState({},"","/signup"))}catch{t({variant:"destructive",title:"Error",description:"Failed to validate invitation link"})}finally{C(!0)}},oe=async()=>{if(!o){A("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){A("Please enter a valid email address");return}j(!0);try{const B=await(await ct("POST","/api/auth/email/request-code",{email:o})).json();B.success?(x(!0),t({title:"Code Sent!",description:"Check your email for the verification code"})):t({variant:"destructive",title:"Failed to Send Code",description:B.error||"Please try again"})}catch(H){t({variant:"destructive",title:"Error",description:H.message||"Failed to send verification code"})}finally{j(!1)}};g.useEffect(()=>{if(!h||h.length<3){M(null),L([]),O("");return}const H=setTimeout(async()=>{ie(!0),O("");try{const J=await(await ct("POST","/api/validate-username",{username:h})).json();J.available?(M(!0),L([])):(M(!1),L(J.suggestions||[]),J.error&&O(J.error))}catch{O("Failed to check username availability")}finally{ie(!1)}},500);return()=>clearTimeout(H)},[h]);const Pe=()=>{let ne=!0;return o?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?A(""):(A("Please enter a valid email address"),ne=!1):(A("Email is required"),ne=!1),c?c.length<8?(T("Password must be at least 8 characters"),ne=!1):T(""):(T("Password is required"),ne=!1),u?c!==u?(_("Passwords do not match"),ne=!1):_(""):(_("Please confirm your password"),ne=!1),h?h.length<3?(O("Username must be at least 3 characters"),ne=!1):z||$===null?(O("Checking username availability..."),ne=!1):$===!1?(O("Username is not available"),ne=!1):O(""):(O("Username is required"),ne=!1),ne},ve=async ne=>{if(ne.preventDefault(),s&&N){if(!y){t({variant:"destructive",title:"Verification Code Required",description:"Please enter the verification code sent to your email"});return}ee(!0);try{const B=await(await ct("POST","/api/auth/signup-with-invite",{email:o,username:h||void 0,verificationCode:y,inviteToken:s})).json();B.success&&B.token?(localStorage.setItem("sessionToken",B.token),localStorage.setItem("user",JSON.stringify(B.user)),t({title:"Welcome to BJJ OS!",description:"Your lifetime access account has been created"}),Te.invalidateQueries({queryKey:["/api/auth/me"]}),e("/onboarding")):t({variant:"destructive",title:"Signup Failed",description:B.error||"Failed to create account"})}catch(H){t({variant:"destructive",title:"Signup Failed",description:H.message||"An error occurred during signup"})}finally{ee(!1)}return}if(Pe()){ee(!0);try{const B=await(await ct("POST","/api/auth/signup",{email:o,password:c,referralCode:a||void 0})).json();if(B.requiresPayment){B.passwordHash&&sessionStorage.setItem("pendingPasswordHash",B.passwordHash),sessionStorage.setItem("pendingEmail",o),t({title:"Redirecting to Payment",description:"You'll be redirected to complete your subscription..."});const ze=await(await ct("POST","/api/signup/checkout",{email:B.email||o,priceId:i||"monthly",referralCode:a||void 0})).json();if(ze.url){window.location.href=ze.url;return}else if(ze.devBypass){t({title:"Account Created!",description:"Welcome to BJJ OS (Dev Mode)"}),Te.invalidateQueries({queryKey:["/api/auth/me"]}),e("/onboarding");return}else throw new Error(ze.error||"Failed to create checkout session")}if(B.error){t({variant:"destructive",title:"Signup Failed",description:B.error});return}B.sessionToken&&B.user&&(t({title:"Account Created!",description:"Welcome to BJJ OS"}),Te.invalidateQueries({queryKey:["/api/auth/me"]}),e("/onboarding"))}catch(H){t({variant:"destructive",title:"Signup Failed",description:H.message||"An error occurred during signup"})}finally{ee(!1)}}},ye=()=>i==="annual"?"Annual ($149.88/year)":i==="monthly"?"Monthly ($14.99/month)":"Free Preview";return n.jsxs("div",{className:"signup-page page-container",children:[n.jsx("nav",{className:"signup-nav",children:n.jsxs("div",{className:"signup-nav-content",children:[n.jsx("div",{className:"signup-nav-left",children:n.jsx("a",{href:"/",className:"signup-logo-link","data-testid":"link-home",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"signup-logo-img"})})}),n.jsx("div",{className:"signup-nav-right",children:n.jsx("button",{className:"signup-nav-login",onClick:()=>e("/login"),"data-testid":"button-login",children:"Login"})})]})}),n.jsxs("div",{className:"signup-container",children:[n.jsxs("div",{className:"signup-header",children:[n.jsx("h1",{className:"signup-headline",children:N?"Accept Your Invitation":"Create Your Account"}),n.jsx("p",{className:"signup-subheadline",children:N?"You've been invited to BJJ OS with lifetime access":"Start your 7-day free trial today  $14.99/month after trial"}),N&&n.jsx("div",{className:"selected-plan-badge",style:{background:"linear-gradient(135deg, #2563EB 0%, #7C3AED 100%)",color:"white"},"data-testid":"badge-lifetime-access",children:" Lifetime Access Invitation"}),!N&&i&&n.jsxs("div",{className:"selected-plan-badge","data-testid":"badge-selected-plan",children:["Selected: ",ye()]}),!N&&a&&n.jsxs("div",{className:"referral-applied","data-testid":"text-referral-applied",children:[' Referral code "',a,'" will be applied']})]}),n.jsxs("form",{onSubmit:ve,className:"signup-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"email",children:"Email"}),n.jsx("input",{id:"email",type:"email",className:`form-input ${k?"error":""}`,placeholder:"your@email.com",value:o,onChange:ne=>l(ne.target.value),disabled:U||N,readOnly:N,"data-testid":"input-email"}),k&&n.jsx("div",{className:"form-error","data-testid":"text-email-error",children:k}),N&&!b&&n.jsx("p",{className:"form-hint",children:"Request a verification code to continue"})]}),N&&n.jsx(n.Fragment,{children:b?n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"verificationCode",children:"Verification Code"}),n.jsx("input",{id:"verificationCode",type:"text",className:"form-input",placeholder:"Enter 6-digit code",value:y,onChange:ne=>v(ne.target.value),maxLength:6,disabled:U,"data-testid":"input-verification-code"}),n.jsx("p",{className:"form-hint",children:"Check your email for the verification code"})]}):n.jsx("button",{type:"button",onClick:oe,disabled:m||!o,className:"signup-button",style:{marginBottom:"20px"},"data-testid":"button-request-code",children:m?"Sending Code...":"Request Verification Code"})}),!N&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"password",children:"Password"}),n.jsx("input",{id:"password",type:"password",className:`form-input ${E?"error":""}`,placeholder:"At least 8 characters",value:c,onChange:ne=>d(ne.target.value),disabled:U,"data-testid":"input-password"}),E&&n.jsx("div",{className:"form-error","data-testid":"text-password-error",children:E})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"confirmPassword",children:"Confirm Password"}),n.jsx("input",{id:"confirmPassword",type:"password",className:`form-input ${P?"error":""}`,placeholder:"Re-enter your password",value:u,onChange:ne=>f(ne.target.value),disabled:U,"data-testid":"input-confirm-password"}),P&&n.jsx("div",{className:"form-error","data-testid":"text-confirm-password-error",children:P})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"username",children:["Username ",N&&n.jsx("span",{style:{opacity:.6},children:"(Optional)"})]}),n.jsxs("div",{className:"username-input-wrapper",children:[n.jsx("input",{id:"username",type:"text",className:`form-input ${R?"error":""} ${$?"success":""}`,placeholder:"username",value:h,onChange:ne=>p(ne.target.value.toLowerCase()),disabled:U,"data-testid":"input-username"}),!N&&n.jsxs("div",{className:"username-status",children:[z&&n.jsx(qe,{className:"w-4 h-4 animate-spin text-gray-400"}),!z&&$===!0&&n.jsx(Ii,{className:"w-4 h-4 text-green-500","data-testid":"icon-available"}),!z&&$===!1&&n.jsx(In,{className:"w-4 h-4 text-red-500","data-testid":"icon-unavailable"})]})]}),!N&&$===!0&&n.jsxs("div",{className:"form-success","data-testid":"text-username-available",children:["@",h," is available!"]}),!N&&R&&n.jsx("div",{className:"form-error","data-testid":"text-username-error",children:R}),!N&&$===!1&&I.length>0&&n.jsxs("div",{className:"username-suggestions","data-testid":"div-suggestions",children:[n.jsx("p",{className:"suggestions-label",children:"Username taken. Try these:"}),n.jsx("div",{className:"suggestions-list",children:I.map(ne=>n.jsxs("button",{type:"button",className:"suggestion-badge",onClick:()=>p(ne),"data-testid":`badge-suggestion-${ne}`,children:["@",ne]},ne))})]}),n.jsx("p",{className:"form-hint",children:N?"Optional - you can add this later in settings":"3-20 characters, lowercase letters, numbers, and underscores only"})]}),n.jsx("button",{type:"submit",className:"signup-button",disabled:U||N&&(!b||!y),"data-testid":"button-signup",children:U?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):N?"Create Account with Lifetime Access":"Create Account"}),n.jsxs("div",{className:"login-link",children:["Already have an account?"," ",n.jsx("button",{type:"button",onClick:()=>e("/login"),className:"login-link-button","data-testid":"link-login",children:"Log In"})]})]})]}),n.jsx("style",{children:`
        /* ==================== GLOBAL VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0F0F0F;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --blue-hover-1: #1D4ED8;
          --purple-hover-1: #6D28D9;
          --blue-hover-2: #1E40AF;
          --purple-hover-2: #5B21B6;
          --green: #22C55E;
          --green-glow: rgba(34, 197, 94, 0.3);
          --red: #EF4444;
          --font-mono: 'JetBrains Mono', monospace;
        }

        /* ==================== BASE STYLES ==================== */
        .signup-page {
          font-family: var(--font-mono);
          background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
          color: var(--white);
          min-height: 100vh;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          position: relative;
        }

        /* Subtle grain texture overlay */
        .signup-page::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
          pointer-events: none;
          z-index: 9999;
          mix-blend-mode: overlay;
        }

        /* ==================== NAVIGATION ==================== */
        .signup-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: rgba(10, 8, 18, 0.8);
          backdrop-filter: blur(12px);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .signup-nav-content {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 40px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .signup-nav-left {
          display: flex;
          align-items: center;
        }

        .signup-logo-link {
          display: flex;
          align-items: center;
        }

        .signup-logo-img {
          height: 36px;
          width: auto;
        }

        .signup-nav-right {
          display: flex;
          align-items: center;
        }

        .signup-nav-login {
          background: none;
          border: none;
          font-family: var(--font-mono);
          font-size: 16px;
          color: var(--gray-light);
          cursor: pointer;
          transition: color 150ms ease;
          padding: 16px;
        }

        .signup-nav-login:hover {
          color: var(--white);
        }

        /* ==================== CONTAINER ==================== */
        .signup-container {
          padding: calc(80px + 72px) 40px 80px;
          max-width: 500px;
          margin: 0 auto;
        }

        /* ==================== HEADER ==================== */
        .signup-header {
          text-align: center;
          margin-bottom: 48px;
        }

        .signup-headline {
          font-size: 48px;
          font-weight: 700;
          color: var(--white);
          line-height: 1.1;
          letter-spacing: -0.01em;
          margin-bottom: 16px;
        }

        .signup-subheadline {
          font-size: 16px;
          font-weight: 400;
          color: var(--gray-light);
          line-height: 1.6;
          margin-bottom: 24px;
        }

        .selected-plan-badge {
          display: inline-block;
          font-size: 14px;
          font-weight: 600;
          color: var(--white);
          padding: 8px 16px;
          background: rgba(37, 99, 235, 0.1);
          border: 1px solid rgba(37, 99, 235, 0.3);
          margin-bottom: 8px;
        }

        .referral-applied {
          font-size: 14px;
          color: var(--green);
          text-shadow: 0 0 20px var(--green-glow);
        }

        /* ==================== FORM STYLES ==================== */
        .signup-form {
          background: var(--black-elevated);
          padding: 48px;
          border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .form-group {
          margin-bottom: 24px;
        }

        .form-label {
          display: block;
          font-family: var(--font-mono);
          font-weight: 600;
          font-size: 14px;
          color: var(--white);
          margin-bottom: 8px;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .form-input {
          width: 100%;
          background: var(--black);
          border: 1px solid var(--gray-dark);
          color: var(--white);
          font-family: var(--font-mono);
          font-size: 16px;
          padding: 12px 16px;
          transition: all 150ms ease;
        }

        .form-input::placeholder {
          color: var(--gray-medium);
        }

        .form-input:focus {
          outline: none;
          border: 1px solid var(--blue);
        }

        .form-input.error {
          border: 1px solid var(--red);
        }

        .form-input.success {
          border: 1px solid var(--green);
        }

        .form-error {
          font-size: 14px;
          color: var(--red);
          margin-top: 8px;
        }

        .form-success {
          font-size: 14px;
          color: var(--green);
          text-shadow: 0 0 20px var(--green-glow);
          margin-top: 8px;
        }

        .form-hint {
          font-size: 12px;
          color: var(--gray-medium);
          margin-top: 8px;
        }

        /* Username Input */
        .username-input-wrapper {
          position: relative;
        }

        .username-status {
          position: absolute;
          right: 12px;
          top: 50%;
          transform: translateY(-50%);
        }

        .username-suggestions {
          margin-top: 12px;
        }

        .suggestions-label {
          font-size: 14px;
          color: var(--gray-light);
          margin-bottom: 8px;
        }

        .suggestions-list {
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
        }

        .suggestion-badge {
          background: transparent;
          border: 1px solid var(--gray-dark);
          color: var(--gray-light);
          font-family: var(--font-mono);
          font-size: 14px;
          padding: 6px 12px;
          cursor: pointer;
          transition: all 150ms ease;
        }

        .suggestion-badge:hover {
          border: 1px solid var(--blue);
          color: var(--blue);
        }

        /* Submit Button */
        .signup-button {
          width: 100%;
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
          border: none;
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
          padding: 18px 48px;
          cursor: pointer;
          transition: all 150ms ease;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-top: 32px;
        }

        .signup-button:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .signup-button:active {
          transform: translateY(1px);
        }

        .signup-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        @keyframes gradient-shift {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }

        /* Login Link */
        .login-link {
          text-align: center;
          font-size: 14px;
          color: var(--gray-light);
          margin-top: 24px;
        }

        .login-link-button {
          background: none;
          border: none;
          color: var(--blue);
          font-family: var(--font-mono);
          font-weight: 600;
          cursor: pointer;
          transition: color 150ms ease;
        }

        .login-link-button:hover {
          color: var(--purple);
          text-decoration: underline;
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .signup-nav {
            height: 64px;
          }

          .signup-nav-content {
            padding: 0 24px;
          }

          .signup-container {
            padding: calc(60px + 64px) 24px 60px;
          }

          .signup-headline {
            font-size: 36px;
          }

          .signup-form {
            padding: 32px;
          }
        }
      `})]})}var Nh=e=>e.type==="checkbox",No=e=>e instanceof Date,tn=e=>e==null;const vR=e=>typeof e=="object";var or=e=>!tn(e)&&!Array.isArray(e)&&vR(e)&&!No(e),yR=e=>or(e)&&e.target?Nh(e.target)?e.target.checked:e.target.value:e,TV=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,bR=(e,t)=>e.has(TV(t)),OV=e=>{const t=e.constructor&&e.constructor.prototype;return or(t)&&t.hasOwnProperty("isPrototypeOf")},Y1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Pr(e){let t;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Y1&&(e instanceof Blob||i))&&(r||or(e)))if(t=r?[]:{},!r&&!OV(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Pr(e[a]));else return e;return t}var Bx=e=>Array.isArray(e)?e.filter(Boolean):[],rr=e=>e===void 0,Ee=(e,t,r)=>{if(!t||!or(e))return r;const i=Bx(t.split(/[,[\].]+?/)).reduce((a,s)=>tn(a)?a:a[s],e);return rr(i)||i===e?rr(e[t])?r:e[t]:i},En=e=>typeof e=="boolean",Q1=e=>/^\w*$/.test(e),jR=e=>Bx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Nt=(e,t,r)=>{let i=-1;const a=Q1(t)?[t]:jR(t),s=a.length,o=s-1;for(;++i<s;){const l=a[i];let c=r;if(i!==o){const d=e[l];c=or(d)||Array.isArray(d)?d:isNaN(+a[i+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const qp={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Si={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ua={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},wR=D.createContext(null),zx=()=>D.useContext(wR),_V=e=>{const{children:t,...r}=e;return D.createElement(wR.Provider,{value:r},t)};var NR=(e,t,r,i=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const o=s;return t._proxyFormState[o]!==Si.all&&(t._proxyFormState[o]=!i||Si.all),r&&(r[o]=!0),e[o]}});return a};function IV(e){const t=zx(),{control:r=t.control,disabled:i,name:a,exact:s}=e||{},[o,l]=D.useState(r._formState),c=D.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=D.useRef(a);return d.current=a,D.useEffect(()=>r._subscribe({name:d.current,formState:c.current,exact:s,callback:u=>{!i&&l({...r._formState,...u})}}),[r,i,s]),D.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),D.useMemo(()=>NR(o,r,c.current,!1),[o,r])}var Gi=e=>typeof e=="string",SR=(e,t,r,i,a)=>Gi(e)?(i&&t.watch.add(e),Ee(r,e,a)):Array.isArray(e)?e.map(s=>(i&&t.watch.add(s),Ee(r,s))):(i&&(t.watchAll=!0),r);function RV(e){const t=zx(),{control:r=t.control,name:i,defaultValue:a,disabled:s,exact:o}=e||{},l=D.useRef(i),c=D.useRef(a);l.current=i,D.useEffect(()=>r._subscribe({name:l.current,formState:{values:!0},exact:o,callback:f=>!s&&u(SR(l.current,r._names,f.values||r._formValues,!1,c.current))}),[r,s,o]);const[d,u]=D.useState(r._getWatch(i,a));return D.useEffect(()=>r._removeUnmounted()),d}function MV(e){const t=zx(),{name:r,disabled:i,control:a=t.control,shouldUnregister:s}=e,o=bR(a._names.array,r),l=RV({control:a,name:r,defaultValue:Ee(a._formValues,r,Ee(a._defaultValues,r,e.defaultValue)),exact:!0}),c=IV({control:a,name:r,exact:!0}),d=D.useRef(e),u=D.useRef(a.register(r,{...e.rules,value:l,...En(e.disabled)?{disabled:e.disabled}:{}})),f=D.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ee(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ee(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ee(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ee(c.validatingFields,r)},error:{enumerable:!0,get:()=>Ee(c.errors,r)}}),[c,r]),h=D.useCallback(b=>u.current.onChange({target:{value:yR(b),name:r},type:qp.CHANGE}),[r]),p=D.useCallback(()=>u.current.onBlur({target:{value:Ee(a._formValues,r),name:r},type:qp.BLUR}),[r,a._formValues]),y=D.useCallback(b=>{const x=Ee(a._fields,r);x&&b&&(x._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:m=>b.setCustomValidity(m),reportValidity:()=>b.reportValidity()})},[a._fields,r]),v=D.useMemo(()=>({name:r,value:l,...En(i)||c.disabled?{disabled:c.disabled||i}:{},onChange:h,onBlur:p,ref:y}),[r,i,c.disabled,h,p,y,l]);return D.useEffect(()=>{const b=a._options.shouldUnregister||s;a.register(r,{...d.current.rules,...En(d.current.disabled)?{disabled:d.current.disabled}:{}});const x=(m,j)=>{const N=Ee(a._fields,m);N&&N._f&&(N._f.mount=j)};if(x(r,!0),b){const m=Pr(Ee(a._options.defaultValues,r));Nt(a._defaultValues,r,m),rr(Ee(a._formValues,r))&&Nt(a._formValues,r,m)}return!o&&a.register(r),()=>{(o?b&&!a._state.action:b)?a.unregister(r):x(r,!1)}},[r,a,o,s]),D.useEffect(()=>{a._setDisabledField({disabled:i,name:r})},[i,r,a]),D.useMemo(()=>({field:v,formState:c,fieldState:f}),[v,c,f])}const $V=e=>e.render(MV(e));var kR=(e,t,r,i,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:a||!0}}:{},Ru=e=>Array.isArray(e)?e:[e],Dk=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},$0=e=>tn(e)||!vR(e);function us(e,t){if($0(e)||$0(t))return e===t;if(No(e)&&No(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const a of r){const s=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const o=t[a];if(No(s)&&No(o)||or(s)&&or(o)||Array.isArray(s)&&Array.isArray(o)?!us(s,o):s!==o)return!1}}return!0}var Zr=e=>or(e)&&!Object.keys(e).length,J1=e=>e.type==="file",ki=e=>typeof e=="function",Up=e=>{if(!Y1)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},CR=e=>e.type==="select-multiple",X1=e=>e.type==="radio",FV=e=>X1(e)||Nh(e),ky=e=>Up(e)&&e.isConnected;function DV(e,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)e=rr(e)?i++:e[t[i++]];return e}function LV(e){for(const t in e)if(e.hasOwnProperty(t)&&!rr(e[t]))return!1;return!0}function mr(e,t){const r=Array.isArray(t)?t:Q1(t)?[t]:jR(t),i=r.length===1?e:DV(e,r),a=r.length-1,s=r[a];return i&&delete i[s],a!==0&&(or(i)&&Zr(i)||Array.isArray(i)&&LV(i))&&mr(e,r.slice(0,-1)),e}var AR=e=>{for(const t in e)if(ki(e[t]))return!0;return!1};function Vp(e,t={}){const r=Array.isArray(e);if(or(e)||r)for(const i in e)Array.isArray(e[i])||or(e[i])&&!AR(e[i])?(t[i]=Array.isArray(e[i])?[]:{},Vp(e[i],t[i])):tn(e[i])||(t[i]=!0);return t}function ER(e,t,r){const i=Array.isArray(e);if(or(e)||i)for(const a in e)Array.isArray(e[a])||or(e[a])&&!AR(e[a])?rr(t)||$0(r[a])?r[a]=Array.isArray(e[a])?Vp(e[a],[]):{...Vp(e[a])}:ER(e[a],tn(t)?{}:t[a],r[a]):r[a]=!us(e[a],t[a]);return r}var eu=(e,t)=>ER(e,t,Vp(t));const Lk={value:!1,isValid:!1},Bk={value:!0,isValid:!0};var PR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!rr(e[0].attributes.value)?rr(e[0].value)||e[0].value===""?Bk:{value:e[0].value,isValid:!0}:Bk:Lk}return Lk},TR=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>rr(e)?e:t?e===""?NaN:e&&+e:r&&Gi(e)?new Date(e):i?i(e):e;const zk={isValid:!1,value:null};var OR=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,zk):zk;function qk(e){const t=e.ref;return J1(t)?t.files:X1(t)?OR(e.refs).value:CR(t)?[...t.selectedOptions].map(({value:r})=>r):Nh(t)?PR(e.refs).value:TR(rr(t.value)?e.ref.value:t.value,e)}var BV=(e,t,r,i)=>{const a={};for(const s of e){const o=Ee(t,s);o&&Nt(a,s,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:i}},Wp=e=>e instanceof RegExp,tu=e=>rr(e)?e:Wp(e)?e.source:or(e)?Wp(e.value)?e.value.source:e.value:e,Uk=e=>({isOnSubmit:!e||e===Si.onSubmit,isOnBlur:e===Si.onBlur,isOnChange:e===Si.onChange,isOnAll:e===Si.all,isOnTouch:e===Si.onTouched});const Vk="AsyncFunction";var zV=e=>!!e&&!!e.validate&&!!(ki(e.validate)&&e.validate.constructor.name===Vk||or(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Vk)),qV=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Wk=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Mu=(e,t,r,i)=>{for(const a of r||Object.keys(e)){const s=Ee(e,a);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!i)return!0;if(o.ref&&t(o.ref,o.name)&&!i)return!0;if(Mu(l,t))break}else if(or(l)&&Mu(l,t))break}}};function Hk(e,t,r){const i=Ee(e,r);if(i||Q1(r))return{error:i,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),o=Ee(t,s),l=Ee(e,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};a.pop()}return{name:r}}var UV=(e,t,r,i)=>{r(e);const{name:a,...s}=e;return Zr(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!i||Si.all))},VV=(e,t,r)=>!e||!t||e===t||Ru(e).some(i=>i&&(r?i===t:i.startsWith(t)||t.startsWith(i))),WV=(e,t,r,i,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?i.isOnBlur:a.isOnBlur)?!e:(r?i.isOnChange:a.isOnChange)?e:!0,HV=(e,t)=>!Bx(Ee(e,t)).length&&mr(e,t),KV=(e,t,r)=>{const i=Ru(Ee(e,r));return Nt(i,"root",t[r]),Nt(e,r,i),e},Zm=e=>Gi(e);function Kk(e,t,r="validate"){if(Zm(e)||Array.isArray(e)&&e.every(Zm)||En(e)&&!e)return{type:r,message:Zm(e)?e:"",ref:t}}var xl=e=>or(e)&&!Wp(e)?e:{value:e,message:""},Gk=async(e,t,r,i,a,s)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:f,max:h,pattern:p,validate:y,name:v,valueAsNumber:b,mount:x}=e._f,m=Ee(r,v);if(!x||t.has(v))return{};const j=l?l[0]:o,N=P=>{a&&j.reportValidity&&(j.setCustomValidity(En(P)?"":P||""),j.reportValidity())},w={},S=X1(o),C=Nh(o),k=S||C,A=(b||J1(o))&&rr(o.value)&&rr(m)||Up(o)&&o.value===""||m===""||Array.isArray(m)&&!m.length,E=kR.bind(null,v,i,w),T=(P,_,R,O=ua.maxLength,$=ua.minLength)=>{const M=P?_:R;w[v]={type:P?O:$,message:M,ref:o,...E(P?O:$,M)}};if(s?!Array.isArray(m)||!m.length:c&&(!k&&(A||tn(m))||En(m)&&!m||C&&!PR(l).isValid||S&&!OR(l).isValid)){const{value:P,message:_}=Zm(c)?{value:!!c,message:c}:xl(c);if(P&&(w[v]={type:ua.required,message:_,ref:j,...E(ua.required,_)},!i))return N(_),w}if(!A&&(!tn(f)||!tn(h))){let P,_;const R=xl(h),O=xl(f);if(!tn(m)&&!isNaN(m)){const $=o.valueAsNumber||m&&+m;tn(R.value)||(P=$>R.value),tn(O.value)||(_=$<O.value)}else{const $=o.valueAsDate||new Date(m),M=z=>new Date(new Date().toDateString()+" "+z),I=o.type=="time",L=o.type=="week";Gi(R.value)&&m&&(P=I?M(m)>M(R.value):L?m>R.value:$>new Date(R.value)),Gi(O.value)&&m&&(_=I?M(m)<M(O.value):L?m<O.value:$<new Date(O.value))}if((P||_)&&(T(!!P,R.message,O.message,ua.max,ua.min),!i))return N(w[v].message),w}if((d||u)&&!A&&(Gi(m)||s&&Array.isArray(m))){const P=xl(d),_=xl(u),R=!tn(P.value)&&m.length>+P.value,O=!tn(_.value)&&m.length<+_.value;if((R||O)&&(T(R,P.message,_.message),!i))return N(w[v].message),w}if(p&&!A&&Gi(m)){const{value:P,message:_}=xl(p);if(Wp(P)&&!m.match(P)&&(w[v]={type:ua.pattern,message:_,ref:o,...E(ua.pattern,_)},!i))return N(_),w}if(y){if(ki(y)){const P=await y(m,r),_=Kk(P,j);if(_&&(w[v]={..._,...E(ua.validate,_.message)},!i))return N(_.message),w}else if(or(y)){let P={};for(const _ in y){if(!Zr(P)&&!i)break;const R=Kk(await y[_](m,r),j,_);R&&(P={...R,...E(_,R.message)},N(R.message),i&&(w[v]=P))}if(!Zr(P)&&(w[v]={ref:j,...P},!i))return w}}return N(!0),w};const GV={mode:Si.onSubmit,reValidateMode:Si.onChange,shouldFocusError:!0};function YV(e={}){let t={...GV,...e},r={submitCount:0,isDirty:!1,isLoading:ki(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const i={};let a=or(t.defaultValues)||or(t.values)?Pr(t.values||t.defaultValues)||{}:{},s=t.shouldUnregister?{}:Pr(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const h={array:Dk(),state:Dk()},p=Uk(t.mode),y=Uk(t.reValidateMode),v=t.criteriaMode===Si.all,b=F=>re=>{clearTimeout(d),d=setTimeout(F,re)},x=async F=>{if(!t.disabled&&(u.isValid||f.isValid||F)){const re=t.resolver?Zr((await A()).errors):await T(i,!0);re!==r.isValid&&h.state.next({isValid:re})}},m=(F,re)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((F||Array.from(l.mount)).forEach(se=>{se&&(re?Nt(r.validatingFields,se,re):mr(r.validatingFields,se))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Zr(r.validatingFields)}))},j=(F,re=[],se,xe,pe=!0,me=!0)=>{if(xe&&se&&!t.disabled){if(o.action=!0,me&&Array.isArray(Ee(i,F))){const Fe=se(Ee(i,F),xe.argA,xe.argB);pe&&Nt(i,F,Fe)}if(me&&Array.isArray(Ee(r.errors,F))){const Fe=se(Ee(r.errors,F),xe.argA,xe.argB);pe&&Nt(r.errors,F,Fe),HV(r.errors,F)}if((u.touchedFields||f.touchedFields)&&me&&Array.isArray(Ee(r.touchedFields,F))){const Fe=se(Ee(r.touchedFields,F),xe.argA,xe.argB);pe&&Nt(r.touchedFields,F,Fe)}(u.dirtyFields||f.dirtyFields)&&(r.dirtyFields=eu(a,s)),h.state.next({name:F,isDirty:_(F,re),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Nt(s,F,re)},N=(F,re)=>{Nt(r.errors,F,re),h.state.next({errors:r.errors})},w=F=>{r.errors=F,h.state.next({errors:r.errors,isValid:!1})},S=(F,re,se,xe)=>{const pe=Ee(i,F);if(pe){const me=Ee(s,F,rr(se)?Ee(a,F):se);rr(me)||xe&&xe.defaultChecked||re?Nt(s,F,re?me:qk(pe._f)):$(F,me),o.mount&&x()}},C=(F,re,se,xe,pe)=>{let me=!1,Fe=!1;const ht={name:F};if(!t.disabled){if(!se||xe){(u.isDirty||f.isDirty)&&(Fe=r.isDirty,r.isDirty=ht.isDirty=_(),me=Fe!==ht.isDirty);const Gt=us(Ee(a,F),re);Fe=!!Ee(r.dirtyFields,F),Gt?mr(r.dirtyFields,F):Nt(r.dirtyFields,F,!0),ht.dirtyFields=r.dirtyFields,me=me||(u.dirtyFields||f.dirtyFields)&&Fe!==!Gt}if(se){const Gt=Ee(r.touchedFields,F);Gt||(Nt(r.touchedFields,F,se),ht.touchedFields=r.touchedFields,me=me||(u.touchedFields||f.touchedFields)&&Gt!==se)}me&&pe&&h.state.next(ht)}return me?ht:{}},k=(F,re,se,xe)=>{const pe=Ee(r.errors,F),me=(u.isValid||f.isValid)&&En(re)&&r.isValid!==re;if(t.delayError&&se?(c=b(()=>N(F,se)),c(t.delayError)):(clearTimeout(d),c=null,se?Nt(r.errors,F,se):mr(r.errors,F)),(se?!us(pe,se):pe)||!Zr(xe)||me){const Fe={...xe,...me&&En(re)?{isValid:re}:{},errors:r.errors,name:F};r={...r,...Fe},h.state.next(Fe)}},A=async F=>{m(F,!0);const re=await t.resolver(s,t.context,BV(F||l.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return m(F),re},E=async F=>{const{errors:re}=await A(F);if(F)for(const se of F){const xe=Ee(re,se);xe?Nt(r.errors,se,xe):mr(r.errors,se)}else r.errors=re;return re},T=async(F,re,se={valid:!0})=>{for(const xe in F){const pe=F[xe];if(pe){const{_f:me,...Fe}=pe;if(me){const ht=l.array.has(me.name),Gt=pe._f&&zV(pe._f);Gt&&u.validatingFields&&m([xe],!0);const Nr=await Gk(pe,l.disabled,s,v,t.shouldUseNativeValidation&&!re,ht);if(Gt&&u.validatingFields&&m([xe]),Nr[me.name]&&(se.valid=!1,re))break;!re&&(Ee(Nr,me.name)?ht?KV(r.errors,Nr,me.name):Nt(r.errors,me.name,Nr[me.name]):mr(r.errors,me.name))}!Zr(Fe)&&await T(Fe,re,se)}}return se.valid},P=()=>{for(const F of l.unMount){const re=Ee(i,F);re&&(re._f.refs?re._f.refs.every(se=>!ky(se)):!ky(re._f.ref))&&ne(F)}l.unMount=new Set},_=(F,re)=>!t.disabled&&(F&&re&&Nt(s,F,re),!us(U(),a)),R=(F,re,se)=>SR(F,l,{...o.mount?s:rr(re)?a:Gi(F)?{[F]:re}:re},se,re),O=F=>Bx(Ee(o.mount?s:a,F,t.shouldUnregister?Ee(a,F,[]):[])),$=(F,re,se={})=>{const xe=Ee(i,F);let pe=re;if(xe){const me=xe._f;me&&(!me.disabled&&Nt(s,F,TR(re,me)),pe=Up(me.ref)&&tn(re)?"":re,CR(me.ref)?[...me.ref.options].forEach(Fe=>Fe.selected=pe.includes(Fe.value)):me.refs?Nh(me.ref)?me.refs.length>1?me.refs.forEach(Fe=>(!Fe.defaultChecked||!Fe.disabled)&&(Fe.checked=Array.isArray(pe)?!!pe.find(ht=>ht===Fe.value):pe===Fe.value)):me.refs[0]&&(me.refs[0].checked=!!pe):me.refs.forEach(Fe=>Fe.checked=Fe.value===pe):J1(me.ref)?me.ref.value="":(me.ref.value=pe,me.ref.type||h.state.next({name:F,values:Pr(s)})))}(se.shouldDirty||se.shouldTouch)&&C(F,pe,se.shouldTouch,se.shouldDirty,!0),se.shouldValidate&&ie(F)},M=(F,re,se)=>{for(const xe in re){const pe=re[xe],me=`${F}.${xe}`,Fe=Ee(i,me);(l.array.has(F)||or(pe)||Fe&&!Fe._f)&&!No(pe)?M(me,pe,se):$(me,pe,se)}},I=(F,re,se={})=>{const xe=Ee(i,F),pe=l.array.has(F),me=Pr(re);Nt(s,F,me),pe?(h.array.next({name:F,values:Pr(s)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&se.shouldDirty&&h.state.next({name:F,dirtyFields:eu(a,s),isDirty:_(F,me)})):xe&&!xe._f&&!tn(me)?M(F,me,se):$(F,me,se),Wk(F,l)&&h.state.next({...r}),h.state.next({name:o.mount?F:void 0,values:Pr(s)})},L=async F=>{o.mount=!0;const re=F.target;let se=re.name,xe=!0;const pe=Ee(i,se),me=Fe=>{xe=Number.isNaN(Fe)||No(Fe)&&isNaN(Fe.getTime())||us(Fe,Ee(s,se,Fe))};if(pe){let Fe,ht;const Gt=re.type?qk(pe._f):yR(F),Nr=F.type===qp.BLUR||F.type===qp.FOCUS_OUT,Lv=!qV(pe._f)&&!t.resolver&&!Ee(r.errors,se)&&!pe._f.deps||WV(Nr,Ee(r.touchedFields,se),r.isSubmitted,y,p),di=Wk(se,l,Nr);Nt(s,se,Gt),Nr?(pe._f.onBlur&&pe._f.onBlur(F),c&&c(0)):pe._f.onChange&&pe._f.onChange(F);const uo=C(se,Gt,Nr),Bv=!Zr(uo)||di;if(!Nr&&h.state.next({name:se,type:F.type,values:Pr(s)}),Lv)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?Nr&&x():Nr||x()),Bv&&h.state.next({name:se,...di?{}:uo});if(!Nr&&di&&h.state.next({...r}),t.resolver){const{errors:MS}=await A([se]);if(me(Gt),xe){const bL=Hk(r.errors,i,se),$S=Hk(MS,i,bL.name||se);Fe=$S.error,se=$S.name,ht=Zr(MS)}}else m([se],!0),Fe=(await Gk(pe,l.disabled,s,v,t.shouldUseNativeValidation))[se],m([se]),me(Gt),xe&&(Fe?ht=!1:(u.isValid||f.isValid)&&(ht=await T(i,!0)));xe&&(pe._f.deps&&ie(pe._f.deps),k(se,ht,Fe,uo))}},z=(F,re)=>{if(Ee(r.errors,re)&&F.focus)return F.focus(),1},ie=async(F,re={})=>{let se,xe;const pe=Ru(F);if(t.resolver){const me=await E(rr(F)?F:pe);se=Zr(me),xe=F?!pe.some(Fe=>Ee(me,Fe)):se}else F?(xe=(await Promise.all(pe.map(async me=>{const Fe=Ee(i,me);return await T(Fe&&Fe._f?{[me]:Fe}:Fe)}))).every(Boolean),!(!xe&&!r.isValid)&&x()):xe=se=await T(i);return h.state.next({...!Gi(F)||(u.isValid||f.isValid)&&se!==r.isValid?{}:{name:F},...t.resolver||!F?{isValid:se}:{},errors:r.errors}),re.shouldFocus&&!xe&&Mu(i,z,F?pe:l.mount),xe},U=F=>{const re={...o.mount?s:a};return rr(F)?re:Gi(F)?Ee(re,F):F.map(se=>Ee(re,se))},ee=(F,re)=>({invalid:!!Ee((re||r).errors,F),isDirty:!!Ee((re||r).dirtyFields,F),error:Ee((re||r).errors,F),isValidating:!!Ee(r.validatingFields,F),isTouched:!!Ee((re||r).touchedFields,F)}),de=F=>{F&&Ru(F).forEach(re=>mr(r.errors,re)),h.state.next({errors:F?r.errors:{}})},oe=(F,re,se)=>{const xe=(Ee(i,F,{_f:{}})._f||{}).ref,pe=Ee(r.errors,F)||{},{ref:me,message:Fe,type:ht,...Gt}=pe;Nt(r.errors,F,{...Gt,...re,ref:xe}),h.state.next({name:F,errors:r.errors,isValid:!1}),se&&se.shouldFocus&&xe&&xe.focus&&xe.focus()},Pe=(F,re)=>ki(F)?h.state.subscribe({next:se=>F(R(void 0,re),se)}):R(F,re,!0),ve=F=>h.state.subscribe({next:re=>{VV(F.name,re.name,F.exact)&&UV(re,F.formState||u,te,F.reRenderRoot)&&F.callback({values:{...s},...r,...re})}}).unsubscribe,ye=F=>(o.mount=!0,f={...f,...F.formState},ve({...F,formState:f})),ne=(F,re={})=>{for(const se of F?Ru(F):l.mount)l.mount.delete(se),l.array.delete(se),re.keepValue||(mr(i,se),mr(s,se)),!re.keepError&&mr(r.errors,se),!re.keepDirty&&mr(r.dirtyFields,se),!re.keepTouched&&mr(r.touchedFields,se),!re.keepIsValidating&&mr(r.validatingFields,se),!t.shouldUnregister&&!re.keepDefaultValue&&mr(a,se);h.state.next({values:Pr(s)}),h.state.next({...r,...re.keepDirty?{isDirty:_()}:{}}),!re.keepIsValid&&x()},H=({disabled:F,name:re})=>{(En(F)&&o.mount||F||l.disabled.has(re))&&(F?l.disabled.add(re):l.disabled.delete(re))},B=(F,re={})=>{let se=Ee(i,F);const xe=En(re.disabled)||En(t.disabled);return Nt(i,F,{...se||{},_f:{...se&&se._f?se._f:{ref:{name:F}},name:F,mount:!0,...re}}),l.mount.add(F),se?H({disabled:En(re.disabled)?re.disabled:t.disabled,name:F}):S(F,!0,re.value),{...xe?{disabled:re.disabled||t.disabled}:{},...t.progressive?{required:!!re.required,min:tu(re.min),max:tu(re.max),minLength:tu(re.minLength),maxLength:tu(re.maxLength),pattern:tu(re.pattern)}:{},name:F,onChange:L,onBlur:L,ref:pe=>{if(pe){B(F,re),se=Ee(i,F);const me=rr(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,Fe=FV(me),ht=se._f.refs||[];if(Fe?ht.find(Gt=>Gt===me):me===se._f.ref)return;Nt(i,F,{_f:{...se._f,...Fe?{refs:[...ht.filter(ky),me,...Array.isArray(Ee(a,F))?[{}]:[]],ref:{type:me.type,name:F}}:{ref:me}}}),S(F,!1,void 0,me)}else se=Ee(i,F,{}),se._f&&(se._f.mount=!1),(t.shouldUnregister||re.shouldUnregister)&&!(bR(l.array,F)&&o.action)&&l.unMount.add(F)}}},J=()=>t.shouldFocusError&&Mu(i,z,l.mount),ze=F=>{En(F)&&(h.state.next({disabled:F}),Mu(i,(re,se)=>{const xe=Ee(i,se);xe&&(re.disabled=xe._f.disabled||F,Array.isArray(xe._f.refs)&&xe._f.refs.forEach(pe=>{pe.disabled=xe._f.disabled||F}))},0,!1))},ue=(F,re)=>async se=>{let xe;se&&(se.preventDefault&&se.preventDefault(),se.persist&&se.persist());let pe=Pr(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:me,values:Fe}=await A();r.errors=me,pe=Fe}else await T(i);if(l.disabled.size)for(const me of l.disabled)Nt(pe,me,void 0);if(mr(r.errors,"root"),Zr(r.errors)){h.state.next({errors:{}});try{await F(pe,se)}catch(me){xe=me}}else re&&await re({...r.errors},se),J(),setTimeout(J);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Zr(r.errors)&&!xe,submitCount:r.submitCount+1,errors:r.errors}),xe)throw xe},Ae=(F,re={})=>{Ee(i,F)&&(rr(re.defaultValue)?I(F,Pr(Ee(a,F))):(I(F,re.defaultValue),Nt(a,F,Pr(re.defaultValue))),re.keepTouched||mr(r.touchedFields,F),re.keepDirty||(mr(r.dirtyFields,F),r.isDirty=re.defaultValue?_(F,Pr(Ee(a,F))):_()),re.keepError||(mr(r.errors,F),u.isValid&&x()),h.state.next({...r}))},Ke=(F,re={})=>{const se=F?Pr(F):a,xe=Pr(se),pe=Zr(F),me=pe?a:xe;if(re.keepDefaultValues||(a=se),!re.keepValues){if(re.keepDirtyValues){const Fe=new Set([...l.mount,...Object.keys(eu(a,s))]);for(const ht of Array.from(Fe))Ee(r.dirtyFields,ht)?Nt(me,ht,Ee(s,ht)):I(ht,Ee(me,ht))}else{if(Y1&&rr(F))for(const Fe of l.mount){const ht=Ee(i,Fe);if(ht&&ht._f){const Gt=Array.isArray(ht._f.refs)?ht._f.refs[0]:ht._f.ref;if(Up(Gt)){const Nr=Gt.closest("form");if(Nr){Nr.reset();break}}}}for(const Fe of l.mount)I(Fe,Ee(me,Fe))}s=Pr(me),h.array.next({values:{...me}}),h.state.next({values:{...me}})}l={mount:re.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!re.keepIsValid||!!re.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:re.keepSubmitCount?r.submitCount:0,isDirty:pe?!1:re.keepDirty?r.isDirty:!!(re.keepDefaultValues&&!us(F,a)),isSubmitted:re.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:pe?{}:re.keepDirtyValues?re.keepDefaultValues&&s?eu(a,s):r.dirtyFields:re.keepDefaultValues&&F?eu(a,F):re.keepDirty?r.dirtyFields:{},touchedFields:re.keepTouched?r.touchedFields:{},errors:re.keepErrors?r.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},nt=(F,re)=>Ke(ki(F)?F(s):F,re),jt=(F,re={})=>{const se=Ee(i,F),xe=se&&se._f;if(xe){const pe=xe.refs?xe.refs[0]:xe.ref;pe.focus&&(pe.focus(),re.shouldSelect&&ki(pe.select)&&pe.select())}},te=F=>{r={...r,...F}},ut={control:{register:B,unregister:ne,getFieldState:ee,handleSubmit:ue,setError:oe,_subscribe:ve,_runSchema:A,_getWatch:R,_getDirty:_,_setValid:x,_setFieldArray:j,_setDisabledField:H,_setErrors:w,_getFieldArray:O,_reset:Ke,_resetDefaultValues:()=>ki(t.defaultValues)&&t.defaultValues().then(F=>{nt(F,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:ze,_subjects:h,_proxyFormState:u,get _fields(){return i},get _formValues(){return s},get _state(){return o},set _state(F){o=F},get _defaultValues(){return a},get _names(){return l},set _names(F){l=F},get _formState(){return r},get _options(){return t},set _options(F){t={...t,...F}}},subscribe:ye,trigger:ie,register:B,handleSubmit:ue,watch:Pe,setValue:I,getValues:U,reset:nt,resetField:Ae,clearErrors:de,unregister:ne,setError:oe,setFocus:jt,getFieldState:ee};return{...ut,formControl:ut}}function QV(e={}){const t=D.useRef(void 0),r=D.useRef(void 0),[i,a]=D.useState({isDirty:!1,isValidating:!1,isLoading:ki(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ki(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:YV(e),formState:i},e.formControl&&e.defaultValues&&!ki(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const s=t.current.control;return s._options=e,D.useLayoutEffect(()=>s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0}),[s]),D.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),D.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==i.isDirty&&s._subjects.state.next({isDirty:o})}},[s,i.isDirty]),D.useEffect(()=>{e.values&&!us(e.values,r.current)?(s._reset(e.values,s._options.resetOptions),r.current=e.values,a(o=>({...o}))):s._resetDefaultValues()},[e.values,s]),D.useEffect(()=>{e.errors&&!Zr(e.errors)&&s._setErrors(e.errors)},[e.errors,s]),D.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),D.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[e.shouldUnregister,s]),t.current.formState=NR(i,s),t.current}const Yk=(e,t,r)=>{if(e&&"reportValidity"in e){const i=Ee(r,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},_R=(e,t)=>{for(const r in t.fields){const i=t.fields[r];i&&i.ref&&"reportValidity"in i.ref?Yk(i.ref,r,e):i.refs&&i.refs.forEach(a=>Yk(a,r,e))}},JV=(e,t)=>{t.shouldUseNativeValidation&&_R(e,t);const r={};for(const i in e){const a=Ee(t.fields,i),s=Object.assign(e[i]||{},{ref:a&&a.ref});if(XV(t.names||Object.keys(e),i)){const o=Object.assign({},Ee(r,i));Nt(o,"root",s),Nt(r,i,o)}else Nt(r,i,s)}return r},XV=(e,t)=>e.some(r=>r.startsWith(t+"."));var ZV=function(e,t){for(var r={};e.length;){var i=e[0],a=i.code,s=i.message,o=i.path.join(".");if(!r[o])if("unionErrors"in i){var l=i.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:s,type:a};if("unionErrors"in i&&i.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return e.push(f)})}),t){var c=r[o].types,d=c&&c[i.code];r[o]=kR(o,t,r,a,d?[].concat(d,i.message):i.message)}e.shift()}return r},e9=function(e,t,r){return r===void 0&&(r={}),function(i,a,s){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](i,t)).then(function(d){return s.shouldUseNativeValidation&&_R({},s),{errors:{},values:r.raw?i:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:JV(ZV(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},yt;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const s={};for(const o of a)s[o]=o;return s},e.getValidEnumValues=a=>{const s=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of s)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(s){return a[s]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const s=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&s.push(o);return s},e.find=(a,s)=>{for(const o of a)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function i(a,s=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}e.joinValues=i,e.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(yt||(yt={}));var Qk;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Qk||(Qk={}));const De=yt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),os=e=>{switch(typeof e){case"undefined":return De.undefined;case"string":return De.string;case"number":return Number.isNaN(e)?De.nan:De.number;case"boolean":return De.boolean;case"function":return De.function;case"bigint":return De.bigint;case"symbol":return De.symbol;case"object":return Array.isArray(e)?De.array:e===null?De.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?De.promise:typeof Map<"u"&&e instanceof Map?De.map:typeof Set<"u"&&e instanceof Set?De.set:typeof Date<"u"&&e instanceof Date?De.date:De.object;default:return De.unknown}},be=yt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class za extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(s){return s.message},i={_errors:[]},a=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)i._errors.push(r(o));else{let l=i,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),i}static assert(t){if(!(t instanceof za))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},i=[];for(const a of this.issues)if(a.path.length>0){const s=a.path[0];r[s]=r[s]||[],r[s].push(t(a))}else i.push(t(a));return{formErrors:i,fieldErrors:r}}get formErrors(){return this.flatten()}}za.create=e=>new za(e);const F0=(e,t)=>{let r;switch(e.code){case be.invalid_type:e.received===De.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case be.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,yt.jsonStringifyReplacer)}`;break;case be.unrecognized_keys:r=`Unrecognized key(s) in object: ${yt.joinValues(e.keys,", ")}`;break;case be.invalid_union:r="Invalid input";break;case be.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${yt.joinValues(e.options)}`;break;case be.invalid_enum_value:r=`Invalid enum value. Expected ${yt.joinValues(e.options)}, received '${e.received}'`;break;case be.invalid_arguments:r="Invalid function arguments";break;case be.invalid_return_type:r="Invalid function return type";break;case be.invalid_date:r="Invalid date";break;case be.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:yt.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case be.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case be.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case be.custom:r="Invalid input";break;case be.invalid_intersection_types:r="Intersection results could not be merged";break;case be.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case be.not_finite:r="Number must be finite";break;default:r=t.defaultError,yt.assertNever(e)}return{message:r}};let t9=F0;function r9(){return t9}const n9=e=>{const{data:t,path:r,errorMaps:i,issueData:a}=e,s=[...r,...a.path||[]],o={...a,path:s};if(a.message!==void 0)return{...a,path:s,message:a.message};let l="";const c=i.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...a,path:s,message:l}};function Oe(e,t){const r=r9(),i=n9({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===F0?void 0:F0].filter(a=>!!a)});e.common.issues.push(i)}class Dn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const i=[];for(const a of r){if(a.status==="aborted")return et;a.status==="dirty"&&t.dirty(),i.push(a.value)}return{status:t.value,value:i}}static async mergeObjectAsync(t,r){const i=[];for(const a of r){const s=await a.key,o=await a.value;i.push({key:s,value:o})}return Dn.mergeObjectSync(t,i)}static mergeObjectSync(t,r){const i={};for(const a of r){const{key:s,value:o}=a;if(s.status==="aborted"||o.status==="aborted")return et;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(i[s.value]=o.value)}return{status:t.value,value:i}}}const et=Object.freeze({status:"aborted"}),yu=e=>({status:"dirty",value:e}),si=e=>({status:"valid",value:e}),Jk=e=>e.status==="aborted",Xk=e=>e.status==="dirty",Bc=e=>e.status==="valid",Hp=e=>typeof Promise<"u"&&e instanceof Promise;var Le;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Le||(Le={}));class Ks{constructor(t,r,i,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=i,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Zk=(e,t)=>{if(Bc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new za(e.common.issues);return this._error=r,this._error}}};function lt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:i,description:a}=e;if(t&&(r||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??i??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class vt{get description(){return this._def.description}_getType(t){return os(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:os(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Dn,ctx:{common:t.parent.common,data:t.data,parsedType:os(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Hp(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const i=this.safeParse(t,r);if(i.success)return i.data;throw i.error}safeParse(t,r){const i={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:os(t)},a=this._parseSync({data:t,path:i.path,parent:i});return Zk(i,a)}"~validate"(t){var i,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:os(t)};if(!this["~standard"].async)try{const s=this._parseSync({data:t,path:[],parent:r});return Bc(s)?{value:s.value}:{issues:r.common.issues}}catch(s){(a=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(s=>Bc(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(t,r){const i=await this.safeParseAsync(t,r);if(i.success)return i.data;throw i.error}async safeParseAsync(t,r){const i={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:os(t)},a=this._parse({data:t,path:i.path,parent:i}),s=await(Hp(a)?a:Promise.resolve(a));return Zk(i,s)}refine(t,r){const i=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,s)=>{const o=t(a),l=()=>s.addIssue({code:be.custom,...i(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((i,a)=>t(i)?!0:(a.addIssue(typeof r=="function"?r(i,a):r),!1))}_refinement(t){return new qc({schema:this,typeName:tt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Fs.create(this,this._def)}nullable(){return Uc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Zi.create(this)}promise(){return Qp.create(this,this._def)}or(t){return Gp.create([this,t],this._def)}and(t){return Yp.create(this,t,this._def)}transform(t){return new qc({...lt(this._def),schema:this,typeName:tt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new L0({...lt(this._def),innerType:this,defaultValue:r,typeName:tt.ZodDefault})}brand(){return new C9({typeName:tt.ZodBranded,type:this,...lt(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new B0({...lt(this._def),innerType:this,catchValue:r,typeName:tt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Z1.create(this,t)}readonly(){return z0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const i9=/^c[^\s-]{8,}$/i,a9=/^[0-9a-z]+$/,s9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,o9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,l9=/^[a-z0-9_-]{21}$/i,c9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,d9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,u9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,f9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Cy;const h9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,m9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,p9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,g9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,x9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,v9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,IR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",y9=new RegExp(`^${IR}$`);function RR(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function b9(e){return new RegExp(`^${RR(e)}$`)}function j9(e){let t=`${IR}T${RR(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function w9(e,t){return!!((t==="v4"||!t)&&h9.test(e)||(t==="v6"||!t)&&p9.test(e))}function N9(e,t){if(!c9.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const i=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(i));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function S9(e,t){return!!((t==="v4"||!t)&&m9.test(e)||(t==="v6"||!t)&&g9.test(e))}class Ss extends vt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==De.string){const s=this._getOrReturnCtx(t);return Oe(s,{code:be.invalid_type,expected:De.string,received:s.parsedType}),et}const i=new Dn;let a;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")t.data.length>s.value&&(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=t.data.length>s.value,l=t.data.length<s.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?Oe(a,{code:be.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Oe(a,{code:be.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")u9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"email",code:be.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")Cy||(Cy=new RegExp(f9,"u")),Cy.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"emoji",code:be.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")o9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"uuid",code:be.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")l9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"nanoid",code:be.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")i9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"cuid",code:be.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")a9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"cuid2",code:be.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")s9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"ulid",code:be.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Oe(a,{validation:"url",code:be.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"regex",code:be.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?j9(s).test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?y9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?b9(s).test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?d9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"duration",code:be.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?w9(t.data,s.version)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"ip",code:be.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?N9(t.data,s.alg)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"jwt",code:be.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?S9(t.data,s.version)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"cidr",code:be.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?x9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"base64",code:be.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?v9.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"base64url",code:be.invalid_string,message:s.message}),i.dirty()):yt.assertNever(s);return{status:i.value,value:t.data}}_regex(t,r,i){return this.refinement(a=>t.test(a),{validation:r,code:be.invalid_string,...Le.errToObj(i)})}_addCheck(t){return new Ss({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Le.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Le.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Le.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Le.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Le.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Le.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Le.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Le.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Le.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Le.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Le.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Le.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Le.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Le.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Le.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Le.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Le.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Le.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Le.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Le.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Le.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Le.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Le.errToObj(r)})}nonempty(t){return this.min(1,Le.errToObj(t))}trim(){return new Ss({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ss({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ss({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Ss.create=e=>new Ss({checks:[],typeName:tt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...lt(e)});function k9(e,t){const r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,a=r>i?r:i,s=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return s%o/10**a}class gf extends vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==De.number){const s=this._getOrReturnCtx(t);return Oe(s,{code:be.invalid_type,expected:De.number,received:s.parsedType}),et}let i;const a=new Dn;for(const s of this._def.checks)s.kind==="int"?yt.isInteger(t.data)||(i=this._getOrReturnCtx(t,i),Oe(i,{code:be.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(i=this._getOrReturnCtx(t,i),Oe(i,{code:be.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(i=this._getOrReturnCtx(t,i),Oe(i,{code:be.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?k9(t.data,s.value)!==0&&(i=this._getOrReturnCtx(t,i),Oe(i,{code:be.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(i=this._getOrReturnCtx(t,i),Oe(i,{code:be.not_finite,message:s.message}),a.dirty()):yt.assertNever(s);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Le.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Le.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Le.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Le.toString(r))}setLimit(t,r,i,a){return new gf({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:i,message:Le.toString(a)}]})}_addCheck(t){return new gf({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Le.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Le.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Le.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Le.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Le.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Le.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Le.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Le.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Le.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&yt.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(r===null||i.value>r)&&(r=i.value):i.kind==="max"&&(t===null||i.value<t)&&(t=i.value)}return Number.isFinite(r)&&Number.isFinite(t)}}gf.create=e=>new gf({checks:[],typeName:tt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...lt(e)});class xf extends vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==De.bigint)return this._getInvalidInput(t);let i;const a=new Dn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(i=this._getOrReturnCtx(t,i),Oe(i,{code:be.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(i=this._getOrReturnCtx(t,i),Oe(i,{code:be.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(t,i),Oe(i,{code:be.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):yt.assertNever(s);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Oe(r,{code:be.invalid_type,expected:De.bigint,received:r.parsedType}),et}gte(t,r){return this.setLimit("min",t,!0,Le.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Le.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Le.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Le.toString(r))}setLimit(t,r,i,a){return new xf({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:i,message:Le.toString(a)}]})}_addCheck(t){return new xf({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Le.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Le.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Le.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Le.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Le.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}xf.create=e=>new xf({checks:[],typeName:tt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...lt(e)});class eC extends vt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==De.boolean){const i=this._getOrReturnCtx(t);return Oe(i,{code:be.invalid_type,expected:De.boolean,received:i.parsedType}),et}return si(t.data)}}eC.create=e=>new eC({typeName:tt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...lt(e)});class Kp extends vt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==De.date){const s=this._getOrReturnCtx(t);return Oe(s,{code:be.invalid_type,expected:De.date,received:s.parsedType}),et}if(Number.isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return Oe(s,{code:be.invalid_date}),et}const i=new Dn;let a;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(a=this._getOrReturnCtx(t,a),Oe(a,{code:be.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):yt.assertNever(s);return{status:i.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Kp({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Le.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Le.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Kp.create=e=>new Kp({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:tt.ZodDate,...lt(e)});class tC extends vt{_parse(t){if(this._getType(t)!==De.symbol){const i=this._getOrReturnCtx(t);return Oe(i,{code:be.invalid_type,expected:De.symbol,received:i.parsedType}),et}return si(t.data)}}tC.create=e=>new tC({typeName:tt.ZodSymbol,...lt(e)});class rC extends vt{_parse(t){if(this._getType(t)!==De.undefined){const i=this._getOrReturnCtx(t);return Oe(i,{code:be.invalid_type,expected:De.undefined,received:i.parsedType}),et}return si(t.data)}}rC.create=e=>new rC({typeName:tt.ZodUndefined,...lt(e)});class nC extends vt{_parse(t){if(this._getType(t)!==De.null){const i=this._getOrReturnCtx(t);return Oe(i,{code:be.invalid_type,expected:De.null,received:i.parsedType}),et}return si(t.data)}}nC.create=e=>new nC({typeName:tt.ZodNull,...lt(e)});class iC extends vt{constructor(){super(...arguments),this._any=!0}_parse(t){return si(t.data)}}iC.create=e=>new iC({typeName:tt.ZodAny,...lt(e)});class aC extends vt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return si(t.data)}}aC.create=e=>new aC({typeName:tt.ZodUnknown,...lt(e)});class Gs extends vt{_parse(t){const r=this._getOrReturnCtx(t);return Oe(r,{code:be.invalid_type,expected:De.never,received:r.parsedType}),et}}Gs.create=e=>new Gs({typeName:tt.ZodNever,...lt(e)});class sC extends vt{_parse(t){if(this._getType(t)!==De.undefined){const i=this._getOrReturnCtx(t);return Oe(i,{code:be.invalid_type,expected:De.void,received:i.parsedType}),et}return si(t.data)}}sC.create=e=>new sC({typeName:tt.ZodVoid,...lt(e)});class Zi extends vt{_parse(t){const{ctx:r,status:i}=this._processInputParams(t),a=this._def;if(r.parsedType!==De.array)return Oe(r,{code:be.invalid_type,expected:De.array,received:r.parsedType}),et;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(Oe(r,{code:o?be.too_big:be.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),i.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Oe(r,{code:be.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),i.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Oe(r,{code:be.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),i.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Ks(r,o,r.path,l)))).then(o=>Dn.mergeArray(i,o));const s=[...r.data].map((o,l)=>a.type._parseSync(new Ks(r,o,r.path,l)));return Dn.mergeArray(i,s)}get element(){return this._def.type}min(t,r){return new Zi({...this._def,minLength:{value:t,message:Le.toString(r)}})}max(t,r){return new Zi({...this._def,maxLength:{value:t,message:Le.toString(r)}})}length(t,r){return new Zi({...this._def,exactLength:{value:t,message:Le.toString(r)}})}nonempty(t){return this.min(1,t)}}Zi.create=(e,t)=>new Zi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:tt.ZodArray,...lt(t)});function El(e){if(e instanceof Qt){const t={};for(const r in e.shape){const i=e.shape[r];t[r]=Fs.create(El(i))}return new Qt({...e._def,shape:()=>t})}else return e instanceof Zi?new Zi({...e._def,type:El(e.element)}):e instanceof Fs?Fs.create(El(e.unwrap())):e instanceof Uc?Uc.create(El(e.unwrap())):e instanceof Jo?Jo.create(e.items.map(t=>El(t))):e}class Qt extends vt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=yt.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==De.object){const d=this._getOrReturnCtx(t);return Oe(d,{code:be.invalid_type,expected:De.object,received:d.parsedType}),et}const{status:i,ctx:a}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Gs&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=s[d],f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Ks(a,f,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Gs){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(Oe(a,{code:be.unrecognized_keys,keys:l}),i.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Ks(a,f,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const f=await u.key,h=await u.value;d.push({key:f,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>Dn.mergeObjectSync(i,d)):Dn.mergeObjectSync(i,c)}get shape(){return this._def.shape()}strict(t){return Le.errToObj,new Qt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,i)=>{var s,o;const a=((o=(s=this._def).errorMap)==null?void 0:o.call(s,r,i).message)??i.defaultError;return r.code==="unrecognized_keys"?{message:Le.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Qt({...this._def,unknownKeys:"strip"})}passthrough(){return new Qt({...this._def,unknownKeys:"passthrough"})}extend(t){return new Qt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Qt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:tt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Qt({...this._def,catchall:t})}pick(t){const r={};for(const i of yt.objectKeys(t))t[i]&&this.shape[i]&&(r[i]=this.shape[i]);return new Qt({...this._def,shape:()=>r})}omit(t){const r={};for(const i of yt.objectKeys(this.shape))t[i]||(r[i]=this.shape[i]);return new Qt({...this._def,shape:()=>r})}deepPartial(){return El(this)}partial(t){const r={};for(const i of yt.objectKeys(this.shape)){const a=this.shape[i];t&&!t[i]?r[i]=a:r[i]=a.optional()}return new Qt({...this._def,shape:()=>r})}required(t){const r={};for(const i of yt.objectKeys(this.shape))if(t&&!t[i])r[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Fs;)s=s._def.innerType;r[i]=s}return new Qt({...this._def,shape:()=>r})}keyof(){return MR(yt.objectKeys(this.shape))}}Qt.create=(e,t)=>new Qt({shape:()=>e,unknownKeys:"strip",catchall:Gs.create(),typeName:tt.ZodObject,...lt(t)});Qt.strictCreate=(e,t)=>new Qt({shape:()=>e,unknownKeys:"strict",catchall:Gs.create(),typeName:tt.ZodObject,...lt(t)});Qt.lazycreate=(e,t)=>new Qt({shape:e,unknownKeys:"strip",catchall:Gs.create(),typeName:tt.ZodObject,...lt(t)});class Gp extends vt{_parse(t){const{ctx:r}=this._processInputParams(t),i=this._def.options;function a(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new za(l.ctx.common.issues));return Oe(r,{code:be.invalid_union,unionErrors:o}),et}if(r.common.async)return Promise.all(i.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let s;const o=[];for(const c of i){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(c=>new za(c));return Oe(r,{code:be.invalid_union,unionErrors:l}),et}}get options(){return this._def.options}}Gp.create=(e,t)=>new Gp({options:e,typeName:tt.ZodUnion,...lt(t)});function D0(e,t){const r=os(e),i=os(t);if(e===t)return{valid:!0,data:e};if(r===De.object&&i===De.object){const a=yt.objectKeys(t),s=yt.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of s){const c=D0(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===De.array&&i===De.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let s=0;s<e.length;s++){const o=e[s],l=t[s],c=D0(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===De.date&&i===De.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Yp extends vt{_parse(t){const{status:r,ctx:i}=this._processInputParams(t),a=(s,o)=>{if(Jk(s)||Jk(o))return et;const l=D0(s.value,o.value);return l.valid?((Xk(s)||Xk(o))&&r.dirty(),{status:r.value,value:l.data}):(Oe(i,{code:be.invalid_intersection_types}),et)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>a(s,o)):a(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Yp.create=(e,t,r)=>new Yp({left:e,right:t,typeName:tt.ZodIntersection,...lt(r)});class Jo extends vt{_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==De.array)return Oe(i,{code:be.invalid_type,expected:De.array,received:i.parsedType}),et;if(i.data.length<this._def.items.length)return Oe(i,{code:be.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),et;!this._def.rest&&i.data.length>this._def.items.length&&(Oe(i,{code:be.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...i.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ks(i,o,i.path,l)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>Dn.mergeArray(r,o)):Dn.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new Jo({...this._def,rest:t})}}Jo.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jo({items:e,typeName:tt.ZodTuple,rest:null,...lt(t)})};class oC extends vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==De.map)return Oe(i,{code:be.invalid_type,expected:De.map,received:i.parsedType}),et;const a=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([l,c],d)=>({key:a._parse(new Ks(i,l,i.path,[d,"key"])),value:s._parse(new Ks(i,c,i.path,[d,"value"]))}));if(i.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return et;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return et;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}}}}oC.create=(e,t,r)=>new oC({valueType:t,keyType:e,typeName:tt.ZodMap,...lt(r)});class vf extends vt{_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==De.set)return Oe(i,{code:be.invalid_type,expected:De.set,received:i.parsedType}),et;const a=this._def;a.minSize!==null&&i.data.size<a.minSize.value&&(Oe(i,{code:be.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&i.data.size>a.maxSize.value&&(Oe(i,{code:be.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return et;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const l=[...i.data.values()].map((c,d)=>s._parse(new Ks(i,c,i.path,d)));return i.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new vf({...this._def,minSize:{value:t,message:Le.toString(r)}})}max(t,r){return new vf({...this._def,maxSize:{value:t,message:Le.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}vf.create=(e,t)=>new vf({valueType:e,minSize:null,maxSize:null,typeName:tt.ZodSet,...lt(t)});class lC extends vt{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}lC.create=(e,t)=>new lC({getter:e,typeName:tt.ZodLazy,...lt(t)});class cC extends vt{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Oe(r,{received:r.data,code:be.invalid_literal,expected:this._def.value}),et}return{status:"valid",value:t.data}}get value(){return this._def.value}}cC.create=(e,t)=>new cC({value:e,typeName:tt.ZodLiteral,...lt(t)});function MR(e,t){return new zc({values:e,typeName:tt.ZodEnum,...lt(t)})}class zc extends vt{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),i=this._def.values;return Oe(r,{expected:yt.joinValues(i),received:r.parsedType,code:be.invalid_type}),et}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),i=this._def.values;return Oe(r,{received:r.data,code:be.invalid_enum_value,options:i}),et}return si(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return zc.create(t,{...this._def,...r})}exclude(t,r=this._def){return zc.create(this.options.filter(i=>!t.includes(i)),{...this._def,...r})}}zc.create=MR;class dC extends vt{_parse(t){const r=yt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(t);if(i.parsedType!==De.string&&i.parsedType!==De.number){const a=yt.objectValues(r);return Oe(i,{expected:yt.joinValues(a),received:i.parsedType,code:be.invalid_type}),et}if(this._cache||(this._cache=new Set(yt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=yt.objectValues(r);return Oe(i,{received:i.data,code:be.invalid_enum_value,options:a}),et}return si(t.data)}get enum(){return this._def.values}}dC.create=(e,t)=>new dC({values:e,typeName:tt.ZodNativeEnum,...lt(t)});class Qp extends vt{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==De.promise&&r.common.async===!1)return Oe(r,{code:be.invalid_type,expected:De.promise,received:r.parsedType}),et;const i=r.parsedType===De.promise?r.data:Promise.resolve(r.data);return si(i.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Qp.create=(e,t)=>new Qp({type:e,typeName:tt.ZodPromise,...lt(t)});class qc extends vt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:i}=this._processInputParams(t),a=this._def.effect||null,s={addIssue:o=>{Oe(i,o),o.fatal?r.abort():r.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="preprocess"){const o=a.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return et;const c=await this._def.schema._parseAsync({data:l,path:i.path,parent:i});return c.status==="aborted"?et:c.status==="dirty"||r.value==="dirty"?yu(c.value):c});{if(r.value==="aborted")return et;const l=this._def.schema._parseSync({data:o,path:i.path,parent:i});return l.status==="aborted"?et:l.status==="dirty"||r.value==="dirty"?yu(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,s);if(i.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?et:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>l.status==="aborted"?et:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Bc(o))return et;const l=a.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Bc(o)?Promise.resolve(a.transform(o.value,s)).then(l=>({status:r.value,value:l})):et);yt.assertNever(a)}}qc.create=(e,t,r)=>new qc({schema:e,typeName:tt.ZodEffects,effect:t,...lt(r)});qc.createWithPreprocess=(e,t,r)=>new qc({schema:t,effect:{type:"preprocess",transform:e},typeName:tt.ZodEffects,...lt(r)});class Fs extends vt{_parse(t){return this._getType(t)===De.undefined?si(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Fs.create=(e,t)=>new Fs({innerType:e,typeName:tt.ZodOptional,...lt(t)});class Uc extends vt{_parse(t){return this._getType(t)===De.null?si(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Uc.create=(e,t)=>new Uc({innerType:e,typeName:tt.ZodNullable,...lt(t)});class L0 extends vt{_parse(t){const{ctx:r}=this._processInputParams(t);let i=r.data;return r.parsedType===De.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}L0.create=(e,t)=>new L0({innerType:e,typeName:tt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...lt(t)});class B0 extends vt{_parse(t){const{ctx:r}=this._processInputParams(t),i={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Hp(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new za(i.common.issues)},input:i.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new za(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}B0.create=(e,t)=>new B0({innerType:e,typeName:tt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...lt(t)});class uC extends vt{_parse(t){if(this._getType(t)!==De.nan){const i=this._getOrReturnCtx(t);return Oe(i,{code:be.invalid_type,expected:De.nan,received:i.parsedType}),et}return{status:"valid",value:t.data}}}uC.create=e=>new uC({typeName:tt.ZodNaN,...lt(e)});class C9 extends vt{_parse(t){const{ctx:r}=this._processInputParams(t),i=r.data;return this._def.type._parse({data:i,path:r.path,parent:r})}unwrap(){return this._def.type}}class Z1 extends vt{_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?et:s.status==="dirty"?(r.dirty(),yu(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const a=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?et:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:i.path,parent:i})}}static create(t,r){return new Z1({in:t,out:r,typeName:tt.ZodPipeline})}}class z0 extends vt{_parse(t){const r=this._def.innerType._parse(t),i=a=>(Bc(a)&&(a.value=Object.freeze(a.value)),a);return Hp(r)?r.then(a=>i(a)):i(r)}unwrap(){return this._def.innerType}}z0.create=(e,t)=>new z0({innerType:e,typeName:tt.ZodReadonly,...lt(t)});Qt.lazycreate;var tt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(tt||(tt={}));const Ay=Ss.create;Gs.create;Zi.create;const A9=Qt.create;Qt.strictCreate;Gp.create;Yp.create;Jo.create;zc.create;Qp.create;Fs.create;Uc.create;const je=g.forwardRef(({className:e,type:t,...r},i)=>n.jsx("input",{type:t,className:we("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));je.displayName="Input";const W=g.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:we("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));W.displayName="Card";const X=g.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:we("flex flex-col space-y-1.5 p-6",e),...t}));X.displayName="CardHeader";const Z=g.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:we("text-2xl font-semibold leading-none tracking-tight",e),...t}));Z.displayName="CardTitle";const Be=g.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:we("text-sm text-muted-foreground",e),...t}));Be.displayName="CardDescription";const K=g.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:we("p-6 pt-0",e),...t}));K.displayName="CardContent";const E9=g.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:we("flex items-center p-6 pt-0",e),...t}));E9.displayName="CardFooter";var P9="Label",$R=g.forwardRef((e,t)=>n.jsx(Ue.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));$R.displayName=P9;var FR=$R;const T9=wd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ce=g.forwardRef(({className:e,...t},r)=>n.jsx(FR,{ref:r,className:we(T9(),e),...t}));ce.displayName=FR.displayName;const O9=_V,DR=g.createContext({}),Ey=({...e})=>n.jsx(DR.Provider,{value:{name:e.name},children:n.jsx($V,{...e})}),qx=()=>{const e=g.useContext(DR),t=g.useContext(LR),{getFieldState:r,formState:i}=zx(),a=r(e.name,i);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=t;return{id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...a}},LR=g.createContext({}),ep=g.forwardRef(({className:e,...t},r)=>{const i=g.useId();return n.jsx(LR.Provider,{value:{id:i},children:n.jsx("div",{ref:r,className:we("space-y-2",e),...t})})});ep.displayName="FormItem";const tp=g.forwardRef(({className:e,...t},r)=>{const{error:i,formItemId:a}=qx();return n.jsx(ce,{ref:r,className:we(i&&"text-destructive",e),htmlFor:a,...t})});tp.displayName="FormLabel";const rp=g.forwardRef(({...e},t)=>{const{error:r,formItemId:i,formDescriptionId:a,formMessageId:s}=qx();return n.jsx(Sx,{ref:t,id:i,"aria-describedby":r?`${a} ${s}`:`${a}`,"aria-invalid":!!r,...e})});rp.displayName="FormControl";const _9=g.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:i}=qx();return n.jsx("p",{ref:r,id:i,className:we("text-sm text-muted-foreground",e),...t})});_9.displayName="FormDescription";const np=g.forwardRef(({className:e,children:t,...r},i)=>{const{error:a,formMessageId:s}=qx(),o=a?String((a==null?void 0:a.message)??""):t;return o?n.jsx("p",{ref:i,id:s,className:we("text-sm font-medium text-destructive",e),...r,children:o}):null});np.displayName="FormMessage";const I9=A9({name:Ay().optional(),email:Ay().email("Please enter a valid email"),password:Ay().min(8,"Password must be at least 8 characters")});function R9(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState(!1),a=QV({resolver:e9(I9),defaultValues:{name:"",email:"",password:""}}),s=async o=>{i(!0);try{const l=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!l.ok){const d=await l.json();throw new Error(d.error||"Signup failed")}const c=await l.json();localStorage.setItem("sessionToken",c.sessionToken),localStorage.setItem("user",JSON.stringify(c.user)),t({title:"Welcome to BJJ OS!",description:"Your account has been created successfully."}),e("/onboarding")}catch(l){console.error("Signup error:",l),t({title:"Signup Failed",description:l.message||"Something went wrong. Please try again.",variant:"destructive"}),i(!1)}};return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center py-12 px-6",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsx(dr,{href:"/",children:n.jsxs(Q,{variant:"ghost",className:"mb-6","data-testid":"button-back-home",children:[n.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),n.jsxs(W,{children:[n.jsxs(X,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#667eea] to-[#764ba2] flex items-center justify-center",children:n.jsx(rc,{className:"w-8 h-8 text-white"})})}),n.jsx(Z,{className:"text-2xl",children:"Start Your BJJ Journey"}),n.jsx(Be,{children:"Create your account to chat with Prof. OS"})]}),n.jsx(K,{children:n.jsx(O9,{...a,children:n.jsxs("form",{onSubmit:a.handleSubmit(s),className:"space-y-4",children:[n.jsx(Ey,{control:a.control,name:"name",render:({field:o})=>n.jsxs(ep,{children:[n.jsx(tp,{children:"Name (optional)"}),n.jsx(rp,{children:n.jsx(je,{placeholder:"Your name",...o,"data-testid":"input-name"})}),n.jsx(np,{})]})}),n.jsx(Ey,{control:a.control,name:"email",render:({field:o})=>n.jsxs(ep,{children:[n.jsx(tp,{children:"Email"}),n.jsx(rp,{children:n.jsx(je,{type:"email",placeholder:"your@email.com",...o,"data-testid":"input-email"})}),n.jsx(np,{})]})}),n.jsx(Ey,{control:a.control,name:"password",render:({field:o})=>n.jsxs(ep,{children:[n.jsx(tp,{children:"Password"}),n.jsx(rp,{children:n.jsx(je,{type:"password",placeholder:"Min 8 characters",...o,"data-testid":"input-password"})}),n.jsx(np,{})]})}),n.jsx(Q,{type:"submit",className:"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2]",disabled:r,"data-testid":"button-signup",children:r?"Creating Account...":"Start Free"}),n.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["By signing up, you agree to our"," ",n.jsx(dr,{href:"/terms",children:n.jsx("a",{className:"text-primary hover:underline",children:"Terms of Service"})})," ","and"," ",n.jsx(dr,{href:"/privacy",children:n.jsx("a",{className:"text-primary hover:underline",children:"Privacy Policy"})})]}),n.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Already have an account?"," ",n.jsx(dr,{href:"/login",children:n.jsx("a",{className:"text-primary hover:underline font-medium","data-testid":"link-login",children:"Log in"})})]})]})})})]})]})})}const M9={small:{width:125,height:20},medium:{width:250,height:40},large:{width:400,height:64},hero:{width:500,height:80}},fC={white:{mainColor:"#FFFFFF",stripeColor:"#FFFFFF",stripeSectionColor:"#000000",showStripes:!0,needsBorder:!0},blue:{mainColor:"#2563EB",stripeColor:"#FFFFFF",stripeSectionColor:"#000000",showStripes:!0,needsBorder:!1},purple:{mainColor:"#7C3AED",stripeColor:"#FFFFFF",stripeSectionColor:"#000000",showStripes:!0,needsBorder:!1},brown:{mainColor:"#92400E",stripeColor:"#FFFFFF",stripeSectionColor:"#000000",showStripes:!0,needsBorder:!1},black:{mainColor:"#000000",stripeColor:"#FFFFFF",stripeSectionColor:"#DC2626",showStripes:!0,needsBorder:!0}},vl=[458,468,479,489];function Ed({rank:e="blue",size:t="medium",className:r="",animated:i=!1}){const a=M9[t],[s,o]=g.useState(i?"white":e);if(g.useEffect(()=>{if(!i)return;const c=["white","blue","purple","brown","black"];let d=0;o("white");const u=setInterval(()=>{d=(d+1)%c.length,o(c[d])},2e3);return()=>clearInterval(u)},[i]),!i){const c=fC[e];return n.jsxs("svg",{width:a.width,height:a.height,viewBox:"0 0 500 80",xmlns:"http://www.w3.org/2000/svg",className:r,"data-testid":`belt-icon-${e}`,style:{filter:"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.4))"},children:[e==="white"&&n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"1",y:"1",width:"448",height:"78",fill:c.mainColor,stroke:"#333333",strokeWidth:"2"}),n.jsx("rect",{x:"450",y:"1",width:"49",height:"78",fill:c.stripeSectionColor,stroke:"#333333",strokeWidth:"2"}),vl.map((d,u)=>n.jsx("rect",{x:d,y:"0",width:"3",height:"80",fill:c.stripeColor},u))]}),e==="black"&&n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"1",y:"1",width:"448",height:"78",fill:c.mainColor,stroke:"#FFFFFF",strokeWidth:"2"}),n.jsx("rect",{x:"450",y:"0",width:"50",height:"80",fill:c.stripeSectionColor}),vl.map((d,u)=>n.jsx("rect",{x:d,y:"0",width:"3",height:"80",fill:c.stripeColor},u))]}),e!=="white"&&e!=="black"&&n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"0",y:"0",width:"450",height:"80",fill:c.mainColor}),n.jsx("rect",{x:"450",y:"0",width:"50",height:"80",fill:c.stripeSectionColor}),c.showStripes&&vl.map((d,u)=>n.jsx("rect",{x:d,y:"0",width:"3",height:"80",fill:c.stripeColor},u))]})]})}const l=["white","blue","purple","brown","black"];return n.jsx("svg",{width:a.width,height:a.height,viewBox:"0 0 500 80",xmlns:"http://www.w3.org/2000/svg",className:r,"data-testid":`belt-icon-${s}`,style:{filter:"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.4))"},children:l.map(c=>{const d=fC[c],u=c===s;return n.jsxs("g",{style:{opacity:u?1:0,transition:"opacity 0.5s ease-in-out"},children:[c==="white"&&n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"1",y:"1",width:"448",height:"78",fill:d.mainColor,stroke:"#333333",strokeWidth:"2"}),n.jsx("rect",{x:"450",y:"1",width:"49",height:"78",fill:d.stripeSectionColor,stroke:"#333333",strokeWidth:"2"}),vl.map((f,h)=>n.jsx("rect",{x:f,y:"0",width:"3",height:"80",fill:d.stripeColor},h))]}),c==="black"&&n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"1",y:"1",width:"448",height:"78",fill:d.mainColor,stroke:"#FFFFFF",strokeWidth:"2"}),n.jsx("rect",{x:"450",y:"0",width:"50",height:"80",fill:d.stripeSectionColor}),vl.map((f,h)=>n.jsx("rect",{x:f,y:"0",width:"3",height:"80",fill:d.stripeColor},h))]}),c!=="white"&&c!=="black"&&n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"0",y:"0",width:"450",height:"80",fill:d.mainColor}),n.jsx("rect",{x:"450",y:"0",width:"50",height:"80",fill:d.stripeSectionColor}),d.showStripes&&vl.map((f,h)=>n.jsx("rect",{x:f,y:"0",width:"3",height:"80",fill:d.stripeColor},h))]})]},c)})})}function $9(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState("email"),[a,s]=g.useState(""),[o,l]=g.useState(""),[c,d]=g.useState(""),[u,f]=g.useState(!1),[h,p]=g.useState(!1),[y,v]=g.useState(!0),b=async m=>{if(m.preventDefault(),d(""),!a||!a.includes("@")){d("Please enter a valid email address");return}f(!0);try{const j=await fetch("/api/auth/email/request-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),N=await j.json();if(!j.ok){d(N.error||"Failed to send verification code");return}N.isAdmin?(p(!0),t({title:"Admin Account",description:"Please use your admin bypass code"})):t({title:"Code Sent!",description:"Check your email for the verification code"}),i("code")}catch(j){d(j.message||"Something went wrong. Please try again."),t({title:"Error",description:j.message||"Failed to send code",variant:"destructive"})}finally{f(!1)}},x=async m=>{var j;if(m.preventDefault(),d(""),!o||o.length!==6){d("Please enter the 6-digit code");return}f(!0);try{const N=await fetch("/api/auth/email/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,code:o,rememberMe:y})}),w=await N.json();if(!N.ok){d(w.error||"Invalid verification code");return}await ec(w.token),await tc(w.user);const S=((j=w.user.id)==null?void 0:j.toString())||"1";localStorage.setItem("mobileUserId",S),Zt()&&await Qn.set({key:"mobileUserId",value:S}),t({title:w.isNewUser?"Welcome!":"Welcome Back!",description:w.isNewUser?"Your account has been created":"Successfully logged in"}),w.redirect?e(w.redirect):w.user.onboardingCompleted?e(Zt()?"/chat":"/app/chat"):e("/mobile-onboarding")}catch(N){d(N.message||"Something went wrong. Please try again."),t({title:"Verification Failed",description:N.message||"Invalid code",variant:"destructive"})}finally{f(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-purple-950/20 to-black flex items-center justify-center p-6",children:n.jsxs("div",{className:"w-full max-w-md",children:[!Zt()&&n.jsxs(Q,{variant:"outline",onClick:()=>r==="code"?i("email"):e("/"),className:"mb-8 bg-white/5 border-white/10 hover:bg-white/10","data-testid":"button-back",children:[n.jsx(Wr,{className:"w-4 h-4 mr-2"}),r==="code"?"Back":"Back to Home"]}),Zt()&&r==="code"&&n.jsxs(Q,{variant:"outline",onClick:()=>i("email"),className:"mb-8 bg-white/5 border-white/10 hover:bg-white/10","data-testid":"button-back",children:[n.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Back"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:n.jsx(Ed,{className:"w-16 h-16"})}),n.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:r==="email"?"Sign In":"Enter Code"}),n.jsx("p",{className:"text-gray-400",children:r==="email"?"Enter your email to get started":h?"Use your admin bypass code":"We sent a 6-digit code to your email"})]}),r==="email"&&n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"email",className:"text-white",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),n.jsx(je,{id:"email",type:"email",placeholder:"you@example.com",value:a,onChange:m=>s(m.target.value),disabled:u,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-email",autoFocus:!0})]})]}),c&&n.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:c}),n.jsx(Q,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:u||!a,"data-testid":"button-continue",children:u?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending Code..."]}):"Continue"})]}),r==="code"&&n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"code",className:"text-white",children:h?"Admin Bypass Code":"Verification Code"}),n.jsx(je,{id:"code",type:"text",placeholder:"000000",value:o,onChange:m=>l(m.target.value.replace(/\D/g,"").slice(0,6)),disabled:u,className:"text-center text-2xl tracking-widest bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-code",autoFocus:!0,maxLength:6})]}),c&&n.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:c}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"rememberMe",checked:y,onChange:m=>v(m.target.checked),className:"w-4 h-4 accent-purple-600 cursor-pointer","data-testid":"checkbox-remember-me"}),n.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-gray-400 cursor-pointer",children:"Keep me signed in for 30 days"})]}),n.jsx(Q,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:u||o.length!==6,"data-testid":"button-verify",children:u?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify & Continue"}),n.jsx("div",{className:"text-center",children:n.jsx("button",{type:"button",onClick:()=>{i("email"),l(""),d("")},className:"text-sm text-gray-400 hover:text-white transition-colors","data-testid":"button-resend",children:"Didn't receive it? Try again"})})]})]}),n.jsxs("div",{className:"mt-6 text-center text-sm text-gray-400 space-y-2",children:[n.jsx("div",{children:n.jsx(dr,{href:"/forgot-password",className:"hover:text-white transition-colors","data-testid":"link-forgot-password",children:"Forgot your password?"})}),n.jsx("div",{children:n.jsx(dr,{href:"/login",className:"hover:text-white transition-colors","data-testid":"link-phone-login",children:"Use phone number instead"})})]})]})})}function F9(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState("email"),[a,s]=g.useState(""),[o,l]=g.useState(""),[c,d]=g.useState(""),[u,f]=g.useState(""),[h,p]=g.useState(!1),[y,v]=g.useState(""),[b,x]=g.useState(!1),m=async w=>{if(w.preventDefault(),v(""),!a||!a.includes("@")){v("Please enter a valid email address");return}x(!0);try{const S=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),C=await S.json();if(!S.ok){v(C.error||"Failed to send reset code");return}t({title:"Reset Code Sent",description:"Check your email for the password reset code"}),i("code")}catch(S){v(S.message||"Something went wrong. Please try again.")}finally{x(!1)}},j=async w=>{if(w.preventDefault(),v(""),!o||o.length!==6){v("Please enter the 6-digit code");return}x(!0);try{const S=await fetch("/api/auth/verify-reset-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,code:o})}),C=await S.json();if(!S.ok){v(C.error||"Invalid code");return}i("newPassword")}catch(S){v(S.message||"Something went wrong. Please try again.")}finally{x(!1)}},N=async w=>{if(w.preventDefault(),v(""),c.length<8){v("Password must be at least 8 characters");return}if(c!==u){v("Passwords don't match");return}x(!0);try{const S=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,code:o,newPassword:c})}),C=await S.json();if(!S.ok){v(C.error||"Failed to reset password");return}t({title:"Password Reset",description:"Your password has been reset. You can now log in."}),e("/email-login")}catch(S){v(S.message||"Something went wrong. Please try again.")}finally{x(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-purple-950/20 to-black flex items-center justify-center p-6",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs(Q,{variant:"outline",onClick:()=>{r==="code"?i("email"):r==="newPassword"?i("code"):e("/email-login")},className:"mb-8 bg-white/5 border-white/10 hover:bg-white/10","data-testid":"button-back",children:[n.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Back"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:n.jsx(Ed,{className:"w-16 h-16"})}),n.jsxs("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:[r==="email"&&"Reset Password",r==="code"&&"Enter Code",r==="newPassword"&&"New Password"]}),n.jsxs("p",{className:"text-gray-400",children:[r==="email"&&"Enter your email to receive a reset code",r==="code"&&"We sent a 6-digit code to your email",r==="newPassword"&&"Enter your new password"]})]}),r==="email"&&n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"email",className:"text-white",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),n.jsx(je,{id:"email",type:"email",placeholder:"you@example.com",value:a,onChange:w=>s(w.target.value),disabled:b,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-email",autoFocus:!0})]})]}),y&&n.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:y}),n.jsx(Q,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:b||!a,"data-testid":"button-continue",children:b?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending Code..."]}):"Send Reset Code"})]}),r==="code"&&n.jsxs("form",{onSubmit:j,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"code",className:"text-white",children:"Reset Code"}),n.jsx(je,{id:"code",type:"text",placeholder:"000000",value:o,onChange:w=>l(w.target.value.replace(/\D/g,"").slice(0,6)),disabled:b,className:"text-center text-2xl tracking-widest bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-code",autoFocus:!0,maxLength:6})]}),y&&n.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:y}),n.jsx(Q,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:b||o.length!==6,"data-testid":"button-verify",children:b?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify Code"})]}),r==="newPassword"&&n.jsxs("form",{onSubmit:N,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"newPassword",className:"text-white",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Yo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),n.jsx(je,{id:"newPassword",type:h?"text":"password",placeholder:"Min 8 characters",value:c,onChange:w=>d(w.target.value),disabled:b,className:"pl-10 pr-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-new-password",autoFocus:!0}),n.jsx(Q,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full text-gray-400 hover:text-white",onClick:()=>p(!h),"data-testid":"button-toggle-password",children:h?n.jsx(Ms,{className:"w-4 h-4"}):n.jsx(Mr,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"confirmPassword",className:"text-white",children:"Confirm Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Yo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),n.jsx(je,{id:"confirmPassword",type:h?"text":"password",placeholder:"Confirm password",value:u,onChange:w=>f(w.target.value),disabled:b,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-confirm-password"})]})]}),y&&n.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:y}),n.jsx(Q,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:b||!c||!u,"data-testid":"button-reset",children:b?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Resetting..."]}):"Reset Password"})]})]}),n.jsx("div",{className:"mt-6 text-center text-sm text-gray-400",children:n.jsx(dr,{href:"/email-login",className:"hover:text-white transition-colors","data-testid":"link-login",children:"Back to login"})})]})})}var $u;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})($u||($u={}));var Fu;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(Fu||(Fu={}));const fa=jd("Haptics",{web:()=>yh(()=>import("./web-DHb2C4PB.js"),[]).then(e=>new e.HapticsWeb)});async function Ce(e="light"){if(Us.isNativePlatform())try{switch(e){case"light":await fa.impact({style:$u.Light});break;case"medium":await fa.impact({style:$u.Medium});break;case"heavy":await fa.impact({style:$u.Heavy});break;case"success":await fa.notification({type:Fu.Success});break;case"warning":await fa.notification({type:Fu.Warning});break;case"error":await fa.notification({type:Fu.Error});break;case"selection":await fa.selectionStart(),await fa.selectionChanged(),await fa.selectionEnd();break}}catch(t){console.warn("Haptics not available:",t)}}function D9(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState(""),[a,s]=g.useState(""),[o,l]=g.useState(!1),[c,d]=g.useState(""),[u,f]=g.useState(!1),[h,p]=g.useState(!1),y=async b=>{var x,m,j;if(b.preventDefault(),d(""),Ce("light"),!r||!r.includes("@")){d("Please enter a valid email address"),Ce("error");return}if(!a||a.length<1){d("Please enter your password"),Ce("error");return}f(!0);try{const N=await fetch(yn("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:r,password:a})}),w=await N.json();if(!N.ok){if(f(!1),w.error==="NO_PASSWORD_SET"){p(!0),Ce("warning");return}d(w.error||"Invalid email or password"),Ce("error");return}Ce("success"),w.sessionToken&&await ec(w.sessionToken),w.user&&(await tc(w.user),localStorage.setItem("mobileUserId",((x=w.user.id)==null?void 0:x.toString())||"1"),await Qn.set({key:"mobileUserId",value:((m=w.user.id)==null?void 0:m.toString())||"1"})),t({title:"Welcome back!",description:"You're now signed in"}),(j=w.user)!=null&&j.onboardingCompleted?e("/ios-chat"):e("/ios-onboarding")}catch(N){d(N.message||"Something went wrong. Please try again."),Ce("error"),t({title:"Error",description:N.message||"Failed to sign in",variant:"destructive"})}finally{f(!1)}},v=()=>{Ce("light"),e("/ios-forgot-password")};return h?n.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:n.jsxs("div",{className:"w-full max-w-sm space-y-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto bg-yellow-500/20 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),n.jsx("h2",{className:"text-xl font-bold text-white",children:"Password Not Set Up"}),n.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Your account uses email verification codes. To use the iOS app, you need to set up a password first."}),n.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Visit bjjos.app/settings to set up your password, then return here to sign in."}),n.jsx(Q,{onClick:()=>{Ce("light"),p(!1)},className:"w-full bg-white text-black hover:bg-gray-200","data-testid":"button-ok",children:"OK"})]})}):n.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:n.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[n.jsx("div",{className:"text-center",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-12 w-auto mx-auto"})}),n.jsxs("form",{onSubmit:y,className:"space-y-4",children:[n.jsx("div",{className:"space-y-2",children:n.jsx(je,{type:"email",placeholder:"Email",value:r,onChange:b=>i(b.target.value),className:"h-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg",autoComplete:"email",autoCapitalize:"none","data-testid":"input-email"})}),n.jsxs("div",{className:"space-y-2 relative",children:[n.jsx(je,{type:o?"text":"password",placeholder:"Password",value:a,onChange:b=>s(b.target.value),className:"h-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg pr-12",autoComplete:"current-password","data-testid":"input-password"}),n.jsx("button",{type:"button",onClick:()=>{Ce("light"),l(!o)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white","data-testid":"button-toggle-password",children:o?n.jsx(Ms,{className:"w-5 h-5"}):n.jsx(Mr,{className:"w-5 h-5"})})]}),c&&n.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:c}),n.jsx(Q,{type:"submit",disabled:u,className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg","data-testid":"button-sign-in",children:u?n.jsx(qe,{className:"w-5 h-5 animate-spin"}):"Sign In"})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{type:"button",onClick:v,onTouchEnd:b=>{b.preventDefault(),v()},className:"text-gray-400 text-sm hover:text-white transition-colors py-2 px-4","data-testid":"link-forgot-password",children:"Forgot password?"})}),n.jsx("div",{className:"border-t border-[#2A2A2B] pt-6",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Don't have an account?"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Visit bjjos.app to get started"})]})})]})})}function L9(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState(""),[a,s]=g.useState(""),[o,l]=g.useState(!1),c=async d=>{if(d.preventDefault(),s(""),Ce("light"),!r||!r.includes("@")){s("Please enter a valid email address"),Ce("error");return}l(!0);try{const u=await fetch(yn("/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:r.toLowerCase().trim()})}),f=await u.json();if(!u.ok){s(f.error||"Failed to send reset code"),Ce("error");return}Ce("success"),t({title:"Code sent!",description:"Check your email for the reset code"}),e(`/ios-verify-reset?email=${encodeURIComponent(r.toLowerCase().trim())}`)}catch(u){s(u.message||"Something went wrong. Please try again."),Ce("error")}finally{l(!1)}};return n.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:n.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-12 w-auto mx-auto mb-6"}),n.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Reset Password"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Enter your email and we'll send you a code to reset your password."})]}),n.jsxs("form",{onSubmit:c,className:"space-y-4",children:[n.jsx("div",{className:"space-y-2",children:n.jsx(je,{type:"email",placeholder:"Email",value:r,onChange:d=>i(d.target.value),className:"h-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg",autoComplete:"email",autoCapitalize:"none","data-testid":"input-email"})}),a&&n.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:a}),n.jsx(Q,{type:"submit",disabled:o,className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg","data-testid":"button-send-code",children:o?n.jsx(qe,{className:"w-5 h-5 animate-spin"}):"Send Reset Code"})]}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{type:"button",onClick:()=>{Ce("light"),e("/ios-login")},className:"text-gray-400 text-sm hover:text-white transition-colors inline-flex items-center gap-2","data-testid":"link-back-to-login",children:[n.jsx(Wr,{className:"w-4 h-4"}),"Back to Sign In"]})})]})})}function B9(){const[,e]=Ze(),t=p4(),{toast:r}=rt(),a=new URLSearchParams(t).get("email")||"",[s,o]=g.useState(["","","","","",""]),[l,c]=g.useState(""),[d,u]=g.useState(!1),[f,h]=g.useState(!1),p=g.useRef([]);g.useEffect(()=>{a||e("/ios-forgot-password")},[a,e]);const y=(j,N)=>{var S;if(N.length>1&&(N=N.slice(-1)),!/^\d*$/.test(N))return;const w=[...s];w[j]=N,o(w),N&&j<5&&((S=p.current[j+1])==null||S.focus())},v=(j,N)=>{var w;N.key==="Backspace"&&!s[j]&&j>0&&((w=p.current[j-1])==null||w.focus())},b=j=>{var w;j.preventDefault();const N=j.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);N.length===6&&(o(N.split("")),(w=p.current[5])==null||w.focus())},x=async j=>{j.preventDefault(),c(""),Ce("light");const N=s.join("");if(N.length!==6){c("Please enter the 6-digit code"),Ce("error");return}u(!0);try{const w=await fetch(yn("/api/auth/verify-reset-code"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a,code:N})}),S=await w.json();if(!w.ok){c(S.error||"Invalid or expired code"),Ce("error");return}Ce("success"),e(`/ios-reset-password?email=${encodeURIComponent(a)}&code=${N}`)}catch(w){c(w.message||"Something went wrong. Please try again."),Ce("error")}finally{u(!1)}},m=async()=>{h(!0),Ce("light");try{(await fetch(yn("/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a})})).ok&&(r({title:"Code resent!",description:"Check your email for the new code"}),Ce("success"))}catch{r({title:"Failed to resend",description:"Please try again",variant:"destructive"})}finally{h(!1)}};return n.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:n.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-12 w-auto mx-auto mb-6"}),n.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Enter Code"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"We sent a 6-digit code to your email."})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsx("div",{className:"flex justify-center gap-2",onPaste:b,children:s.map((j,N)=>n.jsx("input",{ref:w=>{p.current[N]=w},type:"text",inputMode:"numeric",maxLength:1,value:j,onChange:w=>y(N,w.target.value),onKeyDown:w=>v(N,w),className:"w-12 h-14 text-center text-2xl font-bold bg-[#1A1A1B] border border-[#2A2A2B] text-white rounded-lg focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none","data-testid":`input-code-${N}`},N))}),l&&n.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:l}),n.jsx(Q,{type:"submit",disabled:d,className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg","data-testid":"button-verify-code",children:d?n.jsx(qe,{className:"w-5 h-5 animate-spin"}):"Verify Code"})]}),n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("button",{type:"button",onClick:m,disabled:f,className:"text-gray-400 text-sm hover:text-white transition-colors","data-testid":"button-resend-code",children:f?"Sending...":"Didn't receive it? Send again"}),n.jsx("div",{children:n.jsxs("button",{type:"button",onClick:()=>{Ce("light"),e("/ios-forgot-password")},className:"text-gray-400 text-sm hover:text-white transition-colors inline-flex items-center gap-2","data-testid":"link-back",children:[n.jsx(Wr,{className:"w-4 h-4"}),"Back"]})})]})]})})}function z9(){const[,e]=Ze(),t=p4(),{toast:r}=rt(),i=new URLSearchParams(t),a=i.get("email")||"",s=i.get("code")||"",[o,l]=g.useState(""),[c,d]=g.useState(""),[u,f]=g.useState(!1),[h,p]=g.useState(!1),[y,v]=g.useState(""),[b,x]=g.useState(!1),[m,j]=g.useState(!1);g.useEffect(()=>{(!a||!s)&&e("/ios-forgot-password")},[a,s,e]);const N=async w=>{if(w.preventDefault(),v(""),Ce("light"),o.length<8){v("Password must be at least 8 characters"),Ce("error");return}if(o!==c){v("Passwords don't match"),Ce("error");return}x(!0);try{const S=await fetch(yn("/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a,code:s,newPassword:o})}),C=await S.json();if(!S.ok){v(C.error||"Failed to reset password"),Ce("error");return}Ce("success"),j(!0),r({title:"Password reset!",description:"You can now sign in with your new password"})}catch(S){v(S.message||"Something went wrong. Please try again."),Ce("error")}finally{x(!1)}};return m?n.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:n.jsxs("div",{className:"w-full max-w-sm space-y-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto bg-green-500/20 rounded-full flex items-center justify-center",children:n.jsx(Ii,{className:"w-8 h-8 text-green-500"})}),n.jsx("h1",{className:"text-2xl font-bold text-white",children:"Success!"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Your password has been reset. You can now sign in with your new password."}),n.jsx(Q,{onClick:()=>{Ce("light"),e("/ios-login")},className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg","data-testid":"button-back-to-login",children:"Back to Sign In"})]})}):n.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:n.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-12 w-auto mx-auto mb-6"}),n.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Set New Password"})]}),n.jsxs("form",{onSubmit:N,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2 relative",children:[n.jsx(je,{type:u?"text":"password",placeholder:"New Password",value:o,onChange:w=>l(w.target.value),className:"h-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg pr-12",autoComplete:"new-password","data-testid":"input-password"}),n.jsx("button",{type:"button",onClick:()=>{Ce("light"),f(!u)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white","data-testid":"button-toggle-password",children:u?n.jsx(Ms,{className:"w-5 h-5"}):n.jsx(Mr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-2 relative",children:[n.jsx(je,{type:h?"text":"password",placeholder:"Confirm Password",value:c,onChange:w=>d(w.target.value),className:"h-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg pr-12",autoComplete:"new-password","data-testid":"input-confirm-password"}),n.jsx("button",{type:"button",onClick:()=>{Ce("light"),p(!h)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white","data-testid":"button-toggle-confirm-password",children:h?n.jsx(Ms,{className:"w-5 h-5"}):n.jsx(Mr,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-gray-500 text-xs",children:"Password must be at least 8 characters"}),y&&n.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:y}),n.jsx(Q,{type:"submit",disabled:b,className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg","data-testid":"button-save-password",children:b?n.jsx(qe,{className:"w-5 h-5 animate-spin"}):"Save Password"})]})]})})}function q9(){const[,e]=Ze(),{toast:t}=rt(),i=new URLSearchParams(window.location.search).get("token")||"",[a,s]=g.useState(!1),[o,l]=g.useState(!0),[c,d]=g.useState(""),[u,f]=g.useState(""),[h,p]=g.useState(""),[y,v]=g.useState(""),[b,x]=g.useState(""),[m,j]=g.useState(""),[N,w]=g.useState(""),[S,C]=g.useState(""),[k,A]=g.useState(""),[E,T]=g.useState(""),[P,_]=g.useState(""),[R,O]=g.useState(!1),[$,M]=g.useState(null),[I,L]=g.useState(!1);g.useEffect(()=>{window.scrollTo(0,0),z()},[]);const z=async()=>{if(!i){l(!1),t({variant:"destructive",title:"Invalid Link",description:"No invitation token found. Please use the link from your invitation email."});return}try{const de=await(await ct("GET",`/api/auth/validate-lifetime-invite?token=${i}`)).json();de.success&&de.email?(s(!0),d(de.email)):t({variant:"destructive",title:"Invalid Invitation",description:de.error||"This invitation link is invalid or has expired."})}catch{t({variant:"destructive",title:"Error",description:"Failed to validate invitation link"})}finally{l(!1)}};g.useEffect(()=>{if(!h||h.length<3){M(null);return}const ee=setTimeout(async()=>{L(!0);try{const oe=await(await ct("POST","/api/auth/check-username",{username:h})).json();oe.available?(M(!0),A("")):(M(!1),A(oe.message||"Username is already taken"))}catch(de){console.error("Username check error:",de)}finally{L(!1)}},500);return()=>clearTimeout(ee)},[h]);const ie=()=>{let ee=!0;return u.trim()?C(""):(C("First name is required"),ee=!1),!h||h.length<3?(A("Username must be at least 3 characters"),ee=!1):/^[a-zA-Z0-9_]+$/.test(h)?$!==!0&&(A($===!1?"Username is already taken":"Please wait while we check username availability"),ee=!1):(A("Username can only contain letters, numbers, and underscores"),ee=!1),m||(t({variant:"destructive",title:"Missing Information",description:"Please select what technique you struggle with most"}),ee=!1),N||(t({variant:"destructive",title:"Missing Information",description:"Please select your primary training style"}),ee=!1),!y||y.length<8?(T("Password must be at least 8 characters"),ee=!1):T(""),y!==b?(_("Passwords do not match"),ee=!1):_(""),ee},U=async ee=>{if(ee.preventDefault(),!!ie()){if($===!1){t({variant:"destructive",title:"Username Taken",description:"Please choose a different username"});return}O(!0);try{const oe=await(await ct("POST","/api/auth/signup-with-lifetime-invite",{token:i,firstName:u.trim(),username:h.trim(),password:y,struggleArea:m,trainingFocus:N})).json();oe.success?(t({title:"Welcome to BJJ OS!",description:"Your lifetime access account has been created successfully."}),localStorage.setItem("sessionToken",oe.token),setTimeout(()=>{e("/welcome/lifetime")},1e3)):t({variant:"destructive",title:"Signup Failed",description:oe.error||"Failed to create your account. Please try again."})}catch(de){t({variant:"destructive",title:"Error",description:de.message||"Failed to create account"})}finally{O(!1)}}};return o?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(W,{className:"w-full max-w-md",children:n.jsxs(K,{className:"pt-6 text-center",children:[n.jsx(qe,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Validating your invitation..."})]})})}):a?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:n.jsxs(W,{className:"w-full max-w-md",children:[n.jsxs(X,{className:"text-center",children:[n.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:n.jsx(Ii,{className:"h-6 w-6 text-primary"})}),n.jsx(Z,{children:"Activate Lifetime Access"}),n.jsx(Be,{children:"Complete your signup to get lifetime access to BJJ OS - free forever."})]}),n.jsx(K,{children:n.jsxs("form",{onSubmit:U,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"email","data-testid":"label-email",children:"Email Address"}),n.jsx(je,{id:"email",type:"email",value:c,disabled:!0,readOnly:!0,className:"bg-muted","data-testid":"input-email"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This email is from your invitation"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"firstName","data-testid":"label-first-name",children:"First Name *"}),n.jsx(je,{id:"firstName",type:"text",value:u,onChange:ee=>f(ee.target.value),placeholder:"John",required:!0,"data-testid":"input-first-name"}),S&&n.jsx("p",{className:"text-sm text-destructive",children:S})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"username","data-testid":"label-username",children:"Username *"}),n.jsxs("div",{className:"relative",children:[n.jsx(je,{id:"username",type:"text",value:h,onChange:ee=>{p(ee.target.value.toLowerCase()),M(null),A("")},placeholder:"johndoe",required:!0,"data-testid":"input-username"}),I&&n.jsx(qe,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin text-muted-foreground"}),!I&&$===!0&&h.length>=3&&n.jsx(Ii,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-green-500"}),!I&&$===!1&&n.jsx(In,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-destructive"})]}),k&&n.jsx("p",{className:"text-sm text-destructive",children:k}),!k&&h.length>=3&&$===!0&&n.jsx("p",{className:"text-sm text-green-600",children:"Username is available"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"What technique do you struggle with most? *"}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"This helps Professor OS give you personalized guidance"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(Q,{type:"button",variant:m==="guard_passing"?"default":"outline",className:"h-auto py-3",onClick:()=>j("guard_passing"),"data-testid":"button-struggle-guard-passing",children:"Guard Passing"}),n.jsx(Q,{type:"button",variant:m==="guard_retention"?"default":"outline",className:"h-auto py-3",onClick:()=>j("guard_retention"),"data-testid":"button-struggle-guard-retention",children:"Guard Retention"}),n.jsx(Q,{type:"button",variant:m==="takedowns"?"default":"outline",className:"h-auto py-3",onClick:()=>j("takedowns"),"data-testid":"button-struggle-takedowns",children:"Takedowns"}),n.jsx(Q,{type:"button",variant:m==="submissions"?"default":"outline",className:"h-auto py-3",onClick:()=>j("submissions"),"data-testid":"button-struggle-submissions",children:"Submissions"}),n.jsx(Q,{type:"button",variant:m==="escapes"?"default":"outline",className:"h-auto py-3",onClick:()=>j("escapes"),"data-testid":"button-struggle-escapes",children:"Escapes"}),n.jsx(Q,{type:"button",variant:m==="transitions"?"default":"outline",className:"h-auto py-3",onClick:()=>j("transitions"),"data-testid":"button-struggle-transitions",children:"Transitions"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"What do you primarily train? *"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx(Q,{type:"button",variant:N==="gi"?"default":"outline",className:"h-auto py-3",onClick:()=>w("gi"),"data-testid":"button-training-gi",children:"Gi"}),n.jsx(Q,{type:"button",variant:N==="nogi"?"default":"outline",className:"h-auto py-3",onClick:()=>w("nogi"),"data-testid":"button-training-nogi",children:"No-Gi"}),n.jsx(Q,{type:"button",variant:N==="both"?"default":"outline",className:"h-auto py-3",onClick:()=>w("both"),"data-testid":"button-training-both",children:"Both"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"password","data-testid":"label-password",children:"Password *"}),n.jsx(je,{id:"password",type:"password",value:y,onChange:ee=>v(ee.target.value),placeholder:"At least 8 characters",required:!0,"data-testid":"input-password"}),E&&n.jsx("p",{className:"text-sm text-destructive",children:E})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"confirmPassword","data-testid":"label-confirm-password",children:"Confirm Password *"}),n.jsx(je,{id:"confirmPassword",type:"password",value:b,onChange:ee=>x(ee.target.value),placeholder:"Re-enter your password",required:!0,"data-testid":"input-confirm-password"}),P&&n.jsx("p",{className:"text-sm text-destructive",children:P})]}),n.jsx(Q,{type:"submit",className:"w-full",disabled:R||$!==!0||I||!m||!N,"data-testid":"button-activate-lifetime-access",children:R?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Your Account..."]}):"Activate Lifetime Access"})]})})]})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:n.jsxs(W,{className:"w-full max-w-md",children:[n.jsxs(X,{className:"text-center",children:[n.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center mb-4",children:n.jsx(In,{className:"h-6 w-6 text-destructive"})}),n.jsx(Z,{children:"Invalid Invitation"}),n.jsx(Be,{children:"This invitation link is invalid or has expired. Please contact support if you believe this is an error."})]}),n.jsx(K,{children:n.jsx(Q,{variant:"outline",className:"w-full",onClick:()=>e("/"),"data-testid":"button-back-home",children:"Back to Home"})})]})})}const U9=wd("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ae({className:e,variant:t,...r}){return n.jsx("div",{className:we(U9({variant:t}),e),...r})}function V9(){const[,e]=Ze(),t=["Unlimited Professor OS conversations","Complete curated video library (2,000+ techniques)","Personalized recommendations for your game","Training session tracking & progress","All future features & updates","Priority support"];return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-6",children:n.jsx(W,{className:"w-full max-w-2xl border-primary/20 shadow-2xl",children:n.jsxs(K,{className:"p-8 md:p-12",children:[n.jsxs("div",{className:"text-center space-y-6 mb-8",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx(rc,{className:"h-16 w-16 text-primary animate-pulse"})}),n.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Welcome to BJJ OS! "}),n.jsx("div",{className:"flex justify-center",children:n.jsx(ae,{variant:"default",className:"px-6 py-2 text-sm font-semibold tracking-wider bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",children:"LIFETIME ACCESS"})})]}),n.jsxs("div",{className:"space-y-6 mb-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Your lifetime membership includes:"}),n.jsx("div",{className:"space-y-3",children:t.map((r,i)=>n.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover-elevate border border-border/50","data-testid":`benefit-item-${i}`,children:[n.jsx("div",{className:"mt-0.5 shrink-0",children:n.jsx("div",{className:"h-5 w-5 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(_r,{className:"h-3.5 w-3.5 text-primary"})})}),n.jsx("p",{className:"text-base text-foreground",children:r})]},i))}),n.jsx("div",{className:"mt-8 p-4 rounded-lg bg-primary/10 border border-primary/20",children:n.jsx("p",{className:"text-center text-lg font-semibold text-primary",children:"No expiration. No monthly fees. Ever."})})]}),n.jsx("div",{className:"flex justify-center pt-4",children:n.jsx(Q,{size:"lg",onClick:()=>e("/onboarding"),className:"px-12 py-6 text-lg font-semibold bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90","data-testid":"button-start-training",children:"Continue "})})]})})})}const cn=g.forwardRef(({className:e,variant:t="primary",size:r="default",children:i,...a},s)=>n.jsx("button",{className:we("inline-flex items-center justify-center gap-2 rounded-xl font-semibold transition-all duration-200","disabled:opacity-50 disabled:cursor-not-allowed",r==="default"&&"px-10 py-4 text-lg",r==="lg"&&"px-12 py-5 text-xl",t==="primary"&&["bjj-gradient-bg text-white border-none","hover:-translate-y-0.5 hover:bjj-hero-shadow","active:translate-y-0"],t==="secondary"&&["bg-transparent border-2 border-[hsl(var(--bjj-primary-purple))] text-[hsl(var(--bjj-text-primary))]","hover:-translate-y-0.5 hover:bg-[hsl(var(--bjj-primary-purple)_/_0.1)]","active:translate-y-0"],t==="outline"&&["bg-transparent border-2 border-[hsl(var(--border))] text-[hsl(var(--foreground))]","hover:-translate-y-0.5 hover:border-[hsl(var(--bjj-primary-purple))]","active:translate-y-0"],e),ref:s,...a,children:i}));cn.displayName="BJJButton";function W9(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState("name"),[a,s]=g.useState(!1),{data:o}=he({queryKey:["/api/auth/me"]});g.useEffect(()=>{o&&o.onboardingCompleted&&(console.log("[ONBOARDING] User already completed onboarding, redirecting to /chat"),e("/chat"))},[o,e]);const[l,c]=g.useState(""),[d,u]=g.useState(""),[f,h]=g.useState(null),[p,y]=g.useState(!1),[v,b]=g.useState(null),[x,m]=g.useState(null),[j,N]=g.useState(null),[w,S]=g.useState(null),[C,k]=g.useState(null),A=()=>{switch(r){case"name":return 1;case"username":return 2;case"belt":return 3;case"years":return 4;case"frequency":return 5;case"struggle":return 6;case"style":return 7;default:return 1}},E=async z=>{if(!z||z.length<3){h(null);return}y(!0);try{const U=await(await ct("GET",`/api/auth/check-username?username=${encodeURIComponent(z)}`)).json();h(U.available)}catch{h(null)}finally{y(!1)}};g.useEffect(()=>{const z=setTimeout(()=>{d&&E(d)},500);return()=>clearTimeout(z)},[d]);const T=()=>{if(!l.trim()){t({title:"Name Required",description:"Please enter your first name",variant:"destructive"});return}i("username")},P=()=>{if(!d.trim()){t({title:"Username Required",description:"Please enter a username",variant:"destructive"});return}if(d.length<3){t({title:"Username Too Short",description:"Username must be at least 3 characters",variant:"destructive"});return}if(!f){t({title:"Username Unavailable",description:"This username is already taken",variant:"destructive"});return}i("belt")},_=()=>{if(!v){t({title:"Selection Required",description:"Please select your current belt level",variant:"destructive"});return}i("years")},R=()=>{if(!x){t({title:"Selection Required",description:"Please select how long you've been training",variant:"destructive"});return}i("frequency")},O=()=>{if(!j){t({title:"Selection Required",description:"Please select how often you train",variant:"destructive"});return}i("struggle")},$=()=>{if(!w){t({title:"Selection Required",description:"Please select what you struggle with most",variant:"destructive"});return}i("style")},M=async()=>{if(!C){t({title:"Selection Required",description:"Please select your training style",variant:"destructive"});return}s(!0);try{console.log("[ONBOARDING] Submitting data:",{displayName:l.trim(),username:d.trim(),beltLevel:v,yearsTrainingRange:x,trainingFrequencyText:j,struggleAreaCategory:w,style:C}),await ct("PATCH","/api/auth/profile",{displayName:l.trim(),username:d.trim(),beltLevel:v,yearsTrainingRange:x,trainingFrequencyText:j,struggleAreaCategory:w,style:C,onboardingCompleted:!0}),console.log("[ONBOARDING] Profile updated, invalidating cache and refetching..."),await Te.invalidateQueries({queryKey:["/api/auth/me"]}),await Te.refetchQueries({queryKey:["/api/auth/me"]}),console.log("[ONBOARDING] Cache refreshed, user data now has onboardingCompleted=true"),t({title:"Profile Complete!",description:"Moving to payment setup..."}),e("/payment")}catch(z){t({title:"Error",description:z.message||"Failed to save preferences",variant:"destructive"}),s(!1)}},I=()=>{r==="username"?i("name"):r==="belt"?i("username"):r==="years"?i("belt"):r==="frequency"?i("years"):r==="struggle"?i("frequency"):r==="style"&&i("struggle")},L=[{value:"guard_passing",label:"Guard Passing"},{value:"guard_retention",label:"Guard Retention"},{value:"takedowns",label:"Takedowns"},{value:"submissions",label:"Submissions"},{value:"escapes",label:"Escapes"},{value:"transitions",label:"Transitions"},{value:"other",label:"Other"}];return n.jsxs("div",{className:"onboarding-page",children:[n.jsxs("div",{className:"onboarding-container",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:n.jsx(Ed,{className:"w-16 h-16"})}),n.jsx("h1",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-[hsl(var(--bjj-primary-purple))] to-[hsl(var(--bjj-primary-blue))] bg-clip-text text-transparent",children:"Welcome to BJJ OS"}),n.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] text-lg",children:"Let's personalize your training experience"})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm text-[hsl(var(--bjj-text-secondary))]",children:["Step ",A()," of 7"]}),n.jsxs("span",{className:"text-sm text-[hsl(var(--bjj-text-secondary))]",children:[Math.round(A()/7*100),"% complete"]})]}),n.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden","data-testid":"progress-bar",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-[hsl(var(--bjj-primary-purple))] to-[hsl(var(--bjj-primary-blue))] transition-all duration-300",style:{width:`${A()/7*100}%`}})})]}),r==="name"&&n.jsxs("div",{className:"onboarding-step",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"What's your first name?"}),n.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"How should Professor OS address you?"}),n.jsx(je,{type:"text",placeholder:"Enter your first name",value:l,onChange:z=>c(z.target.value),onKeyPress:z=>z.key==="Enter"&&T(),autoFocus:!0,className:"mb-6 bg-black/50 border-white/10 text-white placeholder:text-white/40","data-testid":"input-name"}),n.jsx(cn,{onClick:T,disabled:!l.trim(),className:"w-full","data-testid":"button-next-name",children:"Continue"})]}),r==="username"&&n.jsxs("div",{className:"onboarding-step",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"Choose a username"}),n.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"Lowercase letters, numbers, and underscores only"}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(je,{type:"text",placeholder:"e.g., blackbelt123",value:d,onChange:z=>u(z.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),onKeyPress:z=>z.key==="Enter"&&P(),autoFocus:!0,className:"bg-black/50 border-white/10 text-white placeholder:text-white/40 pr-10","data-testid":"input-username"}),p&&n.jsx(qe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40 animate-spin"}),!p&&f===!0&&n.jsx(_r,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500","data-testid":"icon-username-available"}),!p&&f===!1&&n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-red-500 font-bold","data-testid":"icon-username-taken",children:""})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(cn,{variant:"outline",onClick:I,"data-testid":"button-back",children:"Back"}),n.jsx(cn,{onClick:P,disabled:!d.trim()||!f,className:"flex-1","data-testid":"button-next-username",children:"Continue"})]})]}),r==="belt"&&n.jsxs("div",{className:"onboarding-step",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"What belt are you?"}),n.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"Select your current rank"}),n.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:["white","blue","purple","brown","black"].map(z=>n.jsx("button",{onClick:()=>b(z),className:`p-4 rounded-lg border-2 transition-all ${v===z?"border-[hsl(var(--bjj-primary-purple))] bg-[hsl(var(--bjj-primary-purple))]/10":"border-white/10 bg-black/30 hover:border-white/20"}`,"data-testid":`button-belt-${z}`,children:n.jsxs("span",{className:"text-white font-medium capitalize",children:[z," Belt"]})},z))}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(cn,{variant:"outline",onClick:I,"data-testid":"button-back",children:"Back"}),n.jsx(cn,{onClick:_,disabled:!v,className:"flex-1","data-testid":"button-next-belt",children:"Continue"})]})]}),r==="years"&&n.jsxs("div",{className:"onboarding-step",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"How long have you been training?"}),n.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"Select your training experience"}),n.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:["<6mo","6mo-1yr","1-2yr","2-5yr","5-10yr","10+yr"].map(z=>n.jsx("button",{onClick:()=>m(z),className:`p-4 rounded-lg border-2 transition-all ${x===z?"border-[hsl(var(--bjj-primary-purple))] bg-[hsl(var(--bjj-primary-purple))]/10":"border-white/10 bg-black/30 hover:border-white/20"}`,"data-testid":`button-years-${z}`,children:n.jsx("span",{className:"text-white font-medium",children:z})},z))}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(cn,{variant:"outline",onClick:I,"data-testid":"button-back",children:"Back"}),n.jsx(cn,{onClick:R,disabled:!x,className:"flex-1","data-testid":"button-next-years",children:"Continue"})]})]}),r==="frequency"&&n.jsxs("div",{className:"onboarding-step",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"How often do you train?"}),n.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"Times per week"}),n.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:["1-2x","3-4x","5+x"].map(z=>n.jsx("button",{onClick:()=>N(z),className:`p-4 rounded-lg border-2 transition-all ${j===z?"border-[hsl(var(--bjj-primary-purple))] bg-[hsl(var(--bjj-primary-purple))]/10":"border-white/10 bg-black/30 hover:border-white/20"}`,"data-testid":`button-frequency-${z}`,children:n.jsxs("span",{className:"text-white font-medium",children:[z," per week"]})},z))}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(cn,{variant:"outline",onClick:I,"data-testid":"button-back",children:"Back"}),n.jsx(cn,{onClick:O,disabled:!j,className:"flex-1","data-testid":"button-next-frequency",children:"Continue"})]})]}),r==="struggle"&&n.jsxs("div",{className:"onboarding-step",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"What technique do you struggle with most?"}),n.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"This helps Professor OS give you personalized guidance"}),n.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:L.map(z=>n.jsx("button",{onClick:()=>S(z.value),className:`p-4 rounded-lg border-2 transition-all ${w===z.value?"border-[hsl(var(--bjj-primary-purple))] bg-[hsl(var(--bjj-primary-purple))]/10":"border-white/10 bg-black/30 hover:border-white/20"}`,"data-testid":`button-struggle-${z.value}`,children:n.jsx("span",{className:"text-white font-medium",children:z.label})},z.value))}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(cn,{variant:"outline",onClick:I,"data-testid":"button-back",children:"Back"}),n.jsx(cn,{onClick:$,disabled:!w,className:"flex-1","data-testid":"button-next-struggle",children:"Continue"})]})]}),r==="style"&&n.jsxs("div",{className:"onboarding-step",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"What do you primarily train?"}),n.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"Choose your training focus"}),n.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:["gi","nogi","both"].map(z=>n.jsx("button",{onClick:()=>k(z),className:`p-4 rounded-lg border-2 transition-all ${C===z?"border-[hsl(var(--bjj-primary-purple))] bg-[hsl(var(--bjj-primary-purple))]/10":"border-white/10 bg-black/30 hover:border-white/20"}`,"data-testid":`button-style-${z}`,children:n.jsx("span",{className:"text-white font-medium capitalize",children:z==="gi"?"Gi":z==="nogi"?"No-Gi":"Both"})},z))}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(cn,{variant:"outline",onClick:I,disabled:a,"data-testid":"button-back",children:"Back"}),n.jsx(cn,{onClick:M,disabled:!C||a,className:"flex-1","data-testid":"button-complete",children:a?"Saving...":"Complete Setup"})]})]})]}),n.jsx("style",{children:`
        .onboarding-page {
          min-height: 100vh;
          background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
          color: white;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 40px 20px;
        }

        .onboarding-container {
          width: 100%;
          max-width: 600px;
        }

        .onboarding-step {
          background: rgba(15, 15, 15, 0.8);
          border: 1px solid rgba(255, 255, 255, 0.05);
          border-radius: 16px;
          padding: 32px;
        }

        @media (max-width: 768px) {
          .onboarding-page {
            padding: 20px;
          }

          .onboarding-step {
            padding: 24px;
          }
        }
      `})]})}function yf(e,[t,r]){return Math.min(r,Math.max(t,e))}var H9=g.createContext(void 0);function Sh(e){const t=g.useContext(H9);return e||t||"ltr"}var Py=0;function BR(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??hC()),document.body.insertAdjacentElement("beforeend",e[1]??hC()),Py++,()=>{Py===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Py--}},[])}function hC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ty="focusScope.autoFocusOnMount",Oy="focusScope.autoFocusOnUnmount",mC={bubbles:!1,cancelable:!0},K9="FocusScope",eN=g.forwardRef((e,t)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=g.useState(null),d=ir(a),u=ir(s),f=g.useRef(null),h=at(t,v=>c(v)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(i){let v=function(j){if(p.paused||!l)return;const N=j.target;l.contains(N)?f.current=N:is(f.current,{select:!0})},b=function(j){if(p.paused||!l)return;const N=j.relatedTarget;N!==null&&(l.contains(N)||is(f.current,{select:!0}))},x=function(j){if(document.activeElement===document.body)for(const w of j)w.removedNodes.length>0&&is(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const m=new MutationObserver(x);return l&&m.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),m.disconnect()}}},[i,l,p.paused]),g.useEffect(()=>{if(l){gC.add(p);const v=document.activeElement;if(!l.contains(v)){const x=new CustomEvent(Ty,mC);l.addEventListener(Ty,d),l.dispatchEvent(x),x.defaultPrevented||(G9(Z9(zR(l)),{select:!0}),document.activeElement===v&&is(l))}return()=>{l.removeEventListener(Ty,d),setTimeout(()=>{const x=new CustomEvent(Oy,mC);l.addEventListener(Oy,u),l.dispatchEvent(x),x.defaultPrevented||is(v??document.body,{select:!0}),l.removeEventListener(Oy,u),gC.remove(p)},0)}}},[l,d,u,p]);const y=g.useCallback(v=>{if(!r&&!i||p.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(b&&x){const m=v.currentTarget,[j,N]=Y9(m);j&&N?!v.shiftKey&&x===N?(v.preventDefault(),r&&is(j,{select:!0})):v.shiftKey&&x===j&&(v.preventDefault(),r&&is(N,{select:!0})):x===m&&v.preventDefault()}},[r,i,p.paused]);return n.jsx(Ue.div,{tabIndex:-1,...o,ref:h,onKeyDown:y})});eN.displayName=K9;function G9(e,{select:t=!1}={}){const r=document.activeElement;for(const i of e)if(is(i,{select:t}),document.activeElement!==r)return}function Y9(e){const t=zR(e),r=pC(t,e),i=pC(t.reverse(),e);return[r,i]}function zR(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function pC(e,t){for(const r of e)if(!Q9(r,{upTo:t}))return r}function Q9(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function J9(e){return e instanceof HTMLInputElement&&"select"in e}function is(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&J9(e)&&t&&e.select()}}var gC=X9();function X9(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=xC(e,t),e.unshift(t)},remove(t){var r;e=xC(e,t),(r=e[0])==null||r.resume()}}}function xC(e,t){const r=[...e],i=r.indexOf(t);return i!==-1&&r.splice(i,1),r}function Z9(e){return e.filter(t=>t.tagName!=="A")}function Ux(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var eW=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},yl=new WeakMap,hm=new WeakMap,mm={},_y=0,qR=function(e){return e&&(e.host||qR(e.parentNode))},tW=function(e,t){return t.map(function(r){if(e.contains(r))return r;var i=qR(r);return i&&e.contains(i)?i:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},rW=function(e,t,r,i){var a=tW(t,Array.isArray(e)?e:[e]);mm[r]||(mm[r]=new WeakMap);var s=mm[r],o=[],l=new Set,c=new Set(a),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};a.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))u(h);else try{var p=h.getAttribute(i),y=p!==null&&p!=="false",v=(yl.get(h)||0)+1,b=(s.get(h)||0)+1;yl.set(h,v),s.set(h,b),o.push(h),v===1&&y&&hm.set(h,!0),b===1&&h.setAttribute(r,"true"),y||h.setAttribute(i,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return u(t),l.clear(),_y++,function(){o.forEach(function(f){var h=yl.get(f)-1,p=s.get(f)-1;yl.set(f,h),s.set(f,p),h||(hm.has(f)||f.removeAttribute(i),hm.delete(f)),p||f.removeAttribute(r)}),_y--,_y||(yl=new WeakMap,yl=new WeakMap,hm=new WeakMap,mm={})}},UR=function(e,t,r){r===void 0&&(r="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),a=eW(e);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live]"))),rW(i,a,r,"aria-hidden")):function(){return null}},Ki=function(){return Ki=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ki.apply(this,arguments)};function VR(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r}function nW(e,t,r){if(r||arguments.length===2)for(var i=0,a=t.length,s;i<a;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var ip="right-scroll-bar-position",ap="width-before-scroll-bar",iW="with-scroll-bars-hidden",aW="--removed-body-scroll-bar-size";function Iy(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function sW(e,t){var r=g.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(i){var a=r.value;a!==i&&(r.value=i,r.callback(i,a))}}}})[0];return r.callback=t,r.facade}var oW=typeof window<"u"?g.useLayoutEffect:g.useEffect,vC=new WeakMap;function lW(e,t){var r=sW(null,function(i){return e.forEach(function(a){return Iy(a,i)})});return oW(function(){var i=vC.get(r);if(i){var a=new Set(i),s=new Set(e),o=r.current;a.forEach(function(l){s.has(l)||Iy(l,null)}),s.forEach(function(l){a.has(l)||Iy(l,o)})}vC.set(r,e)},[e]),r}function cW(e){return e}function dW(e,t){t===void 0&&(t=cW);var r=[],i=!1,a={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var o=t(s,i);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(i=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(l){return s(l)},filter:function(){return r}}},assignMedium:function(s){i=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(s),o=r}var c=function(){var u=o;o=[],u.forEach(s)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function uW(e){e===void 0&&(e={});var t=dW(null);return t.options=Ki({async:!0,ssr:!1},e),t}var WR=function(e){var t=e.sideCar,r=VR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return g.createElement(i,Ki({},r))};WR.isSideCarExport=!0;function fW(e,t){return e.useMedium(t),WR}var HR=uW(),Ry=function(){},Vx=g.forwardRef(function(e,t){var r=g.useRef(null),i=g.useState({onScrollCapture:Ry,onWheelCapture:Ry,onTouchMoveCapture:Ry}),a=i[0],s=i[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,y=e.inert,v=e.allowPinchZoom,b=e.as,x=b===void 0?"div":b,m=e.gapMode,j=VR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=h,w=lW([r,t]),S=Ki(Ki({},j),a);return g.createElement(g.Fragment,null,u&&g.createElement(N,{sideCar:HR,removeScrollBar:d,shards:f,noIsolation:p,inert:y,setCallbacks:s,allowPinchZoom:!!v,lockRef:r,gapMode:m}),o?g.cloneElement(g.Children.only(l),Ki(Ki({},S),{ref:w})):g.createElement(x,Ki({},S,{className:c,ref:w}),l))});Vx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vx.classNames={fullWidth:ap,zeroRight:ip};var hW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function mW(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=hW();return t&&e.setAttribute("nonce",t),e}function pW(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function gW(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var xW=function(){var e=0,t=null;return{add:function(r){e==0&&(t=mW())&&(pW(t,r),gW(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vW=function(){var e=xW();return function(t,r){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},KR=function(){var e=vW(),t=function(r){var i=r.styles,a=r.dynamic;return e(i,a),null};return t},yW={left:0,top:0,right:0,gap:0},My=function(e){return parseInt(e||"",10)||0},bW=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[My(r),My(i),My(a)]},jW=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return yW;var t=bW(e),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-r+t[2]-t[0])}},wW=KR(),ac="data-scroll-locked",NW=function(e,t,r,i){var a=e.left,s=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(iW,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(l,"px ").concat(i,`;
  }
  body[`).concat(ac,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(i,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ip,` {
    right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(ap,` {
    margin-right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(ip," .").concat(ip,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(ap," .").concat(ap,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ac,`] {
    `).concat(aW,": ").concat(l,`px;
  }
`)},yC=function(){var e=parseInt(document.body.getAttribute(ac)||"0",10);return isFinite(e)?e:0},SW=function(){g.useEffect(function(){return document.body.setAttribute(ac,(yC()+1).toString()),function(){var e=yC()-1;e<=0?document.body.removeAttribute(ac):document.body.setAttribute(ac,e.toString())}},[])},kW=function(e){var t=e.noRelative,r=e.noImportant,i=e.gapMode,a=i===void 0?"margin":i;SW();var s=g.useMemo(function(){return jW(a)},[a]);return g.createElement(wW,{styles:NW(s,!t,a,r?"":"!important")})},q0=!1;if(typeof window<"u")try{var pm=Object.defineProperty({},"passive",{get:function(){return q0=!0,!0}});window.addEventListener("test",pm,pm),window.removeEventListener("test",pm,pm)}catch{q0=!1}var bl=q0?{passive:!1}:!1,CW=function(e){return e.tagName==="TEXTAREA"},GR=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!CW(e)&&r[t]==="visible")},AW=function(e){return GR(e,"overflowY")},EW=function(e){return GR(e,"overflowX")},bC=function(e,t){var r=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var a=YR(e,i);if(a){var s=QR(e,i),o=s[1],l=s[2];if(o>l)return!0}i=i.parentNode}while(i&&i!==r.body);return!1},PW=function(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;return[t,r,i]},TW=function(e){var t=e.scrollLeft,r=e.scrollWidth,i=e.clientWidth;return[t,r,i]},YR=function(e,t){return e==="v"?AW(t):EW(t)},QR=function(e,t){return e==="v"?PW(t):TW(t)},OW=function(e,t){return e==="h"&&t==="rtl"?-1:1},_W=function(e,t,r,i,a){var s=OW(e,window.getComputedStyle(t).direction),o=s*i,l=r.target,c=t.contains(l),d=!1,u=o>0,f=0,h=0;do{var p=QR(e,l),y=p[0],v=p[1],b=p[2],x=v-b-s*y;(y||x)&&YR(e,l)&&(f+=x,h+=y),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(f)<1||!a)||!u&&(Math.abs(h)<1||!a))&&(d=!0),d},gm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},jC=function(e){return[e.deltaX,e.deltaY]},wC=function(e){return e&&"current"in e?e.current:e},IW=function(e,t){return e[0]===t[0]&&e[1]===t[1]},RW=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},MW=0,jl=[];function $W(e){var t=g.useRef([]),r=g.useRef([0,0]),i=g.useRef(),a=g.useState(MW++)[0],s=g.useState(KR)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=nW([e.lockRef.current],(e.shards||[]).map(wC),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=gm(v),m=r.current,j="deltaX"in v?v.deltaX:m[0]-x[0],N="deltaY"in v?v.deltaY:m[1]-x[1],w,S=v.target,C=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in v&&C==="h"&&S.type==="range")return!1;var k=bC(C,S);if(!k)return!0;if(k?w=C:(w=C==="v"?"h":"v",k=bC(C,S)),!k)return!1;if(!i.current&&"changedTouches"in v&&(j||N)&&(i.current=w),!w)return!0;var A=i.current||w;return _W(A,b,v,A==="h"?j:N,!0)},[]),c=g.useCallback(function(v){var b=v;if(!(!jl.length||jl[jl.length-1]!==s)){var x="deltaY"in b?jC(b):gm(b),m=t.current.filter(function(w){return w.name===b.type&&(w.target===b.target||b.target===w.shadowParent)&&IW(w.delta,x)})[0];if(m&&m.should){b.cancelable&&b.preventDefault();return}if(!m){var j=(o.current.shards||[]).map(wC).filter(Boolean).filter(function(w){return w.contains(b.target)}),N=j.length>0?l(b,j[0]):!o.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),d=g.useCallback(function(v,b,x,m){var j={name:v,delta:b,target:x,should:m,shadowParent:FW(x)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(N){return N!==j})},1)},[]),u=g.useCallback(function(v){r.current=gm(v),i.current=void 0},[]),f=g.useCallback(function(v){d(v.type,jC(v),v.target,l(v,e.lockRef.current))},[]),h=g.useCallback(function(v){d(v.type,gm(v),v.target,l(v,e.lockRef.current))},[]);g.useEffect(function(){return jl.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,bl),document.addEventListener("touchmove",c,bl),document.addEventListener("touchstart",u,bl),function(){jl=jl.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,bl),document.removeEventListener("touchmove",c,bl),document.removeEventListener("touchstart",u,bl)}},[]);var p=e.removeScrollBar,y=e.inert;return g.createElement(g.Fragment,null,y?g.createElement(s,{styles:RW(a)}):null,p?g.createElement(kW,{gapMode:e.gapMode}):null)}function FW(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const DW=fW(HR,$W);var tN=g.forwardRef(function(e,t){return g.createElement(Vx,Ki({},e,{ref:t,sideCar:DW}))});tN.classNames=Vx.classNames;var LW=[" ","Enter","ArrowUp","ArrowDown"],BW=[" ","Enter"],kh="Select",[Wx,Hx,zW]=kx(kh),[Pd,oNe]=jn(kh,[zW,Mx]),Kx=Mx(),[qW,ro]=Pd(kh),[UW,VW]=Pd(kh),JR=e=>{const{__scopeSelect:t,children:r,open:i,defaultOpen:a,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:h,required:p,form:y}=e,v=Kx(t),[b,x]=g.useState(null),[m,j]=g.useState(null),[N,w]=g.useState(!1),S=Sh(d),[C=!1,k]=ra({prop:i,defaultProp:a,onChange:s}),[A,E]=ra({prop:o,defaultProp:l,onChange:c}),T=g.useRef(null),P=b?y||!!b.closest("form"):!0,[_,R]=g.useState(new Set),O=Array.from(_).map($=>$.props.value).join(";");return n.jsx(GI,{...v,children:n.jsxs(qW,{required:p,scope:t,trigger:b,onTriggerChange:x,valueNode:m,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:w,contentId:Ca(),value:A,onValueChange:E,open:C,onOpenChange:k,dir:S,triggerPointerDownPosRef:T,disabled:h,children:[n.jsx(Wx.Provider,{scope:t,children:n.jsx(UW,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback($=>{R(M=>new Set(M).add($))},[]),onNativeOptionRemove:g.useCallback($=>{R(M=>{const I=new Set(M);return I.delete($),I})},[]),children:r})}),P?n.jsxs(w5,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:A,onChange:$=>E($.target.value),disabled:h,form:y,children:[A===void 0?n.jsx("option",{value:""}):null,Array.from(_)]},O):null]})})};JR.displayName=kh;var XR="SelectTrigger",ZR=g.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:i=!1,...a}=e,s=Kx(r),o=ro(XR,r),l=o.disabled||i,c=at(t,o.onTriggerChange),d=Hx(r),u=g.useRef("touch"),[f,h,p]=N5(v=>{const b=d().filter(j=>!j.disabled),x=b.find(j=>j.value===o.value),m=S5(b,v,x);m!==void 0&&o.onValueChange(m.value)}),y=v=>{l||(o.onOpenChange(!0),p()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return n.jsx(YI,{asChild:!0,...s,children:n.jsx(Ue.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":j5(o.value)?"":void 0,...a,ref:c,onClick:Re(a.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&y(v)}),onPointerDown:Re(a.onPointerDown,v=>{u.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:Re(a.onKeyDown,v=>{const b=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(b&&v.key===" ")&&LW.includes(v.key)&&(y(),v.preventDefault())})})})});ZR.displayName=XR;var e5="SelectValue",t5=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:a,children:s,placeholder:o="",...l}=e,c=ro(e5,r),{onValueNodeHasChildrenChange:d}=c,u=s!==void 0,f=at(t,c.onValueNodeChange);return Fr(()=>{d(u)},[d,u]),n.jsx(Ue.span,{...l,ref:f,style:{pointerEvents:"none"},children:j5(c.value)?n.jsx(n.Fragment,{children:o}):s})});t5.displayName=e5;var WW="SelectIcon",r5=g.forwardRef((e,t)=>{const{__scopeSelect:r,children:i,...a}=e;return n.jsx(Ue.span,{"aria-hidden":!0,...a,ref:t,children:i||""})});r5.displayName=WW;var HW="SelectPortal",n5=e=>n.jsx(Cx,{asChild:!0,...e});n5.displayName=HW;var Xo="SelectContent",i5=g.forwardRef((e,t)=>{const r=ro(Xo,e.__scopeSelect),[i,a]=g.useState();if(Fr(()=>{a(new DocumentFragment)},[]),!r.open){const s=i;return s?ol.createPortal(n.jsx(a5,{scope:e.__scopeSelect,children:n.jsx(Wx.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),s):null}return n.jsx(s5,{...e,ref:t})});i5.displayName=Xo;var mi=10,[a5,no]=Pd(Xo),KW="SelectContentImpl",GW=Ic("SelectContent.RemoveScroll"),s5=g.forwardRef((e,t)=>{const{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:y,hideWhenDetached:v,avoidCollisions:b,...x}=e,m=ro(Xo,r),[j,N]=g.useState(null),[w,S]=g.useState(null),C=at(t,ve=>N(ve)),[k,A]=g.useState(null),[E,T]=g.useState(null),P=Hx(r),[_,R]=g.useState(!1),O=g.useRef(!1);g.useEffect(()=>{if(j)return UR(j)},[j]),BR();const $=g.useCallback(ve=>{const[ye,...ne]=P().map(J=>J.ref.current),[H]=ne.slice(-1),B=document.activeElement;for(const J of ve)if(J===B||(J==null||J.scrollIntoView({block:"nearest"}),J===ye&&w&&(w.scrollTop=0),J===H&&w&&(w.scrollTop=w.scrollHeight),J==null||J.focus(),document.activeElement!==B))return},[P,w]),M=g.useCallback(()=>$([k,j]),[$,k,j]);g.useEffect(()=>{_&&M()},[_,M]);const{onOpenChange:I,triggerPointerDownPosRef:L}=m;g.useEffect(()=>{if(j){let ve={x:0,y:0};const ye=H=>{var B,J;ve={x:Math.abs(Math.round(H.pageX)-(((B=L.current)==null?void 0:B.x)??0)),y:Math.abs(Math.round(H.pageY)-(((J=L.current)==null?void 0:J.y)??0))}},ne=H=>{ve.x<=10&&ve.y<=10?H.preventDefault():j.contains(H.target)||I(!1),document.removeEventListener("pointermove",ye),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",ne,{capture:!0})}}},[j,I,L]),g.useEffect(()=>{const ve=()=>I(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[I]);const[z,ie]=N5(ve=>{const ye=P().filter(B=>!B.disabled),ne=ye.find(B=>B.ref.current===document.activeElement),H=S5(ye,ve,ne);H&&setTimeout(()=>H.ref.current.focus())}),U=g.useCallback((ve,ye,ne)=>{const H=!O.current&&!ne;(m.value!==void 0&&m.value===ye||H)&&(A(ve),H&&(O.current=!0))},[m.value]),ee=g.useCallback(()=>j==null?void 0:j.focus(),[j]),de=g.useCallback((ve,ye,ne)=>{const H=!O.current&&!ne;(m.value!==void 0&&m.value===ye||H)&&T(ve)},[m.value]),oe=i==="popper"?U0:o5,Pe=oe===U0?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:y,hideWhenDetached:v,avoidCollisions:b}:{};return n.jsx(a5,{scope:r,content:j,viewport:w,onViewportChange:S,itemRefCallback:U,selectedItem:k,onItemLeave:ee,itemTextRefCallback:de,focusSelectedItem:M,selectedItemText:E,position:i,isPositioned:_,searchRef:z,children:n.jsx(tN,{as:GW,allowPinchZoom:!0,children:n.jsx(eN,{asChild:!0,trapped:m.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:Re(a,ve=>{var ye;(ye=m.trigger)==null||ye.focus({preventScroll:!0}),ve.preventDefault()}),children:n.jsx(bh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:n.jsx(oe,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:ve=>ve.preventDefault(),...x,...Pe,onPlaced:()=>R(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Re(x.onKeyDown,ve=>{const ye=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!ye&&ve.key.length===1&&ie(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let H=P().filter(B=>!B.disabled).map(B=>B.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const B=ve.target,J=H.indexOf(B);H=H.slice(J+1)}setTimeout(()=>$(H)),ve.preventDefault()}})})})})})})});s5.displayName=KW;var YW="SelectItemAlignedPosition",o5=g.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:i,...a}=e,s=ro(Xo,r),o=no(Xo,r),[l,c]=g.useState(null),[d,u]=g.useState(null),f=at(t,C=>u(C)),h=Hx(r),p=g.useRef(!1),y=g.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:x,focusSelectedItem:m}=o,j=g.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&d&&v&&b&&x){const C=s.trigger.getBoundingClientRect(),k=d.getBoundingClientRect(),A=s.valueNode.getBoundingClientRect(),E=x.getBoundingClientRect();if(s.dir!=="rtl"){const B=E.left-k.left,J=A.left-B,ze=C.left-J,ue=C.width+ze,Ae=Math.max(ue,k.width),Ke=window.innerWidth-mi,nt=yf(J,[mi,Math.max(mi,Ke-Ae)]);l.style.minWidth=ue+"px",l.style.left=nt+"px"}else{const B=k.right-E.right,J=window.innerWidth-A.right-B,ze=window.innerWidth-C.right-J,ue=C.width+ze,Ae=Math.max(ue,k.width),Ke=window.innerWidth-mi,nt=yf(J,[mi,Math.max(mi,Ke-Ae)]);l.style.minWidth=ue+"px",l.style.right=nt+"px"}const T=h(),P=window.innerHeight-mi*2,_=v.scrollHeight,R=window.getComputedStyle(d),O=parseInt(R.borderTopWidth,10),$=parseInt(R.paddingTop,10),M=parseInt(R.borderBottomWidth,10),I=parseInt(R.paddingBottom,10),L=O+$+_+I+M,z=Math.min(b.offsetHeight*5,L),ie=window.getComputedStyle(v),U=parseInt(ie.paddingTop,10),ee=parseInt(ie.paddingBottom,10),de=C.top+C.height/2-mi,oe=P-de,Pe=b.offsetHeight/2,ve=b.offsetTop+Pe,ye=O+$+ve,ne=L-ye;if(ye<=de){const B=T.length>0&&b===T[T.length-1].ref.current;l.style.bottom="0px";const J=d.clientHeight-v.offsetTop-v.offsetHeight,ze=Math.max(oe,Pe+(B?ee:0)+J+M),ue=ye+ze;l.style.height=ue+"px"}else{const B=T.length>0&&b===T[0].ref.current;l.style.top="0px";const ze=Math.max(de,O+v.offsetTop+(B?U:0)+Pe)+ne;l.style.height=ze+"px",v.scrollTop=ye-de+v.offsetTop}l.style.margin=`${mi}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=P+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,l,d,v,b,x,s.dir,i]);Fr(()=>j(),[j]);const[N,w]=g.useState();Fr(()=>{d&&w(window.getComputedStyle(d).zIndex)},[d]);const S=g.useCallback(C=>{C&&y.current===!0&&(j(),m==null||m(),y.current=!1)},[j,m]);return n.jsx(JW,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:S,children:n.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:n.jsx(Ue.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});o5.displayName=YW;var QW="SelectPopperPosition",U0=g.forwardRef((e,t)=>{const{__scopeSelect:r,align:i="start",collisionPadding:a=mi,...s}=e,o=Kx(r);return n.jsx(QI,{...o,...s,ref:t,align:i,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});U0.displayName=QW;var[JW,rN]=Pd(Xo,{}),V0="SelectViewport",l5=g.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:i,...a}=e,s=no(V0,r),o=rN(V0,r),l=at(t,s.onViewportChange),c=g.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),n.jsx(Wx.Slot,{scope:r,children:n.jsx(Ue.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Re(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const p=Math.abs(c.current-u.scrollTop);if(p>0){const y=window.innerHeight-mi*2,v=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),x=Math.max(v,b);if(x<y){const m=x+p,j=Math.min(y,m),N=m-j;f.style.height=j+"px",f.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});l5.displayName=V0;var c5="SelectGroup",[XW,ZW]=Pd(c5),eH=g.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,a=Ca();return n.jsx(XW,{scope:r,id:a,children:n.jsx(Ue.div,{role:"group","aria-labelledby":a,...i,ref:t})})});eH.displayName=c5;var d5="SelectLabel",u5=g.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,a=ZW(d5,r);return n.jsx(Ue.div,{id:a.id,...i,ref:t})});u5.displayName=d5;var Jp="SelectItem",[tH,f5]=Pd(Jp),h5=g.forwardRef((e,t)=>{const{__scopeSelect:r,value:i,disabled:a=!1,textValue:s,...o}=e,l=ro(Jp,r),c=no(Jp,r),d=l.value===i,[u,f]=g.useState(s??""),[h,p]=g.useState(!1),y=at(t,m=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,m,i,a)}),v=Ca(),b=g.useRef("touch"),x=()=>{a||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(tH,{scope:r,value:i,disabled:a,textId:v,isSelected:d,onItemTextChange:g.useCallback(m=>{f(j=>j||((m==null?void 0:m.textContent)??"").trim())},[]),children:n.jsx(Wx.ItemSlot,{scope:r,value:i,disabled:a,textValue:u,children:n.jsx(Ue.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:y,onFocus:Re(o.onFocus,()=>p(!0)),onBlur:Re(o.onBlur,()=>p(!1)),onClick:Re(o.onClick,()=>{b.current!=="mouse"&&x()}),onPointerUp:Re(o.onPointerUp,()=>{b.current==="mouse"&&x()}),onPointerDown:Re(o.onPointerDown,m=>{b.current=m.pointerType}),onPointerMove:Re(o.onPointerMove,m=>{var j;b.current=m.pointerType,a?(j=c.onItemLeave)==null||j.call(c):b.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(o.onPointerLeave,m=>{var j;m.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:Re(o.onKeyDown,m=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&m.key===" "||(BW.includes(m.key)&&x(),m.key===" "&&m.preventDefault())})})})})});h5.displayName=Jp;var bu="SelectItemText",m5=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:a,...s}=e,o=ro(bu,r),l=no(bu,r),c=f5(bu,r),d=VW(bu,r),[u,f]=g.useState(null),h=at(t,x=>f(x),c.onItemTextChange,x=>{var m;return(m=l.itemTextRefCallback)==null?void 0:m.call(l,x,c.value,c.disabled)}),p=u==null?void 0:u.textContent,y=g.useMemo(()=>n.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=d;return Fr(()=>(v(y),()=>b(y)),[v,b,y]),n.jsxs(n.Fragment,{children:[n.jsx(Ue.span,{id:c.textId,...s,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ol.createPortal(s.children,o.valueNode):null]})});m5.displayName=bu;var p5="SelectItemIndicator",g5=g.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return f5(p5,r).isSelected?n.jsx(Ue.span,{"aria-hidden":!0,...i,ref:t}):null});g5.displayName=p5;var W0="SelectScrollUpButton",x5=g.forwardRef((e,t)=>{const r=no(W0,e.__scopeSelect),i=rN(W0,e.__scopeSelect),[a,s]=g.useState(!1),o=at(t,i.onScrollButtonChange);return Fr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;s(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(y5,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});x5.displayName=W0;var H0="SelectScrollDownButton",v5=g.forwardRef((e,t)=>{const r=no(H0,e.__scopeSelect),i=rN(H0,e.__scopeSelect),[a,s]=g.useState(!1),o=at(t,i.onScrollButtonChange);return Fr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;s(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(y5,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});v5.displayName=H0;var y5=g.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:i,...a}=e,s=no("SelectScrollButton",r),o=g.useRef(null),l=Hx(r),c=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),Fr(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),n.jsx(Ue.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Re(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:Re(a.onPointerMove,()=>{var d;(d=s.onItemLeave)==null||d.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:Re(a.onPointerLeave,()=>{c()})})}),rH="SelectSeparator",b5=g.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return n.jsx(Ue.div,{"aria-hidden":!0,...i,ref:t})});b5.displayName=rH;var K0="SelectArrow",nH=g.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,a=Kx(r),s=ro(K0,r),o=no(K0,r);return s.open&&o.position==="popper"?n.jsx(JI,{...a,...i,ref:t}):null});nH.displayName=K0;function j5(e){return e===""||e===void 0}var w5=g.forwardRef((e,t)=>{const{value:r,...i}=e,a=g.useRef(null),s=at(t,a),o=Ux(r);return g.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const f=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(f)}},[o,r]),n.jsx(jh,{asChild:!0,children:n.jsx("select",{...i,ref:s,defaultValue:r})})});w5.displayName="BubbleSelect";function N5(e){const t=ir(e),r=g.useRef(""),i=g.useRef(0),a=g.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(i.current),d!==""&&(i.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=g.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,a,s]}function S5(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let o=iH(e,Math.max(s,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function iH(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var aH=JR,k5=ZR,sH=t5,oH=r5,lH=n5,C5=i5,cH=l5,A5=u5,E5=h5,dH=m5,uH=g5,P5=x5,T5=v5,O5=b5;const Je=aH,Xe=sH,Ye=g.forwardRef(({className:e,children:t,...r},i)=>n.jsxs(k5,{ref:i,className:we("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(oH,{asChild:!0,children:n.jsx(Fa,{className:"h-4 w-4 opacity-50"})})]}));Ye.displayName=k5.displayName;const _5=g.forwardRef(({className:e,...t},r)=>n.jsx(P5,{ref:r,className:we("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(O1,{className:"h-4 w-4"})}));_5.displayName=P5.displayName;const I5=g.forwardRef(({className:e,...t},r)=>n.jsx(T5,{ref:r,className:we("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(Fa,{className:"h-4 w-4"})}));I5.displayName=T5.displayName;const Qe=g.forwardRef(({className:e,children:t,position:r="popper",...i},a)=>n.jsx(lH,{children:n.jsxs(C5,{ref:a,className:we("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[n.jsx(_5,{}),n.jsx(cH,{className:we("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(I5,{})]})}));Qe.displayName=C5.displayName;const fH=g.forwardRef(({className:e,...t},r)=>n.jsx(A5,{ref:r,className:we("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));fH.displayName=A5.displayName;const G=g.forwardRef(({className:e,children:t,...r},i)=>n.jsxs(E5,{ref:i,className:we("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(uH,{children:n.jsx(_r,{className:"h-4 w-4"})})}),n.jsx(dH,{children:t})]}));G.displayName=E5.displayName;const hH=g.forwardRef(({className:e,...t},r)=>n.jsx(O5,{ref:r,className:we("-mx-1 my-1 h-px bg-muted",e),...t}));hH.displayName=O5.displayName;function mH(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState(1),[a,s]=g.useState(!1),[o,l]=g.useState({displayName:"",beltLevel:"",style:"",struggleAreaCategory:"",heightFeet:"",heightInches:"",weight:"",age:""}),c=()=>{const h=parseInt(o.heightFeet)||0,p=parseInt(o.heightInches)||0;if(!(h===0&&p===0))return String(h*12+p)},d=[{value:"guard_passing",label:"Guard Passing"},{value:"guard_retention",label:"Guard Retention"},{value:"submissions",label:"Submissions from Top"},{value:"escapes",label:"Escapes from Bottom"},{value:"takedowns",label:"Takedowns"},{value:"transitions",label:"Position Transitions"},{value:"other",label:"Other"}],u=async()=>{s(!0);try{await ct("PATCH","/api/auth/profile",{displayName:o.displayName,beltLevel:o.beltLevel,style:o.style,struggleAreaCategory:o.struggleAreaCategory,height:c(),weight:o.weight,age:o.age,onboardingCompleted:!0}),await Te.invalidateQueries({queryKey:["/api/auth/me"]}),t({title:"Profile Complete!",description:"Professor OS is ready to coach you."}),e(Zt()?"/ios-home":"/chat")}catch{t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}finally{s(!1)}},f=()=>{switch(r){case 1:return o.displayName.trim().length>0;case 2:return o.beltLevel.length>0;case 3:return o.style.length>0;case 4:return o.struggleAreaCategory.length>0;case 5:return!0;default:return!1}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-6",children:n.jsx(W,{className:"w-full max-w-xl border-primary/20 shadow-2xl",children:n.jsxs(K,{className:"p-8 md:p-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Step ",r," of 5"]}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(r/5*100),"%"]})]}),n.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-purple-600 transition-all duration-300",style:{width:`${r/5*100}%`}})})]}),r===1&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"What's your name?"}),n.jsx("p",{className:"text-muted-foreground",children:"This helps Professor OS address you personally"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"name",children:"First Name"}),n.jsx(je,{id:"name",type:"text",placeholder:"Enter your first name",value:o.displayName,onChange:h=>l({...o,displayName:h.target.value}),onKeyPress:h=>h.key==="Enter"&&f()&&i(2),autoFocus:!0,className:"text-lg h-12","data-testid":"input-name"})]}),n.jsxs(Q,{size:"lg",onClick:()=>i(2),disabled:!f(),className:"w-full","data-testid":"button-next-step-1",children:["Next ",n.jsx(by,{className:"ml-2 h-5 w-5"})]})]}),r===2&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"What's your belt level?"}),n.jsx("p",{className:"text-muted-foreground",children:"Helps us match techniques to your skill level"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"white",label:"White",color:"bg-white text-black hover:bg-gray-100"},{value:"blue",label:"Blue",color:"bg-blue-600 text-white hover:bg-blue-700"},{value:"purple",label:"Purple",color:"bg-purple-600 text-white hover:bg-purple-700"},{value:"brown",label:"Brown",color:"bg-amber-800 text-white hover:bg-amber-900"},{value:"black",label:"Black",color:"bg-black text-white hover:bg-gray-900 border-2 border-white/20"}].map(h=>n.jsx(Q,{variant:o.beltLevel===h.value?"default":"outline",size:"lg",onClick:()=>{l({...o,beltLevel:h.value}),setTimeout(()=>i(3),200)},className:`h-20 text-lg font-bold ${o.beltLevel===h.value?"ring-2 ring-primary ring-offset-2":h.color}`,"data-testid":`button-belt-${h.value}`,children:h.label},h.value))}),n.jsxs(Q,{variant:"ghost",onClick:()=>i(1),className:"w-full","data-testid":"button-back-step-2",children:[n.jsx(Wr,{className:"mr-2 h-5 w-5"})," Back"]})]}),r===3&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"How do you train?"}),n.jsx("p",{className:"text-muted-foreground",children:"We'll prioritize relevant content for you"})]}),n.jsx("div",{className:"space-y-3",children:[{value:"gi",label:"Gi Only",desc:"Traditional BJJ with the kimono"},{value:"nogi",label:"No-Gi Only",desc:"Grappling without the gi"},{value:"both",label:"Both Gi & No-Gi",desc:"I train in both styles"}].map(h=>n.jsxs(Q,{variant:o.style===h.value?"default":"outline",size:"lg",onClick:()=>{l({...o,style:h.value}),setTimeout(()=>i(4),200)},className:`w-full h-auto py-4 flex flex-col items-start ${o.style===h.value?"ring-2 ring-primary ring-offset-2":""}`,"data-testid":`button-style-${h.value}`,children:[n.jsx("span",{className:"text-lg font-semibold",children:h.label}),n.jsx("span",{className:"text-sm text-muted-foreground",children:h.desc})]},h.value))}),n.jsxs(Q,{variant:"ghost",onClick:()=>i(2),className:"w-full","data-testid":"button-back-step-3",children:[n.jsx(Wr,{className:"mr-2 h-5 w-5"})," Back"]})]}),r===4&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"What's your biggest struggle?"}),n.jsx("p",{className:"text-muted-foreground",children:"Professor OS will focus on helping you improve here"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"struggle",children:"Select your main challenge"}),n.jsxs(Je,{value:o.struggleAreaCategory,onValueChange:h=>l({...o,struggleAreaCategory:h}),children:[n.jsx(Ye,{className:"h-12 text-lg","data-testid":"select-struggle",children:n.jsx(Xe,{placeholder:"Choose your biggest struggle..."})}),n.jsx(Qe,{children:d.map(h=>n.jsx(G,{value:h.value,"data-testid":`option-struggle-${h.value}`,children:h.label},h.value))})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(Q,{size:"lg",onClick:()=>i(5),disabled:!f(),className:"w-full","data-testid":"button-next-step-4",children:["Next ",n.jsx(by,{className:"ml-2 h-5 w-5"})]}),n.jsxs(Q,{variant:"ghost",onClick:()=>i(3),className:"w-full","data-testid":"button-back-step-4",children:[n.jsx(Wr,{className:"mr-2 h-5 w-5"})," Back"]})]})]}),r===5&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Help us personalize more"}),n.jsx("p",{className:"text-muted-foreground",children:"Optional - but helps Professor OS give better advice"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Height (optional)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1",children:n.jsx(je,{id:"height-feet",type:"number",min:"0",max:"8",placeholder:"5",value:o.heightFeet,onChange:h=>l({...o,heightFeet:h.target.value}),className:"h-11","data-testid":"input-height-feet"})}),n.jsx("span",{className:"text-muted-foreground font-medium",children:"ft"}),n.jsx("div",{className:"flex-1",children:n.jsx(je,{id:"height-inches",type:"number",min:"0",max:"11",placeholder:"10",value:o.heightInches,onChange:h=>l({...o,heightInches:h.target.value}),className:"h-11","data-testid":"input-height-inches"})}),n.jsx("span",{className:"text-muted-foreground font-medium",children:"in"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"weight",children:"Weight (optional)"}),n.jsx(je,{id:"weight",type:"text",placeholder:"e.g., 170 lbs or 77kg",value:o.weight,onChange:h=>l({...o,weight:h.target.value}),className:"h-11","data-testid":"input-weight"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"age",children:"Age (optional)"}),n.jsx(je,{id:"age",type:"text",placeholder:"e.g., 32",value:o.age,onChange:h=>l({...o,age:h.target.value}),className:"h-11","data-testid":"input-age"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(Q,{size:"lg",onClick:u,disabled:a,className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90","data-testid":"button-complete-onboarding",children:[a?"Saving...":"Complete Setup"," ",n.jsx(by,{className:"ml-2 h-5 w-5"})]}),n.jsx(Q,{variant:"ghost",onClick:u,disabled:a,className:"w-full","data-testid":"button-skip-optional",children:"Skip optional details"}),n.jsxs(Q,{variant:"ghost",onClick:()=>i(4),disabled:a,className:"w-full","data-testid":"button-back-step-5",children:[n.jsx(Wr,{className:"mr-2 h-5 w-5"})," Back"]})]})]})]})})})}function pH(){const[,e]=Ze(),[t,r]=g.useState("loading"),[i,a]=g.useState("");return g.useEffect(()=>{(async()=>{try{const l=new URLSearchParams(window.location.search).get("token");if(!l){r("error"),a("Invalid magic link - no token provided");return}const c=await fetch(`/api/auth/magic/verify?token=${l}`),d=await c.json();if(!c.ok){r("error"),a(d.error||"Magic link verification failed");return}localStorage.setItem("token",d.token),r("success"),a("Welcome! Redirecting to your dashboard..."),setTimeout(()=>{e("/chat")},2e3)}catch(o){console.error("Magic link error:",o),r("error"),a("Something went wrong. Please try again or contact support.")}})()},[e]),n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:n.jsx(W,{className:"w-full max-w-md p-8",children:n.jsxs("div",{className:"text-center space-y-6",children:[t==="loading"&&n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-16 h-16 mx-auto animate-spin text-purple-600"}),n.jsx("h2",{className:"text-2xl font-bold",children:"Verifying Your Access..."}),n.jsx("p",{className:"text-muted-foreground",children:"Please wait while we set up your account"})]}),t==="success"&&n.jsxs(n.Fragment,{children:[n.jsx(Ii,{className:"w-16 h-16 mx-auto text-green-600"}),n.jsx("h2",{className:"text-2xl font-bold text-green-600",children:"Access Granted!"}),n.jsx("p",{className:"text-muted-foreground",children:i}),n.jsx("div",{className:"animate-pulse text-sm text-muted-foreground",children:"Redirecting to Prof. OS..."})]}),t==="error"&&n.jsxs(n.Fragment,{children:[n.jsx(Go,{className:"w-16 h-16 mx-auto text-red-600"}),n.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Access Denied"}),n.jsx("p",{className:"text-muted-foreground",children:i}),n.jsxs("div",{className:"space-y-2 pt-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Possible reasons:"}),n.jsxs("ul",{className:"text-sm text-muted-foreground text-left list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Link already used"}),n.jsx("li",{children:"Link expired (7 days max)"}),n.jsx("li",{children:"Invalid or corrupted link"})]}),n.jsx(Q,{onClick:()=>e("/"),variant:"outline",className:"mt-4","data-testid":"button-go-home",children:"Go to Homepage"})]})]})]})})})}var nN="Checkbox",[gH,lNe]=jn(nN),[xH,vH]=gH(nN),R5=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:i,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...f}=e,[h,p]=g.useState(null),y=at(t,N=>p(N)),v=g.useRef(!1),b=h?u||!!h.closest("form"):!0,[x=!1,m]=ra({prop:a,defaultProp:s,onChange:d}),j=g.useRef(x);return g.useEffect(()=>{const N=h==null?void 0:h.form;if(N){const w=()=>m(j.current);return N.addEventListener("reset",w),()=>N.removeEventListener("reset",w)}},[h,m]),n.jsxs(xH,{scope:r,state:x,disabled:l,children:[n.jsx(Ue.button,{type:"button",role:"checkbox","aria-checked":Ds(x)?"mixed":x,"aria-required":o,"data-state":F5(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onKeyDown:Re(e.onKeyDown,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:Re(e.onClick,N=>{m(w=>Ds(w)?!0:!w),b&&(v.current=N.isPropagationStopped(),v.current||N.stopPropagation())})}),b&&n.jsx(yH,{control:h,bubbles:!v.current,name:i,value:c,checked:x,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Ds(s)?!1:s})]})});R5.displayName=nN;var M5="CheckboxIndicator",$5=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:i,...a}=e,s=vH(M5,r);return n.jsx(ai,{present:i||Ds(s.state)||s.state===!0,children:n.jsx(Ue.span,{"data-state":F5(s.state),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});$5.displayName=M5;var yH=e=>{const{control:t,checked:r,bubbles:i=!0,defaultChecked:a,...s}=e,o=g.useRef(null),l=Ux(r),c=Rx(t);g.useEffect(()=>{const u=o.current,f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==r&&p){const y=new Event("click",{bubbles:i});u.indeterminate=Ds(r),p.call(u,Ds(r)?!1:r),u.dispatchEvent(y)}},[l,r,i]);const d=g.useRef(Ds(r)?!1:r);return n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...s,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ds(e){return e==="indeterminate"}function F5(e){return Ds(e)?"indeterminate":e?"checked":"unchecked"}var D5=R5,bH=$5;const Ai=g.forwardRef(({className:e,...t},r)=>n.jsx(D5,{ref:r,className:we("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(bH,{className:we("flex items-center justify-center text-current"),children:n.jsx(_r,{className:"h-4 w-4"})})}));Ai.displayName=D5.displayName;function jH(e,t){console.log(" [setAdminAuth] Setting admin authentication"),console.log("[setAdminAuth] Token length:",(e==null?void 0:e.length)||0),console.log("[setAdminAuth] ExpiresIn:",t),localStorage.setItem("adminToken",e);const r=wH(t),i=Date.now()+r;console.log("[setAdminAuth] Expiration time:",new Date(i).toLocaleString()),localStorage.setItem("adminTokenExpiration",i.toString()),console.log(" [setAdminAuth] Token and expiration saved to localStorage")}function wH(e){const t=e.match(/^(\d+)([dhms])$/);if(!t)return 7*24*60*60*1e3;const r=parseInt(t[1],10);switch(t[2]){case"d":return r*24*60*60*1e3;case"h":return r*60*60*1e3;case"m":return r*60*1e3;case"s":return r*1e3;default:return 7*24*60*60*1e3}}function NH(){localStorage.removeItem("adminToken"),localStorage.removeItem("adminTokenExpiration"),localStorage.removeItem("adminUser")}async function Ie(e,t="GET",r){const a={method:t,headers:{"Content-Type":"application/json"},credentials:"include"};r&&t!=="GET"&&(a.body=JSON.stringify(r));const s=await fetch(e,a);if(s.status===401||s.status===403)throw window.location.href="/admin/login",new Error("Session expired - please login again");if(!s.ok){const o=await s.json();throw new Error(o.error||`Request failed with status ${s.status}`)}return s.json()}function SH(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState(""),[a,s]=g.useState(!1),o=Ve({mutationFn:async c=>{const d=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});if(!d.ok){const u=await d.json();throw new Error(u.error||"Login failed")}return await d.json()},onSuccess:c=>{console.log(" [ADMIN LOGIN] Login successful, session cookie set"),c.token&&jH(c.token,c.expiresIn||"24h"),c.admin&&localStorage.setItem("adminUser",JSON.stringify(c.admin)),t({title:"Login Successful",description:"Welcome back! Session valid for 24 hours."}),console.log(" [ADMIN LOGIN] Redirecting to /admin/dashboard..."),e("/admin/dashboard")},onError:c=>{t({title:"Login Failed",description:c.message||"Invalid credentials",variant:"destructive"})}}),l=c=>{if(c.preventDefault(),!r){t({title:"Missing Information",description:"Please enter your admin password",variant:"destructive"});return}o.mutate({password:r,rememberMe:a})};return n.jsx("div",{className:"page-container min-h-screen flex items-center justify-center p-4",children:n.jsxs(W,{className:"w-full max-w-md",children:[n.jsxs(X,{className:"space-y-1 flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #2563EB 0%, #7C3AED 100%)"},children:n.jsx(Ri,{className:"w-8 h-8 text-white"})}),n.jsx(Z,{className:"text-2xl font-bold text-center",children:"BJJ OS Admin"}),n.jsx(Be,{className:"text-center",children:"Sign in to access the admin dashboard"})]}),n.jsxs(K,{children:[n.jsxs("form",{onSubmit:l,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"password",children:"Admin Password"}),n.jsx(je,{id:"password",type:"password",placeholder:"",value:r,onChange:c=>i(c.target.value),required:!0,autoFocus:!0,"data-testid":"input-admin-password"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ai,{id:"rememberMe",checked:a,onCheckedChange:c=>s(c===!0),"data-testid":"checkbox-remember-me"}),n.jsx(ce,{htmlFor:"rememberMe",className:"text-sm font-normal cursor-pointer",children:"Remember me for 30 days"})]}),n.jsx(Q,{type:"submit",className:"w-full",disabled:o.isPending,"data-testid":"button-admin-login",children:o.isPending?"Signing in...":"Sign In"})]}),n.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Yo,{className:"w-4 h-4"}),n.jsx("span",{children:"Admin access only  All actions are logged"})]})]})]})})}function kH(){const[e,t]=g.useState(!0),{data:r,isLoading:i,isError:a,error:s,refetch:o}=he({queryKey:["/api/admin/activity-24h"],queryFn:async()=>await Ie("/api/admin/activity-24h","GET"),refetchInterval:e?6e4:!1});if(g.useEffect(()=>{o()},[o]),a)return n.jsx(W,{className:"border-destructive",children:n.jsxs(K,{className:"py-12 text-center",children:[n.jsx(In,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Failed to Load Activity Data"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:s instanceof Error?s.message:"Unknown error occurred"}),n.jsx(Q,{onClick:()=>o(),variant:"outline",children:"Try Again"})]})});if(i)return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold",children:" Last 24 Hours Activity"}),n.jsx(ae,{variant:"secondary",children:"Loading..."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(c=>n.jsxs(W,{className:"animate-pulse",children:[n.jsx(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:n.jsx("div",{className:"h-4 bg-muted rounded w-24"})}),n.jsx(K,{children:n.jsx("div",{className:"h-8 bg-muted rounded w-16"})})]},c))})]});if(!r)return n.jsx(W,{children:n.jsx(K,{className:"py-12 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"No activity data available"})})});const l=({title:c,value:d,icon:u,trend:f,subtitle:h})=>n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:c}),n.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold",children:d}),h&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h}),f&&n.jsxs("div",{className:`flex items-center text-xs mt-1 ${f.isPositive?"text-green-500":"text-red-500"}`,children:[f.isPositive?"":""," ",Math.abs(f.value),"%"]})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold","data-testid":"text-activity-dashboard-title",children:" Last 24 Hours Activity"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"Real-time monitoring for beta launch"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ae,{variant:e?"default":"secondary",className:"cursor-pointer",onClick:()=>t(!e),"data-testid":"badge-auto-refresh",children:e?" Auto-refresh ON":" Auto-refresh OFF"}),n.jsxs(ae,{variant:"outline","data-testid":"badge-last-updated",children:["Updated ",new Date().toLocaleTimeString()]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(ur,{className:"w-5 h-5"}),"User Activity"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(l,{title:"Total Queries",value:r.userActivity.totalQueries,icon:$c,subtitle:"Questions asked"}),n.jsx(l,{title:"Unique Users",value:r.userActivity.uniqueUsers,icon:ur,subtitle:"Active users"}),n.jsx(l,{title:"New Signups",value:r.userActivity.newSignups,icon:sr,subtitle:"First-time users"}),n.jsx(l,{title:"Returning Users",value:r.userActivity.returningUsers,icon:Fo,subtitle:"Came back"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(ka,{className:"w-5 h-5"}),"Engagement"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(l,{title:"Videos Clicked",value:r.engagement.videosClicked,icon:ka,subtitle:"Recommendations clicked"}),n.jsx(l,{title:"Videos Watched",value:r.engagement.videosWatched,icon:ka,subtitle:">30 seconds"}),n.jsx(l,{title:"Avg Watch Time",value:`${r.engagement.avgWatchDuration}s`,icon:Da,subtitle:"Per video"}),n.jsx(l,{title:"Completion Rate",value:`${r.engagement.completionRate}%`,icon:sr,subtitle:"Clicked  Watched"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(hf,{className:"w-5 h-5"}),"System Health"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(l,{title:"Multi-Agent",value:`${r.systemHealth.multiAgentPercentage}%`,icon:hf,subtitle:`${r.systemHealth.multiAgentQueries} queries`}),n.jsx(l,{title:"Avg Response",value:`${r.systemHealth.avgResponseTime}ms`,icon:Da,subtitle:"AI response time"}),n.jsx(l,{title:"Error Rate",value:`${r.systemHealth.errorRate}%`,icon:In,subtitle:"Failed queries"}),n.jsx(l,{title:"Basic Algorithm",value:r.systemHealth.basicQueries,icon:Fo,subtitle:"Legacy queries"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Sa,{className:"w-5 h-5"}),"User Feedback"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(l,{title:"Satisfaction",value:`${r.userFeedback.satisfactionRate}%`,icon:Sa,subtitle:`${r.userFeedback.totalFeedback} ratings`}),n.jsx(l,{title:"Thumbs Up",value:r.userFeedback.thumbsUp,icon:Sa,subtitle:"Positive feedback"}),n.jsx(l,{title:"Thumbs Down",value:r.userFeedback.thumbsDown,icon:I7,subtitle:"Negative feedback"}),n.jsx(l,{title:"Total Feedback",value:r.userFeedback.totalFeedback,icon:$c,subtitle:"All ratings"})]})]})]}),r.contentPerformance.mostRecommendedVideos.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:" Most Recommended Videos (Top 5)"}),n.jsx(W,{children:n.jsx(K,{className:"p-0",children:n.jsx("div",{className:"divide-y",children:r.contentPerformance.mostRecommendedVideos.map((c,d)=>n.jsxs("div",{className:"p-4 flex items-center justify-between hover-elevate",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsxs(ae,{variant:"secondary",className:"font-bold",children:["#",d+1]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium truncate",children:c.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:c.instructor})]})]}),n.jsxs(ae,{variant:"default",children:[c.recommendCount," recommendations"]})]},c.videoId))})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:" Recent Activity (Last 20 Queries)"}),n.jsx(W,{children:n.jsx(K,{className:"p-0",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{className:"text-left text-sm",children:[n.jsx("th",{className:"p-3 font-medium",children:"Time"}),n.jsx("th",{className:"p-3 font-medium",children:"User"}),n.jsx("th",{className:"p-3 font-medium",children:"Question"}),n.jsx("th",{className:"p-3 font-medium text-center",children:"Videos"}),n.jsx("th",{className:"p-3 font-medium text-center",children:"System"}),n.jsx("th",{className:"p-3 font-medium text-center",children:"Response"})]})}),n.jsx("tbody",{className:"divide-y",children:r.recentActivity.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"p-8 text-center text-muted-foreground",children:"No recent activity"})}):r.recentActivity.map((c,d)=>n.jsxs("tr",{className:"hover-elevate",children:[n.jsx("td",{className:"p-3 text-sm",children:new Date(c.timestamp).toLocaleTimeString()}),n.jsx("td",{className:"p-3 text-sm font-mono",children:c.userAnonymized}),n.jsx("td",{className:"p-3 text-sm max-w-md truncate",title:c.question,children:c.question}),n.jsx("td",{className:"p-3 text-center",children:n.jsx(ae,{variant:"secondary",children:c.videosRecommended})}),n.jsx("td",{className:"p-3 text-center",children:n.jsx(ae,{variant:c.multiAgent?"default":"outline",children:c.multiAgent?" Multi":"Basic"})}),n.jsx("td",{className:"p-3 text-center text-sm",children:c.responseTime?`${c.responseTime}ms`:"-"})]},d))})]})})})})]})]})}function qt({children:e}){const[,t]=Ze(),{toast:r}=rt(),[i,a]=g.useState(!1),s=async()=>{NH();try{await fetch("/api/admin/logout",{method:"POST",credentials:"include"})}catch{}r({title:"Logged Out",description:"You have been securely logged out"}),t("/admin/login")},o=()=>a(!1);return n.jsxs("div",{className:"flex h-screen bg-background page-container",children:[n.jsx("button",{className:"fixed top-5 left-5 w-14 h-14 rounded-full bg-gradient-to-br from-primary to-purple-600 text-white border-none shadow-lg z-[1000] flex items-center justify-center transition-transform active:scale-95 lg:hidden",onClick:()=>a(!i),"aria-label":"Menu","data-testid":"button-floating-menu",children:i?n.jsx(Fi,{className:"w-6 h-6"}):n.jsx(S7,{className:"w-6 h-6"})}),i&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-[998] lg:hidden",onClick:o,"data-testid":"overlay-menu"}),n.jsx("aside",{className:`fixed inset-y-0 left-0 z-[999] w-[280px] bg-card border-r transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:z-auto ${i?"translate-x-0":"-translate-x-full"}`,children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"p-6 border-b",style:{marginTop:"80px"},children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #2563EB 0%, #7C3AED 100%)"},children:n.jsx("span",{className:"text-white font-bold text-lg",children:"BJJ"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-bold text-lg",children:"BJJ OS"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin Dashboard"})]})]})}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1",children:[n.jsx(Gr,{href:"/admin/dashboard",icon:n.jsx(y7,{}),label:"Dashboard",onClick:o}),n.jsx(Gr,{href:"/admin/command-center",icon:n.jsx(hf,{}),label:"Command Center",onClick:o}),n.jsx(Gr,{href:"/admin/videos",icon:n.jsx(ka,{}),label:"Videos",onClick:o}),n.jsx(Gr,{href:"/admin/users",icon:n.jsx(ur,{}),label:"Users",onClick:o}),n.jsx(Gr,{href:"/admin/analytics",icon:n.jsx(C0,{}),label:"Analytics",onClick:o}),n.jsx(Gr,{href:"/admin/lifetime-access",icon:n.jsx(Kr,{}),label:"Lifetime Access",onClick:o}),n.jsx(Gr,{href:"/admin/referrals",icon:n.jsx(uf,{}),label:"Referrals",onClick:o}),n.jsx(Gr,{href:"/admin/feedback",icon:n.jsx(Sa,{}),label:"Feedback",onClick:o}),n.jsx(Gr,{href:"/admin/chat",icon:n.jsx($c,{}),label:"Chat",onClick:o}),n.jsx(Gr,{href:"/admin/techniques",icon:n.jsx(Rs,{}),label:"Techniques",onClick:o}),n.jsx(Gr,{href:"/admin/chains",icon:n.jsx(hI,{}),label:"Chains",onClick:o}),n.jsx(Gr,{href:"/admin/instructors",icon:n.jsx(ur,{}),label:"Instructors",onClick:o}),n.jsx(Gr,{href:"/admin/partnerships",icon:n.jsx(dI,{}),label:"Partnerships",onClick:o}),n.jsx(Gr,{href:"/admin/meta",icon:n.jsx(df,{}),label:"Meta",onClick:o}),n.jsx(Gr,{href:"/admin/flagged-accounts",icon:n.jsx(Ri,{}),label:"Flagged Accounts",onClick:o})]}),n.jsx("div",{className:"p-4 border-t",children:n.jsxs(Q,{variant:"ghost",className:"w-full justify-start",onClick:s,"data-testid":"button-logout",children:[n.jsx(Nd,{className:"w-5 h-5 mr-3"}),"Logout"]})})]})}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx("header",{className:"hidden lg:flex items-center gap-4 p-4 border-b bg-card",children:n.jsx("div",{className:"flex-1",children:n.jsx("h1",{className:"text-xl font-semibold",children:"Admin Dashboard"})})}),n.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",style:{paddingTop:"80px"},children:e})]})]})}function Gr({href:e,icon:t,label:r,onClick:i}){const[a]=Ze(),s=a===e;return n.jsxs(dr,{href:e,onClick:i,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors min-h-[44px] ${s?"bg-primary text-primary-foreground":"hover:bg-muted text-muted-foreground hover:text-foreground active:bg-muted/80"}`,"data-testid":`nav-${r.toLowerCase().replace(" ","-")}`,children:[n.jsx("span",{className:"w-5 h-5",children:t}),n.jsx("span",{className:"font-medium text-base",children:r})]})}function xm(e){return e.curationStatus==="active"||e.curationRunning?{text:" Active",color:"text-green-500"}:e.curationStatus==="paused_target_reached"||e.targetReached?{text:" Target Reached",color:"text-blue-500"}:{text:" Offline",color:"text-red-500"}}function CH(){return n.jsxs(dr,{href:"/admin/command-center",className:"fixed bottom-6 right-6 bg-gradient-to-br from-primary to-purple-600 text-white px-6 py-4 rounded-full shadow-lg z-[900] flex items-center gap-2 text-base font-semibold transition-transform active:scale-95 hover:shadow-xl","data-testid":"fab-run-curation",children:[n.jsx(Zn,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:inline",children:"Run Curation"})]})}function $y({title:e,icon:t,children:r,defaultExpanded:i=!1,testId:a}){const[s,o]=g.useState(i);return n.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden","data-testid":a,children:[n.jsxs("button",{onClick:()=>o(!s),className:"w-full px-6 py-4 flex items-center justify-between bg-muted/30 hover:bg-muted/50 transition-colors active:bg-muted/70 min-h-[56px]","data-testid":`${a}-toggle`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:t}),n.jsx("h3",{className:"text-lg font-semibold text-left",children:e})]}),s?n.jsx(Fa,{className:"w-5 h-5 text-muted-foreground"}):n.jsx(rn,{className:"w-5 h-5 text-muted-foreground"})]}),s&&n.jsx("div",{className:"p-6",children:r})]})}function NC(){const{data:e,isLoading:t,isError:r,error:i,refetch:a}=he({queryKey:["/api/admin/quick-metrics"],queryFn:async()=>{const s=await fetch("/api/admin/quick-metrics",{credentials:"include",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(s.status===401)throw window.location.href="/admin/login",new Error("Authentication required");if(!s.ok){const o=await s.json().catch(()=>({}));throw new Error(o.error||`Failed to fetch metrics (${s.status})`)}return s.json()},refetchInterval:3e4,retry:2,retryDelay:1e3});return r?n.jsx(qt,{children:n.jsxs("div",{className:"text-center py-12 space-y-4",children:[n.jsx("p",{className:"text-destructive text-lg",children:"Failed to load dashboard metrics"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i instanceof Error?i.message:"Unknown error"}),n.jsxs(Q,{onClick:()=>a(),variant:"outline","data-testid":"button-retry-metrics",children:[n.jsx(Fn,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):t||!e?n.jsx(qt,{children:n.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading metrics..."})}):n.jsx(qt,{children:n.jsxs("div",{className:"space-y-4 pb-24",children:[n.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold",children:"BJJ OS Dashboard"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time curation efficiency metrics"})]}),n.jsx(Q,{variant:"outline",size:"icon",onClick:()=>a(),className:"self-start sm:self-auto","data-testid":"button-refresh-dashboard",children:n.jsx(Fn,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{className:"bg-card rounded-lg border p-5",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("span",{className:"text-3xl",children:""}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Library"}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"value-total-videos",children:e.totalVideos})]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["+",e.videosToday," today"]})]}),n.jsxs("div",{className:"bg-card rounded-lg border p-5",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("span",{className:"text-3xl",children:""}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Curation"}),n.jsx("p",{className:`text-2xl font-bold ${xm(e).color}`,"data-testid":"value-curation-status",children:xm(e).text})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.minutesSinceRun<999?`${e.minutesSinceRun}m ago`:"Never run"})]}),n.jsxs("div",{className:"bg-card rounded-lg border p-5",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("span",{className:"text-3xl",children:""}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Users"}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"value-total-users",children:e.totalUsers})]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.activeSubscriptions," subscriptions"]})]}),n.jsxs("div",{className:"bg-card rounded-lg border p-5",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("span",{className:"text-3xl",children:""}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"MRR"}),n.jsxs("p",{className:"text-2xl font-bold",children:["$",e.mrr]})]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.signedUpToday," new today"]})]})]}),n.jsx($y,{title:"Curation Efficiency (Today)",icon:"",defaultExpanded:!0,testId:"section-curation-efficiency",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Today = ",new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"short",day:"numeric",year:"numeric"})," EST"]}),n.jsxs(ae,{variant:e.curationEfficiency.status==="optimal"?"default":e.curationEfficiency.status==="strict"?"secondary":e.curationEfficiency.status==="too_strict"?"destructive":e.curationEfficiency.status==="loose"?"secondary":e.curationEfficiency.status==="too_loose"?"destructive":"outline","data-testid":"badge-efficiency-status",children:[e.curationEfficiency.status==="optimal"&&" OPTIMAL",e.curationEfficiency.status==="strict"&&" STRICT",e.curationEfficiency.status==="too_strict"&&" TOO STRICT",e.curationEfficiency.status==="loose"&&" LOOSE",e.curationEfficiency.status==="too_loose"&&" TOO LOOSE",e.curationEfficiency.status==="unknown"&&" NO DATA"]})]}),n.jsxs("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-3 md:grid-cols-5",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Discovered"}),n.jsx("p",{className:"text-2xl sm:text-3xl font-bold","data-testid":"value-discovered",children:e.curationEfficiency.discovered}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"From YouTube"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Analyzed"}),n.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-blue-500","data-testid":"value-analyzed",children:e.curationEfficiency.analyzed}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"AI processed"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Accepted"}),n.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-500","data-testid":"value-accepted",children:e.curationEfficiency.accepted}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"To library"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Rejected"}),n.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-red-500","data-testid":"value-rejected",children:e.curationEfficiency.rejected}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Quality check"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Skipped"}),n.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-500","data-testid":"value-skipped",children:e.curationEfficiency.skipped}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pre-filtered"})]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Acceptance Rate (of analyzed videos)"}),n.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-primary","data-testid":"value-acceptance-rate",children:[e.curationEfficiency.acceptanceRate.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[e.curationEfficiency.acceptanceRate<.5&&" Too strict - might miss good content",e.curationEfficiency.acceptanceRate>=.5&&e.curationEfficiency.acceptanceRate<=2&&" High quality bar",e.curationEfficiency.acceptanceRate>2&&e.curationEfficiency.acceptanceRate<=5&&" Optimal elite curation",e.curationEfficiency.acceptanceRate>5&&e.curationEfficiency.acceptanceRate<=15&&" Quality may be diluting",e.curationEfficiency.acceptanceRate>15&&" Accepting too much"]})]})]})}),n.jsx($y,{title:"System Overview",icon:"",defaultExpanded:!1,testId:"section-system-overview",children:n.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Curation Pipeline"}),n.jsx("p",{className:`font-medium text-lg ${xm(e).color}`,children:xm(e).text})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Monthly Revenue"}),n.jsxs("p",{className:"font-medium text-lg",children:["$",e.mrr]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"New Users Today"}),n.jsx("p",{className:"font-medium text-lg",children:e.signedUpToday})]})]})}),n.jsx($y,{title:"User Activity",icon:"",defaultExpanded:!1,testId:"section-activity",children:n.jsx(kH,{})}),n.jsx(CH,{})]})})}const aa=g.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:we("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));aa.displayName="Textarea";const St=g.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:we("w-full caption-bottom text-sm",e),...t})}));St.displayName="Table";const kt=g.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:we("[&_tr]:border-b",e),...t}));kt.displayName="TableHeader";const Ct=g.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:we("[&_tr:last-child]:border-0",e),...t}));Ct.displayName="TableBody";const AH=g.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:we("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));AH.displayName="TableFooter";const Se=g.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:we("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Se.displayName="TableRow";const Y=g.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:we("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Y.displayName="TableHead";const V=g.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:we("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));V.displayName="TableCell";const EH=g.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:we("mt-4 text-sm text-muted-foreground",e),...t}));EH.displayName="TableCaption";function PH(){const[e,t]=g.useState(!1),[r,i]=g.useState(""),[a,s]=g.useState(""),{toast:o}=rt(),l=Ve({mutationFn:async N=>{const S=await(await ct("POST","/api/admin/login",{password:N})).json();return S.token&&localStorage.setItem("adminToken",S.token),S},onSuccess:()=>{t(!0),o({title:"Login successful"})},onError:()=>{o({title:"Invalid password",variant:"destructive"})}}),{data:c,isLoading:d,refetch:u}=he({queryKey:["/api/admin/users"],queryFn:async()=>{const N=localStorage.getItem("adminToken"),w=await fetch("/api/admin/users?timeFilter=all&planFilter=all&statusFilter=all&beltFilter=all",{headers:{Authorization:`Bearer ${N}`}});if(!w.ok)throw new Error("Failed to fetch users");return w.json()},enabled:e}),f=Ve({mutationFn:async N=>{const w=localStorage.getItem("adminToken"),S=await fetch("/api/admin/lifetime/grant-bulk",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},body:JSON.stringify({phoneNumbers:N,reason:"Beta Tester",notes:"Launch day beta test access"})});if(!S.ok)throw new Error("Failed to grant access");return S.json()},onSuccess:N=>{Te.invalidateQueries({queryKey:["/api/admin/users"]}),s(""),o({title:"Success!",description:`Granted lifetime access to ${N.granted} users`})},onError:N=>{o({title:"Error",description:N.message,variant:"destructive"})}}),h=N=>{N.preventDefault(),l.mutate(r)},p=()=>{const N=a.split(`
`).map(w=>w.trim()).filter(w=>w.length>0);if(N.length===0){o({title:"Error",description:"Please enter at least one phone number",variant:"destructive"});return}f.mutate(N)};if(!e)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:n.jsxs(W,{className:"w-full max-w-md",children:[n.jsxs(X,{children:[n.jsx(Z,{children:" Launch Day Admin"}),n.jsx(Be,{children:"BJJ OS Beta Testing Dashboard"})]}),n.jsx(K,{children:n.jsxs("form",{onSubmit:h,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"password",children:"Admin Password"}),n.jsx(je,{id:"password",type:"password",value:r,onChange:N=>i(N.target.value),placeholder:"Enter ADMIN_PASSWORD","data-testid":"input-admin-password"})]}),n.jsx(Q,{type:"submit",className:"w-full",disabled:l.isPending,"data-testid":"button-admin-login",children:l.isPending?"Logging in...":"Login"})]})})]})});const y=(c==null?void 0:c.length)||0,v=new Date;v.setHours(0,0,0,0);const b=(c==null?void 0:c.filter(N=>new Date(N.createdAt)>=v).length)||0,x=(c==null?void 0:c.filter(N=>N.subscriptionTier==="lifetime").length)||0,m=(c==null?void 0:c.filter(N=>N.onboardingCompleted).length)||0,j=(c==null?void 0:c.slice(0,20))||[];return n.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:" Launch Day Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"BJJ OS Beta Testing - Manual Admin"})]}),n.jsx(Q,{variant:"outline",size:"icon",onClick:()=>u(),"data-testid":"button-refresh",children:n.jsx(Fn,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(W,{children:[n.jsx(X,{className:"pb-2",children:n.jsxs(Z,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(ur,{className:"w-4 h-4"}),"Total Signups"]})}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-users",children:y})})]}),n.jsxs(W,{children:[n.jsx(X,{className:"pb-2",children:n.jsxs(Z,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(Da,{className:"w-4 h-4"}),"Signups Today"]})}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-signups-today",children:b})})]}),n.jsxs(W,{children:[n.jsx(X,{className:"pb-2",children:n.jsxs(Z,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx($n,{className:"w-4 h-4"}),"Completed Onboarding"]})}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-active-users",children:m})})]}),n.jsxs(W,{children:[n.jsx(X,{className:"pb-2",children:n.jsx(Z,{className:"text-sm font-medium",children:"Lifetime Access"})}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-lifetime-users",children:x})})]})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Bulk Grant Lifetime Access"}),n.jsx(Be,{children:"Paste phone numbers (one per line) to grant lifetime access to all beta testers"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"bulk-phones",children:"Phone Numbers (E.164 format: +1XXXXXXXXXX)"}),n.jsx(aa,{id:"bulk-phones",value:a,onChange:N=>s(N.target.value),placeholder:`+15551234567
+15559876543
+15555555555`,className:"h-32 font-mono text-sm","data-testid":"textarea-bulk-phones"})]}),n.jsx(Q,{onClick:p,disabled:f.isPending||!a.trim(),"data-testid":"button-bulk-grant",children:f.isPending?"Granting Access...":"Grant All Lifetime Access"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Recent Signups (Last 20)"}),n.jsx(Be,{children:"Most recent users, newest first"})]}),n.jsx(K,{children:d?n.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Phone Number"}),n.jsx(Y,{children:"Signup Time"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{children:"Belt"}),n.jsx(Y,{children:"Access"})]})}),n.jsx(Ct,{children:j.length===0?n.jsx(Se,{children:n.jsx(V,{colSpan:5,className:"text-center text-muted-foreground",children:"No signups yet"})}):j.map(N=>n.jsxs(Se,{children:[n.jsx(V,{className:"font-mono text-sm",children:N.phoneNumber}),n.jsx(V,{className:"text-sm",children:new Date(N.createdAt).toLocaleString()}),n.jsx(V,{children:n.jsx(ae,{variant:N.onboardingCompleted?"default":"secondary",children:N.onboardingCompleted?"Completed":"Pending"})}),n.jsx(V,{className:"capitalize",children:N.beltLevel||"-"}),n.jsx(V,{children:n.jsx(ae,{variant:N.subscriptionTier==="lifetime"?"default":"outline",children:N.subscriptionTier==="lifetime"?"Lifetime":N.subscriptionStatus})})]},N.id))})]})})})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Quick SQL Queries"}),n.jsx(Be,{children:"Copy these to Replit Database  Query tab"})]}),n.jsxs(K,{className:"space-y-3",children:[n.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-xs",children:[n.jsx("p",{className:"text-muted-foreground mb-1",children:"-- Grant lifetime access to one user"}),n.jsx("code",{children:"UPDATE bjj_users SET subscription_tier = 'lifetime', subscription_status = 'active' WHERE phone_number = '+15551234567';"})]}),n.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-xs",children:[n.jsx("p",{className:"text-muted-foreground mb-1",children:"-- View signups today"}),n.jsx("code",{children:"SELECT COUNT(*) FROM bjj_users WHERE created_at >= CURRENT_DATE;"})]}),n.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-xs",children:[n.jsx("p",{className:"text-muted-foreground mb-1",children:"-- Check active users (sent messages)"}),n.jsx("code",{children:"SELECT COUNT(DISTINCT user_id) FROM conversations WHERE created_at >= CURRENT_DATE;"})]})]})]})]})})}var iN="Switch",[TH,cNe]=jn(iN),[OH,_H]=TH(iN),L5=g.forwardRef((e,t)=>{const{__scopeSwitch:r,name:i,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...f}=e,[h,p]=g.useState(null),y=at(t,j=>p(j)),v=g.useRef(!1),b=h?u||!!h.closest("form"):!0,[x=!1,m]=ra({prop:a,defaultProp:s,onChange:d});return n.jsxs(OH,{scope:r,checked:x,disabled:l,children:[n.jsx(Ue.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":q5(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onClick:Re(e.onClick,j=>{m(N=>!N),b&&(v.current=j.isPropagationStopped(),v.current||j.stopPropagation())})}),b&&n.jsx(IH,{control:h,bubbles:!v.current,name:i,value:c,checked:x,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});L5.displayName=iN;var B5="SwitchThumb",z5=g.forwardRef((e,t)=>{const{__scopeSwitch:r,...i}=e,a=_H(B5,r);return n.jsx(Ue.span,{"data-state":q5(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})});z5.displayName=B5;var IH=e=>{const{control:t,checked:r,bubbles:i=!0,...a}=e,s=g.useRef(null),o=Ux(r),l=Rx(t);return g.useEffect(()=>{const c=s.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&f){const h=new Event("click",{bubbles:i});f.call(c,r),c.dispatchEvent(h)}},[o,r,i]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:s,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function q5(e){return e?"checked":"unchecked"}var U5=L5,RH=z5;const aN=g.forwardRef(({className:e,...t},r)=>n.jsx(U5,{className:we("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:n.jsx(RH,{className:we("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));aN.displayName=U5.displayName;function MH(){const[e,t]=g.useState(""),[r,i]=g.useState("all"),[a,s]=g.useState("all"),[o,l]=g.useState("all"),[c,d]=g.useState("all"),{toast:u}=rt(),{data:f,isLoading:h,refetch:p}=he({queryKey:["/api/admin/users",{timeFilter:r,planFilter:a,statusFilter:o,beltFilter:c}],queryFn:()=>Ie(`/api/admin/users?timeFilter=${r}&planFilter=${a}&statusFilter=${o}&beltFilter=${c}`)}),y=Ve({mutationFn:async()=>{const w=await fetch("/api/admin/create-test-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`}});if(!w.ok)throw new Error("Failed to create test user");return w.json()},onSuccess:()=>{u({title:"Test User Created",description:"A demo user has been created for testing"}),Te.invalidateQueries({queryKey:["/api/admin/users"]})},onError:()=>{u({title:"Error",description:"Failed to create test user",variant:"destructive"})}}),v=Ve({mutationFn:async({userId:w,enable:S})=>{const C=await fetch(`/api/admin/users/${w}/toggle-lifetime-bypass`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify({enable:S})});if(!C.ok)throw new Error("Failed to toggle lifetime bypass");return C.json()},onSuccess:w=>{u({title:"Lifetime Bypass Updated",description:`LIFETIME code ${w.isLifetimeUser?"enabled":"disabled"} for ${w.phoneNumber}`}),Te.invalidateQueries({queryKey:["/api/admin/users"]})},onError:()=>{u({title:"Error",description:"Failed to toggle lifetime bypass",variant:"destructive"})}}),b=Ve({mutationFn:async({email:w})=>await Ie("/api/admin/lifetime/grant-instant","POST",{email:w,sendEmail:!1}),onSuccess:w=>{u({title:"Lifetime Access Granted",description:w.message}),Te.invalidateQueries({queryKey:["/api/admin/users"]})},onError:w=>{u({title:"Error",description:w.message||"Failed to grant lifetime access",variant:"destructive"})}}),x=Ve({mutationFn:async({userId:w})=>await Ie(`/api/admin/users/${w}/revoke-lifetime`,"POST",{}),onSuccess:()=>{u({title:"Lifetime Access Revoked",description:"User subscription changed to free tier"}),Te.invalidateQueries({queryKey:["/api/admin/users"]})},onError:w=>{u({title:"Error",description:w.message||"Failed to revoke lifetime access",variant:"destructive"})}}),m=(f==null?void 0:f.filter(w=>{var S,C,k;return((S=w.name)==null?void 0:S.toLowerCase().includes(e.toLowerCase()))||((C=w.email)==null?void 0:C.toLowerCase().includes(e.toLowerCase()))||((k=w.phoneNumber)==null?void 0:k.includes(e))}))||[],j=w=>{if(!f)return 0;const S=new Date;return f.filter(C=>{const k=new Date(C.createdAt);switch(w){case"24h":return S.getTime()-k.getTime()<=24*60*60*1e3;case"7d":return S.getTime()-k.getTime()<=7*24*60*60*1e3;case"30d":return S.getTime()-k.getTime()<=30*24*60*60*1e3;case"90d":return S.getTime()-k.getTime()<=90*24*60*60*1e3;case"all":return!0;default:return!0}}).length},N=w=>{const S=new Date(w);return new Date().getTime()-S.getTime()<=24*60*60*1e3};return n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold",children:"User Management"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and monitor your users"})]}),n.jsx(Q,{variant:"outline",size:"icon",onClick:()=>p(),"data-testid":"button-refresh-users",children:n.jsx(Fn,{className:"w-4 h-4"})})]}),n.jsx(W,{className:"p-1",children:n.jsx("div",{className:"flex gap-1",children:["24h","7d","30d","90d","all"].map(w=>n.jsxs(Q,{variant:r===w?"default":"ghost",onClick:()=>i(w),className:"flex-1","data-testid":`filter-time-${w}`,children:[n.jsx("span",{className:"font-medium",children:w==="24h"?"Last 24 Hours":w==="7d"?"Last 7 Days":w==="30d"?"Last 30 Days":w==="90d"?"Last 90 Days":"All Time"}),n.jsx(ae,{variant:"secondary",className:"ml-2",children:j(w)})]},w))})}),n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),n.jsx(je,{placeholder:"Search by name, email, or phone...",className:"pl-10",value:e,onChange:w=>t(w.target.value),"data-testid":"input-user-search"})]}),n.jsxs(Je,{value:a,onValueChange:s,children:[n.jsx(Ye,{className:"w-[180px]","data-testid":"select-plan-filter",children:n.jsx(Xe,{placeholder:"Plan Type"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Plans"}),n.jsx(G,{value:"sms",children:"SMS Only"}),n.jsx(G,{value:"full",children:"Full AI Package"}),n.jsx(G,{value:"lifetime",children:"Lifetime"}),n.jsx(G,{value:"free",children:"Free"})]})]}),n.jsxs(Je,{value:o,onValueChange:l,children:[n.jsx(Ye,{className:"w-[180px]","data-testid":"select-status-filter",children:n.jsx(Xe,{placeholder:"Status"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Status"}),n.jsx(G,{value:"active",children:"Active"}),n.jsx(G,{value:"trial",children:"Trial"}),n.jsx(G,{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs(Je,{value:c,onValueChange:d,children:[n.jsx(Ye,{className:"w-[180px]","data-testid":"select-belt-filter",children:n.jsx(Xe,{placeholder:"Belt Level"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Belts"}),n.jsx(G,{value:"white",children:"White Belt"}),n.jsx(G,{value:"blue",children:"Blue Belt"}),n.jsx(G,{value:"purple",children:"Purple Belt"}),n.jsx(G,{value:"brown",children:"Brown Belt"}),n.jsx(G,{value:"black",children:"Black Belt"})]})]})]}),!h&&m.length===0&&!e?n.jsx(W,{className:"p-12 text-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center",children:n.jsx(ur,{className:"w-8 h-8 text-muted-foreground"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No users yet"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Your first user will appear here when they sign up."})]}),n.jsxs(Q,{onClick:()=>y.mutate(),disabled:y.isPending,"data-testid":"button-create-test-user",children:[n.jsx(F7,{className:"w-4 h-4 mr-2"}),"Create Test User"]})]})}):n.jsx("div",{className:"rounded-lg border bg-card",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"User"}),n.jsx(Y,{children:"Email"}),n.jsx(Y,{children:"Phone"}),n.jsx(Y,{children:"Plan"}),n.jsx(Y,{children:"Belt"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{children:"LIFETIME Bypass"}),n.jsx(Y,{children:"Joined"}),n.jsx(Y,{className:"text-right",children:"Actions"})]})}),n.jsx(Ct,{children:h?n.jsx(Se,{children:n.jsx(V,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"Loading users..."})}):m.length===0?n.jsx(Se,{children:n.jsx(V,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No users found matching your filters"})}):m.map(w=>n.jsxs(Se,{children:[n.jsx(V,{className:"font-medium",children:n.jsxs("div",{className:"flex items-center gap-2",children:[w.name||"Unnamed",N(w.createdAt)&&n.jsx(ae,{variant:"default",className:"text-xs",children:"NEW"})]})}),n.jsx(V,{children:w.email||"No email"}),n.jsx(V,{children:w.phoneNumber}),n.jsx(V,{children:n.jsx(ae,{variant:w.subscriptionType==="lifetime"?"default":"secondary",children:w.subscriptionType||"free"})}),n.jsx(V,{children:w.beltLevel?n.jsx(ae,{variant:"outline",children:w.beltLevel}):n.jsx("span",{className:"text-muted-foreground",children:"-"})}),n.jsx(V,{children:n.jsx(ae,{variant:w.subscriptionStatus==="active"?"default":"secondary",children:w.subscriptionStatus||"inactive"})}),n.jsx(V,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(aN,{checked:w.isLifetimeUser||!1,onCheckedChange:S=>{v.mutate({userId:w.id,enable:S})},disabled:v.isPending,"data-testid":`toggle-lifetime-bypass-${w.id}`}),w.isLifetimeUser&&n.jsxs(ae,{variant:"default",className:"text-xs",children:[n.jsx(v7,{className:"w-3 h-3 mr-1"}),"ENABLED"]})]})}),n.jsx(V,{className:"text-muted-foreground",children:new Date(w.createdAt).toLocaleDateString()}),n.jsx(V,{className:"text-right",children:n.jsxs("div",{className:"flex justify-end gap-2",children:[w.subscriptionType!=="lifetime"?n.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>b.mutate({email:w.email}),disabled:!w.email||b.isPending,title:"Grant Lifetime Access","data-testid":`button-grant-lifetime-${w.id}`,children:n.jsx(Kr,{className:"w-4 h-4 text-yellow-500"})}):n.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>x.mutate({userId:w.id}),disabled:x.isPending,title:"Revoke Lifetime Access","data-testid":`button-revoke-lifetime-${w.id}`,children:n.jsx(Go,{className:"w-4 h-4 text-red-500"})}),n.jsx(Q,{variant:"ghost",size:"icon","data-testid":`button-view-user-${w.id}`,children:n.jsx(Mr,{className:"w-4 h-4"})}),n.jsx(Q,{variant:"ghost",size:"icon","data-testid":`button-edit-user-${w.id}`,children:n.jsx(Iu,{className:"w-4 h-4"})})]})})]},w.id))})]})})]})})}var sN="Dialog",[V5,W5]=jn(sN),[$H,Di]=V5(sN),H5=e=>{const{__scopeDialog:t,children:r,open:i,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=g.useRef(null),c=g.useRef(null),[d=!1,u]=ra({prop:i,defaultProp:a,onChange:s});return n.jsx($H,{scope:t,triggerRef:l,contentRef:c,contentId:Ca(),titleId:Ca(),descriptionId:Ca(),open:d,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(f=>!f),[u]),modal:o,children:r})};H5.displayName=sN;var K5="DialogTrigger",G5=g.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,a=Di(K5,r),s=at(t,a.triggerRef);return n.jsx(Ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":cN(a.open),...i,ref:s,onClick:Re(e.onClick,a.onOpenToggle)})});G5.displayName=K5;var oN="DialogPortal",[FH,Y5]=V5(oN,{forceMount:void 0}),Q5=e=>{const{__scopeDialog:t,forceMount:r,children:i,container:a}=e,s=Di(oN,t);return n.jsx(FH,{scope:t,forceMount:r,children:g.Children.map(i,o=>n.jsx(ai,{present:r||s.open,children:n.jsx(Cx,{asChild:!0,container:a,children:o})}))})};Q5.displayName=oN;var Xp="DialogOverlay",J5=g.forwardRef((e,t)=>{const r=Y5(Xp,e.__scopeDialog),{forceMount:i=r.forceMount,...a}=e,s=Di(Xp,e.__scopeDialog);return s.modal?n.jsx(ai,{present:i||s.open,children:n.jsx(LH,{...a,ref:t})}):null});J5.displayName=Xp;var DH=Ic("DialogOverlay.RemoveScroll"),LH=g.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,a=Di(Xp,r);return n.jsx(tN,{as:DH,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(Ue.div,{"data-state":cN(a.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),Zo="DialogContent",X5=g.forwardRef((e,t)=>{const r=Y5(Zo,e.__scopeDialog),{forceMount:i=r.forceMount,...a}=e,s=Di(Zo,e.__scopeDialog);return n.jsx(ai,{present:i||s.open,children:s.modal?n.jsx(BH,{...a,ref:t}):n.jsx(zH,{...a,ref:t})})});X5.displayName=Zo;var BH=g.forwardRef((e,t)=>{const r=Di(Zo,e.__scopeDialog),i=g.useRef(null),a=at(t,r.contentRef,i);return g.useEffect(()=>{const s=i.current;if(s)return UR(s)},[]),n.jsx(Z5,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Re(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:Re(e.onFocusOutside,s=>s.preventDefault())})}),zH=g.forwardRef((e,t)=>{const r=Di(Zo,e.__scopeDialog),i=g.useRef(!1),a=g.useRef(!1);return n.jsx(Z5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(i.current||(l=r.triggerRef.current)==null||l.focus(),s.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:s=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),Z5=g.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,l=Di(Zo,r),c=g.useRef(null),d=at(t,c);return BR(),n.jsxs(n.Fragment,{children:[n.jsx(eN,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:a,onUnmountAutoFocus:s,children:n.jsx(bh,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":cN(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(UH,{titleId:l.titleId}),n.jsx(WH,{contentRef:c,descriptionId:l.descriptionId})]})]})}),lN="DialogTitle",eM=g.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,a=Di(lN,r);return n.jsx(Ue.h2,{id:a.titleId,...i,ref:t})});eM.displayName=lN;var tM="DialogDescription",rM=g.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,a=Di(tM,r);return n.jsx(Ue.p,{id:a.descriptionId,...i,ref:t})});rM.displayName=tM;var nM="DialogClose",iM=g.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,a=Di(nM,r);return n.jsx(Ue.button,{type:"button",...i,ref:t,onClick:Re(e.onClick,()=>a.onOpenChange(!1))})});iM.displayName=nM;function cN(e){return e?"open":"closed"}var aM="DialogTitleWarning",[qH,sM]=wz(aM,{contentName:Zo,titleName:lN,docsSlug:"dialog"}),UH=({titleId:e})=>{const t=sM(aM),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},VH="DialogDescriptionWarning",WH=({contentRef:e,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sM(VH).contentName}}.`;return g.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(i))},[i,e,t]),null},dN=H5,oM=G5,uN=Q5,Ch=J5,Ah=X5,Eh=eM,Ph=rM,Th=iM;const Ar=dN,bf=oM,HH=uN,KH=Th,lM=g.forwardRef(({className:e,...t},r)=>n.jsx(Ch,{ref:r,className:we("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));lM.displayName=Ch.displayName;const yr=g.forwardRef(({className:e,children:t,...r},i)=>n.jsxs(HH,{children:[n.jsx(lM,{}),n.jsxs(Ah,{ref:i,className:we("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(Th,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(Fi,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yr.displayName=Ah.displayName;const br=({className:e,...t})=>n.jsx("div",{className:we("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});br.displayName="DialogHeader";const Ys=({className:e,...t})=>n.jsx("div",{className:we("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ys.displayName="DialogFooter";const jr=g.forwardRef(({className:e,...t},r)=>n.jsx(Eh,{ref:r,className:we("text-lg font-semibold leading-none tracking-tight",e),...t}));jr.displayName=Eh.displayName;const sn=g.forwardRef(({className:e,...t},r)=>n.jsx(Ph,{ref:r,className:we("text-sm text-muted-foreground",e),...t}));sn.displayName=Ph.displayName;var Fy="rovingFocusGroup.onEntryFocus",GH={bubbles:!1,cancelable:!0},Gx="RovingFocusGroup",[G0,cM,YH]=kx(Gx),[QH,dM]=jn(Gx,[YH]),[JH,XH]=QH(Gx),uM=g.forwardRef((e,t)=>n.jsx(G0.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(G0.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(ZH,{...e,ref:t})})}));uM.displayName=Gx;var ZH=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=e,h=g.useRef(null),p=at(t,h),y=Sh(s),[v=null,b]=ra({prop:o,defaultProp:l,onChange:c}),[x,m]=g.useState(!1),j=ir(d),N=cM(r),w=g.useRef(!1),[S,C]=g.useState(0);return g.useEffect(()=>{const k=h.current;if(k)return k.addEventListener(Fy,j),()=>k.removeEventListener(Fy,j)},[j]),n.jsx(JH,{scope:r,orientation:i,dir:y,loop:a,currentTabStopId:v,onItemFocus:g.useCallback(k=>b(k),[b]),onItemShiftTab:g.useCallback(()=>m(!0),[]),onFocusableItemAdd:g.useCallback(()=>C(k=>k+1),[]),onFocusableItemRemove:g.useCallback(()=>C(k=>k-1),[]),children:n.jsx(Ue.div,{tabIndex:x||S===0?-1:0,"data-orientation":i,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:Re(e.onMouseDown,()=>{w.current=!0}),onFocus:Re(e.onFocus,k=>{const A=!w.current;if(k.target===k.currentTarget&&A&&!x){const E=new CustomEvent(Fy,GH);if(k.currentTarget.dispatchEvent(E),!E.defaultPrevented){const T=N().filter($=>$.focusable),P=T.find($=>$.active),_=T.find($=>$.id===v),O=[P,_,...T].filter(Boolean).map($=>$.ref.current);mM(O,u)}}w.current=!1}),onBlur:Re(e.onBlur,()=>m(!1))})})}),fM="RovingFocusGroupItem",hM=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:a=!1,tabStopId:s,...o}=e,l=Ca(),c=s||l,d=XH(fM,r),u=d.currentTabStopId===c,f=cM(r),{onFocusableItemAdd:h,onFocusableItemRemove:p}=d;return g.useEffect(()=>{if(i)return h(),()=>p()},[i,h,p]),n.jsx(G0.ItemSlot,{scope:r,id:c,focusable:i,active:a,children:n.jsx(Ue.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Re(e.onMouseDown,y=>{i?d.onItemFocus(c):y.preventDefault()}),onFocus:Re(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Re(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=rK(y,d.orientation,d.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let x=f().filter(m=>m.focusable).map(m=>m.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const m=x.indexOf(y.currentTarget);x=d.loop?nK(x,m+1):x.slice(m+1)}setTimeout(()=>mM(x))}})})})});hM.displayName=fM;var eK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tK(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function rK(e,t,r){const i=tK(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return eK[i]}function mM(e,t=!1){const r=document.activeElement;for(const i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}function nK(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var iK=uM,aK=hM,fN="Tabs",[sK,dNe]=jn(fN,[dM]),pM=dM(),[oK,hN]=sK(fN),gM=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Sh(l),[f,h]=ra({prop:i,onChange:a,defaultProp:s});return n.jsx(oK,{scope:r,baseId:Ca(),value:f,onValueChange:h,orientation:o,dir:u,activationMode:c,children:n.jsx(Ue.div,{dir:u,"data-orientation":o,...d,ref:t})})});gM.displayName=fN;var xM="TabsList",vM=g.forwardRef((e,t)=>{const{__scopeTabs:r,loop:i=!0,...a}=e,s=hN(xM,r),o=pM(r);return n.jsx(iK,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:n.jsx(Ue.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});vM.displayName=xM;var yM="TabsTrigger",bM=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,disabled:a=!1,...s}=e,o=hN(yM,r),l=pM(r),c=NM(o.baseId,i),d=SM(o.baseId,i),u=i===o.value;return n.jsx(aK,{asChild:!0,...l,focusable:!a,active:u,children:n.jsx(Ue.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...s,ref:t,onMouseDown:Re(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(i):f.preventDefault()}),onKeyDown:Re(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(i)}),onFocus:Re(e.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!a&&f&&o.onValueChange(i)})})})});bM.displayName=yM;var jM="TabsContent",wM=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,forceMount:a,children:s,...o}=e,l=hN(jM,r),c=NM(l.baseId,i),d=SM(l.baseId,i),u=i===l.value,f=g.useRef(u);return g.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),n.jsx(ai,{present:a||u,children:({present:h})=>n.jsx(Ue.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&s})})});wM.displayName=jM;function NM(e,t){return`${e}-trigger-${t}`}function SM(e,t){return`${e}-content-${t}`}var lK=gM,kM=vM,CM=bM,AM=wM;const cl=lK,io=g.forwardRef(({className:e,...t},r)=>n.jsx(kM,{ref:r,className:we("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));io.displayName=kM.displayName;const er=g.forwardRef(({className:e,...t},r)=>n.jsx(CM,{ref:r,className:we("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));er.displayName=CM.displayName;const tr=g.forwardRef(({className:e,...t},r)=>n.jsx(AM,{ref:r,className:we("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));tr.displayName=AM.displayName;var cK=Array.isArray,wn=cK,dK=typeof Wh=="object"&&Wh&&Wh.Object===Object&&Wh,EM=dK,uK=EM,fK=typeof self=="object"&&self&&self.Object===Object&&self,hK=uK||fK||Function("return this")(),la=hK,mK=la,pK=mK.Symbol,Oh=pK,SC=Oh,PM=Object.prototype,gK=PM.hasOwnProperty,xK=PM.toString,ru=SC?SC.toStringTag:void 0;function vK(e){var t=gK.call(e,ru),r=e[ru];try{e[ru]=void 0;var i=!0}catch{}var a=xK.call(e);return i&&(t?e[ru]=r:delete e[ru]),a}var yK=vK,bK=Object.prototype,jK=bK.toString;function wK(e){return jK.call(e)}var NK=wK,kC=Oh,SK=yK,kK=NK,CK="[object Null]",AK="[object Undefined]",CC=kC?kC.toStringTag:void 0;function EK(e){return e==null?e===void 0?AK:CK:CC&&CC in Object(e)?SK(e):kK(e)}var Ga=EK;function PK(e){return e!=null&&typeof e=="object"}var Ya=PK,TK=Ga,OK=Ya,_K="[object Symbol]";function IK(e){return typeof e=="symbol"||OK(e)&&TK(e)==_K}var Td=IK,RK=wn,MK=Td,$K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,FK=/^\w*$/;function DK(e,t){if(RK(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||MK(e)?!0:FK.test(e)||!$K.test(e)||t!=null&&e in Object(t)}var mN=DK;function LK(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ao=LK;const Od=It(ao);var BK=Ga,zK=ao,qK="[object AsyncFunction]",UK="[object Function]",VK="[object GeneratorFunction]",WK="[object Proxy]";function HK(e){if(!zK(e))return!1;var t=BK(e);return t==UK||t==VK||t==qK||t==WK}var pN=HK;const ot=It(pN);var KK=la,GK=KK["__core-js_shared__"],YK=GK,Dy=YK,AC=function(){var e=/[^.]+$/.exec(Dy&&Dy.keys&&Dy.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function QK(e){return!!AC&&AC in e}var JK=QK,XK=Function.prototype,ZK=XK.toString;function eG(e){if(e!=null){try{return ZK.call(e)}catch{}try{return e+""}catch{}}return""}var TM=eG,tG=pN,rG=JK,nG=ao,iG=TM,aG=/[\\^$.*+?()[\]{}|]/g,sG=/^\[object .+?Constructor\]$/,oG=Function.prototype,lG=Object.prototype,cG=oG.toString,dG=lG.hasOwnProperty,uG=RegExp("^"+cG.call(dG).replace(aG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fG(e){if(!nG(e)||rG(e))return!1;var t=tG(e)?uG:sG;return t.test(iG(e))}var hG=fG;function mG(e,t){return e==null?void 0:e[t]}var pG=mG,gG=hG,xG=pG;function vG(e,t){var r=xG(e,t);return gG(r)?r:void 0}var dl=vG,yG=dl,bG=yG(Object,"create"),Yx=bG,EC=Yx;function jG(){this.__data__=EC?EC(null):{},this.size=0}var wG=jG;function NG(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var SG=NG,kG=Yx,CG="__lodash_hash_undefined__",AG=Object.prototype,EG=AG.hasOwnProperty;function PG(e){var t=this.__data__;if(kG){var r=t[e];return r===CG?void 0:r}return EG.call(t,e)?t[e]:void 0}var TG=PG,OG=Yx,_G=Object.prototype,IG=_G.hasOwnProperty;function RG(e){var t=this.__data__;return OG?t[e]!==void 0:IG.call(t,e)}var MG=RG,$G=Yx,FG="__lodash_hash_undefined__";function DG(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$G&&t===void 0?FG:t,this}var LG=DG,BG=wG,zG=SG,qG=TG,UG=MG,VG=LG;function _d(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}_d.prototype.clear=BG;_d.prototype.delete=zG;_d.prototype.get=qG;_d.prototype.has=UG;_d.prototype.set=VG;var WG=_d;function HG(){this.__data__=[],this.size=0}var KG=HG;function GG(e,t){return e===t||e!==e&&t!==t}var gN=GG,YG=gN;function QG(e,t){for(var r=e.length;r--;)if(YG(e[r][0],t))return r;return-1}var Qx=QG,JG=Qx,XG=Array.prototype,ZG=XG.splice;function eY(e){var t=this.__data__,r=JG(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():ZG.call(t,r,1),--this.size,!0}var tY=eY,rY=Qx;function nY(e){var t=this.__data__,r=rY(t,e);return r<0?void 0:t[r][1]}var iY=nY,aY=Qx;function sY(e){return aY(this.__data__,e)>-1}var oY=sY,lY=Qx;function cY(e,t){var r=this.__data__,i=lY(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var dY=cY,uY=KG,fY=tY,hY=iY,mY=oY,pY=dY;function Id(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Id.prototype.clear=uY;Id.prototype.delete=fY;Id.prototype.get=hY;Id.prototype.has=mY;Id.prototype.set=pY;var Jx=Id,gY=dl,xY=la,vY=gY(xY,"Map"),xN=vY,PC=WG,yY=Jx,bY=xN;function jY(){this.size=0,this.__data__={hash:new PC,map:new(bY||yY),string:new PC}}var wY=jY;function NY(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var SY=NY,kY=SY;function CY(e,t){var r=e.__data__;return kY(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Xx=CY,AY=Xx;function EY(e){var t=AY(this,e).delete(e);return this.size-=t?1:0,t}var PY=EY,TY=Xx;function OY(e){return TY(this,e).get(e)}var _Y=OY,IY=Xx;function RY(e){return IY(this,e).has(e)}var MY=RY,$Y=Xx;function FY(e,t){var r=$Y(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var DY=FY,LY=wY,BY=PY,zY=_Y,qY=MY,UY=DY;function Rd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Rd.prototype.clear=LY;Rd.prototype.delete=BY;Rd.prototype.get=zY;Rd.prototype.has=qY;Rd.prototype.set=UY;var vN=Rd,OM=vN,VY="Expected a function";function yN(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(VY);var r=function(){var i=arguments,a=t?t.apply(this,i):i[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,i);return r.cache=s.set(a,o)||s,o};return r.cache=new(yN.Cache||OM),r}yN.Cache=OM;var _M=yN;const WY=It(_M);var HY=_M,KY=500;function GY(e){var t=HY(e,function(i){return r.size===KY&&r.clear(),i}),r=t.cache;return t}var YY=GY,QY=YY,JY=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,XY=/\\(\\)?/g,ZY=QY(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(JY,function(r,i,a,s){t.push(a?s.replace(XY,"$1"):i||r)}),t}),eQ=ZY;function tQ(e,t){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}var bN=tQ,TC=Oh,rQ=bN,nQ=wn,iQ=Td,aQ=1/0,OC=TC?TC.prototype:void 0,_C=OC?OC.toString:void 0;function IM(e){if(typeof e=="string")return e;if(nQ(e))return rQ(e,IM)+"";if(iQ(e))return _C?_C.call(e):"";var t=e+"";return t=="0"&&1/e==-aQ?"-0":t}var sQ=IM,oQ=sQ;function lQ(e){return e==null?"":oQ(e)}var RM=lQ,cQ=wn,dQ=mN,uQ=eQ,fQ=RM;function hQ(e,t){return cQ(e)?e:dQ(e,t)?[e]:uQ(fQ(e))}var MM=hQ,mQ=Td,pQ=1/0;function gQ(e){if(typeof e=="string"||mQ(e))return e;var t=e+"";return t=="0"&&1/e==-pQ?"-0":t}var Zx=gQ,xQ=MM,vQ=Zx;function yQ(e,t){t=xQ(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[vQ(t[r++])];return r&&r==i?e:void 0}var jN=yQ,bQ=jN;function jQ(e,t,r){var i=e==null?void 0:bQ(e,t);return i===void 0?r:i}var $M=jQ;const ei=It($M);function wQ(e){return e==null}var NQ=wQ;const ft=It(NQ);var SQ=Ga,kQ=wn,CQ=Ya,AQ="[object String]";function EQ(e){return typeof e=="string"||!kQ(e)&&CQ(e)&&SQ(e)==AQ}var PQ=EQ;const _h=It(PQ);var FM={exports:{}},Tt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN=Symbol.for("react.element"),NN=Symbol.for("react.portal"),ev=Symbol.for("react.fragment"),tv=Symbol.for("react.strict_mode"),rv=Symbol.for("react.profiler"),nv=Symbol.for("react.provider"),iv=Symbol.for("react.context"),TQ=Symbol.for("react.server_context"),av=Symbol.for("react.forward_ref"),sv=Symbol.for("react.suspense"),ov=Symbol.for("react.suspense_list"),lv=Symbol.for("react.memo"),cv=Symbol.for("react.lazy"),OQ=Symbol.for("react.offscreen"),DM;DM=Symbol.for("react.module.reference");function oi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wN:switch(e=e.type,e){case ev:case rv:case tv:case sv:case ov:return e;default:switch(e=e&&e.$$typeof,e){case TQ:case iv:case av:case cv:case lv:case nv:return e;default:return t}}case NN:return t}}}Tt.ContextConsumer=iv;Tt.ContextProvider=nv;Tt.Element=wN;Tt.ForwardRef=av;Tt.Fragment=ev;Tt.Lazy=cv;Tt.Memo=lv;Tt.Portal=NN;Tt.Profiler=rv;Tt.StrictMode=tv;Tt.Suspense=sv;Tt.SuspenseList=ov;Tt.isAsyncMode=function(){return!1};Tt.isConcurrentMode=function(){return!1};Tt.isContextConsumer=function(e){return oi(e)===iv};Tt.isContextProvider=function(e){return oi(e)===nv};Tt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wN};Tt.isForwardRef=function(e){return oi(e)===av};Tt.isFragment=function(e){return oi(e)===ev};Tt.isLazy=function(e){return oi(e)===cv};Tt.isMemo=function(e){return oi(e)===lv};Tt.isPortal=function(e){return oi(e)===NN};Tt.isProfiler=function(e){return oi(e)===rv};Tt.isStrictMode=function(e){return oi(e)===tv};Tt.isSuspense=function(e){return oi(e)===sv};Tt.isSuspenseList=function(e){return oi(e)===ov};Tt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ev||e===rv||e===tv||e===sv||e===ov||e===OQ||typeof e=="object"&&e!==null&&(e.$$typeof===cv||e.$$typeof===lv||e.$$typeof===nv||e.$$typeof===iv||e.$$typeof===av||e.$$typeof===DM||e.getModuleId!==void 0)};Tt.typeOf=oi;FM.exports=Tt;var _Q=FM.exports,IQ=Ga,RQ=Ya,MQ="[object Number]";function $Q(e){return typeof e=="number"||RQ(e)&&IQ(e)==MQ}var LM=$Q;const FQ=It(LM);var DQ=LM;function LQ(e){return DQ(e)&&e!=+e}var BQ=LQ;const Ih=It(BQ);var Ei=function(t){return t===0?0:t>0?1:-1},So=function(t){return _h(t)&&t.indexOf("%")===t.length-1},ke=function(t){return FQ(t)&&!Ih(t)},vr=function(t){return ke(t)||_h(t)},zQ=0,Rh=function(t){var r=++zQ;return"".concat(t||"").concat(r)},el=function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(t)&&!_h(t))return i;var s;if(So(t)){var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return Ih(s)&&(s=i),a&&s>r&&(s=r),s},fs=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},qQ=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,i={},a=0;a<r;a++)if(!i[t[a]])i[t[a]]=!0;else return!0;return!1},Ni=function(t,r){return ke(t)&&ke(r)?function(i){return t+i*(r-t)}:function(){return r}};function Zp(e,t,r){return!e||!e.length?null:e.find(function(i){return i&&(typeof t=="function"?t(i):ei(i,t))===r})}function sc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var i in t)if({}.hasOwnProperty.call(t,i)&&!{}.hasOwnProperty.call(e,i))return!1;return!0}function Y0(e){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y0(e)}var UQ=["viewBox","children"],VQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],IC=["points","pathLength"],Ly={svg:UQ,polygon:IC,polyline:IC},SN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],eg=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(g.isValidElement(t)&&(i=t.props),!Od(i))return null;var a={};return Object.keys(i).forEach(function(s){SN.includes(s)&&(a[s]=r||function(o){return i[s](i,o)})}),a},WQ=function(t,r,i){return function(a){return t(r,i,a),null}},tg=function(t,r,i){if(!Od(t)||Y0(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];SN.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=WQ(o,r,i))}),a},HQ=["children"],KQ=["children"];function RC(e,t){if(e==null)return{};var r=GQ(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function GQ(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function Q0(e){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q0(e)}var MC={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Aa=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},$C=null,By=null,kN=function e(t){if(t===$C&&Array.isArray(By))return By;var r=[];return g.Children.forEach(t,function(i){ft(i)||(_Q.isFragment(i)?r=r.concat(e(i.props.children)):r.push(i))}),By=r,$C=t,r};function ti(e,t){var r=[],i=[];return Array.isArray(t)?i=t.map(function(a){return Aa(a)}):i=[Aa(t)],kN(e).forEach(function(a){var s=ei(a,"type.displayName")||ei(a,"type.name");i.indexOf(s)!==-1&&r.push(a)}),r}function An(e,t){var r=ti(e,t);return r&&r[0]}var FC=function(t){if(!t||!t.props)return!1;var r=t.props,i=r.width,a=r.height;return!(!ke(i)||i<=0||!ke(a)||a<=0)},YQ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],QQ=function(t){return t&&t.type&&_h(t.type)&&YQ.indexOf(t.type)>=0},JQ=function(t){return t&&Q0(t)==="object"&&"clipDot"in t},XQ=function(t,r,i,a){var s,o=(s=Ly==null?void 0:Ly[a])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!ot(t)&&(a&&o.includes(r)||VQ.includes(r))||i&&SN.includes(r)},pt=function(t,r,i){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(g.isValidElement(t)&&(a=t.props),!Od(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;XQ((l=a)===null||l===void 0?void 0:l[o],o,r,i)&&(s[o]=a[o])}),s},J0=function e(t,r){if(t===r)return!0;var i=g.Children.count(t);if(i!==g.Children.count(r))return!1;if(i===0)return!0;if(i===1)return DC(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<i;a++){var s=t[a],o=r[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!DC(s,o))return!1}return!0},DC=function(t,r){if(ft(t)&&ft(r))return!0;if(!ft(t)&&!ft(r)){var i=t.props||{},a=i.children,s=RC(i,HQ),o=r.props||{},l=o.children,c=RC(o,KQ);return a&&l?sc(s,c)&&J0(a,l):!a&&!l?sc(s,c):!1}return!1},LC=function(t,r){var i=[],a={};return kN(t).forEach(function(s,o){if(QQ(s))i.push(s);else if(s){var l=Aa(s.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!a[l])){var f=d(s,l,o);i.push(f),a[l]=!0}}}),i},ZQ=function(t){var r=t&&t.type;return r&&MC[r]?MC[r]:null},eJ=function(t,r){return kN(r).indexOf(t)},tJ=["children","width","height","viewBox","className","style","title","desc"];function X0(){return X0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},X0.apply(this,arguments)}function rJ(e,t){if(e==null)return{};var r=nJ(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function nJ(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function Z0(e){var t=e.children,r=e.width,i=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,d=rJ(e,tJ),u=a||{width:r,height:i,x:0,y:0},f=gt("recharts-surface",s);return D.createElement("svg",X0({},pt(d,!0,"svg"),{className:f,width:r,height:i,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),D.createElement("title",null,l),D.createElement("desc",null,c),t)}var iJ=["children","className"];function ej(){return ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ej.apply(this,arguments)}function aJ(e,t){if(e==null)return{};var r=sJ(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function sJ(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}var ar=D.forwardRef(function(e,t){var r=e.children,i=e.className,a=aJ(e,iJ),s=gt("recharts-layer",i);return D.createElement("g",ej({className:s},pt(a,!0),{ref:t}),r)}),Ea=function(t,r){for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s]};function oJ(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+t];return s}var lJ=oJ,cJ=lJ;function dJ(e,t,r){var i=e.length;return r=r===void 0?i:r,!t&&r>=i?e:cJ(e,t,r)}var uJ=dJ,fJ="\\ud800-\\udfff",hJ="\\u0300-\\u036f",mJ="\\ufe20-\\ufe2f",pJ="\\u20d0-\\u20ff",gJ=hJ+mJ+pJ,xJ="\\ufe0e\\ufe0f",vJ="\\u200d",yJ=RegExp("["+vJ+fJ+gJ+xJ+"]");function bJ(e){return yJ.test(e)}var BM=bJ;function jJ(e){return e.split("")}var wJ=jJ,zM="\\ud800-\\udfff",NJ="\\u0300-\\u036f",SJ="\\ufe20-\\ufe2f",kJ="\\u20d0-\\u20ff",CJ=NJ+SJ+kJ,AJ="\\ufe0e\\ufe0f",EJ="["+zM+"]",tj="["+CJ+"]",rj="\\ud83c[\\udffb-\\udfff]",PJ="(?:"+tj+"|"+rj+")",qM="[^"+zM+"]",UM="(?:\\ud83c[\\udde6-\\uddff]){2}",VM="[\\ud800-\\udbff][\\udc00-\\udfff]",TJ="\\u200d",WM=PJ+"?",HM="["+AJ+"]?",OJ="(?:"+TJ+"(?:"+[qM,UM,VM].join("|")+")"+HM+WM+")*",_J=HM+WM+OJ,IJ="(?:"+[qM+tj+"?",tj,UM,VM,EJ].join("|")+")",RJ=RegExp(rj+"(?="+rj+")|"+IJ+_J,"g");function MJ(e){return e.match(RJ)||[]}var $J=MJ,FJ=wJ,DJ=BM,LJ=$J;function BJ(e){return DJ(e)?LJ(e):FJ(e)}var zJ=BJ,qJ=uJ,UJ=BM,VJ=zJ,WJ=RM;function HJ(e){return function(t){t=WJ(t);var r=UJ(t)?VJ(t):void 0,i=r?r[0]:t.charAt(0),a=r?qJ(r,1).join(""):t.slice(1);return i[e]()+a}}var KJ=HJ,GJ=KJ,YJ=GJ("toUpperCase"),QJ=YJ;const dv=It(QJ);function Mt(e){return function(){return e}}const KM=Math.cos,rg=Math.sin,Li=Math.sqrt,ng=Math.PI,uv=2*ng,nj=Math.PI,ij=2*nj,go=1e-6,JJ=ij-go;function GM(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function XJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return GM;const r=10**t;return function(i){this._+=i[0];for(let a=1,s=i.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+i[a]}}class ZJ{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?GM:XJ(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,i,a){this._append`Q${+t},${+r},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(t,r,i,a,s,o){this._append`C${+t},${+r},${+i},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,i,a,s){if(t=+t,r=+r,i=+i,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=i-t,d=a-r,u=o-t,f=l-r,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>go)if(!(Math.abs(f*c-d*u)>go)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=i-o,y=a-l,v=c*c+d*d,b=p*p+y*y,x=Math.sqrt(v),m=Math.sqrt(h),j=s*Math.tan((nj-Math.acos((v+h-b)/(2*x*m)))/2),N=j/m,w=j/x;Math.abs(N-1)>go&&this._append`L${t+N*u},${r+N*f}`,this._append`A${s},${s},0,0,${+(f*p>u*y)},${this._x1=t+w*c},${this._y1=r+w*d}`}}arc(t,r,i,a,s,o){if(t=+t,r=+r,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(a),c=i*Math.sin(a),d=t+l,u=r+c,f=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>go||Math.abs(this._y1-u)>go)&&this._append`L${d},${u}`,i&&(h<0&&(h=h%ij+ij),h>JJ?this._append`A${i},${i},0,1,${f},${t-l},${r-c}A${i},${i},0,1,${f},${this._x1=d},${this._y1=u}`:h>go&&this._append`A${i},${i},0,${+(h>=nj)},${f},${this._x1=t+i*Math.cos(s)},${this._y1=r+i*Math.sin(s)}`)}rect(t,r,i,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function CN(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);t=i}return e},()=>new ZJ(t)}function AN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YM(e){this._context=e}YM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fv(e){return new YM(e)}function QM(e){return e[0]}function JM(e){return e[1]}function XM(e,t){var r=Mt(!0),i=null,a=fv,s=null,o=CN(l);e=typeof e=="function"?e:e===void 0?QM:Mt(e),t=typeof t=="function"?t:t===void 0?JM:Mt(t);function l(c){var d,u=(c=AN(c)).length,f,h=!1,p;for(i==null&&(s=a(p=o())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,d,c),+t(f,d,c));if(p)return s=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Mt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Mt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Mt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,i!=null&&(s=a(i)),l):a},l.context=function(c){return arguments.length?(c==null?i=s=null:s=a(i=c),l):i},l}function vm(e,t,r){var i=null,a=Mt(!0),s=null,o=fv,l=null,c=CN(d);e=typeof e=="function"?e:e===void 0?QM:Mt(+e),t=typeof t=="function"?t:Mt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?JM:Mt(+r);function d(f){var h,p,y,v=(f=AN(f)).length,b,x=!1,m,j=new Array(v),N=new Array(v);for(s==null&&(l=o(m=c())),h=0;h<=v;++h){if(!(h<v&&a(b=f[h],h,f))===x)if(x=!x)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=h-1;y>=p;--y)l.point(j[y],N[y]);l.lineEnd(),l.areaEnd()}x&&(j[h]=+e(b,h,f),N[h]=+t(b,h,f),l.point(i?+i(b,h,f):j[h],r?+r(b,h,f):N[h]))}if(m)return l=null,m+""||null}function u(){return XM().defined(a).curve(o).context(s)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Mt(+f),i=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Mt(+f),d):e},d.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:Mt(+f),d):i},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Mt(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Mt(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Mt(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(i).y(t)},d.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Mt(!!f),d):a},d.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),d):o},d.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),d):s},d}class ZM{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function eX(e){return new ZM(e,!0)}function tX(e){return new ZM(e,!1)}const EN={draw(e,t){const r=Li(t/ng);e.moveTo(r,0),e.arc(0,0,r,0,uv)}},rX={draw(e,t){const r=Li(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},e$=Li(1/3),nX=e$*2,iX={draw(e,t){const r=Li(t/nX),i=r*e$;e.moveTo(0,-r),e.lineTo(i,0),e.lineTo(0,r),e.lineTo(-i,0),e.closePath()}},aX={draw(e,t){const r=Li(t),i=-r/2;e.rect(i,i,r,r)}},sX=.8908130915292852,t$=rg(ng/10)/rg(7*ng/10),oX=rg(uv/10)*t$,lX=-KM(uv/10)*t$,cX={draw(e,t){const r=Li(t*sX),i=oX*r,a=lX*r;e.moveTo(0,-r),e.lineTo(i,a);for(let s=1;s<5;++s){const o=uv*s/5,l=KM(o),c=rg(o);e.lineTo(c*r,-l*r),e.lineTo(l*i-c*a,c*i+l*a)}e.closePath()}},zy=Li(3),dX={draw(e,t){const r=-Li(t/(zy*3));e.moveTo(0,r*2),e.lineTo(-zy*r,-r),e.lineTo(zy*r,-r),e.closePath()}},qn=-.5,Un=Li(3)/2,aj=1/Li(12),uX=(aj/2+1)*3,fX={draw(e,t){const r=Li(t/uX),i=r/2,a=r*aj,s=i,o=r*aj+r,l=-s,c=o;e.moveTo(i,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(qn*i-Un*a,Un*i+qn*a),e.lineTo(qn*s-Un*o,Un*s+qn*o),e.lineTo(qn*l-Un*c,Un*l+qn*c),e.lineTo(qn*i+Un*a,qn*a-Un*i),e.lineTo(qn*s+Un*o,qn*o-Un*s),e.lineTo(qn*l+Un*c,qn*c-Un*l),e.closePath()}};function hX(e,t){let r=null,i=CN(a);e=typeof e=="function"?e:Mt(e||EN),t=typeof t=="function"?t:Mt(t===void 0?64:+t);function a(){let s;if(r||(r=s=i()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Mt(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Mt(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function ig(){}function ag(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function r$(e){this._context=e}r$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ag(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ag(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mX(e){return new r$(e)}function n$(e){this._context=e}n$.prototype={areaStart:ig,areaEnd:ig,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ag(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pX(e){return new n$(e)}function i$(e){this._context=e}i$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:ag(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gX(e){return new i$(e)}function a$(e){this._context=e}a$.prototype={areaStart:ig,areaEnd:ig,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function xX(e){return new a$(e)}function BC(e){return e<0?-1:1}function zC(e,t,r){var i=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(i||a<0&&-0),o=(r-e._y1)/(a||i<0&&-0),l=(s*a+o*i)/(i+a);return(BC(s)+BC(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function qC(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function qy(e,t,r){var i=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-i)/3;e._context.bezierCurveTo(i+l,a+l*t,s-l,o-l*r,s,o)}function sg(e){this._context=e}sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qy(this,this._t0,qC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,qy(this,qC(this,r=zC(this,e,t)),r);break;default:qy(this,this._t0,r=zC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function s$(e){this._context=new o$(e)}(s$.prototype=Object.create(sg.prototype)).point=function(e,t){sg.prototype.point.call(this,t,e)};function o$(e){this._context=e}o$.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,a,s){this._context.bezierCurveTo(t,e,i,r,s,a)}};function vX(e){return new sg(e)}function yX(e){return new s$(e)}function l$(e){this._context=e}l$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var i=UC(e),a=UC(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(i[0][s],a[0][s],i[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function UC(e){var t,r=e.length-1,i,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)i=a[t]/s[t-1],s[t]-=i,o[t]-=i*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function bX(e){return new l$(e)}function hv(e,t){this._context=e,this._t=t}hv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function jX(e){return new hv(e,.5)}function wX(e){return new hv(e,0)}function NX(e){return new hv(e,1)}function Vc(e,t){if((o=e.length)>1)for(var r=1,i,a,s=e[t[0]],o,l=s.length;r<o;++r)for(a=s,s=e[t[r]],i=0;i<l;++i)s[i][1]+=s[i][0]=isNaN(a[i][1])?a[i][0]:a[i][1]}function sj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function SX(e,t){return e[t]}function kX(e){const t=[];return t.key=e,t}function CX(){var e=Mt([]),t=sj,r=Vc,i=SX;function a(s){var o=Array.from(e.apply(this,arguments),kX),l,c=o.length,d=-1,u;for(const f of s)for(l=0,++d;l<c;++l)(o[l][d]=[0,+i(f,o[l].key,d,s)]).data=f;for(l=0,u=AN(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Mt(Array.from(s)),a):e},a.value=function(s){return arguments.length?(i=typeof s=="function"?s:Mt(+s),a):i},a.order=function(s){return arguments.length?(t=s==null?sj:typeof s=="function"?s:Mt(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??Vc,a):r},a}function AX(e,t){if((i=e.length)>0){for(var r,i,a=0,s=e[0].length,o;a<s;++a){for(o=r=0;r<i;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<i;++r)e[r][a][1]/=o}Vc(e,t)}}function EX(e,t){if((a=e.length)>0){for(var r=0,i=e[t[0]],a,s=i.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;i[r][1]+=i[r][0]=-l/2}Vc(e,t)}}function PX(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,i=1,a,s,o;i<s;++i){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[i][1]||0,h=u[i-1][1]||0,p=(f-h)/2,y=0;y<l;++y){var v=e[t[y]],b=v[i][1]||0,x=v[i-1][1]||0;p+=b-x}c+=f,d+=p*f}a[i-1][1]+=a[i-1][0]=r,c&&(r-=d/c)}a[i-1][1]+=a[i-1][0]=r,Vc(e,t)}}function jf(e){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(e)}var TX=["type","size","sizeType"];function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},oj.apply(this,arguments)}function VC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function WC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(r),!0).forEach(function(i){OX(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VC(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function OX(e,t,r){return t=_X(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _X(e){var t=IX(e,"string");return jf(t)=="symbol"?t:t+""}function IX(e,t){if(jf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(jf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RX(e,t){if(e==null)return{};var r=MX(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function MX(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}var c$={symbolCircle:EN,symbolCross:rX,symbolDiamond:iX,symbolSquare:aX,symbolStar:cX,symbolTriangle:dX,symbolWye:fX},$X=Math.PI/180,FX=function(t){var r="symbol".concat(dv(t));return c$[r]||EN},DX=function(t,r,i){if(r==="area")return t;switch(i){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*$X;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},LX=function(t,r){c$["symbol".concat(dv(t))]=r},PN=function(t){var r=t.type,i=r===void 0?"circle":r,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=RX(t,TX),d=WC(WC({},c),{},{type:i,size:s,sizeType:l}),u=function(){var b=FX(i),x=hX().type(b).size(DX(s,l,i));return x()},f=d.className,h=d.cx,p=d.cy,y=pt(d,!0);return h===+h&&p===+p&&s===+s?D.createElement("path",oj({},y,{className:gt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};PN.registerSymbol=LX;function Wc(e){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wc(e)}function lj(){return lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},lj.apply(this,arguments)}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function BX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(i){wf(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function zX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qX(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,u$(i.key),i)}}function UX(e,t,r){return t&&qX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VX(e,t,r){return t=og(t),WX(e,d$()?Reflect.construct(t,r||[],og(e).constructor):t.apply(e,r))}function WX(e,t){if(t&&(Wc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HX(e)}function HX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d$=function(){return!!e})()}function og(e){return og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},og(e)}function KX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cj(e,t)}function cj(e,t){return cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},cj(e,t)}function wf(e,t,r){return t=u$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u$(e){var t=GX(e,"string");return Wc(t)=="symbol"?t:t+""}function GX(e,t){if(Wc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Wc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vn=32,TN=function(e){function t(){return zX(this,t),VX(this,t,arguments)}return KX(t,e),UX(t,[{key:"renderIcon",value:function(i){var a=this.props.inactiveColor,s=Vn/2,o=Vn/6,l=Vn/3,c=i.inactive?a:i.color;if(i.type==="plainline")return D.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:s,x2:Vn,y2:s,className:"recharts-legend-icon"});if(i.type==="line")return D.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Vn,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(i.type==="rect")return D.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Vn/8,"h").concat(Vn,"v").concat(Vn*3/4,"h").concat(-Vn,"z"),className:"recharts-legend-icon"});if(D.isValidElement(i.legendIcon)){var d=BX({},i);return delete d.legendIcon,D.cloneElement(i.legendIcon,d)}return D.createElement(PN,{fill:c,cx:s,cy:s,size:Vn,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:Vn,height:Vn},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,y){var v=p.formatter||c,b=gt(wf(wf({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var x=ot(p.value)?null:p.value;Ea(!ot(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var m=p.inactive?d:p.color;return D.createElement("li",lj({className:b,style:f,key:"legend-item-".concat(y)},tg(i.props,p,y)),D.createElement(Z0,{width:o,height:o,viewBox:u,style:h},i.renderIcon(p)),D.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},v?v(x,p,y):x))})}},{key:"render",value:function(){var i=this.props,a=i.payload,s=i.layout,o=i.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return D.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(g.PureComponent);wf(TN,"displayName","Legend");wf(TN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var YX=Jx;function QX(){this.__data__=new YX,this.size=0}var JX=QX;function XX(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var ZX=XX;function eZ(e){return this.__data__.get(e)}var tZ=eZ;function rZ(e){return this.__data__.has(e)}var nZ=rZ,iZ=Jx,aZ=xN,sZ=vN,oZ=200;function lZ(e,t){var r=this.__data__;if(r instanceof iZ){var i=r.__data__;if(!aZ||i.length<oZ-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new sZ(i)}return r.set(e,t),this.size=r.size,this}var cZ=lZ,dZ=Jx,uZ=JX,fZ=ZX,hZ=tZ,mZ=nZ,pZ=cZ;function Md(e){var t=this.__data__=new dZ(e);this.size=t.size}Md.prototype.clear=uZ;Md.prototype.delete=fZ;Md.prototype.get=hZ;Md.prototype.has=mZ;Md.prototype.set=pZ;var f$=Md,gZ="__lodash_hash_undefined__";function xZ(e){return this.__data__.set(e,gZ),this}var vZ=xZ;function yZ(e){return this.__data__.has(e)}var bZ=yZ,jZ=vN,wZ=vZ,NZ=bZ;function lg(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new jZ;++t<r;)this.add(e[t])}lg.prototype.add=lg.prototype.push=wZ;lg.prototype.has=NZ;var h$=lg;function SZ(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var m$=SZ;function kZ(e,t){return e.has(t)}var p$=kZ,CZ=h$,AZ=m$,EZ=p$,PZ=1,TZ=2;function OZ(e,t,r,i,a,s){var o=r&PZ,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=s.get(e),u=s.get(t);if(d&&u)return d==t&&u==e;var f=-1,h=!0,p=r&TZ?new CZ:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var y=e[f],v=t[f];if(i)var b=o?i(v,y,f,t,e,s):i(y,v,f,e,t,s);if(b!==void 0){if(b)continue;h=!1;break}if(p){if(!AZ(t,function(x,m){if(!EZ(p,m)&&(y===x||a(y,x,r,i,s)))return p.push(m)})){h=!1;break}}else if(!(y===v||a(y,v,r,i,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var g$=OZ,_Z=la,IZ=_Z.Uint8Array,RZ=IZ;function MZ(e){var t=-1,r=Array(e.size);return e.forEach(function(i,a){r[++t]=[a,i]}),r}var $Z=MZ;function FZ(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var ON=FZ,KC=Oh,GC=RZ,DZ=gN,LZ=g$,BZ=$Z,zZ=ON,qZ=1,UZ=2,VZ="[object Boolean]",WZ="[object Date]",HZ="[object Error]",KZ="[object Map]",GZ="[object Number]",YZ="[object RegExp]",QZ="[object Set]",JZ="[object String]",XZ="[object Symbol]",ZZ="[object ArrayBuffer]",eee="[object DataView]",YC=KC?KC.prototype:void 0,Uy=YC?YC.valueOf:void 0;function tee(e,t,r,i,a,s,o){switch(r){case eee:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ZZ:return!(e.byteLength!=t.byteLength||!s(new GC(e),new GC(t)));case VZ:case WZ:case GZ:return DZ(+e,+t);case HZ:return e.name==t.name&&e.message==t.message;case YZ:case JZ:return e==t+"";case KZ:var l=BZ;case QZ:var c=i&qZ;if(l||(l=zZ),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;i|=UZ,o.set(e,t);var u=LZ(l(e),l(t),i,a,s,o);return o.delete(e),u;case XZ:if(Uy)return Uy.call(e)==Uy.call(t)}return!1}var ree=tee;function nee(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}var x$=nee,iee=x$,aee=wn;function see(e,t,r){var i=t(e);return aee(e)?i:iee(i,r(e))}var oee=see;function lee(e,t){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}var cee=lee;function dee(){return[]}var uee=dee,fee=cee,hee=uee,mee=Object.prototype,pee=mee.propertyIsEnumerable,QC=Object.getOwnPropertySymbols,gee=QC?function(e){return e==null?[]:(e=Object(e),fee(QC(e),function(t){return pee.call(e,t)}))}:hee,xee=gee;function vee(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var yee=vee,bee=Ga,jee=Ya,wee="[object Arguments]";function Nee(e){return jee(e)&&bee(e)==wee}var See=Nee,JC=See,kee=Ya,v$=Object.prototype,Cee=v$.hasOwnProperty,Aee=v$.propertyIsEnumerable,Eee=JC(function(){return arguments}())?JC:function(e){return kee(e)&&Cee.call(e,"callee")&&!Aee.call(e,"callee")},_N=Eee,cg={exports:{}};function Pee(){return!1}var Tee=Pee;cg.exports;(function(e,t){var r=la,i=Tee,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||i;e.exports=d})(cg,cg.exports);var y$=cg.exports,Oee=9007199254740991,_ee=/^(?:0|[1-9]\d*)$/;function Iee(e,t){var r=typeof e;return t=t??Oee,!!t&&(r=="number"||r!="symbol"&&_ee.test(e))&&e>-1&&e%1==0&&e<t}var IN=Iee,Ree=9007199254740991;function Mee(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ree}var RN=Mee,$ee=Ga,Fee=RN,Dee=Ya,Lee="[object Arguments]",Bee="[object Array]",zee="[object Boolean]",qee="[object Date]",Uee="[object Error]",Vee="[object Function]",Wee="[object Map]",Hee="[object Number]",Kee="[object Object]",Gee="[object RegExp]",Yee="[object Set]",Qee="[object String]",Jee="[object WeakMap]",Xee="[object ArrayBuffer]",Zee="[object DataView]",ete="[object Float32Array]",tte="[object Float64Array]",rte="[object Int8Array]",nte="[object Int16Array]",ite="[object Int32Array]",ate="[object Uint8Array]",ste="[object Uint8ClampedArray]",ote="[object Uint16Array]",lte="[object Uint32Array]",Lt={};Lt[ete]=Lt[tte]=Lt[rte]=Lt[nte]=Lt[ite]=Lt[ate]=Lt[ste]=Lt[ote]=Lt[lte]=!0;Lt[Lee]=Lt[Bee]=Lt[Xee]=Lt[zee]=Lt[Zee]=Lt[qee]=Lt[Uee]=Lt[Vee]=Lt[Wee]=Lt[Hee]=Lt[Kee]=Lt[Gee]=Lt[Yee]=Lt[Qee]=Lt[Jee]=!1;function cte(e){return Dee(e)&&Fee(e.length)&&!!Lt[$ee(e)]}var dte=cte;function ute(e){return function(t){return e(t)}}var b$=ute,dg={exports:{}};dg.exports;(function(e,t){var r=EM,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(dg,dg.exports);var fte=dg.exports,hte=dte,mte=b$,XC=fte,ZC=XC&&XC.isTypedArray,pte=ZC?mte(ZC):hte,j$=pte,gte=yee,xte=_N,vte=wn,yte=y$,bte=IN,jte=j$,wte=Object.prototype,Nte=wte.hasOwnProperty;function Ste(e,t){var r=vte(e),i=!r&&xte(e),a=!r&&!i&&yte(e),s=!r&&!i&&!a&&jte(e),o=r||i||a||s,l=o?gte(e.length,String):[],c=l.length;for(var d in e)(t||Nte.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||bte(d,c)))&&l.push(d);return l}var kte=Ste,Cte=Object.prototype;function Ate(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Cte;return e===r}var Ete=Ate;function Pte(e,t){return function(r){return e(t(r))}}var w$=Pte,Tte=w$,Ote=Tte(Object.keys,Object),_te=Ote,Ite=Ete,Rte=_te,Mte=Object.prototype,$te=Mte.hasOwnProperty;function Fte(e){if(!Ite(e))return Rte(e);var t=[];for(var r in Object(e))$te.call(e,r)&&r!="constructor"&&t.push(r);return t}var Dte=Fte,Lte=pN,Bte=RN;function zte(e){return e!=null&&Bte(e.length)&&!Lte(e)}var Mh=zte,qte=kte,Ute=Dte,Vte=Mh;function Wte(e){return Vte(e)?qte(e):Ute(e)}var mv=Wte,Hte=oee,Kte=xee,Gte=mv;function Yte(e){return Hte(e,Gte,Kte)}var Qte=Yte,eA=Qte,Jte=1,Xte=Object.prototype,Zte=Xte.hasOwnProperty;function ere(e,t,r,i,a,s){var o=r&Jte,l=eA(e),c=l.length,d=eA(t),u=d.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:Zte.call(t,h)))return!1}var p=s.get(e),y=s.get(t);if(p&&y)return p==t&&y==e;var v=!0;s.set(e,t),s.set(t,e);for(var b=o;++f<c;){h=l[f];var x=e[h],m=t[h];if(i)var j=o?i(m,x,h,t,e,s):i(x,m,h,e,t,s);if(!(j===void 0?x===m||a(x,m,r,i,s):j)){v=!1;break}b||(b=h=="constructor")}if(v&&!b){var N=e.constructor,w=t.constructor;N!=w&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(v=!1)}return s.delete(e),s.delete(t),v}var tre=ere,rre=dl,nre=la,ire=rre(nre,"DataView"),are=ire,sre=dl,ore=la,lre=sre(ore,"Promise"),cre=lre,dre=dl,ure=la,fre=dre(ure,"Set"),N$=fre,hre=dl,mre=la,pre=hre(mre,"WeakMap"),gre=pre,dj=are,uj=xN,fj=cre,hj=N$,mj=gre,S$=Ga,$d=TM,tA="[object Map]",xre="[object Object]",rA="[object Promise]",nA="[object Set]",iA="[object WeakMap]",aA="[object DataView]",vre=$d(dj),yre=$d(uj),bre=$d(fj),jre=$d(hj),wre=$d(mj),xo=S$;(dj&&xo(new dj(new ArrayBuffer(1)))!=aA||uj&&xo(new uj)!=tA||fj&&xo(fj.resolve())!=rA||hj&&xo(new hj)!=nA||mj&&xo(new mj)!=iA)&&(xo=function(e){var t=S$(e),r=t==xre?e.constructor:void 0,i=r?$d(r):"";if(i)switch(i){case vre:return aA;case yre:return tA;case bre:return rA;case jre:return nA;case wre:return iA}return t});var Nre=xo,Vy=f$,Sre=g$,kre=ree,Cre=tre,sA=Nre,oA=wn,lA=y$,Are=j$,Ere=1,cA="[object Arguments]",dA="[object Array]",ym="[object Object]",Pre=Object.prototype,uA=Pre.hasOwnProperty;function Tre(e,t,r,i,a,s){var o=oA(e),l=oA(t),c=o?dA:sA(e),d=l?dA:sA(t);c=c==cA?ym:c,d=d==cA?ym:d;var u=c==ym,f=d==ym,h=c==d;if(h&&lA(e)){if(!lA(t))return!1;o=!0,u=!1}if(h&&!u)return s||(s=new Vy),o||Are(e)?Sre(e,t,r,i,a,s):kre(e,t,c,r,i,a,s);if(!(r&Ere)){var p=u&&uA.call(e,"__wrapped__"),y=f&&uA.call(t,"__wrapped__");if(p||y){var v=p?e.value():e,b=y?t.value():t;return s||(s=new Vy),a(v,b,r,i,s)}}return h?(s||(s=new Vy),Cre(e,t,r,i,a,s)):!1}var Ore=Tre,_re=Ore,fA=Ya;function k$(e,t,r,i,a){return e===t?!0:e==null||t==null||!fA(e)&&!fA(t)?e!==e&&t!==t:_re(e,t,r,i,k$,a)}var MN=k$,Ire=f$,Rre=MN,Mre=1,$re=2;function Fre(e,t,r,i){var a=r.length,s=a,o=!i;if(e==null)return!s;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=r[a];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var f=new Ire;if(i)var h=i(d,u,c,e,t,f);if(!(h===void 0?Rre(u,d,Mre|$re,i,f):h))return!1}}return!0}var Dre=Fre,Lre=ao;function Bre(e){return e===e&&!Lre(e)}var C$=Bre,zre=C$,qre=mv;function Ure(e){for(var t=qre(e),r=t.length;r--;){var i=t[r],a=e[i];t[r]=[i,a,zre(a)]}return t}var Vre=Ure;function Wre(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var A$=Wre,Hre=Dre,Kre=Vre,Gre=A$;function Yre(e){var t=Kre(e);return t.length==1&&t[0][2]?Gre(t[0][0],t[0][1]):function(r){return r===e||Hre(r,e,t)}}var Qre=Yre;function Jre(e,t){return e!=null&&t in Object(e)}var Xre=Jre,Zre=MM,ene=_N,tne=wn,rne=IN,nne=RN,ine=Zx;function ane(e,t,r){t=Zre(t,e);for(var i=-1,a=t.length,s=!1;++i<a;){var o=ine(t[i]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++i!=a?s:(a=e==null?0:e.length,!!a&&nne(a)&&rne(o,a)&&(tne(e)||ene(e)))}var sne=ane,one=Xre,lne=sne;function cne(e,t){return e!=null&&lne(e,t,one)}var dne=cne,une=MN,fne=$M,hne=dne,mne=mN,pne=C$,gne=A$,xne=Zx,vne=1,yne=2;function bne(e,t){return mne(e)&&pne(t)?gne(xne(e),t):function(r){var i=fne(r,e);return i===void 0&&i===t?hne(r,e):une(t,i,vne|yne)}}var jne=bne;function wne(e){return e}var Fd=wne;function Nne(e){return function(t){return t==null?void 0:t[e]}}var Sne=Nne,kne=jN;function Cne(e){return function(t){return kne(t,e)}}var Ane=Cne,Ene=Sne,Pne=Ane,Tne=mN,One=Zx;function _ne(e){return Tne(e)?Ene(One(e)):Pne(e)}var Ine=_ne,Rne=Qre,Mne=jne,$ne=Fd,Fne=wn,Dne=Ine;function Lne(e){return typeof e=="function"?e:e==null?$ne:typeof e=="object"?Fne(e)?Mne(e[0],e[1]):Rne(e):Dne(e)}var so=Lne;function Bne(e,t,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var E$=Bne;function zne(e){return e!==e}var qne=zne;function Une(e,t,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}var Vne=Une,Wne=E$,Hne=qne,Kne=Vne;function Gne(e,t,r){return t===t?Kne(e,t,r):Wne(e,Hne,r)}var Yne=Gne,Qne=Yne;function Jne(e,t){var r=e==null?0:e.length;return!!r&&Qne(e,t,0)>-1}var Xne=Jne;function Zne(e,t,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(t,e[i]))return!0;return!1}var eie=Zne;function tie(){}var rie=tie,Wy=N$,nie=rie,iie=ON,aie=1/0,sie=Wy&&1/iie(new Wy([,-0]))[1]==aie?function(e){return new Wy(e)}:nie,oie=sie,lie=h$,cie=Xne,die=eie,uie=p$,fie=oie,hie=ON,mie=200;function pie(e,t,r){var i=-1,a=cie,s=e.length,o=!0,l=[],c=l;if(r)o=!1,a=die;else if(s>=mie){var d=t?null:fie(e);if(d)return hie(d);o=!1,a=uie,c=new lie}else c=t?[]:l;e:for(;++i<s;){var u=e[i],f=t?t(u):u;if(u=r||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(u)}else a(c,f,r)||(c!==l&&c.push(f),l.push(u))}return l}var gie=pie,xie=so,vie=gie;function yie(e,t){return e&&e.length?vie(e,xie(t)):[]}var bie=yie;const hA=It(bie);function P$(e,t,r){return t===!0?hA(e,r):ot(t)?hA(e,t):e}function Hc(e){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(e)}var jie=["ref"];function mA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(r),!0).forEach(function(i){pv(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mA(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function wie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pA(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,O$(i.key),i)}}function Nie(e,t,r){return t&&pA(e.prototype,t),r&&pA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sie(e,t,r){return t=ug(t),kie(e,T$()?Reflect.construct(t,r||[],ug(e).constructor):t.apply(e,r))}function kie(e,t){if(t&&(Hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cie(e)}function Cie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T$=function(){return!!e})()}function ug(e){return ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ug(e)}function Aie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pj(e,t)}function pj(e,t){return pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},pj(e,t)}function pv(e,t,r){return t=O$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O$(e){var t=Eie(e,"string");return Hc(t)=="symbol"?t:t+""}function Eie(e,t){if(Hc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Hc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pie(e,t){if(e==null)return{};var r=Tie(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Tie(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function Oie(e){return e.value}function _ie(e,t){if(D.isValidElement(e))return D.cloneElement(e,t);if(typeof e=="function")return D.createElement(e,t);t.ref;var r=Pie(t,jie);return D.createElement(TN,r)}var gA=1,oc=function(e){function t(){var r;wie(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=Sie(this,t,[].concat(a)),pv(r,"lastBoundingBox",{width:-1,height:-1}),r}return Aie(t,e),Nie(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();return i.height=this.wrapperNode.offsetHeight,i.width=this.wrapperNode.offsetWidth,i}return null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>gA||Math.abs(a.height-this.lastBoundingBox.height)>gA)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,i&&i(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ha({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,f,h;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(o==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();f={left:((d||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();h={top:((u||0)-y.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ha(ha({},f),h)}},{key:"render",value:function(){var i=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,f=ha(ha({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return D.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){i.wrapperNode=p}},_ie(s,ha(ha({},this.props),{},{payload:P$(u,d,Oie)})))}}],[{key:"getWithHeight",value:function(i,a){var s=ha(ha({},this.defaultProps),i.props),o=s.layout;return o==="vertical"&&ke(i.props.height)?{height:i.props.height}:o==="horizontal"?{width:i.props.width||a}:null}}])}(g.PureComponent);pv(oc,"displayName","Legend");pv(oc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var xA=Oh,Iie=_N,Rie=wn,vA=xA?xA.isConcatSpreadable:void 0;function Mie(e){return Rie(e)||Iie(e)||!!(vA&&e&&e[vA])}var $ie=Mie,Fie=x$,Die=$ie;function _$(e,t,r,i,a){var s=-1,o=e.length;for(r||(r=Die),a||(a=[]);++s<o;){var l=e[s];t>0&&r(l)?t>1?_$(l,t-1,r,i,a):Fie(a,l):i||(a[a.length]=l)}return a}var I$=_$;function Lie(e){return function(t,r,i){for(var a=-1,s=Object(t),o=i(t),l=o.length;l--;){var c=o[e?l:++a];if(r(s[c],c,s)===!1)break}return t}}var Bie=Lie,zie=Bie,qie=zie(),Uie=qie,Vie=Uie,Wie=mv;function Hie(e,t){return e&&Vie(e,t,Wie)}var R$=Hie,Kie=Mh;function Gie(e,t){return function(r,i){if(r==null)return r;if(!Kie(r))return e(r,i);for(var a=r.length,s=t?a:-1,o=Object(r);(t?s--:++s<a)&&i(o[s],s,o)!==!1;);return r}}var Yie=Gie,Qie=R$,Jie=Yie,Xie=Jie(Qie),$N=Xie,Zie=$N,eae=Mh;function tae(e,t){var r=-1,i=eae(e)?Array(e.length):[];return Zie(e,function(a,s,o){i[++r]=t(a,s,o)}),i}var M$=tae;function rae(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var nae=rae,yA=Td;function iae(e,t){if(e!==t){var r=e!==void 0,i=e===null,a=e===e,s=yA(e),o=t!==void 0,l=t===null,c=t===t,d=yA(t);if(!l&&!d&&!s&&e>t||s&&o&&c&&!l&&!d||i&&o&&c||!r&&c||!a)return 1;if(!i&&!s&&!d&&e<t||d&&r&&a&&!i&&!s||l&&r&&a||!o&&a||!c)return-1}return 0}var aae=iae,sae=aae;function oae(e,t,r){for(var i=-1,a=e.criteria,s=t.criteria,o=a.length,l=r.length;++i<o;){var c=sae(a[i],s[i]);if(c){if(i>=l)return c;var d=r[i];return c*(d=="desc"?-1:1)}}return e.index-t.index}var lae=oae,Hy=bN,cae=jN,dae=so,uae=M$,fae=nae,hae=b$,mae=lae,pae=Fd,gae=wn;function xae(e,t,r){t.length?t=Hy(t,function(s){return gae(s)?function(o){return cae(o,s.length===1?s[0]:s)}:s}):t=[pae];var i=-1;t=Hy(t,hae(dae));var a=uae(e,function(s,o,l){var c=Hy(t,function(d){return d(s)});return{criteria:c,index:++i,value:s}});return fae(a,function(s,o){return mae(s,o,r)})}var vae=xae;function yae(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var bae=yae,jae=bae,bA=Math.max;function wae(e,t,r){return t=bA(t===void 0?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=bA(i.length-t,0),o=Array(s);++a<s;)o[a]=i[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=i[a];return l[t]=r(o),jae(e,this,l)}}var Nae=wae;function Sae(e){return function(){return e}}var kae=Sae,Cae=dl,Aae=function(){try{var e=Cae(Object,"defineProperty");return e({},"",{}),e}catch{}}(),$$=Aae,Eae=kae,jA=$$,Pae=Fd,Tae=jA?function(e,t){return jA(e,"toString",{configurable:!0,enumerable:!1,value:Eae(t),writable:!0})}:Pae,Oae=Tae,_ae=800,Iae=16,Rae=Date.now;function Mae(e){var t=0,r=0;return function(){var i=Rae(),a=Iae-(i-r);if(r=i,a>0){if(++t>=_ae)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var $ae=Mae,Fae=Oae,Dae=$ae,Lae=Dae(Fae),Bae=Lae,zae=Fd,qae=Nae,Uae=Bae;function Vae(e,t){return Uae(qae(e,t,zae),e+"")}var Wae=Vae,Hae=gN,Kae=Mh,Gae=IN,Yae=ao;function Qae(e,t,r){if(!Yae(r))return!1;var i=typeof t;return(i=="number"?Kae(r)&&Gae(t,r.length):i=="string"&&t in r)?Hae(r[t],e):!1}var gv=Qae,Jae=I$,Xae=vae,Zae=Wae,wA=gv,ese=Zae(function(e,t){if(e==null)return[];var r=t.length;return r>1&&wA(e,t[0],t[1])?t=[]:r>2&&wA(t[0],t[1],t[2])&&(t=[t[0]]),Xae(e,Jae(t,1),[])}),tse=ese;const FN=It(tse);function Nf(e){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nf(e)}function gj(){return gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gj.apply(this,arguments)}function rse(e,t){return sse(e)||ase(e,t)||ise(e,t)||nse()}function nse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ise(e,t){if(e){if(typeof e=="string")return NA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NA(e,t)}}function NA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function ase(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function sse(e){if(Array.isArray(e))return e}function SA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function Ky(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(r),!0).forEach(function(i){ose(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SA(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ose(e,t,r){return t=lse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lse(e){var t=cse(e,"string");return Nf(t)=="symbol"?t:t+""}function cse(e,t){if(Nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Nf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dse(e){return Array.isArray(e)&&vr(e[0])&&vr(e[1])?e.join(" ~ "):e}var use=function(t){var r=t.separator,i=r===void 0?" : ":r,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,f=t.formatter,h=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,v=t.label,b=t.labelFormatter,x=t.accessibilityLayer,m=x===void 0?!1:x,j=function(){if(u&&u.length){var P={padding:0,margin:0},_=(h?FN(u,h):u).map(function(R,O){if(R.type==="none")return null;var $=Ky({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},l),M=R.formatter||f||dse,I=R.value,L=R.name,z=I,ie=L;if(M&&z!=null&&ie!=null){var U=M(I,L,R,O,u);if(Array.isArray(U)){var ee=rse(U,2);z=ee[0],ie=ee[1]}else z=U}return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:$},vr(ie)?D.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,vr(ie)?D.createElement("span",{className:"recharts-tooltip-item-separator"},i):null,D.createElement("span",{className:"recharts-tooltip-item-value"},z),D.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:P},_)}return null},N=Ky({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),w=Ky({margin:0},d),S=!ft(v),C=S?v:"",k=gt("recharts-default-tooltip",p),A=gt("recharts-tooltip-label",y);S&&b&&u!==void 0&&u!==null&&(C=b(v,u));var E=m?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",gj({className:k,style:N},E),D.createElement("p",{className:A,style:w},D.isValidElement(C)?C:"".concat(C)),j())};function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function bm(e,t,r){return t=fse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fse(e){var t=hse(e,"string");return Sf(t)=="symbol"?t:t+""}function hse(e,t){if(Sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Sf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nu="recharts-tooltip-wrapper",mse={visibility:"hidden"};function pse(e){var t=e.coordinate,r=e.translateX,i=e.translateY;return gt(nu,bm(bm(bm(bm({},"".concat(nu,"-right"),ke(r)&&t&&ke(t.x)&&r>=t.x),"".concat(nu,"-left"),ke(r)&&t&&ke(t.x)&&r<t.x),"".concat(nu,"-bottom"),ke(i)&&t&&ke(t.y)&&i>=t.y),"".concat(nu,"-top"),ke(i)&&t&&ke(t.y)&&i<t.y))}function kA(e){var t=e.allowEscapeViewBox,r=e.coordinate,i=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(s&&ke(s[i]))return s[i];var u=r[i]-l-a,f=r[i]+a;if(t[i])return o[i]?u:f;if(o[i]){var h=u,p=c[i];return h<p?Math.max(f,c[i]):Math.max(u,c[i])}var y=f+l,v=c[i]+d;return y>v?Math.max(u,c[i]):Math.max(f,c[i])}function gse(e){var t=e.translateX,r=e.translateY,i=e.useTranslate3d;return{transform:i?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function xse(e){var t=e.allowEscapeViewBox,r=e.coordinate,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,f;return o.height>0&&o.width>0&&r?(u=kA({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=kA({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=gse({translateX:u,translateY:f,useTranslate3d:l})):d=mse,{cssProperties:d,cssClasses:pse({translateX:u,translateY:f,coordinate:r})}}function Kc(e){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(e)}function CA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function AA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(r),!0).forEach(function(i){vj(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function vse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yse(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,D$(i.key),i)}}function bse(e,t,r){return t&&yse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jse(e,t,r){return t=fg(t),wse(e,F$()?Reflect.construct(t,r||[],fg(e).constructor):t.apply(e,r))}function wse(e,t){if(t&&(Kc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nse(e)}function Nse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F$=function(){return!!e})()}function fg(e){return fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fg(e)}function Sse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xj(e,t)}function xj(e,t){return xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},xj(e,t)}function vj(e,t,r){return t=D$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D$(e){var t=kse(e,"string");return Kc(t)=="symbol"?t:t+""}function kse(e,t){if(Kc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Kc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EA=1,Cse=function(e){function t(){var r;vse(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=jse(this,t,[].concat(a)),vj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),vj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return Sse(t,e),bse(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.state.lastBoundingBox.width)>EA||Math.abs(i.height-this.state.lastBoundingBox.height)>EA)&&this.setState({lastBoundingBox:{width:i.width,height:i.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,p=a.offset,y=a.position,v=a.reverseDirection,b=a.useTranslate3d,x=a.viewBox,m=a.wrapperStyle,j=xse({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:p,position:y,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:x}),N=j.cssClasses,w=j.cssProperties,S=AA(AA({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},m);return D.createElement("div",{tabIndex:-1,className:N,style:S,ref:function(k){i.wrapperNode=k}},d)}}])}(g.PureComponent),Ase=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Pa={isSsr:Ase(),get:function(t){return Pa[t]},set:function(t,r){if(typeof t=="string")Pa[t]=r;else{var i=Object.keys(t);i&&i.length&&i.forEach(function(a){Pa[a]=t[a]})}}};function Gc(e){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gc(e)}function PA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function TA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(r),!0).forEach(function(i){DN(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Ese(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pse(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,B$(i.key),i)}}function Tse(e,t,r){return t&&Pse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ose(e,t,r){return t=hg(t),_se(e,L$()?Reflect.construct(t,r||[],hg(e).constructor):t.apply(e,r))}function _se(e,t){if(t&&(Gc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ise(e)}function Ise(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L$=function(){return!!e})()}function hg(e){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hg(e)}function Rse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yj(e,t)}function yj(e,t){return yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},yj(e,t)}function DN(e,t,r){return t=B$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B$(e){var t=Mse(e,"string");return Gc(t)=="symbol"?t:t+""}function Mse(e,t){if(Gc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Gc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $se(e){return e.dataKey}function Fse(e,t){return D.isValidElement(e)?D.cloneElement(e,t):typeof e=="function"?D.createElement(e,t):D.createElement(use,t)}var vi=function(e){function t(){return Ese(this,t),Ose(this,t,arguments)}return Rse(t,e),Tse(t,[{key:"render",value:function(){var i=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,f=a.filterNull,h=a.isAnimationActive,p=a.offset,y=a.payload,v=a.payloadUniqBy,b=a.position,x=a.reverseDirection,m=a.useTranslate3d,j=a.viewBox,N=a.wrapperStyle,w=y??[];f&&w.length&&(w=P$(y.filter(function(C){return C.value!=null&&(C.hide!==!0||i.props.includeHidden)}),v,$se));var S=w.length>0;return D.createElement(Cse,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:u,hasPayload:S,offset:p,position:b,reverseDirection:x,useTranslate3d:m,viewBox:j,wrapperStyle:N},Fse(d,TA(TA({},this.props),{},{payload:w})))}}])}(g.PureComponent);DN(vi,"displayName","Tooltip");DN(vi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Pa.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Dse=la,Lse=function(){return Dse.Date.now()},Bse=Lse,zse=/\s/;function qse(e){for(var t=e.length;t--&&zse.test(e.charAt(t)););return t}var Use=qse,Vse=Use,Wse=/^\s+/;function Hse(e){return e&&e.slice(0,Vse(e)+1).replace(Wse,"")}var Kse=Hse,Gse=Kse,OA=ao,Yse=Td,_A=NaN,Qse=/^[-+]0x[0-9a-f]+$/i,Jse=/^0b[01]+$/i,Xse=/^0o[0-7]+$/i,Zse=parseInt;function eoe(e){if(typeof e=="number")return e;if(Yse(e))return _A;if(OA(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=OA(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Gse(e);var r=Jse.test(e);return r||Xse.test(e)?Zse(e.slice(2),r?2:8):Qse.test(e)?_A:+e}var z$=eoe,toe=ao,Gy=Bse,IA=z$,roe="Expected a function",noe=Math.max,ioe=Math.min;function aoe(e,t,r){var i,a,s,o,l,c,d=0,u=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(roe);t=IA(t)||0,toe(r)&&(u=!!r.leading,f="maxWait"in r,s=f?noe(IA(r.maxWait)||0,t):s,h="trailing"in r?!!r.trailing:h);function p(S){var C=i,k=a;return i=a=void 0,d=S,o=e.apply(k,C),o}function y(S){return d=S,l=setTimeout(x,t),u?p(S):o}function v(S){var C=S-c,k=S-d,A=t-C;return f?ioe(A,s-k):A}function b(S){var C=S-c,k=S-d;return c===void 0||C>=t||C<0||f&&k>=s}function x(){var S=Gy();if(b(S))return m(S);l=setTimeout(x,v(S))}function m(S){return l=void 0,h&&i?p(S):(i=a=void 0,o)}function j(){l!==void 0&&clearTimeout(l),d=0,i=c=a=l=void 0}function N(){return l===void 0?o:m(Gy())}function w(){var S=Gy(),C=b(S);if(i=arguments,a=this,c=S,C){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(x,t),p(c)}return l===void 0&&(l=setTimeout(x,t)),o}return w.cancel=j,w.flush=N,w}var soe=aoe,ooe=soe,loe=ao,coe="Expected a function";function doe(e,t,r){var i=!0,a=!0;if(typeof e!="function")throw new TypeError(coe);return loe(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),ooe(e,t,{leading:i,maxWait:t,trailing:a})}var uoe=doe;const q$=It(uoe);function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function RA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function jm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RA(Object(r),!0).forEach(function(i){foe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RA(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function foe(e,t,r){return t=hoe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hoe(e){var t=moe(e,"string");return kf(t)=="symbol"?t:t+""}function moe(e,t){if(kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(kf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function poe(e,t){return yoe(e)||voe(e,t)||xoe(e,t)||goe()}function goe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xoe(e,t){if(e){if(typeof e=="string")return MA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MA(e,t)}}function MA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function voe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function yoe(e){if(Array.isArray(e))return e}var $A=g.forwardRef(function(e,t){var r=e.aspect,i=e.initialDimension,a=i===void 0?{width:-1,height:-1}:i,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,f=e.minHeight,h=e.maxHeight,p=e.children,y=e.debounce,v=y===void 0?0:y,b=e.id,x=e.className,m=e.onResize,j=e.style,N=j===void 0?{}:j,w=g.useRef(null),S=g.useRef();S.current=m,g.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var C=g.useState({containerWidth:a.width,containerHeight:a.height}),k=poe(C,2),A=k[0],E=k[1],T=g.useCallback(function(_,R){E(function(O){var $=Math.round(_),M=Math.round(R);return O.containerWidth===$&&O.containerHeight===M?O:{containerWidth:$,containerHeight:M}})},[]);g.useEffect(function(){var _=function(L){var z,ie=L[0].contentRect,U=ie.width,ee=ie.height;T(U,ee),(z=S.current)===null||z===void 0||z.call(S,U,ee)};v>0&&(_=q$(_,v,{trailing:!0,leading:!1}));var R=new ResizeObserver(_),O=w.current.getBoundingClientRect(),$=O.width,M=O.height;return T($,M),R.observe(w.current),function(){R.disconnect()}},[T,v]);var P=g.useMemo(function(){var _=A.containerWidth,R=A.containerHeight;if(_<0||R<0)return null;Ea(So(o)||So(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ea(!r||r>0,"The aspect(%s) must be greater than zero.",r);var O=So(o)?_:o,$=So(c)?R:c;r&&r>0&&(O?$=O/r:$&&(O=$*r),h&&$>h&&($=h)),Ea(O>0||$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,$,o,c,u,f,r);var M=!Array.isArray(p)&&Aa(p.type).endsWith("Chart");return D.Children.map(p,function(I){return D.isValidElement(I)?g.cloneElement(I,jm({width:O,height:$},M?{style:jm({height:"100%",width:"100%",maxHeight:$,maxWidth:O},I.props.style)}:{})):I})},[r,p,c,h,f,u,A,o]);return D.createElement("div",{id:b?"".concat(b):void 0,className:gt("recharts-responsive-container",x),style:jm(jm({},N),{},{width:o,height:c,minWidth:u,minHeight:f,maxHeight:h}),ref:w},P)}),LN=function(t){return null};LN.displayName="Cell";function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}function FA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function bj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(r),!0).forEach(function(i){boe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FA(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function boe(e,t,r){return t=joe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function joe(e){var t=woe(e,"string");return Cf(t)=="symbol"?t:t+""}function woe(e,t){if(Cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Cf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wl={widthCache:{},cacheCount:0},Noe=2e3,Soe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},DA="recharts_measurement_span";function koe(e){var t=bj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Du=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Pa.isSsr)return{width:0,height:0};var i=koe(r),a=JSON.stringify({text:t,copyStyle:i});if(wl.widthCache[a])return wl.widthCache[a];try{var s=document.getElementById(DA);s||(s=document.createElement("span"),s.setAttribute("id",DA),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=bj(bj({},Soe),i);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return wl.widthCache[a]=c,++wl.cacheCount>Noe&&(wl.cacheCount=0,wl.widthCache={}),c}catch{return{width:0,height:0}}},Coe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}function mg(e,t){return Toe(e)||Poe(e,t)||Eoe(e,t)||Aoe()}function Aoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eoe(e,t){if(e){if(typeof e=="string")return LA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LA(e,t)}}function LA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Poe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Toe(e){if(Array.isArray(e))return e}function Ooe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BA(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ioe(i.key),i)}}function _oe(e,t,r){return t&&BA(e.prototype,t),r&&BA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ioe(e){var t=Roe(e,"string");return Af(t)=="symbol"?t:t+""}function Roe(e,t){if(Af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(Af(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Moe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$oe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,U$={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Foe=Object.keys(U$),Ul="NaN";function Doe(e,t){return e*U$[t]}var wm=function(){function e(t,r){Ooe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Moe.test(r)&&(this.num=NaN,this.unit=""),Foe.includes(r)&&(this.num=Doe(t,r),this.unit="px")}return _oe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var i,a=(i=$oe.exec(r))!==null&&i!==void 0?i:[],s=mg(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function V$(e){if(e.includes(Ul))return Ul;for(var t=e;t.includes("*")||t.includes("/");){var r,i=(r=zA.exec(t))!==null&&r!==void 0?r:[],a=mg(i,4),s=a[1],o=a[2],l=a[3],c=wm.parse(s??""),d=wm.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Ul;t=t.replace(zA,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=qA.exec(t))!==null&&f!==void 0?f:[],p=mg(h,4),y=p[1],v=p[2],b=p[3],x=wm.parse(y??""),m=wm.parse(b??""),j=v==="+"?x.add(m):x.subtract(m);if(j.isNaN())return Ul;t=t.replace(qA,j.toString())}return t}var UA=/\(([^()]*)\)/;function Loe(e){for(var t=e;t.includes("(");){var r=UA.exec(t),i=mg(r,2),a=i[1];t=t.replace(UA,V$(a))}return t}function Boe(e){var t=e.replace(/\s+/g,"");return t=Loe(t),t=V$(t),t}function zoe(e){try{return Boe(e)}catch{return Ul}}function Yy(e){var t=zoe(e.slice(5,-1));return t===Ul?"":t}var qoe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Uoe=["dx","dy","angle","className","breakAll"];function jj(){return jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},jj.apply(this,arguments)}function VA(e,t){if(e==null)return{};var r=Voe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Voe(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function WA(e,t){return Goe(e)||Koe(e,t)||Hoe(e,t)||Woe()}function Woe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hoe(e,t){if(e){if(typeof e=="string")return HA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HA(e,t)}}function HA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Koe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Goe(e){if(Array.isArray(e))return e}var W$=/[ \f\n\r\t\v\u2028\u2029]+/,H$=function(t){var r=t.children,i=t.breakAll,a=t.style;try{var s=[];ft(r)||(i?s=r.toString().split(""):s=r.toString().split(W$));var o=s.map(function(c){return{word:c,width:Du(c,a).width}}),l=i?0:Du("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Yoe=function(t,r,i,a,s){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=ke(o),f=l,h=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce(function($,M){var I=M.word,L=M.width,z=$[$.length-1];if(z&&(a==null||s||z.width+L+i<Number(a)))z.words.push(I),z.width+=L+i;else{var ie={words:[I],width:L};$.push(ie)}return $},[])},p=h(r),y=function(O){return O.reduce(function($,M){return $.width>M.width?$:M})};if(!u)return p;for(var v="",b=function(O){var $=f.slice(0,O),M=H$({breakAll:d,style:c,children:$+v}).wordsWithComputedWidth,I=h(M),L=I.length>o||y(I).width>Number(a);return[L,I]},x=0,m=f.length-1,j=0,N;x<=m&&j<=f.length-1;){var w=Math.floor((x+m)/2),S=w-1,C=b(S),k=WA(C,2),A=k[0],E=k[1],T=b(w),P=WA(T,1),_=P[0];if(!A&&!_&&(x=w+1),A&&_&&(m=w-1),!A&&_){N=E;break}j++}return N||p},KA=function(t){var r=ft(t)?[]:t.toString().split(W$);return[{words:r}]},Qoe=function(t){var r=t.width,i=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((r||i)&&!Pa.isSsr){var c,d,u=H$({breakAll:o,children:a,style:s});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;c=f,d=h}else return KA(a);return Yoe({breakAll:o,children:a,maxLines:l,style:s},c,d,r,i)}return KA(a)},GA="#808080",pg=function(t){var r=t.x,i=r===void 0?0:r,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,f=u===void 0?!1:u,h=t.textAnchor,p=h===void 0?"start":h,y=t.verticalAnchor,v=y===void 0?"end":y,b=t.fill,x=b===void 0?GA:b,m=VA(t,qoe),j=g.useMemo(function(){return Qoe({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:f,style:m.style,width:m.width})},[m.breakAll,m.children,m.maxLines,f,m.style,m.width]),N=m.dx,w=m.dy,S=m.angle,C=m.className,k=m.breakAll,A=VA(m,Uoe);if(!vr(i)||!vr(s))return null;var E=i+(ke(N)?N:0),T=s+(ke(w)?w:0),P;switch(v){case"start":P=Yy("calc(".concat(d,")"));break;case"middle":P=Yy("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:P=Yy("calc(".concat(j.length-1," * -").concat(l,")"));break}var _=[];if(f){var R=j[0].width,O=m.width;_.push("scale(".concat((ke(O)?O/R:1)/R,")"))}return S&&_.push("rotate(".concat(S,", ").concat(E,", ").concat(T,")")),_.length&&(A.transform=_.join(" ")),D.createElement("text",jj({},pt(A,!0),{x:E,y:T,className:gt("recharts-text",C),textAnchor:p,fill:x.includes("url")?GA:x}),j.map(function($,M){var I=$.words.join(k?"":" ");return D.createElement("tspan",{x:E,dy:M===0?P:l,key:"".concat(I,"-").concat(M)},I)}))};function Ls(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Joe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function BN(e){let t,r,i;e.length!==2?(t=Ls,r=(l,c)=>Ls(e(l),c),i=(l,c)=>e(l)-c):(t=e===Ls||e===Joe?e:Xoe,r=e,i=e);function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=a(l,c,d,u-1);return f>d&&i(l[f-1],c)>-i(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function Xoe(){return 0}function K$(e){return e===null?NaN:+e}function*Zoe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const ele=BN(Ls),$h=ele.right;BN(K$).center;class YA extends Map{constructor(t,r=nle){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[i,a]of t)this.set(i,a)}get(t){return super.get(QA(this,t))}has(t){return super.has(QA(this,t))}set(t,r){return super.set(tle(this,t),r)}delete(t){return super.delete(rle(this,t))}}function QA({_intern:e,_key:t},r){const i=t(r);return e.has(i)?e.get(i):r}function tle({_intern:e,_key:t},r){const i=t(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function rle({_intern:e,_key:t},r){const i=t(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function nle(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ile(e=Ls){if(e===Ls)return G$;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const i=e(t,r);return i||i===0?i:(e(r,r)===0)-(e(t,t)===0)}}function G$(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ale=Math.sqrt(50),sle=Math.sqrt(10),ole=Math.sqrt(2);function gg(e,t,r){const i=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(i)),s=i/Math.pow(10,a),o=s>=ale?10:s>=sle?5:s>=ole?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?gg(e,t,r*2):[l,c,d]}function wj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const i=t<e,[a,s,o]=i?gg(t,e,r):gg(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(i)if(o<0)for(let d=0;d<l;++d)c[d]=(s-d)/-o;else for(let d=0;d<l;++d)c[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function Nj(e,t,r){return t=+t,e=+e,r=+r,gg(e,t,r)[2]}function Sj(e,t,r){t=+t,e=+e,r=+r;const i=t<e,a=i?Nj(t,e,r):Nj(e,t,r);return(i?-1:1)*(a<0?1/-a:a)}function JA(e,t){let r;for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);return r}function XA(e,t){let r;for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);return r}function Y$(e,t,r=0,i=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),i=Math.floor(Math.min(e.length-1,i)),!(r<=t&&t<=i))return e;for(a=a===void 0?G$:ile(a);i>r;){if(i-r>600){const c=i-r+1,d=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(t-d*f/c+h)),y=Math.min(i,Math.floor(t+(c-d)*f/c+h));Y$(e,t,p,y,a)}const s=e[t];let o=r,l=i;for(iu(e,r,t),a(e[i],s)>0&&iu(e,r,i);o<l;){for(iu(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?iu(e,r,l):(++l,iu(e,l,i)),l<=t&&(r=l+1),t<=l&&(i=l-1)}return e}function iu(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function lle(e,t,r){if(e=Float64Array.from(Zoe(e)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return XA(e);if(t>=1)return JA(e);var i,a=(i-1)*t,s=Math.floor(a),o=JA(Y$(e,s).subarray(0,s+1)),l=XA(e.subarray(s+1));return o+(l-o)*(a-s)}}function cle(e,t,r=K$){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+r(e[0],0,e);if(t>=1)return+r(e[i-1],i-1,e);var i,a=(i-1)*t,s=Math.floor(a),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function dle(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var i=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++i<a;)s[i]=e+i*r;return s}function li(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const kj=Symbol("implicit");function zN(){var e=new YA,t=[],r=[],i=kj;function a(s){let o=e.get(s);if(o===void 0){if(i!==kj)return i;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new YA;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return zN(t,r).unknown(i)},li.apply(a,arguments),a}function Ef(){var e=zN().unknown(void 0),t=e.domain,r=e.range,i=0,a=1,s,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var h=t().length,p=a<i,y=p?a:i,v=p?i:a;s=(v-y)/Math.max(1,h-c+d*2),l&&(s=Math.floor(s)),y+=(v-y-s*(h-c))*u,o=s*(1-c),l&&(y=Math.round(y),o=Math.round(o));var b=dle(h).map(function(x){return y+s*x});return r(p?b.reverse():b)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([i,a]=h,i=+i,a=+a,f()):[i,a]},e.rangeRound=function(h){return[i,a]=h,i=+i,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(d=+h,f()):d},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return Ef(t(),[i,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},li.apply(f(),arguments)}function Q$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Q$(t())},e}function Lu(){return Q$(Ef.apply(null,arguments).paddingInner(1))}function qN(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function J$(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function Fh(){}var Pf=.7,xg=1/Pf,lc="\\s*([+-]?\\d+)\\s*",Tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ule=/^#([0-9a-f]{3,8})$/,fle=new RegExp(`^rgb\\(${lc},${lc},${lc}\\)$`),hle=new RegExp(`^rgb\\(${ea},${ea},${ea}\\)$`),mle=new RegExp(`^rgba\\(${lc},${lc},${lc},${Tf}\\)$`),ple=new RegExp(`^rgba\\(${ea},${ea},${ea},${Tf}\\)$`),gle=new RegExp(`^hsl\\(${Tf},${ea},${ea}\\)$`),xle=new RegExp(`^hsla\\(${Tf},${ea},${ea},${Tf}\\)$`),ZA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qN(Fh,Of,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:eE,formatHex:eE,formatHex8:vle,formatHsl:yle,formatRgb:tE,toString:tE});function eE(){return this.rgb().formatHex()}function vle(){return this.rgb().formatHex8()}function yle(){return X$(this).formatHsl()}function tE(){return this.rgb().formatRgb()}function Of(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ule.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?rE(t):r===3?new mn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Nm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Nm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fle.exec(e))?new mn(t[1],t[2],t[3],1):(t=hle.exec(e))?new mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mle.exec(e))?Nm(t[1],t[2],t[3],t[4]):(t=ple.exec(e))?Nm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gle.exec(e))?aE(t[1],t[2]/100,t[3]/100,1):(t=xle.exec(e))?aE(t[1],t[2]/100,t[3]/100,t[4]):ZA.hasOwnProperty(e)?rE(ZA[e]):e==="transparent"?new mn(NaN,NaN,NaN,0):null}function rE(e){return new mn(e>>16&255,e>>8&255,e&255,1)}function Nm(e,t,r,i){return i<=0&&(e=t=r=NaN),new mn(e,t,r,i)}function ble(e){return e instanceof Fh||(e=Of(e)),e?(e=e.rgb(),new mn(e.r,e.g,e.b,e.opacity)):new mn}function Cj(e,t,r,i){return arguments.length===1?ble(e):new mn(e,t,r,i??1)}function mn(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}qN(mn,Cj,J$(Fh,{brighter(e){return e=e==null?xg:Math.pow(xg,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pf:Math.pow(Pf,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mn(Do(this.r),Do(this.g),Do(this.b),vg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nE,formatHex:nE,formatHex8:jle,formatRgb:iE,toString:iE}));function nE(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}`}function jle(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}${ko((isNaN(this.opacity)?1:this.opacity)*255)}`}function iE(){const e=vg(this.opacity);return`${e===1?"rgb(":"rgba("}${Do(this.r)}, ${Do(this.g)}, ${Do(this.b)}${e===1?")":`, ${e})`}`}function vg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Do(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ko(e){return e=Do(e),(e<16?"0":"")+e.toString(16)}function aE(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ci(e,t,r,i)}function X$(e){if(e instanceof Ci)return new Ci(e.h,e.s,e.l,e.opacity);if(e instanceof Fh||(e=Of(e)),!e)return new Ci;if(e instanceof Ci)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),s=Math.max(t,r,i),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(r-i)/l+(r<i)*6:r===s?o=(i-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Ci(o,l,c,e.opacity)}function wle(e,t,r,i){return arguments.length===1?X$(e):new Ci(e,t,r,i??1)}function Ci(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}qN(Ci,wle,J$(Fh,{brighter(e){return e=e==null?xg:Math.pow(xg,e),new Ci(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pf:Math.pow(Pf,e),new Ci(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,a=2*r-i;return new mn(Qy(e>=240?e-240:e+120,a,i),Qy(e,a,i),Qy(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Ci(sE(this.h),Sm(this.s),Sm(this.l),vg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vg(this.opacity);return`${e===1?"hsl(":"hsla("}${sE(this.h)}, ${Sm(this.s)*100}%, ${Sm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function sE(e){return e=(e||0)%360,e<0?e+360:e}function Sm(e){return Math.max(0,Math.min(1,e||0))}function Qy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const UN=e=>()=>e;function Nle(e,t){return function(r){return e+r*t}}function Sle(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function kle(e){return(e=+e)==1?Z$:function(t,r){return r-t?Sle(t,r,e):UN(isNaN(t)?r:t)}}function Z$(e,t){var r=t-e;return r?Nle(e,r):UN(isNaN(e)?t:e)}const oE=function e(t){var r=kle(t);function i(a,s){var o=r((a=Cj(a)).r,(s=Cj(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),d=Z$(a.opacity,s.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return i.gamma=e,i}(1);function Cle(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(s){for(a=0;a<r;++a)i[a]=e[a]*(1-s)+t[a]*s;return i}}function Ale(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ele(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),s=new Array(r),o;for(o=0;o<i;++o)a[o]=Dd(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<i;++o)s[o]=a[o](l);return s}}function Ple(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}function yg(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Tle(e,t){var r={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Dd(e[a],t[a]):i[a]=t[a];return function(s){for(a in r)i[a]=r[a](s);return i}}var Aj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jy=new RegExp(Aj.source,"g");function Ole(e){return function(){return e}}function _le(e){return function(t){return e(t)+""}}function Ile(e,t){var r=Aj.lastIndex=Jy.lastIndex=0,i,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(i=Aj.exec(e))&&(a=Jy.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:yg(i,a)})),r=Jy.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?_le(c[0].x):Ole(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function Dd(e,t){var r=typeof t,i;return t==null||r==="boolean"?UN(t):(r==="number"?yg:r==="string"?(i=Of(t))?(t=i,oE):Ile:t instanceof Of?oE:t instanceof Date?Ple:Ale(t)?Cle:Array.isArray(t)?Ele:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Tle:yg)(e,t)}function VN(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Rle(e,t){t===void 0&&(t=e,e=Dd);for(var r=0,i=t.length-1,a=t[0],s=new Array(i<0?0:i);r<i;)s[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[l](o-l)}}function Mle(e){return function(){return e}}function bg(e){return+e}var lE=[0,1];function nn(e){return e}function Ej(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Mle(isNaN(t)?NaN:.5)}function $le(e,t){var r;return e>t&&(r=e,e=t,t=r),function(i){return Math.max(e,Math.min(t,i))}}function Fle(e,t,r){var i=e[0],a=e[1],s=t[0],o=t[1];return a<i?(i=Ej(a,i),s=r(o,s)):(i=Ej(i,a),s=r(s,o)),function(l){return s(i(l))}}function Dle(e,t,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),s=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)a[o]=Ej(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=$h(e,l,1,i)-1;return s[c](a[c](l))}}function Dh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xv(){var e=lE,t=lE,r=Dd,i,a,s,o=nn,l,c,d;function u(){var h=Math.min(e.length,t.length);return o!==nn&&(o=$le(e[0],e[h-1])),l=h>2?Dle:Fle,c=d=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(i),t,r)))(i(o(h)))}return f.invert=function(h){return o(a((d||(d=l(t,e.map(i),yg)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,bg),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=VN,u()},f.clamp=function(h){return arguments.length?(o=h?!0:nn,u()):o!==nn},f.interpolate=function(h){return arguments.length?(r=h,u()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return i=h,a=p,u()}}function WN(){return xv()(nn,nn)}function Lle(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function jg(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function Yc(e){return e=jg(Math.abs(e)),e?e[1]:NaN}function Ble(e,t){return function(r,i){for(var a=r.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>i));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function zle(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var qle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _f(e){if(!(t=qle.exec(e)))throw new Error("invalid format: "+e);var t;return new HN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_f.prototype=HN.prototype;function HN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}HN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ule(e){e:for(var t=e.length,r=1,i=-1,a;r<t;++r)switch(e[r]){case".":i=a=r;break;case"0":i===0&&(i=r),a=r;break;default:if(!+e[r])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var eF;function Vle(e,t){var r=jg(e,t);if(!r)return e+"";var i=r[0],a=r[1],s=a-(eF=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+jg(e,Math.max(0,t+s-1))[0]}function cE(e,t){var r=jg(e,t);if(!r)return e+"";var i=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const dE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Lle,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>cE(e*100,t),r:cE,s:Vle,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uE(e){return e}var fE=Array.prototype.map,hE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Wle(e){var t=e.grouping===void 0||e.thousands===void 0?uE:Ble(fE.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?uE:zle(fE.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=_f(f);var h=f.fill,p=f.align,y=f.sign,v=f.symbol,b=f.zero,x=f.width,m=f.comma,j=f.precision,N=f.trim,w=f.type;w==="n"?(m=!0,w="g"):dE[w]||(j===void 0&&(j=12),N=!0,w="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var S=v==="$"?r:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",C=v==="$"?i:/[%p]/.test(w)?o:"",k=dE[w],A=/[defgprs%]/.test(w);j=j===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function E(T){var P=S,_=C,R,O,$;if(w==="c")_=k(T)+_,T="";else{T=+T;var M=T<0||1/T<0;if(T=isNaN(T)?c:k(Math.abs(T),j),N&&(T=Ule(T)),M&&+T==0&&y!=="+"&&(M=!1),P=(M?y==="("?y:l:y==="-"||y==="("?"":y)+P,_=(w==="s"?hE[8+eF/3]:"")+_+(M&&y==="("?")":""),A){for(R=-1,O=T.length;++R<O;)if($=T.charCodeAt(R),48>$||$>57){_=($===46?a+T.slice(R+1):T.slice(R))+_,T=T.slice(0,R);break}}}m&&!b&&(T=t(T,1/0));var I=P.length+T.length+_.length,L=I<x?new Array(x-I+1).join(h):"";switch(m&&b&&(T=t(L+T,L.length?x-_.length:1/0),L=""),p){case"<":T=P+T+_+L;break;case"=":T=P+L+T+_;break;case"^":T=L.slice(0,I=L.length>>1)+P+T+_+L.slice(I);break;default:T=L+P+T+_;break}return s(T)}return E.toString=function(){return f+""},E}function u(f,h){var p=d((f=_f(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Yc(h)/3)))*3,v=Math.pow(10,-y),b=hE[8+y/3];return function(x){return p(v*x)+b}}return{format:d,formatPrefix:u}}var km,KN,tF;Hle({thousands:",",grouping:[3],currency:["$",""]});function Hle(e){return km=Wle(e),KN=km.format,tF=km.formatPrefix,km}function Kle(e){return Math.max(0,-Yc(Math.abs(e)))}function Gle(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yc(t)/3)))*3-Yc(Math.abs(e)))}function Yle(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yc(t)-Yc(e))+1}function rF(e,t,r,i){var a=Sj(e,t,r),s;switch(i=_f(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=Gle(a,o))&&(i.precision=s),tF(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Yle(a,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Kle(a))&&(i.precision=s-(i.type==="%")*2);break}}return KN(i)}function oo(e){var t=e.domain;return e.ticks=function(r){var i=t();return wj(i[0],i[i.length-1],r??10)},e.tickFormat=function(r,i){var a=t();return rF(a[0],a[a.length-1],r??10,i)},e.nice=function(r){r==null&&(r=10);var i=t(),a=0,s=i.length-1,o=i[a],l=i[s],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=a,a=s,s=d);u-- >0;){if(d=Nj(o,l,r),d===c)return i[a]=o,i[s]=l,t(i);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function wg(){var e=WN();return e.copy=function(){return Dh(e,wg())},li.apply(e,arguments),oo(e)}function nF(e){var t;function r(i){return i==null||isNaN(i=+i)?t:i}return r.invert=r,r.domain=r.range=function(i){return arguments.length?(e=Array.from(i,bg),r):e.slice()},r.unknown=function(i){return arguments.length?(t=i,r):t},r.copy=function(){return nF(e).unknown(t)},e=arguments.length?Array.from(e,bg):[0,1],oo(r)}function iF(e,t){e=e.slice();var r=0,i=e.length-1,a=e[r],s=e[i],o;return s<a&&(o=r,r=i,i=o,o=a,a=s,s=o),e[r]=t.floor(a),e[i]=t.ceil(s),e}function mE(e){return Math.log(e)}function pE(e){return Math.exp(e)}function Qle(e){return-Math.log(-e)}function Jle(e){return-Math.exp(-e)}function Xle(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Zle(e){return e===10?Xle:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ece(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function gE(e){return(t,r)=>-e(-t,r)}function GN(e){const t=e(mE,pE),r=t.domain;let i=10,a,s;function o(){return a=ece(i),s=Zle(i),r()[0]<0?(a=gE(a),s=gE(s),e(Qle,Jle)):e(mE,pE),t}return t.base=function(l){return arguments.length?(i=+l,o()):i},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let h=a(d),p=a(u),y,v;const b=l==null?10:+l;let x=[];if(!(i%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),d>0){for(;h<=p;++h)for(y=1;y<i;++y)if(v=h<0?y/s(-h):y*s(h),!(v<d)){if(v>u)break;x.push(v)}}else for(;h<=p;++h)for(y=i-1;y>=1;--y)if(v=h>0?y/s(-h):y*s(h),!(v<d)){if(v>u)break;x.push(v)}x.length*2<b&&(x=wj(d,u,b))}else x=wj(h,p,Math.min(p-h,b)).map(s);return f?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=_f(c)).precision==null&&(c.trim=!0),c=KN(c)),l===1/0)return c;const d=Math.max(1,i*l/t.ticks().length);return u=>{let f=u/s(Math.round(a(u)));return f*i<i-.5&&(f*=i),f<=d?c(u):""}},t.nice=()=>r(iF(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function aF(){const e=GN(xv()).domain([1,10]);return e.copy=()=>Dh(e,aF()).base(e.base()),li.apply(e,arguments),e}function xE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function vE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function YN(e){var t=1,r=e(xE(t),vE(t));return r.constant=function(i){return arguments.length?e(xE(t=+i),vE(t)):t},oo(r)}function sF(){var e=YN(xv());return e.copy=function(){return Dh(e,sF()).constant(e.constant())},li.apply(e,arguments)}function yE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tce(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rce(e){return e<0?-e*e:e*e}function QN(e){var t=e(nn,nn),r=1;function i(){return r===1?e(nn,nn):r===.5?e(tce,rce):e(yE(r),yE(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,i()):r},oo(t)}function JN(){var e=QN(xv());return e.copy=function(){return Dh(e,JN()).exponent(e.exponent())},li.apply(e,arguments),e}function nce(){return JN.apply(null,arguments).exponent(.5)}function bE(e){return Math.sign(e)*e*e}function ice(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function oF(){var e=WN(),t=[0,1],r=!1,i;function a(s){var o=ice(e(s));return isNaN(o)?i:r?Math.round(o):o}return a.invert=function(s){return e.invert(bE(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,bg)).map(bE)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return oF(e.domain(),t).round(r).clamp(e.clamp()).unknown(i)},li.apply(a,arguments),oo(a)}function lF(){var e=[],t=[],r=[],i;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=cle(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?i:t[$h(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ls),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return r.slice()},s.copy=function(){return lF().domain(e).range(t).unknown(i)},li.apply(s,arguments)}function cF(){var e=0,t=1,r=1,i=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[$h(i,c,0,r)]:s}function l(){var c=-1;for(i=new Array(r);++c<r;)i[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,i[0]]:d>=r?[i[r-1],t]:[i[d-1],i[d]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return i.slice()},o.copy=function(){return cF().domain([e,t]).range(a).unknown(s)},li.apply(oo(o),arguments)}function dF(){var e=[.5],t=[0,1],r,i=1;function a(s){return s!=null&&s<=s?t[$h(e,s,0,i)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return dF().domain(e).range(t).unknown(r)},li.apply(a,arguments)}const Xy=new Date,Zy=new Date;function wr(e,t,r,i){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let d;do c.push(d=new Date(+s)),t(s,l),e(s);while(d<s&&s<o);return c},a.filter=s=>wr(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(a.count=(s,o)=>(Xy.setTime(+s),Zy.setTime(+o),e(Xy),e(Zy),Math.floor(r(Xy,Zy))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(i?o=>i(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Ng=wr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ng.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Ng);Ng.range;const ba=1e3,Jn=ba*60,ja=Jn*60,qa=ja*24,XN=qa*7,jE=qa*30,eb=qa*365,Co=wr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ba)},(e,t)=>(t-e)/ba,e=>e.getUTCSeconds());Co.range;const ZN=wr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ba)},(e,t)=>{e.setTime(+e+t*Jn)},(e,t)=>(t-e)/Jn,e=>e.getMinutes());ZN.range;const eS=wr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jn)},(e,t)=>(t-e)/Jn,e=>e.getUTCMinutes());eS.range;const tS=wr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ba-e.getMinutes()*Jn)},(e,t)=>{e.setTime(+e+t*ja)},(e,t)=>(t-e)/ja,e=>e.getHours());tS.range;const rS=wr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ja)},(e,t)=>(t-e)/ja,e=>e.getUTCHours());rS.range;const Lh=wr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jn)/qa,e=>e.getDate()-1);Lh.range;const vv=wr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qa,e=>e.getUTCDate()-1);vv.range;const uF=wr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qa,e=>Math.floor(e/qa));uF.range;function ul(e){return wr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Jn)/XN)}const yv=ul(0),Sg=ul(1),ace=ul(2),sce=ul(3),Qc=ul(4),oce=ul(5),lce=ul(6);yv.range;Sg.range;ace.range;sce.range;Qc.range;oce.range;lce.range;function fl(e){return wr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/XN)}const bv=fl(0),kg=fl(1),cce=fl(2),dce=fl(3),Jc=fl(4),uce=fl(5),fce=fl(6);bv.range;kg.range;cce.range;dce.range;Jc.range;uce.range;fce.range;const nS=wr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());nS.range;const iS=wr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());iS.range;const Ua=wr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ua.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ua.range;const Va=wr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Va.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Va.range;function fF(e,t,r,i,a,s){const o=[[Co,1,ba],[Co,5,5*ba],[Co,15,15*ba],[Co,30,30*ba],[s,1,Jn],[s,5,5*Jn],[s,15,15*Jn],[s,30,30*Jn],[a,1,ja],[a,3,3*ja],[a,6,6*ja],[a,12,12*ja],[i,1,qa],[i,2,2*qa],[r,1,XN],[t,1,jE],[t,3,3*jE],[e,1,eb]];function l(d,u,f){const h=u<d;h&&([d,u]=[u,d]);const p=f&&typeof f.range=="function"?f:c(d,u,f),y=p?p.range(d,+u+1):[];return h?y.reverse():y}function c(d,u,f){const h=Math.abs(u-d)/f,p=BN(([,,b])=>b).right(o,h);if(p===o.length)return e.every(Sj(d/eb,u/eb,f));if(p===0)return Ng.every(Math.max(Sj(d,u,f),1));const[y,v]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return y.every(v)}return[l,c]}const[hce,mce]=fF(Va,iS,bv,uF,rS,eS),[pce,gce]=fF(Ua,nS,yv,Lh,tS,ZN);function tb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function rb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function au(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function xce(e){var t=e.dateTime,r=e.date,i=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=su(a),u=ou(a),f=su(s),h=ou(s),p=su(o),y=ou(o),v=su(l),b=ou(l),x=su(c),m=ou(c),j={a:M,A:I,b:L,B:z,c:null,d:AE,e:AE,f:Bce,g:Qce,G:Xce,H:Fce,I:Dce,j:Lce,L:hF,m:zce,M:qce,p:ie,q:U,Q:TE,s:OE,S:Uce,u:Vce,U:Wce,V:Hce,w:Kce,W:Gce,x:null,X:null,y:Yce,Y:Jce,Z:Zce,"%":PE},N={a:ee,A:de,b:oe,B:Pe,c:null,d:EE,e:EE,f:nde,g:hde,G:pde,H:ede,I:tde,j:rde,L:pF,m:ide,M:ade,p:ve,q:ye,Q:TE,s:OE,S:sde,u:ode,U:lde,V:cde,w:dde,W:ude,x:null,X:null,y:fde,Y:mde,Z:gde,"%":PE},w={a:E,A:T,b:P,B:_,c:R,d:kE,e:kE,f:Ice,g:SE,G:NE,H:CE,I:CE,j:Pce,L:_ce,m:Ece,M:Tce,p:A,q:Ace,Q:Mce,s:$ce,S:Oce,u:wce,U:Nce,V:Sce,w:jce,W:kce,x:O,X:$,y:SE,Y:NE,Z:Cce,"%":Rce};j.x=S(r,j),j.X=S(i,j),j.c=S(t,j),N.x=S(r,N),N.X=S(i,N),N.c=S(t,N);function S(ne,H){return function(B){var J=[],ze=-1,ue=0,Ae=ne.length,Ke,nt,jt;for(B instanceof Date||(B=new Date(+B));++ze<Ae;)ne.charCodeAt(ze)===37&&(J.push(ne.slice(ue,ze)),(nt=wE[Ke=ne.charAt(++ze)])!=null?Ke=ne.charAt(++ze):nt=Ke==="e"?" ":"0",(jt=H[Ke])&&(Ke=jt(B,nt)),J.push(Ke),ue=ze+1);return J.push(ne.slice(ue,ze)),J.join("")}}function C(ne,H){return function(B){var J=au(1900,void 0,1),ze=k(J,ne,B+="",0),ue,Ae;if(ze!=B.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(H&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(ue=rb(au(J.y,0,1)),Ae=ue.getUTCDay(),ue=Ae>4||Ae===0?kg.ceil(ue):kg(ue),ue=vv.offset(ue,(J.V-1)*7),J.y=ue.getUTCFullYear(),J.m=ue.getUTCMonth(),J.d=ue.getUTCDate()+(J.w+6)%7):(ue=tb(au(J.y,0,1)),Ae=ue.getDay(),ue=Ae>4||Ae===0?Sg.ceil(ue):Sg(ue),ue=Lh.offset(ue,(J.V-1)*7),J.y=ue.getFullYear(),J.m=ue.getMonth(),J.d=ue.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),Ae="Z"in J?rb(au(J.y,0,1)).getUTCDay():tb(au(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(Ae+5)%7:J.w+J.U*7-(Ae+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,rb(J)):tb(J)}}function k(ne,H,B,J){for(var ze=0,ue=H.length,Ae=B.length,Ke,nt;ze<ue;){if(J>=Ae)return-1;if(Ke=H.charCodeAt(ze++),Ke===37){if(Ke=H.charAt(ze++),nt=w[Ke in wE?H.charAt(ze++):Ke],!nt||(J=nt(ne,B,J))<0)return-1}else if(Ke!=B.charCodeAt(J++))return-1}return J}function A(ne,H,B){var J=d.exec(H.slice(B));return J?(ne.p=u.get(J[0].toLowerCase()),B+J[0].length):-1}function E(ne,H,B){var J=p.exec(H.slice(B));return J?(ne.w=y.get(J[0].toLowerCase()),B+J[0].length):-1}function T(ne,H,B){var J=f.exec(H.slice(B));return J?(ne.w=h.get(J[0].toLowerCase()),B+J[0].length):-1}function P(ne,H,B){var J=x.exec(H.slice(B));return J?(ne.m=m.get(J[0].toLowerCase()),B+J[0].length):-1}function _(ne,H,B){var J=v.exec(H.slice(B));return J?(ne.m=b.get(J[0].toLowerCase()),B+J[0].length):-1}function R(ne,H,B){return k(ne,t,H,B)}function O(ne,H,B){return k(ne,r,H,B)}function $(ne,H,B){return k(ne,i,H,B)}function M(ne){return o[ne.getDay()]}function I(ne){return s[ne.getDay()]}function L(ne){return c[ne.getMonth()]}function z(ne){return l[ne.getMonth()]}function ie(ne){return a[+(ne.getHours()>=12)]}function U(ne){return 1+~~(ne.getMonth()/3)}function ee(ne){return o[ne.getUTCDay()]}function de(ne){return s[ne.getUTCDay()]}function oe(ne){return c[ne.getUTCMonth()]}function Pe(ne){return l[ne.getUTCMonth()]}function ve(ne){return a[+(ne.getUTCHours()>=12)]}function ye(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var H=S(ne+="",j);return H.toString=function(){return ne},H},parse:function(ne){var H=C(ne+="",!1);return H.toString=function(){return ne},H},utcFormat:function(ne){var H=S(ne+="",N);return H.toString=function(){return ne},H},utcParse:function(ne){var H=C(ne+="",!0);return H.toString=function(){return ne},H}}}var wE={"-":"",_:" ",0:"0"},Er=/^\s*\d+/,vce=/^%/,yce=/[\\^$*+?|[\]().{}]/g;function bt(e,t,r){var i=e<0?"-":"",a=(i?-e:e)+"",s=a.length;return i+(s<r?new Array(r-s+1).join(t)+a:a)}function bce(e){return e.replace(yce,"\\$&")}function su(e){return new RegExp("^(?:"+e.map(bce).join("|")+")","i")}function ou(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function jce(e,t,r){var i=Er.exec(t.slice(r,r+1));return i?(e.w=+i[0],r+i[0].length):-1}function wce(e,t,r){var i=Er.exec(t.slice(r,r+1));return i?(e.u=+i[0],r+i[0].length):-1}function Nce(e,t,r){var i=Er.exec(t.slice(r,r+2));return i?(e.U=+i[0],r+i[0].length):-1}function Sce(e,t,r){var i=Er.exec(t.slice(r,r+2));return i?(e.V=+i[0],r+i[0].length):-1}function kce(e,t,r){var i=Er.exec(t.slice(r,r+2));return i?(e.W=+i[0],r+i[0].length):-1}function NE(e,t,r){var i=Er.exec(t.slice(r,r+4));return i?(e.y=+i[0],r+i[0].length):-1}function SE(e,t,r){var i=Er.exec(t.slice(r,r+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function Cce(e,t,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function Ace(e,t,r){var i=Er.exec(t.slice(r,r+1));return i?(e.q=i[0]*3-3,r+i[0].length):-1}function Ece(e,t,r){var i=Er.exec(t.slice(r,r+2));return i?(e.m=i[0]-1,r+i[0].length):-1}function kE(e,t,r){var i=Er.exec(t.slice(r,r+2));return i?(e.d=+i[0],r+i[0].length):-1}function Pce(e,t,r){var i=Er.exec(t.slice(r,r+3));return i?(e.m=0,e.d=+i[0],r+i[0].length):-1}function CE(e,t,r){var i=Er.exec(t.slice(r,r+2));return i?(e.H=+i[0],r+i[0].length):-1}function Tce(e,t,r){var i=Er.exec(t.slice(r,r+2));return i?(e.M=+i[0],r+i[0].length):-1}function Oce(e,t,r){var i=Er.exec(t.slice(r,r+2));return i?(e.S=+i[0],r+i[0].length):-1}function _ce(e,t,r){var i=Er.exec(t.slice(r,r+3));return i?(e.L=+i[0],r+i[0].length):-1}function Ice(e,t,r){var i=Er.exec(t.slice(r,r+6));return i?(e.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function Rce(e,t,r){var i=vce.exec(t.slice(r,r+1));return i?r+i[0].length:-1}function Mce(e,t,r){var i=Er.exec(t.slice(r));return i?(e.Q=+i[0],r+i[0].length):-1}function $ce(e,t,r){var i=Er.exec(t.slice(r));return i?(e.s=+i[0],r+i[0].length):-1}function AE(e,t){return bt(e.getDate(),t,2)}function Fce(e,t){return bt(e.getHours(),t,2)}function Dce(e,t){return bt(e.getHours()%12||12,t,2)}function Lce(e,t){return bt(1+Lh.count(Ua(e),e),t,3)}function hF(e,t){return bt(e.getMilliseconds(),t,3)}function Bce(e,t){return hF(e,t)+"000"}function zce(e,t){return bt(e.getMonth()+1,t,2)}function qce(e,t){return bt(e.getMinutes(),t,2)}function Uce(e,t){return bt(e.getSeconds(),t,2)}function Vce(e){var t=e.getDay();return t===0?7:t}function Wce(e,t){return bt(yv.count(Ua(e)-1,e),t,2)}function mF(e){var t=e.getDay();return t>=4||t===0?Qc(e):Qc.ceil(e)}function Hce(e,t){return e=mF(e),bt(Qc.count(Ua(e),e)+(Ua(e).getDay()===4),t,2)}function Kce(e){return e.getDay()}function Gce(e,t){return bt(Sg.count(Ua(e)-1,e),t,2)}function Yce(e,t){return bt(e.getFullYear()%100,t,2)}function Qce(e,t){return e=mF(e),bt(e.getFullYear()%100,t,2)}function Jce(e,t){return bt(e.getFullYear()%1e4,t,4)}function Xce(e,t){var r=e.getDay();return e=r>=4||r===0?Qc(e):Qc.ceil(e),bt(e.getFullYear()%1e4,t,4)}function Zce(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+bt(t/60|0,"0",2)+bt(t%60,"0",2)}function EE(e,t){return bt(e.getUTCDate(),t,2)}function ede(e,t){return bt(e.getUTCHours(),t,2)}function tde(e,t){return bt(e.getUTCHours()%12||12,t,2)}function rde(e,t){return bt(1+vv.count(Va(e),e),t,3)}function pF(e,t){return bt(e.getUTCMilliseconds(),t,3)}function nde(e,t){return pF(e,t)+"000"}function ide(e,t){return bt(e.getUTCMonth()+1,t,2)}function ade(e,t){return bt(e.getUTCMinutes(),t,2)}function sde(e,t){return bt(e.getUTCSeconds(),t,2)}function ode(e){var t=e.getUTCDay();return t===0?7:t}function lde(e,t){return bt(bv.count(Va(e)-1,e),t,2)}function gF(e){var t=e.getUTCDay();return t>=4||t===0?Jc(e):Jc.ceil(e)}function cde(e,t){return e=gF(e),bt(Jc.count(Va(e),e)+(Va(e).getUTCDay()===4),t,2)}function dde(e){return e.getUTCDay()}function ude(e,t){return bt(kg.count(Va(e)-1,e),t,2)}function fde(e,t){return bt(e.getUTCFullYear()%100,t,2)}function hde(e,t){return e=gF(e),bt(e.getUTCFullYear()%100,t,2)}function mde(e,t){return bt(e.getUTCFullYear()%1e4,t,4)}function pde(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Jc(e):Jc.ceil(e),bt(e.getUTCFullYear()%1e4,t,4)}function gde(){return"+0000"}function PE(){return"%"}function TE(e){return+e}function OE(e){return Math.floor(+e/1e3)}var Nl,xF,vF;xde({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xde(e){return Nl=xce(e),xF=Nl.format,Nl.parse,vF=Nl.utcFormat,Nl.utcParse,Nl}function vde(e){return new Date(e)}function yde(e){return e instanceof Date?+e:+new Date(+e)}function aS(e,t,r,i,a,s,o,l,c,d){var u=WN(),f=u.invert,h=u.domain,p=d(".%L"),y=d(":%S"),v=d("%I:%M"),b=d("%I %p"),x=d("%a %d"),m=d("%b %d"),j=d("%B"),N=d("%Y");function w(S){return(c(S)<S?p:l(S)<S?y:o(S)<S?v:s(S)<S?b:i(S)<S?a(S)<S?x:m:r(S)<S?j:N)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?h(Array.from(S,yde)):h().map(vde)},u.ticks=function(S){var C=h();return e(C[0],C[C.length-1],S??10)},u.tickFormat=function(S,C){return C==null?w:d(C)},u.nice=function(S){var C=h();return(!S||typeof S.range!="function")&&(S=t(C[0],C[C.length-1],S??10)),S?h(iF(C,S)):u},u.copy=function(){return Dh(u,aS(e,t,r,i,a,s,o,l,c,d))},u}function bde(){return li.apply(aS(pce,gce,Ua,nS,yv,Lh,tS,ZN,Co,xF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jde(){return li.apply(aS(hce,mce,Va,iS,bv,vv,rS,eS,Co,vF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function jv(){var e=0,t=1,r,i,a,s,o=nn,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),i=s(t=+t),a=r===i?0:1/(i-r),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(h){var p,y;return arguments.length?([p,y]=h,o=f(p,y),d):[o(0),o(1)]}}return d.range=u(Dd),d.rangeRound=u(VN),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return s=f,r=f(e),i=f(t),a=r===i?0:1/(i-r),d}}function lo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yF(){var e=oo(jv()(nn));return e.copy=function(){return lo(e,yF())},Qa.apply(e,arguments)}function bF(){var e=GN(jv()).domain([1,10]);return e.copy=function(){return lo(e,bF()).base(e.base())},Qa.apply(e,arguments)}function jF(){var e=YN(jv());return e.copy=function(){return lo(e,jF()).constant(e.constant())},Qa.apply(e,arguments)}function sS(){var e=QN(jv());return e.copy=function(){return lo(e,sS()).exponent(e.exponent())},Qa.apply(e,arguments)}function wde(){return sS.apply(null,arguments).exponent(.5)}function wF(){var e=[],t=nn;function r(i){if(i!=null&&!isNaN(i=+i))return t(($h(e,i,1)-1)/(e.length-1))}return r.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let a of i)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ls),r},r.interpolator=function(i){return arguments.length?(t=i,r):t},r.range=function(){return e.map((i,a)=>t(a/(e.length-1)))},r.quantiles=function(i){return Array.from({length:i+1},(a,s)=>lle(e,s/i))},r.copy=function(){return wF(t).domain(e)},Qa.apply(r,arguments)}function wv(){var e=0,t=.5,r=1,i=1,a,s,o,l,c,d=nn,u,f=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+u(v))-s)*(i*v<i*s?l:c),d(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,a=u(e=+e),s=u(t=+t),o=u(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),i=s<a?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(d=v,p):d};function y(v){return function(b){var x,m,j;return arguments.length?([x,m,j]=b,d=Rle(v,[x,m,j]),p):[d(0),d(.5),d(1)]}}return p.range=y(Dd),p.rangeRound=y(VN),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return u=v,a=v(e),s=v(t),o=v(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),i=s<a?-1:1,p}}function NF(){var e=oo(wv()(nn));return e.copy=function(){return lo(e,NF())},Qa.apply(e,arguments)}function SF(){var e=GN(wv()).domain([.1,1,10]);return e.copy=function(){return lo(e,SF()).base(e.base())},Qa.apply(e,arguments)}function kF(){var e=YN(wv());return e.copy=function(){return lo(e,kF()).constant(e.constant())},Qa.apply(e,arguments)}function oS(){var e=QN(wv());return e.copy=function(){return lo(e,oS()).exponent(e.exponent())},Qa.apply(e,arguments)}function Nde(){return oS.apply(null,arguments).exponent(.5)}const _E=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ef,scaleDiverging:NF,scaleDivergingLog:SF,scaleDivergingPow:oS,scaleDivergingSqrt:Nde,scaleDivergingSymlog:kF,scaleIdentity:nF,scaleImplicit:kj,scaleLinear:wg,scaleLog:aF,scaleOrdinal:zN,scalePoint:Lu,scalePow:JN,scaleQuantile:lF,scaleQuantize:cF,scaleRadial:oF,scaleSequential:yF,scaleSequentialLog:bF,scaleSequentialPow:sS,scaleSequentialQuantile:wF,scaleSequentialSqrt:wde,scaleSequentialSymlog:jF,scaleSqrt:nce,scaleSymlog:sF,scaleThreshold:dF,scaleTime:bde,scaleUtc:jde,tickFormat:rF},Symbol.toStringTag,{value:"Module"}));var Sde=Td;function kde(e,t,r){for(var i=-1,a=e.length;++i<a;){var s=e[i],o=t(s);if(o!=null&&(l===void 0?o===o&&!Sde(o):r(o,l)))var l=o,c=s}return c}var CF=kde;function Cde(e,t){return e>t}var Ade=Cde,Ede=CF,Pde=Ade,Tde=Fd;function Ode(e){return e&&e.length?Ede(e,Tde,Pde):void 0}var _de=Ode;const Nv=It(_de);function Ide(e,t){return e<t}var Rde=Ide,Mde=CF,$de=Rde,Fde=Fd;function Dde(e){return e&&e.length?Mde(e,Fde,$de):void 0}var Lde=Dde;const Sv=It(Lde);var Bde=bN,zde=so,qde=M$,Ude=wn;function Vde(e,t){var r=Ude(e)?Bde:qde;return r(e,zde(t))}var Wde=Vde,Hde=I$,Kde=Wde;function Gde(e,t){return Hde(Kde(e,t),1)}var Yde=Gde;const Qde=It(Yde);var Jde=MN;function Xde(e,t){return Jde(e,t)}var Zde=Xde;const kv=It(Zde);var Ld=1e9,eue={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},cS,Vt=!0,ii="[DecimalError] ",Lo=ii+"Invalid argument: ",lS=ii+"Exponent out of range: ",Bd=Math.floor,vo=Math.pow,tue=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tn,Sr=1e7,Bt=7,AF=9007199254740991,Cg=Bd(AF/Bt),$e={};$e.absoluteValue=$e.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$e.comparedTo=$e.cmp=function(e){var t,r,i,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(i=s.d.length,a=e.d.length,t=0,r=i<a?i:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return i===a?0:i>a^s.s<0?1:-1};$e.decimalPlaces=$e.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Bt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};$e.dividedBy=$e.div=function(e){return Ta(this,new this.constructor(e))};$e.dividedToIntegerBy=$e.idiv=function(e){var t=this,r=t.constructor;return Rt(Ta(t,new r(e),0,1),r.precision)};$e.equals=$e.eq=function(e){return!this.cmp(e)};$e.exponent=function(){return fr(this)};$e.greaterThan=$e.gt=function(e){return this.cmp(e)>0};$e.greaterThanOrEqualTo=$e.gte=function(e){return this.cmp(e)>=0};$e.isInteger=$e.isint=function(){return this.e>this.d.length-2};$e.isNegative=$e.isneg=function(){return this.s<0};$e.isPositive=$e.ispos=function(){return this.s>0};$e.isZero=function(){return this.s===0};$e.lessThan=$e.lt=function(e){return this.cmp(e)<0};$e.lessThanOrEqualTo=$e.lte=function(e){return this.cmp(e)<1};$e.logarithm=$e.log=function(e){var t,r=this,i=r.constructor,a=i.precision,s=a+5;if(e===void 0)e=new i(10);else if(e=new i(e),e.s<1||e.eq(Tn))throw Error(ii+"NaN");if(r.s<1)throw Error(ii+(r.s?"NaN":"-Infinity"));return r.eq(Tn)?new i(0):(Vt=!1,t=Ta(If(r,s),If(e,s),s),Vt=!0,Rt(t,a))};$e.minus=$e.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?TF(t,e):EF(t,(e.s=-e.s,e))};$e.modulo=$e.mod=function(e){var t,r=this,i=r.constructor,a=i.precision;if(e=new i(e),!e.s)throw Error(ii+"NaN");return r.s?(Vt=!1,t=Ta(r,e,0,1).times(e),Vt=!0,r.minus(t)):Rt(new i(r),a)};$e.naturalExponential=$e.exp=function(){return PF(this)};$e.naturalLogarithm=$e.ln=function(){return If(this)};$e.negated=$e.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$e.plus=$e.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?EF(t,e):TF(t,(e.s=-e.s,e))};$e.precision=$e.sd=function(e){var t,r,i,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Lo+e);if(t=fr(a)+1,i=a.d.length-1,r=i*Bt+1,i=a.d[i],i){for(;i%10==0;i/=10)r--;for(i=a.d[0];i>=10;i/=10)r++}return e&&t>r?t:r};$e.squareRoot=$e.sqrt=function(){var e,t,r,i,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ii+"NaN")}for(e=fr(l),Vt=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Yi(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Bd((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),i=new c(t)):i=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=i,i=s.plus(Ta(l,s,o+2)).times(.5),Yi(s.d).slice(0,o)===(t=Yi(i.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Rt(s,r+1,0),s.times(s).eq(l)){i=s;break}}else if(t!="9999")break;o+=4}return Vt=!0,Rt(i,r)};$e.times=$e.mul=function(e){var t,r,i,a,s,o,l,c,d,u=this,f=u.constructor,h=u.d,p=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,c=h.length,d=p.length,c<d&&(s=h,h=p,p=s,o=c,c=d,d=o),s=[],o=c+d,i=o;i--;)s.push(0);for(i=d;--i>=0;){for(t=0,a=c+i;a>i;)l=s[a]+p[i]*h[a-i-1]+t,s[a--]=l%Sr|0,t=l/Sr|0;s[a]=(s[a]+t)%Sr|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Vt?Rt(e,f.precision):e};$e.toDecimalPlaces=$e.todp=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(sa(e,0,Ld),t===void 0?t=i.rounding:sa(t,0,8),Rt(r,e+fr(r)+1,t))};$e.toExponential=function(e,t){var r,i=this,a=i.constructor;return e===void 0?r=tl(i,!0):(sa(e,0,Ld),t===void 0?t=a.rounding:sa(t,0,8),i=Rt(new a(i),e+1,t),r=tl(i,!0,e+1)),r};$e.toFixed=function(e,t){var r,i,a=this,s=a.constructor;return e===void 0?tl(a):(sa(e,0,Ld),t===void 0?t=s.rounding:sa(t,0,8),i=Rt(new s(a),e+fr(a)+1,t),r=tl(i.abs(),!1,e+fr(i)+1),a.isneg()&&!a.isZero()?"-"+r:r)};$e.toInteger=$e.toint=function(){var e=this,t=e.constructor;return Rt(new t(e),fr(e)+1,t.rounding)};$e.toNumber=function(){return+this};$e.toPower=$e.pow=function(e){var t,r,i,a,s,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Tn);if(l=new c(l),!l.s){if(e.s<1)throw Error(ii+"Infinity");return l}if(l.eq(Tn))return l;if(i=c.precision,e.eq(Tn))return Rt(l,i);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=u<0?-u:u)<=AF){for(a=new c(Tn),t=Math.ceil(i/Bt+4),Vt=!1;r%2&&(a=a.times(l),RE(a.d,t)),r=Bd(r/2),r!==0;)l=l.times(l),RE(l.d,t);return Vt=!0,e.s<0?new c(Tn).div(a):Rt(a,i)}}else if(s<0)throw Error(ii+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Vt=!1,a=e.times(If(l,i+d)),Vt=!0,a=PF(a),a.s=s,a};$e.toPrecision=function(e,t){var r,i,a=this,s=a.constructor;return e===void 0?(r=fr(a),i=tl(a,r<=s.toExpNeg||r>=s.toExpPos)):(sa(e,1,Ld),t===void 0?t=s.rounding:sa(t,0,8),a=Rt(new s(a),e,t),r=fr(a),i=tl(a,e<=r||r<=s.toExpNeg,e)),i};$e.toSignificantDigits=$e.tosd=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(sa(e,1,Ld),t===void 0?t=i.rounding:sa(t,0,8)),Rt(new i(r),e,t)};$e.toString=$e.valueOf=$e.val=$e.toJSON=$e[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=fr(e),r=e.constructor;return tl(e,t<=r.toExpNeg||t>=r.toExpPos)};function EF(e,t){var r,i,a,s,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Vt?Rt(t,f):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(i=c,s=-s,l=d.length):(i=d,a=o,l=c.length),o=Math.ceil(f/Bt),l=o>l?o+1:l+1,s>l&&(s=l,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,i=d,d=c,c=i),r=0;s;)r=(c[--s]=c[s]+d[s]+r)/Sr|0,c[s]%=Sr;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Vt?Rt(t,f):t}function sa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Lo+e)}function Yi(e){var t,r,i,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)i=e[t]+"",r=Bt-i.length,r&&(s+=ls(r)),s+=i;o=e[t],i=o+"",r=Bt-i.length,r&&(s+=ls(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Ta=function(){function e(i,a){var s,o=0,l=i.length;for(i=i.slice();l--;)s=i[l]*a+o,i[l]=s%Sr|0,o=s/Sr|0;return o&&i.unshift(o),i}function t(i,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(i[l]!=a[l]){c=i[l]>a[l]?1:-1;break}return c}function r(i,a,s){for(var o=0;s--;)i[s]-=o,o=i[s]<a[s]?1:0,i[s]=o*Sr+i[s]-a[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,a,s,o){var l,c,d,u,f,h,p,y,v,b,x,m,j,N,w,S,C,k,A=i.constructor,E=i.s==a.s?1:-1,T=i.d,P=a.d;if(!i.s)return new A(i);if(!a.s)throw Error(ii+"Division by zero");for(c=i.e-a.e,C=P.length,w=T.length,p=new A(E),y=p.d=[],d=0;P[d]==(T[d]||0);)++d;if(P[d]>(T[d]||0)&&--c,s==null?m=s=A.precision:o?m=s+(fr(i)-fr(a))+1:m=s,m<0)return new A(0);if(m=m/Bt+2|0,d=0,C==1)for(u=0,P=P[0],m++;(d<w||u)&&m--;d++)j=u*Sr+(T[d]||0),y[d]=j/P|0,u=j%P|0;else{for(u=Sr/(P[0]+1)|0,u>1&&(P=e(P,u),T=e(T,u),C=P.length,w=T.length),N=C,v=T.slice(0,C),b=v.length;b<C;)v[b++]=0;k=P.slice(),k.unshift(0),S=P[0],P[1]>=Sr/2&&++S;do u=0,l=t(P,v,C,b),l<0?(x=v[0],C!=b&&(x=x*Sr+(v[1]||0)),u=x/S|0,u>1?(u>=Sr&&(u=Sr-1),f=e(P,u),h=f.length,b=v.length,l=t(f,v,h,b),l==1&&(u--,r(f,C<h?k:P,h))):(u==0&&(l=u=1),f=P.slice()),h=f.length,h<b&&f.unshift(0),r(v,f,b),l==-1&&(b=v.length,l=t(P,v,C,b),l<1&&(u++,r(v,C<b?k:P,b))),b=v.length):l===0&&(u++,v=[0]),y[d++]=u,l&&v[0]?v[b++]=T[N]||0:(v=[T[N]],b=1);while((N++<w||v[0]!==void 0)&&m--)}return y[0]||y.shift(),p.e=c,Rt(p,o?s+fr(p)+1:s)}}();function PF(e,t){var r,i,a,s,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(fr(e)>16)throw Error(lS+fr(e));if(!e.s)return new u(Tn);for(t==null?(Vt=!1,l=f):l=t,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(i=Math.log(vo(2,d))/Math.LN10*2+5|0,l+=i,r=a=s=new u(Tn),u.precision=l;;){if(a=Rt(a.times(e),l),r=r.times(++c),o=s.plus(Ta(a,r,l)),Yi(o.d).slice(0,l)===Yi(s.d).slice(0,l)){for(;d--;)s=Rt(s.times(s),l);return u.precision=f,t==null?(Vt=!0,Rt(s,f)):s}s=o}}function fr(e){for(var t=e.e*Bt,r=e.d[0];r>=10;r/=10)t++;return t}function nb(e,t,r){if(t>e.LN10.sd())throw Vt=!0,r&&(e.precision=r),Error(ii+"LN10 precision limit exceeded");return Rt(new e(e.LN10),t)}function ls(e){for(var t="";e--;)t+="0";return t}function If(e,t){var r,i,a,s,o,l,c,d,u,f=1,h=10,p=e,y=p.d,v=p.constructor,b=v.precision;if(p.s<1)throw Error(ii+(p.s?"NaN":"-Infinity"));if(p.eq(Tn))return new v(0);if(t==null?(Vt=!1,d=b):d=t,p.eq(10))return t==null&&(Vt=!0),nb(v,d);if(d+=h,v.precision=d,r=Yi(y),i=r.charAt(0),s=fr(p),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)p=p.times(e),r=Yi(p.d),i=r.charAt(0),f++;s=fr(p),i>1?(p=new v("0."+r),s++):p=new v(i+"."+r.slice(1))}else return c=nb(v,d+2,b).times(s+""),p=If(new v(i+"."+r.slice(1)),d-h).plus(c),v.precision=b,t==null?(Vt=!0,Rt(p,b)):p;for(l=o=p=Ta(p.minus(Tn),p.plus(Tn),d),u=Rt(p.times(p),d),a=3;;){if(o=Rt(o.times(u),d),c=l.plus(Ta(o,new v(a),d)),Yi(c.d).slice(0,d)===Yi(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(nb(v,d+2,b).times(s+""))),l=Ta(l,new v(f),d),v.precision=b,t==null?(Vt=!0,Rt(l,b)):l;l=c,a+=2}}function IE(e,t){var r,i,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;)++i;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(i,a),t){if(a-=i,r=r-i-1,e.e=Bd(r/Bt),e.d=[],i=(r+1)%Bt,r<0&&(i+=Bt),i<a){for(i&&e.d.push(+t.slice(0,i)),a-=Bt;i<a;)e.d.push(+t.slice(i,i+=Bt));t=t.slice(i),i=Bt-t.length}else i-=a;for(;i--;)t+="0";if(e.d.push(+t),Vt&&(e.e>Cg||e.e<-Cg))throw Error(lS+r)}else e.s=0,e.e=0,e.d=[0];return e}function Rt(e,t,r){var i,a,s,o,l,c,d,u,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(i=t-o,i<0)i+=Bt,a=t,d=f[u=0];else{if(u=Math.ceil((i+1)/Bt),s=f.length,u>=s)return e;for(d=s=f[u],o=1;s>=10;s/=10)o++;i%=Bt,a=i-Bt+o}if(r!==void 0&&(s=vo(10,o-a-1),l=d/s%10|0,c=t<0||f[u+1]!==void 0||d%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(i>0?a>0?d/vo(10,o-a):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=fr(e),f.length=1,t=t-s-1,f[0]=vo(10,(Bt-t%Bt)%Bt),e.e=Bd(-t/Bt)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(i==0?(f.length=u,s=1,u--):(f.length=u+1,s=vo(10,Bt-i),f[u]=a>0?(d/vo(10,o-a)%vo(10,a)|0)*s:0),c)for(;;)if(u==0){(f[0]+=s)==Sr&&(f[0]=1,++e.e);break}else{if(f[u]+=s,f[u]!=Sr)break;f[u--]=0,s=1}for(i=f.length;f[--i]===0;)f.pop();if(Vt&&(e.e>Cg||e.e<-Cg))throw Error(lS+fr(e));return e}function TF(e,t){var r,i,a,s,o,l,c,d,u,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Vt?Rt(t,p):t;if(c=e.d,f=t.d,i=t.e,d=e.e,c=c.slice(),o=d-i,o){for(u=o<0,u?(r=c,o=-o,l=f.length):(r=f,i=d,l=c.length),a=Math.max(Math.ceil(p/Bt),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){u=c[a]<f[a];break}o=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Sr-1;--c[s],c[a]+=Sr}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(t.d=c,t.e=i,Vt?Rt(t,p):t):new h(0)}function tl(e,t,r){var i,a=fr(e),s=Yi(e.d),o=s.length;return t?(r&&(i=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+ls(i):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+ls(-a-1)+s,r&&(i=r-o)>0&&(s+=ls(i))):a>=o?(s+=ls(a+1-o),r&&(i=r-a-1)>0&&(s=s+"."+ls(i))):((i=a+1)<o&&(s=s.slice(0,i)+"."+s.slice(i)),r&&(i=r-o)>0&&(a+1===o&&(s+="."),s+=ls(i))),e.s<0?"-"+s:s}function RE(e,t){if(e.length>t)return e.length=t,!0}function OF(e){var t,r,i;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Lo+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return IE(o,s.toString())}else if(typeof s!="string")throw Error(Lo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,tue.test(s))IE(o,s);else throw Error(Lo+s)}if(a.prototype=$e,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=OF,a.config=a.set=rue,e===void 0&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return a.config(e),a}function rue(e){if(!e||typeof e!="object")throw Error(ii+"Object expected");var t,r,i,a=["precision",1,Ld,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((i=e[r=a[t]])!==void 0)if(Bd(i)===i&&i>=a[t+1]&&i<=a[t+2])this[r]=i;else throw Error(Lo+r+": "+i);if((i=e[r="LN10"])!==void 0)if(i==Math.LN10)this[r]=new this(i);else throw Error(Lo+r+": "+i);return this}var cS=OF(eue);Tn=new cS(1);const Ot=cS;function nue(e){return oue(e)||sue(e)||aue(e)||iue()}function iue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aue(e,t){if(e){if(typeof e=="string")return Pj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pj(e,t)}}function sue(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function oue(e){if(Array.isArray(e))return Pj(e)}function Pj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var lue=function(t){return t},_F={"@@functional/placeholder":!0},IF=function(t){return t===_F},ME=function(t){return function r(){return arguments.length===0||arguments.length===1&&IF(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},cue=function e(t,r){return t===1?r:ME(function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==_F}).length;return o>=t?r.apply(void 0,a):e(t-o,ME(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=a.map(function(f){return IF(f)?c.shift():f});return r.apply(void 0,nue(u).concat(c))}))})},Cv=function(t){return cue(t.length,t)},Tj=function(t,r){for(var i=[],a=t;a<r;++a)i[a-t]=a;return i},due=Cv(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),uue=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(!r.length)return lue;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},Oj=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},RF=function(t){var r=null,i=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r&&s.every(function(l,c){return l===r[c]})||(r=s,i=t.apply(void 0,s)),i}};function fue(e){var t;return e===0?t=1:t=Math.floor(new Ot(e).abs().log(10).toNumber())+1,t}function hue(e,t,r){for(var i=new Ot(e),a=0,s=[];i.lt(t)&&a<1e5;)s.push(i.toNumber()),i=i.add(r),a++;return s}var mue=Cv(function(e,t,r){var i=+e,a=+t;return i+r*(a-i)}),pue=Cv(function(e,t,r){var i=t-+e;return i=i||1/0,(r-e)/i}),gue=Cv(function(e,t,r){var i=t-+e;return i=i||1/0,Math.max(0,Math.min(1,(r-e)/i))});const Av={rangeStep:hue,getDigitCount:fue,interpolateNumber:mue,uninterpolateNumber:pue,uninterpolateTruncation:gue};function _j(e){return yue(e)||vue(e)||MF(e)||xue()}function xue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vue(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function yue(e){if(Array.isArray(e))return Ij(e)}function Rf(e,t){return wue(e)||jue(e,t)||MF(e,t)||bue()}function bue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MF(e,t){if(e){if(typeof e=="string")return Ij(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ij(e,t)}}function Ij(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function jue(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],i=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(i=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));i=!0);}catch(c){a=!0,s=c}finally{try{!i&&o.return!=null&&o.return()}finally{if(a)throw s}}return r}}function wue(e){if(Array.isArray(e))return e}function $F(e){var t=Rf(e,2),r=t[0],i=t[1],a=r,s=i;return r>i&&(a=i,s=r),[a,s]}function FF(e,t,r){if(e.lte(0))return new Ot(0);var i=Av.getDigitCount(e.toNumber()),a=new Ot(10).pow(i),s=e.div(a),o=i!==1?.05:.1,l=new Ot(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new Ot(Math.ceil(c))}function Nue(e,t,r){var i=1,a=new Ot(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(i=new Ot(10).pow(Av.getDigitCount(e)-1),a=new Ot(Math.floor(a.div(i).toNumber())).mul(i)):s>1&&(a=new Ot(Math.floor(e)))}else e===0?a=new Ot(Math.floor((t-1)/2)):r||(a=new Ot(Math.floor(e)));var o=Math.floor((t-1)/2),l=uue(due(function(c){return a.add(new Ot(c-o).mul(i)).toNumber()}),Tj);return l(0,t)}function DF(e,t,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ot(0),tickMin:new Ot(0),tickMax:new Ot(0)};var s=FF(new Ot(t).sub(e).div(r-1),i,a),o;e<=0&&t>=0?o=new Ot(0):(o=new Ot(e).add(t).div(2),o=o.sub(new Ot(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new Ot(t).sub(o).div(s).toNumber()),d=l+c+1;return d>r?DF(e,t,r,i,a+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:s,tickMin:o.sub(new Ot(l).mul(s)),tickMax:o.add(new Ot(c).mul(s))})}function Sue(e){var t=Rf(e,2),r=t[0],i=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=$F([r,i]),c=Rf(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(_j(Tj(0,a-1).map(function(){return 1/0}))):[].concat(_j(Tj(0,a-1).map(function(){return-1/0})),[u]);return r>i?Oj(f):f}if(d===u)return Nue(d,a,s);var h=DF(d,u,o,s),p=h.step,y=h.tickMin,v=h.tickMax,b=Av.rangeStep(y,v.add(new Ot(.1).mul(p)),p);return r>i?Oj(b):b}function kue(e,t){var r=Rf(e,2),i=r[0],a=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=$F([i,a]),l=Rf(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[i,a];if(c===d)return[c];var u=Math.max(t,2),f=FF(new Ot(d).sub(c).div(u-1),s,0),h=[].concat(_j(Av.rangeStep(new Ot(c),new Ot(d).sub(new Ot(.99).mul(f)),f)),[d]);return i>a?Oj(h):h}var Cue=RF(Sue),Aue=RF(kue),Eue="Invariant failed";function rl(e,t){throw new Error(Eue)}var Pue=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Xc(e){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xc(e)}function Ag(){return Ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ag.apply(this,arguments)}function Tue(e,t){return Rue(e)||Iue(e,t)||_ue(e,t)||Oue()}function Oue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ue(e,t){if(e){if(typeof e=="string")return $E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $E(e,t)}}function $E(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Iue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Rue(e){if(Array.isArray(e))return e}function Mue(e,t){if(e==null)return{};var r=$ue(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function $ue(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function Fue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Due(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,zF(i.key),i)}}function Lue(e,t,r){return t&&Due(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bue(e,t,r){return t=Eg(t),zue(e,LF()?Reflect.construct(t,r||[],Eg(e).constructor):t.apply(e,r))}function zue(e,t){if(t&&(Xc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return que(e)}function que(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LF=function(){return!!e})()}function Eg(e){return Eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eg(e)}function Uue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rj(e,t)}function Rj(e,t){return Rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},Rj(e,t)}function BF(e,t,r){return t=zF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zF(e){var t=Vue(e,"string");return Xc(t)=="symbol"?t:t+""}function Vue(e,t){if(Xc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Xc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bh=function(e){function t(){return Fue(this,t),Bue(this,t,arguments)}return Uue(t,e),Lue(t,[{key:"render",value:function(){var i=this.props,a=i.offset,s=i.layout,o=i.width,l=i.dataKey,c=i.data,d=i.dataPointFormatter,u=i.xAxis,f=i.yAxis,h=Mue(i,Pue),p=pt(h,!1);this.props.direction==="x"&&u.type!=="number"&&rl();var y=c.map(function(v){var b=d(v,l),x=b.x,m=b.y,j=b.value,N=b.errorVal;if(!N)return null;var w=[],S,C;if(Array.isArray(N)){var k=Tue(N,2);S=k[0],C=k[1]}else S=C=N;if(s==="vertical"){var A=u.scale,E=m+a,T=E+o,P=E-o,_=A(j-S),R=A(j+C);w.push({x1:R,y1:T,x2:R,y2:P}),w.push({x1:_,y1:E,x2:R,y2:E}),w.push({x1:_,y1:T,x2:_,y2:P})}else if(s==="horizontal"){var O=f.scale,$=x+a,M=$-o,I=$+o,L=O(j-S),z=O(j+C);w.push({x1:M,y1:z,x2:I,y2:z}),w.push({x1:$,y1:L,x2:$,y2:z}),w.push({x1:M,y1:L,x2:I,y2:L})}return D.createElement(ar,Ag({className:"recharts-errorBar",key:"bar-".concat(w.map(function(ie){return"".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))},p),w.map(function(ie){return D.createElement("line",Ag({},ie,{key:"line-".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))}))});return D.createElement(ar,{className:"recharts-errorBars"},y)}}])}(D.Component);BF(Bh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});BF(Bh,"displayName","ErrorBar");function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(i){Wue(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Wue(e,t,r){return t=Hue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hue(e){var t=Kue(e,"string");return Mf(t)=="symbol"?t:t+""}function Kue(e,t){if(Mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Mf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qF=function(t){var r=t.children,i=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=An(r,oc);if(!o)return null;var l=oc.defaultProps,c=l!==void 0?fo(fo({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:s==="children"?d=(i||[]).reduce(function(u,f){var h=f.item,p=f.props,y=p.sectors||p.data||[];return u.concat(y.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):d=(i||[]).map(function(u){var f=u.item,h=f.type.defaultProps,p=h!==void 0?fo(fo({},h),f.props):{},y=p.dataKey,v=p.name,b=p.legendType,x=p.hide;return{inactive:x,dataKey:y,type:c.iconType||b||"square",color:dS(f),value:v||y,payload:p}}),fo(fo(fo({},c),oc.getWithHeight(o,a)),{},{payload:d,item:o})};function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function DE(e){return Jue(e)||Que(e)||Yue(e)||Gue()}function Gue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yue(e,t){if(e){if(typeof e=="string")return Mj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mj(e,t)}}function Que(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jue(e){if(Array.isArray(e))return Mj(e)}function Mj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function LE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(r),!0).forEach(function(i){cc(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function cc(e,t,r){return t=Xue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xue(e){var t=Zue(e,"string");return $f(t)=="symbol"?t:t+""}function Zue(e,t){if($f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if($f(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ln(e,t,r){return ft(e)||ft(t)?r:vr(t)?ei(e,t,r):ot(t)?t(e):r}function Bu(e,t,r,i){var a=Qde(e,function(l){return Ln(l,t)});if(r==="number"){var s=a.filter(function(l){return ke(l)||parseFloat(l)});return s.length?[Sv(s),Nv(s)]:[1/0,-1/0]}var o=i?a.filter(function(l){return!ft(l)}):a;return o.map(function(l){return vr(l)||l instanceof Date?l:""})}var efe=function(t){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=i==null?void 0:i.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,d=0;d<l;d++){var u=d>0?a[d-1].coordinate:a[l-1].coordinate,f=a[d].coordinate,h=d>=l-1?a[0].coordinate:a[d+1].coordinate,p=void 0;if(Ei(f-u)!==Ei(h-f)){var y=[];if(Ei(h-f)===Ei(c[1]-c[0])){p=h;var v=f+c[1]-c[0];y[0]=Math.min(v,(v+u)/2),y[1]=Math.max(v,(v+u)/2)}else{p=u;var b=h+c[1]-c[0];y[0]=Math.min(f,(b+f)/2),y[1]=Math.max(f,(b+f)/2)}var x=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>x[0]&&t<=x[1]||t>=y[0]&&t<=y[1]){o=a[d].index;break}}else{var m=Math.min(u,h),j=Math.max(u,h);if(t>(m+f)/2&&t<=(j+f)/2){o=a[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(i[N].coordinate+i[N+1].coordinate)/2||N>0&&N<l-1&&t>(i[N].coordinate+i[N-1].coordinate)/2&&t<=(i[N].coordinate+i[N+1].coordinate)/2||N===l-1&&t>(i[N].coordinate+i[N-1].coordinate)/2){o=i[N].index;break}return o},dS=function(t){var r,i=t,a=i.type.displayName,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Xt(Xt({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},tfe=function(t){var r=t.barSize,i=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,d=l.length;c<d;c++)for(var u=s[l[c]].stackGroups,f=Object.keys(u),h=0,p=f.length;h<p;h++){var y=u[f[h]],v=y.items,b=y.cateAxisId,x=v.filter(function(C){return Aa(C.type).indexOf("Bar")>=0});if(x&&x.length){var m=x[0].type.defaultProps,j=m!==void 0?Xt(Xt({},m),x[0].props):x[0].props,N=j.barSize,w=j[b];o[w]||(o[w]=[]);var S=ft(N)?r:N;o[w].push({item:x[0],stackList:x.slice(1),barSize:ft(S)?void 0:el(S,i,0)})}}return o},rfe=function(t){var r=t.barGap,i=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=el(r,a,0,!0),u,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=a/c,y=o.reduce(function(N,w){return N+w.barSize||0},0);y+=(c-1)*d,y>=a&&(y-=(c-1)*d,d=0),y>=a&&p>0&&(h=!0,p*=.9,y=c*p);var v=(a-y)/2>>0,b={offset:v-d,size:0};u=o.reduce(function(N,w){var S={item:w.item,position:{offset:b.offset+b.size+d,size:h?p:w.barSize}},C=[].concat(DE(N),[S]);return b=C[C.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(k){C.push({item:k,position:b})}),C},f)}else{var x=el(i,a,0,!0);a-2*x-(c-1)*d<=0&&(d=0);var m=(a-2*x-(c-1)*d)/c;m>1&&(m>>=0);var j=l===+l?Math.min(m,l):m;u=o.reduce(function(N,w,S){var C=[].concat(DE(N),[{item:w.item,position:{offset:x+(m+d)*S+(m-j)/2,size:j}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(k){C.push({item:k,position:C[C.length-1].position})}),C},f)}return u},nfe=function(t,r,i,a){var s=i.children,o=i.width,l=i.margin,c=o-(l.left||0)-(l.right||0),d=qF({children:s,legendWidth:c});if(d){var u=a||{},f=u.width,h=u.height,p=d.align,y=d.verticalAlign,v=d.layout;if((v==="vertical"||v==="horizontal"&&y==="middle")&&p!=="center"&&ke(t[p]))return Xt(Xt({},t),{},cc({},p,t[p]+(f||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&y!=="middle"&&ke(t[y]))return Xt(Xt({},t),{},cc({},y,t[y]+(h||0)))}return t},ife=function(t,r,i){return ft(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||i==="x"?r==="xAxis":i==="y"?r==="yAxis":!0},UF=function(t,r,i,a,s){var o=r.props.children,l=ti(o,Bh).filter(function(d){return ife(a,s,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var f=Ln(u,i);if(ft(f))return d;var h=Array.isArray(f)?[Sv(f),Nv(f)]:[f,f],p=c.reduce(function(y,v){var b=Ln(u,v,0),x=h[0]-Math.abs(Array.isArray(b)?b[0]:b),m=h[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(x,y[0]),Math.max(m,y[1])]},[1/0,-1/0]);return[Math.min(p[0],d[0]),Math.max(p[1],d[1])]},[1/0,-1/0])}return null},afe=function(t,r,i,a,s){var o=r.map(function(l){return UF(t,l,i,s,a)}).filter(function(l){return!ft(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},VF=function(t,r,i,a,s){var o=r.map(function(c){var d=c.props.dataKey;return i==="number"&&d&&UF(t,c,d,a)||Bu(t,d,i,s)});if(i==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,f=d.length;u<f;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},WF=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},HF=function(t,r,i,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===r&&(s=!0),c.coordinate===i&&(o=!0),c.coordinate});return s||l.push(r),o||l.push(i),l},wa=function(t,r,i){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||i)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ei(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var h=s?s.indexOf(f):f;return{coordinate:a(h)+d,value:f,offset:d}});return u.filter(function(f){return!Ih(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+d,value:f,index:h,offset:d}}):a.ticks&&!i?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+d,value:f,offset:d}}):a.domain().map(function(f,h){return{coordinate:a(f)+d,value:s?s[f]:f,index:h,offset:d}})},ib=new WeakMap,Cm=function(t,r){if(typeof r!="function")return t;ib.has(t)||ib.set(t,new WeakMap);var i=ib.get(t);if(i.has(r))return i.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return i.set(r,a),a},sfe=function(t,r,i){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Ef(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:wg(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!i)?{scale:Lu(),realScaleType:"point"}:s==="category"?{scale:Ef(),realScaleType:"band"}:{scale:wg(),realScaleType:"linear"};if(_h(a)){var c="scale".concat(dv(a));return{scale:(_E[c]||Lu)(),realScaleType:_E[c]?c:"point"}}return ot(a)?{scale:a}:{scale:Lu(),realScaleType:"point"}},BE=1e-4,ofe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var i=r.length,a=t.range(),s=Math.min(a[0],a[1])-BE,o=Math.max(a[0],a[1])+BE,l=t(r[0]),c=t(r[i-1]);(l<s||l>o||c<s||c>o)&&t.domain([r[0],r[i-1]])}},lfe=function(t,r){if(!t)return null;for(var i=0,a=t.length;i<a;i++)if(t[i].item===r)return t[i].position;return null},cfe=function(t,r){if(!r||r.length!==2||!ke(r[0])||!ke(r[1]))return t;var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),s=[t[0],t[1]];return(!ke(t[0])||t[0]<i)&&(s[0]=i),(!ke(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<i&&(s[1]=i),s},dfe=function(t){var r=t.length;if(!(r<=0))for(var i=0,a=t[0].length;i<a;++i)for(var s=0,o=0,l=0;l<r;++l){var c=Ih(t[l][i][1])?t[l][i][0]:t[l][i][1];c>=0?(t[l][i][0]=s,t[l][i][1]=s+c,s=t[l][i][1]):(t[l][i][0]=o,t[l][i][1]=o+c,o=t[l][i][1])}},ufe=function(t){var r=t.length;if(!(r<=0))for(var i=0,a=t[0].length;i<a;++i)for(var s=0,o=0;o<r;++o){var l=Ih(t[o][i][1])?t[o][i][0]:t[o][i][1];l>=0?(t[o][i][0]=s,t[o][i][1]=s+l,s=t[o][i][1]):(t[o][i][0]=0,t[o][i][1]=0)}},ffe={sign:dfe,expand:AX,none:Vc,silhouette:EX,wiggle:PX,positive:ufe},hfe=function(t,r,i){var a=r.map(function(l){return l.props.dataKey}),s=ffe[i],o=CX().keys(a).value(function(l,c){return+Ln(l,c,0)}).order(sj).offset(s);return o(t)},mfe=function(t,r,i,a,s,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(f,h){var p,y=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Xt(Xt({},h.type.defaultProps),h.props):h.props,v=y.stackId,b=y.hide;if(b)return f;var x=y[i],m=f[x]||{hasStack:!1,stackGroups:{}};if(vr(v)){var j=m.stackGroups[v]||{numericAxisId:i,cateAxisId:a,items:[]};j.items.push(h),m.hasStack=!0,m.stackGroups[v]=j}else m.stackGroups[Rh("_stackId_")]={numericAxisId:i,cateAxisId:a,items:[h]};return Xt(Xt({},f),{},cc({},x,m))},c),u={};return Object.keys(d).reduce(function(f,h){var p=d[h];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,b){var x=p.stackGroups[b];return Xt(Xt({},v),{},cc({},b,{numericAxisId:i,cateAxisId:a,items:x.items,stackedData:hfe(t,x.items,s)}))},y)}return Xt(Xt({},f),{},cc({},h,p))},u)},pfe=function(t,r){var i=r.realScaleType,a=r.type,s=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=i||r.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=Cue(d,s,l);return t.domain([Sv(u),Nv(u)]),{niceTicks:u}}if(s&&a==="number"){var f=t.domain(),h=Aue(f,s,l);return{niceTicks:h}}return null};function zE(e){var t=e.axis,r=e.ticks,i=e.bandSize,a=e.entry,s=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ft(a[t.dataKey])){var l=Zp(r,"value",a[t.dataKey]);if(l)return l.coordinate+i/2}return r[s]?r[s].coordinate+i/2:null}var c=Ln(a,ft(o)?t.dataKey:o);return ft(c)?null:t.scale(c)}var qE=function(t){var r=t.axis,i=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return i[l]?i[l].coordinate+a:null;var c=Ln(o,r.dataKey,r.domain[l]);return ft(c)?null:r.scale(c)-s/2+a},gfe=function(t){var r=t.numericAxis,i=r.scale.domain();if(r.type==="number"){var a=Math.min(i[0],i[1]),s=Math.max(i[0],i[1]);return a<=0&&s>=0?0:s<0?s:a}return i[0]},xfe=function(t,r){var i,a=(i=t.type)!==null&&i!==void 0&&i.defaultProps?Xt(Xt({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(vr(s)){var o=r[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},vfe=function(t){return t.reduce(function(r,i){return[Sv(i.concat([r[0]]).filter(ke)),Nv(i.concat([r[1]]).filter(ke))]},[1/0,-1/0])},KF=function(t,r,i){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(d,u){var f=vfe(u.slice(r,i+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},UE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$j=function(t,r,i){if(ot(t))return t(r,i);if(!Array.isArray(t))return r;var a=[];if(ke(t[0]))a[0]=i?t[0]:Math.min(t[0],r[0]);else if(UE.test(t[0])){var s=+UE.exec(t[0])[1];a[0]=r[0]-s}else ot(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(ke(t[1]))a[1]=i?t[1]:Math.max(t[1],r[1]);else if(VE.test(t[1])){var o=+VE.exec(t[1])[1];a[1]=r[1]+o}else ot(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Pg=function(t,r,i){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!i||a>0)return a}if(t&&r&&r.length>=2){for(var s=FN(r,function(f){return f.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var d=s[l],u=s[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return i?void 0:0},WE=function(t,r,i){return!t||!t.length||kv(t,ei(i,"type.defaultProps.domain"))?r:t},GF=function(t,r){var i=t.type.defaultProps?Xt(Xt({},t.type.defaultProps),t.props):t.props,a=i.dataKey,s=i.name,o=i.unit,l=i.formatter,c=i.tooltipType,d=i.chartType,u=i.hide;return Xt(Xt({},pt(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:dS(t),value:Ln(r,a),type:c,payload:r,chartType:d,hide:u})};function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}function HE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function KE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(r),!0).forEach(function(i){yfe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function yfe(e,t,r){return t=bfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bfe(e){var t=jfe(e,"string");return Ff(t)=="symbol"?t:t+""}function jfe(e,t){if(Ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Ff(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tg=Math.PI/180,wfe=function(t){return t*180/Math.PI},Ir=function(t,r,i,a){return{x:t+Math.cos(-Tg*a)*i,y:r+Math.sin(-Tg*a)*i}},Nfe=function(t,r){var i=t.x,a=t.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(i-s,2)+Math.pow(a-o,2))},Sfe=function(t,r){var i=t.x,a=t.y,s=r.cx,o=r.cy,l=Nfe({x:i,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(i-s)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:wfe(d),angleInRadian:d}},kfe=function(t){var r=t.startAngle,i=t.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return{startAngle:r-o*360,endAngle:i-o*360}},Cfe=function(t,r){var i=r.startAngle,a=r.endAngle,s=Math.floor(i/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},GE=function(t,r){var i=t.x,a=t.y,s=Sfe({x:i,y:a},r),o=s.radius,l=s.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=kfe(r),f=u.startAngle,h=u.endAngle,p=l,y;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;y=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;y=p>=h&&p<=f}return y?KE(KE({},r),{},{radius:o,angle:Cfe(p,r)}):null};function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}var Afe=["offset"];function Efe(e){return _fe(e)||Ofe(e)||Tfe(e)||Pfe()}function Pfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tfe(e,t){if(e){if(typeof e=="string")return Fj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fj(e,t)}}function Ofe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _fe(e){if(Array.isArray(e))return Fj(e)}function Fj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Ife(e,t){if(e==null)return{};var r=Rfe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Rfe(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function YE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YE(Object(r),!0).forEach(function(i){Mfe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Mfe(e,t,r){return t=$fe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $fe(e){var t=Ffe(e,"string");return Df(t)=="symbol"?t:t+""}function Ffe(e,t){if(Df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Df(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Lf.apply(this,arguments)}var Dfe=function(t){var r=t.value,i=t.formatter,a=ft(t.children)?r:t.children;return ot(i)?i(a):a},Lfe=function(t,r){var i=Ei(r-t),a=Math.min(Math.abs(r-t),360);return i*a},Bfe=function(t,r,i){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,d=c.cx,u=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,y=c.endAngle,v=c.clockWise,b=(f+h)/2,x=Lfe(p,y),m=x>=0?1:-1,j,N;a==="insideStart"?(j=p+m*o,N=v):a==="insideEnd"?(j=y-m*o,N=!v):a==="end"&&(j=y+m*o,N=v),N=x<=0?N:!N;var w=Ir(d,u,b,j),S=Ir(d,u,b,j+(N?1:-1)*359),C="M".concat(w.x,",").concat(w.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(N?0:1,`,
    `).concat(S.x,",").concat(S.y),k=ft(t.id)?Rh("recharts-radial-line-"):t.id;return D.createElement("text",Lf({},i,{dominantBaseline:"central",className:gt("recharts-radial-bar-label",l)}),D.createElement("defs",null,D.createElement("path",{id:k,d:C})),D.createElement("textPath",{xlinkHref:"#".concat(k)},r))},zfe=function(t){var r=t.viewBox,i=t.offset,a=t.position,s=r,o=s.cx,l=s.cy,c=s.innerRadius,d=s.outerRadius,u=s.startAngle,f=s.endAngle,h=(u+f)/2;if(a==="outside"){var p=Ir(o,l,d+i,h),y=p.x,v=p.y;return{x:y,y:v,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(c+d)/2,x=Ir(o,l,b,h),m=x.x,j=x.y;return{x:m,y:j,textAnchor:"middle",verticalAnchor:"middle"}},qfe=function(t){var r=t.viewBox,i=t.parentViewBox,a=t.offset,s=t.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,f=u>=0?1:-1,h=f*a,p=f>0?"end":"start",y=f>0?"start":"end",v=d>=0?1:-1,b=v*a,x=v>0?"end":"start",m=v>0?"start":"end";if(s==="top"){var j={x:l+d/2,y:c-f*a,textAnchor:"middle",verticalAnchor:p};return hr(hr({},j),i?{height:Math.max(c-i.y,0),width:d}:{})}if(s==="bottom"){var N={x:l+d/2,y:c+u+h,textAnchor:"middle",verticalAnchor:y};return hr(hr({},N),i?{height:Math.max(i.y+i.height-(c+u),0),width:d}:{})}if(s==="left"){var w={x:l-b,y:c+u/2,textAnchor:x,verticalAnchor:"middle"};return hr(hr({},w),i?{width:Math.max(w.x-i.x,0),height:u}:{})}if(s==="right"){var S={x:l+d+b,y:c+u/2,textAnchor:m,verticalAnchor:"middle"};return hr(hr({},S),i?{width:Math.max(i.x+i.width-S.x,0),height:u}:{})}var C=i?{width:d,height:u}:{};return s==="insideLeft"?hr({x:l+b,y:c+u/2,textAnchor:m,verticalAnchor:"middle"},C):s==="insideRight"?hr({x:l+d-b,y:c+u/2,textAnchor:x,verticalAnchor:"middle"},C):s==="insideTop"?hr({x:l+d/2,y:c+h,textAnchor:"middle",verticalAnchor:y},C):s==="insideBottom"?hr({x:l+d/2,y:c+u-h,textAnchor:"middle",verticalAnchor:p},C):s==="insideTopLeft"?hr({x:l+b,y:c+h,textAnchor:m,verticalAnchor:y},C):s==="insideTopRight"?hr({x:l+d-b,y:c+h,textAnchor:x,verticalAnchor:y},C):s==="insideBottomLeft"?hr({x:l+b,y:c+u-h,textAnchor:m,verticalAnchor:p},C):s==="insideBottomRight"?hr({x:l+d-b,y:c+u-h,textAnchor:x,verticalAnchor:p},C):Od(s)&&(ke(s.x)||So(s.x))&&(ke(s.y)||So(s.y))?hr({x:l+el(s.x,d),y:c+el(s.y,u),textAnchor:"end",verticalAnchor:"end"},C):hr({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},C)},Ufe=function(t){return"cx"in t&&ke(t.cx)};function Ur(e){var t=e.offset,r=t===void 0?5:t,i=Ife(e,Afe),a=hr({offset:r},i),s=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,u=a.className,f=u===void 0?"":u,h=a.textBreakAll;if(!s||ft(l)&&ft(c)&&!g.isValidElement(d)&&!ot(d))return null;if(g.isValidElement(d))return g.cloneElement(d,a);var p;if(ot(d)){if(p=g.createElement(d,a),g.isValidElement(p))return p}else p=Dfe(a);var y=Ufe(s),v=pt(a,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Bfe(a,p,v);var b=y?zfe(a):qfe(a);return D.createElement(pg,Lf({className:gt("recharts-label",f)},v,b,{breakAll:h}),p)}Ur.displayName="Label";var YF=function(t){var r=t.cx,i=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,f=t.x,h=t.y,p=t.top,y=t.left,v=t.width,b=t.height,x=t.clockWise,m=t.labelViewBox;if(m)return m;if(ke(v)&&ke(b)){if(ke(f)&&ke(h))return{x:f,y:h,width:v,height:b};if(ke(p)&&ke(y))return{x:p,y,width:v,height:b}}return ke(f)&&ke(h)?{x:f,y:h,width:0,height:0}:ke(r)&&ke(i)?{cx:r,cy:i,startAngle:s||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},Vfe=function(t,r){return t?t===!0?D.createElement(Ur,{key:"label-implicit",viewBox:r}):vr(t)?D.createElement(Ur,{key:"label-implicit",viewBox:r,value:t}):g.isValidElement(t)?t.type===Ur?g.cloneElement(t,{key:"label-implicit",viewBox:r}):D.createElement(Ur,{key:"label-implicit",content:t,viewBox:r}):ot(t)?D.createElement(Ur,{key:"label-implicit",content:t,viewBox:r}):Od(t)?D.createElement(Ur,Lf({viewBox:r},t,{key:"label-implicit"})):null:null},Wfe=function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&i&&!t.label)return null;var a=t.children,s=YF(t),o=ti(a,Ur).map(function(c,d){return g.cloneElement(c,{viewBox:r||s,key:"label-".concat(d)})});if(!i)return o;var l=Vfe(t.label,r||s);return[l].concat(Efe(o))};Ur.parseViewBox=YF;Ur.renderCallByParent=Wfe;function Hfe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Kfe=Hfe;const Gfe=It(Kfe);function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}var Yfe=["valueAccessor"],Qfe=["data","dataKey","clockWise","id","textBreakAll"];function Jfe(e){return the(e)||ehe(e)||Zfe(e)||Xfe()}function Xfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zfe(e,t){if(e){if(typeof e=="string")return Dj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dj(e,t)}}function ehe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function the(e){if(Array.isArray(e))return Dj(e)}function Dj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Og.apply(this,arguments)}function QE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function JE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(r),!0).forEach(function(i){rhe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function rhe(e,t,r){return t=nhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nhe(e){var t=ihe(e,"string");return Bf(t)=="symbol"?t:t+""}function ihe(e,t){if(Bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Bf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XE(e,t){if(e==null)return{};var r=ahe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function ahe(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}var she=function(t){return Array.isArray(t.value)?Gfe(t.value):t.value};function Bs(e){var t=e.valueAccessor,r=t===void 0?she:t,i=XE(e,Yfe),a=i.data,s=i.dataKey,o=i.clockWise,l=i.id,c=i.textBreakAll,d=XE(i,Qfe);return!a||!a.length?null:D.createElement(ar,{className:"recharts-label-list"},a.map(function(u,f){var h=ft(s)?r(u,f):Ln(u&&u.payload,s),p=ft(l)?{}:{id:"".concat(l,"-").concat(f)};return D.createElement(Ur,Og({},pt(u,!0),d,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:c,viewBox:Ur.parseViewBox(ft(o)?u:JE(JE({},u),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Bs.displayName="LabelList";function ohe(e,t){return e?e===!0?D.createElement(Bs,{key:"labelList-implicit",data:t}):D.isValidElement(e)||ot(e)?D.createElement(Bs,{key:"labelList-implicit",data:t,content:e}):Od(e)?D.createElement(Bs,Og({data:t},e,{key:"labelList-implicit"})):null:null}function lhe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=ti(i,Bs).map(function(o,l){return g.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var s=ohe(e.label,t);return[s].concat(Jfe(a))}Bs.renderCallByParent=lhe;function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function Lj(){return Lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Lj.apply(this,arguments)}function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function eP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(r),!0).forEach(function(i){che(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function che(e,t,r){return t=dhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dhe(e){var t=uhe(e,"string");return zf(t)=="symbol"?t:t+""}function uhe(e,t){if(zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(zf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fhe=function(t,r){var i=Ei(r-t),a=Math.min(Math.abs(r-t),359.999);return i*a},Am=function(t){var r=t.cx,i=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+a,f=Math.asin(c/u)/Tg,h=d?s:s+o*f,p=Ir(r,i,u,h),y=Ir(r,i,a,h),v=d?s-o*f:s,b=Ir(r,i,u*Math.cos(f*Tg),v);return{center:p,circleTangency:y,lineTangency:b,theta:f}},QF=function(t){var r=t.cx,i=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=fhe(o,l),d=o+c,u=Ir(r,i,s,o),f=Ir(r,i,s,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=Ir(r,i,a,o),y=Ir(r,i,a,d);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(i," Z");return h},hhe=function(t){var r=t.cx,i=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,f=Ei(u-d),h=Am({cx:r,cy:i,radius:s,angle:d,sign:f,cornerRadius:o,cornerIsExternal:c}),p=h.circleTangency,y=h.lineTangency,v=h.theta,b=Am({cx:r,cy:i,radius:s,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:c}),x=b.circleTangency,m=b.lineTangency,j=b.theta,N=c?Math.abs(d-u):Math.abs(d-u)-v-j;if(N<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):QF({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:u});var w="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
  `);if(a>0){var S=Am({cx:r,cy:i,radius:a,angle:d,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=S.circleTangency,k=S.lineTangency,A=S.theta,E=Am({cx:r,cy:i,radius:a,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=E.circleTangency,P=E.lineTangency,_=E.theta,R=c?Math.abs(d-u):Math.abs(d-u)-A-_;if(R<0&&o===0)return"".concat(w,"L").concat(r,",").concat(i,"Z");w+="L".concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,"Z")}else w+="L".concat(r,",").concat(i,"Z");return w},mhe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},JF=function(t){var r=eP(eP({},mhe),t),i=r.cx,a=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,h=r.className;if(o<s||u===f)return null;var p=gt("recharts-sector",h),y=o-s,v=el(l,y,0,!0),b;return v>0&&Math.abs(u-f)<360?b=hhe({cx:i,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(v,y/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):b=QF({cx:i,cy:a,innerRadius:s,outerRadius:o,startAngle:u,endAngle:f}),D.createElement("path",Lj({},pt(r,!0),{className:p,d:b,role:"img"}))};function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function Bj(){return Bj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Bj.apply(this,arguments)}function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function rP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(i){phe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function phe(e,t,r){return t=ghe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ghe(e){var t=xhe(e,"string");return qf(t)=="symbol"?t:t+""}function xhe(e,t){if(qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(qf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nP={curveBasisClosed:pX,curveBasisOpen:gX,curveBasis:mX,curveBumpX:eX,curveBumpY:tX,curveLinearClosed:xX,curveLinear:fv,curveMonotoneX:vX,curveMonotoneY:yX,curveNatural:bX,curveStep:jX,curveStepAfter:NX,curveStepBefore:wX},Em=function(t){return t.x===+t.x&&t.y===+t.y},lu=function(t){return t.x},cu=function(t){return t.y},vhe=function(t,r){if(ot(t))return t;var i="curve".concat(dv(t));return(i==="curveMonotone"||i==="curveBump")&&r?nP["".concat(i).concat(r==="vertical"?"Y":"X")]:nP[i]||fv},yhe=function(t){var r=t.type,i=r===void 0?"linear":r,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=vhe(i,l),f=d?s.filter(function(v){return Em(v)}):s,h;if(Array.isArray(o)){var p=d?o.filter(function(v){return Em(v)}):o,y=f.map(function(v,b){return rP(rP({},v),{},{base:p[b]})});return l==="vertical"?h=vm().y(cu).x1(lu).x0(function(v){return v.base.x}):h=vm().x(lu).y1(cu).y0(function(v){return v.base.y}),h.defined(Em).curve(u),h(y)}return l==="vertical"&&ke(o)?h=vm().y(cu).x1(lu).x0(o):ke(o)?h=vm().x(lu).y1(cu).y0(o):h=XM().x(lu).y(cu),h.defined(Em).curve(u),h(f)},zj=function(t){var r=t.className,i=t.points,a=t.path,s=t.pathRef;if((!i||!i.length)&&!a)return null;var o=i&&i.length?yhe(t):a;return D.createElement("path",Bj({},pt(t,!1),eg(t),{className:gt("recharts-curve",r),d:o,ref:s}))},XF={exports:{}},bhe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",jhe=bhe,whe=jhe;function ZF(){}function eD(){}eD.resetWarningCache=ZF;var Nhe=function(){function e(i,a,s,o,l,c){if(c!==whe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:eD,resetWarningCache:ZF};return r.PropTypes=r,r};XF.exports=Nhe();var She=XF.exports;const wt=It(She);var khe=Object.getOwnPropertyNames,Che=Object.getOwnPropertySymbols,Ahe=Object.prototype.hasOwnProperty;function iP(e,t){return function(i,a,s){return e(i,a,s)&&t(i,a,s)}}function Pm(e){return function(r,i,a){if(!r||!i||typeof r!="object"||typeof i!="object")return e(r,i,a);var s=a.cache,o=s.get(r),l=s.get(i);if(o&&l)return o===i&&l===r;s.set(r,i),s.set(i,r);var c=e(r,i,a);return s.delete(r),s.delete(i),c}}function aP(e){return khe(e).concat(Che(e))}var Ehe=Object.hasOwn||function(e,t){return Ahe.call(e,t)};function hl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Phe="__v",The="__o",Ohe="_owner",sP=Object.getOwnPropertyDescriptor,oP=Object.keys;function _he(e,t,r){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!r.equals(e[i],t[i],i,i,e,t,r))return!1;return!0}function Ihe(e,t){return hl(e.getTime(),t.getTime())}function Rhe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Mhe(e,t){return e===t}function lP(e,t,r){var i=e.size;if(i!==t.size)return!1;if(!i)return!0;for(var a=new Array(i),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var d=t.entries(),u=!1,f=0;(l=d.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,p=l.value;if(r.equals(h[0],p[0],c,f,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1;c++}return!0}var $he=hl;function Fhe(e,t,r){var i=oP(e),a=i.length;if(oP(t).length!==a)return!1;for(;a-- >0;)if(!tD(e,t,r,i[a]))return!1;return!0}function du(e,t,r){var i=aP(e),a=i.length;if(aP(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=i[a],!tD(e,t,r,s)||(o=sP(e,s),l=sP(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Dhe(e,t){return hl(e.valueOf(),t.valueOf())}function Lhe(e,t){return e.source===t.source&&e.flags===t.flags}function cP(e,t,r){var i=e.size;if(i!==t.size)return!1;if(!i)return!0;for(var a=new Array(i),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!a[u]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function Bhe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function zhe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function tD(e,t,r,i){return(i===Ohe||i===The||i===Phe)&&(e.$$typeof||t.$$typeof)?!0:Ehe(t,i)&&r.equals(e[i],t[i],i,i,e,t,r)}var qhe="[object Arguments]",Uhe="[object Boolean]",Vhe="[object Date]",Whe="[object Error]",Hhe="[object Map]",Khe="[object Number]",Ghe="[object Object]",Yhe="[object RegExp]",Qhe="[object Set]",Jhe="[object String]",Xhe="[object URL]",Zhe=Array.isArray,dP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,uP=Object.assign,eme=Object.prototype.toString.call.bind(Object.prototype.toString);function tme(e){var t=e.areArraysEqual,r=e.areDatesEqual,i=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(y,v,b){if(y===v)return!0;if(y==null||v==null)return!1;var x=typeof y;if(x!==typeof v)return!1;if(x!=="object")return x==="number"?o(y,v,b):x==="function"?a(y,v,b):!1;var m=y.constructor;if(m!==v.constructor)return!1;if(m===Object)return l(y,v,b);if(Zhe(y))return t(y,v,b);if(dP!=null&&dP(y))return f(y,v,b);if(m===Date)return r(y,v,b);if(m===RegExp)return d(y,v,b);if(m===Map)return s(y,v,b);if(m===Set)return u(y,v,b);var j=eme(y);return j===Vhe?r(y,v,b):j===Yhe?d(y,v,b):j===Hhe?s(y,v,b):j===Qhe?u(y,v,b):j===Ghe?typeof y.then!="function"&&typeof v.then!="function"&&l(y,v,b):j===Xhe?h(y,v,b):j===Whe?i(y,v,b):j===qhe?l(y,v,b):j===Uhe||j===Khe||j===Jhe?c(y,v,b):!1}}function rme(e){var t=e.circular,r=e.createCustomConfig,i=e.strict,a={areArraysEqual:i?du:_he,areDatesEqual:Ihe,areErrorsEqual:Rhe,areFunctionsEqual:Mhe,areMapsEqual:i?iP(lP,du):lP,areNumbersEqual:$he,areObjectsEqual:i?du:Fhe,arePrimitiveWrappersEqual:Dhe,areRegExpsEqual:Lhe,areSetsEqual:i?iP(cP,du):cP,areTypedArraysEqual:i?du:Bhe,areUrlsEqual:zhe};if(r&&(a=uP({},a,r(a))),t){var s=Pm(a.areArraysEqual),o=Pm(a.areMapsEqual),l=Pm(a.areObjectsEqual),c=Pm(a.areSetsEqual);a=uP({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function nme(e){return function(t,r,i,a,s,o,l){return e(t,r,l)}}function ime(e){var t=e.circular,r=e.comparator,i=e.createState,a=e.equals,s=e.strict;if(i)return function(c,d){var u=i(),f=u.cache,h=f===void 0?t?new WeakMap:void 0:f,p=u.meta;return r(c,d,{cache:h,equals:a,meta:p,strict:s})};if(t)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,d){return r(c,d,o)}}var ame=co();co({strict:!0});co({circular:!0});co({circular:!0,strict:!0});co({createInternalComparator:function(){return hl}});co({strict:!0,createInternalComparator:function(){return hl}});co({circular:!0,createInternalComparator:function(){return hl}});co({circular:!0,createInternalComparator:function(){return hl},strict:!0});function co(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,i=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=rme(e),c=tme(l),d=i?i(c):nme(c);return ime({circular:r,comparator:c,createState:a,equals:d,strict:o})}function sme(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function fP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,i=function a(s){r<0&&(r=s),s-r>t?(e(s),r=-1):sme(a)};requestAnimationFrame(i)}function qj(e){"@babel/helpers - typeof";return qj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qj(e)}function ome(e){return ume(e)||dme(e)||cme(e)||lme()}function lme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cme(e,t){if(e){if(typeof e=="string")return hP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hP(e,t)}}function hP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function dme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ume(e){if(Array.isArray(e))return e}function fme(){var e={},t=function(){return null},r=!1,i=function a(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,l=ome(o),c=l[0],d=l.slice(1);if(typeof c=="number"){fP(a.bind(null,d),c);return}a(c),fP(a.bind(null,d));return}qj(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,i(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}function mP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function pP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(r),!0).forEach(function(i){rD(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function rD(e,t,r){return t=hme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hme(e){var t=mme(e,"string");return Uf(t)==="symbol"?t:String(t)}function mme(e,t){if(Uf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Uf(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pme=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(i,a){return i.filter(function(s){return a.includes(s)})})},gme=function(t){return t},xme=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},zu=function(t,r){return Object.keys(r).reduce(function(i,a){return pP(pP({},i),{},rD({},a,t(a,r[a])))},{})},gP=function(t,r,i){return t.map(function(a){return"".concat(xme(a)," ").concat(r,"ms ").concat(i)}).join(",")};function vme(e,t){return jme(e)||bme(e,t)||nD(e,t)||yme()}function yme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function jme(e){if(Array.isArray(e))return e}function wme(e){return kme(e)||Sme(e)||nD(e)||Nme()}function Nme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nD(e,t){if(e){if(typeof e=="string")return Uj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uj(e,t)}}function Sme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kme(e){if(Array.isArray(e))return Uj(e)}function Uj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var _g=1e-4,iD=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},aD=function(t,r){return t.map(function(i,a){return i*Math.pow(r,a)}).reduce(function(i,a){return i+a})},xP=function(t,r){return function(i){var a=iD(t,r);return aD(a,i)}},Cme=function(t,r){return function(i){var a=iD(t,r),s=[].concat(wme(a.map(function(o,l){return o*l}).slice(1)),[0]);return aD(s,i)}},vP=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),u=vme(d,4);a=u[0],s=u[1],o=u[2],l=u[3]}}}var f=xP(a,o),h=xP(s,l),p=Cme(a,o),y=function(x){return x>1?1:x<0?0:x},v=function(x){for(var m=x>1?1:x,j=m,N=0;N<8;++N){var w=f(j)-m,S=p(j);if(Math.abs(w-m)<_g||S<_g)return h(j);j=y(j-w/S)}return h(j)};return v.isStepper=!1,v},Ame=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,i=r===void 0?100:r,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(u,f,h){var p=-(u-f)*i,y=h*s,v=h+(p-y)*l/1e3,b=h*l/1e3+u;return Math.abs(b-f)<_g&&Math.abs(v)<_g?[f,0]:[b,v]};return c.isStepper=!0,c.dt=l,c},Eme=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return vP(a);case"spring":return Ame();default:if(a.split("(")[0]==="cubic-bezier")return vP(a)}return typeof a=="function"?a:null};function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}function yP(e){return Ome(e)||Tme(e)||sD(e)||Pme()}function Pme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ome(e){if(Array.isArray(e))return Wj(e)}function bP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(r),!0).forEach(function(i){Vj(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Vj(e,t,r){return t=_me(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _me(e){var t=Ime(e,"string");return Vf(t)==="symbol"?t:String(t)}function Ime(e,t){if(Vf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Vf(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rme(e,t){return Fme(e)||$me(e,t)||sD(e,t)||Mme()}function Mme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sD(e,t){if(e){if(typeof e=="string")return Wj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wj(e,t)}}function Wj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function $me(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Fme(e){if(Array.isArray(e))return e}var Ig=function(t,r,i){return t+(r-t)*i},Hj=function(t){var r=t.from,i=t.to;return r!==i},Dme=function e(t,r,i){var a=zu(function(s,o){if(Hj(o)){var l=t(o.from,o.to,o.velocity),c=Rme(l,2),d=c[0],u=c[1];return Tr(Tr({},o),{},{from:d,velocity:u})}return o},r);return i<1?zu(function(s,o){return Hj(o)?Tr(Tr({},o),{},{velocity:Ig(o.velocity,a[s].velocity,i),from:Ig(o.from,a[s].from,i)}):o},r):e(t,a,i-1)};const Lme=function(e,t,r,i,a){var s=pme(e,t),o=s.reduce(function(b,x){return Tr(Tr({},b),{},Vj({},x,[e[x],t[x]]))},{}),l=s.reduce(function(b,x){return Tr(Tr({},b),{},Vj({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,d,u,f=function(){return null},h=function(){return zu(function(x,m){return m.from},l)},p=function(){return!Object.values(l).filter(Hj).length},y=function(x){d||(d=x);var m=x-d,j=m/r.dt;l=Dme(r,l,j),a(Tr(Tr(Tr({},e),t),h())),d=x,p()||(c=requestAnimationFrame(f))},v=function(x){u||(u=x);var m=(x-u)/i,j=zu(function(w,S){return Ig.apply(void 0,yP(S).concat([r(m)]))},o);if(a(Tr(Tr(Tr({},e),t),j)),m<1)c=requestAnimationFrame(f);else{var N=zu(function(w,S){return Ig.apply(void 0,yP(S).concat([r(1)]))},o);a(Tr(Tr(Tr({},e),t),N))}};return f=r.isStepper?y:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Zc(e){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(e)}var Bme=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function zme(e,t){if(e==null)return{};var r=qme(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function qme(e,t){if(e==null)return{};var r={},i=Object.keys(e),a,s;for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function ab(e){return Hme(e)||Wme(e)||Vme(e)||Ume()}function Ume(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vme(e,t){if(e){if(typeof e=="string")return Kj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kj(e,t)}}function Wme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hme(e){if(Array.isArray(e))return Kj(e)}function Kj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function jP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(r),!0).forEach(function(i){ju(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ju(e,t,r){return t=oD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gme(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,oD(i.key),i)}}function Yme(e,t,r){return t&&Gme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oD(e){var t=Qme(e,"string");return Zc(t)==="symbol"?t:String(t)}function Qme(e,t){if(Zc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Zc(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gj(e,t)}function Gj(e,t){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},Gj(e,t)}function Xme(e){var t=Zme();return function(){var i=Rg(e),a;if(t){var s=Rg(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return Yj(this,a)}}function Yj(e,t){if(t&&(Zc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qj(e)}function Qj(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rg(e){return Rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rg(e)}var Wa=function(e){Jme(r,e);var t=Xme(r);function r(i,a){var s;Kme(this,r),s=t.call(this,i,a);var o=s.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,f=o.steps,h=o.children,p=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(Qj(s)),s.changeStyle=s.changeStyle.bind(Qj(s)),!l||p<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:u}),Yj(s);if(f&&f.length)s.state={style:f[0].style};else if(d){if(typeof h=="function")return s.state={style:d},Yj(s);s.state={style:c?ju({},c,d):d}}else s.state={style:{}};return s}return Yme(r,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,d=s.shouldReAnimate,u=s.to,f=s.from,h=this.state.style;if(l){if(!o){var p={style:c?ju({},c,u):u};this.state&&h&&(c&&h[c]!==u||!c&&h!==u)&&this.setState(p);return}if(!(ame(a.to,u)&&a.canBegin&&a.isActive)){var y=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=y||d?f:a.to;if(this.state&&h){var b={style:c?ju({},c,v):v};(c&&h[c]!==v||!c&&h!==v)&&this.setState(b)}this.runAnimation(fi(fi({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,d=a.easing,u=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,p=Lme(o,l,Eme(d),c,this.changeStyle),y=function(){s.stopJSAnimation=p()};this.manager.start([h,u,y,c,f])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],u=d.style,f=d.duration,h=f===void 0?0:f,p=function(v,b,x){if(x===0)return v;var m=b.duration,j=b.easing,N=j===void 0?"ease":j,w=b.style,S=b.properties,C=b.onAnimationEnd,k=x>0?o[x-1]:b,A=S||Object.keys(w);if(typeof N=="function"||N==="spring")return[].concat(ab(v),[s.runJSAnimation.bind(s,{from:k.style,to:w,duration:m,easing:N}),m]);var E=gP(A,m,N),T=fi(fi(fi({},k.style),w),{},{transition:E});return[].concat(ab(v),[T,m,C]).filter(gme)};return this.manager.start([c].concat(ab(o.reduce(p,[u,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=fme());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,p=a.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof d=="function"||typeof p=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var v=l?ju({},l,c):c,b=gP(Object.keys(v),o,d);y.start([u,s,fi(fi({},v),{},{transition:b}),o,f])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=zme(a,Bme),d=g.Children.count(s),u=this.state.style;if(typeof s=="function")return s(u);if(!l||d===0||o<=0)return s;var f=function(p){var y=p.props,v=y.style,b=v===void 0?{}:v,x=y.className,m=g.cloneElement(p,fi(fi({},c),{},{style:fi(fi({},b),u),className:x}));return m};return d===1?f(g.Children.only(s)):D.createElement("div",null,g.Children.map(s,function(h){return f(h)}))}}]),r}(g.PureComponent);Wa.displayName="Animate";Wa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Wa.propTypes={from:wt.oneOfType([wt.object,wt.string]),to:wt.oneOfType([wt.object,wt.string]),attributeName:wt.string,duration:wt.number,begin:wt.number,easing:wt.oneOfType([wt.string,wt.func]),steps:wt.arrayOf(wt.shape({duration:wt.number.isRequired,style:wt.object.isRequired,easing:wt.oneOfType([wt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),wt.func]),properties:wt.arrayOf("string"),onAnimationEnd:wt.func})),children:wt.oneOfType([wt.node,wt.func]),isActive:wt.bool,canBegin:wt.bool,onAnimationEnd:wt.func,shouldReAnimate:wt.bool,onAnimationStart:wt.func,onAnimationReStart:wt.func};function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Mg.apply(this,arguments)}function epe(e,t){return ipe(e)||npe(e,t)||rpe(e,t)||tpe()}function tpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rpe(e,t){if(e){if(typeof e=="string")return wP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wP(e,t)}}function wP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function npe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function ipe(e){if(Array.isArray(e))return e}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function SP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(i){ape(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ape(e,t,r){return t=spe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function spe(e){var t=ope(e,"string");return Wf(t)=="symbol"?t:t+""}function ope(e,t){if(Wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Wf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kP=function(t,r,i,a,s){var o=Math.min(Math.abs(i)/2,Math.abs(a)/2),l=a>=0?1:-1,c=i>=0?1:-1,d=a>=0&&i>=0||a<0&&i<0?1:0,u;if(o>0&&s instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=s[h]>o?o:s[h];u="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(r)),u+="L ".concat(t+i-c*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+i,",").concat(r+l*f[1])),u+="L ".concat(t+i,",").concat(r+a-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+i-c*f[2],",").concat(r+a)),u+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+a-l*f[3])),u+="Z"}else if(o>0&&s===+s&&s>0){var y=Math.min(o,s);u="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+i-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t+i,",").concat(r+l*y,`
            L `).concat(t+i,",").concat(r+a-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t+i-c*y,",").concat(r+a,`
            L `).concat(t+c*y,",").concat(r+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t,",").concat(r+a-l*y," Z")}else u="M ".concat(t,",").concat(r," h ").concat(i," v ").concat(a," h ").concat(-i," Z");return u},lpe=function(t,r){if(!t||!r)return!1;var i=t.x,a=t.y,s=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(s,s+l),u=Math.max(s,s+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return i>=d&&i<=u&&a>=f&&a<=h}return!1},cpe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uS=function(t){var r=SP(SP({},cpe),t),i=g.useRef(),a=g.useState(-1),s=epe(a,2),o=s[0],l=s[1];g.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var N=i.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,d=r.y,u=r.width,f=r.height,h=r.radius,p=r.className,y=r.animationEasing,v=r.animationDuration,b=r.animationBegin,x=r.isAnimationActive,m=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var j=gt("recharts-rectangle",p);return m?D.createElement(Wa,{canBegin:o>0,from:{width:u,height:f,x:c,y:d},to:{width:u,height:f,x:c,y:d},duration:v,animationEasing:y,isActive:m},function(N){var w=N.width,S=N.height,C=N.x,k=N.y;return D.createElement(Wa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:v,isActive:x,easing:y},D.createElement("path",Mg({},pt(r,!0),{className:j,d:kP(C,k,w,S,h),ref:i})))}):D.createElement("path",Mg({},pt(r,!0),{className:j,d:kP(c,d,u,f,h)}))};function Jj(){return Jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Jj.apply(this,arguments)}var fS=function(t){var r=t.cx,i=t.cy,a=t.r,s=t.className,o=gt("recharts-dot",s);return r===+r&&i===+i&&a===+a?D.createElement("circle",Jj({},pt(t,!1),eg(t),{className:o,cx:r,cy:i,r:a})):null};function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}var dpe=["x","y","top","left","width","height","className"];function Xj(){return Xj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Xj.apply(this,arguments)}function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function upe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(i){fpe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function fpe(e,t,r){return t=hpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hpe(e){var t=mpe(e,"string");return Hf(t)=="symbol"?t:t+""}function mpe(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Hf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ppe(e,t){if(e==null)return{};var r=gpe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function gpe(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}var xpe=function(t,r,i,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(i)},vpe=function(t){var r=t.x,i=r===void 0?0:r,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,f=u===void 0?0:u,h=t.height,p=h===void 0?0:h,y=t.className,v=ppe(t,dpe),b=upe({x:i,y:s,top:l,left:d,width:f,height:p},v);return!ke(i)||!ke(s)||!ke(f)||!ke(p)||!ke(l)||!ke(d)?null:D.createElement("path",Xj({},pt(b,!0),{className:gt("recharts-cross",y),d:xpe(i,s,f,p,l,d)}))},ype=w$,bpe=ype(Object.getPrototypeOf,Object),jpe=bpe,wpe=Ga,Npe=jpe,Spe=Ya,kpe="[object Object]",Cpe=Function.prototype,Ape=Object.prototype,lD=Cpe.toString,Epe=Ape.hasOwnProperty,Ppe=lD.call(Object);function Tpe(e){if(!Spe(e)||wpe(e)!=kpe)return!1;var t=Npe(e);if(t===null)return!0;var r=Epe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&lD.call(r)==Ppe}var Ope=Tpe;const _pe=It(Ope);var Ipe=Ga,Rpe=Ya,Mpe="[object Boolean]";function $pe(e){return e===!0||e===!1||Rpe(e)&&Ipe(e)==Mpe}var Fpe=$pe;const Dpe=It(Fpe);function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function $g(){return $g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},$g.apply(this,arguments)}function Lpe(e,t){return Upe(e)||qpe(e,t)||zpe(e,t)||Bpe()}function Bpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zpe(e,t){if(e){if(typeof e=="string")return AP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AP(e,t)}}function AP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function qpe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Upe(e){if(Array.isArray(e))return e}function EP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function PP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(r),!0).forEach(function(i){Vpe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Vpe(e,t,r){return t=Wpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wpe(e){var t=Hpe(e,"string");return Kf(t)=="symbol"?t:t+""}function Hpe(e,t){if(Kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Kf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TP=function(t,r,i,a,s){var o=i-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+i,",").concat(r),l+="L ".concat(t+i-o/2,",").concat(r+s),l+="L ".concat(t+i-o/2-a,",").concat(r+s),l+="L ".concat(t,",").concat(r," Z"),l},Kpe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Gpe=function(t){var r=PP(PP({},Kpe),t),i=g.useRef(),a=g.useState(-1),s=Lpe(a,2),o=s[0],l=s[1];g.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var j=i.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,y=r.animationEasing,v=r.animationDuration,b=r.animationBegin,x=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var m=gt("recharts-trapezoid",p);return x?D.createElement(Wa,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:u,lowerWidth:f,height:h,x:c,y:d},duration:v,animationEasing:y,isActive:x},function(j){var N=j.upperWidth,w=j.lowerWidth,S=j.height,C=j.x,k=j.y;return D.createElement(Wa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:v,easing:y},D.createElement("path",$g({},pt(r,!0),{className:m,d:TP(C,k,N,w,S),ref:i})))}):D.createElement("g",null,D.createElement("path",$g({},pt(r,!0),{className:m,d:TP(c,d,u,f,h)})))},Ype=["option","shapeType","propTransformer","activeClassName","isActive"];function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function Qpe(e,t){if(e==null)return{};var r=Jpe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Jpe(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function OP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function Fg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(r),!0).forEach(function(i){Xpe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Xpe(e,t,r){return t=Zpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zpe(e){var t=ege(e,"string");return Gf(t)=="symbol"?t:t+""}function ege(e,t){if(Gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Gf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tge(e,t){return Fg(Fg({},t),e)}function rge(e,t){return e==="symbols"}function _P(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return D.createElement(uS,r);case"trapezoid":return D.createElement(Gpe,r);case"sector":return D.createElement(JF,r);case"symbols":if(rge(t))return D.createElement(PN,r);break;default:return null}}function nge(e){return g.isValidElement(e)?e.props:e}function ige(e){var t=e.option,r=e.shapeType,i=e.propTransformer,a=i===void 0?tge:i,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=Qpe(e,Ype),d;if(g.isValidElement(t))d=g.cloneElement(t,Fg(Fg({},c),nge(t)));else if(ot(t))d=t(c);else if(_pe(t)&&!Dpe(t)){var u=a(t,c);d=D.createElement(_P,{shapeType:r,elementProps:u})}else{var f=c;d=D.createElement(_P,{shapeType:r,elementProps:f})}return l?D.createElement(ar,{className:o},d):d}function Ev(e,t){return t!=null&&"trapezoids"in e.props}function Pv(e,t){return t!=null&&"sectors"in e.props}function Yf(e,t){return t!=null&&"points"in e.props}function age(e,t){var r,i,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,s=e.y===(t==null||(i=t.labelViewBox)===null||i===void 0?void 0:i.y)||e.y===t.y;return a&&s}function sge(e,t){var r=e.endAngle===t.endAngle,i=e.startAngle===t.startAngle;return r&&i}function oge(e,t){var r=e.x===t.x,i=e.y===t.y,a=e.z===t.z;return r&&i&&a}function lge(e,t){var r;return Ev(e,t)?r=age:Pv(e,t)?r=sge:Yf(e,t)&&(r=oge),r}function cge(e,t){var r;return Ev(e,t)?r="trapezoids":Pv(e,t)?r="sectors":Yf(e,t)&&(r="points"),r}function dge(e,t){if(Ev(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Pv(e,t)){var i;return(i=t.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}return Yf(e,t)?t.payload:{}}function uge(e){var t=e.activeTooltipItem,r=e.graphicalItem,i=e.itemData,a=cge(r,t),s=dge(r,t),o=i.filter(function(c,d){var u=kv(s,c),f=r.props[a].filter(function(y){var v=lge(r,t);return v(y,t)}),h=r.props[a].indexOf(f[f.length-1]),p=d===h;return u&&p}),l=i.indexOf(o[o.length-1]);return l}var fge=Math.ceil,hge=Math.max;function mge(e,t,r,i){for(var a=-1,s=hge(fge((t-e)/(r||1)),0),o=Array(s);s--;)o[i?s:++a]=e,e+=r;return o}var pge=mge,gge=z$,IP=1/0,xge=17976931348623157e292;function vge(e){if(!e)return e===0?e:0;if(e=gge(e),e===IP||e===-IP){var t=e<0?-1:1;return t*xge}return e===e?e:0}var cD=vge,yge=pge,bge=gv,sb=cD;function jge(e){return function(t,r,i){return i&&typeof i!="number"&&bge(t,r,i)&&(r=i=void 0),t=sb(t),r===void 0?(r=t,t=0):r=sb(r),i=i===void 0?t<r?1:-1:sb(i),yge(t,r,i,e)}}var wge=jge,Nge=wge,Sge=Nge(),kge=Sge;const Dg=It(kge);function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}function RP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function MP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(r),!0).forEach(function(i){dD(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function dD(e,t,r){return t=Cge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cge(e){var t=Age(e,"string");return Qf(t)=="symbol"?t:t+""}function Age(e,t){if(Qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Qf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ege=["Webkit","Moz","O","ms"],Pge=function(t,r){var i=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=Ege.reduce(function(s,o){return MP(MP({},s),{},dD({},o+i,r))},{});return a[t]=r,a};function ed(e){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(e)}function Lg(){return Lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Lg.apply(this,arguments)}function $P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function ob(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(r),!0).forEach(function(i){Sn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$P(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Tge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FP(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,fD(i.key),i)}}function Oge(e,t,r){return t&&FP(e.prototype,t),r&&FP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ge(e,t,r){return t=Bg(t),Ige(e,uD()?Reflect.construct(t,r||[],Bg(e).constructor):t.apply(e,r))}function Ige(e,t){if(t&&(ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rge(e)}function Rge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uD=function(){return!!e})()}function Bg(e){return Bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bg(e)}function Mge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}function Zj(e,t){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},Zj(e,t)}function Sn(e,t,r){return t=fD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fD(e){var t=$ge(e,"string");return ed(t)=="symbol"?t:t+""}function $ge(e,t){if(ed(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(ed(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fge=function(t){var r=t.data,i=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=Lu().domain(Dg(0,c)).range([s,s+o-l]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(i),endX:d(a),scale:d,scaleValues:u}},DP=function(t){return t.changedTouches&&!!t.changedTouches.length},td=function(e){function t(r){var i;return Tge(this,t),i=_ge(this,t,[r]),Sn(i,"handleDrag",function(a){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(a):i.state.isSlideMoving&&i.handleSlideDrag(a)}),Sn(i,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&i.handleDrag(a.changedTouches[0])}),Sn(i,"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=i.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),i.detachDragEndListener()}),Sn(i,"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),Sn(i,"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),Sn(i,"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),Sn(i,"handleSlideDragStart",function(a){var s=DP(a)?a.changedTouches[0]:a;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(i,"startX"),endX:i.handleTravellerDragStart.bind(i,"endX")},i.state={},i}return Mge(t,e),Oge(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var a=i.startX,s=i.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,f=Math.min(a,s),h=Math.max(a,s),p=t.getIndexInRange(o,f),y=t.getIndexInRange(o,h);return{startIndex:p-p%c,endIndex:y===u?u:y-y%c}}},{key:"getTextOfTick",value:function(i){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=Ln(s[i],l,i);return ot(o)?o(c,i):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,u=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,y=c.onChange,v=i.pageX-s;v>0?v=Math.min(v,d+u-f-l,d+u-f-o):v<0&&(v=Math.max(v,d-o,d-l));var b=this.getIndex({startX:o+v,endX:l+v});(b.startIndex!==h||b.endIndex!==p)&&y&&y(b),this.setState({startX:o+v,endX:l+v,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,a){var s=DP(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],u=this.props,f=u.x,h=u.width,p=u.travellerWidth,y=u.onChange,v=u.gap,b=u.data,x={startX:this.state.startX,endX:this.state.endX},m=i.pageX-s;m>0?m=Math.min(m,f+h-p-d):m<0&&(m=Math.max(m,f-d)),x[o]=d+m;var j=this.getIndex(x),N=j.startIndex,w=j.endIndex,S=function(){var k=b.length-1;return o==="startX"&&(l>c?N%v===0:w%v===0)||l<c&&w===k||o==="endX"&&(l>c?w%v===0:N%v===0)||l>c&&w===k};this.setState(Sn(Sn({},o,d+m),"brushMoveStartX",i.pageX),function(){y&&S()&&y(j)})}},{key:"handleTravellerMoveKeyboard",value:function(i,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[a],f=l.indexOf(u);if(f!==-1){var h=f+i;if(!(h===-1||h>=l.length)){var p=l[h];a==="startX"&&p>=d||a==="endX"&&p<=c||this.setState(Sn({},a,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.fill,d=i.stroke;return D.createElement("rect",{stroke:d,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.data,d=i.children,u=i.padding,f=g.Children.only(d);return f?D.cloneElement(f,{x:a,y:s,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(i,a){var s,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,y=c.data,v=c.startIndex,b=c.endIndex,x=Math.max(i,this.props.x),m=ob(ob({},pt(this.props,!1)),{},{x,y:d,width:u,height:f}),j=p||"Min value: ".concat((s=y[v])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=y[b])===null||o===void 0?void 0:o.name);return D.createElement(ar,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,m))}},{key:"renderSlide",value:function(i,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,d=s.travellerWidth,u=Math.min(i,a)+d,f=Math.max(Math.abs(a-i)-d,0);return D.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:f,height:l})}},{key:"renderText",value:function(){var i=this.props,a=i.startIndex,s=i.endIndex,o=i.y,l=i.height,c=i.travellerWidth,d=i.stroke,u=this.state,f=u.startX,h=u.endX,p=5,y={pointerEvents:"none",fill:d};return D.createElement(ar,{className:"recharts-brush-texts"},D.createElement(pg,Lg({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:o+l/2},y),this.getTextOfTick(a)),D.createElement(pg,Lg({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:o+l/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var i=this.props,a=i.data,s=i.className,o=i.children,l=i.x,c=i.y,d=i.width,u=i.height,f=i.alwaysShowText,h=this.state,p=h.startX,y=h.endX,v=h.isTextActive,b=h.isSlideMoving,x=h.isTravellerMoving,m=h.isTravellerFocused;if(!a||!a.length||!ke(l)||!ke(c)||!ke(d)||!ke(u)||d<=0||u<=0)return null;var j=gt("recharts-brush",s),N=D.Children.count(o)===1,w=Pge("userSelect","none");return D.createElement(ar,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(v||b||x||m||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var a=i.x,s=i.y,o=i.width,l=i.height,c=i.stroke,d=Math.floor(s+l/2)-1;return D.createElement(D.Fragment,null,D.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),D.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),D.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,a){var s;return D.isValidElement(i)?s=D.cloneElement(i,a):ot(i)?s=i(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(i,a){var s=i.data,o=i.width,l=i.x,c=i.travellerWidth,d=i.updateId,u=i.startIndex,f=i.endIndex;if(s!==a.prevData||d!==a.prevUpdateId)return ob({prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},s&&s.length?Fge({data:s,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(i.startIndex),endX:a.scale(i.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(i,a){for(var s=i.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);i[c]>a?l=c:o=c}return a>=i[l]?l:o}}])}(g.PureComponent);Sn(td,"displayName","Brush");Sn(td,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Dge=$N;function Lge(e,t){var r;return Dge(e,function(i,a,s){return r=t(i,a,s),!r}),!!r}var Bge=Lge,zge=m$,qge=so,Uge=Bge,Vge=wn,Wge=gv;function Hge(e,t,r){var i=Vge(e)?zge:Uge;return r&&Wge(e,t,r)&&(t=void 0),i(e,qge(t))}var Kge=Hge;const Gge=It(Kge);var ta=function(t,r){var i=t.alwaysShow,a=t.ifOverflow;return i&&(a="extendDomain"),a===r},LP=$$;function Yge(e,t,r){t=="__proto__"&&LP?LP(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Qge=Yge,Jge=Qge,Xge=R$,Zge=so;function exe(e,t){var r={};return t=Zge(t),Xge(e,function(i,a,s){Jge(r,a,t(i,a,s))}),r}var txe=exe;const rxe=It(txe);function nxe(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}var ixe=nxe,axe=$N;function sxe(e,t){var r=!0;return axe(e,function(i,a,s){return r=!!t(i,a,s),r}),r}var oxe=sxe,lxe=ixe,cxe=oxe,dxe=so,uxe=wn,fxe=gv;function hxe(e,t,r){var i=uxe(e)?lxe:cxe;return r&&fxe(e,t,r)&&(t=void 0),i(e,dxe(t))}var mxe=hxe;const hD=It(mxe);var pxe=["x","y"];function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function ew(){return ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ew.apply(this,arguments)}function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function uu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(r),!0).forEach(function(i){gxe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function gxe(e,t,r){return t=xxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xxe(e){var t=vxe(e,"string");return Jf(t)=="symbol"?t:t+""}function vxe(e,t){if(Jf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Jf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yxe(e,t){if(e==null)return{};var r=bxe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function bxe(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function jxe(e,t){var r=e.x,i=e.y,a=yxe(e,pxe),s="".concat(r),o=parseInt(s,10),l="".concat(i),c=parseInt(l,10),d="".concat(t.height||a.height),u=parseInt(d,10),f="".concat(t.width||a.width),h=parseInt(f,10);return uu(uu(uu(uu(uu({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function zP(e){return D.createElement(ige,ew({shapeType:"rectangle",propTransformer:jxe,activeClassName:"recharts-active-bar"},e))}var wxe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(i,a){if(typeof t=="number")return t;var s=typeof i=="number";return s?t(i,a):(s||rl(),r)}},Nxe=["value","background"],mD;function rd(e){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rd(e)}function Sxe(e,t){if(e==null)return{};var r=kxe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function kxe(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},zg.apply(this,arguments)}function qP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qP(Object(r),!0).forEach(function(i){ks(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Cxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UP(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,gD(i.key),i)}}function Axe(e,t,r){return t&&UP(e.prototype,t),r&&UP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Exe(e,t,r){return t=qg(t),Pxe(e,pD()?Reflect.construct(t,r||[],qg(e).constructor):t.apply(e,r))}function Pxe(e,t){if(t&&(rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Txe(e)}function Txe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pD=function(){return!!e})()}function qg(e){return qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qg(e)}function Oxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tw(e,t)}function tw(e,t){return tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},tw(e,t)}function ks(e,t,r){return t=gD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gD(e){var t=_xe(e,"string");return rd(t)=="symbol"?t:t+""}function _xe(e,t){if(rd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(rd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ml=function(e){function t(){var r;Cxe(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=Exe(this,t,[].concat(a)),ks(r,"state",{isAnimationFinished:!1}),ks(r,"id",Rh("recharts-bar-")),ks(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),ks(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Oxe(t,e),Axe(t,[{key:"renderRectanglesStatically",value:function(i){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,d=s.activeBar,u=pt(this.props,!1);return i&&i.map(function(f,h){var p=h===c,y=p?d:o,v=lr(lr(lr({},u),f),{},{isActive:p,option:y,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return D.createElement(ar,zg({className:"recharts-bar-rectangle"},tg(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),D.createElement(zP,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,f=a.animationId,h=this.state.prevData;return D.createElement(Wa,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,v=s.map(function(b,x){var m=h&&h[x];if(m){var j=Ni(m.x,b.x),N=Ni(m.y,b.y),w=Ni(m.width,b.width),S=Ni(m.height,b.height);return lr(lr({},b),{},{x:j(y),y:N(y),width:w(y),height:S(y)})}if(o==="horizontal"){var C=Ni(0,b.height),k=C(y);return lr(lr({},b),{},{y:b.y+b.height-k,height:k})}var A=Ni(0,b.width),E=A(y);return lr(lr({},b),{},{width:E})});return D.createElement(ar,null,i.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var i=this.props,a=i.data,s=i.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!kv(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var i=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=pt(this.props.background,!1);return s.map(function(d,u){d.value;var f=d.background,h=Sxe(d,Nxe);if(!f)return null;var p=lr(lr(lr(lr(lr({},h),{},{fill:"#eee"},f),c),tg(i.props,d,u)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return D.createElement(zP,zg({key:"background-bar-".concat(u),option:i.props.background,isActive:u===l},p))})}},{key:"renderErrorBar",value:function(i,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,d=s.layout,u=s.children,f=ti(u,Bh);if(!f)return null;var h=d==="vertical"?o[0].height/2:o[0].width/2,p=function(b,x){var m=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:m,errorVal:Ln(b,x)}},y={clipPath:i?"url(#clipPath-".concat(a,")"):null};return D.createElement(ar,y,f.map(function(v){return D.cloneElement(v,{key:"error-bar-".concat(a,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var i=this.props,a=i.hide,s=i.data,o=i.className,l=i.xAxis,c=i.yAxis,d=i.left,u=i.top,f=i.width,h=i.height,p=i.isAnimationActive,y=i.background,v=i.id;if(a||!s||!s.length)return null;var b=this.state.isAnimationFinished,x=gt("recharts-bar",o),m=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,N=m||j,w=ft(v)?this.id:v;return D.createElement(ar,{className:x},m||j?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(w)},D.createElement("rect",{x:m?d:d-f/2,y:j?u:u-h/2,width:m?f:f*2,height:j?h:h*2}))):null,D.createElement(ar,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(w,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,w),(!p||b)&&Bs.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:a.curData}:i.data!==a.curData?{curData:i.data}:null}}])}(g.PureComponent);mD=ml;ks(ml,"displayName","Bar");ks(ml,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Pa.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ks(ml,"getComposedData",function(e){var t=e.props,r=e.item,i=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,h=e.offset,p=lfe(i,r);if(!p)return null;var y=t.layout,v=r.type.defaultProps,b=v!==void 0?lr(lr({},v),r.props):r.props,x=b.dataKey,m=b.children,j=b.minPointSize,N=y==="horizontal"?o:s,w=d?N.scale.domain():null,S=gfe({numericAxis:N}),C=ti(m,LN),k=f.map(function(A,E){var T,P,_,R,O,$;d?T=cfe(d[u+E],w):(T=Ln(A,x),Array.isArray(T)||(T=[S,T]));var M=wxe(j,mD.defaultProps.minPointSize)(T[1],E);if(y==="horizontal"){var I,L=[o.scale(T[0]),o.scale(T[1])],z=L[0],ie=L[1];P=qE({axis:s,ticks:l,bandSize:a,offset:p.offset,entry:A,index:E}),_=(I=ie??z)!==null&&I!==void 0?I:void 0,R=p.size;var U=z-ie;if(O=Number.isNaN(U)?0:U,$={x:P,y:o.y,width:R,height:o.height},Math.abs(M)>0&&Math.abs(O)<Math.abs(M)){var ee=Ei(O||M)*(Math.abs(M)-Math.abs(O));_-=ee,O+=ee}}else{var de=[s.scale(T[0]),s.scale(T[1])],oe=de[0],Pe=de[1];if(P=oe,_=qE({axis:o,ticks:c,bandSize:a,offset:p.offset,entry:A,index:E}),R=Pe-oe,O=p.size,$={x:s.x,y:_,width:s.width,height:O},Math.abs(M)>0&&Math.abs(R)<Math.abs(M)){var ve=Ei(R||M)*(Math.abs(M)-Math.abs(R));R+=ve}}return lr(lr(lr({},A),{},{x:P,y:_,width:R,height:O,value:d?T:T[1],payload:A,background:$},C&&C[E]&&C[E].props),{},{tooltipPayload:[GF(r,A)],tooltipPosition:{x:P+R/2,y:_+O/2}})});return lr({data:k,layout:y},h)});function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function Ixe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VP(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,xD(i.key),i)}}function Rxe(e,t,r){return t&&VP(e.prototype,t),r&&VP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function WP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function yi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(r),!0).forEach(function(i){Tv(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Tv(e,t,r){return t=xD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xD(e){var t=Mxe(e,"string");return Xf(t)=="symbol"?t:t+""}function Mxe(e,t){if(Xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Xf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vD=function(t,r,i,a,s){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(r),f={left:i.left,leftMirror:i.left,right:o-i.right,rightMirror:o-i.right,top:i.top,topMirror:i.top,bottom:l-i.bottom,bottomMirror:l-i.bottom},h=!!An(d,ml);return u.reduce(function(p,y){var v=r[y],b=v.orientation,x=v.domain,m=v.padding,j=m===void 0?{}:m,N=v.mirror,w=v.reversed,S="".concat(b).concat(N?"Mirror":""),C,k,A,E,T;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var P=x[1]-x[0],_=1/0,R=v.categoricalDomain.sort();if(R.forEach(function(de,oe){oe>0&&(_=Math.min((de||0)-(R[oe-1]||0),_))}),Number.isFinite(_)){var O=_/P,$=v.layout==="vertical"?i.height:i.width;if(v.padding==="gap"&&(C=O*$/2),v.padding==="no-gap"){var M=el(t.barCategoryGap,O*$),I=O*$/2;C=I-M-(I-M)/$*M}}}a==="xAxis"?k=[i.left+(j.left||0)+(C||0),i.left+i.width-(j.right||0)-(C||0)]:a==="yAxis"?k=c==="horizontal"?[i.top+i.height-(j.bottom||0),i.top+(j.top||0)]:[i.top+(j.top||0)+(C||0),i.top+i.height-(j.bottom||0)-(C||0)]:k=v.range,w&&(k=[k[1],k[0]]);var L=sfe(v,s,h),z=L.scale,ie=L.realScaleType;z.domain(x).range(k),ofe(z);var U=pfe(z,yi(yi({},v),{},{realScaleType:ie}));a==="xAxis"?(T=b==="top"&&!N||b==="bottom"&&N,A=i.left,E=f[S]-T*v.height):a==="yAxis"&&(T=b==="left"&&!N||b==="right"&&N,A=f[S]-T*v.width,E=i.top);var ee=yi(yi(yi({},v),U),{},{realScaleType:ie,x:A,y:E,scale:z,width:a==="xAxis"?i.width:v.width,height:a==="yAxis"?i.height:v.height});return ee.bandSize=Pg(ee,U),!v.hide&&a==="xAxis"?f[S]+=(T?-1:1)*ee.height:v.hide||(f[S]+=(T?-1:1)*ee.width),yi(yi({},p),{},Tv({},y,ee))},{})},yD=function(t,r){var i=t.x,a=t.y,s=r.x,o=r.y;return{x:Math.min(i,s),y:Math.min(a,o),width:Math.abs(s-i),height:Math.abs(o-a)}},$xe=function(t){var r=t.x1,i=t.y1,a=t.x2,s=t.y2;return yD({x:r,y:i},{x:a,y:s})},bD=function(){function e(t){Ixe(this,e),this.scale=t}return Rxe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.bandAware,s=i.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var i=this.range(),a=i[0],s=i[i.length-1];return a<=s?r>=a&&r<=s:r>=s&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();Tv(bD,"EPS",1e-4);var hS=function(t){var r=Object.keys(t).reduce(function(i,a){return yi(yi({},i),{},Tv({},a,bD.create(t[a])))},{});return yi(yi({},r),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return rxe(a,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return hD(a,function(s,o){return r[o].isInRange(s)})}})};function Fxe(e){return(e%180+180)%180}var Dxe=function(t){var r=t.width,i=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Fxe(a),o=s*Math.PI/180,l=Math.atan(i/r),c=o>l&&o<Math.PI-l?i/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Lxe=so,Bxe=Mh,zxe=mv;function qxe(e){return function(t,r,i){var a=Object(t);if(!Bxe(t)){var s=Lxe(r);t=zxe(t),r=function(l){return s(a[l],l,a)}}var o=e(t,r,i);return o>-1?a[s?t[o]:o]:void 0}}var Uxe=qxe,Vxe=cD;function Wxe(e){var t=Vxe(e),r=t%1;return t===t?r?t-r:t:0}var Hxe=Wxe,Kxe=E$,Gxe=so,Yxe=Hxe,Qxe=Math.max;function Jxe(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var a=r==null?0:Yxe(r);return a<0&&(a=Qxe(i+a,0)),Kxe(e,Gxe(t),a)}var Xxe=Jxe,Zxe=Uxe,eve=Xxe,tve=Zxe(eve),rve=tve;const nve=It(rve);var ive=WY(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),mS=g.createContext(void 0),pS=g.createContext(void 0),jD=g.createContext(void 0),wD=g.createContext({}),ND=g.createContext(void 0),SD=g.createContext(0),kD=g.createContext(0),HP=function(t){var r=t.state,i=r.xAxisMap,a=r.yAxisMap,s=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=ive(s);return D.createElement(mS.Provider,{value:i},D.createElement(pS.Provider,{value:a},D.createElement(wD.Provider,{value:s},D.createElement(jD.Provider,{value:u},D.createElement(ND.Provider,{value:o},D.createElement(SD.Provider,{value:d},D.createElement(kD.Provider,{value:c},l)))))))},ave=function(){return g.useContext(ND)},CD=function(t){var r=g.useContext(mS);r==null&&rl();var i=r[t];return i==null&&rl(),i},sve=function(){var t=g.useContext(mS);return fs(t)},ove=function(){var t=g.useContext(pS),r=nve(t,function(i){return hD(i.domain,Number.isFinite)});return r||fs(t)},AD=function(t){var r=g.useContext(pS);r==null&&rl();var i=r[t];return i==null&&rl(),i},lve=function(){var t=g.useContext(jD);return t},cve=function(){return g.useContext(wD)},gS=function(){return g.useContext(kD)},xS=function(){return g.useContext(SD)};function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function dve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uve(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,PD(i.key),i)}}function fve(e,t,r){return t&&uve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hve(e,t,r){return t=Ug(t),mve(e,ED()?Reflect.construct(t,r||[],Ug(e).constructor):t.apply(e,r))}function mve(e,t){if(t&&(nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pve(e)}function pve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ED(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ED=function(){return!!e})()}function Ug(e){return Ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ug(e)}function gve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rw(e,t)}function rw(e,t){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},rw(e,t)}function KP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function GP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(r),!0).forEach(function(i){vS(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function vS(e,t,r){return t=PD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PD(e){var t=xve(e,"string");return nd(t)=="symbol"?t:t+""}function xve(e,t){if(nd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(nd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vve(e,t){return wve(e)||jve(e,t)||bve(e,t)||yve()}function yve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bve(e,t){if(e){if(typeof e=="string")return YP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YP(e,t)}}function YP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function jve(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function wve(e){if(Array.isArray(e))return e}function nw(){return nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nw.apply(this,arguments)}var Nve=function(t,r){var i;return D.isValidElement(t)?i=D.cloneElement(t,r):ot(t)?i=t(r):i=D.createElement("line",nw({},r,{className:"recharts-reference-line-line"})),i},Sve=function(t,r,i,a,s,o,l,c,d){var u=s.x,f=s.y,h=s.width,p=s.height;if(i){var y=d.y,v=t.y.apply(y,{position:o});if(ta(d,"discard")&&!t.y.isInRange(v))return null;var b=[{x:u+h,y:v},{x:u,y:v}];return c==="left"?b.reverse():b}if(r){var x=d.x,m=t.x.apply(x,{position:o});if(ta(d,"discard")&&!t.x.isInRange(m))return null;var j=[{x:m,y:f+p},{x:m,y:f}];return l==="top"?j.reverse():j}if(a){var N=d.segment,w=N.map(function(S){return t.apply(S,{position:o})});return ta(d,"discard")&&Gge(w,function(S){return!t.isInRange(S)})?null:w}return null};function kve(e){var t=e.x,r=e.y,i=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=ave(),u=CD(a),f=AD(s),h=lve();if(!d||!h)return null;Ea(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=hS({x:u.scale,y:f.scale}),y=vr(t),v=vr(r),b=i&&i.length===2,x=Sve(p,y,v,b,h,e.position,u.orientation,f.orientation,e);if(!x)return null;var m=vve(x,2),j=m[0],N=j.x,w=j.y,S=m[1],C=S.x,k=S.y,A=ta(e,"hidden")?"url(#".concat(d,")"):void 0,E=GP(GP({clipPath:A},pt(e,!0)),{},{x1:N,y1:w,x2:C,y2:k});return D.createElement(ar,{className:gt("recharts-reference-line",l)},Nve(o,E),Ur.renderCallByParent(e,$xe({x1:N,y1:w,x2:C,y2:k})))}var yS=function(e){function t(){return dve(this,t),hve(this,t,arguments)}return gve(t,e),fve(t,[{key:"render",value:function(){return D.createElement(kve,this.props)}}])}(D.Component);vS(yS,"displayName","ReferenceLine");vS(yS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},iw.apply(this,arguments)}function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}function QP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function JP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(r),!0).forEach(function(i){Ov(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Cve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ave(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,OD(i.key),i)}}function Eve(e,t,r){return t&&Ave(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pve(e,t,r){return t=Vg(t),Tve(e,TD()?Reflect.construct(t,r||[],Vg(e).constructor):t.apply(e,r))}function Tve(e,t){if(t&&(id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ove(e)}function Ove(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TD=function(){return!!e})()}function Vg(e){return Vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vg(e)}function _ve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aw(e,t)}function aw(e,t){return aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},aw(e,t)}function Ov(e,t,r){return t=OD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OD(e){var t=Ive(e,"string");return id(t)=="symbol"?t:t+""}function Ive(e,t){if(id(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(id(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rve=function(t){var r=t.x,i=t.y,a=t.xAxis,s=t.yAxis,o=hS({x:a.scale,y:s.scale}),l=o.apply({x:r,y:i},{bandAware:!0});return ta(t,"discard")&&!o.isInRange(l)?null:l},_v=function(e){function t(){return Cve(this,t),Pve(this,t,arguments)}return _ve(t,e),Eve(t,[{key:"render",value:function(){var i=this.props,a=i.x,s=i.y,o=i.r,l=i.alwaysShow,c=i.clipPathId,d=vr(a),u=vr(s);if(Ea(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=Rve(this.props);if(!f)return null;var h=f.x,p=f.y,y=this.props,v=y.shape,b=y.className,x=ta(this.props,"hidden")?"url(#".concat(c,")"):void 0,m=JP(JP({clipPath:x},pt(this.props,!0)),{},{cx:h,cy:p});return D.createElement(ar,{className:gt("recharts-reference-dot",b)},t.renderDot(v,m),Ur.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(D.Component);Ov(_v,"displayName","ReferenceDot");Ov(_v,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ov(_v,"renderDot",function(e,t){var r;return D.isValidElement(e)?r=D.cloneElement(e,t):ot(e)?r=e(t):r=D.createElement(fS,iw({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function sw(){return sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},sw.apply(this,arguments)}function ad(e){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(e)}function XP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function ZP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(r),!0).forEach(function(i){Iv(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Mve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ve(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ID(i.key),i)}}function Fve(e,t,r){return t&&$ve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dve(e,t,r){return t=Wg(t),Lve(e,_D()?Reflect.construct(t,r||[],Wg(e).constructor):t.apply(e,r))}function Lve(e,t){if(t&&(ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bve(e)}function Bve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_D=function(){return!!e})()}function Wg(e){return Wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wg(e)}function zve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ow(e,t)}function ow(e,t){return ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},ow(e,t)}function Iv(e,t,r){return t=ID(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ID(e){var t=qve(e,"string");return ad(t)=="symbol"?t:t+""}function qve(e,t){if(ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(ad(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uve=function(t,r,i,a,s){var o=s.x1,l=s.x2,c=s.y1,d=s.y2,u=s.xAxis,f=s.yAxis;if(!u||!f)return null;var h=hS({x:u.scale,y:f.scale}),p={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:i?h.y.apply(c,{position:"start"}):h.y.rangeMin},y={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return ta(s,"discard")&&(!h.isInRange(p)||!h.isInRange(y))?null:yD(p,y)},Rv=function(e){function t(){return Mve(this,t),Dve(this,t,arguments)}return zve(t,e),Fve(t,[{key:"render",value:function(){var i=this.props,a=i.x1,s=i.x2,o=i.y1,l=i.y2,c=i.className,d=i.alwaysShow,u=i.clipPathId;Ea(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=vr(a),h=vr(s),p=vr(o),y=vr(l),v=this.props.shape;if(!f&&!h&&!p&&!y&&!v)return null;var b=Uve(f,h,p,y,this.props);if(!b&&!v)return null;var x=ta(this.props,"hidden")?"url(#".concat(u,")"):void 0;return D.createElement(ar,{className:gt("recharts-reference-area",c)},t.renderRect(v,ZP(ZP({clipPath:x},pt(this.props,!0)),b)),Ur.renderCallByParent(this.props,b))}}])}(D.Component);Iv(Rv,"displayName","ReferenceArea");Iv(Rv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Iv(Rv,"renderRect",function(e,t){var r;return D.isValidElement(e)?r=D.cloneElement(e,t):ot(e)?r=e(t):r=D.createElement(uS,sw({},t,{className:"recharts-reference-area-rect"})),r});function RD(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var i=[],a=0;a<e.length;a+=t)i.push(e[a]);return i}function Vve(e,t,r){var i={width:e.width+t.width,height:e.height+t.height};return Dxe(i,r)}function Wve(e,t,r){var i=r==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:i?a:s,end:i?a+o:s+l}:{start:i?a+o:s+l,end:i?a:s}}function Hg(e,t,r,i,a){if(e*t<e*i||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-i)>=0&&e*(t+e*s/2-a)<=0}function Hve(e,t){return RD(e,t+1)}function Kve(e,t,r,i,a){for(var s=(i||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,f=function(){var y=i==null?void 0:i[c];if(y===void 0)return{v:RD(i,d)};var v=c,b,x=function(){return b===void 0&&(b=r(y,v)),b},m=y.coordinate,j=c===0||Hg(e,m,x,u,l);j||(c=0,u=o,d+=1),j&&(u=m+e*(x()/2+a),c+=d)},h;d<=s.length;)if(h=f(),h)return h.v;return[]}function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function eT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(r),!0).forEach(function(i){Gve(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Gve(e,t,r){return t=Yve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yve(e){var t=Qve(e,"string");return Zf(t)=="symbol"?t:t+""}function Qve(e,t){if(Zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Zf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jve(e,t,r,i,a){for(var s=(i||[]).slice(),o=s.length,l=t.start,c=t.end,d=function(h){var p=s[h],y,v=function(){return y===void 0&&(y=r(p,h)),y};if(h===o-1){var b=e*(p.coordinate+e*v()/2-c);s[h]=p=zr(zr({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[h]=p=zr(zr({},p),{},{tickCoord:p.coordinate});var x=Hg(e,p.tickCoord,v,l,c);x&&(c=p.tickCoord-e*(v()/2+a),s[h]=zr(zr({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return s}function Xve(e,t,r,i,a,s){var o=(i||[]).slice(),l=o.length,c=t.start,d=t.end;if(s){var u=i[l-1],f=r(u,l-1),h=e*(u.coordinate+e*f/2-d);o[l-1]=u=zr(zr({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate});var p=Hg(e,u.tickCoord,function(){return f},c,d);p&&(d=u.tickCoord-e*(f/2+a),o[l-1]=zr(zr({},u),{},{isShow:!0}))}for(var y=s?l-1:l,v=function(m){var j=o[m],N,w=function(){return N===void 0&&(N=r(j,m)),N};if(m===0){var S=e*(j.coordinate-e*w()/2-c);o[m]=j=zr(zr({},j),{},{tickCoord:S<0?j.coordinate-S*e:j.coordinate})}else o[m]=j=zr(zr({},j),{},{tickCoord:j.coordinate});var C=Hg(e,j.tickCoord,w,c,d);C&&(c=j.tickCoord+e*(w()/2+a),o[m]=zr(zr({},j),{},{isShow:!0}))},b=0;b<y;b++)v(b);return o}function bS(e,t,r){var i=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,f=e.angle;if(!a||!a.length||!i)return[];if(ke(c)||Pa.isSsr)return Hve(a,typeof c=="number"&&ke(c)?c:0);var h=[],p=l==="top"||l==="bottom"?"width":"height",y=u&&p==="width"?Du(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(j,N){var w=ot(d)?d(j.value,N):j.value;return p==="width"?Vve(Du(w,{fontSize:t,letterSpacing:r}),y,f):Du(w,{fontSize:t,letterSpacing:r})[p]},b=a.length>=2?Ei(a[1].coordinate-a[0].coordinate):1,x=Wve(s,b,p);return c==="equidistantPreserveStart"?Kve(b,x,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Xve(b,x,v,a,o,c==="preserveStartEnd"):h=Jve(b,x,v,a,o),h.filter(function(m){return m.isShow}))}var Zve=["viewBox"],eye=["viewBox"],tye=["ticks"];function sd(e){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(e)}function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Vl.apply(this,arguments)}function tT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tT(Object(r),!0).forEach(function(i){jS(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function lb(e,t){if(e==null)return{};var r=rye(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function rye(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function nye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rT(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,$D(i.key),i)}}function iye(e,t,r){return t&&rT(e.prototype,t),r&&rT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aye(e,t,r){return t=Kg(t),sye(e,MD()?Reflect.construct(t,r||[],Kg(e).constructor):t.apply(e,r))}function sye(e,t){if(t&&(sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oye(e)}function oye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MD=function(){return!!e})()}function Kg(e){return Kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kg(e)}function lye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lw(e,t)}function lw(e,t){return lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},lw(e,t)}function jS(e,t,r){return t=$D(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $D(e){var t=cye(e,"string");return sd(t)=="symbol"?t:t+""}function cye(e,t){if(sd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(sd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zd=function(e){function t(r){var i;return nye(this,t),i=aye(this,t,[r]),i.state={fontSize:"",letterSpacing:""},i}return lye(t,e),iye(t,[{key:"shouldComponentUpdate",value:function(i,a){var s=i.viewBox,o=lb(i,Zve),l=this.props,c=l.viewBox,d=lb(l,eye);return!sc(s,c)||!sc(o,d)||!sc(a,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var a=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,u=a.tickSize,f=a.mirror,h=a.tickMargin,p,y,v,b,x,m,j=f?-1:1,N=i.tickSize||u,w=ke(i.tickCoord)?i.tickCoord:i.coordinate;switch(d){case"top":p=y=i.coordinate,b=o+ +!f*c,v=b-j*N,m=v-j*h,x=w;break;case"left":v=b=i.coordinate,y=s+ +!f*l,p=y-j*N,x=p-j*h,m=w;break;case"right":v=b=i.coordinate,y=s+ +f*l,p=y+j*N,x=p+j*h,m=w;break;default:p=y=i.coordinate,b=o+ +f*c,v=b+j*N,m=v+j*h,x=w;break}return{line:{x1:p,y1:v,x2:y,y2:b},tick:{x,y:m}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,a=i.orientation,s=i.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,a=i.orientation,s=i.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.orientation,d=i.mirror,u=i.axisLine,f=Yr(Yr(Yr({},pt(this.props,!1)),pt(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);f=Yr(Yr({},f),{},{x1:a,y1:s+h*l,x2:a+o,y2:s+h*l})}else{var p=+(c==="left"&&!d||c==="right"&&d);f=Yr(Yr({},f),{},{x1:a+p*o,y1:s,x2:a+p*o,y2:s+l})}return D.createElement("line",Vl({},f,{className:gt("recharts-cartesian-axis-line",ei(u,"className"))}))}},{key:"renderTicks",value:function(i,a,s){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,f=l.tickFormatter,h=l.unit,p=bS(Yr(Yr({},this.props),{},{ticks:i}),a,s),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),b=pt(this.props,!1),x=pt(u,!1),m=Yr(Yr({},b),{},{fill:"none"},pt(c,!1)),j=p.map(function(N,w){var S=o.getTickLineCoord(N),C=S.line,k=S.tick,A=Yr(Yr(Yr(Yr({textAnchor:y,verticalAnchor:v},b),{},{stroke:"none",fill:d},x),k),{},{index:w,payload:N,visibleTicksCount:p.length,tickFormatter:f});return D.createElement(ar,Vl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},tg(o.props,N,w)),c&&D.createElement("line",Vl({},m,C,{className:gt("recharts-cartesian-axis-tick-line",ei(c,"className"))})),u&&t.renderTickItem(u,A,"".concat(ot(f)?f(N.value,w):N.value).concat(h||"")))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var i=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var f=this.props,h=f.ticks,p=lb(f,tye),y=h;return ot(c)&&(y=h&&h.length>0?c(this.props):c(p)),o<=0||l<=0||!y||!y.length?null:D.createElement(ar,{className:gt("recharts-cartesian-axis",d),ref:function(b){i.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Ur.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,a,s){var o;return D.isValidElement(i)?o=D.cloneElement(i,a):ot(i)?o=i(a):o=D.createElement(pg,Vl({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(g.Component);jS(zd,"displayName","CartesianAxis");jS(zd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var dye=["x1","y1","x2","y2","key"],uye=["offset"];function nl(e){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nl(e)}function nT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nT(Object(r),!0).forEach(function(i){fye(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function fye(e,t,r){return t=hye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hye(e){var t=mye(e,"string");return nl(t)=="symbol"?t:t+""}function mye(e,t){if(nl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(nl(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ao.apply(this,arguments)}function iT(e,t){if(e==null)return{};var r=pye(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function pye(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}var gye=function(t){var r=t.fill;if(!r||r==="none")return null;var i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return D.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function FD(e,t){var r;if(D.isValidElement(e))r=D.cloneElement(e,t);else if(ot(e))r=e(t);else{var i=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=iT(t,dye),d=pt(c,!1);d.offset;var u=iT(d,uye);r=D.createElement("line",Ao({},u,{x1:i,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function xye(e){var t=e.x,r=e.width,i=e.horizontal,a=i===void 0?!0:i,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var d=Vr(Vr({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return FD(a,d)});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function vye(e){var t=e.y,r=e.height,i=e.vertical,a=i===void 0?!0:i,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var d=Vr(Vr({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return FD(a,d)});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function yye(e){var t=e.horizontalFill,r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var y=!u[p+1],v=y?a+o-h:u[p+1]-h;if(v<=0)return null;var b=p%t.length;return D.createElement("rect",{key:"react-".concat(p),y:h,x:i,height:v,width:s,stroke:"none",fill:t[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function bye(e){var t=e.vertical,r=t===void 0?!0:t,i=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!i||!i.length)return null;var u=d.map(function(h){return Math.round(h+s-s)}).sort(function(h,p){return h-p});s!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var y=!u[p+1],v=y?s+l-h:u[p+1]-h;if(v<=0)return null;var b=p%i.length;return D.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:v,height:c,stroke:"none",fill:i[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var jye=function(t,r){var i=t.xAxis,a=t.width,s=t.height,o=t.offset;return HF(bS(Vr(Vr(Vr({},zd.defaultProps),i),{},{ticks:wa(i,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,r)},wye=function(t,r){var i=t.yAxis,a=t.width,s=t.height,o=t.offset;return HF(bS(Vr(Vr(Vr({},zd.defaultProps),i),{},{ticks:wa(i,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,r)},Sl={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function cw(e){var t,r,i,a,s,o,l=gS(),c=xS(),d=cve(),u=Vr(Vr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Sl.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Sl.fill,horizontal:(i=e.horizontal)!==null&&i!==void 0?i:Sl.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Sl.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:Sl.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Sl.verticalFill,x:ke(e.x)?e.x:d.left,y:ke(e.y)?e.y:d.top,width:ke(e.width)?e.width:d.width,height:ke(e.height)?e.height:d.height}),f=u.x,h=u.y,p=u.width,y=u.height,v=u.syncWithTicks,b=u.horizontalValues,x=u.verticalValues,m=sve(),j=ove();if(!ke(p)||p<=0||!ke(y)||y<=0||!ke(f)||f!==+f||!ke(h)||h!==+h)return null;var N=u.verticalCoordinatesGenerator||jye,w=u.horizontalCoordinatesGenerator||wye,S=u.horizontalPoints,C=u.verticalPoints;if((!S||!S.length)&&ot(w)){var k=b&&b.length,A=w({yAxis:j?Vr(Vr({},j),{},{ticks:k?b:j.ticks}):void 0,width:l,height:c,offset:d},k?!0:v);Ea(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(nl(A),"]")),Array.isArray(A)&&(S=A)}if((!C||!C.length)&&ot(N)){var E=x&&x.length,T=N({xAxis:m?Vr(Vr({},m),{},{ticks:E?x:m.ticks}):void 0,width:l,height:c,offset:d},E?!0:v);Ea(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(nl(T),"]")),Array.isArray(T)&&(C=T)}return D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(gye,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),D.createElement(xye,Ao({},u,{offset:d,horizontalPoints:S,xAxis:m,yAxis:j})),D.createElement(vye,Ao({},u,{offset:d,verticalPoints:C,xAxis:m,yAxis:j})),D.createElement(yye,Ao({},u,{horizontalPoints:S})),D.createElement(bye,Ao({},u,{verticalPoints:C})))}cw.displayName="CartesianGrid";var Nye=["type","layout","connectNulls","ref"],Sye=["key"];function od(e){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(e)}function aT(e,t){if(e==null)return{};var r=kye(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function kye(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},qu.apply(this,arguments)}function sT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(r),!0).forEach(function(i){bi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function kl(e){return Pye(e)||Eye(e)||Aye(e)||Cye()}function Cye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aye(e,t){if(e){if(typeof e=="string")return dw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dw(e,t)}}function Eye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pye(e){if(Array.isArray(e))return dw(e)}function dw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Tye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oT(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,LD(i.key),i)}}function Oye(e,t,r){return t&&oT(e.prototype,t),r&&oT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ye(e,t,r){return t=Gg(t),Iye(e,DD()?Reflect.construct(t,r||[],Gg(e).constructor):t.apply(e,r))}function Iye(e,t){if(t&&(od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rye(e)}function Rye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DD=function(){return!!e})()}function Gg(e){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gg(e)}function Mye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uw(e,t)}function uw(e,t){return uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},uw(e,t)}function bi(e,t,r){return t=LD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LD(e){var t=$ye(e,"string");return od(t)=="symbol"?t:t+""}function $ye(e,t){if(od(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(od(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zh=function(e){function t(){var r;Tye(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=_ye(this,t,[].concat(a)),bi(r,"state",{isAnimationFinished:!0,totalLength:0}),bi(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),bi(r,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(x,m){return x+m});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),f=o%d,h=l-o,p=[],y=0,v=0;y<c.length;v+=c[y],++y)if(v+c[y]>f){p=[].concat(kl(c.slice(0,y)),[f-v]);break}var b=p.length%2===0?[0,h]:[h];return[].concat(kl(t.repeat(c,u)),kl(p),b).map(function(x){return"".concat(x,"px")}).join(", ")}),bi(r,"id",Rh("recharts-line-")),bi(r,"pathRef",function(o){r.mainCurve=o}),bi(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),bi(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Mye(t,e),Oye(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,d=s.layout,u=s.children,f=ti(u,Bh);if(!f)return null;var h=function(v,b){return{x:v.x,y:v.y,value:v.value,errorVal:Ln(v.payload,b)}},p={clipPath:i?"url(#clipPath-".concat(a,")"):null};return D.createElement(ar,p,f.map(function(y){return D.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(i,a,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,f=pt(this.props,!1),h=pt(c,!0),p=d.map(function(v,b){var x=Nn(Nn(Nn({key:"dot-".concat(b),r:3},f),h),{},{index:b,cx:v.x,cy:v.y,value:v.value,dataKey:u,payload:v.payload,points:d});return t.renderDotItem(c,x)}),y={clipPath:i?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return D.createElement(ar,qu({className:"recharts-line-dots",key:"dots"},y),p)}},{key:"renderCurveStatically",value:function(i,a,s,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var f=aT(l,Nye),h=Nn(Nn(Nn({},pt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(s,")"):null,points:i},o),{},{type:c,layout:d,connectNulls:u});return D.createElement(zj,qu({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,a){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,f=o.animationDuration,h=o.animationEasing,p=o.animationId,y=o.animateNewValues,v=o.width,b=o.height,x=this.state,m=x.prevPoints,j=x.totalLength;return D.createElement(Wa,{begin:u,duration:f,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var w=N.t;if(m){var S=m.length/l.length,C=l.map(function(P,_){var R=Math.floor(_*S);if(m[R]){var O=m[R],$=Ni(O.x,P.x),M=Ni(O.y,P.y);return Nn(Nn({},P),{},{x:$(w),y:M(w)})}if(y){var I=Ni(v*2,P.x),L=Ni(b/2,P.y);return Nn(Nn({},P),{},{x:I(w),y:L(w)})}return Nn(Nn({},P),{},{x:P.x,y:P.y})});return s.renderCurveStatically(C,i,a)}var k=Ni(0,j),A=k(w),E;if(c){var T="".concat(c).split(/[,\s]+/gim).map(function(P){return parseFloat(P)});E=s.getStrokeDasharray(A,j,T)}else E=s.generateSimpleStrokeDasharray(j,A);return s.renderCurveStatically(l,i,a,{strokeDasharray:E})})}},{key:"renderCurve",value:function(i,a){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!kv(d,o))?this.renderCurveWithAnimation(i,a):this.renderCurveStatically(o,i,a)}},{key:"render",value:function(){var i,a=this.props,s=a.hide,o=a.dot,l=a.points,c=a.className,d=a.xAxis,u=a.yAxis,f=a.top,h=a.left,p=a.width,y=a.height,v=a.isAnimationActive,b=a.id;if(s||!l||!l.length)return null;var x=this.state.isAnimationFinished,m=l.length===1,j=gt("recharts-line",c),N=d&&d.allowDataOverflow,w=u&&u.allowDataOverflow,S=N||w,C=ft(b)?this.id:b,k=(i=pt(o,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},A=k.r,E=A===void 0?3:A,T=k.strokeWidth,P=T===void 0?2:T,_=JQ(o)?o:{},R=_.clipDot,O=R===void 0?!0:R,$=E*2+P;return D.createElement(ar,{className:j},N||w?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(C)},D.createElement("rect",{x:N?h:h-p/2,y:w?f:f-y/2,width:N?p:p*2,height:w?y:y*2})),!O&&D.createElement("clipPath",{id:"clipPath-dots-".concat(C)},D.createElement("rect",{x:h-$/2,y:f-$/2,width:p+$,height:y+$}))):null,!m&&this.renderCurve(S,C),this.renderErrorBar(S,C),(m||o)&&this.renderDots(S,O,C),(!v||x)&&Bs.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:a.curPoints}:i.points!==a.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,a){for(var s=i.length%2!==0?[].concat(kl(i),[0]):i,o=[],l=0;l<a;++l)o=[].concat(kl(o),kl(s));return o}},{key:"renderDotItem",value:function(i,a){var s;if(D.isValidElement(i))s=D.cloneElement(i,a);else if(ot(i))s=i(a);else{var o=a.key,l=aT(a,Sye),c=gt("recharts-line-dot",typeof i!="boolean"?i.className:"");s=D.createElement(fS,qu({key:o},l,{className:c}))}return s}}])}(g.PureComponent);bi(zh,"displayName","Line");bi(zh,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Pa.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});bi(zh,"getComposedData",function(e){var t=e.props,r=e.xAxis,i=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,f=c.map(function(h,p){var y=Ln(h,o);return u==="horizontal"?{x:zE({axis:r,ticks:a,bandSize:l,entry:h,index:p}),y:ft(y)?null:i.scale(y),value:y,payload:h}:{x:ft(y)?null:r.scale(y),y:zE({axis:i,ticks:s,bandSize:l,entry:h,index:p}),value:y,payload:h}});return Nn({points:f,layout:u},d)});function ld(e){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ld(e)}function Fye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dye(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,qD(i.key),i)}}function Lye(e,t,r){return t&&Dye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bye(e,t,r){return t=Yg(t),zye(e,BD()?Reflect.construct(t,r||[],Yg(e).constructor):t.apply(e,r))}function zye(e,t){if(t&&(ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qye(e)}function qye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BD=function(){return!!e})()}function Yg(e){return Yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yg(e)}function Uye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fw(e,t)}function fw(e,t){return fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},fw(e,t)}function zD(e,t,r){return t=qD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qD(e){var t=Vye(e,"string");return ld(t)=="symbol"?t:t+""}function Vye(e,t){if(ld(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(ld(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hw(){return hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},hw.apply(this,arguments)}function Wye(e){var t=e.xAxisId,r=gS(),i=xS(),a=CD(t);return a==null?null:D.createElement(zd,hw({},a,{className:gt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return wa(o,!0)}}))}var cd=function(e){function t(){return Fye(this,t),Bye(this,t,arguments)}return Uye(t,e),Lye(t,[{key:"render",value:function(){return D.createElement(Wye,this.props)}}])}(D.Component);zD(cd,"displayName","XAxis");zD(cd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function dd(e){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dd(e)}function Hye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kye(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,WD(i.key),i)}}function Gye(e,t,r){return t&&Kye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yye(e,t,r){return t=Qg(t),Qye(e,UD()?Reflect.construct(t,r||[],Qg(e).constructor):t.apply(e,r))}function Qye(e,t){if(t&&(dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jye(e)}function Jye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UD=function(){return!!e})()}function Qg(e){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qg(e)}function Xye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mw(e,t)}function mw(e,t){return mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},mw(e,t)}function VD(e,t,r){return t=WD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WD(e){var t=Zye(e,"string");return dd(t)=="symbol"?t:t+""}function Zye(e,t){if(dd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(dd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},pw.apply(this,arguments)}var ebe=function(t){var r=t.yAxisId,i=gS(),a=xS(),s=AD(r);return s==null?null:D.createElement(zd,pw({},s,{className:gt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:i,height:a},ticksGenerator:function(l){return wa(l,!0)}}))},ud=function(e){function t(){return Hye(this,t),Yye(this,t,arguments)}return Xye(t,e),Gye(t,[{key:"render",value:function(){return D.createElement(ebe,this.props)}}])}(D.Component);VD(ud,"displayName","YAxis");VD(ud,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function lT(e){return ibe(e)||nbe(e)||rbe(e)||tbe()}function tbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rbe(e,t){if(e){if(typeof e=="string")return gw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gw(e,t)}}function nbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ibe(e){if(Array.isArray(e))return gw(e)}function gw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var xw=function(t,r,i,a,s){var o=ti(t,yS),l=ti(t,_v),c=[].concat(lT(o),lT(l)),d=ti(t,Rv),u="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(v,b){if(b.props[u]===i&&ta(b.props,"extendDomain")&&ke(b.props[f])){var x=b.props[f];return[Math.min(v[0],x),Math.max(v[1],x)]}return v},h)),d.length){var p="".concat(f,"1"),y="".concat(f,"2");h=d.reduce(function(v,b){if(b.props[u]===i&&ta(b.props,"extendDomain")&&ke(b.props[p])&&ke(b.props[y])){var x=b.props[p],m=b.props[y];return[Math.min(v[0],x,m),Math.max(v[1],x,m)]}return v},h)}return s&&s.length&&(h=s.reduce(function(v,b){return ke(b)?[Math.min(v[0],b),Math.max(v[1],b)]:v},h)),h},HD={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function s(c,d,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new a(u,f||c,h),y=r?r+d:d;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new i:delete c._events[d]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,y=new Array(p);h<p;h++)y[h]=f[h].fn;return y},l.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,h,p,y){var v=r?r+d:d;if(!this._events[v])return!1;var b=this._events[v],x=arguments.length,m,j;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,h),!0;case 5:return b.fn.call(b.context,u,f,h,p),!0;case 6:return b.fn.call(b.context,u,f,h,p,y),!0}for(j=1,m=new Array(x-1);j<x;j++)m[j-1]=arguments[j];b.fn.apply(b.context,m)}else{var N=b.length,w;for(j=0;j<N;j++)switch(b[j].once&&this.removeListener(d,b[j].fn,void 0,!0),x){case 1:b[j].fn.call(b[j].context);break;case 2:b[j].fn.call(b[j].context,u);break;case 3:b[j].fn.call(b[j].context,u,f);break;case 4:b[j].fn.call(b[j].context,u,f,h);break;default:if(!m)for(w=1,m=new Array(x-1);w<x;w++)m[w-1]=arguments[w];b[j].fn.apply(b[j].context,m)}}return!0},l.prototype.on=function(d,u,f){return s(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return s(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,h){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===u&&(!h||y.once)&&(!f||y.context===f)&&o(this,p);else{for(var v=0,b=[],x=y.length;v<x;v++)(y[v].fn!==u||h&&!y[v].once||f&&y[v].context!==f)&&b.push(y[v]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(HD);var abe=HD.exports;const sbe=It(abe);var cb=new sbe,db="recharts.syncMouseEvents";function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(e)}function obe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lbe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,KD(i.key),i)}}function cbe(e,t,r){return t&&lbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ub(e,t,r){return t=KD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KD(e){var t=dbe(e,"string");return eh(t)=="symbol"?t:t+""}function dbe(e,t){if(eh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(eh(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ube=function(){function e(){obe(this,e),ub(this,"activeIndex",0),ub(this,"coordinateList",[]),ub(this,"layout","horizontal")}return cbe(e,[{key:"setDetails",value:function(r){var i,a=r.coordinateList,s=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,f=u===void 0?null:u,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(i=s??this.coordinateList)!==null&&i!==void 0?i:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,i;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((i=window)===null||i===void 0?void 0:i.scrollY)||0,f=s+c+d,h=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function fbe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var i=e==null?void 0:e[0],a=e==null?void 0:e[1];if(i&&a&&ke(i)&&ke(a))return!0}return!1}function hbe(e,t,r,i){var a=i/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?i:r.width-1,height:e==="horizontal"?r.height-1:i}}function GD(e){var t=e.cx,r=e.cy,i=e.radius,a=e.startAngle,s=e.endAngle,o=Ir(t,r,i,a),l=Ir(t,r,i,s);return{points:[o,l],cx:t,cy:r,radius:i,startAngle:a,endAngle:s}}function mbe(e,t,r){var i,a,s,o;if(e==="horizontal")i=t.x,s=i,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,i=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,f=t.angle,h=Ir(l,c,d,f),p=Ir(l,c,u,f);i=h.x,a=h.y,s=p.x,o=p.y}else return GD(t);return[{x:i,y:a},{x:s,y:o}]}function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(e)}function cT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function Tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(r),!0).forEach(function(i){pbe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function pbe(e,t,r){return t=gbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gbe(e){var t=xbe(e,"string");return th(t)=="symbol"?t:t+""}function xbe(e,t){if(th(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(th(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vbe(e){var t,r,i=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,p=(t=i.props.cursor)!==null&&t!==void 0?t:(r=i.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!i||!p||!s||!o||h!=="ScatterChart"&&a!=="axis")return null;var y,v=zj;if(h==="ScatterChart")y=o,v=vpe;else if(h==="BarChart")y=hbe(f,o,c,u),v=uS;else if(f==="radial"){var b=GD(o),x=b.cx,m=b.cy,j=b.radius,N=b.startAngle,w=b.endAngle;y={cx:x,cy:m,startAngle:N,endAngle:w,innerRadius:j,outerRadius:j},v=JF}else y={points:mbe(f,o,c)},v=zj;var S=Tm(Tm(Tm(Tm({stroke:"#ccc",pointerEvents:"none"},c),y),pt(p,!1)),{},{payload:l,payloadIndex:d,className:gt("recharts-tooltip-cursor",p.className)});return g.isValidElement(p)?g.cloneElement(p,S):g.createElement(v,S)}var ybe=["item"],bbe=["children","className","width","height","style","compact","title","desc"];function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Wl.apply(this,arguments)}function dT(e,t){return Nbe(e)||wbe(e,t)||QD(e,t)||jbe()}function jbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Nbe(e){if(Array.isArray(e))return e}function uT(e,t){if(e==null)return{};var r=Sbe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Sbe(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function kbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cbe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,JD(i.key),i)}}function Abe(e,t,r){return t&&Cbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ebe(e,t,r){return t=Jg(t),Pbe(e,YD()?Reflect.construct(t,r||[],Jg(e).constructor):t.apply(e,r))}function Pbe(e,t){if(t&&(fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tbe(e)}function Tbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YD=function(){return!!e})()}function Jg(e){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jg(e)}function Obe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vw(e,t)}function vw(e,t){return vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},vw(e,t)}function hd(e){return Rbe(e)||Ibe(e)||QD(e)||_be()}function _be(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QD(e,t){if(e){if(typeof e=="string")return yw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yw(e,t)}}function Ibe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rbe(e){if(Array.isArray(e))return yw(e)}function yw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function fT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(r),!0).forEach(function(i){Ge(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Ge(e,t,r){return t=JD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JD(e){var t=Mbe(e,"string");return fd(t)=="symbol"?t:t+""}function Mbe(e,t){if(fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(fd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $be={xAxis:["bottom","top"],yAxis:["left","right"]},Fbe={width:"100%",height:"100%"},XD={x:0,y:0};function Om(e){return e}var Dbe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Lbe=function(t,r,i,a){var s=r.find(function(u){return u&&u.index===i});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return le(le(le({},a),Ir(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,d=a.angle;return le(le(le({},a),Ir(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return XD},Mv=function(t,r){var i=r.graphicalItems,a=r.dataStartIndex,s=r.dataEndIndex,o=(i??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(hd(l),hd(d)):l},[]);return o.length>0?o:t&&t.length&&ke(a)&&ke(s)?t.slice(a,s+1):[]};function ZD(e){return e==="number"?[0,"auto"]:void 0}var bw=function(t,r,i,a){var s=t.graphicalItems,o=t.tooltipAxis,l=Mv(r,t);return i<0||!s||!s.length||i>=l.length?null:s.reduce(function(c,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=i&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;h=Zp(p,o.dataKey,a)}else h=f&&f[i]||l[i];return h?[].concat(hd(c),[GF(d,h)]):c},[])},hT=function(t,r,i,a){var s=a||{x:t.chartX,y:t.chartY},o=Dbe(s,i),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=efe(o,l,d,c);if(u>=0&&d){var f=d[u]&&d[u].value,h=bw(t,r,u,f),p=Lbe(i,l,u,s);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},Bbe=function(t,r){var i=r.axes,a=r.graphicalItems,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,h=t.stackOffset,p=WF(u,s);return i.reduce(function(y,v){var b,x=v.type.defaultProps!==void 0?le(le({},v.type.defaultProps),v.props):v.props,m=x.type,j=x.dataKey,N=x.allowDataOverflow,w=x.allowDuplicatedCategory,S=x.scale,C=x.ticks,k=x.includeHidden,A=x[o];if(y[A])return y;var E=Mv(t.data,{graphicalItems:a.filter(function(U){var ee,de=o in U.props?U.props[o]:(ee=U.type.defaultProps)===null||ee===void 0?void 0:ee[o];return de===A}),dataStartIndex:c,dataEndIndex:d}),T=E.length,P,_,R;fbe(x.domain,N,m)&&(P=$j(x.domain,null,N),p&&(m==="number"||S!=="auto")&&(R=Bu(E,j,"category")));var O=ZD(m);if(!P||P.length===0){var $,M=($=x.domain)!==null&&$!==void 0?$:O;if(j){if(P=Bu(E,j,m),m==="category"&&p){var I=qQ(P);w&&I?(_=P,P=Dg(0,T)):w||(P=WE(M,P,v).reduce(function(U,ee){return U.indexOf(ee)>=0?U:[].concat(hd(U),[ee])},[]))}else if(m==="category")w?P=P.filter(function(U){return U!==""&&!ft(U)}):P=WE(M,P,v).reduce(function(U,ee){return U.indexOf(ee)>=0||ee===""||ft(ee)?U:[].concat(hd(U),[ee])},[]);else if(m==="number"){var L=afe(E,a.filter(function(U){var ee,de,oe=o in U.props?U.props[o]:(ee=U.type.defaultProps)===null||ee===void 0?void 0:ee[o],Pe="hide"in U.props?U.props.hide:(de=U.type.defaultProps)===null||de===void 0?void 0:de.hide;return oe===A&&(k||!Pe)}),j,s,u);L&&(P=L)}p&&(m==="number"||S!=="auto")&&(R=Bu(E,j,"category"))}else p?P=Dg(0,T):l&&l[A]&&l[A].hasStack&&m==="number"?P=h==="expand"?[0,1]:KF(l[A].stackGroups,c,d):P=VF(E,a.filter(function(U){var ee=o in U.props?U.props[o]:U.type.defaultProps[o],de="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return ee===A&&(k||!de)}),m,u,!0);if(m==="number")P=xw(f,P,A,s,C),M&&(P=$j(M,P,N));else if(m==="category"&&M){var z=M,ie=P.every(function(U){return z.indexOf(U)>=0});ie&&(P=z)}}return le(le({},y),{},Ge({},A,le(le({},x),{},{axisType:s,domain:P,categoricalDomain:R,duplicateDomain:_,originalDomain:(b=x.domain)!==null&&b!==void 0?b:O,isCategorical:p,layout:u})))},{})},zbe=function(t,r){var i=r.graphicalItems,a=r.Axis,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,h=Mv(t.data,{graphicalItems:i,dataStartIndex:c,dataEndIndex:d}),p=h.length,y=WF(u,s),v=-1;return i.reduce(function(b,x){var m=x.type.defaultProps!==void 0?le(le({},x.type.defaultProps),x.props):x.props,j=m[o],N=ZD("number");if(!b[j]){v++;var w;return y?w=Dg(0,p):l&&l[j]&&l[j].hasStack?(w=KF(l[j].stackGroups,c,d),w=xw(f,w,j,s)):(w=$j(N,VF(h,i.filter(function(S){var C,k,A=o in S.props?S.props[o]:(C=S.type.defaultProps)===null||C===void 0?void 0:C[o],E="hide"in S.props?S.props.hide:(k=S.type.defaultProps)===null||k===void 0?void 0:k.hide;return A===j&&!E}),"number",u),a.defaultProps.allowDataOverflow),w=xw(f,w,j,s)),le(le({},b),{},Ge({},j,le(le({axisType:s},a.defaultProps),{},{hide:!0,orientation:ei($be,"".concat(s,".").concat(v%2),null),domain:w,originalDomain:N,isCategorical:y,layout:u})))}return b},{})},qbe=function(t,r){var i=r.axisType,a=i===void 0?"xAxis":i,s=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.children,f="".concat(a,"Id"),h=ti(u,s),p={};return h&&h.length?p=Bbe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(p=zbe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),p},Ube=function(t){var r=fs(t),i=wa(r,!1,!0);return{tooltipTicks:i,orderedTooltipTicks:FN(i,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Pg(r,i)}},mT=function(t){var r=t.children,i=t.defaultShowTooltip,a=An(r,td),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!i}},Vbe=function(t){return!t||!t.length?!1:t.some(function(r){var i=Aa(r&&r.type);return i&&i.indexOf("Bar")>=0})},pT=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Wbe=function(t,r){var i=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,d=i.width,u=i.height,f=i.children,h=i.margin||{},p=An(f,td),y=An(f,oc),v=Object.keys(c).reduce(function(w,S){var C=c[S],k=C.orientation;return!C.mirror&&!C.hide?le(le({},w),{},Ge({},k,w[k]+C.width)):w},{left:h.left||0,right:h.right||0}),b=Object.keys(o).reduce(function(w,S){var C=o[S],k=C.orientation;return!C.mirror&&!C.hide?le(le({},w),{},Ge({},k,ei(w,"".concat(k))+C.height)):w},{top:h.top||0,bottom:h.bottom||0}),x=le(le({},b),v),m=x.bottom;p&&(x.bottom+=p.props.height||td.defaultProps.height),y&&r&&(x=nfe(x,a,i,r));var j=d-x.left-x.right,N=u-x.top-x.bottom;return le(le({brushBottom:m},x),{},{width:Math.max(j,0),height:Math.max(N,0)})},Hbe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},e3=function(t){var r=t.chartName,i=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,h=function(x,m){var j=m.graphicalItems,N=m.stackGroups,w=m.offset,S=m.updateId,C=m.dataStartIndex,k=m.dataEndIndex,A=x.barSize,E=x.layout,T=x.barGap,P=x.barCategoryGap,_=x.maxBarSize,R=pT(E),O=R.numericAxisName,$=R.cateAxisName,M=Vbe(j),I=[];return j.forEach(function(L,z){var ie=Mv(x.data,{graphicalItems:[L],dataStartIndex:C,dataEndIndex:k}),U=L.type.defaultProps!==void 0?le(le({},L.type.defaultProps),L.props):L.props,ee=U.dataKey,de=U.maxBarSize,oe=U["".concat(O,"Id")],Pe=U["".concat($,"Id")],ve={},ye=c.reduce(function(ut,F){var re=m["".concat(F.axisType,"Map")],se=U["".concat(F.axisType,"Id")];re&&re[se]||F.axisType==="zAxis"||rl();var xe=re[se];return le(le({},ut),{},Ge(Ge({},F.axisType,xe),"".concat(F.axisType,"Ticks"),wa(xe)))},ve),ne=ye[$],H=ye["".concat($,"Ticks")],B=N&&N[oe]&&N[oe].hasStack&&xfe(L,N[oe].stackGroups),J=Aa(L.type).indexOf("Bar")>=0,ze=Pg(ne,H),ue=[],Ae=M&&tfe({barSize:A,stackGroups:N,totalSize:Hbe(ye,$)});if(J){var Ke,nt,jt=ft(de)?_:de,te=(Ke=(nt=Pg(ne,H,!0))!==null&&nt!==void 0?nt:jt)!==null&&Ke!==void 0?Ke:0;ue=rfe({barGap:T,barCategoryGap:P,bandSize:te!==ze?te:ze,sizeList:Ae[Pe],maxBarSize:jt}),te!==ze&&(ue=ue.map(function(ut){return le(le({},ut),{},{position:le(le({},ut.position),{},{offset:ut.position.offset-te/2})})}))}var We=L&&L.type&&L.type.getComposedData;We&&I.push({props:le(le({},We(le(le({},ye),{},{displayedData:ie,props:x,dataKey:ee,item:L,bandSize:ze,barPosition:ue,offset:w,stackedData:B,layout:E,dataStartIndex:C,dataEndIndex:k}))),{},Ge(Ge(Ge({key:L.key||"item-".concat(z)},O,ye[O]),$,ye[$]),"animationId",S)),childIndex:eJ(L,x.children),item:L})}),I},p=function(x,m){var j=x.props,N=x.dataStartIndex,w=x.dataEndIndex,S=x.updateId;if(!FC({props:j}))return null;var C=j.children,k=j.layout,A=j.stackOffset,E=j.data,T=j.reverseStackOrder,P=pT(k),_=P.numericAxisName,R=P.cateAxisName,O=ti(C,i),$=mfe(E,O,"".concat(_,"Id"),"".concat(R,"Id"),A,T),M=c.reduce(function(U,ee){var de="".concat(ee.axisType,"Map");return le(le({},U),{},Ge({},de,qbe(j,le(le({},ee),{},{graphicalItems:O,stackGroups:ee.axisType===_&&$,dataStartIndex:N,dataEndIndex:w}))))},{}),I=Wbe(le(le({},M),{},{props:j,graphicalItems:O}),m==null?void 0:m.legendBBox);Object.keys(M).forEach(function(U){M[U]=u(j,M[U],I,U.replace("Map",""),r)});var L=M["".concat(R,"Map")],z=Ube(L),ie=h(j,le(le({},M),{},{dataStartIndex:N,dataEndIndex:w,updateId:S,graphicalItems:O,stackGroups:$,offset:I}));return le(le({formattedGraphicalItems:ie,graphicalItems:O,offset:I,stackGroups:$},z),M)},y=function(b){function x(m){var j,N,w;return kbe(this,x),w=Ebe(this,x,[m]),Ge(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ge(w,"accessibilityManager",new ube),Ge(w,"handleLegendBBoxUpdate",function(S){if(S){var C=w.state,k=C.dataStartIndex,A=C.dataEndIndex,E=C.updateId;w.setState(le({legendBBox:S},p({props:w.props,dataStartIndex:k,dataEndIndex:A,updateId:E},le(le({},w.state),{},{legendBBox:S}))))}}),Ge(w,"handleReceiveSyncEvent",function(S,C,k){if(w.props.syncId===S){if(k===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(C)}}),Ge(w,"handleBrushChange",function(S){var C=S.startIndex,k=S.endIndex;if(C!==w.state.dataStartIndex||k!==w.state.dataEndIndex){var A=w.state.updateId;w.setState(function(){return le({dataStartIndex:C,dataEndIndex:k},p({props:w.props,dataStartIndex:C,dataEndIndex:k,updateId:A},w.state))}),w.triggerSyncEvent({dataStartIndex:C,dataEndIndex:k})}}),Ge(w,"handleMouseEnter",function(S){var C=w.getMouseInfo(S);if(C){var k=le(le({},C),{},{isTooltipActive:!0});w.setState(k),w.triggerSyncEvent(k);var A=w.props.onMouseEnter;ot(A)&&A(k,S)}}),Ge(w,"triggeredAfterMouseMove",function(S){var C=w.getMouseInfo(S),k=C?le(le({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(k),w.triggerSyncEvent(k);var A=w.props.onMouseMove;ot(A)&&A(k,S)}),Ge(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Ge(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Ge(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),Ge(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var k=w.props.onMouseLeave;ot(k)&&k(C,S)}),Ge(w,"handleOuterEvent",function(S){var C=ZQ(S),k=ei(w.props,"".concat(C));if(C&&ot(k)){var A,E;/.*touch.*/i.test(C)?E=w.getMouseInfo(S.changedTouches[0]):E=w.getMouseInfo(S),k((A=E)!==null&&A!==void 0?A:{},S)}}),Ge(w,"handleClick",function(S){var C=w.getMouseInfo(S);if(C){var k=le(le({},C),{},{isTooltipActive:!0});w.setState(k),w.triggerSyncEvent(k);var A=w.props.onClick;ot(A)&&A(k,S)}}),Ge(w,"handleMouseDown",function(S){var C=w.props.onMouseDown;if(ot(C)){var k=w.getMouseInfo(S);C(k,S)}}),Ge(w,"handleMouseUp",function(S){var C=w.props.onMouseUp;if(ot(C)){var k=w.getMouseInfo(S);C(k,S)}}),Ge(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Ge(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),Ge(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),Ge(w,"handleDoubleClick",function(S){var C=w.props.onDoubleClick;if(ot(C)){var k=w.getMouseInfo(S);C(k,S)}}),Ge(w,"handleContextMenu",function(S){var C=w.props.onContextMenu;if(ot(C)){var k=w.getMouseInfo(S);C(k,S)}}),Ge(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&cb.emit(db,w.props.syncId,S,w.eventEmitterSymbol)}),Ge(w,"applySyncEvent",function(S){var C=w.props,k=C.layout,A=C.syncMethod,E=w.state.updateId,T=S.dataStartIndex,P=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(le({dataStartIndex:T,dataEndIndex:P},p({props:w.props,dataStartIndex:T,dataEndIndex:P,updateId:E},w.state)));else if(S.activeTooltipIndex!==void 0){var _=S.chartX,R=S.chartY,O=S.activeTooltipIndex,$=w.state,M=$.offset,I=$.tooltipTicks;if(!M)return;if(typeof A=="function")O=A(I,S);else if(A==="value"){O=-1;for(var L=0;L<I.length;L++)if(I[L].value===S.activeLabel){O=L;break}}var z=le(le({},M),{},{x:M.left,y:M.top}),ie=Math.min(_,z.x+z.width),U=Math.min(R,z.y+z.height),ee=I[O]&&I[O].value,de=bw(w.state,w.props.data,O),oe=I[O]?{x:k==="horizontal"?I[O].coordinate:ie,y:k==="horizontal"?U:I[O].coordinate}:XD;w.setState(le(le({},S),{},{activeLabel:ee,activeCoordinate:oe,activePayload:de,activeTooltipIndex:O}))}else w.setState(S)}),Ge(w,"renderCursor",function(S){var C,k=w.state,A=k.isTooltipActive,E=k.activeCoordinate,T=k.activePayload,P=k.offset,_=k.activeTooltipIndex,R=k.tooltipAxisBandSize,O=w.getTooltipEventType(),$=(C=S.props.active)!==null&&C!==void 0?C:A,M=w.props.layout,I=S.key||"_recharts-cursor";return D.createElement(vbe,{key:I,activeCoordinate:E,activePayload:T,activeTooltipIndex:_,chartName:r,element:S,isActive:$,layout:M,offset:P,tooltipAxisBandSize:R,tooltipEventType:O})}),Ge(w,"renderPolarAxis",function(S,C,k){var A=ei(S,"type.axisType"),E=ei(w.state,"".concat(A,"Map")),T=S.type.defaultProps,P=T!==void 0?le(le({},T),S.props):S.props,_=E&&E[P["".concat(A,"Id")]];return g.cloneElement(S,le(le({},_),{},{className:gt(A,_.className),key:S.key||"".concat(C,"-").concat(k),ticks:wa(_,!0)}))}),Ge(w,"renderPolarGrid",function(S){var C=S.props,k=C.radialLines,A=C.polarAngles,E=C.polarRadius,T=w.state,P=T.radiusAxisMap,_=T.angleAxisMap,R=fs(P),O=fs(_),$=O.cx,M=O.cy,I=O.innerRadius,L=O.outerRadius;return g.cloneElement(S,{polarAngles:Array.isArray(A)?A:wa(O,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(E)?E:wa(R,!0).map(function(z){return z.coordinate}),cx:$,cy:M,innerRadius:I,outerRadius:L,key:S.key||"polar-grid",radialLines:k})}),Ge(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,C=w.props,k=C.children,A=C.width,E=C.height,T=w.props.margin||{},P=A-(T.left||0)-(T.right||0),_=qF({children:k,formattedGraphicalItems:S,legendWidth:P,legendContent:d});if(!_)return null;var R=_.item,O=uT(_,ybe);return g.cloneElement(R,le(le({},O),{},{chartWidth:A,chartHeight:E,margin:T,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Ge(w,"renderTooltip",function(){var S,C=w.props,k=C.children,A=C.accessibilityLayer,E=An(k,vi);if(!E)return null;var T=w.state,P=T.isTooltipActive,_=T.activeCoordinate,R=T.activePayload,O=T.activeLabel,$=T.offset,M=(S=E.props.active)!==null&&S!==void 0?S:P;return g.cloneElement(E,{viewBox:le(le({},$),{},{x:$.left,y:$.top}),active:M,label:O,payload:M?R:[],coordinate:_,accessibilityLayer:A})}),Ge(w,"renderBrush",function(S){var C=w.props,k=C.margin,A=C.data,E=w.state,T=E.offset,P=E.dataStartIndex,_=E.dataEndIndex,R=E.updateId;return g.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Cm(w.handleBrushChange,S.props.onChange),data:A,x:ke(S.props.x)?S.props.x:T.left,y:ke(S.props.y)?S.props.y:T.top+T.height+T.brushBottom-(k.bottom||0),width:ke(S.props.width)?S.props.width:T.width,startIndex:P,endIndex:_,updateId:"brush-".concat(R)})}),Ge(w,"renderReferenceElement",function(S,C,k){if(!S)return null;var A=w,E=A.clipPathId,T=w.state,P=T.xAxisMap,_=T.yAxisMap,R=T.offset,O=S.type.defaultProps||{},$=S.props,M=$.xAxisId,I=M===void 0?O.xAxisId:M,L=$.yAxisId,z=L===void 0?O.yAxisId:L;return g.cloneElement(S,{key:S.key||"".concat(C,"-").concat(k),xAxis:P[I],yAxis:_[z],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:E})}),Ge(w,"renderActivePoints",function(S){var C=S.item,k=S.activePoint,A=S.basePoint,E=S.childIndex,T=S.isRange,P=[],_=C.props.key,R=C.item.type.defaultProps!==void 0?le(le({},C.item.type.defaultProps),C.item.props):C.item.props,O=R.activeDot,$=R.dataKey,M=le(le({index:E,dataKey:$,cx:k.x,cy:k.y,r:4,fill:dS(C.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},pt(O,!1)),eg(O));return P.push(x.renderActiveDot(O,M,"".concat(_,"-activePoint-").concat(E))),A?P.push(x.renderActiveDot(O,le(le({},M),{},{cx:A.x,cy:A.y}),"".concat(_,"-basePoint-").concat(E))):T&&P.push(null),P}),Ge(w,"renderGraphicChild",function(S,C,k){var A=w.filterFormatItem(S,C,k);if(!A)return null;var E=w.getTooltipEventType(),T=w.state,P=T.isTooltipActive,_=T.tooltipAxis,R=T.activeTooltipIndex,O=T.activeLabel,$=w.props.children,M=An($,vi),I=A.props,L=I.points,z=I.isRange,ie=I.baseLine,U=A.item.type.defaultProps!==void 0?le(le({},A.item.type.defaultProps),A.item.props):A.item.props,ee=U.activeDot,de=U.hide,oe=U.activeBar,Pe=U.activeShape,ve=!!(!de&&P&&M&&(ee||oe||Pe)),ye={};E!=="axis"&&M&&M.props.trigger==="click"?ye={onClick:Cm(w.handleItemMouseEnter,S.props.onClick)}:E!=="axis"&&(ye={onMouseLeave:Cm(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Cm(w.handleItemMouseEnter,S.props.onMouseEnter)});var ne=g.cloneElement(S,le(le({},A.props),ye));function H(F){return typeof _.dataKey=="function"?_.dataKey(F.payload):null}if(ve)if(R>=0){var B,J;if(_.dataKey&&!_.allowDuplicatedCategory){var ze=typeof _.dataKey=="function"?H:"payload.".concat(_.dataKey.toString());B=Zp(L,ze,O),J=z&&ie&&Zp(ie,ze,O)}else B=L==null?void 0:L[R],J=z&&ie&&ie[R];if(Pe||oe){var ue=S.props.activeIndex!==void 0?S.props.activeIndex:R;return[g.cloneElement(S,le(le(le({},A.props),ye),{},{activeIndex:ue})),null,null]}if(!ft(B))return[ne].concat(hd(w.renderActivePoints({item:A,activePoint:B,basePoint:J,childIndex:R,isRange:z})))}else{var Ae,Ke=(Ae=w.getItemByXY(w.state.activeCoordinate))!==null&&Ae!==void 0?Ae:{graphicalItem:ne},nt=Ke.graphicalItem,jt=nt.item,te=jt===void 0?S:jt,We=nt.childIndex,ut=le(le(le({},A.props),ye),{},{activeIndex:We});return[g.cloneElement(te,ut),null,null]}return z?[ne,null,null]:[ne,null]}),Ge(w,"renderCustomized",function(S,C,k){return g.cloneElement(S,le(le({key:"recharts-customized-".concat(k)},w.props),w.state))}),Ge(w,"renderMap",{CartesianGrid:{handler:Om,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Om},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Om},YAxis:{handler:Om},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((j=m.id)!==null&&j!==void 0?j:Rh("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=q$(w.triggeredAfterMouseMove,(N=m.throttleDelay)!==null&&N!==void 0?N:1e3/60),w.state={},w}return Obe(x,b),Abe(x,[{key:"componentDidMount",value:function(){var j,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,N=j.children,w=j.data,S=j.height,C=j.layout,k=An(N,vi);if(k){var A=k.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,T=bw(this.state,w,A,E),P=this.state.tooltipTicks[A].coordinate,_=(this.state.offset.top+S)/2,R=C==="horizontal",O=R?{x:P,y:_}:{y:P,x:_},$=this.state.formattedGraphicalItems.find(function(I){var L=I.item;return L.type.name==="Scatter"});$&&(O=le(le({},O),$.props.points[A].tooltipPosition),T=$.props.points[A].tooltipPayload);var M={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:E,activePayload:T,activeCoordinate:O};this.setState(M),this.renderCursor(k),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(j){J0([An(j.children,vi)],[An(this.props.children,vi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=An(this.props.children,vi);if(j&&typeof j.props.shared=="boolean"){var N=j.props.shared?"axis":"item";return l.indexOf(N)>=0?N:s}return s}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var N=this.container,w=N.getBoundingClientRect(),S=Coe(w),C={chartX:Math.round(j.pageX-S.left),chartY:Math.round(j.pageY-S.top)},k=w.width/N.offsetWidth||1,A=this.inRange(C.chartX,C.chartY,k);if(!A)return null;var E=this.state,T=E.xAxisMap,P=E.yAxisMap,_=this.getTooltipEventType(),R=hT(this.state,this.props.data,this.props.layout,A);if(_!=="axis"&&T&&P){var O=fs(T).scale,$=fs(P).scale,M=O&&O.invert?O.invert(C.chartX):null,I=$&&$.invert?$.invert(C.chartY):null;return le(le({},C),{},{xValue:M,yValue:I},R)}return R?le(le({},C),R):null}},{key:"inRange",value:function(j,N){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,C=j/w,k=N/w;if(S==="horizontal"||S==="vertical"){var A=this.state.offset,E=C>=A.left&&C<=A.left+A.width&&k>=A.top&&k<=A.top+A.height;return E?{x:C,y:k}:null}var T=this.state,P=T.angleAxisMap,_=T.radiusAxisMap;if(P&&_){var R=fs(P);return GE({x:C,y:k},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,N=this.getTooltipEventType(),w=An(j,vi),S={};w&&N==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=eg(this.props,this.handleOuterEvent);return le(le({},C),S)}},{key:"addListener",value:function(){cb.on(db,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){cb.removeListener(db,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,N,w){for(var S=this.state.formattedGraphicalItems,C=0,k=S.length;C<k;C++){var A=S[C];if(A.item===j||A.props.key===j.key||N===Aa(A.item.type)&&w===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,N=this.state.offset,w=N.left,S=N.top,C=N.height,k=N.width;return D.createElement("defs",null,D.createElement("clipPath",{id:j},D.createElement("rect",{x:w,y:S,height:C,width:k})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(N,w){var S=dT(w,2),C=S[0],k=S[1];return le(le({},N),{},Ge({},C,k.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(N,w){var S=dT(w,2),C=S[0],k=S[1];return le(le({},N),{},Ge({},C,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(j){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(j){var N=this.state,w=N.formattedGraphicalItems,S=N.activeItem;if(w&&w.length)for(var C=0,k=w.length;C<k;C++){var A=w[C],E=A.props,T=A.item,P=T.type.defaultProps!==void 0?le(le({},T.type.defaultProps),T.props):T.props,_=Aa(T.type);if(_==="Bar"){var R=(E.data||[]).find(function(I){return lpe(j,I)});if(R)return{graphicalItem:A,payload:R}}else if(_==="RadialBar"){var O=(E.data||[]).find(function(I){return GE(j,I)});if(O)return{graphicalItem:A,payload:O}}else if(Ev(A,S)||Pv(A,S)||Yf(A,S)){var $=uge({graphicalItem:A,activeTooltipItem:S,itemData:P.data}),M=P.activeIndex===void 0?$:P.activeIndex;return{graphicalItem:le(le({},A),{},{childIndex:M}),payload:Yf(A,S)?P.data[$]:A.props.data[$]}}}return null}},{key:"render",value:function(){var j=this;if(!FC(this))return null;var N=this.props,w=N.children,S=N.className,C=N.width,k=N.height,A=N.style,E=N.compact,T=N.title,P=N.desc,_=uT(N,bbe),R=pt(_,!1);if(E)return D.createElement(HP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement(Z0,Wl({},R,{width:C,height:k,title:T,desc:P}),this.renderClipPath(),LC(w,this.renderMap)));if(this.props.accessibilityLayer){var O,$;R.tabIndex=(O=this.props.tabIndex)!==null&&O!==void 0?O:0,R.role=($=this.props.role)!==null&&$!==void 0?$:"application",R.onKeyDown=function(I){j.accessibilityManager.keyboardEvent(I)},R.onFocus=function(){j.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return D.createElement(HP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement("div",Wl({className:gt("recharts-wrapper",S),style:le({position:"relative",cursor:"default",width:C,height:k},A)},M,{ref:function(L){j.container=L}}),D.createElement(Z0,Wl({},R,{width:C,height:k,title:T,desc:P,style:Fbe}),this.renderClipPath(),LC(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(g.Component);Ge(y,"displayName",r),Ge(y,"defaultProps",le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ge(y,"getDerivedStateFromProps",function(b,x){var m=b.dataKey,j=b.data,N=b.children,w=b.width,S=b.height,C=b.layout,k=b.stackOffset,A=b.margin,E=x.dataStartIndex,T=x.dataEndIndex;if(x.updateId===void 0){var P=mT(b);return le(le(le({},P),{},{updateId:0},p(le(le({props:b},P),{},{updateId:0}),x)),{},{prevDataKey:m,prevData:j,prevWidth:w,prevHeight:S,prevLayout:C,prevStackOffset:k,prevMargin:A,prevChildren:N})}if(m!==x.prevDataKey||j!==x.prevData||w!==x.prevWidth||S!==x.prevHeight||C!==x.prevLayout||k!==x.prevStackOffset||!sc(A,x.prevMargin)){var _=mT(b),R={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},O=le(le({},hT(x,j,C)),{},{updateId:x.updateId+1}),$=le(le(le({},_),R),O);return le(le(le({},$),p(le({props:b},$),x)),{},{prevDataKey:m,prevData:j,prevWidth:w,prevHeight:S,prevLayout:C,prevStackOffset:k,prevMargin:A,prevChildren:N})}if(!J0(N,x.prevChildren)){var M,I,L,z,ie=An(N,td),U=ie&&(M=(I=ie.props)===null||I===void 0?void 0:I.startIndex)!==null&&M!==void 0?M:E,ee=ie&&(L=(z=ie.props)===null||z===void 0?void 0:z.endIndex)!==null&&L!==void 0?L:T,de=U!==E||ee!==T,oe=!ft(j),Pe=oe&&!de?x.updateId:x.updateId+1;return le(le({updateId:Pe},p(le(le({props:b},x),{},{updateId:Pe,dataStartIndex:U,dataEndIndex:ee}),x)),{},{prevChildren:N,dataStartIndex:U,dataEndIndex:ee})}return null}),Ge(y,"renderActiveDot",function(b,x,m){var j;return g.isValidElement(b)?j=g.cloneElement(b,x):ot(b)?j=b(x):j=D.createElement(fS,x),D.createElement(ar,{className:"recharts-active-dot",key:m},j)});var v=g.forwardRef(function(x,m){return D.createElement(y,Wl({},x,{ref:m}))});return v.displayName=y.displayName,v},Kbe=e3({chartName:"LineChart",GraphicalChild:zh,axisComponents:[{axisType:"xAxis",AxisComp:cd},{axisType:"yAxis",AxisComp:ud}],formatAxisMap:vD}),Gbe=e3({chartName:"BarChart",GraphicalChild:ml,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:cd},{axisType:"yAxis",AxisComp:ud}],formatAxisMap:vD});const Ybe=[{value:"none",label:"No Discount",description:"No discount for users"},{value:"percentage",label:"Percentage Off",description:"X% off first month"},{value:"fixed",label:"Fixed Amount Off",description:"$X off first month"},{value:"free_month",label:"Free First Month",description:"1 month free"},{value:"free_months",label:"Multiple Free Months",description:"X months free"},{value:"trial_extension",label:"Extended Trial",description:"Extra trial days"}];function Qbe(){var ee,de,oe,Pe,ve,ye,ne,H;const{toast:e}=rt(),[t,r]=g.useState("codes"),[i,a]=g.useState(!1),[s,o]=g.useState(""),[l,c]=g.useState(""),[d,u]=g.useState("20"),[f,h]=g.useState("influencer"),[p,y]=g.useState("free_month"),[v,b]=g.useState("1"),{data:x,isLoading:m,refetch:j}=he({queryKey:["/api/admin/referrals/codes"],queryFn:()=>Ie("/api/admin/referrals/codes")}),{data:N,isLoading:w}=he({queryKey:["/api/admin/referrals/users"],queryFn:()=>Ie("/api/admin/referrals/users"),enabled:t==="users"}),{data:S,isLoading:C}=he({queryKey:["/api/admin/referrals/payouts"],queryFn:()=>Ie("/api/admin/referrals/payouts"),enabled:t==="payouts"}),{data:k,isLoading:A}=he({queryKey:["/api/admin/referrals/analytics"],queryFn:()=>Ie("/api/admin/referrals/analytics?period=30"),enabled:t==="analytics"}),E=Ve({mutationFn:async B=>await Ie("/api/admin/referrals/codes","POST",B),onSuccess:B=>{Te.invalidateQueries({queryKey:["/api/admin/referrals/codes"]}),e({title:"Referral Code Created",description:B.message||`Code ${s} created successfully`}),_(),a(!1)},onError:B=>{e({title:"Error",description:B.message||"Failed to create referral code",variant:"destructive"})}}),T=Ve({mutationFn:async({id:B,isActive:J})=>await Ie(`/api/admin/referrals/codes/${B}`,"PUT",{isActive:J}),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/referrals/codes"]}),e({title:"Code Updated",description:"Referral code status has been updated"})},onError:B=>{e({title:"Error",description:B.message||"Failed to update code",variant:"destructive"})}}),P=Ve({mutationFn:async B=>await Ie(`/api/admin/referrals/codes/${B}`,"DELETE",{}),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/referrals/codes"]}),e({title:"Code Deleted",description:"Referral code and associated Stripe coupon have been deleted"})},onError:B=>{e({title:"Error",description:B.message||"Failed to delete code",variant:"destructive"})}}),_=()=>{o(""),c(""),u("20"),h("influencer"),y("free_month"),b("1")},R=()=>{if(!s){e({title:"Missing Code",description:"Please enter a referral code",variant:"destructive"});return}let B=v;p==="free_month"?B="1":p==="none"&&(B="0"),E.mutate({code:s,codeType:f,influencerName:l,commissionRate:d,discountType:p,discountValue:B})},O=B=>{const J=`/api/admin/referrals/export?type=${B}`;window.open(J,"_blank")},$=()=>{switch(p){case"percentage":return"Percentage (0-100)";case"fixed":return"Amount ($)";case"free_months":return"Number of Months";case"trial_extension":return"Extra Days";default:return"Value"}},M=p!=="none"&&p!=="free_month",I=(x==null?void 0:x.codes)||[],L=(N==null?void 0:N.users)||[],z=(S==null?void 0:S.influencers)||[],ie=(S==null?void 0:S.totals)||{},U=k||{};return n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Referral Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage influencer codes, track conversions, and process payouts"})]}),n.jsxs(Ar,{open:i,onOpenChange:a,children:[n.jsx(bf,{asChild:!0,children:n.jsxs(Q,{"data-testid":"button-create-referral",children:[n.jsx(I1,{className:"w-4 h-4 mr-2"}),"Create Code"]})}),n.jsxs(yr,{className:"max-w-md",children:[n.jsxs(br,{children:[n.jsx(jr,{children:"Create Referral Code"}),n.jsx(sn,{children:"Create a referral code with optional Stripe coupon for user discounts"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"code",children:"Referral Code"}),n.jsx(je,{id:"code",placeholder:"JTORRES",value:s,onChange:B=>o(B.target.value.toUpperCase()),"data-testid":"input-referral-code"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Code Type"}),n.jsxs(Je,{value:f,onValueChange:B=>h(B),children:[n.jsx(Ye,{"data-testid":"select-code-type",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"influencer",children:"Influencer (earns commission)"}),n.jsx(G,{value:"user",children:"Promo Code (no commission)"})]})]})]}),f==="influencer"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"influencerName",children:"Influencer Name"}),n.jsx(je,{id:"influencerName",placeholder:"JT Torres",value:l,onChange:B=>c(B.target.value),"data-testid":"input-influencer-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"commission",children:"Commission Rate (%)"}),n.jsx(je,{id:"commission",type:"number",placeholder:"20",value:d,onChange:B=>u(B.target.value),"data-testid":"input-commission-rate"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Influencer earns ",d,"% of every subscription payment"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"User Discount Type"}),n.jsxs(Je,{value:p,onValueChange:B=>y(B),children:[n.jsx(Ye,{"data-testid":"select-discount-type",children:n.jsx(Xe,{})}),n.jsx(Qe,{children:Ybe.map(B=>n.jsx(G,{value:B.value,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:B.label}),n.jsx("span",{className:"text-xs text-muted-foreground",children:B.description})]})},B.value))})]})]}),M&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"discountValue",children:$()}),n.jsx(je,{id:"discountValue",type:"number",placeholder:"1",value:v,onChange:B=>b(B.target.value),"data-testid":"input-discount-value"})]}),n.jsx(Q,{className:"w-full",onClick:R,disabled:E.isPending,"data-testid":"button-submit-referral",children:E.isPending?"Creating...":"Create Referral Code"})]})]})]})]}),n.jsxs(cl,{value:t,onValueChange:r,children:[n.jsxs(io,{className:"grid w-full grid-cols-4",children:[n.jsxs(er,{value:"codes","data-testid":"tab-codes",children:[n.jsx(uf,{className:"w-4 h-4 mr-2"}),"Codes"]}),n.jsxs(er,{value:"users","data-testid":"tab-users",children:[n.jsx(ur,{className:"w-4 h-4 mr-2"}),"Referred Users"]}),n.jsxs(er,{value:"payouts","data-testid":"tab-payouts",children:[n.jsx(Jm,{className:"w-4 h-4 mr-2"}),"Payouts"]}),n.jsxs(er,{value:"analytics","data-testid":"tab-analytics",children:[n.jsx(sr,{className:"w-4 h-4 mr-2"}),"Analytics"]})]}),n.jsxs(tr,{value:"codes",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.length," referral codes configured"]}),n.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>j(),"data-testid":"button-refresh-codes",children:n.jsx(Fn,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"rounded-lg border bg-card",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Code"}),n.jsx(Y,{children:"Owner"}),n.jsx(Y,{children:"Type"}),n.jsx(Y,{children:"Commission"}),n.jsx(Y,{children:"User Benefit"}),n.jsx(Y,{children:"Uses"}),n.jsx(Y,{children:"Revenue"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{className:"text-right",children:"Actions"})]})}),n.jsx(Ct,{children:m?n.jsx(Se,{children:n.jsx(V,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"Loading referral codes..."})}):I.length===0?n.jsx(Se,{children:n.jsx(V,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No referral codes yet. Create your first one above!"})}):I.map(B=>n.jsxs(Se,{"data-testid":`row-code-${B.id}`,children:[n.jsx(V,{className:"font-mono font-medium",children:B.code}),n.jsx(V,{children:B.influencerName||"-"}),n.jsx(V,{children:n.jsx(ae,{variant:B.codeType==="influencer"?"default":"secondary",children:B.codeType})}),n.jsx(V,{children:B.commissionPercent?`${B.commissionPercent}%`:"-"}),n.jsx(V,{children:n.jsx("span",{className:"text-sm",children:B.discountDescription||"No discount"})}),n.jsx(V,{children:B.totalSignups||0}),n.jsxs(V,{className:"font-medium",children:["$",parseFloat(B.totalRevenueGenerated||"0").toFixed(2)]}),n.jsx(V,{children:n.jsx(ae,{variant:B.isActive?"default":"secondary",children:B.isActive?"Active":"Inactive"})}),n.jsx(V,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-1",children:[n.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>T.mutate({id:B.id,isActive:!B.isActive}),"data-testid":`button-toggle-${B.id}`,children:B.isActive?n.jsx(M7,{className:"w-4 h-4"}):n.jsx(R7,{className:"w-4 h-4"})}),n.jsx(Q,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>{confirm(`Delete referral code ${B.code}? This will also delete the Stripe coupon.`)&&P.mutate(B.id)},"data-testid":`button-delete-${B.id}`,children:n.jsx(to,{className:"w-4 h-4"})})]})})]},B.id))})]})})]}),n.jsxs(tr,{value:"users",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[(N==null?void 0:N.total)||0," users signed up with referral codes"]}),n.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>O("users"),"data-testid":"button-export-users",children:[n.jsx(E0,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),n.jsx("div",{className:"rounded-lg border bg-card",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Email"}),n.jsx(Y,{children:"Username"}),n.jsx(Y,{children:"Code Used"}),n.jsx(Y,{children:"Influencer"}),n.jsx(Y,{children:"Discount"}),n.jsx(Y,{children:"Signup Date"}),n.jsx(Y,{children:"Status"})]})}),n.jsx(Ct,{children:w?n.jsx(Se,{children:n.jsx(V,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"Loading referred users..."})}):L.length===0?n.jsx(Se,{children:n.jsx(V,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No users have signed up with referral codes yet"})}):L.map(B=>n.jsxs(Se,{"data-testid":`row-user-${B.id}`,children:[n.jsx(V,{className:"font-medium",children:B.email}),n.jsx(V,{children:B.username||"-"}),n.jsx(V,{className:"font-mono",children:B.referralCodeUsed}),n.jsx(V,{children:B.referredByInfluencer||"-"}),n.jsx(V,{children:n.jsx("span",{className:"text-sm",children:B.discountDescription||"None"})}),n.jsx(V,{children:B.referralSignupDate?new Date(B.referralSignupDate).toLocaleDateString():"-"}),n.jsx(V,{children:n.jsx(ae,{variant:B.subscriptionStatus==="active"?"default":"secondary",children:B.subscriptionStatus||"unknown"})})]},B.id))})]})})]}),n.jsxs(tr,{value:"payouts",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Influencers"}),n.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-influencers",children:ie.influencerCount||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Signups"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-signups",children:ie.totalSignups||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Revenue"}),n.jsx(Jm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsxs("div",{className:"text-2xl font-bold","data-testid":"text-total-revenue",children:["$",ie.totalRevenue||"0.00"]})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Commission Owed"}),n.jsx(Jm,{className:"h-4 w-4 text-primary"})]}),n.jsx(K,{children:n.jsxs("div",{className:"text-2xl font-bold text-primary","data-testid":"text-commission-owed",children:["$",ie.totalCommissionOwed||"0.00"]})})]})]}),n.jsx("div",{className:"flex items-center justify-end",children:n.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>O("payouts"),"data-testid":"button-export-payouts",children:[n.jsx(E0,{className:"w-4 h-4 mr-2"}),"Export CSV"]})}),n.jsx("div",{className:"rounded-lg border bg-card",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Influencer"}),n.jsx(Y,{children:"Code"}),n.jsx(Y,{children:"Commission Rate"}),n.jsx(Y,{children:"Signups"}),n.jsx(Y,{children:"Active Subs"}),n.jsx(Y,{children:"Revenue Generated"}),n.jsx(Y,{children:"Commission Owed"}),n.jsx(Y,{children:"Status"})]})}),n.jsx(Ct,{children:C?n.jsx(Se,{children:n.jsx(V,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"Loading payout data..."})}):z.length===0?n.jsx(Se,{children:n.jsx(V,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No influencer codes yet"})}):z.map(B=>n.jsxs(Se,{"data-testid":`row-influencer-${B.id}`,children:[n.jsx(V,{className:"font-medium",children:B.influencerName}),n.jsx(V,{className:"font-mono",children:B.code}),n.jsxs(V,{children:[B.commissionRate,"%"]}),n.jsx(V,{children:B.totalSignups}),n.jsx(V,{children:B.activeSubscribers}),n.jsxs(V,{children:["$",B.totalRevenue]}),n.jsxs(V,{className:"font-medium text-primary",children:["$",B.commissionOwed]}),n.jsx(V,{children:n.jsx(ae,{variant:B.isActive?"default":"secondary",children:B.isActive?"Active":"Inactive"})})]},B.id))})]})})]}),n.jsxs(tr,{value:"analytics",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Referred"}),n.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-analytics-total",children:((ee=U.totals)==null?void 0:ee.totalReferred)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Active Subscribers"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-analytics-active",children:((de=U.totals)==null?void 0:de.activeSubscribers)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"In Trial"}),n.jsx(uf,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-analytics-trials",children:((oe=U.totals)==null?void 0:oe.trials)||0})})]})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Referral Signups Over Time (Last 30 Days)"}),n.jsx(Be,{children:"Daily signups from referral codes"})]}),n.jsx(K,{children:A?n.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Loading chart data..."}):(((Pe=U.signupsByDay)==null?void 0:Pe.length)||0)===0?n.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No signup data available yet"}):n.jsx($A,{width:"100%",height:300,children:n.jsxs(Kbe,{data:U.signupsByDay,children:[n.jsx(cw,{strokeDasharray:"3 3",className:"stroke-muted"}),n.jsx(cd,{dataKey:"date",tickFormatter:B=>new Date(B).toLocaleDateString("en-US",{month:"short",day:"numeric"}),className:"text-muted-foreground"}),n.jsx(ud,{className:"text-muted-foreground"}),n.jsx(vi,{labelFormatter:B=>new Date(B).toLocaleDateString(),contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))"}}),n.jsx(zh,{type:"monotone",dataKey:"count",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))"}})]})})})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Conversion Rate by Discount Type"}),n.jsx(Be,{children:"Which discount types convert best"})]}),n.jsx(K,{children:A?n.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Loading chart data..."}):(((ve=U.conversionByDiscount)==null?void 0:ve.length)||0)===0?n.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No conversion data available yet"}):n.jsx($A,{width:"100%",height:300,children:n.jsxs(Gbe,{data:U.conversionByDiscount,children:[n.jsx(cw,{strokeDasharray:"3 3",className:"stroke-muted"}),n.jsx(cd,{dataKey:"discountType",className:"text-muted-foreground"}),n.jsx(ud,{className:"text-muted-foreground"}),n.jsx(vi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))"},formatter:(B,J)=>J==="conversionRate"?[`${B}%`,"Conversion Rate"]:[B,J]}),n.jsx(ml,{dataKey:"conversionRate",fill:"hsl(var(--primary))",radius:[4,4,0,0],children:(ye=U.conversionByDiscount)==null?void 0:ye.map((B,J)=>n.jsx(LN,{fill:`hsl(var(--primary) / ${.5+J*.1})`},`cell-${J}`))})]})})})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Top Performing Codes"}),n.jsx(Be,{children:"Codes ranked by total signups"})]}),n.jsx(K,{children:n.jsx("div",{className:"rounded-lg border",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Code"}),n.jsx(Y,{children:"Influencer"}),n.jsx(Y,{children:"Signups"}),n.jsx(Y,{children:"Active Subs"}),n.jsx(Y,{children:"Revenue"})]})}),n.jsx(Ct,{children:A?n.jsx(Se,{children:n.jsx(V,{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"Loading..."})}):(((ne=U.topCodes)==null?void 0:ne.length)||0)===0?n.jsx(Se,{children:n.jsx(V,{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"No codes with signups yet"})}):(H=U.topCodes)==null?void 0:H.map((B,J)=>n.jsxs(Se,{"data-testid":`row-top-code-${J}`,children:[n.jsx(V,{className:"font-mono font-medium",children:B.code}),n.jsx(V,{children:B.influencerName||"-"}),n.jsx(V,{children:B.totalSignups||0}),n.jsx(V,{children:B.activeSubscribers||0}),n.jsxs(V,{children:["$",B.totalRevenueGenerated]})]},B.code))})]})})})]})]})]})]})})}var t3="AlertDialog",[Jbe,uNe]=jn(t3,[W5]),Ja=W5(),r3=e=>{const{__scopeAlertDialog:t,...r}=e,i=Ja(t);return n.jsx(dN,{...i,...r,modal:!0})};r3.displayName=t3;var Xbe="AlertDialogTrigger",n3=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,a=Ja(r);return n.jsx(oM,{...a,...i,ref:t})});n3.displayName=Xbe;var Zbe="AlertDialogPortal",i3=e=>{const{__scopeAlertDialog:t,...r}=e,i=Ja(t);return n.jsx(uN,{...i,...r})};i3.displayName=Zbe;var e0e="AlertDialogOverlay",a3=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,a=Ja(r);return n.jsx(Ch,{...a,...i,ref:t})});a3.displayName=e0e;var dc="AlertDialogContent",[t0e,r0e]=Jbe(dc),n0e=D4("AlertDialogContent"),s3=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:i,...a}=e,s=Ja(r),o=g.useRef(null),l=at(t,o),c=g.useRef(null);return n.jsx(qH,{contentName:dc,titleName:o3,docsSlug:"alert-dialog",children:n.jsx(t0e,{scope:r,cancelRef:c,children:n.jsxs(Ah,{role:"alertdialog",...s,...a,ref:l,onOpenAutoFocus:Re(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[n.jsx(n0e,{children:i}),n.jsx(a0e,{contentRef:o})]})})})});s3.displayName=dc;var o3="AlertDialogTitle",l3=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,a=Ja(r);return n.jsx(Eh,{...a,...i,ref:t})});l3.displayName=o3;var c3="AlertDialogDescription",d3=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,a=Ja(r);return n.jsx(Ph,{...a,...i,ref:t})});d3.displayName=c3;var i0e="AlertDialogAction",u3=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,a=Ja(r);return n.jsx(Th,{...a,...i,ref:t})});u3.displayName=i0e;var f3="AlertDialogCancel",h3=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,{cancelRef:a}=r0e(f3,r),s=Ja(r),o=at(t,a);return n.jsx(Th,{...s,...i,ref:o})});h3.displayName=f3;var a0e=({contentRef:e})=>{const t=`\`${dc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${dc}\` by passing a \`${c3}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${dc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var i;document.getElementById((i=e.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},s0e=r3,o0e=n3,l0e=i3,m3=a3,p3=s3,g3=u3,x3=h3,v3=l3,y3=d3;const Xg=s0e,gT=o0e,c0e=l0e,b3=g.forwardRef(({className:e,...t},r)=>n.jsx(m3,{className:we("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));b3.displayName=m3.displayName;const rh=g.forwardRef(({className:e,...t},r)=>n.jsxs(c0e,{children:[n.jsx(b3,{}),n.jsx(p3,{ref:r,className:we("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));rh.displayName=p3.displayName;const nh=({className:e,...t})=>n.jsx("div",{className:we("flex flex-col space-y-2 text-center sm:text-left",e),...t});nh.displayName="AlertDialogHeader";const ih=({className:e,...t})=>n.jsx("div",{className:we("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ih.displayName="AlertDialogFooter";const ah=g.forwardRef(({className:e,...t},r)=>n.jsx(v3,{ref:r,className:we("text-lg font-semibold",e),...t}));ah.displayName=v3.displayName;const sh=g.forwardRef(({className:e,...t},r)=>n.jsx(y3,{ref:r,className:we("text-sm text-muted-foreground",e),...t}));sh.displayName=y3.displayName;const oh=g.forwardRef(({className:e,...t},r)=>n.jsx(g3,{ref:r,className:we(G1(),e),...t}));oh.displayName=g3.displayName;const lh=g.forwardRef(({className:e,...t},r)=>n.jsx(x3,{ref:r,className:we(G1({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));lh.displayName=x3.displayName;function xT(){const{toast:e}=rt(),[t,r]=g.useState(new Set),[i,a]=g.useState(null),[s,o]=g.useState(null),[l,c]=g.useState(null),[d,u]=g.useState(!1),[f,h]=g.useState(""),[p,y]=g.useState(""),[v,b]=g.useState(""),[x,m]=g.useState(""),[j,N]=g.useState(!1),[w,S]=g.useState(""),[C,k]=g.useState(""),[A,E]=g.useState(!1),[T,P]=g.useState("BJJ OS lifetime access for free"),[_,R]=g.useState(`Hey [Name],

I've been working on this for a while and I'm really excited to finally share it with you. 

It's called BJJ OS - and I'm giving you lifetime access, no charge, ever. I'm genuinely grateful you're willing to try it.

Here's what it actually is:

At the core is Professor OS - an AI system I built specifically for BJJ. It's not just a chatbot that spits out generic answers. 

It learns your game. Tracks what you're working on, what's clicking, what you're struggling with. It autonomously analyzes thousands of videos daily - curating, saving, and categorizing them after passing numerous algorithm tests for quality. The goal is to build a library of thousands of videos over time, with only elite instruction making the cut.

Ask it technique questions and it gives you real answers, not surface-level stuff. It recommends specific videos based on YOUR game, YOUR body type, YOUR goals. The more you use it, the better it gets at coaching you.

I'm seriously shocked by how smart it is and it's constantly learning.

This is something I believe can actually help people improve. Not just track sessions or show random videos - but genuinely accelerate your learning.

That said, I'm still building and refining it. I want to know what's bad and what could be better. Please help me bang out the kinks. Criticism only helps and it's appreciated.

 Click here to get started: https://bjjos.app/signup?email=[EMAIL]

Email me at Todd@bjjos.app or text/call me at 1.914.837.3750 anytime. I would love to hear from you.

Os!
- Todd`),{data:O,isLoading:$}=he({queryKey:["/api/admin/lifetime-users"],queryFn:()=>Ie("/api/admin/lifetime-users")}),{data:M,isLoading:I}=he({queryKey:["/api/admin/lifetime-users",i],enabled:!!i,queryFn:()=>Ie(`/api/admin/lifetime-users/${i}`)}),{data:L,isLoading:z}=he({queryKey:["/api/admin/lifetime-users",s],enabled:!!s,queryFn:async()=>{var B;const H=await Ie(`/api/admin/lifetime-users/${s}`);return h(H.displayName||H.name||""),y(H.beltLevel||""),b(((B=H.membership)==null?void 0:B.reason)||H.reason||""),m(H.adminNotes||""),N(H.isLifetimeUser||!1),H}}),ie=Ve({mutationFn:async H=>await Ie(`/api/admin/lifetime-users/${H.id}`,"PATCH",{displayName:H.displayName,beltLevel:H.beltLevel,reason:H.reason,adminNotes:H.adminNotes,isLifetimeUser:H.isLifetimeUser}),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/lifetime-users"]}),e({title:"User Updated",description:"User details updated successfully"}),o(null)},onError:H=>{e({title:"Error",description:H.message||"Failed to update user",variant:"destructive"})}}),U=Ve({mutationFn:async H=>await Ie(`/api/admin/lifetime-users/${H}`,"DELETE",{}),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/lifetime-users"]}),e({title:"User Deleted",description:"User deleted successfully"}),c(null),r(new Set)},onError:H=>{e({title:"Error",description:H.message||"Failed to delete user",variant:"destructive"})}}),ee=Ve({mutationFn:async H=>await Ie("/api/admin/lifetime-users/bulk-delete","POST",{userIds:H}),onSuccess:H=>{Te.invalidateQueries({queryKey:["/api/admin/lifetime-users"]}),e({title:"Bulk Delete Complete",description:H.summary}),u(!1),r(new Set)},onError:H=>{e({title:"Error",description:H.message||"Failed to bulk delete users",variant:"destructive"})}}),de=Ve({mutationFn:async H=>await Ie("/api/admin/lifetime/grant-instant","POST",H),onSuccess:H=>{Te.invalidateQueries({queryKey:["/api/admin/lifetime-users"]}),e({title:"Success!",description:H.message}),S(""),k(""),E(!1)},onError:H=>{e({title:"Error",description:H.message||"Failed to grant lifetime access",variant:"destructive"})}}),oe=()=>{s&&ie.mutate({id:s,displayName:f,beltLevel:p,reason:v,adminNotes:x,isLifetimeUser:j})},Pe=()=>{if(!w){e({title:"Missing Information",description:"Please enter an email address",variant:"destructive"});return}if(!C){e({title:"Missing Information",description:"Please select a reason for lifetime access",variant:"destructive"});return}de.mutate({email:w,reason:C,sendEmail:A,emailSubject:A?T:void 0,emailBody:A?_:void 0})},ve=H=>{const B=new Set(t);B.has(H)?B.delete(H):B.add(H),r(B)},ye=()=>{t.size===(O==null?void 0:O.length)?r(new Set):r(new Set((O==null?void 0:O.map(H=>H.id))||[]))},ne=H=>{const B=H.displayName||H.name||"Unnamed",J=H.username;return J?`${B} (@${J})`:B};return n.jsxs(qt,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("h2",{className:"text-3xl font-bold",children:"Lifetime Access Management"}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(na,{className:"w-5 h-5"}),"Send Lifetime Access Invitation"]}),n.jsx(Be,{children:"Grant free lifetime access to beta testers, special contributors, or VIP users. They get full access forever without paying."})]}),n.jsx(K,{children:n.jsxs("form",{onSubmit:H=>{H.preventDefault(),Pe()},className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"invite-email",children:"Email Address *"}),n.jsx(je,{id:"invite-email",type:"email",value:w,onChange:H=>S(H.target.value),placeholder:"user@example.com",required:!0,"data-testid":"input-invite-email"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"invite-reason",children:"Reason for Lifetime Access *"}),n.jsxs(Je,{value:C,onValueChange:k,required:!0,children:[n.jsx(Ye,{id:"invite-reason","data-testid":"select-invite-reason",children:n.jsx(Xe,{placeholder:"Select a reason"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"Beta Tester",children:"Beta Tester"}),n.jsx(G,{value:"VIP / Founding Member",children:"VIP / Founding Member"}),n.jsx(G,{value:"Gym Owner",children:"Gym Owner"}),n.jsx(G,{value:"Elite Instructor (Black Belt)",children:"Elite Instructor (Black Belt)"}),n.jsx(G,{value:"Elite Competitor",children:"Elite Competitor"}),n.jsx(G,{value:"Business Partner",children:"Business Partner"}),n.jsx(G,{value:"Personal Friend",children:"Personal Friend"}),n.jsx(G,{value:"Essential Training Partner",children:"Essential Training Partner"}),n.jsx(G,{value:"Content Creator / Influencer",children:"Content Creator / Influencer"}),n.jsx(G,{value:"Other",children:"Other"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ai,{id:"send-email",checked:A,onCheckedChange:H=>E(H),"data-testid":"checkbox-send-email"}),n.jsx("label",{htmlFor:"send-email",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Send invitation email"})]}),A&&n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(na,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Message Preview"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"email-subject",children:"Subject"}),n.jsx(je,{id:"email-subject",value:T,onChange:H=>P(H.target.value),placeholder:"Email subject","data-testid":"input-email-subject"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"email-body",children:"Message Body"}),n.jsx(aa,{id:"email-body",value:_,onChange:H=>R(H.target.value),placeholder:"Email message",rows:20,className:"font-mono text-sm","data-testid":"textarea-email-body"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground bg-muted/30 p-3 rounded-lg",children:[n.jsx("span",{children:""}),n.jsx("span",{children:"You can edit this message before sending. Use [Name] and [EMAIL] as placeholders."})]})]}),n.jsxs(Q,{type:"submit",disabled:!w||!C||de.isPending,className:"w-full","data-testid":"button-grant-lifetime",children:[n.jsx(Kr,{className:"h-4 w-4 mr-2"}),de.isPending?"Granting...":A?"Grant Lifetime Access & Send Email":"Grant Lifetime Access"]})]})})]}),n.jsx(W,{children:n.jsx(X,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(ur,{className:"w-5 h-5"}),"Lifetime Memberships"]}),n.jsxs(Be,{children:["Grant free lifetime access to beta testers, special contributors, or VIP users. They get full access forever without paying.",O&&O.length>0&&n.jsxs("span",{className:"ml-2 font-semibold",children:["(",O.length," total)"]})]})]}),t.size>0&&n.jsxs(Q,{variant:"destructive",size:"sm",onClick:()=>u(!0),"data-testid":"button-bulk-delete",children:[n.jsx(to,{className:"w-4 h-4 mr-2"}),"Delete Selected (",t.size,")"]})]})})}),n.jsx("div",{className:"rounded-lg border bg-card",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{className:"w-12",children:n.jsx(Ai,{checked:(O==null?void 0:O.length)>0&&t.size===(O==null?void 0:O.length),onCheckedChange:ye,"data-testid":"checkbox-select-all"})}),n.jsx(Y,{children:"User"}),n.jsx(Y,{children:"Phone"}),n.jsx(Y,{children:"Reason"}),n.jsx(Y,{children:"Belt"}),n.jsx(Y,{children:"Created"}),n.jsx(Y,{children:"Bypass"}),n.jsx(Y,{className:"text-right",children:"Actions"})]})}),n.jsx(Ct,{children:$?n.jsx(Se,{children:n.jsxs(V,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:[n.jsx(qe,{className:"w-5 h-5 animate-spin mx-auto mb-2"}),"Loading lifetime members..."]})}):(O==null?void 0:O.length)===0?n.jsx(Se,{children:n.jsx(V,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No lifetime members yet. Grant access to your first beta tester above!"})}):O==null?void 0:O.map(H=>n.jsxs(Se,{"data-testid":`row-lifetime-${H.id}`,children:[n.jsx(V,{children:n.jsx(Ai,{checked:t.has(H.id),onCheckedChange:()=>ve(H.id),"data-testid":`checkbox-user-${H.id}`})}),n.jsx(V,{className:"font-medium",children:ne(H)}),n.jsx(V,{className:"font-mono text-sm",children:H.phoneNumber||H.email||"Unknown"}),n.jsx(V,{children:H.reason?n.jsx(ae,{variant:"secondary",className:"text-xs",children:H.reason}):n.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),n.jsx(V,{children:H.beltLevel?n.jsx(ae,{variant:"outline",children:H.beltLevel}):n.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),n.jsx(V,{className:"text-muted-foreground text-sm",children:new Date(H.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),n.jsx(V,{children:H.isLifetimeUser?n.jsx(ae,{variant:"default",className:"text-xs",children:"ON"}):n.jsx(ae,{variant:"secondary",className:"text-xs",children:"OFF"})}),n.jsx(V,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-1",children:[n.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>a(H.id),"data-testid":`button-view-${H.id}`,children:n.jsx(Mr,{className:"w-4 h-4"})}),n.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>o(H.id),"data-testid":`button-edit-${H.id}`,children:n.jsx(pI,{className:"w-4 h-4"})}),n.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>c(H.id),"data-testid":`button-delete-${H.id}`,children:n.jsx(Fi,{className:"w-4 h-4"})})]})})]},H.id))})]})})]}),n.jsx(Ar,{open:!!i,onOpenChange:H=>!H&&a(null),children:n.jsxs(yr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(br,{children:[n.jsx(jr,{children:"User Details"}),n.jsx(sn,{children:"Complete information for this lifetime user"})]}),I?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(qe,{className:"w-6 h-6 animate-spin"})}):M&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Display Name"}),n.jsx("div",{className:"font-medium",children:M.displayName||M.name||"Not set"})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Username"}),n.jsx("div",{className:"font-mono text-sm",children:M.username||"Not set"})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Phone Number"}),n.jsx("div",{className:"font-mono text-sm",children:M.phoneNumber})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Belt Level"}),n.jsx("div",{children:M.beltLevel||"Not set"})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Style"}),n.jsx("div",{children:M.style||"Not set"})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Content Preference"}),n.jsx("div",{children:M.contentPreference||"Not set"})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Training Frequency"}),n.jsx("div",{children:M.trainingFrequency?`${M.trainingFrequency}x/week`:"Not set"})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Compete Status"}),n.jsx("div",{children:M.competeStatus||"Not set"})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Lifetime Bypass"}),n.jsx("div",{children:M.isLifetimeUser?n.jsx(ae,{variant:"default",children:"Enabled"}):n.jsx(ae,{variant:"secondary",children:"Disabled"})})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Created"}),n.jsx("div",{className:"text-sm",children:new Date(M.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Last Login"}),n.jsx("div",{className:"text-sm",children:M.lastLogin?new Date(M.lastLogin).toLocaleString():"Never"})]}),n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Referral Code"}),n.jsx("div",{className:"font-mono text-sm",children:M.referralCode||"None"})]})]}),M.focusAreas&&M.focusAreas.length>0&&n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Focus Areas"}),n.jsx("div",{className:"flex gap-1 flex-wrap mt-1",children:M.focusAreas.map((H,B)=>n.jsx(ae,{variant:"outline",className:"text-xs",children:H},B))})]}),M.struggles&&M.struggles.length>0&&n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Struggles"}),n.jsx("div",{className:"flex gap-1 flex-wrap mt-1",children:M.struggles.map((H,B)=>n.jsx(ae,{variant:"secondary",className:"text-xs",children:H},B))})]}),M.adminNotes&&n.jsxs("div",{children:[n.jsx(ce,{className:"text-xs text-muted-foreground",children:"Admin Notes"}),n.jsx("div",{className:"text-sm mt-1 p-3 bg-muted rounded-md",children:M.adminNotes})]})]})]})}),n.jsx(Ar,{open:!!s,onOpenChange:H=>!H&&o(null),children:n.jsxs(yr,{className:"max-w-lg",children:[n.jsxs(br,{children:[n.jsx(jr,{children:"Edit User"}),n.jsx(sn,{children:"Update user information and settings"})]}),z?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(qe,{className:"w-6 h-6 animate-spin"})}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"edit-display-name",children:"Display Name"}),n.jsx(je,{id:"edit-display-name",value:f,onChange:H=>h(H.target.value),placeholder:"John Smith","data-testid":"input-edit-display-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"edit-belt-level",children:"Belt Level"}),n.jsxs(Je,{value:p,onValueChange:y,children:[n.jsx(Ye,{"data-testid":"select-edit-belt",children:n.jsx(Xe,{placeholder:"Select belt level"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"white",children:"White"}),n.jsx(G,{value:"blue",children:"Blue"}),n.jsx(G,{value:"purple",children:"Purple"}),n.jsx(G,{value:"brown",children:"Brown"}),n.jsx(G,{value:"black",children:"Black"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"edit-reason",children:"Reason for Lifetime Access"}),n.jsxs(Je,{value:v,onValueChange:b,children:[n.jsx(Ye,{"data-testid":"select-edit-reason",children:n.jsx(Xe,{placeholder:"Select a reason"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"Beta Tester",children:"Beta Tester"}),n.jsx(G,{value:"VIP / Founding Member",children:"VIP / Founding Member"}),n.jsx(G,{value:"Gym Owner",children:"Gym Owner"}),n.jsx(G,{value:"Elite Instructor (Black Belt)",children:"Elite Instructor (Black Belt)"}),n.jsx(G,{value:"Elite Competitor",children:"Elite Competitor"}),n.jsx(G,{value:"Business Partner",children:"Business Partner"}),n.jsx(G,{value:"Personal Friend",children:"Personal Friend"}),n.jsx(G,{value:"Essential Training Partner",children:"Essential Training Partner"}),n.jsx(G,{value:"Content Creator / Influencer",children:"Content Creator / Influencer"}),n.jsx(G,{value:"Other",children:"Other"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"edit-admin-notes",children:"Admin Notes"}),n.jsx(aa,{id:"edit-admin-notes",value:x,onChange:H=>m(H.target.value),placeholder:"Internal notes...",rows:3,"data-testid":"input-edit-admin-notes"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ai,{id:"edit-lifetime-bypass",checked:j,onCheckedChange:H=>N(!!H),"data-testid":"checkbox-edit-lifetime-bypass"}),n.jsx(ce,{htmlFor:"edit-lifetime-bypass",className:"cursor-pointer",children:"Enable Lifetime Bypass (LIFETIME code works)"})]}),n.jsxs(Ys,{children:[n.jsx(Q,{variant:"outline",onClick:()=>o(null),"data-testid":"button-cancel-edit",children:"Cancel"}),n.jsx(Q,{onClick:oe,disabled:ie.isPending,"data-testid":"button-save-edit",children:ie.isPending?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})}),n.jsx(Xg,{open:!!l,onOpenChange:H=>!H&&c(null),children:n.jsxs(rh,{children:[n.jsxs(nh,{children:[n.jsx(ah,{children:"Delete User?"}),n.jsx(sh,{children:"This will permanently delete this user and all their data. This action cannot be undone."})]}),n.jsxs(ih,{children:[n.jsx(lh,{"data-testid":"button-cancel-delete",children:"Cancel"}),n.jsx(oh,{onClick:()=>{l&&U.mutate(l)},className:"bg-destructive hover:bg-destructive/90","data-testid":"button-confirm-delete",children:"Delete User"})]})]})}),n.jsx(Xg,{open:d,onOpenChange:u,children:n.jsxs(rh,{children:[n.jsxs(nh,{children:[n.jsxs(ah,{children:["Delete ",t.size," Users?"]}),n.jsxs(sh,{children:["This will permanently delete ",t.size," selected users and all their data. This action cannot be undone."]})]}),n.jsxs(ih,{children:[n.jsx(lh,{"data-testid":"button-cancel-bulk-delete",children:"Cancel"}),n.jsx(oh,{onClick:()=>ee.mutate(Array.from(t)),className:"bg-destructive hover:bg-destructive/90","data-testid":"button-confirm-bulk-delete",children:ee.isPending?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):`Delete ${t.size} Users`})]})]})})]})}var wS="Progress",NS=100,[d0e,fNe]=jn(wS),[u0e,f0e]=d0e(wS),j3=g.forwardRef((e,t)=>{const{__scopeProgress:r,value:i=null,max:a,getValueLabel:s=h0e,...o}=e;(a||a===0)&&!vT(a)&&console.error(m0e(`${a}`,"Progress"));const l=vT(a)?a:NS;i!==null&&!yT(i,l)&&console.error(p0e(`${i}`,"Progress"));const c=yT(i,l)?i:null,d=Zg(c)?s(c,l):void 0;return n.jsx(u0e,{scope:r,value:c,max:l,children:n.jsx(Ue.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Zg(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":S3(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});j3.displayName=wS;var w3="ProgressIndicator",N3=g.forwardRef((e,t)=>{const{__scopeProgress:r,...i}=e,a=f0e(w3,r);return n.jsx(Ue.div,{"data-state":S3(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...i,ref:t})});N3.displayName=w3;function h0e(e,t){return`${Math.round(e/t*100)}%`}function S3(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Zg(e){return typeof e=="number"}function vT(e){return Zg(e)&&!isNaN(e)&&e>0}function yT(e,t){return Zg(e)&&!isNaN(e)&&e<=t&&e>=0}function m0e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${NS}\`.`}function p0e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${NS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var k3=j3,g0e=N3;const C3=g.forwardRef(({className:e,value:t,...r},i)=>n.jsx(k3,{ref:i,className:we("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(g0e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));C3.displayName=k3.displayName;async function Cl(e){const t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(t.status===401||t.status===403)throw new Error("AUTH_REQUIRED");if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(r.error||`Request failed: ${t.status}`)}return t.json()}async function _m(e,t){const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:t?JSON.stringify(t):void 0});if(!r.ok){const i=await r.json().catch(()=>({}));throw new Error(i.error||`Request failed: ${r.status}`)}return r.json()}function x0e(){var Ke,nt,jt;const[,e]=Ze(),[t,r]=g.useState(""),[i,a]=g.useState(""),[s,o]=g.useState("all"),[l,c]=g.useState("all"),[d,u]=g.useState("all"),[f,h]=g.useState(!1),[p,y]=g.useState(null),[v,b]=g.useState(!1),[x,m]=g.useState(null);g.useEffect(()=>{const te=setTimeout(()=>a(t),300);return()=>clearTimeout(te)},[t]);const{data:j,isLoading:N,error:w}=he({queryKey:["/api/admin/videos/stats"],queryFn:()=>Cl("/api/admin/videos/stats"),staleTime:3e4,retry:!1}),{data:S,isLoading:C}=he({queryKey:["/api/admin/videos/knowledge-status"],queryFn:()=>Cl("/api/admin/videos/knowledge-status"),staleTime:1e4,refetchInterval:3e4,retry:!1,enabled:!f}),{data:k}=he({queryKey:["/api/admin/videos/bulk-status"],queryFn:()=>Cl("/api/admin/videos/bulk-status"),staleTime:5e3,refetchInterval:te=>{var We;return(We=te.state.data)!=null&&We.isActive?3e3:3e4},retry:!1,enabled:!f}),{data:A}=he({queryKey:["/api/admin/videos/all-for-filters"],queryFn:()=>Cl("/api/admin/videos/list?limit=2000"),staleTime:6e4,retry:!1,enabled:!f}),{data:E,isLoading:T,error:P}=he({queryKey:["/api/admin/videos/list",i,s,l,d],queryFn:async()=>{const te=new URLSearchParams;return i&&te.append("q",i),s&&s!=="all"&&te.append("instructor",s),l&&l!=="all"&&te.append("technique",l),d&&d!=="all"&&te.append("knowledgeFilter",d),te.append("limit","50"),Cl(`/api/admin/videos/list?${te.toString()}`)},staleTime:1e4,retry:!1,enabled:!f}),_=Ve({mutationFn:()=>_m("/api/admin/videos/process-all",{batchSize:10,delayBetweenBatches:3e4}),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/videos/bulk-status"]})}}),R=Ve({mutationFn:()=>_m("/api/admin/videos/bulk-pause"),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/videos/bulk-status"]})}}),O=Ve({mutationFn:()=>_m("/api/admin/videos/bulk-stop"),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/videos/bulk-status"]})}}),$=Ve({mutationFn:te=>_m(`/api/admin/videos/${te}/process`),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/videos/list"]}),Te.invalidateQueries({queryKey:["/api/admin/videos/knowledge-status"]})}}),{instructorToTechniques:M,techniqueToInstructors:I,allInstructors:L,allTechniques:z}=g.useMemo(()=>{const te=(A==null?void 0:A.videos)||[],We=new Map,ut=new Map,F=new Set,re=new Set;for(const se of te){const xe=se.instructor_name,pe=se.technique_name;xe&&(F.add(xe),We.has(xe)||We.set(xe,new Set),pe&&We.get(xe).add(pe)),pe&&(re.add(pe),ut.has(pe)||ut.set(pe,new Set),xe&&ut.get(pe).add(xe))}return{instructorToTechniques:We,techniqueToInstructors:ut,allInstructors:Array.from(F).sort((se,xe)=>se.localeCompare(xe)),allTechniques:Array.from(re).sort((se,xe)=>se.localeCompare(xe))}},[A]),ie=g.useMemo(()=>{if(l==="all")return L;const te=I.get(l);return te?L.filter(We=>te.has(We)):L},[l,L,I]),U=g.useMemo(()=>{if(s==="all")return z;const te=M.get(s);return te?z.filter(We=>te.has(We)):z},[s,z,M]),ee=te=>{if(o(te),te!=="all"&&l!=="all"){const We=M.get(te);(!We||!We.has(l))&&c("all")}},de=te=>{if(c(te),te!=="all"&&s!=="all"){const We=I.get(te);(!We||!We.has(s))&&o("all")}},oe=async te=>{try{const We=await Cl(`/api/admin/videos/${te.id}/knowledge`);m(We),b(!0)}catch(We){console.error("Failed to fetch knowledge:",We)}};if(g.useEffect(()=>{const te=w||P;te&&te.message==="AUTH_REQUIRED"&&(h(!0),e("/admin/login"))},[w,P,e]),f)return n.jsx(qt,{children:n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[n.jsx(In,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Authentication Required"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Please log in to access the video library."}),n.jsx(Q,{onClick:()=>e("/admin/login"),"data-testid":"button-login",children:"Go to Login"})]})});const Pe=j||{total_videos:0,unique_instructors:0,unique_techniques:0,avg_quality:0},ve=(E==null?void 0:E.videos)||[],ye=S||{totalVideos:0,processed:0,pending:0,withTranscript:0,totalTechniques:0,percentComplete:0},ne=k||{isActive:!1,total:0,processed:0,succeeded:0,failed:0,currentBatch:0,totalBatches:0,isPaused:!1,estimatedTimeRemaining:null},H=te=>te.thumbnail_url?te.thumbnail_url:te.youtube_id?`https://img.youtube.com/vi/${te.youtube_id}/mqdefault.jpg`:"",B=te=>{if(!te)return"";const We=Math.floor(te/60),ut=te%60;return`${We}:${ut.toString().padStart(2,"0")}`},J=te=>l==="all"?((A==null?void 0:A.videos)||[]).filter(F=>F.instructor_name===te).length:((A==null?void 0:A.videos)||[]).filter(ut=>ut.instructor_name===te&&ut.technique_name===l).length,ze=te=>s==="all"?((A==null?void 0:A.videos)||[]).filter(F=>F.technique_name===te).length:((A==null?void 0:A.videos)||[]).filter(ut=>ut.technique_name===te&&ut.instructor_name===s).length,ue=te=>{switch(te){case"watched":return n.jsx($n,{className:"h-4 w-4 text-green-500"});case"failed":return n.jsx(In,{className:"h-4 w-4 text-yellow-500"});default:return n.jsx(A0,{className:"h-4 w-4 text-muted-foreground"})}},Ae=te=>{switch(te){case"watched":return"Watched";case"failed":return"Failed";default:return"Pending"}};return n.jsxs(qt,{children:[n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Video Library"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage curated BJJ technique videos"})]}),n.jsx(W,{className:"bg-gradient-to-r from-purple-500/10 to-blue-500/10 border-purple-500/20",children:n.jsxs(K,{className:"pt-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(zl,{className:"h-8 w-8 text-purple-500"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Video Knowledge System"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[ye.totalVideos.toLocaleString()," total | "," ",n.jsxs("span",{className:"text-green-500",children:[ye.withTranscript.toLocaleString()," watched"]})," | "," ",n.jsxs("span",{className:"text-yellow-500",children:[ye.pending.toLocaleString()," pending"]})," | "," ",ye.percentComplete.toFixed(1),"% complete"]}),ye.totalTechniques>0&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[ye.totalTechniques.toLocaleString()," techniques extracted"]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:ne.isActive?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-sm text-muted-foreground mr-2",children:["Batch ",ne.currentBatch,"/",ne.totalBatches,ne.estimatedTimeRemaining&&`  ~${ne.estimatedTimeRemaining}`]}),n.jsx(Q,{size:"sm",variant:"outline",onClick:()=>R.mutate(),disabled:R.isPending,"data-testid":"button-pause",children:ne.isPaused?n.jsx(Zn,{className:"h-4 w-4"}):n.jsx(P0,{className:"h-4 w-4"})}),n.jsx(Q,{size:"sm",variant:"destructive",onClick:()=>O.mutate(),disabled:O.isPending,"data-testid":"button-stop",children:n.jsx(P7,{className:"h-4 w-4"})})]}):n.jsxs(Q,{onClick:()=>_.mutate(),disabled:_.isPending||ye.pending===0,"data-testid":"button-process-all",children:[_.isPending?n.jsx(qe,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(zl,{className:"h-4 w-4 mr-2"}),"Process All Pending (",ye.pending.toLocaleString(),")"]})})]}),ne.isActive&&n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsx(C3,{value:ne.processed/ne.total*100,className:"h-2"}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:[ne.processed.toLocaleString()," / ",ne.total.toLocaleString()," processed"]}),n.jsxs("span",{className:"text-green-500",children:[ne.succeeded," succeeded"]}),ne.failed>0&&n.jsxs("span",{className:"text-red-500",children:[ne.failed," failed"]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Videos"}),n.jsx(cf,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-videos",children:N?n.jsx(qe,{className:"h-6 w-6 animate-spin"}):((Ke=Pe.total_videos)==null?void 0:Ke.toLocaleString())||"0"})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Instructors"}),n.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-instructors",children:N?n.jsx(qe,{className:"h-6 w-6 animate-spin"}):((nt=Pe.unique_instructors)==null?void 0:nt.toLocaleString())||"0"})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Techniques"}),n.jsx(Tx,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-techniques",children:N?n.jsx(qe,{className:"h-6 w-6 animate-spin"}):((jt=Pe.unique_techniques)==null?void 0:jt.toLocaleString())||"0"})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Avg Quality"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-avg-quality",children:N?n.jsx(qe,{className:"h-6 w-6 animate-spin"}):Pe.avg_quality?Number(Pe.avg_quality).toFixed(1):"0.0"})})]})]}),n.jsx(W,{children:n.jsx(K,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(je,{placeholder:"Search by title or instructor...",value:t,onChange:te=>r(te.target.value),className:"pl-10","data-testid":"input-search"})]}),n.jsxs(Je,{value:s,onValueChange:ee,children:[n.jsx(Ye,{className:"w-[200px]","data-testid":"select-instructor",children:n.jsx(Xe,{placeholder:"All Instructors"})}),n.jsxs(Qe,{children:[n.jsxs(G,{value:"all",children:["All Instructors (",ie.length,")"]}),ie.map(te=>n.jsxs(G,{value:te,children:[te," (",J(te),")"]},te))]})]}),n.jsxs(Je,{value:l,onValueChange:de,children:[n.jsx(Ye,{className:"w-[200px]","data-testid":"select-technique",children:n.jsx(Xe,{placeholder:"All Techniques"})}),n.jsxs(Qe,{children:[n.jsxs(G,{value:"all",children:["All Techniques (",U.length,")"]}),U.map(te=>n.jsxs(G,{value:te,children:[te," (",ze(te),")"]},te))]})]}),n.jsxs(Je,{value:d,onValueChange:u,children:[n.jsx(Ye,{className:"w-[160px]","data-testid":"select-knowledge-filter",children:n.jsx(Xe,{placeholder:"Knowledge Status"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Status"}),n.jsx(G,{value:"watched",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($n,{className:"h-3 w-3 text-green-500"}),"Watched"]})}),n.jsx(G,{value:"pending",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(A0,{className:"h-3 w-3 text-muted-foreground"}),"Pending"]})}),n.jsx(G,{value:"failed",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(In,{className:"h-3 w-3 text-yellow-500"}),"Failed"]})})]})]})]})})}),n.jsx("div",{children:T?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(qe,{className:"h-8 w-8 animate-spin text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading videos..."})]}):ve.length===0?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"No videos found"})}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ve.map(te=>n.jsxs(W,{className:"overflow-hidden cursor-pointer hover-elevate transition-all","data-testid":`card-video-${te.id}`,onClick:()=>y(te),children:[n.jsxs("div",{className:"relative aspect-video bg-muted",children:[n.jsx("img",{src:H(te),alt:te.title,className:"w-full h-full object-cover",onError:We=>{We.target.src=`https://img.youtube.com/vi/${te.youtube_id}/mqdefault.jpg`}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 hover:bg-black/30 transition-colors",children:n.jsx(cf,{className:"h-12 w-12 text-white opacity-0 hover:opacity-100 transition-opacity"})}),te.duration&&n.jsx("span",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded",children:B(te.duration)}),n.jsx("div",{className:"absolute top-2 left-2 bg-black/70 rounded-full p-1",title:`Knowledge: ${Ae(te.knowledge_status)}${te.techniques_count?` (${te.techniques_count} techniques)`:""}`,children:ue(te.knowledge_status)}),te.knowledge_status==="watched"&&te.techniques_count&&te.techniques_count>0&&n.jsxs(ae,{className:"absolute top-2 right-2 bg-green-500/90 hover:bg-green-600 text-white text-xs",onClick:We=>{We.stopPropagation(),oe(te)},children:[n.jsx(Mr,{className:"h-3 w-3 mr-1"}),te.techniques_count]})]}),n.jsxs(K,{className:"p-3 space-y-2",children:[n.jsx("h3",{className:"font-medium text-sm line-clamp-2",title:te.title,children:te.title}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsx("span",{className:"truncate max-w-[120px]",title:te.instructor_name,children:te.instructor_name||"Unknown"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kr,{className:"h-3 w-3 text-yellow-500"}),n.jsx("span",{children:te.quality_score?Number(te.quality_score).toFixed(1):"-"})]})]}),te.technique_name&&n.jsx(ae,{variant:"secondary",className:"text-xs truncate max-w-full",children:te.technique_name})]})]},te.id))})})]}),n.jsx(Ar,{open:!!p,onOpenChange:te=>!te&&y(null),children:n.jsxs(yr,{className:"max-w-4xl p-0 overflow-hidden",children:[n.jsxs(br,{className:"p-4 pb-2",children:[n.jsx(jr,{className:"pr-8 line-clamp-2",children:p==null?void 0:p.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground flex-wrap",children:[n.jsx("span",{children:p==null?void 0:p.instructor_name}),(p==null?void 0:p.technique_name)&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx(ae,{variant:"secondary",className:"text-xs",children:p==null?void 0:p.technique_name})]}),(p==null?void 0:p.quality_score)&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kr,{className:"h-3 w-3 text-yellow-500"}),n.jsx("span",{children:Number(p.quality_score).toFixed(1)})]})]}),n.jsx("span",{children:""}),n.jsxs("div",{className:"flex items-center gap-1",children:[ue(p==null?void 0:p.knowledge_status),n.jsx("span",{children:Ae(p==null?void 0:p.knowledge_status)})]}),(p==null?void 0:p.knowledge_status)==="pending"&&n.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>p&&$.mutate(p.id),disabled:$.isPending,"data-testid":"button-process-video",children:[$.isPending?n.jsx(qe,{className:"h-3 w-3 animate-spin"}):n.jsx(zl,{className:"h-3 w-3"}),n.jsx("span",{className:"ml-1",children:"Process"})]}),(p==null?void 0:p.knowledge_status)==="watched"&&n.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>p&&oe(p),"data-testid":"button-view-knowledge",children:[n.jsx(Mr,{className:"h-3 w-3 mr-1"}),"View Knowledge"]})]})]}),n.jsx("div",{className:"aspect-video w-full",children:p&&n.jsx("iframe",{src:`https://www.youtube.com/embed/${p.youtube_id}?autoplay=1&rel=0`,title:p.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}),n.jsx(Ar,{open:v,onOpenChange:b,children:n.jsxs(yr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsx(br,{children:n.jsxs(jr,{className:"flex items-center gap-2",children:[n.jsx(zl,{className:"h-5 w-5 text-purple-500"}),"Extracted Knowledge"]})}),x&&x.techniques.length>0?n.jsx("div",{className:"space-y-6",children:x.techniques.map((te,We)=>n.jsxs(W,{children:[n.jsxs(X,{className:"pb-2",children:[n.jsx(Z,{className:"text-lg",children:te.techniqueName}),te.positionContext&&n.jsx(ae,{variant:"outline",children:te.positionContext})]}),n.jsxs(K,{className:"space-y-4",children:[te.timestampStart&&n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx(Da,{className:"h-3 w-3 inline mr-1"}),te.timestampStart,te.timestampEnd?` - ${te.timestampEnd}`:""]}),te.keyConcepts&&te.keyConcepts.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm mb-2",children:"Key Concepts"}),n.jsx("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:te.keyConcepts.map((ut,F)=>n.jsx("li",{children:ut},F))})]}),te.instructorTips&&te.instructorTips.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm mb-2 text-green-600",children:"Instructor Tips"}),n.jsx("ul",{className:"list-disc list-inside text-sm space-y-1",children:te.instructorTips.map((ut,F)=>n.jsxs("li",{className:"text-green-600/80",children:['"',ut,'"']},F))})]}),te.commonMistakes&&te.commonMistakes.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm mb-2 text-red-500",children:"Common Mistakes"}),n.jsx("ul",{className:"list-disc list-inside text-sm space-y-1",children:te.commonMistakes.map((ut,F)=>n.jsx("li",{className:"text-red-500/80",children:ut},F))})]}),te.fullSummary&&n.jsx("div",{className:"pt-2 border-t",children:n.jsx("p",{className:"text-sm text-muted-foreground italic",children:te.fullSummary})})]})]},We))}):n.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No knowledge extracted yet"})]})})]})}const qh=jd("Browser",{web:()=>yh(()=>import("./web-BGFnGfe5.js"),[]).then(e=>new e.BrowserWeb)});function v0e(e){if(!e)return 0;if(typeof e=="number")return e;const t=e.split(":").map(Number);return t.length===2?t[0]*60+t[1]:t.length===3?t[0]*3600+t[1]*60+t[2]:0}function pl({videoId:e,startTime:t=0,title:r,instructor:i,onClose:a}){const s=v0e(t),o=Us.isNativePlatform(),[l,c]=g.useState(!1),d=o?`/youtube-proxy.html?v=${e}&start=${s}`:`https://www.youtube.com/embed/${e}?start=${s}&rel=0&modestbranding=1&autoplay=1&playsinline=1`,u=`https://www.youtube.com/watch?v=${e}${s>0?`&t=${s}s`:""}`,f=async()=>{try{await qh.open({url:u}),a()}catch(y){console.error("Failed to open browser:",y),window.open(u,"_blank")}};g.useEffect(()=>{const y=v=>{v.key==="Escape"&&a()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[a]);const h=y=>{y.target===y.currentTarget&&a()},p=()=>{c(!0)};return n.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4","data-testid":"video-player-modal",onClick:h,onTouchEnd:h,children:n.jsxs("div",{className:"w-full max-w-4xl",children:[n.jsxs("div",{className:"bg-sidebar p-4 rounded-t-lg flex justify-between items-center gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-foreground font-semibold truncate","data-testid":"video-player-title",children:r}),n.jsx("p",{className:"text-muted-foreground text-sm truncate","data-testid":"video-player-instructor",children:i})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[o&&n.jsx(Q,{variant:"ghost",size:"icon",onClick:f,title:"Open in YouTube","data-testid":"button-open-external",children:n.jsx(Mc,{className:"w-5 h-5"})}),n.jsx(Q,{variant:"ghost",size:"icon",onClick:a,"data-testid":"button-close-video",children:n.jsx(Fi,{className:"w-5 h-5"})})]})]}),n.jsx("div",{className:"relative bg-black",style:{paddingBottom:"56.25%"},children:l?n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white p-4 text-center",children:[n.jsx("p",{className:"mb-4",children:"Video playback unavailable in app."}),n.jsxs(Q,{onClick:f,variant:"outline",children:[n.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Open in YouTube"]})]}):n.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:d,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,referrerPolicy:"strict-origin-when-cross-origin",onError:p,"data-testid":"video-iframe"})})]})})}function y0e(){const{toast:e}=rt(),[t,r]=g.useState(null),[i,a]=g.useState(!1),{data:s}=he({queryKey:["/api/admin/feedback/stats"],queryFn:()=>Ie("/api/admin/feedback/stats")}),{data:o=[]}=he({queryKey:["/api/admin/feedback/flagged"],queryFn:()=>Ie("/api/admin/feedback/flagged")}),{data:l=[]}=he({queryKey:["/api/admin/feedback/top-tier"],queryFn:()=>Ie("/api/admin/feedback/top-tier")}),c=Ve({mutationFn:async f=>Ie(`/api/admin/feedback/remove-video/${f}`,"POST"),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/feedback/flagged"]}),Te.invalidateQueries({queryKey:["/api/admin/feedback/stats"]}),e({title:"Video removed",description:"Video has been removed from the library"})}}),d=Ve({mutationFn:async f=>Ie(`/api/admin/feedback/approve-video/${f}`,"POST"),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/feedback/flagged"]}),e({title:"Video approved",description:"Video has been approved and returned to active status"})}}),u=f=>{r(f),a(!0)};return n.jsx(qt,{children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Feedback Analytics"}),n.jsx("p",{className:"text-muted-foreground",children:"Monitor user feedback and manage video quality"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(W,{"data-testid":"card-total-feedback",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Feedback"}),n.jsx(Sa,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.totalFeedback)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"All time user feedback"})]})]}),n.jsxs(W,{"data-testid":"card-helpful-ratio",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Avg Helpful Ratio"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s!=null&&s.avgHelpfulRatio?`${Math.round(s.avgHelpfulRatio*100)}%`:"0%"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Videos with 50+ votes"})]})]}),n.jsxs(W,{"data-testid":"card-videos-removed",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Videos Removed"}),n.jsx(Go,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.videosRemoved)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Due to quality issues"})]})]}),n.jsxs(W,{"data-testid":"card-top-tier",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Top Tier Videos"}),n.jsx(ql,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.topTierVideos)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"85%+ helpful, 100+ votes"})]})]})]}),n.jsxs(cl,{defaultValue:"flagged",className:"space-y-4",children:[n.jsxs(io,{children:[n.jsxs(er,{value:"flagged","data-testid":"tab-flagged",children:[n.jsx($s,{className:"h-4 w-4 mr-2"}),"Flagged Videos (",o.length,")"]}),n.jsxs(er,{value:"top-tier","data-testid":"tab-top-tier",children:[n.jsx(ql,{className:"h-4 w-4 mr-2"}),"Top Tier (",l.length,")"]})]}),n.jsx(tr,{value:"flagged",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Flagged for Review"}),n.jsx(Be,{children:"Videos with context issues (wrong recommendation, too advanced/basic) - Review and take action"})]}),n.jsx(K,{children:o.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx($n,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No flagged videos - all content looks good!"})]}):n.jsx("div",{className:"space-y-4",children:o.map(f=>n.jsx("div",{className:"flex items-start gap-4 p-4 border rounded-lg","data-testid":`flagged-video-${f.id}`,children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:f.title}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.instructor,"  ",f.technique_name]})]}),n.jsxs(ae,{variant:"outline",className:"ml-2",children:[Math.round((f.helpful_ratio||0)*100),"% helpful"]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Sa,{className:"h-3 w-3"}),f.total_votes||0," votes"]}),n.jsxs("span",{children:["Quality: ",f.quality_score||0,"/10"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Q,{size:"sm",variant:"outline",onClick:()=>u(f),"data-testid":`button-play-${f.id}`,children:"Play Video"}),n.jsxs(Q,{size:"sm",variant:"default",onClick:()=>d.mutate(f.id),disabled:d.isPending,"data-testid":`button-approve-${f.id}`,children:[n.jsx($n,{className:"h-4 w-4 mr-1"}),"Approve"]}),n.jsxs(Q,{size:"sm",variant:"destructive",onClick:()=>{confirm(`Remove "${f.title}" from library?`)&&c.mutate(f.id)},disabled:c.isPending,"data-testid":`button-remove-${f.id}`,children:[n.jsx(to,{className:"h-4 w-4 mr-1"}),"Remove"]})]})]})},f.id))})})]})}),n.jsx(tr,{value:"top-tier",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Top Tier Videos"}),n.jsx(Be,{children:"Highest quality content (85%+ helpful ratio, 100+ votes)"})]}),n.jsx(K,{children:l.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(ql,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No top tier videos yet - need 100+ votes and 85%+ helpful ratio"})]}):n.jsx("div",{className:"space-y-4",children:l.map(f=>n.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg bg-accent/10","data-testid":`top-tier-video-${f.id}`,children:[n.jsx(ql,{className:"h-6 w-6 text-primary mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:f.title}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.instructor,"  ",f.technique_name]})]}),n.jsxs(ae,{variant:"default",className:"ml-2",children:[Math.round((f.helpful_ratio||0)*100),"% helpful"]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Sa,{className:"h-3 w-3"}),f.total_votes||0," votes"]}),n.jsxs("span",{children:["Quality: ",f.quality_score||0,"/10"]})]}),n.jsx(Q,{size:"sm",variant:"outline",onClick:()=>u(f),"data-testid":`button-play-top-${f.id}`,children:"Play Video"})]})]},f.id))})})]})})]}),i&&t&&n.jsx(pl,{videoId:t.youtube_video_id,startTime:t.key_detail_timestamp,title:t.title||t.technique_name,instructor:t.instructor,onClose:()=>{a(!1),r(null)}})]})})}function _t(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ha(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function b0e(e,t){const r=_t(e);return isNaN(t)?Ha(e,NaN):(r.setDate(r.getDate()+t),r)}const A3=6048e5,j0e=864e5,Im=43200,bT=1440;let w0e={};function Uh(){return w0e}function ch(e,t){var l,c,d,u;const r=Uh(),i=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=_t(e),s=a.getDay(),o=(s<i?7:0)+s-i;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ex(e){return ch(e,{weekStartsOn:1})}function E3(e){const t=_t(e),r=t.getFullYear(),i=Ha(e,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=ex(i),s=Ha(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=ex(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function tx(e){const t=_t(e);return t.setHours(0,0,0,0),t}function rx(e){const t=_t(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function SS(e,t){const r=tx(e),i=tx(t),a=+r-rx(r),s=+i-rx(i);return Math.round((a-s)/j0e)}function N0e(e){const t=E3(e),r=Ha(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ex(r)}function sp(e,t){const r=_t(e),i=_t(t),a=r.getTime()-i.getTime();return a<0?-1:a>0?1:a}function kS(e){return Ha(e,Date.now())}function P3(e,t){const r=tx(e),i=tx(t);return+r==+i}function S0e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function T3(e){if(!S0e(e)&&typeof e!="number")return!1;const t=_t(e);return!isNaN(Number(t))}function k0e(e,t){const r=_t(e),i=_t(t),a=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return a*12+s}function C0e(e){return t=>{const i=(e?Math[e]:Math.trunc)(t);return i===0?0:i}}function A0e(e,t){return+_t(e)-+_t(t)}function E0e(e){const t=_t(e);return t.setHours(23,59,59,999),t}function P0e(e){const t=_t(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function T0e(e){const t=_t(e);return+E0e(t)==+P0e(t)}function O0e(e,t){const r=_t(e),i=_t(t),a=sp(r,i),s=Math.abs(k0e(r,i));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*s);let l=sp(r,i)===-a;T0e(_t(e))&&s===1&&sp(e,i)===1&&(l=!1),o=a*(s-Number(l))}return o===0?0:o}function _0e(e,t,r){const i=A0e(e,t)/1e3;return C0e(r==null?void 0:r.roundingMethod)(i)}function I0e(e){const t=_t(e),r=Ha(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const R0e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},M0e=(e,t,r)=>{let i;const a=R0e[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function fb(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const $0e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},F0e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},D0e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},L0e={date:fb({formats:$0e,defaultWidth:"full"}),time:fb({formats:F0e,defaultWidth:"full"}),dateTime:fb({formats:D0e,defaultWidth:"full"})},B0e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},z0e=(e,t,r,i)=>B0e[e];function fu(e){return(t,r)=>{const i=r!=null&&r.context?String(r.context):"standalone";let a;if(i==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const q0e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U0e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},V0e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},W0e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},H0e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},K0e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},G0e=(e,t)=>{const r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Y0e={ordinalNumber:G0e,era:fu({values:q0e,defaultWidth:"wide"}),quarter:fu({values:U0e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fu({values:V0e,defaultWidth:"wide"}),day:fu({values:W0e,defaultWidth:"wide"}),dayPeriod:fu({values:H0e,defaultWidth:"wide",formattingValues:K0e,defaultFormattingWidth:"wide"})};function hu(e){return(t,r={})=>{const i=r.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?J0e(l,f=>f.test(o)):Q0e(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function Q0e(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function J0e(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function X0e(e){return(t,r={})=>{const i=t.match(e.matchPattern);if(!i)return null;const a=i[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const Z0e=/^(\d+)(th|st|nd|rd)?/i,eje=/\d+/i,tje={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rje={any:[/^b/i,/^(a|c)/i]},nje={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ije={any:[/1/i,/2/i,/3/i,/4/i]},aje={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sje={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oje={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lje={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cje={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dje={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uje={ordinalNumber:X0e({matchPattern:Z0e,parsePattern:eje,valueCallback:e=>parseInt(e,10)}),era:hu({matchPatterns:tje,defaultMatchWidth:"wide",parsePatterns:rje,defaultParseWidth:"any"}),quarter:hu({matchPatterns:nje,defaultMatchWidth:"wide",parsePatterns:ije,defaultParseWidth:"any",valueCallback:e=>e+1}),month:hu({matchPatterns:aje,defaultMatchWidth:"wide",parsePatterns:sje,defaultParseWidth:"any"}),day:hu({matchPatterns:oje,defaultMatchWidth:"wide",parsePatterns:lje,defaultParseWidth:"any"}),dayPeriod:hu({matchPatterns:cje,defaultMatchWidth:"any",parsePatterns:dje,defaultParseWidth:"any"})},O3={code:"en-US",formatDistance:M0e,formatLong:L0e,formatRelative:z0e,localize:Y0e,match:uje,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fje(e){const t=_t(e);return SS(t,I0e(t))+1}function hje(e){const t=_t(e),r=+ex(t)-+N0e(t);return Math.round(r/A3)+1}function _3(e,t){var u,f,h,p;const r=_t(e),i=r.getFullYear(),a=Uh(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(h=a.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=Ha(e,0);o.setFullYear(i+1,0,s),o.setHours(0,0,0,0);const l=ch(o,t),c=Ha(e,0);c.setFullYear(i,0,s),c.setHours(0,0,0,0);const d=ch(c,t);return r.getTime()>=l.getTime()?i+1:r.getTime()>=d.getTime()?i:i-1}function mje(e,t){var l,c,d,u;const r=Uh(),i=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=_3(e,t),s=Ha(e,0);return s.setFullYear(a,0,i),s.setHours(0,0,0,0),ch(s,t)}function pje(e,t){const r=_t(e),i=+ch(r,t)-+mje(r,t);return Math.round(i/A3)+1}function Et(e,t){const r=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return r+i}const ts={y(e,t){const r=e.getFullYear(),i=r>0?r:1-r;return Et(t==="yy"?i%100:i,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Et(r+1,2)},d(e,t){return Et(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Et(e.getHours()%12||12,t.length)},H(e,t){return Et(e.getHours(),t.length)},m(e,t){return Et(e.getMinutes(),t.length)},s(e,t){return Et(e.getSeconds(),t.length)},S(e,t){const r=t.length,i=e.getMilliseconds(),a=Math.trunc(i*Math.pow(10,r-3));return Et(a,t.length)}},Al={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jT={G:function(e,t,r){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const i=e.getFullYear(),a=i>0?i:1-i;return r.ordinalNumber(a,{unit:"year"})}return ts.y(e,t)},Y:function(e,t,r,i){const a=_3(e,i),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return Et(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):Et(s,t.length)},R:function(e,t){const r=E3(e);return Et(r,t.length)},u:function(e,t){const r=e.getFullYear();return Et(r,t.length)},Q:function(e,t,r){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Et(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Et(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){const i=e.getMonth();switch(t){case"M":case"MM":return ts.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Et(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){const a=pje(e,i);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Et(a,t.length)},I:function(e,t,r){const i=hje(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):Et(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ts.d(e,t)},D:function(e,t,r){const i=fje(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Et(i,t.length)},E:function(e,t,r){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){const a=e.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Et(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){const a=e.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Et(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const i=e.getDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return Et(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const i=e.getHours();let a;switch(i===12?a=Al.noon:i===0?a=Al.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const i=e.getHours();let a;switch(i>=17?a=Al.evening:i>=12?a=Al.afternoon:i>=4?a=Al.morning:a=Al.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return ts.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ts.H(e,t)},K:function(e,t,r){const i=e.getHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Et(i,t.length)},k:function(e,t,r){let i=e.getHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):Et(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ts.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ts.s(e,t)},S:function(e,t){return ts.S(e,t)},X:function(e,t,r){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return NT(i);case"XXXX":case"XX":return yo(i);case"XXXXX":case"XXX":default:return yo(i,":")}},x:function(e,t,r){const i=e.getTimezoneOffset();switch(t){case"x":return NT(i);case"xxxx":case"xx":return yo(i);case"xxxxx":case"xxx":default:return yo(i,":")}},O:function(e,t,r){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+wT(i,":");case"OOOO":default:return"GMT"+yo(i,":")}},z:function(e,t,r){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+wT(i,":");case"zzzz":default:return"GMT"+yo(i,":")}},t:function(e,t,r){const i=Math.trunc(e.getTime()/1e3);return Et(i,t.length)},T:function(e,t,r){const i=e.getTime();return Et(i,t.length)}};function wT(e,t=""){const r=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),s=i%60;return s===0?r+String(a):r+String(a)+t+Et(s,2)}function NT(e,t){return e%60===0?(e>0?"-":"+")+Et(Math.abs(e)/60,2):yo(e,t)}function yo(e,t=""){const r=e>0?"-":"+",i=Math.abs(e),a=Et(Math.trunc(i/60),2),s=Et(i%60,2);return r+a+t+s}const ST=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},I3=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},gje=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return ST(e,t);let s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",ST(i,t)).replace("{{time}}",I3(a,t))},xje={p:I3,P:gje},vje=/^D+$/,yje=/^Y+$/,bje=["D","DD","YY","YYYY"];function jje(e){return vje.test(e)}function wje(e){return yje.test(e)}function Nje(e,t,r){const i=Sje(e,t,r);if(console.warn(i),bje.includes(e))throw new RangeError(i)}function Sje(e,t,r){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kje=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cje=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Aje=/^'([^]*?)'?$/,Eje=/''/g,Pje=/[a-zA-Z]/;function vn(e,t,r){var u,f,h,p;const i=Uh(),a=i.locale??O3,s=i.firstWeekContainsDate??((f=(u=i.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,o=i.weekStartsOn??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,l=_t(e);if(!T3(l))throw new RangeError("Invalid time value");let c=t.match(Cje).map(y=>{const v=y[0];if(v==="p"||v==="P"){const b=xje[v];return b(y,a.formatLong)}return y}).join("").match(kje).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:Tje(y)};if(jT[v])return{isToken:!0,value:y};if(v.match(Pje))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const v=y.value;(wje(v)||jje(v))&&Nje(v,t,String(e));const b=jT[v[0]];return b(l,v,a.localize,d)}).join("")}function Tje(e){const t=e.match(Aje);return t?t[1].replace(Eje,"'"):e}function Oje(e,t,r){const i=Uh(),a=(r==null?void 0:r.locale)??i.locale??O3,s=2520,o=sp(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,d;o>0?(c=_t(t),d=_t(e)):(c=_t(e),d=_t(t));const u=_0e(d,c),f=(rx(d)-rx(c))/1e3,h=Math.round((u-f)/60);let p;if(h<2)return r!=null&&r.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):h===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",h,l);if(h<45)return a.formatDistance("xMinutes",h,l);if(h<90)return a.formatDistance("aboutXHours",1,l);if(h<bT){const y=Math.round(h/60);return a.formatDistance("aboutXHours",y,l)}else{if(h<s)return a.formatDistance("xDays",1,l);if(h<Im){const y=Math.round(h/bT);return a.formatDistance("xDays",y,l)}else if(h<Im*2)return p=Math.round(h/Im),a.formatDistance("aboutXMonths",p,l)}if(p=O0e(d,c),p<12){const y=Math.round(h/Im);return a.formatDistance("xMonths",y,l)}else{const y=p%12,v=Math.trunc(p/12);return y<3?a.formatDistance("aboutXYears",v,l):y<9?a.formatDistance("overXYears",v,l):a.formatDistance("almostXYears",v+1,l)}}function Hl(e,t){return Oje(e,kS(e),t)}function _je(e){return P3(e,kS(e))}function Ije(e,t){return b0e(e,-t)}function Rje(e){return P3(e,Ije(kS(e),1))}function Mje(){const{toast:e}=rt(),[t,r]=g.useState(null),[i,a]=g.useState(!1),{data:s,isLoading:o}=he({queryKey:["/api/admin/meta/stats"],queryFn:()=>Ie("/api/admin/meta/stats")}),{data:l,isLoading:c}=he({queryKey:["/api/admin/meta/trending"],queryFn:()=>Ie("/api/admin/meta/trending")}),{data:d,isLoading:u,refetch:f}=he({queryKey:["/api/admin/meta/priorities"],queryFn:()=>Ie("/api/admin/meta/priorities")}),{data:h,isLoading:p}=he({queryKey:["/api/admin/meta/requests"],queryFn:()=>Ie("/api/admin/meta/requests")}),y=async x=>{r(x);try{const m=await Ie("/api/admin/meta/curate","POST",{technique:x,maxResults:10});m.success&&(e({title:"Curation Started",description:`Found ${m.curatedCount} videos for ${x}`}),f())}catch(m){e({title:"Curation Failed",description:m.message,variant:"destructive"})}finally{r(null)}},v=async()=>{a(!0);try{await Ie("/api/admin/meta/analyze","POST"),e({title:"Analysis Started",description:"Meta analysis running in background"})}catch(x){e({title:"Analysis Failed",description:x.message,variant:"destructive"})}finally{a(!1)}},b=x=>{const m={hot:{variant:"destructive",icon:sr,label:"HOT"},rising:{variant:"default",icon:sr,label:"RISING"},cooling:{variant:"secondary",icon:$7,label:"COOLING"},stable:{variant:"outline",icon:Fo,label:"STABLE"}},j=m[x]||m.stable,N=j.icon;return n.jsxs(ae,{variant:j.variant,className:"gap-1",children:[n.jsx(N,{className:"h-3 w-3"}),j.label]})};return n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Meta Insights Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Automated technique trend tracking and curation prioritization"})]}),n.jsxs(Q,{onClick:v,disabled:i,"data-testid":"button-run-analysis",children:[n.jsx(Fo,{className:"mr-2 h-4 w-4"}),i?"Analyzing...":"Run Analysis"]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Techniques Tracked"}),n.jsx(bn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-techniques-tracked",children:o?"...":(s==null?void 0:s.totalTechniquesTracked)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"User Requests (7d)"}),n.jsx(Fo,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-user-requests",children:o?"...":(s==null?void 0:s.userRequestsLast7Days)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Need Curation"}),n.jsx(In,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-needs-curation",children:o?"...":(s==null?void 0:s.techniquesNeedingCuration)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Videos in Library"}),n.jsx(cf,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-videos",children:o?"...":(s==null?void 0:s.totalVideosInLibrary)||0})})]})]}),n.jsxs(cl,{defaultValue:"trending",className:"space-y-4",children:[n.jsxs(io,{children:[n.jsx(er,{value:"trending","data-testid":"tab-trending",children:"Trending Techniques"}),n.jsx(er,{value:"priorities","data-testid":"tab-priorities",children:"Curation Priorities"}),n.jsx(er,{value:"requests","data-testid":"tab-requests",children:"User Requests"})]}),n.jsx(tr,{value:"trending",className:"space-y-4",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Trending Techniques"}),n.jsx(Be,{children:"Techniques with hot or rising meta status based on user requests and competition data"})]}),n.jsx(K,{children:c?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):((l==null?void 0:l.techniques.length)||0)===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No trending techniques yet"}):n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Technique"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{children:"Meta Score"}),n.jsx(Y,{children:"User Score"}),n.jsx(Y,{children:"Comp Score"}),n.jsx(Y,{children:"Videos"}),n.jsx(Y,{children:"Coverage"})]})}),n.jsx(Ct,{children:l==null?void 0:l.techniques.map(x=>n.jsxs(Se,{children:[n.jsx(V,{className:"font-medium capitalize",children:x.techniqueName}),n.jsx(V,{children:b(x.metaStatus)}),n.jsx(V,{children:Number(x.overallMetaScore).toFixed(1)}),n.jsx(V,{children:Number(x.userRequestScore).toFixed(1)}),n.jsx(V,{children:Number(x.competitionMetaScore).toFixed(1)}),n.jsx(V,{children:x.videosInLibrary}),n.jsx(V,{children:x.coverageAdequate?n.jsx(ae,{variant:"outline",children:"Adequate"}):n.jsx(ae,{variant:"secondary",children:"Needs More"})})]},x.techniqueName))})]})})]})}),n.jsx(tr,{value:"priorities",className:"space-y-4",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Curation Priorities"}),n.jsx(Be,{children:"High-priority techniques needing video curation"})]}),n.jsx(K,{children:u?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):((d==null?void 0:d.priorities.length)||0)===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No priorities at the moment"}):n.jsx("div",{className:"space-y-4",children:d==null?void 0:d.priorities.map(x=>{var m;return n.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold capitalize text-lg",children:x.techniqueName}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Priority: ",x.curationPriority,"/10 | Meta Score: ",Number(x.overallMetaScore).toFixed(1)," | Videos: ",x.videosInLibrary]})]}),n.jsx(Q,{size:"sm",onClick:()=>y(x.techniqueName),disabled:t===x.techniqueName,"data-testid":`button-curate-${x.techniqueName}`,children:t===x.techniqueName?"Curating...":"Curate Now"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(m=x.suggestedSearches)==null?void 0:m.map((j,N)=>n.jsx(ae,{variant:"outline",className:"text-xs",children:j},N))})]},x.techniqueName)})})})]})}),n.jsx(tr,{value:"requests",className:"space-y-4",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Recent User Technique Requests"}),n.jsx(Be,{children:"Techniques users are asking about in chat"})]}),n.jsx(K,{children:p?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):((h==null?void 0:h.requests.length)||0)===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No requests yet"}):n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Technique"}),n.jsx(Y,{children:"Type"}),n.jsx(Y,{children:"Belt"}),n.jsx(Y,{children:"Gi/NoGi"}),n.jsx(Y,{children:"Context"}),n.jsx(Y,{children:"When"})]})}),n.jsx(Ct,{children:h==null?void 0:h.requests.slice(0,20).map(x=>n.jsxs(Se,{children:[n.jsx(V,{className:"font-medium capitalize",children:x.techniqueMentioned}),n.jsx(V,{children:x.requestType?n.jsx(ae,{variant:"outline",children:x.requestType.replace("_"," ")}):"-"}),n.jsx(V,{children:x.beltLevel||"-"}),n.jsx(V,{children:x.giPreference||"-"}),n.jsx(V,{className:"max-w-md truncate text-sm text-muted-foreground",children:x.requestContext}),n.jsx(V,{className:"text-sm text-muted-foreground",children:Hl(new Date(x.requestedAt),{addSuffix:!0})})]},x.id))})]})})]})})]})]})})}function $je(){const[e,t]=g.useState(""),[r,i]=g.useState(""),[a,s]=g.useState(!1),{toast:o}=rt(),l=Ve({mutationFn:async u=>await Ie("/api/admin/magic-link/generate",{method:"POST",body:{phoneNumber:u}}),onSuccess:u=>{i(u.magicLink),o({title:"Magic Link Generated!",description:`Link created for ${u.phoneNumber}. Expires in 7 days.`})},onError:u=>{o({title:"Error",description:u.message||"Failed to generate magic link",variant:"destructive"})}}),c=()=>{if(!e.trim()){o({title:"Phone Required",description:"Please enter a phone number",variant:"destructive"});return}i(""),s(!1),l.mutate(e)},d=async()=>{await navigator.clipboard.writeText(r),s(!0),o({title:"Copied!",description:"Magic link copied to clipboard"}),setTimeout(()=>s(!1),2e3)};return n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold",children:"Magic Link Generator"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate beta access links for testing"})]}),n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"phone-input",children:"Phone Number"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(je,{id:"phone-input",type:"tel",placeholder:"(914) 837-3750 or 9148373750",value:e,onChange:u=>t(u.target.value),onKeyDown:u=>u.key==="Enter"&&c(),disabled:l.isPending,"data-testid":"input-phone-number",className:"flex-1"}),n.jsx(Q,{onClick:c,disabled:l.isPending,"data-testid":"button-generate-link",children:l.isPending?n.jsx(n.Fragment,{children:"Generating..."}):n.jsxs(n.Fragment,{children:[n.jsx(b7,{className:"w-4 h-4 mr-2"}),"Generate Link"]})})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Accepts formats: (914) 837-3750, 9148373750, +19148373750"})]}),r&&n.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[n.jsx(Ii,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:"Link Generated Successfully!"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Magic Link"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(je,{value:r,readOnly:!0,"data-testid":"text-magic-link",className:"font-mono text-sm"}),n.jsx(Q,{variant:"outline",size:"icon",onClick:d,"data-testid":"button-copy-link",children:a?n.jsx(Ii,{className:"w-4 h-4 text-green-600"}):n.jsx(Rp,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[n.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[n.jsx(Fc,{className:"w-4 h-4"}),"Next Steps"]}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Copy the link above"}),n.jsxs("li",{children:["Text it to the beta tester at ",e]}),n.jsx("li",{children:"They click the link  instant access + auto-login"}),n.jsx("li",{children:"Link expires after first use or 7 days"}),n.jsx("li",{children:"Grants lifetime access to the platform"})]})]})]})]})}),n.jsx(W,{className:"p-6 bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-900",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"How Magic Links Work"}),n.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"For Beta Launch:"})," No SMS verification needed - just magic links!"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[n.jsx("li",{children:"Generate a unique link for each beta tester"}),n.jsx("li",{children:"Text them the link personally"}),n.jsx("li",{children:"They click  auto-login with lifetime access"}),n.jsx("li",{children:"No phone verification codes needed"}),n.jsx("li",{children:"Full control over who gets access"})]})]})]})})]})})}var R3=["PageUp","PageDown"],M3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$3={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},qd="Slider",[jw,Fje,Dje]=kx(qd),[F3,hNe]=jn(qd,[Dje]),[Lje,$v]=F3(qd),D3=g.forwardRef((e,t)=>{const{name:r,min:i=0,max:a=100,step:s=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[i],value:u,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:y,...v}=e,b=g.useRef(new Set),x=g.useRef(0),j=o==="horizontal"?Bje:zje,[N=[],w]=ra({prop:u,defaultProp:d,onChange:T=>{var _;(_=[...b.current][x.current])==null||_.focus(),f(T)}}),S=g.useRef(N);function C(T){const P=Hje(N,T);E(T,P)}function k(T){E(T,x.current)}function A(){const T=S.current[x.current];N[x.current]!==T&&h(N)}function E(T,P,{commit:_}={commit:!1}){const R=Qje(s),O=Jje(Math.round((T-i)/s)*s+i,R),$=yf(O,[i,a]);w((M=[])=>{const I=Vje(M,$,P);if(Yje(I,c*s)){x.current=I.indexOf($);const L=String(I)!==String(M);return L&&_&&h(I),L?I:M}else return M})}return n.jsx(Lje,{scope:e.__scopeSlider,name:r,disabled:l,min:i,max:a,valueIndexToChangeRef:x,thumbs:b.current,values:N,orientation:o,form:y,children:n.jsx(jw.Provider,{scope:e.__scopeSlider,children:n.jsx(jw.Slot,{scope:e.__scopeSlider,children:n.jsx(j,{"aria-disabled":l,"data-disabled":l?"":void 0,...v,ref:t,onPointerDown:Re(v.onPointerDown,()=>{l||(S.current=N)}),min:i,max:a,inverted:p,onSlideStart:l?void 0:C,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:A,onHomeKeyDown:()=>!l&&E(i,0,{commit:!0}),onEndKeyDown:()=>!l&&E(a,N.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:P})=>{if(!l){const O=R3.includes(T.key)||T.shiftKey&&M3.includes(T.key)?10:1,$=x.current,M=N[$],I=s*O*P;E(M+I,$,{commit:!0})}}})})})})});D3.displayName=qd;var[L3,B3]=F3(qd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Bje=g.forwardRef((e,t)=>{const{min:r,max:i,dir:a,inverted:s,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[f,h]=g.useState(null),p=at(t,j=>h(j)),y=g.useRef(void 0),v=Sh(a),b=v==="ltr",x=b&&!s||!b&&s;function m(j){const N=y.current||f.getBoundingClientRect(),w=[0,N.width],C=CS(w,x?[r,i]:[i,r]);return y.current=N,C(j-N.left)}return n.jsx(L3,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:n.jsx(z3,{dir:v,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const N=m(j.clientX);o==null||o(N)},onSlideMove:j=>{const N=m(j.clientX);l==null||l(N)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:j=>{const w=$3[x?"from-left":"from-right"].includes(j.key);d==null||d({event:j,direction:w?-1:1})}})})}),zje=g.forwardRef((e,t)=>{const{min:r,max:i,inverted:a,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=g.useRef(null),f=at(t,u),h=g.useRef(void 0),p=!a;function y(v){const b=h.current||u.current.getBoundingClientRect(),x=[0,b.height],j=CS(x,p?[i,r]:[r,i]);return h.current=b,j(v-b.top)}return n.jsx(L3,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:n.jsx(z3,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const b=y(v.clientY);s==null||s(b)},onSlideMove:v=>{const b=y(v.clientY);o==null||o(b)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:v=>{const x=$3[p?"from-bottom":"from-top"].includes(v.key);c==null||c({event:v,direction:x?-1:1})}})})}),z3=g.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:i,onSlideMove:a,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=$v(qd,r);return n.jsx(Ue.span,{...d,ref:t,onKeyDown:Re(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):R3.concat(M3).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:Re(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(h)?h.focus():i(f)}),onPointerMove:Re(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:Re(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),s(f))})})}),q3="SliderTrack",U3=g.forwardRef((e,t)=>{const{__scopeSlider:r,...i}=e,a=$v(q3,r);return n.jsx(Ue.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...i,ref:t})});U3.displayName=q3;var ww="SliderRange",V3=g.forwardRef((e,t)=>{const{__scopeSlider:r,...i}=e,a=$v(ww,r),s=B3(ww,r),o=g.useRef(null),l=at(t,o),c=a.values.length,d=a.values.map(h=>H3(h,a.min,a.max)),u=c>1?Math.min(...d):0,f=100-Math.max(...d);return n.jsx(Ue.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...i,ref:l,style:{...e.style,[s.startEdge]:u+"%",[s.endEdge]:f+"%"}})});V3.displayName=ww;var Nw="SliderThumb",W3=g.forwardRef((e,t)=>{const r=Fje(e.__scopeSlider),[i,a]=g.useState(null),s=at(t,l=>a(l)),o=g.useMemo(()=>i?r().findIndex(l=>l.ref.current===i):-1,[r,i]);return n.jsx(qje,{...e,ref:s,index:o})}),qje=g.forwardRef((e,t)=>{const{__scopeSlider:r,index:i,name:a,...s}=e,o=$v(Nw,r),l=B3(Nw,r),[c,d]=g.useState(null),u=at(t,m=>d(m)),f=c?o.form||!!c.closest("form"):!0,h=Rx(c),p=o.values[i],y=p===void 0?0:H3(p,o.min,o.max),v=Wje(i,o.values.length),b=h==null?void 0:h[l.size],x=b?Kje(b,y,l.direction):0;return g.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${y}% + ${x}px)`},children:[n.jsx(jw.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(Ue.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:e.style,onFocus:Re(e.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),f&&n.jsx(Uje,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});W3.displayName=Nw;var Uje=e=>{const{value:t,...r}=e,i=g.useRef(null),a=Ux(t);return g.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(a!==t&&c){const d=new Event("input",{bubbles:!0});c.call(s,t),s.dispatchEvent(d)}},[a,t]),n.jsx("input",{style:{display:"none"},...r,ref:i,defaultValue:t})};function Vje(e=[],t,r){const i=[...e];return i[r]=t,i.sort((a,s)=>a-s)}function H3(e,t,r){const s=100/(r-t)*(e-t);return yf(s,[0,100])}function Wje(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Hje(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),i=Math.min(...r);return r.indexOf(i)}function Kje(e,t,r){const i=e/2,s=CS([0,50],[0,i]);return(i-s(t)*r)*r}function Gje(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function Yje(e,t){if(t>0){const r=Gje(e);return Math.min(...r)>=t}return!0}function CS(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const i=(t[1]-t[0])/(e[1]-e[0]);return t[0]+i*(r-e[0])}}function Qje(e){return(String(e).split(".")[1]||"").length}function Jje(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var K3=D3,Xje=U3,Zje=V3,ewe=W3;const Uu=g.forwardRef(({className:e,...t},r)=>n.jsxs(K3,{ref:r,className:we("relative flex w-full touch-none select-none items-center",e),...t,children:[n.jsx(Xje,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:n.jsx(Zje,{className:"absolute h-full bg-primary"})}),n.jsx(ewe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Uu.displayName=K3.displayName;function twe(){var R;const{toast:e}=rt(),[t,r]=g.useState(""),[i,a]=g.useState("all"),[s,o]=g.useState("all"),[l,c]=g.useState(!1),[d,u]=g.useState(null),[f,h]=g.useState(!1),[p,y]=g.useState({feature_level:1,search_boost:0,recommendation_boost:0,homepage_featured:!1,partnership_status:"regular"}),{data:v}=he({queryKey:["/api/admin/instructors/stats"],queryFn:()=>Ie("/api/admin/instructors/stats")}),{data:b,isLoading:x}=he({queryKey:["/api/admin/instructors",i,s],queryFn:async()=>{const O=new URLSearchParams;i&&i!=="all"&&O.append("tier",i),s==="needs_review"?O.append("needs_review","true"):s==="auto_discovered"&&O.append("auto_discovered","true");const $=`/api/admin/instructors?${O.toString()}`;return Ie($)}}),{data:m}=he({queryKey:["/api/admin/instructors/balance-report"],queryFn:()=>Ie("/api/admin/instructors/balance-report")}),j=Ve({mutationFn:async O=>{if(!d)throw new Error("No instructor selected");return Ie(`/api/admin/instructors/${d.id}`,"PATCH",O)},onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/instructors"]}),Te.invalidateQueries({queryKey:["/api/admin/instructors/stats"]}),c(!1),e({title:"Promotion updated",description:"Instructor promotion settings saved successfully"})},onError:O=>{e({variant:"destructive",title:"Update failed",description:O.message})}}),N=Ve({mutationFn:async O=>{if(!d)throw new Error("No instructor selected");return Ie(`/api/admin/instructors/${d.id}/review`,"POST",O)},onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/instructors"]}),Te.invalidateQueries({queryKey:["/api/admin/instructors/stats"]}),h(!1),e({title:"Review completed",description:"Instructor review saved successfully"})},onError:O=>{e({variant:"destructive",title:"Review failed",description:O.message})}}),w=O=>{u(O),y({feature_level:O.featureLevel||O.feature_level||1,search_boost:O.searchBoost||O.search_boost||0,recommendation_boost:O.recommendationBoost||O.recommendation_boost||0,homepage_featured:O.homepageFeatured||O.homepage_featured||!1,partnership_status:O.partnershipStatus||O.partnership_status||"regular"}),c(!0)},S=()=>{j.mutate(p)},C=O=>{u(O),h(!0)},k=(O,$,M)=>{N.mutate({approved:O,notes:$,tier:M})},A=(b==null?void 0:b.instructors)||[],E=(m==null?void 0:m.instructors)||[],T=A.filter(O=>!t||O.name.toLowerCase().includes(t.toLowerCase())),P=O=>{const $={1:{variant:"default",label:"Tier 1 - Elite"},2:{variant:"secondary",label:"Tier 2 - Established"},3:{variant:"outline",label:"Tier 3 - Unknown"}};return $[O]||$[3]},_=O=>{if(!O)return null;const $={regular:{variant:"outline",label:"Regular",icon:null},affiliate:{variant:"secondary",label:"Affiliate",icon:Rs},active_partner:{variant:"default",label:"Partner",icon:Kr},featured_partner:{variant:"default",label:"Featured",icon:rc},blacklisted:{variant:"destructive",label:"Blacklisted",icon:In}},{variant:M,label:I,icon:L}=$[O]||$.regular;return n.jsxs(ae,{variant:M,children:[L&&n.jsx(L,{className:"w-3 h-3 mr-1"}),I]})};return n.jsx(qt,{children:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Instructor Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Auto-discovery, promotion controls, and balanced curation"})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Instructors"}),n.jsx(ql,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:(v==null?void 0:v.total)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Needs Review"}),n.jsx(Mr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-needs-review",children:(v==null?void 0:v.needsReview)||(v==null?void 0:v.needs_review)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-discovered instructors"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Auto-Discovered"}),n.jsx(rc,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-auto-discovered",children:(v==null?void 0:v.autoDiscovered)||(v==null?void 0:v.auto_discovered)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Found during curation"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Featured"}),n.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-featured",children:(v==null?void 0:v.featured)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Homepage featured"})]})]})]}),n.jsxs(cl,{defaultValue:"all",className:"space-y-4",children:[n.jsxs(io,{children:[n.jsx(er,{value:"all","data-testid":"tab-all",children:"All Instructors"}),n.jsxs(er,{value:"needs-review","data-testid":"tab-needs-review",children:["Needs Review ",((v==null?void 0:v.needsReview)||(v==null?void 0:v.needs_review))>0&&`(${(v==null?void 0:v.needsReview)||(v==null?void 0:v.needs_review)})`]}),n.jsx(er,{value:"balance","data-testid":"tab-balance",children:"Balanced Curation"})]}),n.jsxs(tr,{value:"all",className:"space-y-4",children:[n.jsx(W,{children:n.jsx(K,{className:"pt-6",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(bn,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),n.jsx(je,{placeholder:"Search instructors...",value:t,onChange:O=>r(O.target.value),className:"pl-10","data-testid":"input-search"})]}),n.jsxs(Je,{value:i,onValueChange:a,children:[n.jsx(Ye,{"data-testid":"select-tier-filter",children:n.jsx(Xe,{placeholder:"All Tiers"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Tiers"}),n.jsx(G,{value:"1",children:"Tier 1 - Elite"}),n.jsx(G,{value:"2",children:"Tier 2 - Established"}),n.jsx(G,{value:"3",children:"Tier 3 - Unknown"})]})]}),n.jsxs(Je,{value:s,onValueChange:o,children:[n.jsx(Ye,{"data-testid":"select-review-filter",children:n.jsx(Xe,{placeholder:"All Status"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Status"}),n.jsx(G,{value:"needs_review",children:"Needs Review"}),n.jsx(G,{value:"auto_discovered",children:"Auto-Discovered"})]})]})]})})}),x?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading instructors..."})}):T.length===0?n.jsx(W,{children:n.jsx(K,{className:"py-12",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"No instructors found"})})})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:T.map(O=>n.jsxs(W,{className:"hover-elevate","data-testid":`card-instructor-${O.id}`,children:[n.jsx(X,{children:n.jsx("div",{className:"flex items-start justify-between gap-2",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(Z,{className:"text-lg",children:O.name}),(O.autoDiscovered||O.auto_discovered)&&n.jsxs(ae,{variant:"secondary",className:"shrink-0",children:[n.jsx(rc,{className:"w-3 h-3 mr-1"}),"Auto"]}),(O.needsAdminReview||O.needs_admin_review)&&n.jsxs(ae,{variant:"destructive",className:"shrink-0",children:[n.jsx(In,{className:"w-3 h-3 mr-1"}),"Review"]})]}),n.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[P(O.tier)&&n.jsx(ae,{variant:P(O.tier).variant,children:P(O.tier).label}),_(O.partnershipStatus||O.partnership_status)]})]})})}),n.jsxs(K,{className:"space-y-3",children:[(O.autoDiscovered||O.auto_discovered)&&n.jsxs("div",{className:"p-2 bg-muted rounded-md text-sm",children:[n.jsx("p",{className:"font-medium",children:"Discovery Info"}),n.jsxs("p",{className:"text-muted-foreground text-xs",children:["Source: ",O.discoverySource||O.discovery_source||"Unknown"]}),(O.autoTierAssignment||O.auto_tier_assignment)&&n.jsxs("p",{className:"text-muted-foreground text-xs",children:["AI Suggested: ",O.autoTierAssignment||O.auto_tier_assignment]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Feature Level"}),n.jsxs("p",{className:"font-medium",children:[O.featureLevel||O.feature_level||1,"/5 "]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Search Boost"}),n.jsxs("p",{className:"font-medium",children:[O.searchBoost||O.search_boost||0,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Rec. Boost"}),n.jsxs("p",{className:"font-medium",children:[O.recommendationBoost||O.recommendation_boost||0,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Homepage"}),n.jsx("p",{className:"font-medium",children:O.homepageFeatured||O.homepage_featured?"":""})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Videos"}),n.jsx("p",{className:"font-medium",children:O.videosInLibrary||O.videos_in_library||0})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Recommendations"}),n.jsx("p",{className:"font-medium",children:O.totalRecommendations||O.total_recommendations||0})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[(O.needsAdminReview||O.needs_admin_review)&&n.jsxs(Q,{size:"sm",variant:"default",className:"flex-1",onClick:()=>C(O),"data-testid":`button-review-${O.id}`,children:[n.jsx(jk,{className:"w-4 h-4 mr-1"}),"Review"]}),n.jsxs(Q,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>w(O),"data-testid":`button-promote-${O.id}`,children:[n.jsx(Sd,{className:"w-4 h-4 mr-1"}),"Promote"]})]})]})]},O.id))})]}),n.jsx(tr,{value:"needs-review",className:"space-y-4",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Instructors Pending Review"}),n.jsx(Be,{children:"Auto-discovered instructors that need admin approval before being added to the library"})]}),n.jsx(K,{children:A.filter(O=>O.needsAdminReview||O.needs_admin_review).length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No instructors pending review"}):n.jsx("div",{className:"space-y-4",children:A.filter(O=>O.needsAdminReview||O.needs_admin_review).map(O=>n.jsxs("div",{className:"p-4 border rounded-lg space-y-2","data-testid":`review-card-${O.id}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:O.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Discovered via ",O.discoverySource||O.discovery_source||"Unknown"]})]}),n.jsxs(Q,{size:"sm",onClick:()=>C(O),"data-testid":`button-review-${O.id}`,children:[n.jsx(jk,{className:"w-4 h-4 mr-1"}),"Review"]})]}),(O.autoTierReason||O.auto_tier_reason)&&n.jsxs("p",{className:"text-sm bg-muted p-2 rounded",children:[n.jsx("strong",{children:"AI Reasoning:"})," ",O.autoTierReason||O.auto_tier_reason]})]},O.id))})})]})}),n.jsx(tr,{value:"balance",className:"space-y-4",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Balanced Curation Report"}),n.jsx(Be,{children:"Instructors sorted by representation ratio to ensure balanced recommendations across the library"})]}),n.jsx(K,{children:E.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No balance data available"}):n.jsx("div",{className:"space-y-2",children:E.map(O=>{const $=O.videosInLibrary||O.videos_in_library||0,M=O.totalRecommendations||O.total_recommendations||0,I=O.representationRatio||O.representation_ratio||0;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded hover-elevate",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:O.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Tier ",O.tier,"  ",$," videos  ",M," recommendations"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-medium",children:["Ratio: ",(I==null?void 0:I.toFixed(2))||"0.00"]}),n.jsx(ae,{variant:I<1?"destructive":I<2?"secondary":"default",children:I<1?"Underrepresented":I<2?"Balanced":"Overrepresented"})]})]},O.id)})})})]})})]}),n.jsx(Ar,{open:l,onOpenChange:c,children:n.jsxs(yr,{className:"max-w-2xl",children:[n.jsxs(br,{children:[n.jsxs(jr,{children:["Promotion Controls: ",d==null?void 0:d.name]}),n.jsx(sn,{children:"Configure search boosts, recommendation priority, and homepage featuring"})]}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Feature Level (1-5 stars)"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Uu,{value:[p.feature_level],onValueChange:O=>y({...p,feature_level:O[0]}),min:1,max:5,step:1,className:"flex-1","data-testid":"slider-feature-level"}),n.jsxs("span",{className:"text-sm font-medium w-8",children:[p.feature_level,"/5"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Higher feature levels prioritize this instructor in recommendations"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Search Boost (0-100%)"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Uu,{value:[p.search_boost],onValueChange:O=>y({...p,search_boost:O[0]}),min:0,max:100,step:5,className:"flex-1","data-testid":"slider-search-boost"}),n.jsxs("span",{className:"text-sm font-medium w-12",children:[p.search_boost,"%"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Percentage boost applied to search ranking scores"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Recommendation Boost (0-100%)"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Uu,{value:[p.recommendation_boost],onValueChange:O=>y({...p,recommendation_boost:O[0]}),min:0,max:100,step:5,className:"flex-1","data-testid":"slider-recommendation-boost"}),n.jsxs("span",{className:"text-sm font-medium w-12",children:[p.recommendation_boost,"%"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Percentage boost applied to recommendation algorithm"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ai,{id:"homepage_featured",checked:p.homepage_featured,onCheckedChange:O=>y({...p,homepage_featured:O}),"data-testid":"checkbox-homepage-featured"}),n.jsx(ce,{htmlFor:"homepage_featured",className:"cursor-pointer",children:'Show in "Featured Instructors" section on homepage'})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Partnership Status"}),n.jsxs(Je,{value:p.partnership_status,onValueChange:O=>y({...p,partnership_status:O}),children:[n.jsx(Ye,{"data-testid":"select-partnership-status",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"regular",children:"Regular"}),n.jsx(G,{value:"affiliate",children:"Affiliate"}),n.jsx(G,{value:"active_partner",children:"Active Partner"}),n.jsx(G,{value:"featured_partner",children:"Featured Partner"}),n.jsx(G,{value:"blacklisted",children:"Blacklisted"})]})]})]})]}),n.jsxs(Ys,{children:[n.jsx(Q,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),n.jsx(Q,{onClick:S,disabled:j.isPending,"data-testid":"button-save-promotion",children:j.isPending?"Saving...":"Save Changes"})]})]})}),n.jsx(Ar,{open:f,onOpenChange:h,children:n.jsxs(yr,{children:[n.jsxs(br,{children:[n.jsxs(jr,{children:["Review Instructor: ",d==null?void 0:d.name]}),n.jsx(sn,{children:"Approve or reject this auto-discovered instructor"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[((d==null?void 0:d.autoTierAssignment)||(d==null?void 0:d.auto_tier_assignment))&&n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium",children:"AI Suggested Tier"}),n.jsx("p",{className:"text-sm",children:d.autoTierAssignment||d.auto_tier_assignment}),(d.autoTierReason||d.auto_tier_reason)&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d.autoTierReason||d.auto_tier_reason})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"review-notes",children:"Review Notes"}),n.jsx(aa,{id:"review-notes",placeholder:"Add notes about this instructor...","data-testid":"textarea-review-notes"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Assign Tier"}),n.jsxs(Je,{defaultValue:((R=d==null?void 0:d.tier)==null?void 0:R.toString())||"2",children:[n.jsx(Ye,{"data-testid":"select-review-tier",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"1",children:"Tier 1 - Elite"}),n.jsx(G,{value:"2",children:"Tier 2 - Established"}),n.jsx(G,{value:"3",children:"Tier 3 - Unknown"})]})]})]})]}),n.jsxs(Ys,{className:"flex gap-2",children:[n.jsx(Q,{variant:"outline",onClick:()=>{var $;const O=(($=document.getElementById("review-notes"))==null?void 0:$.value)||"";k(!1,O)},"data-testid":"button-reject",children:"Reject"}),n.jsx(Q,{onClick:()=>{var I;const O=((I=document.getElementById("review-notes"))==null?void 0:I.value)||"",$=document.querySelector('[data-testid="select-review-tier"]'),M=parseInt(($==null?void 0:$.value)||"2");k(!0,O,M)},disabled:N.isPending,"data-testid":"button-approve",children:N.isPending?"Approving...":"Approve"})]})]})})]})})}function rwe(){const{toast:e}=rt(),[t,r]=g.useState("all"),[i,a]=g.useState("all"),[s,o]=g.useState(""),[l,c]=g.useState(!1),[d,u]=g.useState(null),[f,h]=g.useState(!1),[p,y]=g.useState(null),{data:v=[],isLoading:b}=he({queryKey:["/api/admin/partnerships",t,i],queryFn:async()=>{const k=new URLSearchParams;return t!=="all"&&k.append("feature_level",t),i!=="all"&&k.append("is_active",i),Ie(`/api/admin/partnerships?${k}`)}}),{data:x=[]}=he({queryKey:["/api/admin/instructors/all"],queryFn:async()=>(await Ie("/api/admin/instructors")).instructors||[]}),{data:m}=he({queryKey:["/api/admin/partnerships/stats"],queryFn:()=>Ie("/api/admin/partnerships/stats")}),j=Ve({mutationFn:async k=>d?Ie(`/api/admin/partnerships/${d.id}`,"PATCH",k):Ie("/api/admin/partnerships","POST",k),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/partnerships"]}),Te.invalidateQueries({queryKey:["/api/admin/partnerships/stats"]}),c(!1),u(null),e({title:d?"Partnership updated":"Partnership created",description:"Changes saved successfully"})},onError:k=>{e({title:"Error",description:k.message||"Failed to save partnership",variant:"destructive"})}}),N=Ve({mutationFn:k=>Ie(`/api/admin/partnerships/${k}`,"DELETE"),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/partnerships"]}),Te.invalidateQueries({queryKey:["/api/admin/partnerships/stats"]}),h(!1),y(null),e({title:"Partnership deleted",description:"Partnership removed successfully"})},onError:k=>{e({title:"Error",description:k.message||"Failed to delete partnership",variant:"destructive"})}}),w=k=>{k.preventDefault();const A=new FormData(k.currentTarget),E={instructor_id:A.get("instructor_id"),feature_level:A.get("feature_level"),search_priority_percentage:parseInt(A.get("search_priority_percentage")),recommendation_boost_percentage:parseInt(A.get("recommendation_boost_percentage")),show_badge:A.get("show_badge")==="on",show_name_callout:A.get("show_name_callout")==="on",custom_callout_text:A.get("custom_callout_text")||null,start_date:A.get("start_date"),end_date:A.get("end_date")||null,is_active:A.get("is_active")==="on",partnership_type:A.get("partnership_type")||null,partnership_agreement:A.get("partnership_agreement")||null,social_post_completed:A.get("social_post_completed")==="on",social_post_date:A.get("social_post_date")||null,link_in_bio_until:A.get("link_in_bio_until")||null,partnership_notes:A.get("partnership_notes")||null};j.mutate(E)},S=v.filter(k=>{var A;return!(s&&!((A=k.instructorName)!=null&&A.toLowerCase().includes(s.toLowerCase())))}),C=k=>{const A={primary:{variant:"default",icon:Kr,label:"Primary"},secondary:{variant:"secondary",icon:Rs,label:"Secondary"},spotlight:{variant:"outline",icon:sr,label:"Spotlight"}},{variant:E,icon:T,label:P}=A[k]||A.secondary;return n.jsxs(ae,{variant:E,className:"gap-1",children:[n.jsx(T,{className:"w-3 h-3"}),P]})};return n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Instructor Partnerships"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage featured instructor partnerships and promotional agreements"})]}),n.jsxs(Q,{onClick:()=>{u(null),c(!0)},"data-testid":"button-create-partnership",children:[n.jsx(I1,{className:"w-4 h-4 mr-2"}),"Add Partnership"]})]}),m&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Partnerships"}),n.jsx(Rs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:m.total||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Active Partnerships"}),n.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-active",children:m.active||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Primary Features"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-primary",children:m.primaryCount||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Social Posts"}),n.jsx(Rs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-social",children:m.socialPostsCompleted||0})})]})]}),n.jsxs(W,{children:[n.jsx(X,{children:n.jsx(Z,{children:"Filters"})}),n.jsxs(K,{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(ce,{children:"Search"}),n.jsx(je,{placeholder:"Search instructor name...",value:s,onChange:k=>o(k.target.value),"data-testid":"input-search"})]}),n.jsxs("div",{className:"w-48",children:[n.jsx(ce,{children:"Feature Level"}),n.jsxs(Je,{value:t,onValueChange:r,children:[n.jsx(Ye,{"data-testid":"select-filter-level",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Levels"}),n.jsx(G,{value:"primary",children:"Primary"}),n.jsx(G,{value:"secondary",children:"Secondary"}),n.jsx(G,{value:"spotlight",children:"Spotlight"})]})]})]}),n.jsxs("div",{className:"w-48",children:[n.jsx(ce,{children:"Status"}),n.jsxs(Je,{value:i,onValueChange:a,children:[n.jsx(Ye,{"data-testid":"select-filter-active",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Status"}),n.jsx(G,{value:"true",children:"Active"}),n.jsx(G,{value:"false",children:"Inactive"})]})]})]})]})]}),n.jsx(W,{children:n.jsx(K,{className:"p-0",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Instructor"}),n.jsx(Y,{children:"Feature Level"}),n.jsx(Y,{children:"Search Boost"}),n.jsx(Y,{children:"Rec. Boost"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{children:"Partnership Type"}),n.jsx(Y,{children:"Social Post"}),n.jsx(Y,{children:"Recommendations"}),n.jsx(Y,{className:"text-right",children:"Actions"})]})}),n.jsx(Ct,{children:b?n.jsx(Se,{children:n.jsx(V,{colSpan:9,className:"text-center",children:"Loading..."})}):S.length===0?n.jsx(Se,{children:n.jsx(V,{colSpan:9,className:"text-center",children:"No partnerships found"})}):S.map(k=>n.jsxs(Se,{"data-testid":`row-partnership-${k.id}`,children:[n.jsx(V,{className:"font-medium",children:k.instructorName||"Unknown"}),n.jsx(V,{children:C(k.featureLevel)}),n.jsxs(V,{children:[k.searchPriorityPercentage,"%"]}),n.jsxs(V,{children:[k.recommendationBoostPercentage,"%"]}),n.jsx(V,{children:n.jsx(ae,{variant:k.isActive?"default":"secondary",children:k.isActive?"Active":"Inactive"})}),n.jsx(V,{children:k.partnershipType?n.jsx(ae,{variant:"outline",children:k.partnershipType}):n.jsx("span",{className:"text-muted-foreground",children:"-"})}),n.jsx(V,{children:k.socialPostCompleted?n.jsx(ae,{variant:"default",children:" Done"}):n.jsx(ae,{variant:"secondary",children:"Pending"})}),n.jsx(V,{children:k.totalRecommendations.toLocaleString()}),n.jsx(V,{className:"text-right",children:n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>{u(k),c(!0)},"data-testid":`button-edit-${k.id}`,children:n.jsx(pI,{className:"w-4 h-4"})}),n.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>{y(k.id),h(!0)},"data-testid":`button-delete-${k.id}`,children:n.jsx(to,{className:"w-4 h-4"})})]})})]},k.id))})]})})}),n.jsx(Ar,{open:l,onOpenChange:c,children:n.jsx(yr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:n.jsxs("form",{onSubmit:w,children:[n.jsxs(br,{children:[n.jsx(jr,{children:d?"Edit Partnership":"Create Partnership"}),n.jsx(sn,{children:"Configure featured instructor partnership settings"})]}),n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"instructor_id",children:"Instructor *"}),n.jsxs(Je,{name:"instructor_id",defaultValue:d==null?void 0:d.instructorId,required:!0,disabled:!!d,children:[n.jsx(Ye,{"data-testid":"input-instructor",children:n.jsx(Xe,{placeholder:"Select instructor"})}),n.jsx(Qe,{children:x.map(k=>n.jsxs(G,{value:k.id,children:[k.name," (Tier ",k.tier,")"]},k.id))})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"feature_level",children:"Feature Level *"}),n.jsxs(Je,{name:"feature_level",defaultValue:(d==null?void 0:d.featureLevel)||"secondary",required:!0,children:[n.jsx(Ye,{"data-testid":"input-feature-level",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"primary",children:"Primary"}),n.jsx(G,{value:"secondary",children:"Secondary"}),n.jsx(G,{value:"spotlight",children:"Spotlight"})]})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"search_priority_percentage",children:"Search Priority %"}),n.jsx(je,{id:"search_priority_percentage",name:"search_priority_percentage",type:"number",min:"0",max:"100",defaultValue:(d==null?void 0:d.searchPriorityPercentage)||10,required:!0,"data-testid":"input-search-priority"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"recommendation_boost_percentage",children:"Rec. Boost %"}),n.jsx(je,{id:"recommendation_boost_percentage",name:"recommendation_boost_percentage",type:"number",min:"0",max:"100",defaultValue:(d==null?void 0:d.recommendationBoostPercentage)||30,required:!0,"data-testid":"input-recommendation-boost"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ai,{id:"show_badge",name:"show_badge",defaultChecked:(d==null?void 0:d.showBadge)??!0,"data-testid":"input-show-badge"}),n.jsx(ce,{htmlFor:"show_badge",children:"Show Badge"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ai,{id:"show_name_callout",name:"show_name_callout",defaultChecked:(d==null?void 0:d.showNameCallout)??!0,"data-testid":"input-show-callout"}),n.jsx(ce,{htmlFor:"show_name_callout",children:"Show Name Callout"})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"custom_callout_text",children:"Custom Callout Text"}),n.jsx(je,{id:"custom_callout_text",name:"custom_callout_text",placeholder:"e.g., 'Your instructor' or 'Elite competitor'",defaultValue:(d==null?void 0:d.customCalloutText)||"","data-testid":"input-callout-text"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"start_date",children:"Start Date *"}),n.jsx(je,{id:"start_date",name:"start_date",type:"date",defaultValue:(d==null?void 0:d.startDate)||new Date().toISOString().split("T")[0],required:!0,"data-testid":"input-start-date"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"end_date",children:"End Date (optional)"}),n.jsx(je,{id:"end_date",name:"end_date",type:"date",defaultValue:(d==null?void 0:d.endDate)||"","data-testid":"input-end-date"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ai,{id:"is_active",name:"is_active",defaultChecked:(d==null?void 0:d.isActive)??!0,"data-testid":"input-is-active"}),n.jsx(ce,{htmlFor:"is_active",children:"Active"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"partnership_type",children:"Partnership Type"}),n.jsxs(Je,{name:"partnership_type",defaultValue:(d==null?void 0:d.partnershipType)||"",children:[n.jsx(Ye,{"data-testid":"input-partnership-type",children:n.jsx(Xe,{placeholder:"Select type"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"",children:"None"}),n.jsx(G,{value:"co_founder",children:"Co-Founder"}),n.jsx(G,{value:"promotional",children:"Promotional"}),n.jsx(G,{value:"standard",children:"Standard"})]})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"social_post_date",children:"Social Post Date"}),n.jsx(je,{id:"social_post_date",name:"social_post_date",type:"date",defaultValue:(d==null?void 0:d.socialPostDate)||"","data-testid":"input-social-post-date"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ai,{id:"social_post_completed",name:"social_post_completed",defaultChecked:(d==null?void 0:d.socialPostCompleted)||!1,"data-testid":"input-social-completed"}),n.jsx(ce,{htmlFor:"social_post_completed",children:"Social Post Completed"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"link_in_bio_until",children:"Link in Bio Until"}),n.jsx(je,{id:"link_in_bio_until",name:"link_in_bio_until",type:"date",defaultValue:(d==null?void 0:d.linkInBioUntil)||"","data-testid":"input-link-bio-until"})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"partnership_agreement",children:"Partnership Agreement"}),n.jsx(aa,{id:"partnership_agreement",name:"partnership_agreement",placeholder:"Partnership agreement details...",defaultValue:(d==null?void 0:d.partnershipAgreement)||"","data-testid":"input-agreement"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ce,{htmlFor:"partnership_notes",children:"Notes"}),n.jsx(aa,{id:"partnership_notes",name:"partnership_notes",placeholder:"Additional notes...",defaultValue:(d==null?void 0:d.partnershipNotes)||"","data-testid":"input-notes"})]})]}),n.jsxs(Ys,{children:[n.jsx(Q,{type:"button",variant:"outline",onClick:()=>c(!1),"data-testid":"button-cancel",children:"Cancel"}),n.jsx(Q,{type:"submit",disabled:j.isPending,"data-testid":"button-save",children:j.isPending?"Saving...":"Save Partnership"})]})]})})}),n.jsx(Ar,{open:f,onOpenChange:h,children:n.jsxs(yr,{children:[n.jsxs(br,{children:[n.jsx(jr,{children:"Delete Partnership"}),n.jsx(sn,{children:"Are you sure you want to delete this partnership? This action cannot be undone."})]}),n.jsxs(Ys,{children:[n.jsx(Q,{variant:"outline",onClick:()=>h(!1),"data-testid":"button-cancel-delete",children:"Cancel"}),n.jsx(Q,{variant:"destructive",onClick:()=>p&&N.mutate(p),disabled:N.isPending,"data-testid":"button-confirm-delete",children:N.isPending?"Deleting...":"Delete"})]})]})})]})})}var nwe="Separator",kT="horizontal",iwe=["horizontal","vertical"],G3=g.forwardRef((e,t)=>{const{decorative:r,orientation:i=kT,...a}=e,s=awe(i)?i:kT,l=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return n.jsx(Ue.div,{"data-orientation":s,...l,...a,ref:t})});G3.displayName=nwe;function awe(e){return iwe.includes(e)}var Y3=G3;const op=g.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...i},a)=>n.jsx(Y3,{ref:a,decorative:r,orientation:t,className:we("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...i}));op.displayName=Y3.displayName;function swe(e,t){return g.useReducer((r,i)=>t[r][i]??r,e)}var AS="ScrollArea",[Q3,mNe]=jn(AS),[owe,ci]=Q3(AS),J3=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:i="hover",dir:a,scrollHideDelay:s=600,...o}=e,[l,c]=g.useState(null),[d,u]=g.useState(null),[f,h]=g.useState(null),[p,y]=g.useState(null),[v,b]=g.useState(null),[x,m]=g.useState(0),[j,N]=g.useState(0),[w,S]=g.useState(!1),[C,k]=g.useState(!1),A=at(t,T=>c(T)),E=Sh(a);return n.jsx(owe,{scope:r,type:i,dir:E,scrollHideDelay:s,scrollArea:l,viewport:d,onViewportChange:u,content:f,onContentChange:h,scrollbarX:p,onScrollbarXChange:y,scrollbarXEnabled:w,onScrollbarXEnabledChange:S,scrollbarY:v,onScrollbarYChange:b,scrollbarYEnabled:C,onScrollbarYEnabledChange:k,onCornerWidthChange:m,onCornerHeightChange:N,children:n.jsx(Ue.div,{dir:E,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});J3.displayName=AS;var X3="ScrollAreaViewport",Z3=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:i,nonce:a,...s}=e,o=ci(X3,r),l=g.useRef(null),c=at(t,l,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(Ue.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});Z3.displayName=X3;var ca="ScrollAreaScrollbar",ES=g.forwardRef((e,t)=>{const{forceMount:r,...i}=e,a=ci(ca,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return g.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),a.type==="hover"?n.jsx(lwe,{...i,ref:t,forceMount:r}):a.type==="scroll"?n.jsx(cwe,{...i,ref:t,forceMount:r}):a.type==="auto"?n.jsx(eL,{...i,ref:t,forceMount:r}):a.type==="always"?n.jsx(PS,{...i,ref:t}):null});ES.displayName=ca;var lwe=g.forwardRef((e,t)=>{const{forceMount:r,...i}=e,a=ci(ca,e.__scopeScrollArea),[s,o]=g.useState(!1);return g.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(ai,{present:r||s,children:n.jsx(eL,{"data-state":s?"visible":"hidden",...i,ref:t})})}),cwe=g.forwardRef((e,t)=>{const{forceMount:r,...i}=e,a=ci(ca,e.__scopeScrollArea),s=e.orientation==="horizontal",o=Dv(()=>c("SCROLL_END"),100),[l,c]=swe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),g.useEffect(()=>{const d=a.viewport,u=s?"scrollLeft":"scrollTop";if(d){let f=d[u];const h=()=>{const p=d[u];f!==p&&(c("SCROLL"),o()),f=p};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,s,c,o]),n.jsx(ai,{present:r||l!=="hidden",children:n.jsx(PS,{"data-state":l==="hidden"?"hidden":"visible",...i,ref:t,onPointerEnter:Re(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Re(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),eL=g.forwardRef((e,t)=>{const r=ci(ca,e.__scopeScrollArea),{forceMount:i,...a}=e,[s,o]=g.useState(!1),l=e.orientation==="horizontal",c=Dv(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return md(r.viewport,c),md(r.content,c),n.jsx(ai,{present:i||s,children:n.jsx(PS,{"data-state":s?"visible":"hidden",...a,ref:t})})}),PS=g.forwardRef((e,t)=>{const{orientation:r="vertical",...i}=e,a=ci(ca,e.__scopeScrollArea),s=g.useRef(null),o=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=aL(l.viewport,l.content),u={...i,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,p){return pwe(h,o.current,l,p)}return r==="horizontal"?n.jsx(dwe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollLeft,p=CT(h,l,a.dir);s.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?n.jsx(uwe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollTop,p=CT(h,l);s.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),dwe=g.forwardRef((e,t)=>{const{sizes:r,onSizesChange:i,...a}=e,s=ci(ca,e.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),d=at(t,c,s.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(rL,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fv(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),oL(h,f)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&i({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:ix(o.paddingLeft),paddingEnd:ix(o.paddingRight)}})}})}),uwe=g.forwardRef((e,t)=>{const{sizes:r,onSizesChange:i,...a}=e,s=ci(ca,e.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),d=at(t,c,s.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(rL,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fv(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),oL(h,f)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&i({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:ix(o.paddingTop),paddingEnd:ix(o.paddingBottom)}})}})}),[fwe,tL]=Q3(ca),rL=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:i,hasThumb:a,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:f,...h}=e,p=ci(ca,r),[y,v]=g.useState(null),b=at(t,A=>v(A)),x=g.useRef(null),m=g.useRef(""),j=p.viewport,N=i.content-i.viewport,w=ir(u),S=ir(c),C=Dv(f,10);function k(A){if(x.current){const E=A.clientX-x.current.left,T=A.clientY-x.current.top;d({x:E,y:T})}}return g.useEffect(()=>{const A=E=>{const T=E.target;(y==null?void 0:y.contains(T))&&w(E,N)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[j,y,N,w]),g.useEffect(S,[i,S]),md(y,C),md(p.content,C),n.jsx(fwe,{scope:r,scrollbar:y,hasThumb:a,onThumbChange:ir(s),onThumbPointerUp:ir(o),onThumbPositionChange:S,onThumbPointerDown:ir(l),children:n.jsx(Ue.div,{...h,ref:b,style:{position:"absolute",...h.style},onPointerDown:Re(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),x.current=y.getBoundingClientRect(),m.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),k(A))}),onPointerMove:Re(e.onPointerMove,k),onPointerUp:Re(e.onPointerUp,A=>{const E=A.target;E.hasPointerCapture(A.pointerId)&&E.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=m.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),nx="ScrollAreaThumb",nL=g.forwardRef((e,t)=>{const{forceMount:r,...i}=e,a=tL(nx,e.__scopeScrollArea);return n.jsx(ai,{present:r||a.hasThumb,children:n.jsx(hwe,{ref:t,...i})})}),hwe=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:i,...a}=e,s=ci(nx,r),o=tL(nx,r),{onThumbPositionChange:l}=o,c=at(t,f=>o.onThumbChange(f)),d=g.useRef(void 0),u=Dv(()=>{d.current&&(d.current(),d.current=void 0)},100);return g.useEffect(()=>{const f=s.viewport;if(f){const h=()=>{if(u(),!d.current){const p=gwe(f,l);d.current=p,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[s.viewport,u,l]),n.jsx(Ue.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:Re(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),y=f.clientX-p.left,v=f.clientY-p.top;o.onThumbPointerDown({x:y,y:v})}),onPointerUp:Re(e.onPointerUp,o.onThumbPointerUp)})});nL.displayName=nx;var TS="ScrollAreaCorner",iL=g.forwardRef((e,t)=>{const r=ci(TS,e.__scopeScrollArea),i=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&i?n.jsx(mwe,{...e,ref:t}):null});iL.displayName=TS;var mwe=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,...i}=e,a=ci(TS,r),[s,o]=g.useState(0),[l,c]=g.useState(0),d=!!(s&&l);return md(a.scrollbarX,()=>{var f;const u=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),md(a.scrollbarY,()=>{var f;const u=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?n.jsx(Ue.div,{...i,ref:t,style:{width:s,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ix(e){return e?parseInt(e,10):0}function aL(e,t){const r=e/t;return isNaN(r)?0:r}function Fv(e){const t=aL(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=(e.scrollbar.size-r)*t;return Math.max(i,18)}function pwe(e,t,r,i="ltr"){const a=Fv(r),s=a/2,o=t||s,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,f=i==="ltr"?[0,u]:[u*-1,0];return sL([c,d],f)(e)}function CT(e,t,r="ltr"){const i=Fv(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,o=t.content-t.viewport,l=s-i,c=r==="ltr"?[0,o]:[o*-1,0],d=yf(e,c);return sL([0,o],[0,l])(d)}function sL(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const i=(t[1]-t[0])/(e[1]-e[0]);return t[0]+i*(r-e[0])}}function oL(e,t){return e>0&&e<t}var gwe=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},i=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},o=r.left!==s.left,l=r.top!==s.top;(o||l)&&t(),r=s,i=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(i)};function Dv(e,t){const r=ir(e),i=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(i.current),[]),g.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(r,t)},[r,t])}function md(e,t){const r=ir(t);Fr(()=>{let i=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(i),a.unobserve(e)}}},[e,r])}var lL=J3,xwe=Z3,vwe=iL;const OS=g.forwardRef(({className:e,children:t,...r},i)=>n.jsxs(lL,{ref:i,className:we("relative overflow-hidden",e),...r,children:[n.jsx(xwe,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(cL,{}),n.jsx(vwe,{})]}));OS.displayName=lL.displayName;const cL=g.forwardRef(({className:e,orientation:t="vertical",...r},i)=>n.jsx(ES,{ref:i,orientation:t,className:we("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(nL,{className:"relative flex-1 rounded-full bg-border"})}));cL.displayName=ES.displayName;function ywe(){var b,x;const[e,t]=g.useState(null),[r,i]=g.useState("all"),[a,s]=g.useState("all"),[o,l]=g.useState("all"),[c,d]=g.useState(""),{data:u}=he({queryKey:["/api/admin/chains/stats"],queryFn:()=>Ie("/api/admin/chains/stats")}),{data:f=[],isLoading:h}=he({queryKey:["/api/chains",r,a,o],queryFn:async()=>{const m=new URLSearchParams({limit:"100"});return r!=="all"&&m.append("position",r),a!=="all"&&m.append("difficulty",a),o!=="all"&&m.append("category",o),Ie(`/api/chains?${m}`)}}),p=f.filter(m=>{var j;return m.name.toLowerCase().includes(c.toLowerCase())||((j=m.description)==null?void 0:j.toLowerCase().includes(c.toLowerCase()))}),y=m=>({white:"outline",blue:"default",purple:"default",brown:"secondary",black:"secondary"})[m]||"outline",v=m=>({beginner:"outline",intermediate:"default",advanced:"secondary"})[m]||"outline";return n.jsx(qt,{children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Technique Chains"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage pre-built BJJ technique sequences"})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Chains"}),n.jsx(hI,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-chains",children:(u==null?void 0:u.totalChains)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Saved"}),n.jsx(O7,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-saved",children:(u==null?void 0:u.totalSaved)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Feedback"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-feedback",children:(u==null?void 0:u.totalFeedback)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Top Chain Saves"}),n.jsx(hf,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-top-saves",children:((x=(b=u==null?void 0:u.topChains)==null?void 0:b[0])==null?void 0:x.timesSaved)||0})})]})]}),n.jsxs(W,{children:[n.jsx(X,{children:n.jsx(Z,{children:"Filters"})}),n.jsx(K,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsx(je,{placeholder:"Search chains...",value:c,onChange:m=>d(m.target.value),"data-testid":"input-search-chains"}),n.jsxs(Je,{value:r,onValueChange:i,children:[n.jsx(Ye,{"data-testid":"select-position-filter",children:n.jsx(Xe,{placeholder:"Position"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all","data-testid":"select-option-all-positions",children:"All Positions"}),n.jsx(G,{value:"closed_guard","data-testid":"select-option-closed-guard",children:"Closed Guard"}),n.jsx(G,{value:"mount","data-testid":"select-option-mount",children:"Mount"}),n.jsx(G,{value:"back_control","data-testid":"select-option-back-control",children:"Back Control"}),n.jsx(G,{value:"side_control","data-testid":"select-option-side-control",children:"Side Control"}),n.jsx(G,{value:"half_guard","data-testid":"select-option-half-guard",children:"Half Guard"})]})]}),n.jsxs(Je,{value:a,onValueChange:s,children:[n.jsx(Ye,{"data-testid":"select-difficulty-filter",children:n.jsx(Xe,{placeholder:"Difficulty"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all","data-testid":"select-option-all-difficulty",children:"All Levels"}),n.jsx(G,{value:"beginner","data-testid":"select-option-beginner",children:"Beginner"}),n.jsx(G,{value:"intermediate","data-testid":"select-option-intermediate",children:"Intermediate"}),n.jsx(G,{value:"advanced","data-testid":"select-option-advanced",children:"Advanced"})]})]}),n.jsxs(Je,{value:o,onValueChange:l,children:[n.jsx(Ye,{"data-testid":"select-category-filter",children:n.jsx(Xe,{placeholder:"Category"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all","data-testid":"select-option-all-category",children:"All Categories"}),n.jsx(G,{value:"submissions","data-testid":"select-option-submissions",children:"Submissions"}),n.jsx(G,{value:"sweeps","data-testid":"select-option-sweeps",children:"Sweeps"}),n.jsx(G,{value:"passing","data-testid":"select-option-passing",children:"Passing"}),n.jsx(G,{value:"escapes","data-testid":"select-option-escapes",children:"Escapes"})]})]})]})})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{children:["All Chains (",p.length,")"]}),n.jsx(Be,{children:"Click on a chain to view details"})]}),n.jsx(K,{children:h?n.jsx("div",{children:"Loading chains..."}):n.jsx("div",{className:"space-y-2",children:p.map(m=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover-elevate cursor-pointer",onClick:()=>t(m),"data-testid":`chain-item-${m.id}`,children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold","data-testid":`text-chain-name-${m.id}`,children:m.name}),n.jsx(ae,{variant:y(m.minBeltLevel),"data-testid":`badge-belt-${m.id}`,children:m.minBeltLevel}),n.jsx(ae,{variant:v(m.difficultyLevel),"data-testid":`badge-difficulty-${m.id}`,children:m.difficultyLevel})]}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1","data-testid":`text-chain-description-${m.id}`,children:m.description}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{"data-testid":`text-step-count-${m.id}`,children:[m.stepCount," steps"]}),n.jsx("span",{children:""}),n.jsx("span",{"data-testid":`text-category-${m.id}`,children:m.primaryCategory}),n.jsx("span",{children:""}),n.jsxs("span",{"data-testid":`text-position-flow-${m.id}`,children:[m.positionStart,"  ",m.positionEnd]}),n.jsx("span",{children:""}),n.jsxs("span",{"data-testid":`text-saves-${m.id}`,children:[m.timesSaved," saves"]})]})]}),n.jsx(rn,{className:"h-5 w-5 text-muted-foreground","data-testid":`icon-chevron-${m.id}`})]},m.id))})})]}),n.jsx(Ar,{open:e!==null,onOpenChange:m=>!m&&t(null),children:n.jsxs(yr,{className:"max-w-4xl max-h-[90vh]","data-testid":"dialog-chain-detail",children:[n.jsxs(br,{children:[n.jsx(jr,{"data-testid":"text-dialog-chain-name",children:e==null?void 0:e.name}),n.jsx(sn,{"data-testid":"text-dialog-chain-description",children:e==null?void 0:e.description})]}),n.jsx(OS,{className:"h-[500px] pr-4",children:e&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap gap-2","data-testid":"section-chain-metadata",children:[n.jsxs(ae,{variant:y(e.minBeltLevel),"data-testid":"badge-dialog-belt",children:[e.minBeltLevel," belt"]}),n.jsx(ae,{variant:v(e.difficultyLevel),"data-testid":"badge-dialog-difficulty",children:e.difficultyLevel}),n.jsx(ae,{variant:"outline","data-testid":"badge-dialog-category",children:e.primaryCategory}),n.jsx(ae,{variant:"outline","data-testid":"badge-dialog-gi-preference",children:e.giPreference}),n.jsx(ae,{variant:"outline","data-testid":"badge-dialog-technical",children:e.technicalVsAthletic}),e.requiresAthleticism&&n.jsx(ae,{variant:"outline","data-testid":"badge-dialog-athleticism",children:"Requires Athleticism"}),e.requiresFlexibility&&n.jsx(ae,{variant:"outline","data-testid":"badge-dialog-flexibility",children:"Requires Flexibility"})]}),n.jsx(op,{}),n.jsxs("div",{className:"space-y-4","data-testid":"section-chain-steps",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Technique Steps"}),e.steps.map((m,j)=>n.jsxs(W,{"data-testid":`card-step-${j}`,children:[n.jsx(X,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary text-primary-foreground","data-testid":`badge-step-number-${j}`,children:m.step}),n.jsx(Z,{className:"text-base","data-testid":`text-step-name-${j}`,children:m.name})]})}),n.jsxs(K,{className:"space-y-3",children:[n.jsx("p",{className:"text-sm","data-testid":`text-step-description-${j}`,children:m.description}),m.key_points&&m.key_points.length>0&&n.jsxs("div",{"data-testid":`section-key-points-${j}`,children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Key Points:"}),n.jsx("ul",{className:"space-y-1",children:m.key_points.map((N,w)=>n.jsxs("li",{className:"text-sm flex items-start gap-2","data-testid":`text-key-point-${j}-${w}`,children:[n.jsx(_r,{className:"h-4 w-4 text-green-500 dark:text-green-400 mt-0.5"}),n.jsx("span",{children:N})]},w))})]}),m.technique_search&&n.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":`text-technique-search-${j}`,children:["Search: ",m.technique_search]})]})]},j))]}),n.jsx(op,{}),n.jsxs("div",{className:"grid grid-cols-2 gap-4","data-testid":"section-chain-analytics",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Times Recommended"}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-dialog-recommended",children:e.timesRecommended})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Times Saved"}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-dialog-saved",children:e.timesSaved})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Helpful Votes"}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-dialog-helpful",children:e.helpfulCount})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Not Helpful Votes"}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-dialog-not-helpful",children:e.notHelpfulCount})]})]}),n.jsx(op,{}),n.jsxs("div",{"data-testid":"section-helpful-ratio",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Helpful Ratio"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("p",{className:"text-3xl font-bold","data-testid":"stat-dialog-ratio",children:e.helpfulRatio?`${parseFloat(e.helpfulRatio).toFixed(1)}%`:"N/A"}),e.helpfulRatio&&parseFloat(e.helpfulRatio)>=80&&n.jsx(ae,{variant:"default","data-testid":"badge-highly-rated",children:"Highly Rated"})]})]})]})})]})})]})})}function bwe(){var b,x;const[e,t]=g.useState(""),[r,i]=g.useState("7d"),[a,s]=g.useState("all"),[o,l]=g.useState("all"),[c,d]=g.useState(1),u=50,{data:f,isLoading:h}=he({queryKey:["/api/admin/ai-logs",{dateFilter:r,statusFilter:a,modelFilter:o,page:c}],queryFn:()=>Ie(`/api/admin/ai-logs?dateFilter=${r}&statusFilter=${a}&modelFilter=${o}&page=${c}&pageSize=${u}`)}),{data:p}=he({queryKey:["/api/admin/ai-logs/stats"],queryFn:()=>Ie("/api/admin/ai-logs/stats")}),y=((b=f==null?void 0:f.logs)==null?void 0:b.filter(m=>{var N,w,S;if(!e)return!0;const j=e.toLowerCase();return((N=m.userMessage)==null?void 0:N.toLowerCase().includes(j))||((w=m.aiResponse)==null?void 0:w.toLowerCase().includes(j))||((S=m.userPhone)==null?void 0:S.toLowerCase().includes(j))}))||[],v=()=>{const m=[["Timestamp","User","User Message","AI Response","Response Time (ms)","Tokens","Model","Status"].join(","),...y.map(S=>{var C,k;return[vn(new Date(S.timestamp),"yyyy-MM-dd HH:mm:ss"),S.userPhone||S.userEmail||"Unknown",`"${((C=S.userMessage)==null?void 0:C.replace(/"/g,'""'))||""}"`,`"${((k=S.aiResponse)==null?void 0:k.replace(/"/g,'""'))||""}"`,S.responseTimeMs||0,S.tokensUsed||0,S.model||"Claude Sonnet 4",S.status||"success"].join(",")})].join(`
`),j=new Blob([m],{type:"text/csv"}),N=window.URL.createObjectURL(j),w=document.createElement("a");w.href=N,w.download=`ai-logs-${vn(new Date,"yyyy-MM-dd")}.csv`,w.click()};return n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"AI Conversation Logs"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor Prof. OS conversations and performance"})]}),n.jsxs(Q,{onClick:v,variant:"outline","data-testid":"button-export-csv",children:[n.jsx(E0,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(W,{"data-testid":"card-total-conversations",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Conversations"}),n.jsx($c,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:(p==null?void 0:p.total)||0})})]}),n.jsxs(W,{"data-testid":"card-avg-response-time",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Avg Response Time"}),n.jsx(Da,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsxs("div",{className:"text-2xl font-bold","data-testid":"stat-avg-time",children:[(p==null?void 0:p.avgResponseTime)||0,"ms"]})})]}),n.jsxs(W,{"data-testid":"card-total-tokens",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Tokens Used"}),n.jsx(hf,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-tokens",children:((x=p==null?void 0:p.totalTokens)==null?void 0:x.toLocaleString())||0})})]}),n.jsxs(W,{"data-testid":"card-success-rate",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Success Rate"}),n.jsx($n,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsxs("div",{className:"text-2xl font-bold","data-testid":"stat-success-rate",children:[(p==null?void 0:p.successRate)||0,"%"]})})]})]}),n.jsxs(W,{children:[n.jsx(X,{children:n.jsx(Z,{children:"Filters"})}),n.jsxs(K,{className:"flex flex-wrap gap-4",children:[n.jsx("div",{className:"flex-1 min-w-[200px]",children:n.jsxs("div",{className:"relative",children:[n.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(je,{placeholder:"Search messages, users...",value:e,onChange:m=>t(m.target.value),className:"pl-10","data-testid":"input-search"})]})}),n.jsxs(Je,{value:r,onValueChange:i,children:[n.jsx(Ye,{className:"w-[180px]","data-testid":"select-date-filter",children:n.jsx(Xe,{placeholder:"Date range"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"24h",children:"Last 24 hours"}),n.jsx(G,{value:"7d",children:"Last 7 days"}),n.jsx(G,{value:"30d",children:"Last 30 days"}),n.jsx(G,{value:"all",children:"All time"})]})]}),n.jsxs(Je,{value:a,onValueChange:s,children:[n.jsx(Ye,{className:"w-[150px]","data-testid":"select-status-filter",children:n.jsx(Xe,{placeholder:"Status"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All"}),n.jsx(G,{value:"success",children:"Success"}),n.jsx(G,{value:"error",children:"Error"})]})]}),n.jsxs(Je,{value:o,onValueChange:l,children:[n.jsx(Ye,{className:"w-[200px]","data-testid":"select-model-filter",children:n.jsx(Xe,{placeholder:"AI Model"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Models"}),n.jsx(G,{value:"gpt-4o",children:"GPT-4o"}),n.jsx(G,{value:"claude-sonnet-4",children:"Claude Sonnet 4"}),n.jsx(G,{value:"gpt-4o-fallback",children:"GPT-4o (Fallback)"})]})]})]})]}),n.jsx(W,{children:n.jsxs(K,{className:"pt-6",children:[h?n.jsx("div",{className:"text-center py-8",children:"Loading..."}):y.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No logs found"}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Timestamp"}),n.jsx(Y,{children:"User"}),n.jsx(Y,{className:"max-w-[300px]",children:"User Message"}),n.jsx(Y,{className:"max-w-[300px]",children:"Prof. OS Response"}),n.jsx(Y,{children:"AI Model"}),n.jsx(Y,{children:"Complexity"}),n.jsx(Y,{children:"Time"}),n.jsx(Y,{children:"Status"})]})}),n.jsx(Ct,{children:y.map(m=>n.jsxs(Se,{"data-testid":`row-log-${m.id}`,children:[n.jsx(V,{className:"text-sm",children:vn(new Date(m.timestamp),"MMM dd, HH:mm:ss")}),n.jsx(V,{className:"text-sm",children:m.userPhone||m.userEmail||"Unknown"}),n.jsx(V,{className:"max-w-[300px] truncate text-sm",children:m.userMessage}),n.jsx(V,{className:"max-w-[300px] truncate text-sm",children:m.aiResponse}),n.jsx(V,{children:m.modelUsed==="claude-sonnet-4"?n.jsx(ae,{variant:"default","data-testid":`badge-model-${m.id}`,children:"Claude S4"}):m.modelUsed==="gpt-4o-fallback"?n.jsx(ae,{variant:"secondary","data-testid":`badge-model-${m.id}`,children:"GPT-4o (FB)"}):n.jsx(ae,{variant:"outline","data-testid":`badge-model-${m.id}`,children:"GPT-4o"})}),n.jsx(V,{className:"text-sm",children:m.complexityScore!==null&&m.complexityScore!==void 0?n.jsxs("span",{className:m.complexityScore>7?"text-orange-500 font-semibold":"text-muted-foreground",children:[m.complexityScore,"/10"]}):n.jsx("span",{className:"text-muted-foreground",children:"-"})}),n.jsx(V,{className:"text-sm",children:m.responseTimeMs?`${m.responseTimeMs}ms`:"-"}),n.jsx(V,{children:m.status==="error"?n.jsxs(ae,{variant:"destructive","data-testid":`badge-status-${m.id}`,children:[n.jsx(In,{className:"w-3 h-3 mr-1"}),"Error"]}):n.jsxs(ae,{variant:"default","data-testid":`badge-status-${m.id}`,children:[n.jsx($n,{className:"w-3 h-3 mr-1"}),"Success"]})})]},m.id))})]})}),(f==null?void 0:f.totalPages)>1&&n.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[n.jsx(Q,{variant:"outline",size:"sm",onClick:()=>d(m=>Math.max(1,m-1)),disabled:c===1,"data-testid":"button-prev-page",children:"Previous"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",c," of ",f.totalPages]}),n.jsx(Q,{variant:"outline",size:"sm",onClick:()=>d(m=>Math.min(f.totalPages,m+1)),disabled:c===f.totalPages,"data-testid":"button-next-page",children:"Next"})]})]})})]})})}function jwe(){const{toast:e}=rt(),[t,r]=g.useState(!1),[i,a]=g.useState(null),[s,o]=g.useState({name:"",time:"09:00",message:"",active:!0}),l=()=>{o({name:"",time:"09:00",message:"",active:!0}),a(null)},{data:c,isLoading:d}=he({queryKey:["/api/admin/schedules"],queryFn:()=>Ie("/api/admin/schedules")}),{data:u}=he({queryKey:["/api/admin/schedules/stats"],queryFn:()=>Ie("/api/admin/schedules/stats")}),f=Ve({mutationFn:async x=>i?await Ie(`/api/admin/schedules/${i.id}`,"PATCH",x):await Ie("/api/admin/schedules","POST",x),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/schedules"]}),Te.invalidateQueries({queryKey:["/api/admin/schedules/stats"]}),r(!1),l(),e({title:i?"Schedule Updated":"Schedule Created",description:i?"Schedule has been updated successfully":"New schedule has been created"})},onError:x=>{e({title:"Error",description:x.message||"Failed to save schedule",variant:"destructive"})}}),h=Ve({mutationFn:async x=>await Ie(`/api/admin/schedules/${x}/toggle`,"POST",{}),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/schedules"]}),e({title:"Schedule Updated",description:"Schedule status has been changed"})}}),p=Ve({mutationFn:async x=>await Ie(`/api/admin/schedules/${x}`,"DELETE",{}),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/schedules"]}),e({title:"Schedule Deleted",description:"Schedule has been permanently deleted"})}}),y=x=>{a(x),o({name:x.message||"",time:x.scheduleTime||"09:00",message:x.message||"",active:x.active!==!1}),r(!0)},v=x=>{x.preventDefault(),f.mutate(s)},b=(c==null?void 0:c.schedules)||[];return n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"SMS & Email Schedules"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage automated delivery schedules"})]}),n.jsxs(Ar,{open:t,onOpenChange:x=>{x||l(),r(x)},children:[n.jsx(bf,{asChild:!0,children:n.jsxs(Q,{"data-testid":"button-create-schedule",children:[n.jsx(I1,{className:"w-4 h-4 mr-2"}),"Create Schedule"]})}),n.jsx(yr,{children:n.jsxs("form",{onSubmit:v,children:[n.jsxs(br,{children:[n.jsx(jr,{children:i?"Edit Schedule":"Create New Schedule"}),n.jsx(sn,{children:i?"Update the schedule details":"Set up a new automated delivery schedule"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"message",children:"Message/Schedule Name"}),n.jsx(aa,{id:"message",value:s.message,onChange:x=>o({...s,message:x.target.value,name:x.target.value}),placeholder:"Daily technique delivery",required:!0,rows:2,"data-testid":"textarea-message"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"time",children:"Time of Day (24-hour format)"}),n.jsx(je,{id:"time",type:"time",value:s.time,onChange:x=>o({...s,time:x.target.value}),required:!0,"data-testid":"input-schedule-time"})]})]}),n.jsxs(Ys,{children:[n.jsx(Q,{type:"button",variant:"outline",onClick:()=>r(!1),"data-testid":"button-cancel",children:"Cancel"}),n.jsx(Q,{type:"submit",disabled:f.isPending,"data-testid":"button-save-schedule",children:f.isPending?"Saving...":i?"Update":"Create"})]})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(W,{"data-testid":"card-total-schedules",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Schedules"}),n.jsx(Px,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:(u==null?void 0:u.total)||0})})]}),n.jsxs(W,{"data-testid":"card-active-schedules",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Active"}),n.jsx(Zn,{className:"h-4 w-4 text-green-500"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-active",children:(u==null?void 0:u.active)||0})})]}),n.jsxs(W,{"data-testid":"card-total-recipients",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Recipients"}),n.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-recipients",children:(u==null?void 0:u.totalRecipients)||0})})]}),n.jsxs(W,{"data-testid":"card-sent-today",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Sent Today"}),n.jsx(Da,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-sent-today",children:(u==null?void 0:u.sentToday)||0})})]})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"All Schedules"}),n.jsx(Be,{children:"Manage your automated delivery schedules"})]}),n.jsx(K,{children:d?n.jsx("div",{className:"text-center py-8",children:"Loading..."}):b.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No schedules found. Create your first schedule to get started."}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Message/Name"}),n.jsx(Y,{children:"Time"}),n.jsx(Y,{children:"Recipients"}),n.jsx(Y,{children:"Last Sent"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{className:"text-right",children:"Actions"})]})}),n.jsx(Ct,{children:b.map(x=>n.jsxs(Se,{"data-testid":`row-schedule-${x.id}`,children:[n.jsx(V,{className:"font-medium",children:x.message}),n.jsx(V,{children:x.scheduleTime}),n.jsx(V,{children:x.recipientCount||0}),n.jsx(V,{className:"text-sm text-muted-foreground",children:x.lastSent?vn(new Date(x.lastSent),"MMM dd, HH:mm"):"Never"}),n.jsx(V,{children:x.active?n.jsxs(ae,{variant:"default","data-testid":`badge-status-${x.id}`,children:[n.jsx(Zn,{className:"w-3 h-3 mr-1"}),"Active"]}):n.jsxs(ae,{variant:"secondary","data-testid":`badge-status-${x.id}`,children:[n.jsx(P0,{className:"w-3 h-3 mr-1"}),"Paused"]})}),n.jsx(V,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>h.mutate(x.id),"data-testid":`button-toggle-${x.id}`,children:x.active?n.jsx(P0,{className:"w-4 h-4"}):n.jsx(Zn,{className:"w-4 h-4"})}),n.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>y(x),"data-testid":`button-edit-${x.id}`,children:n.jsx(Iu,{className:"w-4 h-4"})}),n.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>p.mutate(x.id),"data-testid":`button-delete-${x.id}`,children:n.jsx(to,{className:"w-4 h-4"})})]})})]},x.id))})]})})})]})]})})}function wwe(){var m,j,N;const[e,t]=g.useState(""),[r,i]=g.useState("all"),[a,s]=g.useState("all"),[o,l]=g.useState("all"),[c,d]=g.useState("all"),[u,f]=g.useState(null),{data:h,isLoading:p}=he({queryKey:["/api/admin/techniques",{instructorFilter:r,categoryFilter:a,scoreFilter:o,statusFilter:c}],queryFn:()=>Ie(`/api/admin/techniques?instructor=${r}&category=${a}&score=${o}&status=${c}`)}),{data:y}=he({queryKey:["/api/admin/techniques/stats"],queryFn:()=>Ie("/api/admin/techniques/stats")}),{data:v}=he({queryKey:["/api/admin/techniques/instructors"],queryFn:()=>Ie("/api/admin/techniques/instructors")}),b=((m=h==null?void 0:h.techniques)==null?void 0:m.filter(w=>{var C,k,A;if(!e)return!0;const S=e.toLowerCase();return((C=w.title)==null?void 0:C.toLowerCase().includes(S))||((k=w.instructorName)==null?void 0:k.toLowerCase().includes(S))||((A=w.position)==null?void 0:A.toLowerCase().includes(S))}))||[],x=w=>w>=80?"default":w>=70?"secondary":"destructive";return n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Techniques & Videos"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Browse and manage analyzed BJJ technique videos"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(W,{"data-testid":"card-total-videos",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Videos"}),n.jsx(ka,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:(y==null?void 0:y.total)||0})})]}),n.jsxs(W,{"data-testid":"card-avg-score",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Avg Score"}),n.jsx(Kr,{className:"h-4 w-4 text-yellow-500"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-avg-score",children:((j=y==null?void 0:y.avgScore)==null?void 0:j.toFixed(1))||0})})]}),n.jsxs(W,{"data-testid":"card-top-instructors",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Unique Instructors"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-instructors",children:(y==null?void 0:y.uniqueInstructors)||0})})]}),n.jsxs(W,{"data-testid":"card-analyzed",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Analyzed"}),n.jsx($n,{className:"h-4 w-4 text-green-500"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-analyzed",children:(y==null?void 0:y.analyzed)||0})})]})]}),n.jsxs(W,{children:[n.jsx(X,{children:n.jsx(Z,{children:"Filters"})}),n.jsxs(K,{className:"flex flex-wrap gap-4",children:[n.jsx("div",{className:"flex-1 min-w-[200px]",children:n.jsxs("div",{className:"relative",children:[n.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(je,{placeholder:"Search techniques, instructors...",value:e,onChange:w=>t(w.target.value),className:"pl-10","data-testid":"input-search"})]})}),n.jsxs(Je,{value:r,onValueChange:i,children:[n.jsx(Ye,{className:"w-[200px]","data-testid":"select-instructor",children:n.jsx(Xe,{placeholder:"All instructors"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Instructors"}),(N=v==null?void 0:v.instructors)==null?void 0:N.map(w=>n.jsx(G,{value:w,children:w},w))]})]}),n.jsxs(Je,{value:a,onValueChange:s,children:[n.jsx(Ye,{className:"w-[150px]","data-testid":"select-category",children:n.jsx(Xe,{placeholder:"Category"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Categories"}),n.jsx(G,{value:"submission",children:"Submission"}),n.jsx(G,{value:"sweep",children:"Sweep"}),n.jsx(G,{value:"pass",children:"Pass"}),n.jsx(G,{value:"escape",children:"Escape"}),n.jsx(G,{value:"takedown",children:"Takedown"})]})]}),n.jsxs(Je,{value:o,onValueChange:l,children:[n.jsx(Ye,{className:"w-[150px]","data-testid":"select-score",children:n.jsx(Xe,{placeholder:"Score range"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Scores"}),n.jsx(G,{value:"80+",children:"80+ (Elite)"}),n.jsx(G,{value:"70-79",children:"70-79 (Good)"}),n.jsx(G,{value:"60-69",children:"60-69 (Fair)"}),n.jsx(G,{value:"0-59",children:"Below 60"})]})]}),n.jsxs(Je,{value:c,onValueChange:d,children:[n.jsx(Ye,{className:"w-[150px]","data-testid":"select-status",children:n.jsx(Xe,{placeholder:"Status"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All Status"}),n.jsx(G,{value:"analyzed",children:"Analyzed"}),n.jsx(G,{value:"pending",children:"Pending"}),n.jsx(G,{value:"failed",children:"Failed"})]})]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"All Techniques"}),n.jsx(Be,{children:"View analyzed videos with detailed scoring"})]}),n.jsx(K,{children:p?n.jsx("div",{className:"text-center py-8",children:"Loading..."}):b.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No techniques found matching your filters."}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{className:"max-w-[250px]",children:"Title"}),n.jsx(Y,{children:"Instructor"}),n.jsx(Y,{children:"Quality"}),n.jsx(Y,{children:"Teaching"}),n.jsx(Y,{children:"Production"}),n.jsx(Y,{children:"Detail"}),n.jsx(Y,{className:"text-right",children:"Views"}),n.jsx(Y,{className:"text-right",children:"Helpful"}),n.jsx(Y,{children:"Date"}),n.jsx(Y,{className:"text-right",children:"Actions"})]})}),n.jsx(Ct,{children:b.map(w=>{const S=Number(w.finalScore||0),C=Number(w.teachingClarity||0),k=Number(w.productionQuality||0),A=Number(w.keyDetailQuality||0),E=w.viewCount||0,T=w.helpfulRatio||0;return n.jsxs(Se,{"data-testid":`row-technique-${w.id}`,children:[n.jsx(V,{className:"max-w-[250px] truncate font-medium",children:w.title}),n.jsx(V,{className:"text-sm",children:w.instructorName||"Unknown"}),n.jsx(V,{children:n.jsxs(ae,{variant:x(S*10),"data-testid":`badge-score-${w.id}`,children:[S.toFixed(1),"/10"]})}),n.jsx(V,{className:"text-center font-mono text-sm",children:C>0?C.toFixed(1):"-"}),n.jsx(V,{className:"text-center font-mono text-sm",children:k>0?k.toFixed(1):"-"}),n.jsx(V,{className:"text-center font-mono text-sm",children:A>0?A.toFixed(1):"-"}),n.jsx(V,{className:"text-right font-mono text-sm",children:E>0?E.toLocaleString():"-"}),n.jsx(V,{className:"text-right font-mono text-sm",children:T>0?n.jsxs("span",{className:"text-green-600",children:[T,"%"]}):n.jsx("span",{className:"text-muted-foreground",children:"-"})}),n.jsx(V,{className:"text-sm text-muted-foreground",children:w.createdAt?vn(new Date(w.createdAt),"MMM dd"):"N/A"}),n.jsx(V,{className:"text-right",children:n.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>f(w),"data-testid":`button-view-${w.id}`,children:n.jsx(Mr,{className:"w-4 h-4"})})})]},w.id)})})]})})})]}),n.jsx(Ar,{open:!!u,onOpenChange:w=>!w&&f(null),children:n.jsxs(yr,{className:"max-w-3xl",children:[n.jsxs(br,{children:[n.jsx(jr,{children:"Technique Analysis Details"}),n.jsx(sn,{children:u==null?void 0:u.title})]}),u&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-muted",children:n.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${u.videoId}`,title:u.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"Quality Analysis"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Overall"}),n.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsxs("div",{className:"text-2xl font-bold",children:[Number(u.finalScore||0).toFixed(1),"/10"]})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Teaching"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsxs("div",{className:"text-2xl font-bold",children:[Number(u.teachingClarity||0)>0?Number(u.teachingClarity).toFixed(1):"-","/10"]})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Production"}),n.jsx(ka,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsxs("div",{className:"text-2xl font-bold",children:[Number(u.productionQuality||0)>0?Number(u.productionQuality).toFixed(1):"-","/10"]})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Detail"}),n.jsx($n,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsxs("div",{className:"text-2xl font-bold",children:[Number(u.keyDetailQuality||0)>0?Number(u.keyDetailQuality).toFixed(1):"-","/10"]})})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"User Engagement"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Views"}),n.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold",children:u.viewCount>0?u.viewCount.toLocaleString():"-"})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Helpful"}),n.jsx(Sa,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.helpfulRatio>0?`${u.helpfulRatio}%`:"-"}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.helpfulCount||0," helpful votes"]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Likes"}),n.jsx(Sa,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold",children:u.likeCount>0?u.likeCount.toLocaleString():"-"})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Bookmarks"}),n.jsx(_i,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold",children:u.recommendationCount>0?u.recommendationCount:"-"})})]})]})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Instructor:"}),n.jsx("span",{className:"font-medium",children:u.instructorName||"Unknown"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Position:"}),n.jsx("span",{className:"font-medium capitalize",children:u.position||"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Technique Type:"}),n.jsx("span",{className:"font-medium capitalize",children:u.techniqueType||"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Belt Appropriate:"}),n.jsx("span",{className:"font-medium capitalize",children:u.beltAppropriate||"All"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Content Level:"}),n.jsx("span",{className:"font-medium",children:u.contentLevel||"N/A"})]})]}),u.keyDetails&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Key Details:"}),n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:u.keyDetails})]}),n.jsx(Q,{asChild:!0,className:"w-full",children:n.jsx("a",{href:u.videoUrl,target:"_blank",rel:"noopener noreferrer",children:"Watch on YouTube"})})]})]})})]})})}function Nwe(){const{toast:e}=rt(),[t,r]=g.useState(null),[i,a]=g.useState(!1),[s,o]=g.useState(null),{data:l,isLoading:c,error:d}=he({queryKey:["/api/admin/flagged-accounts"],queryFn:()=>Ie("/api/admin/flagged-accounts")}),{data:u}=he({queryKey:["/api/admin/devices",s],queryFn:()=>Ie(`/api/admin/devices/${s}`),enabled:!!s&&i}),f=Ve({mutationFn:async({userId:b,resolution:x})=>await Ie(`/api/admin/flagged-accounts/${b}/review`,"POST",{resolution:x}),onSuccess:(b,x)=>{Te.invalidateQueries({queryKey:["/api/admin/flagged-accounts"]}),e({title:" Account Reviewed",description:x.resolution==="legitimate"?"Account marked as legitimate":"Account flagged as fraudulent"}),r(null)},onError:b=>{e({title:"Error",description:b.message||"Failed to resolve flag",variant:"destructive"})}}),h=(b,x)=>{o(b),r(x),a(!0)},p=b=>{switch(b){case"HIGH":return"bg-red-500/10 text-red-500 border-red-500/20";case"MEDIUM":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"LOW":return"bg-blue-500/10 text-blue-500 border-blue-500/20";default:return"bg-muted text-muted-foreground"}},y=(l==null?void 0:l.filter(b=>!b.isResolved))||[],v=(l==null?void 0:l.filter(b=>b.isResolved))||[];return n.jsx(qt,{title:"Account Sharing Prevention",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Flagged"}),n.jsx($s,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-flagged",children:(l==null?void 0:l.length)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Accounts requiring review"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Unresolved"}),n.jsx(Ri,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-unresolved-count",children:y.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending admin action"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"High Risk"}),n.jsx($s,{className:"h-4 w-4 text-red-500"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-500","data-testid":"text-high-risk-count",children:(l==null?void 0:l.filter(b=>b.riskLevel==="HIGH").length)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Critical attention needed"})]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Flagged Accounts"}),n.jsx(Be,{children:"Review and take action on accounts with suspicious sharing patterns"})]}),n.jsx(K,{children:d?n.jsxs("div",{className:"text-center py-8","data-testid":"error-flagged-accounts",children:[n.jsx(Go,{className:"h-12 w-12 mx-auto mb-2 text-red-500"}),n.jsx("p",{className:"text-red-500 font-medium",children:"Failed to load flagged accounts"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d.message})]}):c?n.jsx("div",{className:"flex justify-center py-8","data-testid":"loading-flagged-accounts",children:n.jsx(qe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):y.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-no-flagged-accounts",children:[n.jsx(Ii,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),n.jsx("p",{children:"No flagged accounts to review"})]}):n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"User"}),n.jsx(Y,{children:"Risk Level"}),n.jsx(Y,{children:"Fraud Score"}),n.jsx(Y,{children:"Indicators"}),n.jsx(Y,{children:"Devices"}),n.jsx(Y,{children:"Flagged"}),n.jsx(Y,{className:"text-right",children:"Actions"})]})}),n.jsx(Ct,{children:y.map(b=>n.jsxs(Se,{"data-testid":`row-flagged-account-${b.userId}`,children:[n.jsx(V,{children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:b.name||"Unknown"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:b.phoneNumber})]})}),n.jsx(V,{children:n.jsx(ae,{className:p(b.riskLevel),"data-testid":`badge-risk-${b.userId}`,children:b.riskLevel})}),n.jsx(V,{children:n.jsx("div",{className:"font-mono text-sm","data-testid":`text-fraud-score-${b.userId}`,children:b.fraudScore.toFixed(2)})}),n.jsx(V,{children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[b.fraudIndicators.slice(0,2).map((x,m)=>n.jsx(ae,{variant:"outline",className:"text-xs",children:x},m)),b.fraudIndicators.length>2&&n.jsxs(ae,{variant:"outline",className:"text-xs",children:["+",b.fraudIndicators.length-2]})]})}),n.jsx(V,{children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(_u,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:b.deviceCount})]})}),n.jsx(V,{className:"text-sm text-muted-foreground",children:Hl(new Date(b.flaggedAt),{addSuffix:!0})}),n.jsx(V,{className:"text-right",children:n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>h(b.userId,b),"data-testid":`button-view-devices-${b.userId}`,children:[n.jsx(Mr,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>f.mutate({userId:b.userId,resolution:"legitimate"}),disabled:f.isPending,"data-testid":`button-mark-legitimate-${b.userId}`,children:[n.jsx(Ii,{className:"h-3 w-3 mr-1"}),"Legitimate"]}),n.jsxs(Q,{size:"sm",variant:"destructive",onClick:()=>f.mutate({userId:b.userId,resolution:"fraudulent"}),disabled:f.isPending,"data-testid":`button-mark-fraudulent-${b.userId}`,children:[n.jsx(Go,{className:"h-3 w-3 mr-1"}),"Fraudulent"]})]})})]},b.id))})]})})]}),v.length>0&&n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Resolved Accounts"}),n.jsx(Be,{children:"Previously reviewed flagged accounts"})]}),n.jsx(K,{children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"User"}),n.jsx(Y,{children:"Risk Level"}),n.jsx(Y,{children:"Fraud Score"}),n.jsx(Y,{children:"Reviewed"})]})}),n.jsx(Ct,{children:v.map(b=>n.jsxs(Se,{className:"opacity-60",children:[n.jsx(V,{children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:b.name||"Unknown"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:b.phoneNumber})]})}),n.jsx(V,{children:n.jsx(ae,{className:p(b.riskLevel),children:b.riskLevel})}),n.jsx(V,{children:n.jsx("div",{className:"font-mono text-sm",children:b.fraudScore.toFixed(2)})}),n.jsx(V,{className:"text-sm text-muted-foreground",children:b.lastReviewedAt?Hl(new Date(b.lastReviewedAt),{addSuffix:!0}):"Never"})]},b.id))})]})})]}),n.jsx(Ar,{open:i,onOpenChange:a,children:n.jsxs(yr,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(br,{children:[n.jsx(jr,{children:"Device Details"}),n.jsx(sn,{children:t&&n.jsxs(n.Fragment,{children:["Authorized devices for ",t.name||t.phoneNumber," - ",n.jsxs(ae,{className:p(t.riskLevel),children:[t.riskLevel," RISK"]})]})})]}),t&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs(W,{children:[n.jsx(X,{children:n.jsx(Z,{className:"text-sm",children:"Fraud Indicators"})}),n.jsx(K,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:t.fraudIndicators.map((b,x)=>n.jsx(ae,{variant:"outline",children:b},x))})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold mb-3",children:["Authorized Devices (",(u==null?void 0:u.length)||0,")"]}),u&&u.length>0?n.jsx("div",{className:"space-y-2",children:u.map(b=>n.jsx(W,{children:n.jsx(K,{className:"p-4",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(_u,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:b.deviceName}),b.isActive?n.jsx(ae,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:"Active"}):n.jsx(ae,{variant:"outline",children:"Inactive"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"IP:"})," ",b.ipAddress]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Location:"})," ",b.location||"Unknown"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"First seen:"})," ",Hl(new Date(b.firstSeenAt),{addSuffix:!0})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Last seen:"})," ",Hl(new Date(b.lastSeenAt),{addSuffix:!0})]})]}),n.jsxs("div",{className:"mt-2 text-xs text-muted-foreground font-mono",children:["Fingerprint: ",b.fingerprint.substring(0,16),"..."]})]})})})},b.id))}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"No devices found"})]})]})]})})]})})}function Swe(){const{toast:e}=rt(),[t,r]=g.useState(null),[i,a]=g.useState(!1),[s,o]=g.useState(!1),[l,c]=g.useState(""),{data:d,isLoading:u,error:f}=he({queryKey:["/api/admin/instructors/priority/list"],queryFn:()=>Ie("/api/admin/instructors/priority/list")}),{data:h}=he({queryKey:["/api/admin/instructors/priority/details",t==null?void 0:t.instructorId],queryFn:()=>Ie(`/api/admin/instructors/priority/${t==null?void 0:t.instructorId}`),enabled:!!t&&i}),p=Ve({mutationFn:async j=>{const N=j?`/api/admin/instructors/priority/recalculate/${j}`:"/api/admin/instructors/priority/recalculate";return await Ie(N,"POST",{})},onSuccess:(j,N)=>{Te.invalidateQueries({queryKey:["/api/admin/instructors/priority/list"]}),N&&Te.invalidateQueries({queryKey:["/api/admin/instructors/priority/details",N]}),e({title:" Priority Recalculated",description:N?"Instructor priority updated successfully":`Recalculated priority for ${j.recalculated||0} instructors`})},onError:j=>{e({title:"Error",description:j.message||"Failed to recalculate priority",variant:"destructive"})}}),y=Ve({mutationFn:async({instructorId:j,score:N})=>await Ie(`/api/admin/instructors/priority/override/${j}`,"POST",{manualScore:N}),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/instructors/priority/list"]}),t&&Te.invalidateQueries({queryKey:["/api/admin/instructors/priority/details",t.instructorId]}),e({title:" Manual Override Set",description:"Instructor priority manually overridden"}),o(!1),c("")},onError:j=>{e({title:"Error",description:j.message||"Failed to set manual override",variant:"destructive"})}}),v=j=>{r(j),a(!0),o(!1),c("")},b=()=>{if(!t||!l)return;const j=parseFloat(l);if(isNaN(j)||j<0||j>100){e({title:"Invalid Score",description:"Priority score must be between 0 and 100",variant:"destructive"});return}y.mutate({instructorId:t.instructorId,score:j})},x=j=>j>=80?"bg-green-500/10 text-green-500 border-green-500/20":j>=60?"bg-blue-500/10 text-blue-500 border-blue-500/20":j>=40?"bg-yellow-500/10 text-yellow-500 border-yellow-500/20":"bg-red-500/10 text-red-500 border-red-500/20",m=d?[...d].sort((j,N)=>N.priorityScore-j.priorityScore):[];return n.jsx(qt,{title:"Instructor Priority Management",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Instructor Priority Scores"}),n.jsx("p",{className:"text-muted-foreground",children:"Auto-calculated scores based on YouTube subs, achievements, instructionals, and user feedback"})]}),n.jsxs(Q,{onClick:()=>p.mutate(),disabled:p.isPending,"data-testid":"button-recalculate-all",children:[p.isPending?n.jsx(qe,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Recalculate All"]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Instructors"}),n.jsx(Rs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-instructors",children:(d==null?void 0:d.length)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"High Priority"}),n.jsx(sr,{className:"h-4 w-4 text-green-500"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-500","data-testid":"text-high-priority-count",children:(d==null?void 0:d.filter(j=>j.priorityScore>=80).length)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Score  80"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Manual Overrides"}),n.jsx(Iu,{className:"h-4 w-4 text-blue-500"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold text-blue-500","data-testid":"text-manual-override-count",children:(d==null?void 0:d.filter(j=>j.isManualOverride).length)||0})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Avg Priority"}),n.jsx(dI,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-avg-priority",children:d!=null&&d.length?(d.reduce((j,N)=>j+N.priorityScore,0)/d.length).toFixed(1):"0.0"})})]})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Instructor Rankings"}),n.jsx(Be,{children:"Priority formula: YouTube (30pts) + Achievements (25pts) + Instructionals (20pts) + Feedback (25pts) = 100pts max"})]}),n.jsx(K,{children:f?n.jsxs("div",{className:"text-center py-8","data-testid":"error-instructors",children:[n.jsx(XCircle,{className:"h-12 w-12 mx-auto mb-2 text-red-500"}),n.jsx("p",{className:"text-red-500 font-medium",children:"Failed to load instructor data"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.message})]}):u?n.jsx("div",{className:"flex justify-center py-8","data-testid":"loading-instructors",children:n.jsx(qe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):m.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-no-instructors",children:"No instructors found"}):n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Rank"}),n.jsx(Y,{children:"Instructor"}),n.jsx(Y,{children:"Priority Score"}),n.jsx(Y,{children:"YouTube"}),n.jsx(Y,{children:"Achievements"}),n.jsx(Y,{children:"Instructionals"}),n.jsx(Y,{children:"Feedback"}),n.jsx(Y,{children:"Last Updated"}),n.jsx(Y,{className:"text-right",children:"Actions"})]})}),n.jsx(Ct,{children:m.map((j,N)=>n.jsxs(Se,{"data-testid":`row-instructor-${j.instructorId}`,children:[n.jsxs(V,{className:"font-medium",children:["#",N+1]}),n.jsx(V,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:j.instructorName}),j.isManualOverride&&n.jsxs(ae,{variant:"outline",className:"text-xs",children:[n.jsx(Iu,{className:"h-3 w-3 mr-1"}),"Manual"]})]})}),n.jsx(V,{children:n.jsx(ae,{className:x(j.priorityScore),"data-testid":`badge-priority-${j.instructorId}`,children:j.priorityScore.toFixed(1)})}),n.jsx(V,{children:n.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[n.jsx(wk,{className:"h-3 w-3 text-red-500"}),n.jsx("span",{children:j.youtubeScore.toFixed(1)})]})}),n.jsx(V,{children:n.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[n.jsx(Rs,{className:"h-3 w-3 text-yellow-500"}),n.jsx("span",{children:j.achievementScore.toFixed(1)})]})}),n.jsx(V,{children:n.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[n.jsx(Ko,{className:"h-3 w-3 text-blue-500"}),n.jsx("span",{children:j.instructionalScore.toFixed(1)})]})}),n.jsx(V,{children:n.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[n.jsx(Kr,{className:"h-3 w-3 text-purple-500"}),n.jsx("span",{children:j.feedbackScore.toFixed(1)})]})}),n.jsx(V,{className:"text-sm text-muted-foreground",children:Hl(new Date(j.lastCalculated),{addSuffix:!0})}),n.jsx(V,{className:"text-right",children:n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(Q,{size:"sm",variant:"outline",onClick:()=>v(j),"data-testid":`button-view-details-${j.instructorId}`,children:"View Details"}),n.jsx(Q,{size:"sm",variant:"outline",onClick:()=>p.mutate(j.instructorId),disabled:p.isPending,"data-testid":`button-recalculate-${j.instructorId}`,children:n.jsx(Fn,{className:"h-3 w-3"})})]})})]},j.id))})]})})]}),n.jsx(Ar,{open:i,onOpenChange:a,children:n.jsxs(yr,{className:"max-w-2xl",children:[n.jsxs(br,{children:[n.jsxs(jr,{children:[t==null?void 0:t.instructorName," - Priority Breakdown"]}),n.jsx(sn,{children:"Detailed calculation of instructor priority score"})]}),h&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(W,{children:n.jsxs(X,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Z,{children:"Total Priority Score"}),n.jsxs(ae,{className:x(h.priorityScore),children:[h.priorityScore.toFixed(1)," / 100"]})]}),h.isManualOverride&&n.jsx(Be,{className:"text-blue-500",children:" Manual override active"})]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(W,{children:n.jsxs(K,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wk,{className:"h-4 w-4 text-red-500"}),n.jsx("span",{className:"font-medium",children:"YouTube Subscribers"})]}),n.jsxs("span",{className:"font-bold",children:[h.breakdown.youtube.score," / ",h.breakdown.youtube.maxScore]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.breakdown.youtube.details})]})}),n.jsx(W,{children:n.jsxs(K,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rs,{className:"h-4 w-4 text-yellow-500"}),n.jsx("span",{className:"font-medium",children:"Achievements"})]}),n.jsxs("span",{className:"font-bold",children:[h.breakdown.achievements.score," / ",h.breakdown.achievements.maxScore]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.breakdown.achievements.details})]})}),n.jsx(W,{children:n.jsxs(K,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ko,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Instructionals"})]}),n.jsxs("span",{className:"font-bold",children:[h.breakdown.instructionals.score," / ",h.breakdown.instructionals.maxScore]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.breakdown.instructionals.details})]})}),n.jsx(W,{children:n.jsxs(K,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kr,{className:"h-4 w-4 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"User Feedback"})]}),n.jsxs("span",{className:"font-bold",children:[h.breakdown.feedback.score," / ",h.breakdown.feedback.maxScore]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.breakdown.feedback.details})]})})]}),n.jsxs(W,{children:[n.jsx(X,{children:n.jsx(Z,{className:"text-sm",children:"Manual Override"})}),n.jsx(K,{children:s?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(ce,{htmlFor:"manual-score",children:"Priority Score (0-100)"}),n.jsx(je,{id:"manual-score",type:"number",min:"0",max:"100",step:"0.1",value:l,onChange:j=>c(j.target.value),placeholder:"Enter manual priority score","data-testid":"input-manual-score"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Q,{onClick:b,disabled:y.isPending,"data-testid":"button-save-manual-override",children:[n.jsx(xI,{className:"h-4 w-4 mr-2"}),"Save Override"]}),n.jsxs(Q,{variant:"outline",onClick:()=>{o(!1),c("")},"data-testid":"button-cancel-manual-override",children:[n.jsx(Fi,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}):n.jsxs(Q,{variant:"outline",onClick:()=>o(!0),"data-testid":"button-edit-manual-override",children:[n.jsx(Iu,{className:"h-4 w-4 mr-2"}),"Set Manual Override"]})})]})]})]})})]})})}function kwe(){var v,b,x,m,j,N,w,S,C,k,A,E,T,P,_;const[e,t]=g.useState("24"),{data:r,isLoading:i,error:a}=he({queryKey:[`/api/admin/activity/stats?hours=${e}`],refetchInterval:3e4,refetchIntervalInBackground:!1}),{data:s,isLoading:o,error:l}=he({queryKey:["/api/admin/activity/feed?limit=100"],refetchInterval:3e4,refetchIntervalInBackground:!1}),{data:c,isLoading:d,error:u}=he({queryKey:[`/api/admin/activity/metrics?hours=${e}`],refetchInterval:3e4,refetchIntervalInBackground:!1}),f=r==null?void 0:r.stats,h=(s==null?void 0:s.feed)||[],p=c==null?void 0:c.metrics,y=R=>{switch(R){case"user_signup":return"";case"video_approved":return"";case"video_rejected":return"";case"prof_query":return"";case"video_recommended":return"";case"video_saved":return"";case"referral":return"";case"lifetime_access":return"";default:return""}};return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Activity Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"System health and activity monitoring"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Q,{variant:e==="1"?"default":"outline",onClick:()=>t("1"),"data-testid":"button-filter-1h",children:"Last Hour"}),n.jsx(Q,{variant:e==="6"?"default":"outline",onClick:()=>t("6"),"data-testid":"button-filter-6h",children:"6 Hours"}),n.jsx(Q,{variant:e==="24"?"default":"outline",onClick:()=>t("24"),"data-testid":"button-filter-24h",children:"24 Hours"})]})]}),(a||l||u)&&n.jsxs(W,{className:"border-destructive",children:[n.jsx(X,{children:n.jsx(Z,{className:"text-destructive",children:"Error Loading Data"})}),n.jsx(K,{children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[a&&"Failed to load stats. ",l&&"Failed to load activity feed. ",u&&"Failed to load metrics. ","Please refresh the page."]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(W,{"data-testid":"card-new-users",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"New Users"}),n.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-new-users-count",children:i?"...":(f==null?void 0:f.newUsers)||0}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last ",e," hours"]})]})]}),n.jsxs(W,{"data-testid":"card-video-curation",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:" Video Curation"}),n.jsx(ka,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Videos"}),n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-videos",children:i?"...":((v=f==null?void 0:f.curation)==null?void 0:v.totalVideos)||0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"TODAY'S ACTIVITY:"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:" Videos Saved:"}),n.jsx("span",{className:"font-mono text-green-600","data-testid":"text-videos-saved",children:((b=f==null?void 0:f.curation)==null?void 0:b.videosApproved)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:" Videos Searched:"}),n.jsx("span",{className:"font-mono","data-testid":"text-videos-searched",children:((x=f==null?void 0:f.curation)==null?void 0:x.videosAnalyzed)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:" Videos Rejected:"}),n.jsx("span",{className:"font-mono text-red-600","data-testid":"text-videos-rejected",children:((m=f==null?void 0:f.curation)==null?void 0:m.videosRejected)||0})]})]})]})]})})]}),n.jsxs(W,{"data-testid":"card-engagement",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Engagement"}),n.jsx(Fo,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-active-users",children:i?"...":((j=f==null?void 0:f.engagement)==null?void 0:j.activeUsers)||0}),n.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground mt-1",children:[n.jsxs("span",{children:[" ",((N=f==null?void 0:f.engagement)==null?void 0:N.profQueries)||0," queries"]}),n.jsxs("span",{children:[" ",((w=f==null?void 0:f.engagement)==null?void 0:w.videosSaved)||0," saves"]})]})]})]}),n.jsxs(W,{"data-testid":"card-referrals",children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Referrals"}),n.jsx(uf,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-new-referrals",children:i?"...":((S=f==null?void 0:f.referrals)==null?void 0:S.newReferrals)||0}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["From ",((C=f==null?void 0:f.referrals)==null?void 0:C.uniqueReferrers)||0," referrers"]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs(W,{className:"lg:col-span-2","data-testid":"card-activity-feed",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Live Activity Feed"}),n.jsx(Be,{children:"Recent system events and user actions"})]}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:o?n.jsx("p",{className:"text-muted-foreground",children:"Loading activity..."}):h.length===0?n.jsx("p",{className:"text-muted-foreground",children:"No recent activity"}):h.map(R=>n.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover-elevate","data-testid":`activity-event-${R.id}`,children:[n.jsx("span",{className:"text-2xl",children:y(R.event_type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:R.description}),n.jsx("p",{className:"text-xs text-muted-foreground",children:vn(new Date(R.created_at),"MMM d, h:mm a")})]}),n.jsx(ae,{variant:"outline",className:"text-xs",children:R.event_type.replace("_"," ")})]},R.id))})})]}),n.jsxs(W,{"data-testid":"card-quick-stats",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Quick Stats"}),n.jsx(Be,{children:"System health indicators"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium",children:"Approval Rate"}),n.jsxs("span",{className:"text-sm font-bold",children:[((k=f==null?void 0:f.curation)==null?void 0:k.approvalRate)||0,"%"]})]}),n.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${((A=f==null?void 0:f.curation)==null?void 0:A.approvalRate)||0}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium",children:"User Engagement"}),n.jsxs("span",{className:"text-sm font-bold",children:[((E=f==null?void 0:f.engagement)==null?void 0:E.activeUsers)||0," active"]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avg ",Math.round((((T=f==null?void 0:f.engagement)==null?void 0:T.profQueries)||0)/Math.max(((P=f==null?void 0:f.engagement)==null?void 0:P.activeUsers)||1,1))," queries/user"]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium",children:"Video Library"}),n.jsx("span",{className:"text-sm font-bold",children:"Growing"})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",((_=f==null?void 0:f.curation)==null?void 0:_.videosApproved)||0," videos today"]})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(W,{"data-testid":"card-curation-performance",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Curation Performance"}),n.jsx(Be,{children:"Success rates by search query"})]}),n.jsx(K,{children:n.jsx("div",{className:"space-y-3",children:d?n.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):!(p!=null&&p.curationPerformance)||p.curationPerformance.length===0?n.jsx("p",{className:"text-muted-foreground",children:"No curation data available"}):p.curationPerformance.slice(0,5).map((R,O)=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium truncate",children:R.search_query}),n.jsxs(ae,{variant:parseFloat(R.success_rate)>=30?"default":"secondary",children:[R.success_rate,"%"]})]}),n.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Found: ",R.videos_found]}),n.jsxs("span",{className:"text-green-600",children:[" ",R.approved]}),n.jsxs("span",{className:"text-red-600",children:[" ",R.rejected]}),n.jsxs("span",{children:["Avg: ",R.avg_score,"/10"]})]})]},O))})})]}),n.jsxs(W,{"data-testid":"card-top-videos",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Top Performing Videos"}),n.jsx(Be,{children:"Most saved and recommended"})]}),n.jsx(K,{children:n.jsx("div",{className:"space-y-3",children:d?n.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):!(p!=null&&p.topVideos)||p.topVideos.length===0?n.jsx("p",{className:"text-muted-foreground",children:"No video data available"}):p.topVideos.slice(0,5).map((R,O)=>n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs(ae,{variant:"outline",className:"text-xs",children:["#",O+1]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:R.technique_name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:R.instructor_name}),n.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground mt-1",children:[n.jsxs("span",{children:[" ",R.times_saved," saves"]}),n.jsxs("span",{children:[" ",R.helpful_count," helpful"]}),n.jsxs("span",{children:[" ",R.quality_score]})]})]})]},R.id))})})]}),n.jsxs(W,{"data-testid":"card-user-growth",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"User Growth Trend"}),n.jsx(Be,{children:"Signups by hour"})]}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:d?n.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):!(p!=null&&p.userGrowth)||p.userGrowth.length===0?n.jsx("p",{className:"text-muted-foreground",children:"No growth data available"}):p.userGrowth.slice(0,8).map((R,O)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm font-medium w-16",children:[Math.floor(parseFloat(R.hour)),":00"]}),n.jsx("div",{className:"flex-1 bg-secondary rounded-full h-6 overflow-hidden",children:n.jsx("div",{className:"bg-primary h-full flex items-center px-2",style:{width:`${Math.min(100,parseInt(R.new_users)/Math.max(...p.userGrowth.map($=>parseInt($.new_users)))*100)}%`},children:n.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:R.new_users})})})]},O))})})]}),n.jsxs(W,{"data-testid":"card-referral-performance",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Top Referrers"}),n.jsx(Be,{children:"Highest conversion rates"})]}),n.jsx(K,{children:n.jsx("div",{className:"space-y-3",children:d?n.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):!(p!=null&&p.referralPerformance)||p.referralPerformance.length===0?n.jsx("p",{className:"text-muted-foreground",children:"No referral data available"}):p.referralPerformance.slice(0,5).map((R,O)=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium",children:R.referral_code}),n.jsxs(ae,{variant:"default",children:[R.conversion_rate,"% conversion"]})]}),n.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:[" ",R.referrer_phone]}),n.jsxs("span",{children:[" ",R.new_signups," referrals"]})]})]},O))})})]})]})]})}function Cwe(){var b;const{toast:e}=rt(),{data:t,isLoading:r}=he({queryKey:["/api/admin/curation-status"],queryFn:()=>Ie("/api/admin/curation-status"),refetchInterval:1e4}),{data:i}=he({queryKey:["/api/admin/curation-runs"],queryFn:()=>Ie("/api/admin/curation-runs?limit=20"),refetchInterval:1e4}),a=Ve({mutationFn:async x=>await Ie("/api/admin/toggle-curation","POST",{enabled:x}),onSuccess:(x,m)=>{Te.invalidateQueries({queryKey:["/api/admin/curation-status"]}),e({title:m?"Auto-Curation Enabled":"Auto-Curation Disabled",description:m?"Automatic video curation is now running on schedule":"Automatic video curation has been paused"})},onError:x=>{e({title:"Error",description:x.message||"Failed to update settings",variant:"destructive"})}}),s=Ve({mutationFn:async()=>await Ie("/api/admin/run-curation","POST",{}),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/curation-status"]}),Te.invalidateQueries({queryKey:["/api/admin/curation-runs"]}),e({title:"Curation Started",description:"Manual curation run started successfully"})},onError:x=>{e({title:"Error",description:x.message||"Failed to start curation",variant:"destructive"})}}),o=(x,m)=>{if(!m)return"In progress...";const j=new Date(x).getTime(),w=new Date(m).getTime()-j,S=Math.floor(w/1e3);if(S<60)return`${S}s`;const C=Math.floor(S/60),k=S%60;return`${C}m ${k}s`},l=x=>new Date(x).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),c=x=>{switch(x){case"completed":return n.jsxs(ae,{variant:"default",className:"bg-green-600",children:[n.jsx(Ii,{className:"w-3 h-3 mr-1"}),"Completed"]});case"running":return n.jsxs(ae,{variant:"secondary",children:[n.jsx(qe,{className:"w-3 h-3 mr-1 animate-spin"}),"Running"]});case"failed":return n.jsxs(ae,{variant:"destructive",children:[n.jsx(Go,{className:"w-3 h-3 mr-1"}),"Failed"]});default:return n.jsx(ae,{variant:"outline",children:x})}},d=x=>{if(!x)return n.jsx(ae,{variant:"outline",children:"-"});switch(x){case"ok":return n.jsxs(ae,{variant:"default",className:"bg-green-600 dark:bg-green-700",children:[n.jsx(Ri,{className:"w-3 h-3 mr-1"}),"OK"]});case"low":return n.jsxs(ae,{variant:"secondary",className:"bg-yellow-600 dark:bg-yellow-700 text-white dark:text-white",children:[n.jsx($s,{className:"w-3 h-3 mr-1"}),"Low"]});case"high":return n.jsxs(ae,{variant:"secondary",className:"bg-orange-600 dark:bg-orange-700 text-white dark:text-white",children:[n.jsx($s,{className:"w-3 h-3 mr-1"}),"High"]});case"critical":return n.jsxs(ae,{variant:"destructive",children:[n.jsx(In,{className:"w-3 h-3 mr-1"}),"Critical"]});case"no-data":return n.jsxs(ae,{variant:"outline",children:[n.jsx(p7,{className:"w-3 h-3 mr-1"}),"No Data"]});default:return n.jsx(ae,{variant:"outline",children:x})}};if(r)return n.jsx(qt,{children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(qe,{className:"w-8 h-8 animate-spin"})})});const u=(t==null?void 0:t.enabled)||!1,f=(t==null?void 0:t.today)||{},h=(t==null?void 0:t.quota)||{},p=(t==null?void 0:t.capacity)||{},y=t==null?void 0:t.lastRun,v=(i==null?void 0:i.runs)||[];return n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold",children:"Video Library Auto-Curation"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Automated discovery and quality control for BJJ technique videos"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-muted rounded-lg",children:[n.jsx(ce,{htmlFor:"auto-curation-toggle",className:"cursor-pointer font-medium",children:"Auto-Curation"}),n.jsx(aN,{id:"auto-curation-toggle",checked:u,onCheckedChange:x=>a.mutate(x),disabled:a.isPending,"data-testid":"toggle-auto-curation"}),u?n.jsx(ae,{variant:"default",className:"bg-green-600",children:"ON"}):n.jsx(ae,{variant:"secondary",children:"OFF"})]}),n.jsx(Q,{onClick:()=>s.mutate(),disabled:s.isPending,"data-testid":"button-run-now",children:s.isPending?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Running..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Run Now"]})})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Today's Runs"}),n.jsx(ka,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-today-runs",children:f.runs||0}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[f.videosApproved||0," videos added"]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Quota Used"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsxs("div",{className:"text-2xl font-bold","data-testid":"stat-quota-used",children:[h.percentUsed||"0","%"]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h.used||0," / ",h.limit||0]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Quota Remaining"}),n.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-quota-remaining",children:((b=h.remaining)==null?void 0:b.toLocaleString())||0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"API calls left"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Batch Size"}),n.jsx(Ii,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-batch-size",children:p.batchSize||0}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.runsPerDay||0,"x per day"]})]})]})]}),n.jsxs(W,{children:[n.jsx(X,{children:n.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[n.jsxs("div",{children:[n.jsx(Z,{children:"Recent Curation Runs"}),n.jsx(Be,{children:"Latest automated video discovery sessions"})]}),y&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Da,{className:"w-4 h-4"}),"Last run: ",l(y.runDate)]})]})}),n.jsx(K,{children:v.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No curation runs yet. Click "Run Now" to start the first run.'}):n.jsx("div",{className:"rounded-lg border",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Started"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{children:"Guardrail"}),n.jsx(Y,{className:"text-right",children:"Reviewed"}),n.jsx(Y,{className:"text-right",children:"Added"}),n.jsx(Y,{className:"text-right",children:"Rejected"}),n.jsx(Y,{className:"text-right",children:"Skipped"}),n.jsx(Y,{className:"text-right",children:"Accept Rate"}),n.jsx(Y,{className:"text-right",children:"Duration"})]})}),n.jsx(Ct,{children:v.map((x,m)=>n.jsxs(Se,{"data-testid":`row-run-${m}`,children:[n.jsx(V,{className:"text-sm",children:l(x.runDate||x.startedAt)}),n.jsx(V,{children:c(x.status)}),n.jsx(V,{children:d(x.guardrailStatus)}),n.jsx(V,{className:"text-right font-mono text-sm",children:x.videosAnalyzed||0}),n.jsx(V,{className:"text-right font-mono text-sm text-green-600",children:x.videosAdded||0}),n.jsx(V,{className:"text-right font-mono text-sm text-muted-foreground",children:x.videosRejected||0}),n.jsx(V,{className:"text-right font-mono text-sm text-muted-foreground",children:n.jsx(W1,{children:n.jsxs(sR,{children:[n.jsx(oR,{asChild:!0,children:n.jsx("span",{className:"cursor-help",children:(x.videosSkippedDuration||0)+(x.videosSkippedDuplicates||0)+(x.videosSkippedQuota||0)+(x.videosSkippedOther||0)})}),n.jsx(H1,{children:n.jsxs("div",{className:"text-xs space-y-1",children:[n.jsxs("div",{children:["Duration: ",x.videosSkippedDuration||0]}),n.jsxs("div",{children:["Duplicates: ",x.videosSkippedDuplicates||0]}),n.jsxs("div",{children:["Quota: ",x.videosSkippedQuota||0]}),n.jsxs("div",{children:["Other: ",x.videosSkippedOther||0]})]})})]})})}),n.jsx(V,{className:"text-right font-mono text-sm",children:x.acceptanceRate?`${Math.round(parseFloat(x.acceptanceRate))}%`:"-"}),n.jsx(V,{className:"text-right text-sm text-muted-foreground",children:o(x.startedAt,x.completedAt)})]},x.id||m))})]})})})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"How Auto-Curation Works"}),n.jsx(Be,{children:"Fully automated video discovery and quality control system"})]}),n.jsxs(K,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:"1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"YouTube Discovery"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Searches YouTube for BJJ techniques using targeted queries"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:"2"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"AI Quality Analysis"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Claude analyzes teaching quality, instructor credibility, and content value"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:"3"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Metadata Extraction"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Extracts technique details, timestamps, prerequisites, and skill levels"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:"4"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Auto-Accept or Reject"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Videos scoring above threshold are automatically added to library"})]})]})]})]})]})})}function Awe(){var v,b,x;const[e,t]=g.useState("today"),[r,i]=g.useState(30),[a,s]=g.useState(!1),{data:o,isLoading:l,refetch:c,dataUpdatedAt:d}=he({queryKey:["/api/analytics/stats",e],queryFn:async()=>{const m=await fetch(`/api/analytics/stats?range=${e}`,{credentials:"include"});if(!m.ok)throw new Error("Failed to fetch analytics");return m.json()},refetchInterval:3e4}),{data:u,refetch:f}=he({queryKey:["/api/analytics/raw-visitors",e],queryFn:async()=>{const m=await fetch(`/api/analytics/raw-visitors?range=${e}`,{credentials:"include"});if(!m.ok)throw new Error("Failed to fetch raw data");return m.json()},enabled:a,refetchInterval:3e4});g.useEffect(()=>{const m=setInterval(()=>{i(j=>j<=1?30:j-1)},1e3);return()=>clearInterval(m)},[]),g.useEffect(()=>{i(30)},[d]);const h=m=>{t(m)},p=()=>{c(),a&&f(),i(30)},y=m=>new Date(m).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return l||!o?n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-analytics-title",children:"Website Analytics"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Track visitor stats, geographic breakdown, and top pages"})]})}),n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-muted-foreground",children:"Loading analytics..."})})]})}):n.jsx(qt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-analytics-title",children:"Website Analytics"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Track visitor stats, geographic breakdown, and top pages"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 bg-green-500/10 border border-green-500/30 px-3 py-2 rounded-lg","data-testid":"live-visitors-indicator",children:[n.jsxs("div",{className:"relative",children:[n.jsx(gI,{className:"w-4 h-4 text-green-500"}),n.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),n.jsxs("span",{className:"text-green-500 font-semibold",children:[o.liveVisitors," live"]})]}),n.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground text-sm","data-testid":"refresh-countdown",children:[n.jsx(Da,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:["Refreshing in ",r,"s"]})]}),n.jsxs(Je,{value:e,onValueChange:m=>h(m),children:[n.jsxs(Ye,{className:"w-[160px]","data-testid":"select-time-range",children:[n.jsx(Px,{className:"w-4 h-4 mr-2"}),n.jsx(Xe,{})]}),n.jsxs(Qe,{children:[n.jsx(G,{value:"today","data-testid":"option-today",children:"Today"}),n.jsx(G,{value:"7d","data-testid":"option-7d",children:"Last 7 Days"}),n.jsx(G,{value:"30d","data-testid":"option-30d",children:"Last 30 Days"}),n.jsx(G,{value:"all","data-testid":"option-all",children:"All Time"})]})]}),n.jsxs(Q,{variant:"outline",size:"sm",onClick:p,"data-testid":"button-refresh-analytics",children:[n.jsx(A7,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Views"}),n.jsx(Mr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-views",children:((v=o==null?void 0:o.stats)==null?void 0:v.totalViews)??0}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e==="today"&&"Page views in the last 24 hours",e==="7d"&&"Page views in the last 7 days",e==="30d"&&"Page views in the last 30 days",e==="all"&&"Total page views all time"]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Unique Visitors"}),n.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-unique-visitors",children:((b=o==null?void 0:o.stats)==null?void 0:b.uniqueVisitors)??0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Real humans (bots filtered)"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Sessions"}),n.jsx(C0,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-sessions",children:((x=o==null?void 0:o.stats)==null?void 0:x.sessions)??0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active browsing sessions"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Bots Filtered"}),n.jsx(h7,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-500","data-testid":"text-bot-count",children:(o==null?void 0:o.botCount)??0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Crawlers, scrapers, bots excluded"})]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(jy,{className:"w-5 h-5"}),"Device Breakdown"]}),n.jsx(Be,{children:"Mobile vs Desktop visitors (bots excluded)"})]}),n.jsx(K,{children:o!=null&&o.deviceBreakdown&&o.deviceBreakdown.length>0?n.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:o.deviceBreakdown.map((m,j)=>n.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg","data-testid":`device-${m.deviceType||"unknown"}`,children:[m.deviceType==="mobile"?n.jsx(_u,{className:"w-8 h-8 text-blue-500"}):m.deviceType==="tablet"?n.jsx(_u,{className:"w-8 h-8 text-purple-500"}):n.jsx(jy,{className:"w-8 h-8 text-green-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold capitalize",children:m.deviceType||"Unknown"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.views," views (",m.uniqueVisitors," unique)"]})]})]},j))}):n.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No device data available"})})]}),n.jsxs(cl,{defaultValue:"pages",className:"space-y-4",children:[n.jsxs(io,{children:[n.jsx(er,{value:"pages",children:"Top Pages"}),n.jsx(er,{value:"sources",children:"Traffic Sources"}),n.jsx(er,{value:"raw",onClick:()=>s(!0),children:"Raw Visitor Data"})]}),n.jsx(tr,{value:"pages",children:n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(C0,{className:"w-5 h-5"}),"Top Pages"]}),n.jsx(Be,{children:"Most visited pages (bots excluded)"})]}),n.jsx(K,{children:o!=null&&o.topPages&&o.topPages.length>0?n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Page Path"}),n.jsx(Y,{className:"text-right",children:"Views"})]})}),n.jsx(Ct,{children:o.topPages.map((m,j)=>n.jsxs(Se,{"data-testid":`row-top-page-${j}`,children:[n.jsx(V,{className:"font-mono text-sm",children:m.pagePath}),n.jsx(V,{className:"text-right",children:n.jsx(ae,{variant:"secondary",children:m.views})})]},j))})]}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No page views recorded"})})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(yk,{className:"w-5 h-5"}),"Traffic Sources"]}),n.jsx(Be,{children:"Where visitors came from"})]}),n.jsx(K,{children:o!=null&&o.sources&&o.sources.length>0?n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Source"}),n.jsx(Y,{className:"text-right",children:"Views"})]})}),n.jsx(Ct,{children:o.sources.map((m,j)=>n.jsxs(Se,{"data-testid":`row-source-${j}`,children:[n.jsx(V,{children:m.source??"Direct"}),n.jsx(V,{className:"text-right",children:n.jsx(ae,{variant:"secondary",children:m.views})})]},j))})]}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No traffic source data"})})]})]})}),n.jsx(tr,{value:"sources",children:n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(N7,{className:"w-5 h-5"}),"USA States Breakdown"]}),n.jsx(Be,{children:"Top 20 US states by visitor count"})]}),n.jsx(K,{children:o!=null&&o.usaStates&&o.usaStates.length>0?n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"State"}),n.jsx(Y,{className:"text-right",children:"Views"}),n.jsx(Y,{className:"text-right",children:"Visitors"})]})}),n.jsx(Ct,{children:o.usaStates.map((m,j)=>n.jsxs(Se,{"data-testid":`row-state-${m.stateCode??j}`,children:[n.jsx(V,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ae,{variant:"outline",className:"font-mono",children:m.stateCode??"Unknown"}),n.jsx("span",{children:m.stateName??"Unknown"})]})}),n.jsx(V,{className:"text-right",children:n.jsx(ae,{variant:"secondary",children:m.views})}),n.jsx(V,{className:"text-right",children:n.jsx(ae,{variant:"secondary",children:m.uniqueVisitors})})]},j))})]}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No US state data available"})})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(yk,{className:"w-5 h-5"}),"Countries Breakdown"]}),n.jsx(Be,{children:"Top 20 countries by visitor count"})]}),n.jsx(K,{children:o!=null&&o.countries&&o.countries.length>0?n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Country"}),n.jsx(Y,{className:"text-right",children:"Views"}),n.jsx(Y,{className:"text-right",children:"Visitors"})]})}),n.jsx(Ct,{children:o.countries.map((m,j)=>n.jsxs(Se,{"data-testid":`row-country-${m.countryCode??j}`,children:[n.jsx(V,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ae,{variant:"outline",className:"font-mono",children:m.countryCode??"Unknown"}),n.jsx("span",{children:m.countryName??"Unknown"})]})}),n.jsx(V,{className:"text-right",children:n.jsx(ae,{variant:"secondary",children:m.views})}),n.jsx(V,{className:"text-right",children:n.jsx(ae,{variant:"secondary",children:m.uniqueVisitors})})]},j))})]}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No country data available"})})]})]})}),n.jsx(tr,{value:"raw",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(ur,{className:"w-5 h-5"}),"Raw Visitor Data"]}),n.jsxs(Be,{children:["Detailed visitor information for verification (",(u==null?void 0:u.uniqueVisitors)??0," unique visitors today)"]})]}),n.jsx(K,{children:u!=null&&u.visitors&&u.visitors.length>0?n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Visitor ID"}),n.jsx(Y,{children:"Device"}),n.jsx(Y,{children:"Browser/OS"}),n.jsx(Y,{children:"Location"}),n.jsx(Y,{children:"Pages"}),n.jsx(Y,{children:"First Seen"}),n.jsx(Y,{children:"Last Seen"})]})}),n.jsx(Ct,{children:u.visitors.map((m,j)=>n.jsxs(Se,{"data-testid":`row-visitor-${j}`,children:[n.jsxs(V,{className:"font-mono text-xs",children:[m.visitorId.slice(0,8),"..."]}),n.jsx(V,{children:m.deviceType==="mobile"?n.jsxs(ae,{variant:"outline",className:"gap-1",children:[n.jsx(_u,{className:"w-3 h-3"})," Mobile"]}):n.jsxs(ae,{variant:"outline",className:"gap-1",children:[n.jsx(jy,{className:"w-3 h-3"})," Desktop"]})}),n.jsxs(V,{className:"text-sm",children:[m.browser||"Unknown"," / ",m.os||"Unknown"]}),n.jsx(V,{children:n.jsx(ae,{variant:"secondary",children:m.location||"Unknown"})}),n.jsx(V,{children:n.jsxs(ae,{children:[m.pageViews," pages"]})}),n.jsx(V,{className:"text-sm",children:y(m.firstSeen)}),n.jsx(V,{className:"text-sm",children:y(m.lastSeen)})]},j))})]}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a?"No visitor data for today":"Click to load raw visitor data"})})]})})]})]})})}const Ewe=["How many users signed up today?","What's the current MRR?","How many videos were added this week?","What's the trial conversion rate?","Are there any curation jobs running?","Show me today's key metrics"];function Pwe(){const[e,t]=g.useState(""),[r,i]=g.useState(null),a=g.useRef(null),s=g.useRef(null),{toast:o}=rt(),{data:l,isLoading:c}=he({queryKey:["/api/admin/dev-os/history"],refetchInterval:5e3}),d=(l==null?void 0:l.messages)||[];g.useEffect(()=>{if(console.log(" [FRONTEND] History data updated:",{messageCount:d.length,isLoading:c}),d.length>0){const x=d.slice(-3);console.log(" [FRONTEND] Last 3 messages:"),x.forEach((m,j)=>{var N,w;console.log(`  ${j+1}. Role: ${m.role}, Content length: ${((N=m.content)==null?void 0:N.length)||0}, Content: ${((w=m.content)==null?void 0:w.substring(0,100))||"[EMPTY]"}`)})}},[d,c]);const u=Ve({mutationFn:async x=>{var j;console.log(" [FRONTEND] Sending message to Dev OS:",x);const m=await Ie("/api/admin/dev-os/chat","POST",{message:x});return console.log(" [FRONTEND] Response received:",m),console.log(" [FRONTEND] Response keys:",Object.keys(m||{})),console.log(" [FRONTEND] Response.response field:",m==null?void 0:m.response),console.log(" [FRONTEND] Response.response length:",(j=m==null?void 0:m.response)==null?void 0:j.length),m},onSuccess:async x=>{console.log(" [FRONTEND] Mutation success, data:",x),console.log(" [FRONTEND] Invalidating history query..."),await Te.invalidateQueries({queryKey:["/api/admin/dev-os/history"]}),console.log(" [FRONTEND] History query invalidated")},onError:x=>{console.error(" [FRONTEND] Mutation error:",x),o({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}}),f=Ve({mutationFn:async()=>Ie("/api/admin/dev-os/clear-history","POST",{}),onSuccess:async()=>{await Te.invalidateQueries({queryKey:["/api/admin/dev-os/history"]}),o({title:"Chat Cleared",description:"Your chat history has been cleared"})},onError:()=>{o({title:"Error",description:"Failed to clear history",variant:"destructive"})}}),h=Ve({mutationFn:async()=>Ie("/api/admin/dev-os/daily-report","GET",void 0),onSuccess:async()=>{await Te.invalidateQueries({queryKey:["/api/admin/dev-os/history"]}),o({title:"Daily Report Generated",description:"Check the chat for your daily report"})},onError:()=>{o({title:"Error",description:"Failed to generate daily report",variant:"destructive"})}}),p=x=>{const m=String(x||e);m.trim()&&(t(""),u.mutate(m))},y=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),p())},v=x=>{navigator.clipboard.writeText(x.content),i(x.id),setTimeout(()=>i(null),2e3),o({title:"Copied",description:"Message copied to clipboard"})},b=()=>{var x;(x=a.current)==null||x.scrollIntoView({behavior:"smooth"})};return g.useEffect(()=>{b()},[d]),g.useEffect(()=>{s.current&&(s.current.style.height="auto",s.current.style.height=s.current.scrollHeight+"px")},[e]),n.jsx(qt,{children:n.jsxs("div",{className:"admin-chat-container",children:[n.jsxs("div",{className:"chat-page-header",children:[n.jsx("div",{className:"chat-header-title",children:n.jsx("h2",{children:"Dev OS"})}),n.jsxs("div",{className:"chat-header-actions",children:[n.jsxs(Q,{variant:"outline",onClick:()=>h.mutate(),disabled:h.isPending,className:"chat-action-btn","data-testid":"button-daily-report",children:[n.jsx(df,{className:"w-4 h-4 btn-icon"}),n.jsx("span",{className:"btn-label",children:"Daily Report"})]}),n.jsxs(Q,{variant:"outline",onClick:()=>f.mutate(),disabled:d.length===0||f.isPending,className:"chat-action-btn","data-testid":"button-clear-chat",children:[n.jsx("span",{className:"btn-icon",children:""}),n.jsx("span",{className:"btn-label",children:"Clear History"})]})]})]}),n.jsxs(W,{className:"quick-prompts-section p-4",children:[n.jsx("h3",{className:"quick-prompts-title",children:"Quick Prompts"}),n.jsx("div",{className:"quick-prompts-grid",children:Ewe.map((x,m)=>n.jsx(ae,{variant:"outline",className:"quick-prompt-badge cursor-pointer hover-elevate active-elevate-2",onClick:()=>p(x),"data-testid":`quick-prompt-${m}`,children:x},m))})]}),n.jsxs("div",{className:"chat-messages-wrapper",children:[n.jsxs("div",{className:"chat-messages-list",children:[c&&n.jsx("div",{className:"chat-loading",children:"Loading chat history..."}),!c&&d.length===0&&n.jsxs("div",{className:"chat-empty",children:[n.jsx("div",{className:"chat-empty-icon",children:n.jsx(rc,{})}),n.jsx("p",{className:"text-lg font-medium",children:"Start chatting with Dev OS"}),n.jsx("p",{className:"chat-empty-text",children:"Try one of the quick prompts above or type your own message"}),n.jsx("p",{className:"text-xs mt-2 opacity-60",children:"Messages persist for 48 hours"})]}),d.map(x=>n.jsx("div",{className:`flex ${x.role==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[80%] rounded-lg p-4 relative group ${x.role==="user"?"bg-primary text-primary-foreground":x.messageType==="report"?"bg-accent border-2 border-primary":"bg-muted"}`,"data-testid":`message-${x.role}`,children:[n.jsx("button",{onClick:()=>v(x),className:`absolute top-2 right-2 p-1.5 rounded-md opacity-0 group-hover:opacity-100 transition-opacity ${x.role==="user"?"hover:bg-primary-foreground/20":"hover:bg-muted-foreground/20"}`,"data-testid":`button-copy-${x.id}`,children:r===x.id?n.jsx(_r,{className:"w-4 h-4"}):n.jsx(Rp,{className:"w-4 h-4"})}),x.messageType==="report"&&n.jsxs(ae,{variant:"secondary",className:"mb-2",children:[n.jsx(df,{className:"w-3 h-3 mr-1"}),"Daily Report"]}),n.jsx("p",{className:"whitespace-pre-wrap pr-8",children:x.content}),n.jsx("p",{className:"text-xs mt-2 opacity-70",children:new Date(x.createdAt).toLocaleString()})]})},x.id)),u.isPending&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-muted rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),n.jsx("div",{ref:a})]}),n.jsx("div",{className:"chat-input-wrapper",children:n.jsxs("div",{className:"chat-input-form",children:[n.jsx("div",{className:"chat-textarea-wrapper",children:n.jsx(aa,{ref:s,value:e,onChange:x=>t(x.target.value),onKeyDown:y,placeholder:"Ask about BJJ OS metrics, system health, or business data...",className:"chat-textarea",rows:1,"data-testid":"input-message"})}),n.jsx(Q,{onClick:()=>p(),disabled:!e.trim()||u.isPending,className:"chat-send-btn","data-testid":"button-send",children:n.jsx(Fc,{className:"w-4 h-4"})})]})})]})]})})}function Twe(){const[e,t]=g.useState({}),[r,i]=g.useState({}),[a,s]=g.useState([]),[o,l]=g.useState("idle"),[c,d]=g.useState(!1),[u,f]=g.useState({qualityThreshold:7,videosPerRun:20,focusInstructors:""}),[h,p]=g.useState([]),[y,v]=g.useState(null),b=g.useRef(null),x=g.useRef(null),{toast:m}=rt();g.useEffect(()=>{N(),w()},[]),g.useEffect(()=>{x.current&&h.length>0&&x.current.scrollIntoView({behavior:"smooth"})},[h]);const j=E=>{b.current&&b.current.close(),v(E),p([]);const T=new EventSource(`/api/admin/curation/stream?runId=${E}`);b.current=T,T.onmessage=P=>{try{const _=JSON.parse(P.data);_.type==="success"&&_.message.includes("complete")?(p(R=>[...R,{id:crypto.randomUUID(),timestamp:_.time||new Date().toISOString(),message:_.message,icon:_.icon||""}]),l("idle"),N(),T.close()):_.type==="error"?(p(R=>[...R,{id:crypto.randomUUID(),timestamp:_.time||new Date().toISOString(),message:_.message,icon:_.icon||""}]),l("idle"),T.close()):p(R=>[...R,{id:crypto.randomUUID(),timestamp:_.time||new Date().toISOString(),message:_.message,icon:_.icon||"",detail:_.data}])}catch(_){console.error("Failed to parse SSE event:",_)}},T.onerror=()=>{console.log("SSE connection closed or error"),T.close(),l("idle"),p(P=>[...P,{id:crypto.randomUUID(),timestamp:new Date().toISOString(),message:"Connection lost - check logs for final results",icon:""}]),N()}};g.useEffect(()=>()=>{b.current&&b.current.close()},[]);const N=async()=>{try{const T=await(await fetch("/api/admin/command/log?limit=20")).json();T.success&&s(T.logs)}catch(E){console.error("Failed to load command log:",E)}},w=async()=>{var E;try{const P=await(await fetch("/api/admin/curation/settings")).json();P&&f({qualityThreshold:P.qualityThreshold||7,videosPerRun:P.videosPerRun||20,focusInstructors:((E=P.focusInstructors)==null?void 0:E.join(", "))||""})}catch(T){console.error("Failed to load settings:",T)}},S=async()=>{try{(await fetch("/api/admin/curation/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qualityThreshold:u.qualityThreshold,videosPerRun:u.videosPerRun,focusInstructors:u.focusInstructors.split(",").map(T=>T.trim()).filter(Boolean)})})).ok&&m({title:" Settings Saved",description:"Changes will apply to next curation run"})}catch(E){m({title:" Failed to Save",description:E.message,variant:"destructive"})}},C=async(E,T={})=>{var P;t(_=>({..._,[E]:!0}));try{const R=await(await fetch("/api/admin/command",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:E,params:T})})).json();R.result&&i($=>({...$,[E]:R.result}));const O=R.runId||((P=R.data)==null?void 0:P.runId);E==="run_curation"&&R.success&&O?(l("running"),j(O),m({title:" Curation Started",description:"Watch live progress below!"})):E==="run_curation"&&R.success?(l("running"),m({title:" Curation Started",description:"Running in background. You'll receive an email in 5-10 minutes with results."}),setTimeout(()=>l("idle"),3e4)):m({title:R.success?" Command Executed":" Command Failed",description:R.message,variant:R.success?"default":"destructive"}),await N(),t($=>({...$,[E]:!1}))}catch(_){const R=_.message||"Failed to execute command";i(O=>({...O,[E]:{status:"error",title:"Command Failed",timestamp:new Date().toISOString(),actions:[R]}})),m({title:" Command Failed",description:R,variant:"destructive"}),t(O=>({...O,[E]:!1}))}},k=({result:E})=>n.jsx("div",{className:`mt-3 rounded-lg border ${E.status==="success"?"border-green-500/50 bg-green-500/5":"border-destructive/50 bg-destructive/5"}`,children:n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:E.status==="success"?"":""}),n.jsx("span",{className:"font-semibold",children:E.title})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(E.timestamp).toLocaleTimeString()})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold mb-1.5",children:"What Happened:"}),n.jsx("ul",{className:"space-y-1 text-sm text-muted-foreground",children:E.actions.map((T,P)=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-primary mt-0.5",children:""}),n.jsx("span",{children:T})]},P))})]}),E.metrics&&Object.keys(E.metrics).length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Results:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(E.metrics).map(([T,P])=>n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:T}),n.jsx("span",{className:"text-sm font-medium",children:P})]},T))})]}),E.changes&&E.changes.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold mb-1.5",children:"Changes Made:"}),n.jsx("ul",{className:"space-y-1 text-sm",children:E.changes.map((T,P)=>n.jsxs("li",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx("span",{children:T.before}),n.jsx("span",{className:"text-primary",children:""}),n.jsx("span",{className:"font-medium text-foreground",children:T.after})]},P))})]}),E.viewLink&&n.jsxs("a",{href:E.viewLink,className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:["View Details ",n.jsx(Mc,{className:"h-3 w-3"})]})]})}),A=({icon:E,title:T,duration:P,command:_,danger:R=!1})=>{const O=e[_],$=r[_],M=_==="run_curation"&&o==="running";return n.jsx(W,{className:`${R?"border-destructive/50":""} hover-elevate`,children:n.jsx(K,{className:"pt-6",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(E,{className:`h-5 w-5 ${R?"text-destructive":"text-primary"}`}),n.jsx("h3",{className:"font-semibold",children:T})]}),n.jsx(ae,{variant:"outline",className:"text-xs",children:O||M?" Running...":P})]}),n.jsx(Q,{onClick:()=>C(_),disabled:O||M,variant:R?"destructive":"default",className:"w-full","data-testid":`button-${_}`,children:M?"Running...":"Execute"}),_==="run_curation"&&M&&h.length>0&&n.jsxs("div",{className:"bg-background border border-primary/30 rounded-md overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-primary/10 border-b border-primary/20",children:[n.jsx(gI,{className:"h-3 w-3 text-primary animate-pulse"}),n.jsx("span",{className:"text-xs font-medium text-primary",children:"Live Progress"}),n.jsxs(ae,{variant:"outline",className:"text-[10px] ml-auto",children:[h.length," events"]})]}),n.jsx(OS,{className:"h-48",children:n.jsxs("div",{className:"p-2 space-y-1 text-xs font-mono",children:[h.map(I=>n.jsxs("div",{className:"flex items-start gap-2 py-0.5",children:[n.jsx("span",{className:"w-4 text-center flex-shrink-0",children:I.icon}),n.jsx("span",{className:"text-muted-foreground flex-shrink-0",children:new Date(I.timestamp).toLocaleTimeString("en-US",{hour12:!1})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("span",{className:"text-foreground",children:I.message}),I.detail&&n.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",I.detail,")"]})]})]},I.id)),n.jsx("div",{ref:x})]})})]}),_==="run_curation"&&M&&h.length===0&&n.jsxs("div",{className:"bg-muted/50 border border-border rounded-md p-3 text-sm space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(na,{className:"h-4 w-4"}),n.jsx("span",{children:"Curation running in background"})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["You'll receive an email in 5-10 minutes with:",n.jsxs("ul",{className:"list-disc list-inside mt-1 ml-2",children:[n.jsx("li",{children:"Videos analyzed"}),n.jsx("li",{children:"Videos added to library"}),n.jsx("li",{children:"API quota used"})]})]})]}),$&&n.jsx(k,{result:$})]})})})};return n.jsx(qt,{children:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:" Command Center"}),n.jsx("p",{className:"text-muted-foreground",children:"Execute system commands and operations"})]}),n.jsxs(Q,{variant:"outline",onClick:N,"data-testid":"button-refresh-logs",children:[n.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Refresh Logs"]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-semibold",children:" Curation Controls"}),n.jsx(ae,{variant:"outline",children:"System Operations"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsx(A,{icon:Zn,title:" Run Curation",duration:"5-10 min",command:"run_curation"}),n.jsx(A,{icon:m7,title:" Take Snapshot",duration:"~30 sec",command:"take_snapshot"}),n.jsx(A,{icon:to,title:" Flush Cache",duration:"Instant",command:"flush_cache"})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"cursor-pointer",onClick:()=>d(!c),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sd,{className:"h-5 w-5"}),n.jsx(Z,{className:"text-base",children:" Curation Settings"})]}),c?n.jsx(O1,{className:"h-4 w-4"}):n.jsx(Fa,{className:"h-4 w-4"})]}),n.jsx(Be,{className:"text-xs",children:"Customize curation parameters"})]}),c&&n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ce,{htmlFor:"quality-threshold",className:"text-sm flex justify-between",children:[n.jsx("span",{children:"Quality Threshold"}),n.jsx("span",{className:"font-bold",children:u.qualityThreshold})]}),n.jsx(Uu,{id:"quality-threshold",min:5,max:9,step:.5,value:[u.qualityThreshold],onValueChange:E=>f({...u,qualityThreshold:E[0]}),className:"w-full"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum quality score for videos (5-9)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"videos-per-run",className:"text-sm",children:"Videos to Analyze Per Run"}),n.jsxs("select",{id:"videos-per-run",value:u.videosPerRun,onChange:E=>f({...u,videosPerRun:parseInt(E.target.value)}),className:"w-full p-2 border rounded bg-background",children:[n.jsx("option",{value:"10",children:"10 (Fast - 3 min)"}),n.jsx("option",{value:"20",children:"20 (Normal - 5 min)"}),n.jsx("option",{value:"30",children:"30 (Thorough - 8 min)"}),n.jsx("option",{value:"50",children:"50 (Maximum - 12 min)"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"More videos = longer runtime, more results"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"focus-instructors",className:"text-sm",children:"Priority Instructors"}),n.jsx(je,{id:"focus-instructors",type:"text",placeholder:"e.g., John Danaher, Gordon Ryan",value:u.focusInstructors,onChange:E=>f({...u,focusInstructors:E.target.value}),className:"w-full"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of instructors to prioritize"})]}),n.jsx(Q,{onClick:S,className:"w-full",variant:"default",children:" Save Settings"}),n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Settings apply to next curation run"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-semibold",children:" System Maintenance"}),n.jsx(ae,{variant:"outline",children:"API Testing"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.jsx(A,{icon:_7,title:" Test APIs",duration:"~10 sec",command:"test_apis"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h2",{className:"text-xl font-semibold",children:" Recent Commands"}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Execution Log"}),n.jsxs(Be,{children:["Last ",a.length," commands executed"]})]}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:a.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No commands executed yet"}):a.map(E=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded border bg-card hover-elevate","data-testid":`log-entry-${E.id}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(ae,{variant:E.success?"default":"destructive",children:E.success?"":""}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:E.command}),n.jsx("div",{className:"text-xs text-muted-foreground",children:E.message})]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[n.jsx("div",{children:new Date(E.timestamp).toLocaleString()}),n.jsxs("div",{className:"text-[10px]",children:[E.executionTimeMs,"ms"]})]})]},E.id))})})]})]})]})})}function Owe(){var m,j,N,w,S,C,k,A,E,T,P,_,R,O,$,M,I,L,z,ie,U,ee,de;const[e,t]=g.useState(!1),[r,i]=g.useState(""),[a,s]=g.useState(""),[o,l]=g.useState(null),{toast:c}=rt(),d=Ve({mutationFn:async oe=>(await ct("POST","/api/admin/login",{password:oe})).json(),onSuccess:()=>{t(!0),c({title:"Login successful"})},onError:()=>{c({title:"Invalid password",variant:"destructive"})}}),{data:u}=he({queryKey:["/api/admin/dashboard/stats"],enabled:e}),{data:f,isLoading:h}=he({queryKey:["/api/admin/users"],enabled:e}),{data:p}=he({queryKey:["/api/admin/referrals/redemptions"],enabled:e}),{data:y}=he({queryKey:["/api/admin/actions-log"],enabled:e}),{data:v}=he({queryKey:["/api/admin/curation/batches"],enabled:e}),b=Ve({mutationFn:async oe=>(await ct("POST","/api/admin/grant-lifetime-access",oe)).json(),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/users"]}),c({title:"Lifetime access granted successfully"}),l(null)},onError:oe=>{c({title:"Error granting lifetime access",description:oe.message,variant:"destructive"})}});if(!e)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsxs(W,{className:"w-full max-w-md",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Admin Login"}),n.jsx(Be,{children:"Enter admin password to continue"})]}),n.jsx(K,{children:n.jsxs("form",{onSubmit:oe=>{oe.preventDefault(),d.mutate(r)},className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"password","data-testid":"label-password",children:"Password"}),n.jsx(je,{id:"password",type:"password",value:r,onChange:oe=>i(oe.target.value),placeholder:"Enter admin password","data-testid":"input-password"})]}),n.jsx(Q,{type:"submit",className:"w-full",disabled:d.isPending,"data-testid":"button-login",children:d.isPending?"Logging in...":"Login"})]})})]})});const x=(f==null?void 0:f.filter(oe=>{var ve,ye;const Pe=a.toLowerCase();return((ve=oe.email)==null?void 0:ve.toLowerCase().includes(Pe))||((ye=oe.username)==null?void 0:ye.toLowerCase().includes(Pe))}))||[];return n.jsx("div",{className:"min-h-screen bg-background p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-admin-title",children:"BJJ OS Admin Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Comprehensive system management and monitoring"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Users"}),n.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-users",children:((j=(m=u==null?void 0:u.stats)==null?void 0:m.users)==null?void 0:j.totalUsers)||0}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",((w=(N=u==null?void 0:u.stats)==null?void 0:N.users)==null?void 0:w.newToday)||0," today"]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Active Subscriptions"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-active-subs",children:((C=(S=u==null?void 0:u.stats)==null?void 0:S.subscriptions)==null?void 0:C.active)||0}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[((A=(k=u==null?void 0:u.stats)==null?void 0:k.subscriptions)==null?void 0:A.trialing)||0," trialing"]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"AI Messages Today"}),n.jsx(Fo,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-ai-messages",children:((T=(E=u==null?void 0:u.stats)==null?void 0:E.ai)==null?void 0:T.messagesToday)||0}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[((_=(P=u==null?void 0:u.stats)==null?void 0:P.ai)==null?void 0:_.uniqueUsersToday)||0," unique users"]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Video Library"}),n.jsx(Jm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-video-library",children:((O=(R=u==null?void 0:u.stats)==null?void 0:R.videoLibrary)==null?void 0:O.totalVideos)||0}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avg rating: ",((I=(M=($=u==null?void 0:u.stats)==null?void 0:$.videoLibrary)==null?void 0:M.avgVideoRating)==null?void 0:I.toFixed(1))||"N/A"]})]})]})]}),n.jsxs(cl,{defaultValue:"users",className:"space-y-4",children:[n.jsxs(io,{children:[n.jsx(er,{value:"users","data-testid":"tab-users",children:"User Management"}),n.jsx(er,{value:"referrals","data-testid":"tab-referrals",children:"Referral Redemptions"}),n.jsx(er,{value:"curation","data-testid":"tab-curation",children:"Video Curation"}),n.jsx(er,{value:"logs","data-testid":"tab-logs",children:"Admin Actions"})]}),n.jsx(tr,{value:"users",className:"space-y-4",children:n.jsxs(W,{children:[n.jsx(X,{children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx(Z,{children:"User Management"}),n.jsx(Be,{children:"Manage users, grant lifetime access, and view user details"})]})})}),n.jsxs(K,{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"relative flex-1",children:[n.jsx(bn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(je,{placeholder:"Search by email, username, or phone...",value:a,onChange:oe=>s(oe.target.value),className:"pl-8","data-testid":"input-search-users"})]})}),n.jsx("div",{className:"rounded-md border",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Email"}),n.jsx(Y,{children:"Username"}),n.jsx(Y,{children:"Belt Rank"}),n.jsx(Y,{children:"Subscription"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{children:"Actions"})]})}),n.jsx(Ct,{children:h?n.jsx(Se,{children:n.jsx(V,{colSpan:6,className:"text-center",children:"Loading users..."})}):x.length===0?n.jsx(Se,{children:n.jsx(V,{colSpan:6,className:"text-center",children:"No users found"})}):x.map(oe=>n.jsxs(Se,{"data-testid":`row-user-${oe.id}`,children:[n.jsx(V,{className:"font-medium",children:oe.email}),n.jsx(V,{children:oe.username||"-"}),n.jsx(V,{children:oe.beltRank||"-"}),n.jsx(V,{children:oe.hasLifetimeAccess?n.jsxs(ae,{variant:"default",children:[n.jsx(vk,{className:"w-3 h-3 mr-1"}),"Lifetime"]}):oe.subscriptionStatus==="active"?n.jsx(ae,{variant:"default",children:"Active"}):oe.subscriptionStatus==="trialing"?n.jsx(ae,{variant:"secondary",children:"Trial"}):n.jsx(ae,{variant:"outline",children:"None"})}),n.jsx(V,{children:oe.isActive?n.jsx(ae,{variant:"default",children:"Active"}):n.jsx(ae,{variant:"destructive",children:"Inactive"})}),n.jsx(V,{children:n.jsx("div",{className:"flex gap-2",children:n.jsxs(Ar,{children:[n.jsx(bf,{asChild:!0,children:n.jsx(Q,{variant:"outline",size:"sm",onClick:()=>l(oe),"data-testid":`button-view-${oe.id}`,children:n.jsx(Mr,{className:"w-4 h-4"})})}),n.jsxs(yr,{className:"max-w-2xl",children:[n.jsxs(br,{children:[n.jsx(jr,{children:"User Details"}),n.jsx(sn,{children:"View and manage user information"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ce,{children:"Email"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:o==null?void 0:o.email})]}),n.jsxs("div",{children:[n.jsx(ce,{children:"Username"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(o==null?void 0:o.username)||"Not set"})]}),n.jsxs("div",{children:[n.jsx(ce,{children:"Belt Rank"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(o==null?void 0:o.beltRank)||"Not set"})]}),n.jsxs("div",{children:[n.jsx(ce,{children:"Total Sessions"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(o==null?void 0:o.totalSessions)||0})]}),n.jsxs("div",{children:[n.jsx(ce,{children:"Total Hours"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(o==null?void 0:o.totalHours)||0})]})]}),!(o!=null&&o.hasLifetimeAccess)&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Grant Lifetime Access"}),n.jsxs("form",{onSubmit:Pe=>{Pe.preventDefault();const ye=new FormData(Pe.currentTarget).get("reason");b.mutate({email:o.email,reason:ye})},className:"space-y-2",children:[n.jsx(aa,{name:"reason",placeholder:"Reason for granting lifetime access...",required:!0,"data-testid":"input-lifetime-reason"}),n.jsxs(Q,{type:"submit",disabled:b.isPending,"data-testid":"button-grant-lifetime",children:[n.jsx(vk,{className:"w-4 h-4 mr-2"}),b.isPending?"Granting...":"Grant Lifetime Access"]})]})]}),(o==null?void 0:o.hasLifetimeAccess)&&n.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium",children:"Lifetime Access Granted"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["By: ",o.grantedLifetimeBy||"Unknown"]}),o.grantedLifetimeReason&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Reason: ",o.grantedLifetimeReason]})]})]})]})]})})})]},oe.id))})]})})]})]})}),n.jsx(tr,{value:"referrals",className:"space-y-4",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Referral Redemptions"}),n.jsx(Be,{children:"Track referral code usage and rewards"})]}),n.jsx(K,{children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Code"}),n.jsx(Y,{children:"Creator"}),n.jsx(Y,{children:"Redeemed By"}),n.jsx(Y,{children:"Reward"}),n.jsx(Y,{children:"Date"})]})}),n.jsx(Ct,{children:((L=p==null?void 0:p.redemptions)==null?void 0:L.length)===0?n.jsx(Se,{children:n.jsx(V,{colSpan:5,className:"text-center",children:"No redemptions found"})}):(z=p==null?void 0:p.redemptions)==null?void 0:z.map(oe=>n.jsxs(Se,{children:[n.jsx(V,{className:"font-medium",children:oe.code}),n.jsx(V,{children:oe.creatorEmail}),n.jsx(V,{children:oe.redeemerEmail}),n.jsx(V,{children:oe.rewardApplied||"1 month free"}),n.jsx(V,{children:new Date(oe.redeemedAt).toLocaleDateString()})]},oe.id))})]})})})]})}),n.jsx(tr,{value:"curation",className:"space-y-4",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Video Curation Batches"}),n.jsx(Be,{children:"Monitor automated video curation performance"})]}),n.jsx(K,{children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Batch Time"}),n.jsx(Y,{children:"Videos Scanned"}),n.jsx(Y,{children:"Approved"}),n.jsx(Y,{children:"Rejected"}),n.jsx(Y,{children:"Avg Rating"}),n.jsx(Y,{children:"API Cost"})]})}),n.jsx(Ct,{children:((ie=v==null?void 0:v.batches)==null?void 0:ie.length)===0?n.jsx(Se,{children:n.jsx(V,{colSpan:6,className:"text-center",children:"No curation batches found"})}):(U=v==null?void 0:v.batches)==null?void 0:U.map(oe=>{var Pe,ve;return n.jsxs(Se,{children:[n.jsx(V,{children:new Date(oe.batchTime).toLocaleString()}),n.jsx(V,{children:oe.videosScanned||0}),n.jsx(V,{children:n.jsx(ae,{variant:"default",children:oe.videosApproved||0})}),n.jsx(V,{children:n.jsx(ae,{variant:"destructive",children:oe.videosRejected||0})}),n.jsx(V,{children:((Pe=oe.avgRating)==null?void 0:Pe.toFixed(1))||"N/A"}),n.jsxs(V,{children:["$",((ve=oe.apiCost)==null?void 0:ve.toFixed(2))||"0.00"]})]},oe.id)})})]})})})]})}),n.jsx(tr,{value:"logs",className:"space-y-4",children:n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Admin Actions Log"}),n.jsx(Be,{children:"Track all admin actions for accountability"})]}),n.jsx(K,{children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Admin"}),n.jsx(Y,{children:"Action Type"}),n.jsx(Y,{children:"Target User"}),n.jsx(Y,{children:"Date"})]})}),n.jsx(Ct,{children:((ee=y==null?void 0:y.actions)==null?void 0:ee.length)===0?n.jsx(Se,{children:n.jsx(V,{colSpan:4,className:"text-center",children:"No admin actions found"})}):(de=y==null?void 0:y.actions)==null?void 0:de.map(oe=>n.jsxs(Se,{children:[n.jsx(V,{className:"font-medium",children:oe.adminEmail}),n.jsx(V,{children:n.jsx(ae,{variant:"outline",children:oe.actionType})}),n.jsx(V,{children:oe.targetUserEmail||oe.targetUsername||"-"}),n.jsx(V,{children:new Date(oe.createdAt).toLocaleString()})]},oe.id))})]})})})]})})]})]})})}function _we(){var C,k,A,E,T,P,_,R,O,$;const[e,t]=g.useState(!1),[r,i]=g.useState(""),[a,s]=g.useState(""),[o,l]=g.useState("all"),[c,d]=g.useState("all"),[u,f]=g.useState(""),{toast:h}=rt(),p=Ve({mutationFn:async M=>(await ct("POST","/api/admin/login",{password:M})).json(),onSuccess:()=>{t(!0),h({title:"Login successful"})},onError:()=>{h({title:"Invalid password",variant:"destructive"})}}),{data:y,isLoading:v}=he({queryKey:["/api/admin/email-stats"],enabled:e,refetchInterval:3e4}),{data:b,isLoading:x}=he({queryKey:["/api/admin/email-logs",{search:a,type:o,status:c}],enabled:e,refetchInterval:3e4}),{data:m}=he({queryKey:["/api/admin/email-problems"],enabled:e,refetchInterval:6e4}),j=Ve({mutationFn:async M=>(await ct("POST",`/api/admin/email-logs/${M}/resend`,{})).json(),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/admin/email-logs"]}),Te.invalidateQueries({queryKey:["/api/admin/email-stats"]}),h({title:"Email resent successfully"})},onError:M=>{h({title:"Failed to resend email",description:M.message,variant:"destructive"})}}),N=Ve({mutationFn:async M=>(await ct("POST","/api/admin/email/send-verification",{email:M})).json(),onSuccess:M=>{Te.invalidateQueries({queryKey:["/api/admin/email-logs"]}),Te.invalidateQueries({queryKey:["/api/admin/email-stats"]}),h({title:"Verification email sent",description:`Code: ${M.code}`}),f("")},onError:M=>{h({title:"Failed to send email",description:M.message,variant:"destructive"})}});if(!e)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsxs(W,{className:"w-full max-w-md",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Admin Login"}),n.jsx(Be,{children:"Enter admin password to continue"})]}),n.jsx(K,{children:n.jsxs("form",{onSubmit:M=>{M.preventDefault(),p.mutate(r)},className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"password",children:"Password"}),n.jsx(je,{id:"password",type:"password",value:r,onChange:M=>i(M.target.value),placeholder:"Enter admin password","data-testid":"input-admin-password"})]}),n.jsx(Q,{type:"submit",className:"w-full",disabled:p.isPending,"data-testid":"button-admin-login",children:p.isPending?"Logging in...":"Login"})]})})]})});const w=M=>{switch(M){case"sent":return n.jsxs(ae,{variant:"secondary",className:"gap-1",children:[n.jsx(Da,{className:"h-3 w-3"})," Sent"]});case"delivered":return n.jsxs(ae,{variant:"default",className:"gap-1 bg-green-600",children:[n.jsx($n,{className:"h-3 w-3"})," Delivered"]});case"failed":return n.jsxs(ae,{variant:"destructive",className:"gap-1",children:[n.jsx(Go,{className:"h-3 w-3"})," Failed"]});case"bounced":return n.jsxs(ae,{variant:"destructive",className:"gap-1",children:[n.jsx($s,{className:"h-3 w-3"})," Bounced"]});default:return n.jsx(ae,{variant:"outline",children:M})}},S=M=>{const I={verification:"bg-blue-500/20 text-blue-400 border-blue-500/30",welcome:"bg-green-500/20 text-green-400 border-green-500/30",lifetime_access:"bg-purple-500/20 text-purple-400 border-purple-500/30",lifetime_invite:"bg-amber-500/20 text-amber-400 border-amber-500/30"};return n.jsx(ae,{variant:"outline",className:I[M]||"",children:M.replace(/_/g," ")})};return n.jsx("div",{className:"min-h-screen bg-background p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-email-admin-title",children:"Email Tracking Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Monitor email delivery and debug issues"})]}),n.jsxs(Ar,{children:[n.jsx(bf,{asChild:!0,children:n.jsxs(Q,{"data-testid":"button-send-test-email",children:[n.jsx(Fc,{className:"h-4 w-4 mr-2"}),"Send Test Email"]})}),n.jsxs(yr,{children:[n.jsxs(br,{children:[n.jsx(jr,{children:"Send Verification Email"}),n.jsx(sn,{children:"Send a verification email to any address for testing"})]}),n.jsx("div",{className:"space-y-4 py-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"email",children:"Email Address"}),n.jsx(je,{id:"email",type:"email",value:u,onChange:M=>f(M.target.value),placeholder:"test@example.com","data-testid":"input-test-email"})]})}),n.jsxs(Ys,{children:[n.jsx(KH,{asChild:!0,children:n.jsx(Q,{variant:"outline",children:"Cancel"})}),n.jsx(Q,{onClick:()=>N.mutate(u),disabled:!u||N.isPending,"data-testid":"button-confirm-send",children:N.isPending?"Sending...":"Send Email"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Sent Today"}),n.jsx(na,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-sent-today",children:(y==null?void 0:y.sentToday)||0}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(y==null?void 0:y.total)||0," total emails tracked"]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Delivery Rate"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsxs("div",{className:"text-2xl font-bold text-green-500","data-testid":"text-delivery-rate",children:[(y==null?void 0:y.deliveryRate)||0,"%"]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(y==null?void 0:y.delivered)||0," delivered"]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Failed"}),n.jsx(bk,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-500","data-testid":"text-failed-count",children:(y==null?void 0:y.failed)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Need attention"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Bounced"}),n.jsx(w7,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold text-amber-500","data-testid":"text-bounced-count",children:(y==null?void 0:y.bounced)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Invalid addresses"})]})]})]}),n.jsxs(cl,{defaultValue:"logs",className:"space-y-4",children:[n.jsxs(io,{children:[n.jsx(er,{value:"logs","data-testid":"tab-logs",children:"All Emails"}),n.jsxs(er,{value:"problems","data-testid":"tab-problems",children:["Problems",(((C=m==null?void 0:m.problemEmails)==null?void 0:C.length)||0)+(((k=m==null?void 0:m.unverifiedUsers)==null?void 0:k.length)||0)>0&&n.jsx(ae,{variant:"destructive",className:"ml-2",children:(((A=m==null?void 0:m.problemEmails)==null?void 0:A.length)||0)+(((E=m==null?void 0:m.unverifiedUsers)==null?void 0:E.length)||0)})]})]}),n.jsxs(tr,{value:"logs",className:"space-y-4",children:[n.jsx(W,{children:n.jsx(K,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[n.jsxs("div",{className:"flex-1 min-w-[200px]",children:[n.jsx(ce,{htmlFor:"search",children:"Search Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(bn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(je,{id:"search",placeholder:"Search by email address...",value:a,onChange:M=>s(M.target.value),className:"pl-8","data-testid":"input-search-email"})]})]}),n.jsxs("div",{className:"w-[150px]",children:[n.jsx(ce,{children:"Email Type"}),n.jsxs(Je,{value:o,onValueChange:l,children:[n.jsx(Ye,{"data-testid":"select-type-filter",children:n.jsx(Xe,{placeholder:"All types"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All types"}),n.jsx(G,{value:"verification",children:"Verification"}),n.jsx(G,{value:"welcome",children:"Welcome"}),n.jsx(G,{value:"lifetime_access",children:"Lifetime Access"}),n.jsx(G,{value:"lifetime_invite",children:"Lifetime Invite"})]})]})]}),n.jsxs("div",{className:"w-[150px]",children:[n.jsx(ce,{children:"Status"}),n.jsxs(Je,{value:c,onValueChange:d,children:[n.jsx(Ye,{"data-testid":"select-status-filter",children:n.jsx(Xe,{placeholder:"All statuses"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All statuses"}),n.jsx(G,{value:"sent",children:"Sent"}),n.jsx(G,{value:"delivered",children:"Delivered"}),n.jsx(G,{value:"failed",children:"Failed"}),n.jsx(G,{value:"bounced",children:"Bounced"})]})]})]}),n.jsx(Q,{variant:"outline",onClick:()=>{s(""),l("all"),d("all")},"data-testid":"button-clear-filters",children:"Clear"})]})})}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Email Logs"}),n.jsxs(Be,{children:[(b==null?void 0:b.total)||0," total emails found"]})]}),n.jsx(K,{children:x?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):((T=b==null?void 0:b.logs)==null?void 0:T.length)===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No emails found"}):n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Recipient"}),n.jsx(Y,{children:"Type"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{children:"Subject"}),n.jsx(Y,{children:"Sent"}),n.jsx(Y,{children:"Actions"})]})}),n.jsx(Ct,{children:(P=b==null?void 0:b.logs)==null?void 0:P.map(M=>n.jsxs(Se,{"data-testid":`row-email-${M.id}`,children:[n.jsx(V,{className:"font-medium",children:M.recipientEmail}),n.jsx(V,{children:S(M.emailType)}),n.jsx(V,{children:w(M.status)}),n.jsx(V,{className:"max-w-[200px] truncate",title:M.subject,children:M.subject}),n.jsx(V,{children:M.sentAt?vn(new Date(M.sentAt),"MMM d, h:mm a"):"-"}),n.jsx(V,{children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>j.mutate(M.id),disabled:j.isPending,"data-testid":`button-resend-${M.id}`,children:[n.jsx(Fn,{className:"h-3 w-3 mr-1"}),"Resend"]}),M.errorMessage&&n.jsxs(Ar,{children:[n.jsx(bf,{asChild:!0,children:n.jsxs(Q,{size:"sm",variant:"destructive",children:[n.jsx($s,{className:"h-3 w-3 mr-1"}),"Error"]})}),n.jsxs(yr,{children:[n.jsx(br,{children:n.jsx(jr,{children:"Error Details"})}),n.jsx("div",{className:"p-4 bg-red-500/10 rounded-lg text-sm",children:n.jsx("code",{children:M.errorMessage})})]})]})]})})]},M.id))})]})})]})]}),n.jsxs(tr,{value:"problems",className:"space-y-4",children:[n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(bk,{className:"h-5 w-5 text-red-500"}),"Failed & Bounced Emails"]}),n.jsx(Be,{children:"Emails that need attention or resending"})]}),n.jsx(K,{children:((_=m==null?void 0:m.problemEmails)==null?void 0:_.length)===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground flex flex-col items-center gap-2",children:[n.jsx(j7,{className:"h-8 w-8 text-green-500"}),n.jsx("p",{children:"No problem emails - all deliveries successful!"})]}):n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Recipient"}),n.jsx(Y,{children:"Type"}),n.jsx(Y,{children:"Status"}),n.jsx(Y,{children:"Error"}),n.jsx(Y,{children:"Actions"})]})}),n.jsx(Ct,{children:(R=m==null?void 0:m.problemEmails)==null?void 0:R.map(M=>n.jsxs(Se,{"data-testid":`row-problem-${M.id}`,children:[n.jsx(V,{className:"font-medium",children:M.recipientEmail}),n.jsx(V,{children:S(M.emailType)}),n.jsx(V,{children:w(M.status)}),n.jsx(V,{className:"max-w-[250px] truncate text-red-400",children:M.errorMessage||"Bounced"}),n.jsx(V,{children:n.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>j.mutate(M.id),disabled:j.isPending,"data-testid":`button-resend-problem-${M.id}`,children:[n.jsx(Fn,{className:"h-3 w-3 mr-1"}),"Retry"]})})]},M.id))})]})})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx($s,{className:"h-5 w-5 text-amber-500"}),"Unverified Users (24h+)"]}),n.jsx(Be,{children:"Users who signed up but never verified their email"})]}),n.jsx(K,{children:((O=m==null?void 0:m.unverifiedUsers)==null?void 0:O.length)===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground flex flex-col items-center gap-2",children:[n.jsx($n,{className:"h-8 w-8 text-green-500"}),n.jsx("p",{children:"All recent users have verified their emails!"})]}):n.jsxs(St,{children:[n.jsx(kt,{children:n.jsxs(Se,{children:[n.jsx(Y,{children:"Email"}),n.jsx(Y,{children:"Signed Up"}),n.jsx(Y,{children:"Actions"})]})}),n.jsx(Ct,{children:($=m==null?void 0:m.unverifiedUsers)==null?void 0:$.map(M=>n.jsxs(Se,{"data-testid":`row-unverified-${M.id}`,children:[n.jsx(V,{className:"font-medium",children:M.email}),n.jsx(V,{children:M.createdAt?vn(new Date(M.createdAt),"MMM d, h:mm a"):"-"}),n.jsx(V,{children:n.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>N.mutate(M.email),disabled:N.isPending,"data-testid":`button-resend-verification-${M.id}`,children:[n.jsx(Fc,{className:"h-3 w-3 mr-1"}),"Send Verification"]})})]},M.id))})]})})]})]})]})]})})}function Iwe(){const[e,t]=g.useState(""),r=g.useRef(null),i=eo(),{data:a,isLoading:s}=he({queryKey:["/api/admin/dev-os/messages"],staleTime:1/0,refetchOnWindowFocus:!1}),o=(a==null?void 0:a.messages)||[],l=Ve({mutationFn:async u=>{var h,p;console.log(" [FRONTEND] Sending Dev OS message:",u);const f=await ct("/api/admin/dev-os/chat",{method:"POST",body:JSON.stringify({message:u})});return console.log(" [FRONTEND] Dev OS response received:",{success:f.success,responseLength:(h=f.response)==null?void 0:h.length,actionsExecuted:((p=f.actionsExecuted)==null?void 0:p.length)||0}),f},onMutate:async u=>{await i.cancelQueries({queryKey:["/api/admin/dev-os/messages"]});const f=i.getQueryData(["/api/admin/dev-os/messages"]);return i.setQueryData(["/api/admin/dev-os/messages"],h=>h?{...h,messages:[...h.messages,{id:"temp-"+Date.now(),role:"user",content:u,createdAt:new Date().toISOString()}]}:{success:!0,messages:[{id:"temp-"+Date.now(),role:"user",content:u,createdAt:new Date().toISOString()}]}),{previousMessages:f}},onSuccess:()=>{console.log(" [FRONTEND] Streaming complete"),i.invalidateQueries({queryKey:["/api/admin/dev-os/messages"]}),t("")},onError:(u,f,h)=>{console.error(" [FRONTEND] Mutation error handler:",u),h!=null&&h.previousMessages&&i.setQueryData(["/api/admin/dev-os/messages"],h.previousMessages)}});g.useEffect(()=>{var u;(u=r.current)==null||u.scrollIntoView({behavior:"smooth"})},[o.length]);const c=()=>{!e.trim()||l.isPending||l.mutate(e.trim())},d=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),c())};return s?n.jsx("div",{className:"dev-os-chat-container",children:n.jsx("div",{className:"chat-loading",children:"Loading Dev OS..."})}):n.jsxs("div",{className:"dev-os-chat-container",children:[n.jsxs("div",{className:"chat-messages","data-testid":"devos-chat-messages",children:[o.length===0?n.jsxs("div",{className:"chat-empty-state",children:[n.jsx("div",{className:"empty-icon",children:""}),n.jsx("h3",{children:"Dev OS Intelligence"}),n.jsx("p",{children:"Ask me about system status, metrics, or run actions"}),n.jsxs("div",{className:"example-queries",children:[n.jsx("button",{onClick:()=>t("Give me a system status"),className:"example-chip","data-testid":"example-query-status",children:"System Status"}),n.jsx("button",{onClick:()=>t("How many active users today?"),className:"example-chip","data-testid":"example-query-users",children:"Active Users"}),n.jsx("button",{onClick:()=>t("What's our MRR?"),className:"example-chip","data-testid":"example-query-mrr",children:"MRR"})]})]}):o.map(u=>n.jsxs("div",{className:`chat-message ${u.role}`,"data-testid":`message-${u.role}`,children:[n.jsx("div",{className:"message-avatar",children:u.role==="user"?"":""}),n.jsxs("div",{className:"message-content",children:[n.jsx("div",{className:"message-text",children:u.content}),n.jsx("div",{className:"message-time",children:new Date(u.createdAt).toLocaleTimeString()})]})]},u.id)),l.isPending&&n.jsxs("div",{className:"chat-message assistant typing","data-testid":"typing-indicator",children:[n.jsx("div",{className:"message-avatar",children:""}),n.jsx("div",{className:"message-content",children:n.jsxs("div",{className:"typing-dots",children:[n.jsx("span",{}),n.jsx("span",{}),n.jsx("span",{})]})})]}),n.jsx("div",{ref:r})]}),n.jsx("div",{className:"chat-input-area",children:n.jsxs("div",{className:"chat-input-container",children:[n.jsx("textarea",{value:e,onChange:u=>t(u.target.value),onKeyPress:d,placeholder:"Ask Dev OS...",className:"chat-input",rows:1,disabled:l.isPending,"data-testid":"input-devos-message"}),n.jsx("button",{onClick:c,disabled:!e.trim()||l.isPending,className:"chat-send-button","data-testid":"button-send-devos-message",children:l.isPending?"":""})]})})]})}function Rwe(){var x;const[e,t]=g.useState("overview"),[r,i]=g.useState(null),a=eo(),{data:s,isLoading:o,isError:l,error:c,refetch:d}=he({queryKey:["/api/admin/quick-metrics"],queryFn:async()=>{const m=await fetch("/api/admin/quick-metrics",{credentials:"include",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(m.status===401)throw window.location.href="/admin/login",new Error("Authentication required");if(!m.ok){const j=await m.text();throw new Error(`${m.status}: ${j}`)}return m.json()},refetchInterval:3e4,retry:1}),{data:u}=he({queryKey:["/api/admin/system-health"],refetchInterval:3e4,retry:1,enabled:!!s}),{data:f}=he({queryKey:["/api/admin/alerts"],queryFn:async()=>{const m=await fetch("/api/admin/alerts",{credentials:"include"});if(!m.ok)throw new Error("Failed to fetch alerts");return m.json()},refetchInterval:3e4,retry:1,enabled:!!s}),{data:h,refetch:p}=he({queryKey:["/api/admin/elite-curator/stats"],queryFn:async()=>{const m=await fetch("/api/admin/elite-curator/stats",{credentials:"include"});if(!m.ok)throw new Error("Failed to fetch elite curator stats");return m.json()},refetchInterval:3e4,retry:1,enabled:!!s}),y=Ve({mutationFn:async m=>{const j=await fetch(`/api/admin/alerts/${m}/dismiss`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!j.ok)throw new Error("Failed to dismiss alert");return j.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/alerts"]})}}),v=((x=f==null?void 0:f.alerts)==null?void 0:x.filter(m=>!m.dismissedAt))||[];async function b(m,j){i(m);try{const w=await(await fetch(`/api/admin/actions/${m}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j||{})})).json();w.success?(alert(` ${w.message||"Action completed"}`),setTimeout(()=>d(),2e3)):alert(` ${w.error||"Action failed"}`)}catch(N){console.error("Action failed:",N),alert(` ${N.message}`)}finally{i(null)}}return o?n.jsx("div",{className:"dev-os-mobile loading-state",children:n.jsx("div",{className:"loading-spinner",children:"Loading Dev OS..."})}):l||!s?n.jsx("div",{className:"dev-os-mobile loading-state",children:n.jsxs("div",{className:"error-state",children:[n.jsx("p",{children:" Failed to load Dev OS"}),n.jsx("p",{className:"error-message",children:(c==null?void 0:c.toString())||"Unknown error"}),n.jsx("button",{onClick:()=>d(),className:"action-chip primary",style:{marginTop:"1rem"},children:"Retry"})]})}):n.jsxs("div",{className:"dev-os-mobile",children:[n.jsx("header",{className:"top-bar","data-testid":"devos-top-bar",children:n.jsxs("div",{className:"top-bar-content",children:[n.jsx("h1",{className:"top-bar-title",children:"Dev OS 2.0"}),n.jsx("button",{onClick:()=>d(),className:"refresh-btn","data-testid":"button-refresh-metrics",children:""})]})}),n.jsx("div",{className:"quick-actions-strip",children:n.jsxs("div",{className:"actions-scroll",children:[n.jsx("button",{onClick:()=>b("restart-curation"),className:"action-chip primary",disabled:!!r,"data-testid":"action-chip-restart",children:" Restart"}),n.jsx("button",{onClick:()=>b("view-logs",{service:"curation"}),className:"action-chip",disabled:!!r,"data-testid":"action-chip-logs",children:" Logs"}),n.jsx("button",{onClick:()=>b("diagnose-curation"),className:"action-chip",disabled:!!r,"data-testid":"action-chip-diagnose",children:" Diagnose"}),n.jsx("button",{onClick:()=>{const m=prompt("Enter threshold (0-10):","7.0");m&&fetch("/api/admin/execute/curation/adjust-threshold",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threshold:parseFloat(m)})}).then(j=>j.json()).then(j=>{alert(j.success?` ${j.message}`:` ${j.error}`)})},className:"action-chip",disabled:!!r,"data-testid":"action-chip-threshold",children:" Threshold"}),n.jsx("button",{onClick:()=>{fetch("/api/admin/execute/system/check-resources",{method:"POST",headers:{"Content-Type":"application/json"}}).then(m=>m.json()).then(m=>{m.success&&alert(` Resources:

Memory: ${m.memory.heapUsed}
Uptime: ${m.uptime}
Node: ${m.nodeVersion}`)})},className:"action-chip",disabled:!!r,"data-testid":"action-chip-resources",children:" Resources"})]})}),n.jsxs("div",{className:"efficiency-hero","data-testid":"efficiency-metrics",children:[n.jsxs("div",{className:"efficiency-header",children:[n.jsx("h2",{className:"efficiency-title",children:" Curation Efficiency (Today)"}),n.jsxs("span",{className:`efficiency-status status-${s.curationEfficiency.status}`,children:[s.curationEfficiency.status==="optimal"&&" OPTIMAL",s.curationEfficiency.status==="strict"&&" STRICT",s.curationEfficiency.status==="too_strict"&&" TOO STRICT",s.curationEfficiency.status==="loose"&&" LOOSE",s.curationEfficiency.status==="too_loose"&&" TOO LOOSE",s.curationEfficiency.status==="unknown"&&" NO DATA"]})]}),n.jsxs("div",{className:"efficiency-stats",children:[n.jsxs("div",{className:"efficiency-stat",children:[n.jsx("div",{className:"efficiency-label",children:"Screened"}),n.jsx("div",{className:"efficiency-value",children:s.curationEfficiency.screened})]}),n.jsxs("div",{className:"efficiency-stat success",children:[n.jsx("div",{className:"efficiency-label",children:"Accepted"}),n.jsx("div",{className:"efficiency-value",children:s.curationEfficiency.accepted})]}),n.jsxs("div",{className:"efficiency-stat danger",children:[n.jsx("div",{className:"efficiency-label",children:"Rejected"}),n.jsx("div",{className:"efficiency-value",children:s.curationEfficiency.rejected})]}),n.jsxs("div",{className:"efficiency-stat primary",children:[n.jsx("div",{className:"efficiency-label",children:"Acceptance Rate"}),n.jsxs("div",{className:"efficiency-value",children:[s.curationEfficiency.acceptanceRate.toFixed(1),"%"]})]})]}),n.jsx("div",{className:"efficiency-guide",children:n.jsxs("small",{children:["Target: 2-5% (elite curation) ",s.curationEfficiency.acceptanceRate<.5&&"  Too strict - might miss good content",s.curationEfficiency.acceptanceRate>=.5&&s.curationEfficiency.acceptanceRate<=2&&"  High quality bar",s.curationEfficiency.acceptanceRate>2&&s.curationEfficiency.acceptanceRate<=5&&"  Optimal elite curation",s.curationEfficiency.acceptanceRate>5&&s.curationEfficiency.acceptanceRate<=15&&"  Quality may be diluting",s.curationEfficiency.acceptanceRate>15&&"  Accepting too much"]})})]}),v.length>0&&n.jsx("div",{className:"alerts-container","data-testid":"alerts-container",children:v.map(m=>n.jsxs("div",{className:`alert alert-${m.severity}`,"data-testid":`alert-${m.severity}`,children:[n.jsxs("div",{className:"alert-content",children:[n.jsxs("div",{className:"alert-header",children:[n.jsxs("span",{className:"alert-icon",children:[m.severity==="critical"&&"",m.severity==="warning"&&"",m.severity==="info"&&""]}),n.jsx("span",{className:"alert-title",children:m.title})]}),n.jsx("p",{className:"alert-message",children:m.message})]}),n.jsx("button",{className:"alert-dismiss",onClick:()=>y.mutate(m.id),disabled:y.isPending,"data-testid":"button-dismiss-alert",children:""})]},m.id))}),n.jsxs("div",{className:"metrics-compact",children:[n.jsxs("div",{className:"metric-row",children:[n.jsx(Rm,{icon:"",label:"Curation",value:s.curationRunning?" Active":" Offline",subtitle:s.minutesSinceRun<999?`${s.minutesSinceRun}m ago`:"Never",status:s.curationRunning?"good":"critical","data-testid":"metric-curation"}),n.jsx(Rm,{icon:"",label:"Library",value:s.totalVideos,subtitle:`+${s.videosToday} today`,"data-testid":"metric-videos"})]}),n.jsxs("div",{className:"metric-row",children:[n.jsx(Rm,{icon:"",label:"API Quota",value:"N/A",subtitle:"Check system","data-testid":"metric-quota"}),n.jsx(Rm,{icon:"",label:"Users",value:s.totalUsers,subtitle:`${s.activeSubscriptions} active`,"data-testid":"metric-users"})]})]}),n.jsxs("div",{className:"main-content",children:[e==="overview"&&n.jsxs("div",{className:"overview-section",children:[n.jsx("h2",{className:"section-title",children:"System Status"}),n.jsx("p",{className:"section-description",children:"Core metrics and operational status at a glance"}),n.jsxs("div",{className:"status-summary",children:[n.jsxs("div",{className:"status-item",children:[n.jsx("span",{className:"status-label",children:"Curation Pipeline"}),n.jsx("span",{className:`status-badge ${s.curationRunning?"running":"stopped"}`,children:s.curationRunning?" Active":" Offline"})]}),n.jsxs("div",{className:"status-item",children:[n.jsx("span",{className:"status-label",children:"Last Curation Run"}),n.jsx("span",{className:"status-value",children:s.minutesSinceRun<999?`${s.minutesSinceRun} minutes ago`:"Never"})]}),n.jsxs("div",{className:"status-item",children:[n.jsx("span",{className:"status-label",children:"Efficiency Status"}),n.jsxs("span",{className:`status-badge ${s.curationEfficiency.status==="optimal"?"running":s.curationEfficiency.status==="strict"?"warning":s.curationEfficiency.status==="unknown"?"neutral":"stopped"}`,children:[s.curationEfficiency.status==="optimal"&&" Optimal (2-5%)",s.curationEfficiency.status==="strict"&&" Strict (<2%)",s.curationEfficiency.status==="too_strict"&&" Too Strict",s.curationEfficiency.status==="loose"&&" Loose (>5%)",s.curationEfficiency.status==="too_loose"&&" Too Loose",s.curationEfficiency.status==="unknown"&&" No Data"]})]})]})]}),e==="stats"&&u&&n.jsxs("div",{className:"stats-section",children:[n.jsx("h2",{className:"section-title",children:"Detailed Statistics"}),n.jsxs(Mm,{title:" Curation Pipeline",defaultOpen:!0,children:[n.jsx(Qr,{label:"Status",value:u.curation.isRunning?" RUNNING":" OFFLINE"}),n.jsx(Qr,{label:"Last Run",value:`${u.curation.minutesSinceLastRun} min ago`}),n.jsx(Qr,{label:"Screened (Hour)",value:u.curation.lastHour.screened}),n.jsx(Qr,{label:"Accepted (Hour)",value:u.curation.lastHour.accepted}),n.jsx(Qr,{label:"Acceptance Rate",value:`${u.curation.lastHour.acceptanceRate}%`}),n.jsx(Qr,{label:"API Quota",value:`${u.curation.apiQuota.percentUsed}%`})]}),n.jsxs(Mm,{title:" Video Library",children:[n.jsx(Qr,{label:"Total Videos",value:u.videos.total}),n.jsx(Qr,{label:"Elite Tier",value:`${u.videos.elite} (${u.videos.elitePercent}%)`}),n.jsx(Qr,{label:"Added Today",value:u.videos.addedToday})]}),n.jsxs(Mm,{title:" Revenue & Subscriptions",children:[n.jsx(Qr,{label:"MRR",value:`$${u.stripe.mrr}`}),n.jsx(Qr,{label:"Active Subscriptions",value:u.stripe.activeSubscriptions}),n.jsx(Qr,{label:"Trial Users",value:u.stripe.trialUsers})]}),n.jsxs(Mm,{title:" User Metrics",children:[n.jsx(Qr,{label:"Total Users",value:u.users.total}),n.jsx(Qr,{label:"Signed Up Today",value:u.users.signedUpToday}),n.jsx(Qr,{label:"Lifetime Access",value:u.users.lifetimeAccess})]})]}),e==="actions"&&n.jsxs("div",{className:"actions-section",children:[n.jsx("h2",{className:"section-title",children:"System Operations"}),n.jsxs("div",{className:"action-category",children:[n.jsx("h3",{className:"category-title",children:"Curation Control"}),n.jsxs("div",{className:"action-buttons-grid",children:[n.jsx(hi,{icon:"",label:"Restart Curation",onClick:()=>b("restart-curation"),variant:"primary","data-testid":"button-action-restart"}),n.jsx(hi,{icon:"",label:"View Logs",onClick:()=>b("view-logs"),"data-testid":"button-action-logs"}),n.jsx(hi,{icon:"",label:"Diagnose",onClick:()=>b("diagnose-curation"),"data-testid":"button-action-diagnose"})]})]}),n.jsxs("div",{className:"action-category",children:[n.jsx("h3",{className:"category-title",children:"Video Management"}),n.jsxs("div",{className:"action-buttons-grid",children:[n.jsx(hi,{icon:"",label:"Add Video",onClick:()=>{const m=prompt("Enter YouTube URL:");m&&fetch("/api/admin/execute/video/add-manual",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:m})}).then(j=>j.json()).then(j=>{alert(j.success?` ${j.message}`:` ${j.error}`),j.success&&d()})},variant:"primary","data-testid":"button-action-add-video"}),n.jsx(hi,{icon:"",label:"Delete Video",onClick:()=>{const m=prompt("Enter video ID:");m&&confirm("Delete this video?")&&fetch("/api/admin/execute/video/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:m})}).then(j=>j.json()).then(j=>{alert(j.success?` ${j.message}`:` ${j.error}`),j.success&&d()})},"data-testid":"button-action-delete-video"})]})]}),n.jsxs("div",{className:"action-category",children:[n.jsx("h3",{className:"category-title",children:" Elite Curator"}),h?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"efficiency-stats",style:{marginBottom:"1rem"},children:[n.jsxs("div",{className:"efficiency-stat",children:[n.jsx("div",{className:"efficiency-label",children:"Status"}),n.jsx("div",{className:"efficiency-value",children:h.enabled?" ON":" OFF"})]}),n.jsxs("div",{className:"efficiency-stat",children:[n.jsx("div",{className:"efficiency-label",children:"Searches Today"}),n.jsxs("div",{className:"efficiency-value",children:[h.dailySearchesUsed,"/",h.maxDailySearches]})]}),n.jsxs("div",{className:"efficiency-stat success",children:[n.jsx("div",{className:"efficiency-label",children:"Approval Rate"}),n.jsxs("div",{className:"efficiency-value",children:[h.today.approvalRate,"%"]})]}),n.jsxs("div",{className:"efficiency-stat primary",children:[n.jsx("div",{className:"efficiency-label",children:"Library Progress"}),n.jsxs("div",{className:"efficiency-value",children:[h.library.progress,"%"]})]})]}),n.jsxs("div",{className:"action-buttons-grid",children:[n.jsx(hi,{icon:h.enabled?"":"",label:h.enabled?"Disable":"Enable",onClick:()=>{fetch("/api/admin/elite-curator/toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!h.enabled})}).then(m=>m.json()).then(m=>{alert(m.success?` ${m.message}`:` ${m.error}`),m.success&&(p(),d())})},variant:h.enabled?"default":"primary","data-testid":"button-elite-curator-toggle"}),n.jsx(hi,{icon:"",label:"Run Now",onClick:()=>{confirm("Start elite curator run? This will use YouTube API quota.")&&(i("elite-curator"),fetch("/api/admin/elite-curator/run",{method:"POST",headers:{"Content-Type":"application/json"}}).then(m=>m.json()).then(m=>{alert(m.success?` ${m.message}

Approved: ${m.videosApproved}
Approval Rate: ${m.approvalRate.toFixed(1)}%`:` ${m.message}`),m.success&&(p(),d())}).finally(()=>i(null)))},variant:"primary",disabled:!!r||!h.enabled,"data-testid":"button-elite-curator-run"})]}),n.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",opacity:.7},children:[n.jsxs("div",{children:["Elite Instructors: ",h.eliteInstructorCount]}),n.jsxs("div",{children:["Library: ",h.library.current,"/",h.library.target," (",h.library.remaining," remaining)"]}),n.jsxs("div",{children:["Today: ",h.today.searches," searches, ",h.today.approved," approved"]})]})]}):n.jsx("div",{style:{padding:"1rem",textAlign:"center",opacity:.5},children:"Loading elite curator stats..."})]}),n.jsxs("div",{className:"action-category",children:[n.jsx("h3",{className:"category-title",children:"User Management"}),n.jsxs("div",{className:"action-buttons-grid",children:[n.jsx(hi,{icon:"",label:"Grant Lifetime",onClick:()=>{const m=prompt("Enter email:");m&&fetch("/api/admin/execute/user/create-lifetime",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m})}).then(j=>j.json()).then(j=>{alert(j.success?` ${j.message}`:` ${j.error}`),j.success&&d()})},variant:"primary","data-testid":"button-action-lifetime"}),n.jsx(hi,{icon:"",label:"Cancel Sub",onClick:()=>{const m=prompt("Enter user ID:");m&&confirm("Cancel subscription?")&&fetch("/api/admin/execute/user/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:m})}).then(j=>j.json()).then(j=>{alert(j.success?` ${j.message}`:` ${j.error}`),j.success&&d()})},"data-testid":"button-action-cancel-sub"})]})]}),n.jsxs("div",{className:"action-category",children:[n.jsx("h3",{className:"category-title",children:"System"}),n.jsxs("div",{className:"action-buttons-grid",children:[n.jsx(hi,{icon:"",label:"Clear Cache",onClick:()=>{confirm("Clear cache?")&&fetch("/api/admin/execute/system/clear-cache",{method:"POST",headers:{"Content-Type":"application/json"}}).then(m=>m.json()).then(m=>{alert(m.success?` ${m.message}`:` ${m.error}`)})},"data-testid":"button-action-clear-cache"}),n.jsx(hi,{icon:"",label:"Resources",onClick:()=>{fetch("/api/admin/execute/system/check-resources",{method:"POST",headers:{"Content-Type":"application/json"}}).then(m=>m.json()).then(m=>{m.success&&alert(` Resources:

Memory: ${m.memory.heapUsed}
Uptime: ${m.uptime}
Node: ${m.nodeVersion}`)})},"data-testid":"button-action-resources"})]})]})]})]}),e==="chat"&&n.jsx("div",{className:"view-content",children:n.jsx(Iwe,{})}),n.jsxs("nav",{className:"bottom-nav",children:[n.jsxs("button",{onClick:()=>t("overview"),className:`nav-btn ${e==="overview"?"active":""}`,"data-testid":"nav-overview",children:[n.jsx("span",{className:"nav-icon",children:""}),n.jsx("span",{className:"nav-label",children:"Overview"})]}),n.jsxs("button",{onClick:()=>t("stats"),className:`nav-btn ${e==="stats"?"active":""}`,"data-testid":"nav-stats",children:[n.jsx("span",{className:"nav-icon",children:""}),n.jsx("span",{className:"nav-label",children:"Stats"})]}),n.jsxs("button",{onClick:()=>t("actions"),className:`nav-btn ${e==="actions"?"active":""}`,"data-testid":"nav-actions",children:[n.jsx("span",{className:"nav-icon",children:""}),n.jsx("span",{className:"nav-label",children:"Actions"})]}),n.jsxs("button",{onClick:()=>t("chat"),className:`nav-btn ${e==="chat"?"active":""}`,"data-testid":"nav-chat",children:[n.jsx("span",{className:"nav-icon",children:""}),n.jsx("span",{className:"nav-label",children:"Chat"})]})]})]})}function Rm({icon:e,label:t,value:r,subtitle:i,status:a}){const s={good:"#4ade80",warning:"#fbbf24",critical:"#ef4444"}[a||"good"];return n.jsxs("div",{className:"metric-card-compact",children:[n.jsxs("div",{className:"metric-header",children:[n.jsx("span",{className:"metric-icon",children:e}),n.jsx("span",{className:"metric-label",children:t})]}),n.jsx("div",{className:"metric-value",style:a?{color:s}:{},children:r}),i&&n.jsx("div",{className:"metric-subtitle",children:i})]})}function Mm({title:e,children:t,defaultOpen:r=!1}){const[i,a]=g.useState(r);return n.jsxs("div",{className:"expandable-section",children:[n.jsxs("button",{onClick:()=>a(!i),className:"section-header","data-testid":`expand-${e.toLowerCase().replace(/\s+/g,"-")}`,children:[n.jsx("span",{children:e}),n.jsx("span",{className:"expand-icon",children:i?"":""})]}),i&&n.jsx("div",{className:"section-content",children:t})]})}function Qr({label:e,value:t}){return n.jsxs("div",{className:"stat-row",children:[n.jsx("span",{className:"stat-label",children:e}),n.jsx("span",{className:"stat-value",children:t})]})}function hi({icon:e,label:t,onClick:r,variant:i="default"}){return n.jsxs("button",{onClick:r,className:`action-button ${i}`,children:[n.jsx("span",{className:"action-icon",children:e}),n.jsx("span",{className:"action-label",children:t})]})}function Mwe(){const[,e]=Ze();return n.jsxs("div",{className:"not-found-page page-container",children:[n.jsxs("div",{className:"not-found-container",children:[n.jsxs("div",{className:"not-found-logo",children:[n.jsxs("div",{className:"not-found-logo-mark",children:[n.jsx("div",{className:"not-found-logo-line"}),n.jsx("div",{className:"not-found-logo-line"}),n.jsx("div",{className:"not-found-logo-line"}),n.jsx("div",{className:"not-found-logo-line"})]}),n.jsx("span",{className:"not-found-logo-text",children:"BJJ OS"})]}),n.jsxs("div",{className:"not-found-content",children:[n.jsx("h1",{className:"not-found-code",children:"404"}),n.jsx("h2",{className:"not-found-title",children:"Page Not Found"}),n.jsx("p",{className:"not-found-description",children:"The page you're looking for doesn't exist or has been moved."}),n.jsxs("div",{className:"not-found-actions",children:[n.jsx("button",{className:"not-found-button primary",onClick:()=>e("/"),"data-testid":"button-home",children:"Go Home"}),n.jsx("button",{className:"not-found-button secondary",onClick:()=>e("/login"),"data-testid":"button-login",children:"Login"})]})]})]}),n.jsx("style",{children:`
        /* ==================== GLOBAL VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0F0F0F;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --blue-hover-1: #1D4ED8;
          --purple-hover-1: #6D28D9;
          --font-mono: 'JetBrains Mono', monospace;
        }

        /* ==================== BASE STYLES ==================== */
        .not-found-page {
          font-family: var(--font-mono);
          background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
          color: var(--white);
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          position: relative;
          padding: 40px;
        }

        /* Subtle grain texture overlay */
        .not-found-page::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
          pointer-events: none;
          z-index: 9999;
          mix-blend-mode: overlay;
        }

        /* ==================== CONTAINER ==================== */
        .not-found-container {
          max-width: 600px;
          text-align: center;
          position: relative;
          z-index: 1;
        }

        /* ==================== LOGO ==================== */
        .not-found-logo {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          margin-bottom: 64px;
        }

        .not-found-logo-mark {
          display: flex;
          gap: 2px;
          height: 20px;
        }

        .not-found-logo-line {
          width: 1px;
          height: 20px;
          background: var(--white);
        }

        .not-found-logo-line:nth-child(2) {
          margin-right: 2px;
        }

        .not-found-logo-line:nth-child(3) {
          margin-left: 2px;
        }

        .not-found-logo-text {
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
        }

        /* ==================== CONTENT ==================== */
        .not-found-content {
          background: var(--black-elevated);
          padding: 64px 48px;
          border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .not-found-code {
          font-size: 96px;
          font-weight: 700;
          color: var(--white);
          line-height: 1;
          margin-bottom: 24px;
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        @supports not (background-clip: text) {
          .not-found-code {
            color: var(--blue);
          }
        }

        .not-found-title {
          font-size: 32px;
          font-weight: 700;
          color: var(--white);
          margin-bottom: 16px;
        }

        .not-found-description {
          font-size: 16px;
          color: var(--gray-light);
          line-height: 1.6;
          margin-bottom: 48px;
        }

        /* ==================== ACTIONS ==================== */
        .not-found-actions {
          display: flex;
          gap: 16px;
          justify-content: center;
          flex-wrap: wrap;
        }

        .not-found-button {
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          padding: 14px 32px;
          border: none;
          cursor: pointer;
          transition: all 150ms ease;
        }

        .not-found-button.primary {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
          color: var(--white);
        }

        .not-found-button.primary:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .not-found-button.secondary {
          background: transparent;
          border: 1px solid var(--gray-dark);
          color: var(--gray-light);
        }

        .not-found-button.secondary:hover {
          border: 1px solid var(--blue);
          color: var(--blue);
        }

        .not-found-button:active {
          transform: translateY(1px);
        }

        @keyframes gradient-shift {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .not-found-page {
            padding: 24px;
          }

          .not-found-content {
            padding: 48px 32px;
          }

          .not-found-code {
            font-size: 72px;
          }

          .not-found-title {
            font-size: 24px;
          }

          .not-found-actions {
            flex-direction: column;
          }

          .not-found-button {
            width: 100%;
          }
        }
      `})]})}const AT=[{path:"/chat",icon:$c,label:"Chat",testId:"nav-chat"},{path:"/library",icon:Ko,label:"Videos",testId:"nav-library"},{path:"/saved-videos",icon:fI,label:"Saved",testId:"nav-saved"},{path:"/settings",icon:Sd,label:"Settings",testId:"nav-settings"}];function Oa({children:e}){const[t]=Ze(),{data:r}=he({queryKey:["/api/auth/me"]});return n.jsxs("div",{className:"flex h-screen w-full overflow-hidden",children:[n.jsxs("aside",{className:"hidden md:flex md:w-64 flex-col border-r bg-card",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsx("a",{href:"/","data-testid":"link-home",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-8 w-auto"})}),(r==null?void 0:r.displayName)&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.displayName})]}),n.jsx("nav",{className:"flex-1 p-4 space-y-2",children:AT.map(i=>{const a=i.icon,s=t===i.path;return n.jsx(dr,{href:i.path,children:n.jsxs("a",{"data-testid":i.testId,className:`
                    flex items-center gap-3 px-4 py-3 rounded-md
                    transition-colors hover-elevate active-elevate-2 cursor-pointer
                    ${s?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent"}
                  `,children:[n.jsx(a,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:i.label})]})},i.path)})})]}),n.jsx("main",{className:"flex-1 overflow-auto flex flex-col pb-16 md:pb-0",children:e}),n.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-[100] bg-card border-t",style:{paddingBottom:"max(0px, env(safe-area-inset-bottom))"},children:n.jsx("div",{className:"flex items-center justify-around h-16 px-2",children:AT.map(i=>{const a=i.icon,s=t===i.path;return n.jsx(dr,{href:i.path,children:n.jsxs("a",{"data-testid":`${i.testId}-mobile`,className:`
                    flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-md
                    transition-colors min-w-[60px] cursor-pointer
                    ${s?"text-primary":"text-muted-foreground hover:text-foreground"}
                  `,children:[n.jsx(a,{className:`w-5 h-5 ${s?"fill-primary":""}`}),n.jsx("span",{className:"text-xs font-medium",children:i.label})]})},i.path)})})})]})}var $we="AspectRatio",dL=g.forwardRef((e,t)=>{const{ratio:r=1/1,style:i,...a}=e;return n.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/r}%`},"data-radix-aspect-ratio-wrapper":"",children:n.jsx(Ue.div,{...a,ref:t,style:{...i,position:"absolute",top:0,right:0,bottom:0,left:0}})})});dL.displayName=$we;var Fwe=dL;const ET=Fwe;function _S({thumbnailUrl:e,videoId:t,title:r,className:i=""}){const[a,s]=g.useState(0),[o,l]=g.useState(!0),c=g.useMemo(()=>{const f=[];return e&&e.trim()&&f.push(e),t&&t.trim()&&(f.push(`https://img.youtube.com/vi/${t}/maxresdefault.jpg`),f.push(`https://img.youtube.com/vi/${t}/hqdefault.jpg`),f.push(`https://img.youtube.com/vi/${t}/mqdefault.jpg`),f.push(`https://i.ytimg.com/vi/${t}/mqdefault.jpg`)),f},[e,t]);g.useEffect(()=>{s(0),l(!0)},[c]);const d=c[a];if(!d)return n.jsx(ET,{ratio:16/9,className:i,children:n.jsx("div",{className:"w-full h-full bg-[#0A0A0B] rounded-lg flex items-center justify-center border border-[#1A1A1C]",children:n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-8 w-auto opacity-60"})})});const u=()=>{s(a+1),l(!0)};return n.jsx(ET,{ratio:16/9,className:i,children:n.jsxs("div",{className:"relative w-full h-full rounded-lg overflow-hidden bg-[#1A1A1C]",children:[o&&n.jsx("div",{className:"absolute inset-0 bg-[#2A2A2C] animate-pulse"}),n.jsx("img",{src:d,alt:r,className:`w-full h-full object-cover transition-opacity duration-200 ${o?"opacity-0":"opacity-100"}`,loading:"lazy",onLoad:()=>l(!1),onError:u},d),n.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:n.jsx(Zn,{className:"w-12 h-12 text-white drop-shadow-lg"})})]})})}function IS({size:e="md",className:t}){const r={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return n.jsxs("div",{className:we("relative inline-block",r[e],t),"data-testid":"ios-spinner",children:[n.jsx("div",{className:"absolute inset-0",children:[...Array(12)].map((i,a)=>n.jsx("div",{className:"absolute left-1/2 top-0 -translate-x-1/2 w-[8%] h-[25%] bg-current rounded-full origin-[center_200%]",style:{transform:`rotate(${a*30}deg) translateX(-50%)`,opacity:1-a*.08,animation:"ios-spinner 1s linear infinite",animationDelay:`${-a*(1/12)}s`}},a))}),n.jsx("style",{children:`
        @keyframes ios-spinner {
          from { opacity: 1; }
          to { opacity: 0.15; }
        }
      `})]})}function Dwe(e){var l;if(!e)return[{text:""}];const t=[],r=/\[VIDEO:\s*([^\]]+)\]/g,i=new Set,a=new Set;let s=0,o;for(;(o=r.exec(e))!==null;){o.index>s&&t.push({text:e.slice(s,o.index)});const c=o[1].split("|").map(d=>d.trim());if(c.length>=5){const d=((l=c[3])==null?void 0:l.trim())||"",u=parseInt(c[4],10);if(isNaN(u))console.warn("[parseVideoTokens] Invalid video ID (NaN), using fallback:",c[4]);else{if(i.has(u)){console.log("[parseVideoTokens] Skipping duplicate video ID:",u),s=o.index+o[0].length;continue}i.add(u);const f={title:c[0],instructor:c[1],duration:c[2],videoId:d,id:u};d||console.warn("[parseVideoTokens] Enriched token missing videoId:",c),t.push({text:"",video:f}),s=o.index+o[0].length;continue}}if(c.length<5||isNaN(parseInt(c[4],10))){console.warn("[parseVideoTokens] Enrichment failed, using fallback format. Parts:",c.length);const u=(c[0]||"").match(/^(.+?)\s+by\s+(.+)$/i);if(u){const f=u[1].trim(),h=u[2].trim(),p=`${f.toLowerCase()}-${h.toLowerCase()}`;if(a.has(p)){console.log("[parseVideoTokens] Skipping duplicate video by title:",f),s=o.index+o[0].length;continue}a.add(p);const y={title:f,instructor:h,duration:"full",videoId:"",id:Date.now()};t.push({text:"",video:y}),console.log("[parseVideoTokens] Rendered fallback card:",f,"by",h)}else console.warn("[parseVideoTokens] Could not parse video token:",o[1]),t.push({text:o[0]})}s=o.index+o[0].length}return s<e.length&&t.push({text:e.slice(s)}),t.length>0?t:[{text:e}]}function Lwe(){var O;const[e,t]=g.useState(""),[r,i]=g.useState(!1),[a,s]=g.useState(new Set),[o,l]=g.useState(null),[c,d]=g.useState("Analyzing your training"),{messages:u,setMessages:f,historyLoaded:h,setHistoryLoaded:p}=K1(),y=g.useRef(null),{toast:v}=rt(),[,b]=Ze(),{data:x,isLoading:m,error:j,isFetching:N}=he({queryKey:["/api/auth/me"]}),w=((O=x==null?void 0:x.id)==null?void 0:O.toString())||"",{data:S,isLoading:C}=he({queryKey:["/api/ai/chat/history",w],enabled:!!w,refetchOnMount:!0,staleTime:0});g.useLayoutEffect(()=>{var I;if(u.length>0||h){console.log("[CHAT] Context already has",u.length,"messages - skipping reload");return}const $=Te.getQueryData(["/api/auth/me"]),M=(I=$==null?void 0:$.id)==null?void 0:I.toString();if(M){const L=Te.getQueryData(["/api/ai/chat/history",M]);if(L!=null&&L.messages&&L.messages.length>0){const z=new Set,ie=L.messages.filter(U=>{const ee=String(U.id);return z.has(ee)?(console.warn("[CHAT] Skipping duplicate message ID from cache:",ee),!1):(z.add(ee),!0)}).map(U=>({id:U.id,role:U.role,content:U.content,timestamp:U.createdAt}));console.log("[CHAT] Loading",ie.length,"messages from React Query cache (deduplicated from",L.messages.length,")"),f(ie),p(!0)}}},[]);const{data:k}=he({queryKey:["/api/ai/saved-videos",w],enabled:!!w});g.useEffect(()=>{k!=null&&k.videos&&s(new Set(k.videos.map($=>parseInt($.id))))},[k]),g.useEffect(()=>{j&&!m&&(v({title:"Authentication Required",description:"Please log in to continue",variant:"destructive"}),b("/login"))},[j,m,b,v]),g.useEffect(()=>{!m&&!N&&x&&(console.log("[CHAT] User data loaded, checking onboarding status:",{onboardingCompleted:x.onboardingCompleted,isFetching:N,isLoading:m}),x.onboardingCompleted?console.log("[CHAT] User has completed onboarding, staying on /chat"):(console.log("[CHAT] User has not completed onboarding, redirecting to /onboarding"),b("/onboarding")))},[x,m,N,b]),g.useEffect(()=>{if(!(u.length>0||h)&&S!=null&&S.messages&&S.messages.length>0){const $=new Set,M=S.messages.filter(I=>{const L=String(I.id);return $.has(L)?(console.warn("[CHAT] Skipping duplicate message ID from history:",L),!1):($.add(L),!0)}).map(I=>({id:I.id,role:I.role,content:I.content,timestamp:I.createdAt}));console.log("[CHAT] Loading",M.length,"messages from API response (deduplicated from",S.messages.length,")"),f(M),p(!0)}},[S,u.length,h,f,p]),g.useEffect(()=>{var $;($=y.current)==null||$.scrollIntoView({behavior:"smooth"})},[u]),g.useEffect(()=>{if(!r){d("Analyzing your training");return}const $=["Analyzing your training","Reviewing your patterns","Finding relevant techniques","Crafting response"];let M=0;const I=setInterval(()=>{M=(M+1)%$.length,d($[M])},2e3);return()=>clearInterval(I)},[r]);const A=async()=>{var z;if(!e.trim()||r)return;Ce("light");const $=e.trim();t("");const M={id:Date.now().toString(),role:"user",content:$,timestamp:new Date().toISOString()};f(ie=>[...ie,M]),i(!0);const I=Date.now().toString()+"-assistant",L={id:I,role:"assistant",content:"",timestamp:new Date().toISOString()};f(ie=>[...ie,L]);try{const ie=await fetch("/api/ai/chat/claude/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:$,userId:w})});if(!ie.ok)throw new Error("Failed to send message");const U=(z=ie.body)==null?void 0:z.getReader(),ee=new TextDecoder;let de="",oe="",Pe=!1;if(U)for(;;){const{done:ve,value:ye}=await U.read();if(ve)break;oe+=ee.decode(ye,{stream:!0});const ne=oe.split(`
`);oe=ne.pop()||"";for(const H of ne)if(H.startsWith("data: ")){const B=H.slice(6);if(B==="[DONE]"){Pe=!0,i(!1);break}try{const J=JSON.parse(B);if(J.error){console.error("[SSE] Server error:",J.error),de="I had trouble with that message. This can happen when certain words trigger safety filters, even in normal BJJ context. Could you try rephrasing? For example, instead of 'I got destroyed,' you could say 'I struggled against mount.'",f(ze=>ze.map(ue=>ue.id===I?{...ue,content:de}:ue)),i(!1),Pe=!0;break}if(J.chunk||J.content){const ze=J.chunk||J.content;de+=ze,f(ue=>ue.map(Ae=>Ae.id===I?{...Ae,content:de}:Ae))}else J.processedContent?(console.log("[VIDEO TOKENS]  Received processed content with video tokens (REPLACING, not appending)"),de=J.processedContent,f(ze=>ze.map(ue=>ue.id===I?{...ue,content:J.processedContent}:ue))):J.done&&console.log("[SSE]  Stream complete. Metadata:",J.metadata)}catch{console.debug("[SSE] Skipping unparseable data:",B.substring(0,50))}}if(Pe)break}i(!1),console.log("[CHAT] Message sent successfully, invalidating chat history cache"),Te.invalidateQueries({queryKey:["/api/ai/chat/history",w]})}catch(ie){i(!1),f(U=>U.filter(ee=>ee.id!==I)),v({title:"Error",description:ie.message||"Failed to send message",variant:"destructive"})}},E=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),A())},T=Ve({mutationFn:async $=>(console.log("[CHAT SAVE] Attempting to save video:",{videoId:$,userId:w}),Ce("light"),await ct("POST","/api/ai/saved-videos",{videoId:$,userId:w})),onSuccess:($,M)=>{console.log("[CHAT SAVE] Successfully saved video:",M),Ce("success"),s(I=>new Set([...Array.from(I),M])),v({title:"Saved",description:"Video added to your library"}),Te.invalidateQueries({queryKey:["/api/ai/saved-videos",w]})},onError:($,M)=>{console.error("[CHAT SAVE] Failed to save video:",{videoId:M,error:$.message||$}),v({title:"Error",description:$.message||"Failed to save video",variant:"destructive"})}}),P=Ve({mutationFn:async $=>(console.log("[CHAT UNSAVE] Attempting to unsave video:",{videoId:$,userId:w}),await ct("DELETE",`/api/ai/saved-videos/${$}`,{userId:w})),onSuccess:($,M)=>{console.log("[CHAT UNSAVE] Successfully unsaved video:",M),s(I=>{const L=Array.from(I);return new Set(L.filter(z=>z!==M))}),v({title:"Removed",description:"Video removed from your library"}),Te.invalidateQueries({queryKey:["/api/ai/saved-videos",w]})},onError:($,M)=>{console.error("[CHAT UNSAVE] Failed to unsave video:",{videoId:M,error:$.message||$}),v({title:"Error",description:$.message||"Failed to remove video",variant:"destructive"})}}),_=$=>{console.log("[CHAT TOGGLE SAVE] Toggle save for video:",{videoId:$,isSaved:a.has($),userId:w}),a.has($)?P.mutate($):T.mutate($)};if(m)return n.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex items-center justify-center",children:n.jsx(IS,{size:"lg",className:"text-purple-400"})});const R=u.length>0;return n.jsxs(Oa,{children:[n.jsxs("div",{className:"h-full bg-[#0A0A0B] flex flex-col overflow-hidden",children:[n.jsx("header",{className:"sticky top-0 z-100 bg-[#0A0A0B] border-b border-[#1A1A1C]",style:{height:"80px"},"data-testid":"chat-header",children:n.jsxs("div",{className:"h-full flex flex-col items-center justify-center px-6",children:[n.jsx("h1",{className:"text-[20px] md:text-[24px] font-bold text-white tracking-tight",children:"Prof. OS"}),n.jsxs("p",{className:"text-[13px] md:text-[14px] text-white/70 text-center leading-relaxed mt-1",style:{letterSpacing:"0.02em"},children:["Learns your game.",n.jsx("br",{className:"md:hidden"})," Makes you better."]})]})}),n.jsxs("main",{className:"flex-1 overflow-y-auto pb-48 md:pb-32",style:{WebkitOverflowScrolling:"touch"},children:[!R&&n.jsx("div",{className:"flex items-center justify-center min-h-full px-5 py-20",children:n.jsxs("div",{className:"bg-[#0A0A0B] border border-[#1A1A1C] rounded-xl p-10 md:p-16 max-w-[600px] w-full text-center",style:{boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},"data-testid":"welcome-message",children:[n.jsx("h2",{className:"text-[24px] md:text-[28px] font-medium text-white mb-8",style:{letterSpacing:"0.02em"},children:"Prof. OS"}),n.jsxs("div",{className:"space-y-6 mb-10",children:[n.jsxs("p",{className:"text-[15px] md:text-[16px] text-white/90 leading-relaxed",style:{letterSpacing:"0.02em"},children:["I've analyzed 10,000+",n.jsx("br",{}),"videos from elite",n.jsx("br",{}),"instructors."]}),n.jsxs("p",{className:"text-[15px] md:text-[16px] text-white/90 leading-relaxed",style:{letterSpacing:"0.02em"},children:["I track patterns in",n.jsx("br",{}),"your training you",n.jsx("br",{}),"can't see."]}),n.jsxs("p",{className:"text-[15px] md:text-[16px] text-white/90 leading-relaxed",style:{letterSpacing:"0.02em"},children:["I remember every",n.jsx("br",{}),"detail you share."]})]}),n.jsxs("p",{className:"text-[15px] md:text-[16px] text-white/85 leading-relaxed mb-16",style:{letterSpacing:"0.02em"},children:["The more we talk,",n.jsx("br",{}),"the smarter I get",n.jsx("br",{}),"about YOUR jiu jitsu."]}),n.jsxs("p",{className:"text-[16px] md:text-[18px] font-medium text-white",style:{letterSpacing:"0.02em"},children:["What did you work",n.jsx("br",{}),"on today?"]})]})}),R&&n.jsxs("div",{className:"max-w-[600px] mx-auto px-5 py-6 space-y-2",children:[u.map($=>n.jsx("div",{className:`flex ${$.role==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-3 ${$.role==="user"?"bg-[#2563EB] text-white rounded-tr-sm chat-message-sent":"bg-[#111113] text-white/90 rounded-tl-sm chat-message-streaming"}`,style:{fontSize:"15px",lineHeight:"1.5"},children:[Dwe($.content).map((M,I)=>n.jsxs("div",{children:[M.text&&n.jsx("p",{className:"whitespace-pre-wrap",children:M.text}),M.video&&n.jsxs("div",{className:"mt-3 bg-[#0A0A0B] border border-[#1A1A1C] rounded-lg overflow-hidden","data-testid":`video-card-${M.video.id}`,children:[n.jsx(_S,{videoId:M.video.videoId,title:M.video.title,className:"bg-[#1A1A1C]"}),n.jsxs("div",{className:"p-3 space-y-2",children:[n.jsx("h4",{className:"text-[14px] font-semibold text-white/90",children:M.video.title}),n.jsx("p",{className:"text-[12px] text-[#2563EB]",children:M.video.instructor}),n.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[n.jsx(Q,{size:"sm",className:"h-9 bg-[#2563EB] hover:bg-[#1d4ed8] text-white rounded-full",onClick:()=>l({videoId:M.video.videoId,title:M.video.title,instructor:M.video.instructor}),"data-testid":`button-watch-${M.video.id}`,children:"Watch"}),n.jsx(Q,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0",onClick:()=>_(M.video.id),"data-testid":`button-save-${M.video.id}`,children:a.has(M.video.id)?n.jsx(T1,{className:"h-4 w-4 text-[#2563EB]"}):n.jsx(_i,{className:"h-4 w-4 text-white/50"})})]})]})]})]},I)),n.jsx("div",{className:"text-[12px] text-white/50 mt-2",children:new Date($.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})},$.id)),r&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-[#111113] text-white/90 rounded-2xl rounded-tl-sm px-4 py-3 chat-thinking-indicator",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs("div",{className:"flex gap-1 mt-1",children:[n.jsx("span",{className:"w-2 h-2 bg-white/50 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("span",{className:"w-2 h-2 bg-white/50 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("span",{className:"w-2 h-2 bg-white/50 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),n.jsxs("div",{className:"text-[14px] text-white/70",children:[c,"..."]})]})})}),n.jsx("div",{ref:y})]})]}),n.jsx("div",{className:"fixed left-0 right-0 z-50 bg-[#0A0A0B] border-t border-[#1A1A1C] px-4 pb-4 md:bottom-0 bottom-16",style:{paddingTop:"16px",paddingBottom:"calc(16px + env(safe-area-inset-bottom))"},"data-testid":"chat-input-area",children:n.jsxs("div",{className:"max-w-[600px] mx-auto space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:$=>$&&($.style.fontSize="16px"),value:e,onChange:$=>t($.target.value),onKeyPress:E,placeholder:"Ask Prof. OS...",className:"w-full bg-[#111113] border border-[#333333] rounded-3xl px-5 py-3 pr-14 text-white placeholder:text-white/60 resize-none focus:outline-none focus:ring-2 focus:ring-[#2563EB] focus:border-transparent",style:{fontSize:"16px",minHeight:"48px",maxHeight:"120px"},rows:1,"data-testid":"input-message"}),n.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center text-white/70 hover:text-white transition-colors rounded-full","data-testid":"button-voice",children:n.jsx(mI,{className:"w-5 h-5"})})]}),n.jsx(Q,{onClick:A,disabled:!e.trim()||r,className:"w-full h-12 bg-[#2563EB] hover:bg-[#1d4ed8] text-white font-medium rounded-3xl text-[16px]","data-testid":"button-send",children:"Send"})]})})]}),o&&n.jsx(pl,{videoId:o.videoId,title:o.title,instructor:o.instructor,onClose:()=>l(null)})]})}const hb=768;function Bwe(){const[e,t]=g.useState(void 0);return g.useEffect(()=>{const r=window.matchMedia(`(max-width: ${hb-1}px)`),i=()=>{t(window.innerWidth<hb)};return r.addEventListener("change",i),t(window.innerWidth<hb),()=>r.removeEventListener("change",i)},[]),!!e}const zwe=dN,qwe=uN,uL=g.forwardRef(({className:e,...t},r)=>n.jsx(Ch,{className:we("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));uL.displayName=Ch.displayName;const Uwe=wd("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),fL=g.forwardRef(({side:e="right",className:t,children:r,...i},a)=>n.jsxs(qwe,{children:[n.jsx(uL,{}),n.jsxs(Ah,{ref:a,className:we(Uwe({side:e}),t),...i,children:[r,n.jsxs(Th,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(Fi,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fL.displayName=Ah.displayName;const hL=({className:e,...t})=>n.jsx("div",{className:we("flex flex-col space-y-2 text-center sm:text-left",e),...t});hL.displayName="SheetHeader";const mL=g.forwardRef(({className:e,...t},r)=>n.jsx(Eh,{ref:r,className:we("text-lg font-semibold text-foreground",e),...t}));mL.displayName=Eh.displayName;const pL=g.forwardRef(({className:e,...t},r)=>n.jsx(Ph,{ref:r,className:we("text-sm text-muted-foreground",e),...t}));pL.displayName=Ph.displayName;const Vwe="sidebar_state",Wwe=60*60*24*7,Hwe="16rem",Kwe="18rem",Gwe="3rem",Ywe="b",gL=g.createContext(null);function xL(){const e=g.useContext(gL);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function Qwe({defaultOpen:e=!0,open:t,onOpenChange:r,className:i,style:a,children:s,...o}){const l=Bwe(),[c,d]=g.useState(!1),[u,f]=g.useState(e),h=t??u,p=g.useCallback(x=>{const m=typeof x=="function"?x(h):x;r?r(m):f(m),document.cookie=`${Vwe}=${m}; path=/; max-age=${Wwe}`},[r,h]),y=g.useCallback(()=>l?d(x=>!x):p(x=>!x),[l,p,d]);g.useEffect(()=>{const x=m=>{m.key===Ywe&&(m.metaKey||m.ctrlKey)&&(m.preventDefault(),y())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[y]);const v=h?"expanded":"collapsed",b=g.useMemo(()=>({state:v,open:h,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:y}),[v,h,p,l,c,d,y]);return n.jsx(gL.Provider,{value:b,children:n.jsx(W1,{delayDuration:0,children:n.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":Hwe,"--sidebar-width-icon":Gwe,...a},className:we("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",i),...o,children:s})})})}function Jwe({side:e="left",variant:t="sidebar",collapsible:r="offcanvas",className:i,children:a,...s}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:d}=xL();return r==="none"?n.jsx("div",{"data-slot":"sidebar",className:we("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",i),...s,children:a}):o?n.jsx(zwe,{open:c,onOpenChange:d,...s,children:n.jsxs(fL,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":Kwe},side:e,children:[n.jsxs(hL,{className:"sr-only",children:[n.jsx(mL,{children:"Sidebar"}),n.jsx(pL,{children:"Displays the mobile sidebar."})]}),n.jsx("div",{className:"flex h-full w-full flex-col",children:a})]})}):n.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?r:"","data-variant":t,"data-side":e,"data-slot":"sidebar",children:[n.jsx("div",{"data-slot":"sidebar-gap",className:we("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),n.jsx("div",{"data-slot":"sidebar-container",className:we("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",i),...s,children:n.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:a})})]})}function Xwe({className:e,...t}){return n.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:we("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t})}function Zwe({className:e,...t}){return n.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:we("relative flex w-full min-w-0 flex-col p-2",e),...t})}function e1e({className:e,asChild:t=!1,...r}){const i=t?Sx:"div";return n.jsx(i,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:we("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...r})}function t1e({className:e,...t}){return n.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:we("w-full text-sm",e),...t})}function r1e({className:e,...t}){return n.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:we("flex w-full min-w-0 flex-col gap-1",e),...t})}function n1e({className:e,...t}){return n.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:we("group/menu-item relative",e),...t})}const i1e=wd("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function a1e({asChild:e=!1,isActive:t=!1,variant:r="default",size:i="default",tooltip:a,className:s,...o}){const l=e?Sx:"button",{isMobile:c,state:d}=xL(),u=n.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":i,"data-active":t,className:we(i1e({variant:r,size:i}),s),...o});return a?(typeof a=="string"&&(a={children:a}),n.jsxs(sR,{children:[n.jsx(oR,{asChild:!0,children:u}),n.jsx(H1,{side:"right",align:"center",hidden:d!=="collapsed"||c,...a})]})):u}const s1e=[{title:"Profile",path:"/settings/profile",icon:ll},{title:"Security",path:"/settings/security",icon:Ri},{title:"Subscription",path:"/settings/subscription",icon:Rc},{title:"Referrals",path:"/settings/referrals",icon:ur}];function o1e(){const[e]=Ze();return n.jsx(Jwe,{children:n.jsx(Xwe,{children:n.jsxs(Zwe,{children:[n.jsxs(e1e,{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ed,{className:"w-4 h-4 text-primary"}),n.jsx("span",{className:"text-base font-semibold",children:"BJJ OS Settings"})]}),n.jsx(t1e,{children:n.jsx(r1e,{children:s1e.map(t=>{const r=t.icon,i=e===t.path;return n.jsx(n1e,{children:n.jsx(a1e,{asChild:!0,"data-active":i,children:n.jsxs(dr,{href:t.path,"data-testid":`link-${t.title.toLowerCase()}`,children:[n.jsx(r,{className:"w-4 h-4"}),n.jsx("span",{children:t.title})]})})},t.title)})})})]})})})}function Qs({children:e}){const[,t]=Ze(),r=async()=>{const{clearAuth:a}=await yh(async()=>{const{clearAuth:s}=await Promise.resolve().then(()=>_4);return{clearAuth:s}},void 0);await a(),t("/")},i={"--sidebar-width":"16rem","--sidebar-width-icon":"3rem"};return n.jsx(Qwe,{style:i,children:n.jsxs("div",{className:"flex h-screen w-full",children:[n.jsx(o1e,{}),n.jsxs("div",{className:"flex flex-col flex-1",children:[n.jsxs("header",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx(dr,{href:"/chat",children:n.jsxs(Q,{variant:"ghost",size:"sm","data-testid":"button-back-chat",children:[n.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Back to Chat"]})}),n.jsxs(Q,{variant:"ghost",size:"sm",onClick:r,"data-testid":"button-logout",children:[n.jsx(Nd,{className:"w-4 h-4 mr-2"}),"Logout"]})]}),n.jsx("main",{className:"flex-1 overflow-auto p-6",children:e})]})]})})}function l1e(){var v;const{toast:e}=rt(),[t,r]=g.useState(!1),[i,a]=g.useState({displayName:"",username:"",beltLevel:"white",style:"gi",trainingFrequency:2,struggleAreaCategory:"guard_passing",heightFeet:"",heightInches:"",weight:"",age:""}),s=b=>{if(!b)return{feet:"",inches:""};const x=parseInt(b);return isNaN(x)?{feet:"",inches:""}:{feet:String(Math.floor(x/12)),inches:String(x%12)}},o=()=>{const b=parseInt(i.heightFeet)||0,x=parseInt(i.heightInches)||0;if(!(b===0&&x===0))return String(b*12+x)},l=b=>{if(!b)return"Not set";const x=parseInt(b);if(isNaN(x))return b;const m=Math.floor(x/12),j=x%12;return`${m}'${j}"`},{data:c,isLoading:d}=he({queryKey:["/api/auth/me"],refetchOnMount:!0});g.useEffect(()=>{if(c!=null&&c.user){const b=s(c.user.height);a({displayName:c.user.displayName||"",username:c.user.username||"",beltLevel:c.user.beltLevel||"white",style:c.user.style||"gi",trainingFrequency:c.user.trainingFrequency||2,struggleAreaCategory:c.user.struggleAreaCategory||"guard_passing",heightFeet:b.feet,heightInches:b.inches,weight:c.user.weight||"",age:c.user.age||""})}},[c==null?void 0:c.user]),console.log("[ProfileSettings] Query data:",c),console.log("[ProfileSettings] User:",c==null?void 0:c.user),console.log("[ProfileSettings] Belt level:",(v=c==null?void 0:c.user)==null?void 0:v.beltLevel);const u=Ve({mutationFn:async b=>await ct("PATCH","/api/auth/profile",b),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/auth/me"]}),e({title:"Profile Updated",description:"Your profile has been successfully updated"}),r(!1)},onError:b=>{e({title:"Update Failed",description:b.message,variant:"destructive"})}}),f=()=>{console.log("[ProfileSettings] Edit button clicked"),console.log("[ProfileSettings] User data:",c==null?void 0:c.user);const b=c==null?void 0:c.user,x=s(b==null?void 0:b.height);a({displayName:(b==null?void 0:b.displayName)||"",username:(b==null?void 0:b.username)||"",beltLevel:(b==null?void 0:b.beltLevel)||"white",style:(b==null?void 0:b.style)||"gi",trainingFrequency:(b==null?void 0:b.trainingFrequency)||2,struggleAreaCategory:(b==null?void 0:b.struggleAreaCategory)||"guard_passing",heightFeet:x.feet,heightInches:x.inches,weight:(b==null?void 0:b.weight)||"",age:(b==null?void 0:b.age)||""}),r(!0),console.log("[ProfileSettings] Edit mode enabled")},h=()=>{const b={...i,height:o()};u.mutate(b)},p=()=>{r(!1)};if(d)return n.jsx(Qs,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(qe,{className:"w-8 h-8 animate-spin text-primary"})})});const y=c==null?void 0:c.user;return n.jsx(Qs,{children:n.jsxs("div",{className:"max-w-2xl",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Profile Settings"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Manage your personal information and training preferences"}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Personal Information"}),n.jsx(Be,{children:"Your profile helps us personalize your training experience"})]}),n.jsxs(K,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Name"}),t?n.jsx(je,{value:i.displayName,onChange:b=>a({...i,displayName:b.target.value}),placeholder:"Enter your name","data-testid":"input-name"}):n.jsx(je,{value:(y==null?void 0:y.displayName)||"Not set",disabled:!0,"data-testid":"text-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Email"}),n.jsx(je,{value:(y==null?void 0:y.email)||(y==null?void 0:y.phoneNumber)||"",disabled:!0,"data-testid":"input-email"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Belt Level"}),t?n.jsxs(Je,{value:i.beltLevel,onValueChange:b=>a({...i,beltLevel:b}),children:[n.jsx(Ye,{"data-testid":"select-belt",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"white",children:"White Belt"}),n.jsx(G,{value:"blue",children:"Blue Belt"}),n.jsx(G,{value:"purple",children:"Purple Belt"}),n.jsx(G,{value:"brown",children:"Brown Belt"}),n.jsx(G,{value:"black",children:"Black Belt"})]})]}):n.jsx(je,{value:y!=null&&y.beltLevel?`${y.beltLevel.charAt(0).toUpperCase()+y.beltLevel.slice(1)} Belt`:"Not set",disabled:!0,"data-testid":"text-belt"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Training Style"}),t?n.jsxs(Je,{value:i.style,onValueChange:b=>a({...i,style:b}),children:[n.jsx(Ye,{"data-testid":"select-style",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"gi",children:"Gi"}),n.jsx(G,{value:"nogi",children:"No-Gi"}),n.jsx(G,{value:"both",children:"Both"})]})]}):n.jsx(je,{value:y!=null&&y.style?y.style==="both"?"Gi & No-Gi":y.style==="nogi"?"No-Gi":"Gi":"Not set",disabled:!0,"data-testid":"text-style"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Biggest Struggle"}),t?n.jsxs(Je,{value:i.struggleAreaCategory,onValueChange:b=>a({...i,struggleAreaCategory:b}),children:[n.jsx(Ye,{"data-testid":"select-struggle",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"guard_passing",children:"Guard Passing"}),n.jsx(G,{value:"guard_retention",children:"Guard Retention"}),n.jsx(G,{value:"submissions",children:"Submissions from Top"}),n.jsx(G,{value:"escapes",children:"Escapes from Bottom"}),n.jsx(G,{value:"takedowns",children:"Takedowns"}),n.jsx(G,{value:"transitions",children:"Position Transitions"}),n.jsx(G,{value:"other",children:"Other"})]})]}):n.jsx(je,{value:y!=null&&y.struggleAreaCategory?y.struggleAreaCategory.split("_").map(b=>b.charAt(0).toUpperCase()+b.slice(1)).join(" "):"Not set",disabled:!0,"data-testid":"text-struggle"})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[n.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Optional Information"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Height"}),t?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1",children:n.jsx(je,{type:"number",min:"0",max:"8",placeholder:"5",value:i.heightFeet,onChange:b=>a({...i,heightFeet:b.target.value}),"data-testid":"input-height-feet"})}),n.jsx("span",{className:"text-muted-foreground font-medium",children:"ft"}),n.jsx("div",{className:"flex-1",children:n.jsx(je,{type:"number",min:"0",max:"11",placeholder:"10",value:i.heightInches,onChange:b=>a({...i,heightInches:b.target.value}),"data-testid":"input-height-inches"})}),n.jsx("span",{className:"text-muted-foreground font-medium",children:"in"})]}):n.jsx(je,{value:l(y==null?void 0:y.height),disabled:!0,"data-testid":"text-height"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Weight"}),t?n.jsx(je,{value:i.weight,onChange:b=>a({...i,weight:b.target.value}),placeholder:"e.g., 170 lbs or 77kg","data-testid":"input-weight"}):n.jsx(je,{value:(y==null?void 0:y.weight)||"Not set",disabled:!0,"data-testid":"text-weight"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Age"}),t?n.jsx(je,{value:i.age,onChange:b=>a({...i,age:b.target.value}),placeholder:"e.g., 32","data-testid":"input-age"}):n.jsx(je,{value:(y==null?void 0:y.age)||"Not set",disabled:!0,"data-testid":"text-age"})]})]}),n.jsx("div",{className:"flex gap-3 pt-4",children:t?n.jsxs(n.Fragment,{children:[n.jsxs(Q,{onClick:h,disabled:u.isPending,"data-testid":"button-save",children:[u.isPending&&n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),"Save Changes"]}),n.jsx(Q,{variant:"outline",onClick:p,disabled:u.isPending,"data-testid":"button-cancel",children:"Cancel"})]}):n.jsx(Q,{onClick:f,"data-testid":"button-edit",children:"Edit Profile"})})]})]})]})})}function c1e(){const{toast:e}=rt(),[t,r]=g.useState(!1),[i,a]=g.useState(!1),[s,o]=g.useState(!1),[l,c]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""}),{data:d,isLoading:u}=he({queryKey:["/api/auth/me"]}),f=Ve({mutationFn:async v=>await ct("POST","/api/auth/set-password",v),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/auth/me"]}),e({title:"Password Updated",description:"Your password has been set successfully. You can now use it to log in faster."}),c({currentPassword:"",newPassword:"",confirmPassword:""})},onError:v=>{e({title:"Failed to Set Password",description:v.message,variant:"destructive"})}}),h=()=>{if(l.newPassword.length<8){e({title:"Password Too Short",description:"Password must be at least 8 characters",variant:"destructive"});return}if(l.newPassword!==l.confirmPassword){e({title:"Passwords Don't Match",description:"Please make sure your passwords match",variant:"destructive"});return}f.mutate({newPassword:l.newPassword,currentPassword:d!=null&&d.hasPassword?l.currentPassword:void 0})};if(u)return n.jsx(Qs,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(qe,{className:"w-8 h-8 animate-spin text-primary"})})});const p=d,y=p==null?void 0:p.hasPassword;return n.jsx(Qs,{children:n.jsxs("div",{className:"max-w-2xl",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Security Settings"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Manage your password and account security"}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(Yo,{className:"w-5 h-5"}),y?"Change Password":"Set Password (Optional)"]}),n.jsx(Be,{children:y?"Update your password to keep your account secure":"Add a password to log in faster. You can always use email verification instead."})]}),n.jsxs(K,{className:"space-y-4",children:[y&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"currentPassword",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(je,{id:"currentPassword",type:t?"text":"password",value:l.currentPassword,onChange:v=>c({...l,currentPassword:v.target.value}),placeholder:"Enter current password","data-testid":"input-current-password"}),n.jsx(Q,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full",onClick:()=>r(!t),"data-testid":"button-toggle-current-password",children:t?n.jsx(Ms,{className:"w-4 h-4"}):n.jsx(Mr,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"newPassword",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(je,{id:"newPassword",type:i?"text":"password",value:l.newPassword,onChange:v=>c({...l,newPassword:v.target.value}),placeholder:"Enter new password (min 8 characters)","data-testid":"input-new-password"}),n.jsx(Q,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full",onClick:()=>a(!i),"data-testid":"button-toggle-new-password",children:i?n.jsx(Ms,{className:"w-4 h-4"}):n.jsx(Mr,{className:"w-4 h-4"})})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"confirmPassword",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(je,{id:"confirmPassword",type:s?"text":"password",value:l.confirmPassword,onChange:v=>c({...l,confirmPassword:v.target.value}),placeholder:"Confirm new password","data-testid":"input-confirm-password"}),n.jsx(Q,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full",onClick:()=>o(!s),"data-testid":"button-toggle-confirm-password",children:s?n.jsx(Ms,{className:"w-4 h-4"}):n.jsx(Mr,{className:"w-4 h-4"})})]})]}),n.jsxs(Q,{onClick:h,disabled:f.isPending||!l.newPassword||!l.confirmPassword,"data-testid":"button-set-password",children:[f.isPending&&n.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"}),y?"Update Password":"Set Password"]})]})]}),n.jsxs(W,{className:"mt-6",children:[n.jsxs(X,{children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(Ri,{className:"w-5 h-5"}),"Login Methods"]}),n.jsx(Be,{children:"Ways you can sign in to your account"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Email Verification"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sign in with a code sent to ",(p==null?void 0:p.email)||"your email"]})]}),n.jsx("span",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Always Available"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Password"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:y?"Sign in with your password for faster access":"Set a password for faster login (optional)"})]}),n.jsx("span",{className:`text-sm font-medium ${y?"text-green-600 dark:text-green-400":"text-muted-foreground"}`,children:y?"Enabled":"Not Set"})]})]})]})]})})}function d1e(){var u,f,h;const{toast:e}=rt(),{data:t,isLoading:r}=he({queryKey:["/api/auth/me"]});if(r)return n.jsx(Qs,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(qe,{className:"w-8 h-8 animate-spin text-primary"})})});const i=(t==null?void 0:t.subscriptionType)||"free";t!=null&&t.subscriptionStatus;const a=t==null?void 0:t.trialEndDate,s=i==="lifetime",o=!s&&a&&new Date(a)>new Date,l=a?Math.ceil((new Date(a).getTime()-new Date().getTime())/(1e3*60*60*24)):0,c=[{id:"free",name:"Free",price:"$0",period:"forever",features:["Basic chat with Prof. OS","5 video recommendations per day","Community support"],isCurrent:i==="free"},{id:"monthly",name:o?`Monthly (Trial - ${l} days left)`:"Monthly",price:"$30",period:"per month",features:["Unlimited AI coaching","Unlimited video recommendations","Full video library access","Save favorite videos","Priority support"],isCurrent:i==="monthly"},{id:"founding",name:"Founding Member",price:"$89",period:"per year",badge:"Best Value",features:["Unlimited AI coaching","Unlimited video recommendations","Voice input & output","Priority support","Early access to new features","Lifetime discount locked in"],isCurrent:i==="founding"},{id:"pro",name:"Pro",price:"$179",period:"per year",features:["Everything in Founding","Advanced technique analysis","Competition prep plans","Personal training schedules","1-on-1 strategy sessions (quarterly)"],isCurrent:i==="pro"}],d=()=>{e({title:"Coming Soon",description:"Subscription management will be available soon"})};return n.jsx(Qs,{children:n.jsxs("div",{className:"max-w-4xl",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Subscription"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Manage your subscription plan and billing"}),n.jsxs(W,{className:"mb-6",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Current Plan"}),n.jsx(Be,{children:s?n.jsx("span",{className:"font-semibold text-primary flex items-center gap-2",children:"Lifetime Access "}):n.jsxs(n.Fragment,{children:["You're currently on the ",n.jsx("span",{className:"font-semibold text-foreground",children:(u=c.find(p=>p.isCurrent))==null?void 0:u.name})," plan"]})})]}),n.jsx(K,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"space-y-1",children:s?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-2xl font-bold text-primary",children:"Lifetime Access"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Status: ",n.jsx("span",{className:"text-green-600 font-medium",children:"Active"})]}),n.jsx("p",{className:"text-sm text-muted-foreground italic mt-2",children:"No subscription to manage - you own this forever!"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-2xl font-bold",children:[(f=c.find(p=>p.isCurrent))==null?void 0:f.price,n.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:(h=c.find(p=>p.isCurrent))==null?void 0:h.period})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i==="free"||i==="free_trial"?"Upgrade anytime to unlock premium features":"Thank you for your support!"})]})}),!s&&i!=="free"&&i!=="free_trial"&&n.jsxs(Q,{variant:"outline",onClick:d,"data-testid":"button-manage",children:[n.jsx(Rc,{className:"w-4 h-4 mr-2"}),"Manage Billing"]})]})})]}),Zt()?n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Manage Subscription"}),n.jsx(Be,{children:"Subscription management is available on the web"})]}),n.jsxs(K,{children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"To upgrade, change, or manage your subscription, please visit bjjos.app in your browser."}),n.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[n.jsx(Mc,{className:"w-4 h-4"}),n.jsx("span",{children:"bjjos.app"})]})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Available Plans"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:c.map(p=>n.jsxs(W,{className:p.isCurrent?"border-primary":"","data-testid":`card-plan-${p.id}`,children:[n.jsxs(X,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx(Z,{className:"text-lg",children:p.name}),p.badge&&n.jsx(ae,{variant:"default",className:"text-xs",children:p.badge}),p.isCurrent&&n.jsx(ae,{variant:"secondary",className:"text-xs",children:"Current"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-3xl font-bold",children:p.price}),n.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:p.period})]})]}),n.jsxs(K,{children:[n.jsx("ul",{className:"space-y-2 mb-4",children:p.features.map((y,v)=>n.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[n.jsx(_r,{className:"w-4 h-4 text-primary shrink-0 mt-0.5"}),n.jsx("span",{children:y})]},v))}),p.isCurrent?n.jsx(Q,{className:"w-full",disabled:!0,"data-testid":`button-current-${p.id}`,children:"Current Plan"}):p.id==="free"?n.jsx(Q,{variant:"outline",className:"w-full",disabled:!0,"data-testid":`button-downgrade-${p.id}`,children:"Downgrade"}):n.jsx(dr,{href:"/pricing",children:n.jsx(Q,{className:"w-full","data-testid":`button-upgrade-${p.id}`,children:i==="free"?"Upgrade":"Switch Plan"})})]})]},p.id))})]})]})})}function u1e(){var b;const{toast:e}=rt(),[t,r]=g.useState(!1),{data:i,isLoading:a}=he({queryKey:["/api/auth/me"]}),{data:s,isLoading:o,error:l}=he({queryKey:["/api/referrals/my-code"],enabled:!!(i!=null&&i.user.id),retry:!1}),c=a||o,d=()=>{h&&h!=="N/A"&&(navigator.clipboard.writeText(h),r(!0),e({title:"Copied!",description:"Referral code copied to clipboard"}),setTimeout(()=>r(!1),2e3))},u=()=>{if(h&&h!=="N/A"){const x=`${window.location.origin}/signup?ref=${h}`;navigator.clipboard.writeText(x),e({title:"Copied!",description:"Referral link copied to clipboard"})}};if(c)return n.jsx(Qs,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(qe,{className:"w-8 h-8 animate-spin text-primary"})})});const f=i==null?void 0:i.user,h=(s==null?void 0:s.referralCode)||((b=f==null?void 0:f.phoneNumber)==null?void 0:b.slice(-6))||"N/A",p=(s==null?void 0:s.totalReferrals)||0,y=(s==null?void 0:s.activeReferrals)||0,v=l&&!s;return n.jsx(Qs,{children:n.jsxs("div",{className:"max-w-3xl",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Referrals"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Share BJJ OS with your training partners and earn rewards"}),n.jsxs(W,{className:"mb-6",children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Your Referral Code"}),n.jsx(Be,{children:v?"Referral program coming soon. Your temporary code is shown below.":"Share this code with friends to give them a discount and earn rewards"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(je,{value:h,readOnly:!0,className:"font-mono text-lg","data-testid":"input-referral-code"}),n.jsx(Q,{onClick:d,variant:"outline","data-testid":"button-copy-code",children:t?n.jsx(_r,{className:"w-4 h-4"}):n.jsx(Rp,{className:"w-4 h-4"})})]}),n.jsxs(Q,{onClick:u,variant:"secondary",className:"w-full","data-testid":"button-copy-link",children:[n.jsx(Rp,{className:"w-4 h-4 mr-2"}),"Copy Referral Link"]}),v&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Referral tracking is being set up. Your code will work once the program launches."})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Referrals"}),n.jsx(ur,{className:"w-4 h-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-referrals",children:p}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"All-time sign-ups"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Active Referrals"}),n.jsx(uf,{className:"w-4 h-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-active-referrals",children:y}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently subscribed"})]})]})]}),n.jsxs(W,{children:[n.jsxs(X,{children:[n.jsx(Z,{children:"Referral Rewards"}),n.jsx(Be,{children:"Earn rewards when your friends join BJJ OS"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ae,{variant:"secondary",className:"mt-1",children:"Friend"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"10% off first year"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Your friend gets a discount on their subscription"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ae,{variant:"secondary",className:"mt-1",children:"You"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"1 month free per referral"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Earn free months when friends subscribe"})]})]})]}),n.jsx("div",{className:"pt-4 border-t",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Rewards are automatically applied to your account. Questions? Contact support."})})]})]})]})})}const PT=[{id:"chat",label:"Chat",icon:zl,path:"/chat"},{id:"library",label:"Videos",icon:ka,path:"/library"},{id:"saved",label:"Saved",icon:_i,path:"/saved-videos"},{id:"settings",label:"Settings",icon:Sd,path:"/settings"}],f1e={white:"#FFFFFF",blue:"#2563EB",purple:"#7C3AED",brown:"#92400E",black:"#000000"};function h1e({children:e}){const[t,r]=Ze(),{toast:i}=rt(),{data:a}=he({queryKey:["/api/auth/me"]}),s=async()=>{try{await ct("POST","/api/auth/logout");const{clearAuth:u}=await yh(async()=>{const{clearAuth:f}=await Promise.resolve().then(()=>_4);return{clearAuth:f}},void 0);await u(),r("/email-login"),i({title:"Logged out",description:"See you on the mat!"})}catch(u){console.error("Logout error:",u)}},o=u=>t===u,l=(a==null?void 0:a.name)||(a==null?void 0:a.username)||"User",c=(a==null?void 0:a.beltLevel)||"white",d=f1e[c];return n.jsxs("div",{className:"adaptive-layout",children:[n.jsx("aside",{className:"desktop-sidebar",children:n.jsxs("div",{className:"sidebar-content",children:[n.jsx("div",{className:"sidebar-header",children:n.jsxs("div",{className:"logo",children:[n.jsx(zl,{className:"logo-icon"}),n.jsx("span",{className:"logo-text",children:"BJJ OS"})]})}),n.jsx("nav",{className:"sidebar-nav",children:PT.map(u=>{const f=u.icon,h=o(u.path);return n.jsxs("button",{onClick:()=>r(u.path),className:`nav-item ${h?"active":""}`,"data-testid":`nav-${u.id}`,children:[n.jsx(f,{className:"nav-icon"}),n.jsx("span",{className:"nav-label",children:u.label}),h&&n.jsx("div",{className:"active-indicator"})]},u.id)})}),n.jsx("div",{className:"sidebar-footer",children:n.jsxs("div",{className:"user-profile",children:[n.jsxs("div",{className:"user-info",children:[n.jsx("span",{className:"user-name",children:l}),n.jsx(ae,{style:{backgroundColor:d,color:c==="white"?"#000":"#fff"},className:"belt-badge",children:c.toUpperCase()})]}),n.jsx(Q,{variant:"ghost",size:"sm",onClick:s,className:"logout-btn","data-testid":"button-logout",children:n.jsx(Nd,{className:"w-4 h-4"})})]})})]})}),n.jsx("main",{className:"main-content",children:e}),n.jsx("nav",{className:"mobile-bottom-nav",children:PT.map(u=>{const f=u.icon,h=o(u.path);return n.jsxs("button",{onClick:()=>r(u.path),className:`bottom-nav-item ${h?"active":""}`,"data-testid":`mobile-nav-${u.id}`,children:[n.jsx(f,{className:"bottom-nav-icon"}),n.jsx("span",{className:"bottom-nav-label",children:u.label})]},u.id)})}),n.jsx("style",{children:`
        /* ==================== LAYOUT STRUCTURE ==================== */
        .adaptive-layout {
          display: flex;
          height: 100vh;
          width: 100%;
          background: #000;
          color: #fff;
          overflow: hidden;
        }

        .main-content {
          flex: 1;
          overflow-y: auto;
          overflow-x: hidden;
          padding-bottom: 80px; /* Space for mobile bottom nav */
        }

        /* ==================== DESKTOP SIDEBAR ==================== */
        .desktop-sidebar {
          display: none;
        }

        @media (min-width: 768px) {
          .desktop-sidebar {
            display: flex;
            flex-direction: column;
            width: 240px;
            background: #0F0F0F;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
          }

          .main-content {
            padding-bottom: 0;
          }
        }

        .sidebar-content {
          display: flex;
          flex-direction: column;
          height: 100%;
          padding: 16px;
        }

        .sidebar-header {
          margin-bottom: 32px;
        }

        .logo {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 8px;
        }

        .logo-icon {
          width: 32px;
          height: 32px;
          background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
          border-radius: 8px;
          padding: 6px;
        }

        .logo-text {
          font-size: 20px;
          font-weight: 700;
          background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .sidebar-nav {
          flex: 1;
          display: flex;
          flex-direction: column;
          gap: 4px;
        }

        .nav-item {
          position: relative;
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          background: transparent;
          border: none;
          border-radius: 8px;
          color: #A0A0A0;
          cursor: pointer;
          transition: all 150ms ease;
          font-size: 15px;
          font-weight: 500;
        }

        .nav-item:hover {
          background: rgba(255, 255, 255, 0.05);
          color: #fff;
        }

        .nav-item.active {
          background: rgba(37, 99, 235, 0.1);
          color: #fff;
        }

        .nav-item.active .nav-icon {
          background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .nav-icon {
          width: 20px;
          height: 20px;
        }

        .nav-label {
          flex: 1;
          text-align: left;
        }

        .active-indicator {
          position: absolute;
          left: 0;
          top: 50%;
          transform: translateY(-50%);
          width: 3px;
          height: 24px;
          background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
          border-radius: 0 2px 2px 0;
        }

        .sidebar-footer {
          border-top: 1px solid rgba(255, 255, 255, 0.1);
          padding-top: 16px;
        }

        .user-profile {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 8px;
        }

        .user-info {
          display: flex;
          flex-direction: column;
          gap: 4px;
        }

        .user-name {
          font-size: 14px;
          font-weight: 600;
          color: #fff;
        }

        .belt-badge {
          font-size: 10px;
          font-weight: 700;
          padding: 2px 8px;
          border-radius: 4px;
        }

        .logout-btn {
          opacity: 0.6;
        }

        .logout-btn:hover {
          opacity: 1;
        }

        /* ==================== MOBILE BOTTOM NAV ==================== */
        .mobile-bottom-nav {
          display: flex;
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          height: 64px;
          background: rgba(0, 0, 0, 0.95);
          backdrop-filter: blur(20px);
          border-top: 1px solid rgba(255, 255, 255, 0.1);
          z-index: 1000;
          padding-bottom: env(safe-area-inset-bottom);
        }

        @media (min-width: 768px) {
          .mobile-bottom-nav {
            display: none;
          }
        }

        .bottom-nav-item {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 4px;
          background: transparent;
          border: none;
          color: #71717A;
          cursor: pointer;
          transition: all 150ms ease;
          padding: 8px;
        }

        .bottom-nav-item.active {
          color: #fff;
        }

        .bottom-nav-item.active .bottom-nav-icon {
          color: #7C3AED;
        }

        .bottom-nav-icon {
          width: 24px;
          height: 24px;
          stroke: currentColor;
        }

        .bottom-nav-label {
          font-size: 11px;
          font-weight: 600;
        }

        /* ==================== MOBILE OPTIMIZATIONS ==================== */
        @media (max-width: 767px) {
          .main-content {
            padding-bottom: calc(64px + env(safe-area-inset-bottom));
          }
        }
      `})]})}const m1e={white:"#FFFFFF",blue:"#2563EB",purple:"#7C3AED",brown:"#92400E",black:"#000000"};function p1e(){const{toast:e}=rt(),[,t]=Ze(),[r,i]=g.useState(!1),[a,s]=g.useState(!1),[o,l]=g.useState(!1),{data:c}=he({queryKey:["/api/auth/me"]}),[d,u]=g.useState({name:"",email:"",beltLevel:"white",style:"both",struggleTechnique:"",heightFeet:"",heightInches:"",weight:"",trainingFrequency:"",age:"",injuries:""}),f=j=>{if(!j)return{feet:"",inches:""};const N=typeof j=="string"?parseInt(j):j;return isNaN(N)?{feet:"",inches:""}:{feet:String(Math.floor(N/12)),inches:String(N%12)}},h=()=>{const j=parseInt(d.heightFeet)||0,N=parseInt(d.heightInches)||0;return j===0&&N===0?null:j*12+N};g.useEffect(()=>{var j,N,w;if(c){const S=f(c.height);u({name:c.name||"",email:c.email||"",beltLevel:c.beltLevel||"white",style:c.style||"both",struggleTechnique:c.struggleTechnique||"",heightFeet:S.feet,heightInches:S.inches,weight:((j=c.weight)==null?void 0:j.toString())||"",trainingFrequency:((N=c.trainingFrequency)==null?void 0:N.toString())||"",age:((w=c.age)==null?void 0:w.toString())||"",injuries:Array.isArray(c.injuries)?c.injuries.join(", "):""})}},[c]);const p=Ve({mutationFn:async j=>(await ct("PATCH","/api/auth/profile",j)).json(),onSuccess:()=>{e({title:"Profile updated",description:"Your changes have been saved"}),Te.invalidateQueries({queryKey:["/api/auth/me"]}),i(!1)},onError:j=>{e({title:"Error",description:j.message||"Failed to update profile",variant:"destructive"}),i(!1)}}),y=()=>{i(!0);const j={name:d.name,beltLevel:d.beltLevel,style:d.style,struggleTechnique:d.struggleTechnique,height:h(),weight:d.weight?parseInt(d.weight):null,trainingFrequency:d.trainingFrequency?parseInt(d.trainingFrequency):null,age:d.age,injuries:d.injuries?d.injuries.split(",").map(N=>N.trim()).filter(Boolean):[]};p.mutate(j)},v=async()=>{try{await ct("POST","/api/auth/logout"),await Nx(),t("/email-login"),e({title:"Logged out",description:"See you on the mat!"})}catch(j){console.error("Logout error:",j)}},b=async()=>{s(!0);try{await ct("/api/user/chat-history","DELETE"),Te.invalidateQueries({queryKey:["/api/ai/chat/history"]}),e({title:"Chat History Deleted",description:"All your conversations have been removed."})}catch(j){e({title:"Error",description:j.message||"Failed to delete chat history",variant:"destructive"})}finally{s(!1)}},x=async()=>{l(!0);try{await ct("/api/user/reset-profile","DELETE"),Te.invalidateQueries({queryKey:["/api/auth/me"]}),Te.invalidateQueries({queryKey:["/api/auth/profile"]}),Te.invalidateQueries({queryKey:["/api/ai/chat/history"]}),e({title:"Profile Reset Complete",description:"Redirecting to onboarding..."}),setTimeout(()=>{t("/onboarding")},1e3)}catch(j){e({title:"Error",description:j.message||"Failed to reset profile",variant:"destructive"}),l(!1)}},m=m1e[d.beltLevel];return n.jsx(h1e,{children:n.jsxs("div",{className:"settings-page",children:[n.jsx("header",{className:"page-header",children:n.jsx("h1",{className:"page-title",children:"Settings"})}),n.jsxs("div",{className:"settings-content",children:[n.jsxs(W,{className:"settings-card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx(ll,{className:"section-icon"}),n.jsx("h2",{className:"section-title",children:"Profile"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{htmlFor:"name",children:"Name"}),n.jsx(je,{id:"name",value:d.name,onChange:j=>u({...d,name:j.target.value}),placeholder:"Your name","data-testid":"input-name"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{htmlFor:"email",children:"Email"}),n.jsx(je,{id:"email",type:"email",value:d.email,disabled:!0,className:"disabled-input","data-testid":"input-email"}),n.jsx("p",{className:"field-hint",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{htmlFor:"belt",children:"Belt Level"}),n.jsxs(Je,{value:d.beltLevel,onValueChange:j=>u({...d,beltLevel:j}),children:[n.jsx(Ye,{id:"belt","data-testid":"select-belt",children:n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:n.jsx(ae,{style:{backgroundColor:m,color:d.beltLevel==="white"?"#000":"#fff"},children:d.beltLevel.toUpperCase()})})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"white",children:"White Belt"}),n.jsx(G,{value:"blue",children:"Blue Belt"}),n.jsx(G,{value:"purple",children:"Purple Belt"}),n.jsx(G,{value:"brown",children:"Brown Belt"}),n.jsx(G,{value:"black",children:"Black Belt"})]})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{htmlFor:"style",children:"Training Style"}),n.jsxs(Je,{value:d.style,onValueChange:j=>u({...d,style:j}),children:[n.jsx(Ye,{id:"style","data-testid":"select-style",children:n.jsx(Xe,{})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"gi",children:"Gi Only"}),n.jsx(G,{value:"nogi",children:"No-Gi Only"}),n.jsx(G,{value:"both",children:"Both Gi & No-Gi"})]})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{htmlFor:"struggle",children:"Biggest Struggle"}),n.jsx("textarea",{id:"struggle",value:d.struggleTechnique,onChange:j=>u({...d,struggleTechnique:j.target.value}),placeholder:"What technique do you struggle with most?",rows:3,className:"struggle-textarea","data-testid":"input-struggle"}),n.jsx("p",{className:"field-hint",children:"This helps Professor OS personalize recommendations"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{children:"Height"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1",children:n.jsx(je,{id:"height-feet",type:"number",min:"0",max:"8",placeholder:"5",value:d.heightFeet,onChange:j=>u({...d,heightFeet:j.target.value}),"data-testid":"input-height-feet"})}),n.jsx("span",{className:"text-muted-foreground font-medium",children:"ft"}),n.jsx("div",{className:"flex-1",children:n.jsx(je,{id:"height-inches",type:"number",min:"0",max:"11",placeholder:"10",value:d.heightInches,onChange:j=>u({...d,heightInches:j.target.value}),"data-testid":"input-height-inches"})}),n.jsx("span",{className:"text-muted-foreground font-medium",children:"in"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{htmlFor:"weight",children:"Weight (pounds)"}),n.jsx(je,{id:"weight",type:"number",value:d.weight,onChange:j=>u({...d,weight:j.target.value}),placeholder:"e.g. 180","data-testid":"input-weight"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{htmlFor:"frequency",children:"Training Frequency"}),n.jsxs(Je,{value:d.trainingFrequency,onValueChange:j=>u({...d,trainingFrequency:j}),children:[n.jsx(Ye,{id:"frequency","data-testid":"select-frequency",children:n.jsx(Xe,{placeholder:"How many days per week?"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"1",children:"1x per week"}),n.jsx(G,{value:"2",children:"2x per week"}),n.jsx(G,{value:"3",children:"3x per week"}),n.jsx(G,{value:"4",children:"4x per week"}),n.jsx(G,{value:"5",children:"5x per week"}),n.jsx(G,{value:"6",children:"6x per week"}),n.jsx(G,{value:"7",children:"7x per week"})]})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{htmlFor:"age",children:"Age"}),n.jsx(je,{id:"age",type:"text",value:d.age,onChange:j=>u({...d,age:j.target.value}),placeholder:"e.g. 35","data-testid":"input-age"}),n.jsx("p",{className:"field-hint",children:"Used for personalized training advice"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx(ce,{htmlFor:"injuries",children:"Injuries (comma-separated)"}),n.jsx(je,{id:"injuries",value:d.injuries,onChange:j=>u({...d,injuries:j.target.value}),placeholder:"e.g. knee, shoulder, lower back","data-testid":"input-injuries"}),n.jsx("p",{className:"field-hint",children:"Helps avoid problematic techniques"})]}),n.jsx(Q,{onClick:y,disabled:r,className:"save-button","data-testid":"button-save",children:r?"Saving...":"Save Changes"})]}),n.jsxs(W,{className:"settings-card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h2",{className:"section-title",children:"Subscription"})}),n.jsxs("div",{className:"subscription-info",children:[n.jsxs("p",{className:"subscription-type",children:["Plan: ",n.jsx("strong",{children:(c==null?void 0:c.subscriptionType)||"Free"})]}),n.jsxs("p",{className:"subscription-status",children:["Status: ",n.jsx("strong",{children:(c==null?void 0:c.subscriptionStatus)||"Inactive"})]}),n.jsxs(Q,{variant:"outline",onClick:async()=>{Zt()?await qh.open({url:"https://bjjos.app/settings/subscription"}):t("/settings/subscription")},className:"manage-button",children:[n.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Manage Subscription"]})]})]}),n.jsxs(W,{className:"settings-card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx(Ri,{className:"section-icon"}),n.jsx("h2",{className:"section-title",children:"Data & Privacy"})]}),n.jsxs("div",{className:"data-action-row",children:[n.jsxs("div",{className:"data-action-info",children:[n.jsxs("div",{className:"data-action-label",children:[n.jsx(to,{className:"w-4 h-4"}),n.jsx("span",{children:"Delete Chat History"})]}),n.jsx("p",{className:"field-hint",children:"Removes all messages. Your profile stays intact."})]}),n.jsxs(Xg,{children:[n.jsx(gT,{asChild:!0,children:n.jsx(Q,{variant:"outline",size:"sm",disabled:a,"data-testid":"button-delete-chat",children:a?n.jsx(qe,{className:"w-4 h-4 animate-spin"}):"Delete"})}),n.jsxs(rh,{className:"bg-[#1A1A1A] border-white/10",children:[n.jsxs(nh,{children:[n.jsx(ah,{className:"text-white",children:"Delete Chat History?"}),n.jsx(sh,{className:"text-white/70",children:"This will permanently delete all your conversations with Professor OS. Your profile (belt rank, goals, preferences) will not be affected. This cannot be undone."})]}),n.jsxs(ih,{children:[n.jsx(lh,{className:"bg-white/10 text-white border-white/10",children:"Cancel"}),n.jsx(oh,{onClick:b,className:"bg-red-500 text-white hover:bg-red-600","data-testid":"button-confirm-delete-chat",children:"Delete"})]})]})]})]}),n.jsx("div",{className:"data-action-divider"}),n.jsxs("div",{className:"data-action-row",children:[n.jsxs("div",{className:"data-action-info",children:[n.jsxs("div",{className:"data-action-label",children:[n.jsx(Fn,{className:"w-4 h-4"}),n.jsx("span",{children:"Reset Professor OS Memory"})]}),n.jsx("p",{className:"field-hint",children:"Start fresh. Removes all conversations AND your profile."})]}),n.jsxs(Xg,{children:[n.jsx(gT,{asChild:!0,children:n.jsx(Q,{variant:"destructive",size:"sm",disabled:o,"data-testid":"button-reset-profile",children:o?n.jsx(qe,{className:"w-4 h-4 animate-spin"}):"Reset"})}),n.jsxs(rh,{className:"bg-[#1A1A1A] border-white/10",children:[n.jsxs(nh,{children:[n.jsx(ah,{className:"text-white",children:"Reset Everything?"}),n.jsx(sh,{className:"text-white/70",children:"This will delete ALL your data including conversations, your belt rank, goals, training preferences, and everything Professor OS has learned about you. You will need to set up your profile again. This cannot be undone."})]}),n.jsxs(ih,{children:[n.jsx(lh,{className:"bg-white/10 text-white border-white/10",children:"Cancel"}),n.jsx(oh,{onClick:x,className:"bg-red-500 text-white hover:bg-red-600","data-testid":"button-confirm-reset-profile",children:"Reset Everything"})]})]})]})]})]}),n.jsxs(Q,{variant:"destructive",onClick:v,className:"logout-button","data-testid":"button-logout",children:[n.jsx(Nd,{className:"w-4 h-4 mr-2"}),"Log Out"]})]}),n.jsx("style",{children:`
          /* ==================== PAGE LAYOUT ==================== */
          .settings-page {
            min-height: 100vh;
            background: #000;
            color: #fff;
          }

          .page-header {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
          }

          .page-title {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
          }

          /* ==================== CONTENT ==================== */
          .settings-content {
            padding: 16px;
            max-width: 600px;
            margin: 0 auto;
          }

          @media (min-width: 768px) {
            .settings-content {
              padding: 24px;
            }
          }

          .settings-card {
            background: #0F0F0F;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
          }

          .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
          }

          .section-icon {
            width: 24px;
            height: 24px;
            color: #7C3AED;
          }

          .section-title {
            font-size: 20px;
            font-weight: 700;
            margin: 0;
          }

          /* ==================== FORM ==================== */
          .form-group {
            margin-bottom: 20px;
          }

          .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #A0A0A0;
          }

          .form-group input,
          .form-group select {
            background: #000;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            width: 100%;
          }

          .disabled-input {
            opacity: 0.5;
            cursor: not-allowed;
          }

          .struggle-textarea {
            width: 100%;
            background: #000;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-size: 15px;
            font-family: inherit;
            resize: vertical;
            outline: none;
          }

          .struggle-textarea:focus {
            border-color: #7C3AED;
          }

          .struggle-textarea::placeholder {
            color: #71717A;
          }

          .field-hint {
            font-size: 12px;
            color: #71717A;
            margin-top: 4px;
          }

          .save-button {
            width: 100%;
            background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
            color: #fff;
            font-weight: 600;
            margin-top: 8px;
          }

          .save-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
          }

          /* ==================== SUBSCRIPTION ==================== */
          .subscription-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
          }

          .subscription-type,
          .subscription-status {
            font-size: 15px;
            color: #A0A0A0;
            margin: 0;
          }

          .subscription-type strong,
          .subscription-status strong {
            color: #fff;
          }

          .manage-button {
            margin-top: 8px;
          }

          /* ==================== DATA & PRIVACY ==================== */
          .data-action-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 8px 0;
          }

          .data-action-info {
            flex: 1;
          }

          .data-action-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 4px;
          }

          .data-action-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 12px 0;
          }

          /* ==================== LOGOUT ==================== */
          .logout-button {
            width: 100%;
            margin-top: 8px;
          }
        `})]})})}function g1e(){var o;const{data:e,isLoading:t}=he({queryKey:["/api/auth/me"]});if(t)return n.jsx(Oa,{children:n.jsx("div",{className:"flex items-center justify-center w-full h-full",children:n.jsx("div",{className:"text-2xl",children:"Loading..."})})});if(!e)return n.jsx(Oa,{children:n.jsx("div",{className:"flex items-center justify-center w-full h-full",children:n.jsx("div",{className:"text-xl text-muted-foreground",children:"Please log in to view your progress"})})});const r=e.createdAt?vn(new Date(e.createdAt),"MMMM d, yyyy"):"Unknown",i=e.totalLogins||0,a=e.currentStreak||0,s=e.beltLevel||"blue";return n.jsx(Oa,{children:n.jsx("div",{className:"w-full h-full p-6 overflow-auto",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("h1",{className:"text-4xl font-bold",children:"Your Progress"}),n.jsx("div",{className:"flex justify-center",children:n.jsx(Ed,{rank:s,size:"large"})}),n.jsxs("p",{className:"text-muted-foreground text-lg",children:[s.charAt(0).toUpperCase()+s.slice(1)," Belt"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Member Since"}),n.jsx(Px,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold",children:r}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Your journey began"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Total Logins"}),n.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold",children:i}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Training sessions"})]})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Current Streak"}),n.jsx(_1,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(K,{children:[n.jsx("div",{className:"text-2xl font-bold",children:a}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a===1?"day":"days"," in a row"]})]})]})]}),n.jsxs(W,{children:[n.jsx(X,{children:n.jsx(Z,{children:"Training Profile"})}),n.jsxs(K,{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Training Style:"}),n.jsx("span",{className:"font-medium capitalize",children:e.style||"Not set"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Training Frequency:"}),n.jsxs("span",{className:"font-medium",children:[e.trainingFrequency||0," days/week"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Subscription:"}),n.jsx("span",{className:"font-medium capitalize",children:((o=e.subscriptionType)==null?void 0:o.replace("_"," "))||"Free Trial"})]})]})]})]})})})}function TT(){const[e,t]=g.useState(""),[r,i]=g.useState(""),[a,s]=g.useState("all"),[o,l]=g.useState("all"),[c,d]=g.useState(null);g.useEffect(()=>{const P=setTimeout(()=>i(e),300);return()=>clearTimeout(P)},[e]);const{data:u}=he({queryKey:["/api/auth/me"]}),{data:f,isLoading:h}=he({queryKey:["/api/ai/saved-videos",u==null?void 0:u.id],enabled:!!(u!=null&&u.id)}),p=(f==null?void 0:f.videos)||[],{instructorToTechniques:y,techniqueToInstructors:v,allInstructors:b,allTechniques:x}=g.useMemo(()=>{const P=new Map,_=new Map,R=new Set,O=new Set;for(const $ of p){const M=$.instructor,I=$.category;M&&(R.add(M),P.has(M)||P.set(M,new Set),I&&P.get(M).add(I)),I&&(O.add(I),_.has(I)||_.set(I,new Set),M&&_.get(I).add(M))}return{instructorToTechniques:P,techniqueToInstructors:_,allInstructors:Array.from(R).sort(($,M)=>$.localeCompare(M)),allTechniques:Array.from(O).sort(($,M)=>$.localeCompare(M))}},[p]),m=g.useMemo(()=>{if(o==="all")return b;const P=v.get(o);return P?b.filter(_=>P.has(_)):b},[o,b,v]),j=g.useMemo(()=>{if(a==="all")return x;const P=y.get(a);return P?x.filter(_=>P.has(_)):x},[a,x,y]),N=P=>{if(s(P),P!=="all"&&o!=="all"){const _=y.get(P);(!_||!_.has(o))&&l("all")}},w=P=>{if(l(P),P!=="all"&&a!=="all"){const _=v.get(P);(!_||!_.has(a))&&s("all")}},S=P=>o==="all"?p.filter(_=>_.instructor===P).length:p.filter(_=>_.instructor===P&&_.category===o).length,C=P=>a==="all"?p.filter(_=>_.category===P).length:p.filter(_=>_.category===P&&_.instructor===a).length,k=g.useMemo(()=>p.filter(P=>{var M,I;const _=r.toLowerCase(),R=!r||((M=P.title)==null?void 0:M.toLowerCase().includes(_))||((I=P.instructor)==null?void 0:I.toLowerCase().includes(_)),O=a==="all"||P.instructor===a,$=o==="all"||P.category===o;return R&&O&&$}),[p,r,a,o]),A=P=>{var _;return P.videoUrl?P.videoUrl.includes("v=")?((_=P.videoUrl.split("v=")[1])==null?void 0:_.split("&")[0])||"":P.videoUrl.split("/").pop()||"":""},E=P=>{if(P.thumbnailUrl)return P.thumbnailUrl;const _=A(P);return _?`https://img.youtube.com/vi/${_}/mqdefault.jpg`:""},T=g.useMemo(()=>({total_videos:p.length,unique_instructors:b.length,unique_techniques:x.length}),[p,b,x]);return h?n.jsx(Oa,{children:n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[n.jsx(IS,{size:"lg",className:"text-purple-400 mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading saved videos..."})]})}):n.jsxs(Oa,{children:[n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[n.jsx(_i,{className:"h-8 w-8 text-primary"}),n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Saved Videos"})]}),n.jsx("p",{className:"text-muted-foreground",children:"Your personal collection of BJJ technique videos"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Saved Videos"}),n.jsx(cf,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-videos",children:T.total_videos})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Instructors"}),n.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-instructors",children:T.unique_instructors})})]}),n.jsxs(W,{children:[n.jsxs(X,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Techniques"}),n.jsx(Tx,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(K,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-techniques",children:T.unique_techniques})})]})]}),n.jsx(W,{children:n.jsx(K,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(je,{placeholder:"Search by title or instructor...",value:e,onChange:P=>t(P.target.value),className:"pl-10","data-testid":"input-search"})]}),n.jsxs(Je,{value:a,onValueChange:N,children:[n.jsx(Ye,{className:"w-full md:w-[250px]","data-testid":"select-instructor",children:n.jsx(Xe,{placeholder:"All Instructors"})}),n.jsxs(Qe,{children:[n.jsxs(G,{value:"all",children:["All Instructors (",m.length,")"]}),m.map(P=>n.jsxs(G,{value:P,children:[P," (",S(P),")"]},P))]})]}),n.jsxs(Je,{value:o,onValueChange:w,children:[n.jsx(Ye,{className:"w-full md:w-[250px]","data-testid":"select-technique",children:n.jsx(Xe,{placeholder:"All Techniques"})}),n.jsxs(Qe,{children:[n.jsxs(G,{value:"all",children:["All Techniques (",j.length,")"]}),j.map(P=>n.jsxs(G,{value:P,children:[P," (",C(P),")"]},P))]})]})]})})}),n.jsx("div",{children:k.length===0?n.jsx(W,{children:n.jsxs(K,{className:"py-12 text-center",children:[n.jsx(_i,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-xl text-muted-foreground",children:p.length===0?"No saved videos yet. Start saving videos from chat!":"No videos match your filters"})]})}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:k.map((P,_)=>{const R=A(P);return n.jsxs(W,{className:"overflow-hidden cursor-pointer hover-elevate transition-all","data-testid":`card-video-${P.id||_}`,onClick:()=>d(P),children:[n.jsxs("div",{className:"relative aspect-video bg-muted",children:[n.jsx("img",{src:E(P),alt:P.title,className:"w-full h-full object-cover",onError:O=>{O.target.src=`https://img.youtube.com/vi/${R}/mqdefault.jpg`}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 hover:bg-black/30 transition-colors",children:n.jsx(cf,{className:"h-12 w-12 text-white opacity-0 hover:opacity-100 transition-opacity"})}),P.duration&&n.jsx("span",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded",children:P.duration})]}),n.jsxs(K,{className:"p-3 space-y-2",children:[n.jsx("h3",{className:"font-medium text-sm line-clamp-2",title:P.title,children:P.title}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsx("span",{className:"truncate max-w-[120px]",title:P.instructor,children:P.instructor||"Unknown"}),P.qualityScore&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kr,{className:"h-3 w-3 text-yellow-500"}),n.jsx("span",{children:Number(P.qualityScore).toFixed(1)})]})]}),P.category&&n.jsx(ae,{variant:"secondary",className:"text-xs truncate max-w-full",children:P.category})]})]},P.id||_)})})})]}),n.jsx(Ar,{open:!!c,onOpenChange:P=>!P&&d(null),children:n.jsxs(yr,{className:"max-w-4xl p-0 overflow-hidden",children:[n.jsxs(br,{className:"p-4 pb-2",children:[n.jsx(jr,{className:"pr-8 line-clamp-2",children:c==null?void 0:c.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx("span",{children:c==null?void 0:c.instructor}),(c==null?void 0:c.category)&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"-"}),n.jsx(ae,{variant:"secondary",className:"text-xs",children:c==null?void 0:c.category})]}),(c==null?void 0:c.qualityScore)&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"-"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kr,{className:"h-3 w-3 text-yellow-500"}),n.jsx("span",{children:Number(c.qualityScore).toFixed(1)})]})]})]})]}),n.jsx("div",{className:"aspect-video w-full",children:c&&n.jsx("iframe",{src:`https://www.youtube.com/embed/${A(c)}?autoplay=1&rel=0`,title:c.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})})]})}function x1e(){const[,e]=Ze(),{toast:t}=rt(),[r,i]=g.useState(!1),[a,s]=g.useState("monthly"),[o,l]=g.useState(""),[c,d]=g.useState(!1),[u,f]=g.useState(null),[h,p]=g.useState(""),{data:y,isLoading:v}=he({queryKey:["/api/auth/me"]});g.useEffect(()=>{window.scrollTo(0,0)},[]),g.useEffect(()=>{y&&((y.subscriptionType==="lifetime"||y.subscriptionType==="free_admin_grant")&&(console.log("[PAYMENT] User has lifetime/admin access, redirecting to /chat"),e("/chat")),(y.subscriptionStatus==="trialing"||y.subscriptionStatus==="active")&&(console.log("[PAYMENT] User already has active subscription, redirecting to /chat"),e("/chat")))},[y,e]);const b=async()=>{if(o.trim()){d(!0),p("");try{const k=await(await ct("POST","/api/validate-referral",{code:o.trim()})).json();k.valid?(f({code:k.code,discountDescription:k.discountDescription||"Valid referral code"}),t({title:"Referral code applied!",description:k.discountDescription||"Your discount will be applied at checkout."})):p(k.error||"Invalid referral code")}catch{p("Failed to validate referral code")}finally{d(!1)}}},x=()=>{f(null),l(""),p("")},m=async()=>{i(!0);try{console.log(`[PAYMENT] Creating checkout session for ${a} plan`);const C=await ct("POST","/api/create-checkout-session",{priceId:a,referralCode:(u==null?void 0:u.code)||null}),k=await C.json();if(!C.ok)throw new Error(k.error||"Failed to create checkout session");console.log("[PAYMENT] Checkout session created:",k),k.devBypass?(t({title:"Trial Started!",description:"Your 7-day trial is now active (dev mode)"}),e(k.url)):window.location.href=k.url}catch(C){t({title:"Error",description:C.message||"Failed to start trial",variant:"destructive"}),i(!1)}};if(v)return n.jsx("div",{className:"payment-page page-container",children:n.jsxs("div",{className:"payment-loading",children:[n.jsx(qe,{className:"w-8 h-8 animate-spin text-white/60"}),n.jsx("p",{className:"text-white/60 mt-4",children:"Loading..."})]})});const j="$14.99",N="$179.88",S=new Date(Date.now()+7*24*60*60*1e3).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return n.jsxs("div",{className:"payment-page page-container",children:[n.jsxs("div",{className:"payment-container",children:[n.jsxs("div",{className:"payment-header",children:[n.jsx("h1",{className:"payment-headline",children:"Complete Your Setup"}),n.jsx("p",{className:"payment-subheadline",children:"Choose your plan and start your 7-day free trial"})]}),n.jsxs("div",{className:"plan-selector",children:[n.jsxs("button",{onClick:()=>s("monthly"),className:`plan-card ${a==="monthly"?"plan-card-selected":""}`,"data-testid":"button-plan-monthly",children:[n.jsxs("div",{className:"plan-card-header",children:[n.jsx("div",{className:"plan-card-title",children:"Monthly"}),a==="monthly"&&n.jsx("div",{className:"plan-card-badge",children:n.jsx(_r,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"plan-card-price",children:[j,n.jsx("span",{className:"plan-card-period",children:"/month"})]}),n.jsx("div",{className:"plan-card-description",children:"Billed monthly, cancel anytime"})]}),n.jsxs("button",{onClick:()=>s("annual"),className:`plan-card ${a==="annual"?"plan-card-selected":""}`,"data-testid":"button-plan-annual",children:[n.jsxs("div",{className:"plan-card-header",children:[n.jsx("div",{className:"plan-card-title",children:"Annual"}),a==="annual"&&n.jsx("div",{className:"plan-card-badge",children:n.jsx(_r,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"plan-card-price",children:[N,n.jsx("span",{className:"plan-card-period",children:"/year"})]}),n.jsx("div",{className:"plan-card-description",children:"Save 17% with annual billing"})]})]}),n.jsxs("div",{className:"trial-info",children:[n.jsx("div",{className:"trial-info-badge",children:"7-Day Free Trial"}),n.jsxs("p",{className:"trial-info-text",children:["You won't be charged until ",n.jsx("strong",{children:S})]}),n.jsxs("p",{className:"trial-info-subtext",children:["Cancel anytime before ",S," - no charge"]})]}),n.jsxs("div",{className:"referral-section",children:[n.jsxs("div",{className:"referral-header",children:[n.jsx(T7,{className:"w-4 h-4"}),n.jsx("span",{children:"Have a referral code?"})]}),u?n.jsxs("div",{className:"referral-applied","data-testid":"referral-applied",children:[n.jsxs("div",{className:"referral-applied-content",children:[n.jsx($n,{className:"w-5 h-5 text-green-500"}),n.jsxs("div",{className:"referral-applied-text",children:[n.jsx("span",{className:"referral-code-display",children:u.code}),n.jsx("span",{className:"referral-discount",children:u.discountDescription})]})]}),n.jsx("button",{onClick:x,className:"referral-remove","data-testid":"button-remove-referral",children:n.jsx(Fi,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"referral-input-container",children:[n.jsx(je,{type:"text",placeholder:"Enter referral code",value:o,onChange:C=>{l(C.target.value.toUpperCase()),p("")},onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),b())},className:"referral-input","data-testid":"input-referral-code"}),n.jsx(Q,{onClick:b,disabled:!o.trim()||c,variant:"outline",className:"referral-apply-btn","data-testid":"button-apply-referral",children:c?n.jsx(qe,{className:"w-4 h-4 animate-spin"}):"Apply"})]}),h&&n.jsx("p",{className:"referral-error","data-testid":"referral-error",children:h})]}),n.jsxs("div",{className:"features-list",children:[n.jsx("h3",{className:"features-title",children:"What's Included"}),n.jsxs("div",{className:"features-grid",children:[n.jsxs("div",{className:"feature-item",children:[n.jsx(_r,{className:"feature-icon"}),n.jsx("span",{children:"AI-powered BJJ coaching with Professor OS"})]}),n.jsxs("div",{className:"feature-item",children:[n.jsx(_r,{className:"feature-icon"}),n.jsx("span",{children:"Personalized video recommendations"})]}),n.jsxs("div",{className:"feature-item",children:[n.jsx(_r,{className:"feature-icon"}),n.jsx("span",{children:"3-brain memory system that remembers you"})]}),n.jsxs("div",{className:"feature-item",children:[n.jsx(_r,{className:"feature-icon"}),n.jsx("span",{children:"Daily technique drills tailored to your level"})]}),n.jsxs("div",{className:"feature-item",children:[n.jsx(_r,{className:"feature-icon"}),n.jsx("span",{children:"Progress tracking and performance analytics"})]}),n.jsxs("div",{className:"feature-item",children:[n.jsx(_r,{className:"feature-icon"}),n.jsx("span",{children:"Access to 300+ curated BJJ technique videos"})]})]})]}),n.jsx(Q,{onClick:m,disabled:r,className:"payment-cta","data-testid":"button-start-trial",children:r?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-5 h-5 mr-2 animate-spin"}),"Starting Trial..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rc,{className:"w-5 h-5 mr-2"}),"Start 7-Day Free Trial"]})}),n.jsxs("div",{className:"trust-signals",children:[n.jsx("p",{className:"trust-text",children:" Secure payment powered by Stripe"}),n.jsx("p",{className:"trust-text",children:" Cancel anytime, no questions asked"})]})]}),n.jsx("style",{children:`
        /* ==================== VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0F0F0F;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
        }

        /* ==================== BASE STYLES ==================== */
        .payment-page {
          background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
          color: var(--white);
          min-height: 100vh;
          padding: 80px 20px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .payment-container {
          width: 100%;
          max-width: 700px;
        }

        .payment-loading {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 400px;
        }

        /* ==================== HEADER ==================== */
        .payment-header {
          text-align: center;
          margin-bottom: 48px;
        }

        .payment-headline {
          font-size: 48px;
          font-weight: 700;
          color: var(--white);
          line-height: 1.1;
          letter-spacing: -0.01em;
          margin-bottom: 16px;
        }

        .payment-subheadline {
          font-size: 18px;
          font-weight: 400;
          color: var(--gray-light);
          line-height: 1.6;
        }

        /* ==================== PLAN SELECTOR ==================== */
        .plan-selector {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 16px;
          margin-bottom: 32px;
        }

        .plan-card {
          background: var(--black-elevated);
          border: 2px solid rgba(255, 255, 255, 0.1);
          padding: 24px;
          cursor: pointer;
          transition: all 150ms ease;
          text-align: left;
        }

        .plan-card:hover {
          border-color: rgba(255, 255, 255, 0.2);
        }

        .plan-card-selected {
          border-color: var(--purple);
          background: rgba(124, 58, 237, 0.1);
        }

        .plan-card-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 12px;
        }

        .plan-card-title {
          font-size: 20px;
          font-weight: 700;
          color: var(--white);
        }

        .plan-card-badge {
          width: 24px;
          height: 24px;
          border-radius: 50%;
          background: var(--purple);
          color: var(--white);
          display: flex;
          align-items: center;
          justify-center;
        }

        .plan-card-price {
          font-size: 32px;
          font-weight: 700;
          color: var(--white);
          margin-bottom: 8px;
        }

        .plan-card-period {
          font-size: 16px;
          font-weight: 400;
          color: var(--gray-light);
        }

        .plan-card-description {
          font-size: 14px;
          color: var(--gray-light);
        }

        /* ==================== TRIAL INFO ==================== */
        .trial-info {
          background: rgba(124, 58, 237, 0.1);
          border: 1px solid rgba(124, 58, 237, 0.3);
          padding: 24px;
          text-align: center;
          margin-bottom: 32px;
        }

        .trial-info-badge {
          font-size: 18px;
          font-weight: 700;
          color: var(--white);
          margin-bottom: 12px;
        }

        .trial-info-text {
          font-size: 16px;
          color: var(--white);
          margin-bottom: 8px;
        }

        .trial-info-subtext {
          font-size: 14px;
          color: var(--gray-light);
        }

        /* ==================== REFERRAL CODE ==================== */
        .referral-section {
          background: var(--black-elevated);
          border: 1px solid rgba(255, 255, 255, 0.1);
          padding: 20px;
          margin-bottom: 32px;
        }

        .referral-header {
          display: flex;
          align-items: center;
          gap: 8px;
          color: var(--gray-light);
          font-size: 14px;
          margin-bottom: 12px;
        }

        .referral-input-container {
          display: flex;
          gap: 8px;
        }

        .referral-input {
          flex: 1;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.15);
          color: var(--white);
          text-transform: uppercase;
        }

        .referral-input::placeholder {
          color: var(--gray-medium);
          text-transform: none;
        }

        .referral-apply-btn {
          min-width: 80px;
          border-color: rgba(255, 255, 255, 0.2);
          color: var(--white);
        }

        .referral-applied {
          display: flex;
          align-items: center;
          justify-content: space-between;
          background: rgba(34, 197, 94, 0.1);
          border: 1px solid rgba(34, 197, 94, 0.3);
          padding: 12px 16px;
        }

        .referral-applied-content {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .referral-applied-text {
          display: flex;
          flex-direction: column;
          gap: 2px;
        }

        .referral-code-display {
          font-weight: 700;
          color: var(--white);
          font-size: 14px;
        }

        .referral-discount {
          font-size: 13px;
          color: rgb(34, 197, 94);
        }

        .referral-remove {
          background: transparent;
          border: none;
          color: var(--gray-light);
          cursor: pointer;
          padding: 4px;
          transition: color 150ms ease;
        }

        .referral-remove:hover {
          color: var(--white);
        }

        .referral-error {
          color: rgb(239, 68, 68);
          font-size: 13px;
          margin-top: 8px;
        }

        /* ==================== FEATURES ==================== */
        .features-list {
          margin-bottom: 32px;
        }

        .features-title {
          font-size: 20px;
          font-weight: 700;
          color: var(--white);
          margin-bottom: 16px;
        }

        .features-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 12px;
        }

        .feature-item {
          display: flex;
          align-items: center;
          gap: 12px;
          font-size: 16px;
          color: var(--white);
        }

        .feature-icon {
          width: 20px;
          height: 20px;
          color: var(--purple);
          flex-shrink: 0;
        }

        /* ==================== CTA BUTTON ==================== */
        .payment-cta {
          width: 100%;
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          font-weight: 700;
          font-size: 18px;
          color: var(--white);
          padding: 20px 48px;
          cursor: pointer;
          transition: all 150ms ease;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 24px;
          min-height: 60px;
        }

        .payment-cta:hover:not(:disabled) {
          background: linear-gradient(135deg, #1D4ED8 0%, #6D28D9 100%);
        }

        .payment-cta:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        /* ==================== TRUST SIGNALS ==================== */
        .trust-signals {
          text-align: center;
        }

        .trust-text {
          font-size: 14px;
          color: var(--gray-light);
          margin-bottom: 8px;
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .payment-page {
            padding: 60px 20px;
          }

          .payment-headline {
            font-size: 36px;
          }

          .plan-selector {
            grid-template-columns: 1fr;
          }
        }
      `})]})}function v1e(){const[e,t]=g.useState(""),[r,i]=g.useState("all"),[a,s]=g.useState("newest"),[o,l]=g.useState("all"),[c,d]=g.useState("all"),[u,f]=g.useState(null),[h,p]=g.useState(new Set),{toast:y}=rt(),[,v]=Ze(),{data:b,isLoading:x,error:m}=he({queryKey:["/api/auth/me"]});g.useEffect(()=>{m&&!x&&(y({title:"Authentication Required",description:"Please log in to continue",variant:"destructive"}),v("/login"))},[m,x,v,y]);const{data:j}=he({queryKey:["/api/ai/saved-videos",b==null?void 0:b.id],enabled:!!(b!=null&&b.id)});g.useEffect(()=>{j!=null&&j.videos&&p(new Set(j.videos.map(I=>parseInt(I.id))))},[j]);const N=Ve({mutationFn:async I=>(Ce("light"),await ct("POST","/api/ai/saved-videos",{userId:b==null?void 0:b.id,videoId:I})),onSuccess:(I,L)=>{Ce("success"),p(z=>new Set([...Array.from(z),L])),y({title:"Saved",description:"Video saved to your library"}),Te.invalidateQueries({queryKey:["/api/ai/saved-videos",b==null?void 0:b.id]})}}),w=Ve({mutationFn:async I=>await ct("DELETE",`/api/ai/saved-videos/${I}`,{userId:b==null?void 0:b.id}),onSuccess:(I,L)=>{p(z=>{const ie=new Set(Array.from(z));return ie.delete(L),ie}),y({title:"Removed",description:"Video removed from your library"}),Te.invalidateQueries({queryKey:["/api/ai/saved-videos",b==null?void 0:b.id]})}}),S=(I,L)=>{L.stopPropagation(),h.has(I)?w.mutate(I):N.mutate(I)},C=(I,L,z)=>{f({videoId:I,title:L,instructor:z})},{data:k,isLoading:A,error:E,isFetching:T}=he({queryKey:["/api/ai/videos"]});g.useEffect(()=>{var I;console.log("[LIBRARY DEBUG] Query state:",{isLoading:A,isFetching:T,hasData:!!k,videosCount:((I=k==null?void 0:k.videos)==null?void 0:I.length)||0,error:(E==null?void 0:E.message)||null})},[A,T,k,E]);const P=(k==null?void 0:k.videos)||[],{data:_}=he({queryKey:["/api/ai/techniques"]}),R=(_==null?void 0:_.techniques)||[],{data:O}=he({queryKey:["/api/ai/instructors"]}),$=(O==null?void 0:O.instructors)||[],M=g.useMemo(()=>{console.log("[LIBRARY FILTER] Running filter with:",{searchQuery:e,giFilter:r,sortBy:a,instructorFilter:o,techniqueFilter:c,totalVideos:P.length});let I=P.filter(L=>{var de,oe,Pe,ve,ye,ne;const z=!e||((de=L.title)==null?void 0:de.toLowerCase().includes(e.toLowerCase()))||((oe=L.techniqueName)==null?void 0:oe.toLowerCase().includes(e.toLowerCase()))||((Pe=L.instructorName)==null?void 0:Pe.toLowerCase().includes(e.toLowerCase())),ie=r==="all"||((ve=L.giOrNogi)==null?void 0:ve.toLowerCase())===r.toLowerCase(),U=o==="all"||((ye=L.instructorName)==null?void 0:ye.toLowerCase())===o.toLowerCase(),ee=c==="all"||((ne=L.techniqueName)==null?void 0:ne.toLowerCase())===c.toLowerCase();return z&&ie&&U&&ee});return console.log("[LIBRARY FILTER] Filtered to",I.length,"videos"),a==="newest"?I.sort((L,z)=>{const ie=new Date(L.createdAt??0).getTime();return new Date(z.createdAt??0).getTime()-ie}):a==="popular"?I.sort((L,z)=>{const ie=L.viewCount??0;return(z.viewCount??0)-ie}):a==="instructor"?I.sort((L,z)=>{const ie=(L.instructorName||"").localeCompare(z.instructorName||"");if(ie!==0)return ie;const U=new Date(L.createdAt??0).getTime();return new Date(z.createdAt??0).getTime()-U}):I.sort((L,z)=>{const ie=new Date(L.createdAt??0).getTime();return new Date(z.createdAt??0).getTime()-ie})},[P,e,r,a,o,c]);return x?n.jsx(Oa,{children:n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx(IS,{size:"lg",className:"text-purple-400"})})}):m||!b?n.jsx(Oa,{children:n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"text-muted-foreground",children:"Redirecting to login..."})})}):n.jsxs(Oa,{children:[n.jsxs("div",{className:"library-page w-full h-full overflow-auto",children:[n.jsx("header",{className:"page-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("h1",{className:"page-title",children:"Video Library"}),n.jsx(bn,{className:"search-icon-header"})]})}),n.jsxs("div",{className:"filters-section",children:[n.jsxs("div",{className:"search-bar",children:[n.jsx(bn,{className:"search-icon"}),n.jsx(je,{type:"text",placeholder:"Search techniques...",value:e,onChange:I=>t(I.target.value),className:"search-input","data-testid":"input-search"})]}),n.jsxs("div",{className:"filter-row",children:[n.jsxs(Je,{value:a,onValueChange:I=>s(I),children:[n.jsx(Ye,{className:"filter-select","data-testid":"select-sort",children:n.jsx(Xe,{placeholder:"Sort"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"newest",children:"Newest First"}),n.jsx(G,{value:"popular",children:"Most Watched"}),n.jsx(G,{value:"instructor",children:"By Instructor"})]})]}),n.jsxs(Je,{value:r,onValueChange:i,children:[n.jsx(Ye,{className:"filter-select","data-testid":"select-gi",children:n.jsx(Xe,{placeholder:"Gi/No-Gi"})}),n.jsxs(Qe,{children:[n.jsx(G,{value:"all",children:"All"}),n.jsx(G,{value:"gi",children:"Gi"}),n.jsx(G,{value:"nogi",children:"No-Gi"}),n.jsx(G,{value:"both",children:"Both"})]})]}),n.jsxs(Je,{value:c,onValueChange:d,children:[n.jsx(Ye,{className:"filter-select","data-testid":"select-technique",children:n.jsx(Xe,{placeholder:"All Techniques"})}),n.jsxs(Qe,{children:[n.jsxs(G,{value:"all",children:["All Techniques (",(_==null?void 0:_.totalCount)||0,")"]}),R.map(I=>n.jsxs(G,{value:I.name.toLowerCase(),children:[I.name," (",I.count,")"]},I.name))]})]}),n.jsxs(Je,{value:o,onValueChange:l,children:[n.jsx(Ye,{className:"filter-select","data-testid":"select-instructor",children:n.jsx(Xe,{placeholder:"All Instructors"})}),n.jsxs(Qe,{children:[n.jsxs(G,{value:"all",children:["All Instructors (",(O==null?void 0:O.totalCount)||0,")"]}),$.map(I=>n.jsxs(G,{value:I.name.toLowerCase(),children:[I.name," (",I.count,")"]},I.name))]})]})]}),n.jsx("div",{className:"result-count","data-testid":"video-count",children:A?"Loading...":`${M.length} videos`})]}),n.jsx("div",{className:"video-grid",children:A?n.jsx("div",{className:"loading-state",children:"Loading videos..."}):M.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("p",{children:"No videos found"}),n.jsx("p",{className:"empty-hint",children:a==="instructor"&&o?`No videos found for instructor "${o}"`:"Try adjusting your filters"})]}):M.map(I=>n.jsxs("div",{className:"video-card","data-testid":`video-card-${I.id}`,onClick:()=>I.videoId&&C(I.videoId,I.techniqueName||I.title,I.instructorName),children:[n.jsxs("div",{className:"video-thumbnail",children:[n.jsx(_S,{thumbnailUrl:I.thumbnailUrl,videoId:I.videoId,title:I.techniqueName||I.title}),n.jsx("div",{className:"play-overlay",children:n.jsx("div",{className:"play-button-circle",children:""})}),n.jsx("button",{className:"save-button","data-testid":`button-save-${I.id}`,onClick:L=>S(I.id,L),children:n.jsx(fI,{className:"heart-icon",fill:h.has(I.id)?"#ff4444":"none",stroke:h.has(I.id)?"#ff4444":"#fff"})}),I.qualityScore&&n.jsxs("div",{className:"quality-badge",children:[" ",I.qualityScore.toFixed(1)]})]}),n.jsxs("div",{className:"video-info",children:[n.jsx("h3",{className:"video-title",children:I.techniqueName||I.title}),n.jsx("p",{className:"video-instructor",children:I.instructorName}),n.jsx("div",{className:"video-metadata",children:I.giOrNogi&&n.jsx("span",{className:"metadata-badge gi-badge","data-testid":`badge-gi-${I.id}`,children:I.giOrNogi==="gi"?"Gi":I.giOrNogi==="nogi"?"No-Gi":"Both"})})]})]},I.id))}),n.jsx("style",{children:`
          /* ==================== PAGE LAYOUT ==================== */
          .library-page {
            min-height: 100vh;
            background: #000;
            color: #fff;
          }

          .page-header {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
          }

          .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
          }

          .page-title {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
          }

          .search-icon-header {
            width: 24px;
            height: 24px;
            color: #71717A;
          }

          /* ==================== FILTERS ==================== */
          .filters-section {
            padding: 16px;
            background: #000;
          }

          .search-bar {
            position: relative;
            margin-bottom: 12px;
          }

          .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: #71717A;
            pointer-events: none;
          }

          .search-input {
            padding-left: 40px;
            background: #0F0F0F;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            width: 100%;
          }

          .search-input::placeholder {
            color: #71717A;
          }

          .filter-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 12px;
          }
          
          .instructor-search-bar {
            margin-bottom: 12px;
          }
          
          .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
          }

          .filter-select {
            background: #0F0F0F;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
          }

          .result-count {
            font-size: 14px;
            color: #71717A;
            text-align: center;
          }

          /* ==================== VIDEO GRID ==================== */
          .video-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 16px;
          }

          @media (min-width: 768px) {
            .video-grid {
              grid-template-columns: repeat(4, 1fr);
              gap: 16px;
            }
          }

          .video-card {
            background: #0F0F0F;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 150ms ease;
          }

          .video-card:hover {
            transform: scale(1.02);
          }

          .video-thumbnail {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            background: #1A1A1A;
          }

          .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
          }

          .save-button {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 150ms ease;
          }

          .save-button:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.1);
          }

          .heart-icon {
            width: 18px;
            height: 18px;
            color: #fff;
          }

          .quality-badge {
            position: absolute;
            bottom: 8px;
            right: 8px;
            padding: 4px 8px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            color: #FFD700;
          }

          .video-info {
            padding: 12px;
          }

          .video-title {
            font-size: 14px;
            font-weight: 600;
            color: #fff;
            margin: 0 0 4px 0;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
          }

          .video-instructor {
            font-size: 12px;
            color: #71717A;
            margin: 0 0 8px 0;
          }

          /* ==================== VIDEO METADATA BADGES ==================== */
          .video-metadata {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 8px;
          }

          .metadata-badge {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: capitalize;
            white-space: nowrap;
          }

          /* Belt level badges with authentic BJJ colors */
          .belt-white {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.3);
          }

          .belt-blue {
            background: rgba(59, 130, 246, 0.2);
            color: #60A5FA;
            border: 1px solid rgba(59, 130, 246, 0.4);
          }

          .belt-purple {
            background: rgba(168, 85, 247, 0.2);
            color: #C084FC;
            border: 1px solid rgba(168, 85, 247, 0.4);
          }

          .belt-brown {
            background: rgba(180, 83, 9, 0.2);
            color: #FDBA74;
            border: 1px solid rgba(180, 83, 9, 0.4);
          }

          .belt-black {
            background: rgba(255, 255, 255, 0.1);
            color: #FFD700;
            border: 1px solid rgba(255, 215, 0, 0.4);
          }

          /* Gi/No-Gi badge */
          .gi-badge {
            background: rgba(139, 92, 246, 0.15);
            color: #A78BFA;
            border: 1px solid rgba(139, 92, 246, 0.3);
          }

          /* Technique type badge */
          .type-badge {
            background: rgba(34, 197, 94, 0.15);
            color: #4ADE80;
            border: 1px solid rgba(34, 197, 94, 0.3);
          }

          /* Duration badge */
          .duration-badge {
            background: rgba(251, 146, 60, 0.15);
            color: #FB923C;
            border: 1px solid rgba(251, 146, 60, 0.3);
          }

          /* ==================== STATES ==================== */
          .loading-state,
          .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 48px 16px;
            color: #71717A;
          }

          .empty-hint {
            margin-top: 8px;
            font-size: 14px;
          }

          /* ==================== PLAY OVERLAY ==================== */
          .play-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 150ms ease;
          }

          .video-card:hover .play-overlay {
            opacity: 1;
          }

          .play-button-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #fff;
            padding-left: 4px;
          }
        `})]}),u&&n.jsx(pl,{videoId:u.videoId,title:u.title,instructor:u.instructor,onClose:()=>f(null)})]})}function ax(e){if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())&&T3(t)}function y1e(e){if(!ax(e))return"Just now";const t=new Date(e),i=SS(new Date,t);return i===0?vn(t,"h:mm a"):i<7?vn(t,"EEE, h:mm a"):vn(t,"MMM d, h:mm a")}function b1e(e){if(!ax(e))return"Recent";const t=new Date(e);return _je(t)?"Today":Rje(t)?"Yesterday":vn(t,"MMMM d, yyyy")}function j1e(e,t){if(!t)return!0;if(!ax(e)||!ax(t))return!1;const r=new Date(e),i=new Date(t);return SS(r,i)!==0}async function OT(e){Us.isNativePlatform()?await qh.open({url:e,presentationStyle:"popover"}):window.open(e,"_blank")}function w1e(e){try{const t=[],r=/\[VIDEO:\s*([^\]]+)\]/g;let i=0,a;for(;(a=r.exec(e))!==null;)try{a.index>i&&t.push({text:e.slice(i,a.index)});const s=a[1],o=s.split("|").map(p=>p.trim());if(o.length>=5){const p={title:o[0],instructor:o[1],duration:o[2],videoId:o[3],id:parseInt(o[4],10),startTime:o[5]||void 0};if(p.title&&p.instructor&&p.videoId&&!isNaN(p.id)){t.push({text:"",video:p}),i=a.index+a[0].length;continue}}let l="",c="",d;const u=s.match(/\|\s*START:\s*(\d{1,2}:\d{2})/i);u&&(d=u[1]);const f=s.replace(/\|\s*START:\s*\d{1,2}:\d{2}/i,"").trim(),h=f.match(/^(.+?)\s+by\s+(.+)$/i);if(h)l=h[1].trim(),c=h[2].trim();else{const p=f.match(/^(.+?)\s*\(([^)]+)\)$/);p?(l=p[1].trim(),c=p[2].trim()):(l=f,c="BJJ Instructor")}if(l){const p=Math.abs((l+c).split("").reduce((y,v)=>(y=(y<<5)-y+v.charCodeAt(0),y&y),0));t.push({text:"",video:{id:p,title:l,instructor:c,duration:d||"Watch",videoId:"",startTime:d}})}else t.push({text:a[0]});i=a.index+a[0].length}catch(s){console.error(" Error parsing individual video token:",s),t.push({text:a[0]}),i=a.index+a[0].length}return i<e.length&&t.push({text:e.slice(i)}),t.length>0?t:[{text:e}]}catch(t){return console.error(" CRITICAL: Video parsing failed completely, returning plain text:",t),[{text:e}]}}function N1e({message:e,sender:t,timestamp:r}){const[i,a]=g.useState(new Set),[s,o]=g.useState(null),[l,c]=g.useState(new Set),{toast:d}=rt(),u=localStorage.getItem("mobileUserId")||"1",f=async y=>{c(v=>new Set(v).add(y.id));try{const v=new URLSearchParams;v.append("title",y.title),v.append("instructor",y.instructor),v.append("limit","1");const x=await(await fetch(`/api/ai/videos/search?${v.toString()}`)).json();if(x.videos&&x.videos.length>0&&x.videos[0].videoId){const j=x.videos[0];o({videoId:j.videoId,title:j.title,instructor:j.instructorName,startTime:y.startTime});return}const m=encodeURIComponent(`${y.title} ${y.instructor} BJJ`);OT(`https://www.youtube.com/results?search_query=${m}`)}catch(v){console.error("Video search failed:",v);const b=encodeURIComponent(`${y.title} ${y.instructor} BJJ`);OT(`https://www.youtube.com/results?search_query=${b}`)}finally{c(v=>{const b=new Set(v);return b.delete(y.id),b})}},h=async y=>{const v=i.has(y);try{v?(await ct("DELETE",`/api/ai/saved-videos/${y}`,{userId:parseInt(u)}),a(b=>{const x=new Set(b);return x.delete(y),x}),d({title:"Video removed",description:"Video removed from saved videos"})):(await ct("POST","/api/ai/saved-videos",{userId:parseInt(u),videoId:String(y)}),a(b=>new Set(b).add(y)),d({title:"Video saved",description:"Video added to your saved videos"}))}catch(b){console.error("Save video error:",b),d({variant:"destructive",title:"Error",description:"Failed to save video. Please try again."})}},p=w1e(e||"");return n.jsxs("div",{className:`mobile-message-bubble ${t}`,"data-testid":`message-${t}`,children:[p.map((y,v)=>n.jsxs("div",{children:[y.text&&n.jsx("p",{style:{marginBottom:"0.5rem",whiteSpace:"pre-line"},children:y.text}),y.video&&n.jsx("div",{style:{marginTop:"0.75rem",marginBottom:"0.75rem"},children:n.jsxs("div",{style:{backgroundColor:"var(--mobile-surface)",borderRadius:"0.75rem",overflow:"hidden",border:"1px solid var(--mobile-border)"},children:[y.video.videoId?n.jsx("div",{style:{position:"relative"},children:n.jsxs("button",{onClick:()=>o({videoId:y.video.videoId,title:y.video.title,instructor:y.video.instructor,startTime:y.video.startTime}),style:{width:"100%",border:"none",cursor:"pointer",padding:0,background:"#000",overflow:"hidden",position:"relative"},"data-testid":`button-play-video-${y.video.id}`,title:"Play video",children:[n.jsx(_S,{videoId:y.video.videoId,title:y.video.title}),n.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"3.5rem",height:"3.5rem",background:"rgba(102, 126, 234, 0.95)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",zIndex:10},children:n.jsx("svg",{width:"24",height:"24",viewBox:"0 0 16 16",fill:"white",children:n.jsx("path",{d:"M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"})})})]})}):n.jsx("button",{onClick:()=>f(y.video),disabled:l.has(y.video.id),style:{width:"100%",border:"none",cursor:l.has(y.video.id)?"wait":"pointer",padding:"1.5rem 1rem",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:l.has(y.video.id)?.7:1},"data-testid":`button-search-video-${y.video.id}`,title:"Find and play video",children:l.has(y.video.id)?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid rgba(167, 139, 250, 0.3)",borderTopColor:"#A78BFA",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("span",{style:{fontSize:"0.75rem",color:"#A78BFA"},children:"Finding video..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{width:"3rem",height:"3rem",background:"rgba(102, 126, 234, 0.8)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"white",children:n.jsx("path",{d:"M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"})})}),n.jsx("span",{style:{fontSize:"0.75rem",color:"#A78BFA"},children:"Tap to play"})]})}),n.jsxs("div",{style:{padding:"0.75rem",display:"flex",gap:"0.75rem",alignItems:"center"},children:[n.jsxs("div",{onClick:()=>{y.video.videoId?o({videoId:y.video.videoId,title:y.video.title,instructor:y.video.instructor,startTime:y.video.startTime}):f(y.video)},style:{flex:1,minWidth:0,cursor:"pointer"},children:[n.jsx("p",{style:{fontWeight:"600",fontSize:"0.875rem",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:y.video.title}),n.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--mobile-text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[y.video.instructor,y.video.videoId&&`  ${y.video.duration}`,y.video.startTime&&n.jsxs("span",{style:{marginLeft:"0.5rem",color:"#667eea",fontWeight:"600"},children:["@ ",y.video.startTime]})]})]}),y.video.videoId&&n.jsx("button",{onClick:()=>h(y.video.id),style:{background:"transparent",border:"none",padding:"0.5rem",cursor:"pointer",color:i.has(y.video.id)?"#667eea":"var(--mobile-text-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},"data-testid":`button-save-video-${y.video.id}`,title:i.has(y.video.id)?"Remove from saved":"Save video",children:i.has(y.video.id)?n.jsx(T1,{size:20}):n.jsx(_i,{size:20})})]})]})})]},v)),n.jsx("span",{style:{fontSize:"0.75rem",opacity:.85,display:"block",marginTop:"0.5rem"},children:y1e(r)}),s&&n.jsx(pl,{videoId:s.videoId,title:s.title,instructor:s.instructor,startTime:s.startTime,onClose:()=>o(null)})]})}function S1e(){return n.jsxs("div",{className:"mobile-typing-indicator","data-testid":"typing-indicator",children:[n.jsx("div",{className:"mobile-typing-dot"}),n.jsx("div",{className:"mobile-typing-dot"}),n.jsx("div",{className:"mobile-typing-dot"})]})}function k1e({onRecordingComplete:e}){const[t,r]=g.useState(!1),[i,a]=g.useState(""),[s,o]=g.useState([0,0,0,0,0,0,0,0]),l=g.useRef(null),c=g.useRef("");g.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const f=window.webkitSpeechRecognition||window.SpeechRecognition;l.current=new f,l.current.continuous=!1,l.current.interimResults=!0,l.current.lang="en-US",l.current.onresult=h=>{const y=h.results[h.results.length-1][0].transcript;c.current=y,a(y)},l.current.onend=()=>{r(!1);const h=c.current;h.trim()&&(e==null||e(h)),c.current="",a("")},l.current.onerror=h=>{console.error("Speech recognition error:",h.error),r(!1),c.current="",a("")}}return()=>{l.current&&l.current.abort()}},[]),g.useEffect(()=>{if(t){const f=setInterval(()=>{o(h=>h.map(()=>Math.random()*100))},100);return()=>{clearInterval(f)}}else o([0,0,0,0,0,0,0,0])},[t]);const d=async()=>{if(l.current)try{a(""),l.current.start(),r(!0)}catch(f){console.error("Error starting speech recognition:",f)}else console.error("Speech recognition not supported"),alert("Speech recognition is not supported in this browser. Please use Chrome or Safari.")},u=()=>{l.current&&t&&l.current.stop()};return t?n.jsxs("div",{className:"mobile-voice-recorder","data-testid":"voice-recorder",children:[n.jsx("button",{onClick:u,className:"mobile-btn-icon","data-testid":"button-stop-recording",children:n.jsx(g7,{color:"var(--mobile-error-red)"})}),n.jsx("div",{className:"mobile-voice-wave",children:s.map((f,h)=>n.jsx("div",{className:"mobile-voice-bar",style:{height:`${Math.max(20,f)}%`}},h))}),n.jsx("span",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i||"Listening..."}),n.jsx("button",{onClick:u,className:"mobile-btn-primary",style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},"data-testid":"button-send-recording",children:n.jsx(Fc,{size:16})})]}):n.jsx("button",{onClick:d,className:"mobile-btn-icon","data-testid":"button-start-recording",children:n.jsx(mI,{})})}function RS(){const e=localStorage.getItem("sessionToken")||localStorage.getItem("token"),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t}async function _T(e,t=20,r=null){try{let i=yn(`/api/ai/chat/history/${e}?limit=${t}`);r&&(i+=`&before=${encodeURIComponent(r)}`),console.log("[API] getChatHistory URL:",i,"before:",r||"none");const a=await fetch(i,{headers:RS(),credentials:"include"});if(!a.ok)throw new Error("Failed to get history");return await a.json()}catch(i){return console.error("History API error:",i),{messages:[],hasMore:!1}}}async function C1e(e){try{const t=await fetch(yn(`/api/ai/saved-videos/${e}`),{headers:RS(),credentials:"include"});if(!t.ok)throw new Error("Failed to get saved videos");return await t.json()}catch(t){return console.error("Saved videos API error:",t),{videos:[]}}}async function A1e(e,t){try{const r=await fetch(yn(`/api/ai/saved-videos/${t}`),{method:"DELETE",headers:RS(),credentials:"include",body:JSON.stringify({userId:e})});if(!r.ok)throw new Error("Failed to unsave video");return await r.json()}catch(r){throw console.error("Unsave video API error:",r),r}}function vL(){var ie;const e=K1(),t=e.messages.map(U=>({id:U.id,sender:U.role==="user"?"user":"assistant",message:U.content,timestamp:new Date(U.timestamp),videos:[]})),[r,i]=g.useState(""),[a,s]=g.useState(!1),[o,l]=g.useState(!0),[c,d]=g.useState(null),[u,f]=g.useState(!0),[h,p]=g.useState(!1),[y,v]=g.useState(null),[b,x]=g.useState(!0),[m,j]=g.useState(null),N=g.useRef(null),w=g.useRef(null),S=g.useRef(null),C=g.useRef(null),{data:k,isLoading:A}=he({queryKey:["/api/auth/me"]}),E=((ie=k==null?void 0:k.id)==null?void 0:ie.toString())||localStorage.getItem("mobileUserId")||"1",T=["Analyzing your question...","Searching training database...","Finding relevant techniques...","Formulating response..."],P=()=>{_();let U=0;j(T[0]),N.current=setInterval(()=>{U=(U+1)%T.length,j(T[U])},2e3)},_=()=>{N.current&&(clearInterval(N.current),N.current=null),j(null)};g.useEffect(()=>()=>{N.current&&clearInterval(N.current)},[]);const R=U=>{var ee;(ee=w.current)==null||ee.scrollIntoView({behavior:U?"instant":"smooth"})};g.useEffect(()=>{b&&R()},[t.length,a,b]),g.useEffect(()=>{const U=()=>{document.visibilityState==="visible"&&t.length>0&&requestAnimationFrame(()=>R(!0))},ee=()=>{t.length>0&&requestAnimationFrame(()=>R(!0))};return document.addEventListener("visibilitychange",U),window.addEventListener("focus",ee),t.length>0&&requestAnimationFrame(()=>R(!0)),()=>{document.removeEventListener("visibilitychange",U),window.removeEventListener("focus",ee)}},[t.length]),g.useEffect(()=>{var de;const U=(de=k==null?void 0:k.id)==null?void 0:de.toString(),ee=localStorage.getItem("mobileUserId");if(U&&U!==c){O(U),d(U);return}if(!A&&!k&&c===null){ee&&ee!=="1"?(O(ee),d(ee)):(e.addMessage({id:"0",role:"assistant",content:`Welcome to Professor OS!

I'm your personal BJJ coach, available 24/7 to help you level up your game.

What would you like to work on today?`,timestamp:new Date().toISOString()}),l(!1),d("none"),e.setHistoryLoaded(!0));return}A&&c===null&&ee&&ee!=="1"&&(O(ee),d(ee))},[k,A,c]);const O=async U=>{console.log("[HISTORY] Loading for user:",U);try{const ee=await _T(U);if(ee.messages&&ee.messages.length>0){const de=ee.messages.map((oe,Pe)=>({id:oe.id||String(Pe),role:oe.role==="user"||oe.sender==="user"?"user":"assistant",content:oe.content||oe.message||"",timestamp:new Date(oe.createdAt||oe.timestamp).toISOString()}));e.setMessages(de),de.length>0&&v(de[0].timestamp),f(ee.hasMore??!1)}else e.addMessage({id:"welcome",role:"assistant",content:`Hey! I'm Professor OS, your personal BJJ coach.

I'm here to help you with:
 Technique breakdowns and details
 Training advice and game planning
 Competition prep and strategy
 Drilling ideas and concepts

What's on your mind?`,timestamp:new Date().toISOString()});e.setHistoryLoaded(!0),l(!1),requestAnimationFrame(()=>R(!0))}catch(ee){console.error("[HISTORY] Failed to load:",ee),e.addMessage({id:"error-welcome",role:"assistant",content:"Welcome! I'm Professor OS, your BJJ coach. What would you like to work on?",timestamp:new Date().toISOString()}),e.setHistoryLoaded(!0),l(!1)}},$=async()=>{if(h||!u||!y)return;p(!0);const U=S.current,ee=(U==null?void 0:U.scrollHeight)||0;try{const de=await _T(E,30,y);if(de.messages&&de.messages.length>0){const oe=de.messages.map((ye,ne)=>({id:ye.id||`older-${ne}-${Date.now()}`,role:ye.role==="user"||ye.sender==="user"?"user":"assistant",content:ye.content||ye.message||"",timestamp:new Date(ye.createdAt||ye.timestamp).toISOString()}));oe.length>0&&v(oe[0].timestamp);const Pe=new Set(e.messages.map(ye=>ye.id)),ve=oe.filter(ye=>!Pe.has(ye.id));e.setMessages([...ve,...e.messages]),f(de.hasMore??!1),requestAnimationFrame(()=>{if(U){const ye=U.scrollHeight;U.scrollTop=ye-ee}})}else f(!1)}catch(de){console.error("[LOAD-MORE] Failed:",de)}finally{p(!1)}},M=async(U=r)=>{var Pe;const ee=String(U||"").trim();if(!ee||a)return;x(!0),Ce("light");const de=Date.now().toString();e.addMessage({id:de,role:"user",content:ee,timestamp:new Date().toISOString()}),i(""),s(!0),P();const oe=(Date.now()+1).toString();e.addMessage({id:oe,role:"assistant",content:"",timestamp:new Date().toISOString()}),console.log("Added assistant placeholder to context:",oe);try{const ve=yn("/api/ai/chat/claude/stream"),ye=await fetch(ve,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({message:ee,userId:E})});if(!ye.ok)throw new Error(`Failed to send: ${ye.status}`);const ne=(Pe=ye.body)==null?void 0:Pe.getReader(),H=new TextDecoder;let B="",J="",ze=!1;if(ne)for(;;){const{done:ue,value:Ae}=await ne.read();if(ue)break;J+=H.decode(Ae,{stream:!0});const Ke=J.split(`
`);J=Ke.pop()||"";for(const nt of Ke)if(nt.startsWith("data: ")){const jt=nt.slice(6);if(jt==="[DONE]"){ze=!0,_(),s(!1),Ce("light");break}try{const te=JSON.parse(jt);if(te.error){console.error("[SSE] Server error:",te.error),_(),e.updateMessage(oe,{content:"I had trouble with that message. Could you try rephrasing?"}),s(!1),ze=!0;break}if(te.chunk||te.content){const We=te.chunk||te.content;B+=We,_(),e.updateMessage(oe,{content:B})}else te.processedContent?(console.log("[MOBILE-CHAT] Received processed content with video tokens"),_(),B=te.processedContent,e.updateMessage(oe,{content:te.processedContent})):te.done&&console.log("[MOBILE-CHAT] Stream complete signal")}catch{}}if(ze)break}s(!1)}catch(ve){console.error("[MOBILE-CHAT] Failed to send:",ve),_(),s(!1),e.updateMessage(oe,{content:"Sorry, I'm having trouble right now. Please try again!"})}finally{_(),console.log("=== HANDLE SEND COMPLETE ===")}},I=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),M())},L=U=>{U&&M(U)};return o||!e.historyLoaded?n.jsx("div",{className:"mobile-chat-container",children:n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:n.jsx("div",{style:{fontSize:"2rem",animation:"spin 1s linear infinite"},children:""})})}):n.jsxs("div",{className:"mobile-chat-container",children:[n.jsx("div",{className:"mobile-chat-header mobile-safe-area-top",children:n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"1.25rem",marginBottom:"0.25rem"},children:"Prof. OS"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)"},children:"Your Training Partner"})]})}),n.jsxs("div",{className:"mobile-chat-messages",ref:S,onScroll:U=>{U.currentTarget.scrollTop<100&&u&&!h&&$()},children:[h&&n.jsxs("div",{style:{textAlign:"center",padding:"12px",color:"var(--mobile-text-secondary)"},children:[n.jsx("span",{style:{animation:"spin 1s linear infinite",display:"inline-block"},children:""})," Loading older messages..."]}),!u&&t.length>20&&n.jsx("div",{style:{textAlign:"center",padding:"12px",color:"var(--mobile-text-secondary)",fontSize:"0.75rem"},children:"Beginning of conversation"}),t.map((U,ee)=>{const de=ee>0?t[ee-1]:null,oe=j1e(U.timestamp,(de==null?void 0:de.timestamp)??void 0);return n.jsxs("div",{children:[oe&&n.jsx("div",{style:{textAlign:"center",padding:"16px 0 8px",color:"var(--mobile-text-secondary)",fontSize:"0.75rem",fontWeight:500},children:b1e(U.timestamp)}),n.jsx(N1e,{sender:U.sender,message:U.message,timestamp:U.timestamp,videos:U.videos})]},U.id)}),a&&n.jsx(S1e,{}),n.jsx("div",{ref:w})]}),n.jsx("div",{className:"mobile-chat-input mobile-safe-area-bottom",children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px",padding:"12px 16px",background:"var(--mobile-card-bg)",borderTop:"1px solid var(--mobile-border)"},children:[n.jsx(k1e,{onRecordingComplete:L}),n.jsx("div",{style:{flex:1,display:"flex",alignItems:"flex-end",background:"var(--mobile-input-bg)",borderRadius:"20px",padding:"8px 16px",minHeight:"40px"},children:n.jsx("textarea",{ref:C,value:r,onChange:U=>{i(U.target.value);const ee=U.target;ee.style.height="auto",ee.style.height=Math.min(ee.scrollHeight,120)+"px"},onKeyPress:I,placeholder:"Ask Professor OS...",disabled:a,"data-testid":"input-chat-message",style:{flex:1,border:"none",background:"transparent",color:"var(--mobile-text-primary)",fontSize:"1rem",resize:"none",outline:"none",maxHeight:"120px",minHeight:"24px",lineHeight:"1.4",overflow:"auto"},rows:1})}),n.jsx("button",{onClick:()=>M(),disabled:!r.trim()||a,"data-testid":"button-send-message",style:{width:"40px",height:"40px",borderRadius:"50%",border:"none",background:r.trim()&&!a?"var(--mobile-primary)":"var(--mobile-input-bg)",color:r.trim()&&!a?"white":"var(--mobile-text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",cursor:r.trim()&&!a?"pointer":"default",transition:"all 0.2s"},children:n.jsx(Fc,{size:20})})]})})]})}function il(){const[e]=Ze(),t=[{path:"/chat",icon:ff,label:"Chat"},{path:"/library",icon:Ko,label:"Videos"},{path:"/saved-videos",icon:_i,label:"Saved"},{path:"/settings",icon:ll,label:"Settings"}],r=()=>{Ce("light")};return n.jsx("nav",{className:"mobile-bottom-nav mobile-safe-area-bottom",children:t.map(i=>{const a=i.icon,s=e===i.path;return n.jsxs(dr,{href:i.path,className:`mobile-bottom-nav-item ${s?"active":""}`,"data-testid":`nav-${i.label.toLowerCase()}`,onClick:r,children:[n.jsx(a,{className:"w-6 h-6"}),n.jsx("span",{children:i.label})]},i.path)})})}console.log(" MOBILE coach loaded - WRONG if you see this in iOS app");function IT(){return n.jsx("div",{className:"mobile-app",children:n.jsxs("div",{className:"mobile-container",children:[n.jsx(vL,{}),n.jsx(il,{})]})})}function E1e({videoId:e,title:t,thumbnail:r,instructor:i,duration:a,onSave:s,onPlay:o}){const[l,c]=g.useState(!1),d=u=>{u.stopPropagation(),c(!l),s==null||s()};return n.jsxs("div",{className:"mobile-video-card",onClick:o,"data-testid":`video-card-${e}`,children:[n.jsxs("div",{style:{position:"relative"},children:[n.jsx("img",{src:r,alt:t,className:"mobile-video-thumbnail"}),n.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.6)",borderRadius:"50%",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Zn,{fill:"white",color:"white",size:24})}),a&&n.jsx("div",{style:{position:"absolute",bottom:"0.5rem",right:"0.5rem",background:"rgba(0, 0, 0, 0.8)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem"},children:a})]}),n.jsxs("div",{className:"mobile-video-info",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[n.jsx("h3",{className:"mobile-video-title",children:t}),n.jsx("button",{onClick:d,className:"mobile-btn-icon",style:{flexShrink:0},"data-testid":`save-video-${e}`,children:n.jsx(_i,{fill:l?"var(--mobile-primary-purple)":"none"})})]}),n.jsx("p",{className:"mobile-video-meta",children:i})]})]})}const P1e=["All","Submissions","Passes","Sweeps","Escapes","Takedowns","Guard Retention","Position Control","Other"];function T1e(){const[e,t]=g.useState(""),[r,i]=g.useState("All"),[a,s]=g.useState("All"),[o,l]=g.useState([]),[c,d]=g.useState(!0),[u,f]=g.useState(null),h=localStorage.getItem("mobileUserId")||"1";g.useEffect(()=>{p()},[]);const p=async()=>{try{const j=(await C1e(h)).videos.map(N=>({id:N.id,title:N.title,thumbnail:N.thumbnailUrl||(N.videoUrl?`https://img.youtube.com/vi/${y(N.videoUrl)}/mqdefault.jpg`:""),instructor:N.instructor||N.instructorName||"Unknown",duration:N.duration||"",category:N.category||"other",savedDate:N.savedDate,note:N.note,videoUrl:N.videoUrl}));l(j)}catch(m){console.error("Failed to load saved videos:",m),l([])}finally{d(!1)}},y=m=>{if(!m)return"";const j=m.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);return j?j[1]:""},v=async m=>{try{await A1e(h,m),l(j=>j.filter(N=>N.id!==m))}catch(j){console.error("Failed to unsave video:",j),alert("Failed to remove video")}},b=["All",...new Set(o.map(m=>m.instructor).filter(Boolean))],x=o.filter(m=>{var S,C,k;const j=m.title.toLowerCase().includes(e.toLowerCase())||((S=m.instructor)==null?void 0:S.toLowerCase().includes(e.toLowerCase())),N=r==="All"||((C=m.category)==null?void 0:C.toLowerCase())===r.toLowerCase(),w=a==="All"||((k=m.instructor)==null?void 0:k.toLowerCase())===a.toLowerCase();return j&&N&&w});return c?n.jsxs("div",{className:"mobile-app",children:[n.jsx("div",{className:"mobile-container",children:n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:n.jsx("div",{style:{fontSize:"2rem",animation:"spin 1s linear infinite"},children:""})})}),n.jsx(il,{})]}):n.jsx("div",{className:"mobile-app",children:n.jsxs("div",{className:"mobile-container",children:[n.jsxs("div",{style:{flex:1,overflowY:"auto",paddingBottom:"80px"},children:[n.jsx("div",{className:"mobile-chat-header mobile-safe-area-top",style:{position:"sticky",top:0,zIndex:10},children:n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"1.25rem",marginBottom:"0.25rem"},children:"Saved Videos"}),n.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)"},children:[o.length," videos saved"]})]})}),n.jsx("div",{style:{padding:"1rem"},children:n.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",background:"var(--mobile-medium-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",padding:"0.75rem 1rem",gap:"0.75rem"},children:[n.jsx(bn,{size:18,color:"var(--mobile-text-secondary)"}),n.jsx("input",{type:"text",placeholder:"Search saved videos...",value:e,onChange:m=>t(m.target.value),"data-testid":"input-search-videos",style:{flex:1,background:"transparent",border:"none",color:"var(--mobile-text-primary)",fontSize:"1rem",outline:"none"}}),e&&n.jsx("button",{onClick:()=>t(""),"data-testid":"button-clear-search",style:{background:"transparent",border:"none",color:"var(--mobile-text-secondary)",padding:"0.25rem",cursor:"pointer"},children:n.jsx(Fi,{size:18})})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",padding:"0 1rem 1rem"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem",fontWeight:"600"},children:"Category"}),n.jsx("select",{value:r,onChange:m=>i(m.target.value),"data-testid":"select-category-filter",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-medium-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:P1e.map(m=>n.jsx("option",{value:m,children:m},m))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem",fontWeight:"600"},children:"Instructor"}),n.jsx("select",{value:a,onChange:m=>s(m.target.value),"data-testid":"select-instructor-filter",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-medium-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:b.map(m=>n.jsx("option",{value:m,children:m},m))})]})]}),n.jsxs("div",{style:{padding:"0 1rem 0.75rem",fontSize:"0.75rem",color:"var(--mobile-text-secondary)"},children:["Showing ",x.length," of ",o.length," videos"]}),x.length===0?n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",textAlign:"center",gap:"1rem"},children:[n.jsx(_i,{size:48,color:"var(--mobile-text-tertiary)"}),n.jsx("h3",{style:{color:"var(--mobile-text-secondary)"},children:e||r!=="All"||a!=="All"?"No videos found":"No saved videos yet"}),n.jsx("p",{style:{color:"var(--mobile-text-tertiary)",fontSize:"0.875rem"},children:e||r!=="All"||a!=="All"?"Try adjusting your search or filters":"Save videos from Prof. OS to watch later"})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",padding:"0 1rem 1rem"},children:x.map(m=>n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[n.jsx(E1e,{videoId:m.id,title:m.title,thumbnail:m.thumbnail,instructor:m.instructor,duration:m.duration,onPlay:()=>{const j=y(m.videoUrl);j?f({videoId:j,title:m.title,instructor:m.instructor}):console.error("No valid YouTube URL for video:",m.id)},onSave:()=>v(m.id)}),m.note&&n.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)",fontStyle:"italic",padding:"0.5rem 0.75rem",background:"var(--mobile-dark-gray)",borderLeft:"3px solid var(--mobile-primary-purple)",borderRadius:"var(--mobile-radius-sm)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx($c,{size:14,color:"var(--mobile-primary-purple)"}),n.jsxs("span",{children:['"',m.note,'"']})]}),n.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--mobile-text-tertiary)",paddingLeft:"0.75rem"},children:["Saved ",m.savedDate]})]},m.id))})]}),n.jsx(il,{}),u&&n.jsx(pl,{videoId:u.videoId,title:u.title,instructor:u.instructor,onClose:()=>f(null)})]})})}console.log(" MOBILE settings loaded - WRONG if you see this in iOS app");function RT(){Ze();const[e,t]=g.useState(""),{data:r}=he({queryKey:["/api/auth/me"]}),{data:i,isLoading:a}=he({queryKey:["/api/auth/profile"],enabled:!!r}),[s,o]=g.useState({username:"",displayName:"",name:"",beltLevel:"white",style:"both",age:"",weight:"",gym:"",timezone:"America/New_York",weeklyRecapEnabled:!0});g.useEffect(()=>{i&&o({username:i.username||"",displayName:i.displayName||"",name:i.name||"",beltLevel:i.beltLevel||"white",style:i.style||"both",age:i.age||"",weight:i.weight||"",gym:i.gym||"",timezone:i.timezone||"America/New_York",weeklyRecapEnabled:i.weeklyRecapEnabled??!0})},[i]);const l=Ve({mutationFn:async d=>await ct("PATCH","/api/auth/profile",d),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/auth/profile"]}),Te.invalidateQueries({queryKey:["/api/auth/me"]}),t("saved"),setTimeout(()=>t(""),2e3)},onError:d=>{t("error"),console.error("Update error:",d),setTimeout(()=>t(""),3e3)}}),c=()=>{l.mutate(s)};return a?n.jsx("div",{className:"mobile-app",children:n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--mobile-dark-bg)"},children:n.jsx(qe,{className:"w-8 h-8 animate-spin",color:"var(--mobile-text-primary)"})})}):n.jsx("div",{className:"mobile-app",children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"var(--mobile-dark-bg)",color:"var(--mobile-text-primary)",paddingBottom:"var(--mobile-bottom-nav-height)",overflow:"hidden"},children:[n.jsx("div",{style:{position:"sticky",top:0,zIndex:10,background:"var(--mobile-dark-bg)",borderBottom:"1px solid var(--mobile-border-gray)",padding:"1rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--mobile-text-primary)"},children:"Settings"}),n.jsx("button",{onClick:c,disabled:l.isPending,"data-testid":"button-save",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:e==="saved"?"var(--mobile-success)":"var(--mobile-primary)",color:"white",border:"none",borderRadius:"var(--mobile-radius-md)",fontSize:"0.875rem",fontWeight:"var(--mobile-font-medium)",cursor:l.isPending?"not-allowed":"pointer",opacity:l.isPending?.6:1},children:l.isPending?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e==="saved"?" Saved":n.jsxs(n.Fragment,{children:[n.jsx(xI,{className:"w-4 h-4"}),"Save"]})})]})}),n.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[n.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[n.jsx(ll,{size:20,color:"var(--mobile-primary)"}),n.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"var(--mobile-font-semibold)",color:"var(--mobile-text-primary)"},children:"Profile"})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Username *"}),n.jsx("input",{type:"text",value:s.username,onChange:d=>o({...s,username:d.target.value}),"data-testid":"input-username",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Display Name"}),n.jsx("input",{type:"text",value:s.displayName,onChange:d=>o({...s,displayName:d.target.value}),"data-testid":"input-display-name",placeholder:"John Smith",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Full Name"}),n.jsx("input",{type:"text",value:s.name,onChange:d=>o({...s,name:d.target.value}),"data-testid":"input-name",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]})]})]}),n.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[n.jsx(Tx,{size:20,color:"var(--mobile-primary)"}),n.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"var(--mobile-font-semibold)",color:"var(--mobile-text-primary)"},children:"Training"})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Belt Level *"}),n.jsx("select",{value:s.beltLevel,onChange:d=>o({...s,beltLevel:d.target.value}),"data-testid":"select-belt-level",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:["white","blue","purple","brown","black"].map(d=>n.jsxs("option",{value:d,children:[d.charAt(0).toUpperCase()+d.slice(1)," Belt"]},d))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Training Style *"}),n.jsxs("select",{value:s.style,onChange:d=>o({...s,style:d.target.value}),"data-testid":"select-style",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:[n.jsx("option",{value:"gi",children:"Gi Only"}),n.jsx("option",{value:"nogi",children:"No-Gi Only"}),n.jsx("option",{value:"both",children:"Both Gi & No-Gi"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Age"}),n.jsx("input",{type:"text",value:s.age,onChange:d=>o({...s,age:d.target.value}),"data-testid":"input-age",placeholder:"25",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Weight (lbs)"}),n.jsx("input",{type:"text",value:s.weight,onChange:d=>o({...s,weight:d.target.value}),"data-testid":"input-weight",placeholder:"170",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Gym/Academy"}),n.jsx("input",{type:"text",value:s.gym,onChange:d=>o({...s,gym:d.target.value}),"data-testid":"input-gym",placeholder:"Gracie Barra",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]})]})]}),n.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1rem"},children:[n.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"var(--mobile-font-semibold)",color:"var(--mobile-text-primary)",marginBottom:"1rem"},children:"Preferences"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Timezone"}),n.jsxs("select",{value:s.timezone,onChange:d=>o({...s,timezone:d.target.value}),"data-testid":"select-timezone",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:[n.jsx("option",{value:"America/New_York",children:"Eastern (ET)"}),n.jsx("option",{value:"America/Chicago",children:"Central (CT)"}),n.jsx("option",{value:"America/Denver",children:"Mountain (MT)"}),n.jsx("option",{value:"America/Los_Angeles",children:"Pacific (PT)"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-primary)"},children:"Weekly Recap Emails"}),n.jsx("div",{style:{fontSize:"0.75rem",color:"var(--mobile-text-tertiary)",marginTop:"0.25rem"},children:"Receive weekly progress summaries"})]}),n.jsx("input",{type:"checkbox",checked:s.weeklyRecapEnabled,onChange:d=>o({...s,weeklyRecapEnabled:d.target.checked}),"data-testid":"toggle-weekly-recap",style:{width:"3rem",height:"1.5rem",cursor:"pointer"}})]})]})]})]})}),n.jsx(il,{})]})})}function O1e(){var l;const e=localStorage.getItem("mobileUserId")||"1",{data:t,isLoading:r}=he({queryKey:["/api/users",e]});if(r)return n.jsx("div",{className:"mobile-app",children:n.jsxs("div",{className:"mobile-container",children:[n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"calc(100vh - 60px)",background:"var(--mobile-bg-primary)"},children:n.jsx("div",{style:{fontSize:"1.5rem",color:"var(--mobile-text-primary)"},children:"Loading..."})}),n.jsx(il,{})]})});const i=t!=null&&t.createdAt?vn(new Date(t.createdAt),"MMMM d, yyyy"):"Unknown",a=(t==null?void 0:t.totalLogins)||0,s=(t==null?void 0:t.currentStreak)||0,o=(t==null?void 0:t.beltLevel)||"blue";return n.jsx("div",{className:"mobile-app",children:n.jsxs("div",{className:"mobile-container",children:[n.jsx("div",{style:{minHeight:"calc(100vh - 60px)",background:"var(--mobile-bg-primary)",overflowY:"auto"},children:n.jsxs("div",{className:"mobile-safe-area-top",style:{padding:"1.5rem"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[n.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1.5rem",color:"var(--mobile-text-primary)"},children:"Your Progress"}),n.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"},children:n.jsx(Ed,{rank:o,size:"large"})}),n.jsxs("p",{style:{color:"var(--mobile-text-secondary)",fontSize:"1.125rem"},children:[o.charAt(0).toUpperCase()+o.slice(1)," Belt"]})]}),n.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1.5rem"},children:[n.jsxs("div",{style:{background:"var(--mobile-surface)",border:"1px solid var(--mobile-border)",borderRadius:"0.75rem",padding:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--mobile-text-secondary)"},children:"Member Since"}),n.jsx(Px,{size:16,style:{color:"var(--mobile-text-secondary)"}})]}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--mobile-text-primary)"},children:i}),n.jsx("p",{style:{fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginTop:"0.25rem"},children:"Your journey began"})]}),n.jsxs("div",{style:{background:"var(--mobile-surface)",border:"1px solid var(--mobile-border)",borderRadius:"0.75rem",padding:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--mobile-text-secondary)"},children:"Total Logins"}),n.jsx(sr,{size:16,style:{color:"var(--mobile-text-secondary)"}})]}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--mobile-text-primary)"},children:a}),n.jsx("p",{style:{fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginTop:"0.25rem"},children:"Training sessions"})]}),n.jsxs("div",{style:{background:"var(--mobile-surface)",border:"1px solid var(--mobile-border)",borderRadius:"0.75rem",padding:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--mobile-text-secondary)"},children:"Current Streak"}),n.jsx(_1,{size:16,style:{color:"#f59e0b"}})]}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--mobile-text-primary)"},children:s}),n.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginTop:"0.25rem"},children:[s===1?"day":"days"," in a row"]})]})]}),n.jsxs("div",{style:{background:"var(--mobile-surface)",border:"1px solid var(--mobile-border)",borderRadius:"0.75rem",padding:"1rem"},children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"1rem",color:"var(--mobile-text-primary)"},children:"Training Profile"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:"Training Style:"}),n.jsx("span",{style:{fontWeight:"500",textTransform:"capitalize",color:"var(--mobile-text-primary)"},children:(t==null?void 0:t.style)||"Not set"})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:"Training Frequency:"}),n.jsxs("span",{style:{fontWeight:"500",color:"var(--mobile-text-primary)"},children:[(t==null?void 0:t.trainingFrequency)||0," days/week"]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:"Subscription:"}),n.jsx("span",{style:{fontWeight:"500",textTransform:"capitalize",color:"var(--mobile-text-primary)"},children:((l=t==null?void 0:t.subscriptionType)==null?void 0:l.replace("_"," "))||"Free Trial"})]})]})]})]})}),n.jsx(il,{})]})})}function rs(){const[,e]=Ze(),[t,r]=g.useState(1),[i,a]=g.useState({beltLevel:"",goals:[],experience:""}),s=[{value:"white",label:"White Belt",color:"#ffffff"},{value:"blue",label:"Blue Belt",color:"#3b82f6"},{value:"purple",label:"Purple Belt",color:"#a855f7"},{value:"brown",label:"Brown Belt",color:"#92400e"},{value:"black",label:"Black Belt",color:"#000000"}],o=[{value:"competition",label:"Competition",icon:"Trophy"},{value:"fitness",label:"Fitness",icon:"Dumbbell"},{value:"self-defense",label:"Self Defense",icon:"Shield"},{value:"fun",label:"Fun & Social",icon:"Users"}],l=async()=>{const d=localStorage.getItem("mobileUserId")||"1";localStorage.setItem("mobileUserId",d),localStorage.setItem("mobileUserData",JSON.stringify(i)),Zt()?(await Qn.set({key:"mobileUserId",value:d}),e("/ios-chat")):window.location.href="/chat"},c=d=>{a(u=>({...u,goals:u.goals.includes(d)?u.goals.filter(f=>f!==d):[...u.goals,d]}))};return n.jsx("div",{className:"mobile-app",children:n.jsxs("div",{className:"mobile-container",style:{padding:"2rem",display:"flex",flexDirection:"column",justifyContent:"center"},children:[n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[1,2,3].map(d=>n.jsx("div",{style:{flex:1,height:"4px",borderRadius:"2px",background:d<=t?"var(--mobile-primary-purple)":"var(--mobile-border-gray)"}},d))}),n.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)"},children:["Step ",t," of 3"]})]}),t===1&&n.jsxs("div",{className:"mobile-animate-slide-in",children:[n.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Welcome to BJJ OS"}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--mobile-text-secondary)",marginBottom:"2rem"},children:"What's your current belt level?"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.map(d=>n.jsxs("button",{onClick:()=>{a({...i,beltLevel:d.value}),r(2)},style:{padding:"1.25rem",background:i.beltLevel===d.value?"var(--mobile-primary-gradient)":"var(--mobile-dark-gray)",borderRadius:"var(--mobile-radius-lg)",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"1rem"},"data-testid":`belt-${d.value}`,children:[n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx(A0,{size:24,fill:d.color,color:d.color,style:{flexShrink:0}}),n.jsx("span",{children:d.label})]}),n.jsx(rn,{})]},d.value))})]}),t===2&&n.jsxs("div",{className:"mobile-animate-slide-in",children:[n.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"What are your goals?"}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--mobile-text-secondary)",marginBottom:"2rem"},children:"Select all that apply"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"2rem"},children:o.map(d=>{const f={Trophy:ql,Dumbbell:Tx,Shield:Ri,Users:ur}[d.icon];return n.jsxs("button",{onClick:()=>c(d.value),style:{padding:"1.25rem",background:i.goals.includes(d.value)?"var(--mobile-primary-gradient)":"var(--mobile-dark-gray)",borderRadius:"var(--mobile-radius-lg)",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},"data-testid":`goal-${d.value}`,children:[n.jsx(f,{size:32}),n.jsx("span",{children:d.label})]},d.value)})}),n.jsx("button",{onClick:()=>r(3),className:"mobile-btn-primary",disabled:i.goals.length===0,style:{width:"100%"},"data-testid":"button-next-step",children:"Continue"})]}),t===3&&n.jsxs("div",{className:"mobile-animate-slide-in",children:[n.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"How long have you been training?"}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--mobile-text-secondary)",marginBottom:"2rem"},children:"This helps us personalize your experience"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"2rem"},children:[{value:"beginner",label:"Less than 6 months"},{value:"intermediate",label:"6 months - 2 years"},{value:"advanced",label:"2-5 years"},{value:"expert",label:"5+ years"}].map(d=>n.jsx("button",{onClick:()=>a({...i,experience:d.value}),style:{padding:"1.25rem",background:i.experience===d.value?"var(--mobile-primary-gradient)":"var(--mobile-dark-gray)",borderRadius:"var(--mobile-radius-lg)",textAlign:"left",fontSize:"1rem"},"data-testid":`experience-${d.value}`,children:d.label},d.value))}),n.jsx("button",{onClick:l,className:"mobile-btn-primary",disabled:!i.experience,style:{width:"100%"},"data-testid":"button-complete-onboarding",children:"Get Started"})]})]})})}const _1e="1.0.0";function I1e(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"N/A"}}function R1e(){var x;const[,e]=Ze(),[t,r]=g.useState(!1),[i,a]=g.useState(!1),{data:s,isLoading:o}=he({queryKey:["/api/auth/me"]}),{data:l}=he({queryKey:["/api/auth/profile"],enabled:!!s}),c=async()=>{Ce("medium"),a(!0);try{await Nx(),Zt()?e("/ios-login"):e("/")}catch(m){console.error("Logout error:",m),a(!1)}},d=m=>{Ce("light"),e(m)},u=async m=>{Ce("light"),Zt()?await qh.open({url:m}):window.open(m,"_blank")},f=async()=>{Ce("light"),window.location.href="mailto:support@bjjos.app?subject=BJJ OS Support Request"},h=()=>{Ce("light"),r(!0)},p=m=>({white:"#FFFFFF",blue:"#3B82F6",purple:"#8B5CF6",brown:"#92400E",black:"#1F2937"})[m]||"#FFFFFF",y=m=>m!=null&&m.isLifetime?"Lifetime":m!=null&&m.isPro?"Pro":"Free";if(o)return n.jsx("div",{className:"mobile-app",children:n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--mobile-dark-bg)"},children:n.jsx(qe,{className:"w-8 h-8 animate-spin",color:"var(--mobile-text-primary)"})})});const v={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"transparent",border:"none",width:"100%",cursor:"pointer",borderBottom:"1px solid var(--mobile-border-gray)"},b={display:"flex",alignItems:"center",gap:"0.75rem"};return n.jsxs("div",{className:"mobile-app",children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"var(--mobile-dark-bg)",color:"var(--mobile-text-primary)",paddingBottom:"var(--mobile-bottom-nav-height)",overflow:"hidden"},children:[n.jsx("div",{style:{position:"sticky",top:0,zIndex:10,background:"var(--mobile-dark-bg)",borderBottom:"1px solid var(--mobile-border-gray)",padding:"1rem"},children:n.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--mobile-text-primary)"},children:"Profile"})}),n.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:[n.jsx("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1.25rem",marginBottom:"1.5rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[n.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"var(--mobile-primary)",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(ll,{size:28,color:"white"})}),n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:"var(--mobile-text-primary)",marginBottom:"0.25rem"},children:(l==null?void 0:l.displayName)||(l==null?void 0:l.username)||((x=s==null?void 0:s.email)==null?void 0:x.split("@")[0])||"User"}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:(s==null?void 0:s.email)||"No email set"}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[n.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"var(--mobile-primary)",color:"white",borderRadius:"var(--mobile-radius-sm)"},children:y(s)}),(l==null?void 0:l.beltLevel)&&n.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:p(l.beltLevel),color:l.beltLevel==="white"?"#000":"#FFF",borderRadius:"var(--mobile-radius-sm)",border:l.beltLevel==="white"?"1px solid #666":"none"},children:[l.beltLevel.charAt(0).toUpperCase()+l.beltLevel.slice(1)," Belt"]})]})]})]})}),n.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1.25rem",marginBottom:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[n.jsx(C7,{size:20,color:"var(--mobile-primary)"}),n.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"var(--mobile-text-primary)"},children:"Subscription"})]}),n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[n.jsx("span",{style:{color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},children:"Plan"}),n.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.875rem",fontWeight:"500"},children:s!=null&&s.isLifetime?"BJJ OS Lifetime":s!=null&&s.isPro?"BJJ OS Pro":"Free"})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[n.jsx("span",{style:{color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},children:"Status"}),n.jsx("span",{style:{color:s!=null&&s.isPro||s!=null&&s.isLifetime?"#22C55E":"var(--mobile-text-tertiary)",fontSize:"0.875rem",fontWeight:"500"},children:s!=null&&s.isLifetime?"Lifetime Access":s!=null&&s.isPro?"Active":"Inactive"})]}),(s==null?void 0:s.isPro)&&!(s!=null&&s.isLifetime)&&(s==null?void 0:s.subscriptionEndDate)&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},children:"Renews"}),n.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.875rem"},children:I1e(s==null?void 0:s.subscriptionEndDate)})]})]}),((s==null?void 0:s.isPro)||(s==null?void 0:s.isLifetime))&&n.jsxs("button",{onClick:()=>u("https://bjjos.app/settings/subscription"),style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},"data-testid":"button-manage-subscription",children:[n.jsx(Rc,{size:16}),"Manage Subscription"]}),!(s!=null&&s.isPro)&&!(s!=null&&s.isLifetime)&&n.jsx("div",{style:{textAlign:"center",color:"var(--mobile-text-tertiary)",fontSize:"0.8125rem",lineHeight:"1.5"},children:"Visit bjjos.app to subscribe"})]}),n.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",overflow:"hidden",marginBottom:"1.5rem"},children:[n.jsxs("button",{onClick:()=>d("/app/settings"),style:v,"data-testid":"button-settings",children:[n.jsxs("div",{style:b,children:[n.jsx(Sd,{size:20,color:"var(--mobile-text-secondary)"}),n.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem"},children:"Settings"})]}),n.jsx(rn,{size:20,color:"var(--mobile-text-tertiary)"})]}),n.jsxs("button",{onClick:h,style:v,"data-testid":"button-security",children:[n.jsxs("div",{style:b,children:[n.jsx(Ri,{size:20,color:"var(--mobile-text-secondary)"}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem",display:"block"},children:"Security"}),n.jsx("span",{style:{color:"var(--mobile-text-tertiary)",fontSize:"0.75rem"},children:"Change password on web"})]})]}),n.jsx(rn,{size:20,color:"var(--mobile-text-tertiary)"})]}),n.jsxs("button",{onClick:f,style:{...v,borderBottom:"none"},"data-testid":"button-support",children:[n.jsxs("div",{style:b,children:[n.jsx(uI,{size:20,color:"var(--mobile-text-secondary)"}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem",display:"block"},children:"Help & Support"}),n.jsx("span",{style:{color:"var(--mobile-text-tertiary)",fontSize:"0.75rem"},children:"support@bjjos.app"})]})]}),n.jsx(na,{size:20,color:"var(--mobile-text-tertiary)"})]})]}),n.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",overflow:"hidden",marginBottom:"1.5rem"},children:[n.jsxs("button",{onClick:()=>u("https://bjjos.app/terms"),style:v,"data-testid":"button-terms",children:[n.jsxs("div",{style:b,children:[n.jsx(df,{size:20,color:"var(--mobile-text-secondary)"}),n.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem"},children:"Terms of Service"})]}),n.jsx(rn,{size:20,color:"var(--mobile-text-tertiary)"})]}),n.jsxs("button",{onClick:()=>u("https://bjjos.app/privacy"),style:{...v,borderBottom:"none"},"data-testid":"button-privacy",children:[n.jsxs("div",{style:b,children:[n.jsx(Yo,{size:20,color:"var(--mobile-text-secondary)"}),n.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem"},children:"Privacy Policy"})]}),n.jsx(rn,{size:20,color:"var(--mobile-text-tertiary)"})]})]}),n.jsxs("button",{onClick:c,disabled:i,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",padding:"1rem",background:"transparent",border:"1px solid #EF4444",borderRadius:"var(--mobile-radius-lg)",color:"#EF4444",fontSize:"1rem",fontWeight:"600",cursor:i?"not-allowed":"pointer",opacity:i?.6:1,marginBottom:"1.5rem"},"data-testid":"button-logout",children:[i?n.jsx(qe,{size:20,className:"animate-spin"}):n.jsx(Nd,{size:20}),i?"Logging out...":"Log Out"]}),n.jsxs("div",{style:{textAlign:"center",color:"var(--mobile-text-tertiary)",fontSize:"0.75rem",paddingBottom:"2rem"},children:["BJJ OS v",_1e]})]}),n.jsx(il,{})]}),t&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100,padding:"1rem"},onClick:()=>{Ce("light"),r(!1)},children:n.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1.5rem",maxWidth:"320px",width:"100%"},onClick:m=>m.stopPropagation(),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[n.jsx(Ri,{size:24,color:"var(--mobile-primary)"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"var(--mobile-text-primary)"},children:"Security Settings"})]}),n.jsx("p",{style:{color:"var(--mobile-text-secondary)",fontSize:"0.9375rem",lineHeight:"1.5",marginBottom:"1.5rem"},children:"To change your password or manage security settings, please visit:"}),n.jsx("div",{style:{background:"var(--mobile-dark-bg)",padding:"0.75rem",borderRadius:"var(--mobile-radius-md)",textAlign:"center",marginBottom:"1.5rem"},children:n.jsx("span",{style:{color:"var(--mobile-primary)",fontSize:"0.9375rem",fontWeight:"500"},children:"bjjos.app/settings"})}),n.jsx("button",{onClick:()=>{Ce("light"),r(!1)},style:{width:"100%",padding:"0.75rem",background:"var(--mobile-primary)",border:"none",borderRadius:"var(--mobile-radius-md)",color:"white",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},"data-testid":"button-close-security",children:"Got it"})]})})]})}const M1e={white:"#FFFFFF",blue:"#1E3A8A",purple:"#7C3AED",brown:"#78350F",black:"#000000"};function $1e({color:e,stripes:t=0,selected:r=!1,onClick:i}){const a=M1e[e],s=e==="black"?"#DC2626":"#000000",o=e==="white";return n.jsx("div",{onClick:i,className:"relative w-full h-12 cursor-pointer transition-none",style:{backgroundColor:a,border:r?"2px solid white":o?"1px solid #333":"none"},"data-testid":`belt-${e}`,children:t>0&&n.jsx("div",{className:"absolute flex flex-col justify-center h-full",style:{right:"16px",gap:"8px"},children:[...Array(t)].map((l,c)=>n.jsx("div",{className:"stripe",style:{width:"4px",height:"32px",backgroundColor:s},"data-testid":`stripe-${c}`},c))})})}const F1e=[{color:"white",label:"White Belt"},{color:"blue",label:"Blue Belt"},{color:"purple",label:"Purple Belt"},{color:"brown",label:"Brown Belt"},{color:"black",label:"Black Belt"}];function D1e(){const{toast:e}=rt(),[t,r]=g.useState("blue"),[i,a]=g.useState(0),{data:s}=he({queryKey:["/api/auth/me"]});g.useEffect(()=>{s!=null&&s.themeBelt&&t!==s.themeBelt&&r(s.themeBelt),(s==null?void 0:s.themeStripes)!==void 0&&i!==s.themeStripes&&a(s.themeStripes)},[s==null?void 0:s.themeBelt,s==null?void 0:s.themeStripes,t,i]);const o=Ve({mutationFn:async({belt:d,stripes:u})=>(await ct("PATCH","/api/user/theme",{themeBelt:d,themeStripes:u})).json(),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/auth/me"]}),e({title:"Theme updated",description:"Your belt theme has been saved"})},onError:d=>{e({title:"Error",description:d.message||"Failed to update theme",variant:"destructive"})}}),l=d=>{r(d),o.mutate({belt:d,stripes:i})},c=d=>{a(d),o.mutate({belt:t,stripes:d})};return n.jsx("div",{className:"min-h-screen bg-background p-6",children:n.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold mb-2","data-testid":"text-page-title",children:"Theme Settings"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose your current belt and stripe count"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-medium",children:"Select Your Belt"}),F1e.map(d=>n.jsxs("div",{onClick:()=>l(d.color),className:"cursor-pointer group","data-testid":`belt-option-${d.color}`,children:[n.jsx("div",{className:"mb-2",children:n.jsx($1e,{color:d.color,stripes:t===d.color?i:0,selected:t===d.color})}),n.jsxs("div",{className:"flex items-center gap-3 pl-1",children:[n.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center transition-none ${t===d.color?"border-white bg-white":"border-muted-foreground"}`,children:t===d.color&&n.jsx("div",{className:"w-2 h-2 rounded-full bg-black"})}),n.jsx("span",{className:"text-sm font-medium","data-testid":`text-${d.color}-label`,children:d.label})]})]},d.color))]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-medium",children:"Number of Stripes"}),n.jsx("div",{className:"flex gap-2",children:[0,1,2,3,4].map(d=>n.jsx(Q,{variant:i===d?"default":"outline",onClick:()=>c(d),"data-testid":`button-stripes-${d}`,children:d},d))}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Select the number of stripes on your current belt (0-4)"})]}),n.jsx("p",{className:"text-xs text-muted-foreground pt-4",children:"Your selected belt will be used as the primary color theme throughout the app"})]})})}function pd(){const[e]=Ze(),t=[{path:"/ios-chat",icon:ff,label:"Chat"},{path:"/ios-library",icon:Ko,label:"Videos"},{path:"/ios-saved",icon:_i,label:"Saved"},{path:"/ios-profile",icon:ll,label:"Profile"}],r=()=>{Ce("light")};return n.jsx("nav",{className:"ios-bottom-nav",style:{position:"fixed",bottom:0,left:0,right:0,background:"#121214",borderTop:"1px solid #2A2A2E",display:"flex",justifyContent:"space-around",padding:"8px 0",paddingBottom:"max(8px, env(safe-area-inset-bottom))",zIndex:9999},"data-testid":"ios-bottom-nav",children:t.map(i=>{const a=i.icon,s=e===i.path||e.startsWith(i.path+"/");return n.jsxs(dr,{href:i.path,onClick:r,"data-testid":`nav-${i.label.toLowerCase().replace(" ","-")}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",color:s?"#8B5CF6":"#71717A",textDecoration:"none",padding:"8px 16px",fontSize:"11px",fontWeight:s?600:400,WebkitTapHighlightColor:"rgba(139, 92, 246, 0.3)"},children:[n.jsx(a,{size:24,strokeWidth:s?2.5:2,fill:s?"#8B5CF6":"none"}),n.jsx("span",{children:i.label})]},i.path)})})}function L1e(){const[,e]=Ze(),{data:t}=he({queryKey:["/api/auth/me"]}),{data:r}=he({queryKey:["/api/user/stats"],enabled:!!t}),i=s=>{Ce("light"),e(s)},a=s=>({white:"White Belt",blue:"Blue Belt",purple:"Purple Belt",brown:"Brown Belt",black:"Black Belt"})[s||"white"]||"White Belt";return n.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"100px"},children:[n.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E"},children:[n.jsxs("h1",{style:{fontSize:"28px",fontWeight:700,margin:0},children:["Welcome back",t!=null&&t.displayName?`, ${t.displayName.split(" ")[0]}`:""]}),n.jsx("p",{style:{color:"#71717A",fontSize:"14px",marginTop:"4px"},children:a(t==null?void 0:t.beltLevel)})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",padding:"20px"},children:[n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"16px",border:"1px solid #2A2A2E"},"data-testid":"stat-messages",children:[n.jsx(ff,{size:24,color:"#8B5CF6"}),n.jsxs("div",{style:{marginTop:"12px"},children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:700},children:(r==null?void 0:r.messagesCount)||0}),n.jsx("div",{style:{fontSize:"12px",color:"#71717A"},children:"Coaching Sessions"})]})]}),n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"16px",border:"1px solid #2A2A2E"},"data-testid":"stat-videos",children:[n.jsx(Ko,{size:24,color:"#8B5CF6"}),n.jsxs("div",{style:{marginTop:"12px"},children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:700},children:(r==null?void 0:r.savedVideos)||0}),n.jsx("div",{style:{fontSize:"12px",color:"#71717A"},children:"Saved Techniques"})]})]}),n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"16px",border:"1px solid #2A2A2E"},"data-testid":"stat-streak",children:[n.jsx(_1,{size:24,color:"#F97316"}),n.jsxs("div",{style:{marginTop:"12px"},children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:700},children:(r==null?void 0:r.streak)||0}),n.jsx("div",{style:{fontSize:"12px",color:"#71717A"},children:"Day Streak"})]})]}),n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"16px",border:"1px solid #2A2A2E"},"data-testid":"stat-progress",children:[n.jsx(sr,{size:24,color:"#22C55E"}),n.jsxs("div",{style:{marginTop:"12px"},children:[n.jsxs("div",{style:{fontSize:"24px",fontWeight:700},children:[(r==null?void 0:r.progressPercent)||0,"%"]}),n.jsx("div",{style:{fontSize:"12px",color:"#71717A"},children:"Weekly Progress"})]})]})]}),n.jsxs("div",{style:{padding:"0 20px"},children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px"},children:"Quick Actions"}),n.jsxs("button",{onClick:()=>i("/ios-chat"),onTouchEnd:()=>i("/ios-chat"),"data-testid":"button-start-coaching",style:{width:"100%",background:"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)",border:"none",borderRadius:"16px",padding:"20px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"16px",cursor:"pointer"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"rgba(255,255,255,0.2)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(ff,{size:24,color:"#FFFFFF"})}),n.jsxs("div",{style:{textAlign:"left"},children:[n.jsx("div",{style:{color:"#FFFFFF",fontSize:"16px",fontWeight:600},children:"Start Coaching Session"}),n.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"13px"},children:"Chat with Professor OS"})]})]}),n.jsxs("button",{onClick:()=>i("/ios-library"),onTouchEnd:()=>i("/ios-library"),"data-testid":"button-browse-library",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"16px",padding:"20px",display:"flex",alignItems:"center",gap:"16px",cursor:"pointer"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"#2A2A2E",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Ko,{size:24,color:"#8B5CF6"})}),n.jsxs("div",{style:{textAlign:"left"},children:[n.jsx("div",{style:{color:"#FFFFFF",fontSize:"16px",fontWeight:600},children:"Browse Technique Library"}),n.jsx("div",{style:{color:"#71717A",fontSize:"13px"},children:"2,000+ instructional videos"})]})]})]}),n.jsx(pd,{})]})}console.log(" ios-chat.tsx LOADED");function B1e(){return n.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",display:"flex",flexDirection:"column"},children:[n.jsx("div",{style:{flex:1,paddingBottom:"80px",overflow:"hidden"},children:n.jsx(vL,{})}),n.jsx(pd,{})]})}console.log(" iOS LIBRARY loaded");function z1e(){var A;const[e,t]=g.useState(""),[r,i]=g.useState("All"),[a,s]=g.useState("All"),[o,l]=g.useState(!1),[c,d]=g.useState(null),u=eo(),{data:f}=he({queryKey:["/api/auth/me"]}),{data:h,isLoading:p}=he({queryKey:["/api/ai/videos"]}),y=g.useCallback(async()=>{l(!0),Ce("medium"),await u.invalidateQueries({queryKey:["/api/ai/videos"]}),await u.invalidateQueries({queryKey:[`/api/ai/saved-videos/${f==null?void 0:f.id}`]}),setTimeout(()=>l(!1),500)},[u,f==null?void 0:f.id]),v=((h==null?void 0:h.videos)||[]).map(E=>({id:E.id,title:E.title,instructor:E.instructorName,youtubeId:E.videoId,thumbnail:E.thumbnailUrl||(E.videoId?`https://img.youtube.com/vi/${E.videoId}/mqdefault.jpg`:void 0),duration:E.duration,technique:E.techniqueType,position:E.positionCategory})),{data:b}=he({queryKey:[`/api/ai/saved-videos/${f==null?void 0:f.id}`],enabled:!!(f!=null&&f.id)}),x=((A=b==null?void 0:b.videos)==null?void 0:A.map(E=>String(E.id)))||[],m=g.useMemo(()=>a==="All"?v:v.filter(E=>E.instructor===a),[v,a]),j=g.useMemo(()=>r==="All"?v:v.filter(E=>(E.technique||"Other")===r),[v,r]),N=g.useMemo(()=>{const E=m,T={};E.forEach(_=>{const R=_.technique||"Other";T[R]=(T[R]||0)+1});const P=Object.entries(T).sort((_,R)=>R[1]-_[1]);return[{name:"All",count:E.length},...P.map(([_,R])=>({name:_,count:R}))]},[m]),w=g.useMemo(()=>{const E=j,T={};E.forEach(_=>{const R=_.instructor||"Unknown";T[R]=(T[R]||0)+1});const P=Object.entries(T).sort((_,R)=>R[1]-_[1]);return[{name:"All",count:E.length},...P.map(([_,R])=>({name:_,count:R}))]},[j]),S=v==null?void 0:v.filter(E=>{const T=!e||E.title.toLowerCase().includes(e.toLowerCase())||E.instructor.toLowerCase().includes(e.toLowerCase()),P=r==="All"||(E.technique||"Other")===r,_=a==="All"||E.instructor===a;return T&&P&&_}),C=E=>{Ce("light"),d({videoId:E.youtubeId,title:E.title,instructor:E.instructor})},k=E=>x.includes(String(E));return n.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"100px"},children:[n.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:700,margin:0},children:"Technique Library"}),n.jsx("button",{onClick:y,disabled:o,"data-testid":"button-refresh-library",style:{background:"transparent",border:"none",padding:"8px",cursor:"pointer",color:o?"#8B5CF6":"#71717A"},children:n.jsx(Fn,{size:22,className:o?"animate-spin":""})})]}),n.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[n.jsx(bn,{size:20,color:"#71717A",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),n.jsx("input",{type:"text",placeholder:"Search techniques or instructors...",value:e,onChange:E=>t(E.target.value),"data-testid":"input-search-library",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"12px",padding:"12px 12px 12px 44px",color:"#FFFFFF",fontSize:"15px",outline:"none"}})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[n.jsxs("div",{style:{position:"relative"},children:[n.jsx("label",{style:{display:"block",fontSize:"12px",color:"#71717A",marginBottom:"6px",fontWeight:600},children:"Techniques"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("select",{value:r,onChange:E=>{Ce("light"),i(E.target.value)},"data-testid":"select-technique-filter",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"10px",padding:"12px 36px 12px 12px",color:"#FFFFFF",fontSize:"14px",outline:"none",appearance:"none",cursor:"pointer"},children:N.map(({name:E,count:T})=>n.jsxs("option",{value:E,"data-testid":`option-technique-${E.toLowerCase().replace(/\s+/g,"-")}`,children:[E," (",T,")"]},E))}),n.jsx(Fa,{size:16,color:"#71717A",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"}})]})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("label",{style:{display:"block",fontSize:"12px",color:"#71717A",marginBottom:"6px",fontWeight:600},children:"Professors"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("select",{value:a,onChange:E=>{Ce("light"),s(E.target.value)},"data-testid":"select-professor-filter",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"10px",padding:"12px 36px 12px 12px",color:"#FFFFFF",fontSize:"14px",outline:"none",appearance:"none",cursor:"pointer"},children:w.map(({name:E,count:T})=>n.jsxs("option",{value:E,"data-testid":`option-professor-${E.toLowerCase().replace(/\s+/g,"-")}`,children:[E," (",T,")"]},E))}),n.jsx(Fa,{size:16,color:"#71717A",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"}})]})]})]})]}),n.jsx("div",{style:{padding:"16px 20px"},children:p?n.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:n.jsx(qe,{className:"animate-spin",size:32,color:"#8B5CF6"})}):(S==null?void 0:S.length)===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#71717A"},children:[n.jsx("p",{children:"No videos found"}),n.jsx("p",{style:{fontSize:"14px",marginTop:"8px"},children:"Try a different search or filter"})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:S==null?void 0:S.map(E=>n.jsxs("button",{onClick:()=>C(E),"data-testid":`video-card-${E.id}`,style:{background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"12px",padding:"12px",display:"flex",gap:"12px",cursor:"pointer",textAlign:"left",width:"100%"},children:[n.jsxs("div",{style:{width:"120px",height:"68px",borderRadius:"8px",background:"#2A2A2E",flexShrink:0,position:"relative",overflow:"hidden"},children:[E.thumbnail||E.youtubeId?n.jsx("img",{src:E.thumbnail||`https://img.youtube.com/vi/${E.youtubeId}/mqdefault.jpg`,alt:E.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):null,n.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.3)"},children:n.jsx(Zn,{size:24,color:"#FFFFFF",fill:"#FFFFFF"})}),E.duration&&n.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0,0,0,0.8)",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",color:"#FFFFFF"},children:E.duration})]}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#FFFFFF",lineHeight:1.3,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:E.title}),n.jsx("div",{style:{fontSize:"13px",color:"#8B5CF6",marginTop:"4px"},children:E.instructor}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px"},children:[E.technique&&n.jsx("span",{style:{fontSize:"11px",color:"#71717A",background:"#2A2A2E",padding:"2px 8px",borderRadius:"4px"},children:E.technique}),k(E.id)&&n.jsx(T1,{size:14,color:"#22C55E"})]})]})]},E.id))})}),n.jsx(pd,{}),c&&n.jsx(pl,{videoId:c.videoId,title:c.title,instructor:c.instructor,onClose:()=>d(null)})]})}console.log(" iOS SAVED loaded");function q1e(){const[e,t]=g.useState(""),[r,i]=g.useState("All"),[a,s]=g.useState("All"),[o,l]=g.useState(!1),[c,d]=g.useState(null),u=eo(),{data:f}=he({queryKey:["/api/auth/me"]}),{data:h,isLoading:p}=he({queryKey:[`/api/ai/saved-videos/${f==null?void 0:f.id}`],enabled:!!(f!=null&&f.id)}),y=(h==null?void 0:h.videos)||[],v=g.useCallback(async()=>{l(!0),Ce("medium"),await u.invalidateQueries({queryKey:[`/api/ai/saved-videos/${f==null?void 0:f.id}`]}),setTimeout(()=>l(!1),500)},[u,f==null?void 0:f.id]),b=C=>{if(!C)return"";const k=C.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);return k?k[1]:""},x=g.useMemo(()=>a==="All"?y:y.filter(C=>C.instructor===a),[y,a]),m=g.useMemo(()=>r==="All"?y:y.filter(C=>(C.techniqueType||C.category||"Other")===r),[y,r]),j=g.useMemo(()=>{const C=x,k={};C.forEach(E=>{const T=E.techniqueType||E.category||"Other";k[T]=(k[T]||0)+1});const A=Object.entries(k).sort((E,T)=>T[1]-E[1]);return[{name:"All",count:C.length},...A.map(([E,T])=>({name:E,count:T}))]},[x]),N=g.useMemo(()=>{const C=m,k={};C.forEach(E=>{const T=E.instructor||"Unknown";k[T]=(k[T]||0)+1});const A=Object.entries(k).sort((E,T)=>T[1]-E[1]);return[{name:"All",count:C.length},...A.map(([E,T])=>({name:E,count:T}))]},[m]),w=y.filter(C=>{var T;const k=!e||C.title.toLowerCase().includes(e.toLowerCase())||((T=C.instructor)==null?void 0:T.toLowerCase().includes(e.toLowerCase())),A=r==="All"||(C.techniqueType||C.category||"Other")===r,E=a==="All"||C.instructor===a;return k&&A&&E}),S=C=>{Ce("light");const k=b(C.videoUrl);k&&d({videoId:k,title:C.title,instructor:C.instructor})};return p?n.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",display:"flex",alignItems:"center",justifyContent:"center"},children:[n.jsx(qe,{className:"animate-spin",size:32,color:"#8B5CF6"}),n.jsx(pd,{})]}):n.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"100px"},children:[n.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:700,margin:0},children:"Saved Videos"}),n.jsx("button",{onClick:v,disabled:o,"data-testid":"button-refresh-saved",style:{background:"transparent",border:"none",padding:"8px",cursor:"pointer",color:o?"#8B5CF6":"#71717A"},children:n.jsx(Fn,{size:22,className:o?"animate-spin":""})})]}),n.jsxs("p",{style:{color:"#71717A",fontSize:"14px",marginTop:"4px",marginBottom:"16px"},children:[y.length," videos saved"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",background:"#1A1A1D",borderRadius:"12px",padding:"12px 16px",border:"1px solid #2A2A2E",marginBottom:"12px"},children:[n.jsx(bn,{size:20,color:"#71717A"}),n.jsx("input",{type:"text",placeholder:"Search saved videos...",value:e,onChange:C=>t(C.target.value),"data-testid":"input-search-saved",style:{flex:1,background:"transparent",border:"none",color:"#FFFFFF",fontSize:"16px",outline:"none"}}),e&&n.jsx("button",{onClick:()=>t(""),"data-testid":"button-clear-search",style:{background:"transparent",border:"none",padding:"4px",cursor:"pointer"},children:n.jsx(Fi,{size:20,color:"#71717A"})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[n.jsxs("div",{style:{position:"relative"},children:[n.jsx("label",{style:{display:"block",fontSize:"12px",color:"#71717A",marginBottom:"6px",fontWeight:600},children:"Techniques"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("select",{value:r,onChange:C=>{Ce("light"),i(C.target.value)},"data-testid":"select-technique-filter",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"10px",padding:"12px 36px 12px 12px",color:"#FFFFFF",fontSize:"14px",outline:"none",appearance:"none",cursor:"pointer"},children:j.map(({name:C,count:k})=>n.jsxs("option",{value:C,"data-testid":`option-technique-${C.toLowerCase().replace(/\s+/g,"-")}`,children:[C," (",k,")"]},C))}),n.jsx(Fa,{size:16,color:"#71717A",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"}})]})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("label",{style:{display:"block",fontSize:"12px",color:"#71717A",marginBottom:"6px",fontWeight:600},children:"Professors"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("select",{value:a,onChange:C=>{Ce("light"),s(C.target.value)},"data-testid":"select-professor-filter",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"10px",padding:"12px 36px 12px 12px",color:"#FFFFFF",fontSize:"14px",outline:"none",appearance:"none",cursor:"pointer"},children:N.map(({name:C,count:k})=>n.jsxs("option",{value:C,"data-testid":`option-professor-${C.toLowerCase().replace(/\s+/g,"-")}`,children:[C," (",k,")"]},C))}),n.jsx(Fa,{size:16,color:"#71717A",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"}})]})]})]})]}),n.jsx("div",{style:{padding:"16px 20px"},children:w.length===0?n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",textAlign:"center"},children:[n.jsx(_i,{size:48,color:"#3F3F46"}),n.jsx("h3",{style:{color:"#71717A",fontSize:"18px",fontWeight:600,marginTop:"16px"},children:e||r!=="All"||a!=="All"?"No videos found":"No saved videos yet"}),n.jsx("p",{style:{color:"#52525B",fontSize:"14px",marginTop:"8px"},children:e||r!=="All"||a!=="All"?"Try a different search or filter":"Save videos from Professor OS to watch later"})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:w.map(C=>{const k=b(C.videoUrl),A=C.thumbnailUrl||(k?`https://img.youtube.com/vi/${k}/mqdefault.jpg`:"");return n.jsxs("button",{onClick:()=>S(C),"data-testid":`video-card-${C.id}`,style:{display:"flex",gap:"12px",background:"#1A1A1D",borderRadius:"16px",padding:"12px",border:"1px solid #2A2A2E",cursor:"pointer",textAlign:"left",width:"100%"},children:[n.jsxs("div",{style:{width:"120px",height:"68px",borderRadius:"8px",overflow:"hidden",flexShrink:0,background:"#2A2A2E",position:"relative"},children:[A?n.jsx("img",{src:A,alt:C.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):n.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Zn,{size:24,color:"#71717A"})}),C.duration&&n.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0,0,0,0.8)",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",color:"#FFFFFF"},children:C.duration})]}),n.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px",minWidth:0},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#FFFFFF",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:C.title}),n.jsx("div",{style:{fontSize:"13px",color:"#8B5CF6"},children:C.instructor}),(C.techniqueType||C.category)&&n.jsx("span",{style:{fontSize:"11px",color:"#71717A",background:"#2A2A2E",padding:"2px 8px",borderRadius:"4px",alignSelf:"flex-start"},children:C.techniqueType||C.category})]})]},C.id)})})}),n.jsx(pd,{}),c&&n.jsx(pl,{videoId:c.videoId,title:c.title,instructor:c.instructor,onClose:()=>d(null)})]})}console.log(" iOS PROFILE loaded");const U1e=["white","blue","purple","brown","black"],V1e=["gi","no-gi","both"],W1e=Array.from({length:201},(e,t)=>100+t),H1e=Array.from({length:91},(e,t)=>45+t),yL=[];for(let e=4;e<=7;e++)for(let t=0;t<12&&(yL.push(`${e}'${t}"`),!(e===7&&t===0));t++);const K1e=Array.from({length:96},(e,t)=>120+t);function G1e(){const[,e]=Ze(),t=eo(),[r,i]=g.useState(null),[a,s]=g.useState(""),o=g.useRef(null),l=g.useRef(null),c=g.useRef(null),{data:d,isLoading:u}=he({queryKey:["/api/auth/me"]}),f=(d==null?void 0:d.unitPreference)==="metric",h=f?H1e:W1e,p=f?K1e.map(k=>`${k} cm`):yL,y=f?"kg":"lbs",v=()=>{if(!(d!=null&&d.weight))return;const k=typeof d.weight=="string"?parseInt(d.weight):d.weight;if(!isNaN(k))return`${k} ${y}`},b=async k=>{Ce("light");let A={unitPreference:k};if(d!=null&&d.weight){const E=typeof d.weight=="string"?parseInt(d.weight):d.weight;if(!isNaN(E)){if(k==="metric"&&!f){const T=Math.round(E*.453592);A.weight=Math.max(45,Math.min(135,T))}else if(k==="imperial"&&f){const T=Math.round(E*2.20462);A.weight=Math.max(100,Math.min(300,T))}}}if(d!=null&&d.height){if(k==="metric"&&!f){const E=d.height.match(/(\d+)'(\d+)"/);if(E){const T=parseInt(E[1]),P=parseInt(E[2]),_=T*12+P,R=Math.round(_*2.54),O=Math.max(120,Math.min(215,R));A.height=`${O} cm`}}else if(k==="imperial"&&f){const E=d.height.match(/(\d+)\s*cm/);if(E){const T=parseInt(E[1]),P=Math.max(122,Math.min(213,T)),_=Math.round(P/2.54),R=Math.floor(_/12),O=_%12,$=Math.max(4,Math.min(7,R)),M=$===7?0:O;A.height=`${$}'${M}"`}}}x.mutate(A)};g.useEffect(()=>{if(r==="weight"&&o.current&&c.current!=="weight"){const k=parseInt(a)||(f?80:180),A=h.indexOf(k);A>=0&&(setTimeout(()=>{o.current&&(o.current.scrollTop=A*40)},50),c.current="weight")}else r!=="weight"&&r!=="height"&&(c.current=null)},[r,f]),g.useEffect(()=>{if(r==="height"&&l.current&&c.current!=="height"){let k=p.indexOf(a);k<0&&(f?k=p.indexOf("178 cm"):k=p.indexOf(`5'10"`)),k>=0&&(setTimeout(()=>{l.current&&(l.current.scrollTop=k*40)},50),c.current="height")}else r!=="weight"&&r!=="height"&&(c.current=null)},[r,f]);const x=Ve({mutationFn:async k=>(await ct("PATCH","/api/auth/profile",k)).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/auth/me"]}),i(null),s(""),Ce("light")}}),m=k=>{Ce("light"),e(k)},j=(k,A)=>{Ce("light"),i(k),s(A||"")},N=()=>{if(!r)return;Ce("medium");let k=a;r==="weight"&&(k=parseInt(a)||0),x.mutate({[r]:k})},w=()=>{Ce("light"),i(null),s("")},S=k=>({white:"#FFFFFF",blue:"#3B82F6",purple:"#8B5CF6",brown:"#92400E",black:"#1F2937"})[(k==null?void 0:k.toLowerCase())||"white"]||"#FFFFFF";if(u)return n.jsx("div",{style:{minHeight:"100vh",background:"#0A0A0B",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(qe,{className:"animate-spin",size:32,color:"#8B5CF6"})});const C=({label:k,value:A,field:E,placeholder:T="Tap to set"})=>n.jsxs("button",{onClick:()=>j(E,String(A||"")),"data-testid":`button-edit-${E}`,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid #2A2A2E",padding:"16px 0",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",textAlign:"left"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"13px",color:"#71717A",marginBottom:"4px"},children:k}),n.jsx("div",{style:{fontSize:"16px",color:A?"#FFFFFF":"#52525B",textTransform:E==="beltLevel"||E==="style"?"capitalize":"none"},"data-testid":`text-${E}`,children:A||T})]}),n.jsx(rn,{size:20,color:"#71717A"})]});return n.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"100px"},children:[n.jsx("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E"},children:n.jsx("h1",{style:{fontSize:"28px",fontWeight:700,margin:0},children:"Profile"})}),n.jsxs("div",{style:{padding:"20px"},children:[n.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"32px"},children:n.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:`linear-gradient(135deg, ${S(d==null?void 0:d.beltLevel)} 0%, #8B5CF6 100%)`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px"},children:n.jsx(ll,{size:36,color:"#FFFFFF"})})}),n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"0 20px",marginBottom:"24px",border:"1px solid #2A2A2E"},children:[n.jsx(C,{label:"Name",value:(d==null?void 0:d.name)||(d==null?void 0:d.displayName)||(d==null?void 0:d.username),field:"name"}),n.jsx(C,{label:"Belt",value:d==null?void 0:d.beltLevel,field:"beltLevel"}),n.jsx(C,{label:"Weight",value:v(),field:"weight",placeholder:"Tap to set"}),n.jsx(C,{label:"Height",value:d==null?void 0:d.height,field:"height",placeholder:"Tap to set"}),n.jsxs("div",{style:{padding:"16px 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},children:"Units"}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>b("imperial"),"data-testid":"button-unit-imperial",style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:500,cursor:"pointer",background:f?"#2A2A2E":"#8B5CF6",color:f?"#71717A":"#FFFFFF"},children:"Imperial"}),n.jsx("button",{onClick:()=>b("metric"),"data-testid":"button-unit-metric",style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:500,cursor:"pointer",background:f?"#8B5CF6":"#2A2A2E",color:f?"#FFFFFF":"#71717A"},children:"Metric"})]})]}),n.jsx("div",{style:{borderBottom:"none"},children:n.jsx(C,{label:"Style",value:d==null?void 0:d.style,field:"style"})})]}),n.jsx("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E"},children:n.jsxs("button",{onClick:()=>m("/ios-settings"),"data-testid":"button-settings",style:{width:"100%",background:"transparent",border:"none",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Sd,{size:20,color:"#71717A"}),n.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"App Settings"})]}),n.jsx(rn,{size:20,color:"#71717A"})]})})]}),r&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-end",zIndex:1e3},onClick:w,"data-testid":"modal-edit-overlay",children:n.jsxs("div",{style:{width:"100%",background:"#1A1A1D",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",padding:"20px",paddingBottom:"max(20px, env(safe-area-inset-bottom))"},onClick:k=>k.stopPropagation(),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[n.jsx("button",{onClick:w,"data-testid":"button-cancel-edit",style:{background:"transparent",border:"none",padding:"8px",cursor:"pointer"},children:n.jsx(Fi,{size:24,color:"#71717A"})}),n.jsxs("span",{style:{fontSize:"17px",fontWeight:600,textTransform:"capitalize"},children:["Edit ",r==="beltLevel"?"Belt":r]}),n.jsx("button",{onClick:N,disabled:x.isPending,"data-testid":"button-save-edit",style:{background:"transparent",border:"none",padding:"8px",cursor:"pointer",opacity:x.isPending?.5:1},children:x.isPending?n.jsx(qe,{className:"animate-spin",size:24,color:"#8B5CF6"}):n.jsx(_r,{size:24,color:"#8B5CF6"})})]}),r==="beltLevel"?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:U1e.map(k=>n.jsxs("button",{onClick:()=>s(k),"data-testid":`option-belt-${k}`,style:{width:"100%",padding:"16px",background:a===k?"#2A2A2E":"transparent",border:a===k?"2px solid #8B5CF6":"1px solid #2A2A2E",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[n.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:S(k),border:k==="white"?"1px solid #52525B":"none"}}),n.jsx("span",{style:{color:"#FFFFFF",fontSize:"16px",textTransform:"capitalize"},children:k})]},k))}):r==="style"?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:V1e.map(k=>n.jsx("button",{onClick:()=>s(k),"data-testid":`option-style-${k}`,style:{width:"100%",padding:"16px",background:a===k?"#2A2A2E":"transparent",border:a===k?"2px solid #8B5CF6":"1px solid #2A2A2E",borderRadius:"12px",cursor:"pointer"},children:n.jsx("span",{style:{color:"#FFFFFF",fontSize:"16px",textTransform:"capitalize"},children:k==="no-gi"?"No-Gi":k==="both"?"Both":"Gi"})},k))}):r==="weight"?n.jsx("div",{children:n.jsxs("div",{style:{height:"200px",overflow:"hidden",position:"relative",background:"#0A0A0B",borderRadius:"12px",border:"1px solid #2A2A2E"},"data-testid":"picker-weight",children:[n.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"40px",transform:"translateY(-50%)",background:"rgba(139, 92, 246, 0.2)",borderTop:"1px solid #8B5CF6",borderBottom:"1px solid #8B5CF6",pointerEvents:"none",zIndex:1}}),n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"80px",background:"linear-gradient(to bottom, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),n.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"80px",background:"linear-gradient(to top, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),n.jsx("div",{ref:o,style:{height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",paddingTop:"80px",paddingBottom:"80px"},onScroll:k=>{const A=k.currentTarget,E=40,T=A.scrollTop,P=Math.round(T/E);if(h[P]!==void 0){const _=String(h[P]);_!==a&&s(_)}},children:h.map(k=>n.jsxs("div",{onClick:()=>s(String(k)),style:{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:a===String(k)?"#FFFFFF":"#71717A",fontWeight:a===String(k)?600:400,scrollSnapAlign:"center",cursor:"pointer"},children:[k," ",y]},k))})]})}):r==="height"?n.jsx("div",{children:n.jsxs("div",{style:{height:"200px",overflow:"hidden",position:"relative",background:"#0A0A0B",borderRadius:"12px",border:"1px solid #2A2A2E"},"data-testid":"picker-height",children:[n.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"40px",transform:"translateY(-50%)",background:"rgba(139, 92, 246, 0.2)",borderTop:"1px solid #8B5CF6",borderBottom:"1px solid #8B5CF6",pointerEvents:"none",zIndex:1}}),n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"80px",background:"linear-gradient(to bottom, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),n.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"80px",background:"linear-gradient(to top, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),n.jsx("div",{ref:l,style:{height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",paddingTop:"80px",paddingBottom:"80px"},onScroll:k=>{const A=k.currentTarget,E=40,T=A.scrollTop,P=Math.round(T/E);if(p[P]!==void 0){const _=p[P];_!==a&&s(_)}},children:p.map(k=>n.jsx("div",{onClick:()=>s(k),style:{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:a===k?"#FFFFFF":"#71717A",fontWeight:a===k?600:400,scrollSnapAlign:"center",cursor:"pointer"},children:k},k))})]})}):n.jsx("input",{type:"text",value:a,onChange:k=>s(k.target.value),placeholder:`Enter ${r}`,autoFocus:!0,"data-testid":`input-${r}`,style:{width:"100%",padding:"16px",background:"#0A0A0B",border:"1px solid #2A2A2E",borderRadius:"12px",color:"#FFFFFF",fontSize:"16px",outline:"none"}})]})}),n.jsx(pd,{})]})}function Y1e(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"N/A"}}function Q1e(){const[,e]=Ze(),t=eo(),r=K1(),[i,a]=g.useState(!0),[s,o]=g.useState(!0),[l,c]=g.useState(!0),[d,u]=g.useState(!0),[f,h]=g.useState(!1),[p,y]=g.useState(!1),[v,b]=g.useState(!1),{data:x}=he({queryKey:["/api/auth/me"]}),m=Ve({mutationFn:async()=>{if(!(await fetch(yn("/api/user/chat-history"),{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete chat history");return{success:!0}},onSuccess:()=>{r.clearMessages(),t.invalidateQueries({queryKey:["/api/chat/history"]}),y(!1),Ce("success")}}),j=Ve({mutationFn:async()=>{if(!(await fetch(yn("/api/user/reset-profile"),{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to reset profile");return{success:!0}},onSuccess:()=>{r.clearMessages(),t.invalidateQueries({queryKey:["/api/auth/me"]}),t.invalidateQueries({queryKey:["/api/chat/history"]}),b(!1),Ce("success"),e("/ios-onboarding")}}),N=()=>{Ce("light"),e("/ios-profile")},w=async()=>{Ce("medium"),h(!0);try{await Nx(),e("/ios-login")}catch(T){console.error("Logout error:",T),h(!1)}},S=T=>{Ce("light"),e(T)},C=async T=>{Ce("light"),Zt()?await qh.open({url:T}):window.open(T,"_blank")},k=(T,P)=>{Ce("light"),T(!P)},A=()=>x!=null&&x.isLifetime?"Lifetime":x!=null&&x.isPro?"Pro":"Free",E=({enabled:T,onToggle:P,testId:_})=>n.jsx("button",{onClick:P,style:{width:"51px",height:"31px",borderRadius:"15.5px",background:T?"#8B5CF6":"#3A3A3C",border:"none",padding:"2px",cursor:"pointer",transition:"background 0.2s ease"},"data-testid":_,children:n.jsx("div",{style:{width:"27px",height:"27px",borderRadius:"50%",background:"#FFFFFF",transition:"transform 0.2s ease",transform:T?"translateX(20px)":"translateX(0)"}})});return n.jsxs("div",{style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"40px"},children:[n.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",display:"flex",alignItems:"center",gap:"16px"},children:[n.jsx("button",{onClick:N,"data-testid":"button-back",style:{background:"transparent",border:"none",padding:"8px",marginLeft:"-8px",cursor:"pointer",display:"flex",alignItems:"center"},children:n.jsx(Wr,{size:24,color:"#8B5CF6"})}),n.jsx("h1",{style:{fontSize:"20px",fontWeight:600,margin:0},children:"Settings"})]}),n.jsxs("div",{style:{padding:"20px"},children:[n.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"Subscription"}),n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:[n.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Rc,{size:20,color:"#71717A"}),n.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Plan"})]}),n.jsx("span",{style:{fontSize:"15px",color:x!=null&&x.isPro||x!=null&&x.isLifetime?"#22C55E":"#FFFFFF",fontWeight:600},"data-testid":"text-plan",children:A()})]}),(x==null?void 0:x.subscriptionEndDate)&&!(x!=null&&x.isLifetime)&&n.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Rc,{size:20,color:"#71717A"}),n.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Renews"})]}),n.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},"data-testid":"text-renews",children:Y1e(x.subscriptionEndDate)})]}),n.jsxs("button",{onClick:()=>C("https://bjjos.app/settings/subscription"),"data-testid":"button-manage-subscription",style:{width:"100%",background:"transparent",border:"none",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Mc,{size:20,color:"#8B5CF6"}),n.jsx("span",{style:{fontSize:"15px",color:"#8B5CF6"},children:"Manage Subscription"})]}),n.jsx(rn,{size:20,color:"#8B5CF6"})]})]}),x&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"Account"}),n.jsx("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:n.jsxs("div",{style:{padding:"14px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(na,{size:18,color:"#71717A"}),n.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Email"})]}),n.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},"data-testid":"text-user-email",children:x.email||"Not set"})]})})]}),n.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"App Settings"}),n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:[n.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(f7,{size:20,color:"#71717A"}),n.jsx("span",{style:{fontSize:"15px"},children:"Push Notifications"})]}),n.jsx(E,{enabled:i,onToggle:()=>k(a,i),testId:"toggle-notifications"})]}),n.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(k7,{size:20,color:"#71717A"}),n.jsx("span",{style:{fontSize:"15px"},children:"Dark Mode"})]}),n.jsx(E,{enabled:s,onToggle:()=>k(o,s),testId:"toggle-dark-mode"})]}),n.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(L7,{size:20,color:"#71717A"}),n.jsx("span",{style:{fontSize:"15px"},children:"Sound Effects"})]}),n.jsx(E,{enabled:l,onToggle:()=>k(c,l),testId:"toggle-sound"})]}),n.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(D7,{size:20,color:"#71717A"}),n.jsx("span",{style:{fontSize:"15px"},children:"Haptic Feedback"})]}),n.jsx(E,{enabled:d,onToggle:()=>k(u,d),testId:"toggle-haptics"})]})]}),n.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"Data & Privacy"}),n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:[n.jsxs("button",{onClick:()=>{Ce("light"),y(!0)},"data-testid":"button-delete-chat",style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid #2A2A2E",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(to,{size:20,color:"#71717A"}),n.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Delete Chat History"})]}),n.jsx("p",{style:{fontSize:"13px",color:"#71717A",margin:"4px 0 0 32px",textAlign:"left"},children:"Removes all messages. Your profile stays intact."})]}),n.jsx(rn,{size:20,color:"#71717A"})]}),n.jsxs("button",{onClick:()=>{Ce("light"),b(!0)},"data-testid":"button-reset-profile",style:{width:"100%",background:"transparent",border:"none",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(E7,{size:20,color:"#71717A"}),n.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Reset Professor OS Memory"})]}),n.jsx("p",{style:{fontSize:"13px",color:"#71717A",margin:"4px 0 0 32px",textAlign:"left"},children:"Start completely fresh. Removes conversations AND profile."})]}),n.jsx(rn,{size:20,color:"#71717A"})]})]}),n.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"Legal & Support"}),n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:[n.jsxs("button",{onClick:()=>S("/ios-terms"),"data-testid":"button-terms",style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid #2A2A2E",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(df,{size:20,color:"#71717A"}),n.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Terms of Service"})]}),n.jsx(rn,{size:20,color:"#71717A"})]}),n.jsxs("button",{onClick:()=>S("/ios-privacy"),"data-testid":"button-privacy",style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid #2A2A2E",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Ri,{size:20,color:"#71717A"}),n.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Privacy Policy"})]}),n.jsx(rn,{size:20,color:"#71717A"})]}),n.jsxs("button",{onClick:()=>S("/ios-help"),"data-testid":"button-help",style:{width:"100%",background:"transparent",border:"none",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(uI,{size:20,color:"#71717A"}),n.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Help & Support"})]}),n.jsx(rn,{size:20,color:"#71717A"})]})]}),n.jsxs("button",{onClick:w,disabled:f,"data-testid":"button-logout",style:{width:"100%",background:"#1A1A1D",border:"1px solid #DC2626",borderRadius:"16px",padding:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:f?"not-allowed":"pointer",opacity:f?.5:1},children:[f?n.jsx(qe,{className:"animate-spin",size:20,color:"#DC2626"}):n.jsx(Nd,{size:20,color:"#DC2626"}),n.jsx("span",{style:{color:"#DC2626",fontSize:"15px",fontWeight:600},children:f?"Logging out...":"Log Out"})]}),n.jsx("p",{style:{marginTop:"16px",padding:"0 8px",fontSize:"13px",color:"#71717A",lineHeight:1.5,textAlign:"center"},children:"BJJ OS v1.0.0"})]}),p&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:()=>y(!1),"data-testid":"modal-delete-overlay",children:n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"24px",maxWidth:"320px",width:"100%"},onClick:T=>T.stopPropagation(),children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px",color:"#FFFFFF"},children:"Delete Chat History?"}),n.jsx("p",{style:{fontSize:"14px",color:"#A1A1AA",lineHeight:1.5,marginBottom:"24px"},children:"This will permanently delete all your conversations with Professor OS. Your profile (belt rank, goals, preferences) will not be affected. This cannot be undone."}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:()=>y(!1),"data-testid":"button-cancel-delete",style:{flex:1,padding:"14px",background:"#2A2A2E",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),n.jsx("button",{onClick:()=>m.mutate(),disabled:m.isPending,"data-testid":"button-confirm-delete",style:{flex:1,padding:"14px",background:"#DC2626",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer",opacity:m.isPending?.5:1},children:m.isPending?"Deleting...":"Delete"})]})]})}),v&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:()=>b(!1),"data-testid":"modal-reset-overlay",children:n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"24px",maxWidth:"320px",width:"100%"},onClick:T=>T.stopPropagation(),children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px",color:"#FFFFFF"},children:"Reset Everything?"}),n.jsx("p",{style:{fontSize:"14px",color:"#A1A1AA",lineHeight:1.5,marginBottom:"24px"},children:"This will delete ALL your data including conversations, your belt rank, goals, training preferences, and everything Professor OS has learned about you. You'll need to set up your profile again. This cannot be undone."}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:()=>b(!1),"data-testid":"button-cancel-reset",style:{flex:1,padding:"14px",background:"#2A2A2E",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),n.jsx("button",{onClick:()=>j.mutate(),disabled:j.isPending,"data-testid":"button-confirm-reset",style:{flex:1,padding:"14px",background:"#DC2626",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer",opacity:j.isPending?.5:1},children:j.isPending?"Resetting...":"Reset Everything"})]})]})})]})}function J1e(){const[,e]=Ze(),t=()=>{Ce("light"),e("/ios-profile")};return n.jsxs("div",{style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF"},children:[n.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",display:"flex",alignItems:"center",gap:"16px",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[n.jsx("button",{onClick:t,"data-testid":"button-back",style:{background:"transparent",border:"none",padding:"8px",marginLeft:"-8px",cursor:"pointer",display:"flex",alignItems:"center"},children:n.jsx(Wr,{size:24,color:"#8B5CF6"})}),n.jsx("h1",{style:{fontSize:"20px",fontWeight:600,margin:0},children:"Terms of Service"})]}),n.jsxs("div",{style:{padding:"20px",paddingBottom:"100px",lineHeight:1.7},children:[n.jsx("p",{style:{color:"#71717A",fontSize:"13px",marginBottom:"24px"},children:"Last updated: December 2024"}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"1. Acceptance of Terms"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:'By accessing and using BJJ OS ("the App"), you accept and agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the App.'}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"2. Description of Service"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"BJJ OS is an AI-powered training platform for Brazilian Jiu-Jitsu practitioners. The App provides personalized coaching advice, video recommendations, and training resources. The App is intended for educational and informational purposes only."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"3. User Accounts"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"You are responsible for maintaining the confidentiality of your account credentials. You agree to provide accurate information when creating your account and to update your information as needed."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"4. Subscription and Payments"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"Some features of BJJ OS require a paid subscription. Subscription fees are billed in advance on a monthly or annual basis. You may cancel your subscription at any time, but no refunds will be provided for partial billing periods."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"5. Disclaimer"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"BJJ OS provides training advice for educational purposes only. The App is not a substitute for professional instruction. Always train under qualified supervision and consult a physician before beginning any exercise program. We are not liable for any injuries resulting from training activities."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"6. Intellectual Property"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"All content in the App, including text, graphics, logos, and software, is the property of BJJ OS or its licensors and is protected by intellectual property laws. You may not reproduce, distribute, or create derivative works without our express permission."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"7. Changes to Terms"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"We reserve the right to modify these Terms at any time. We will notify users of significant changes via the App or email. Continued use of the App after changes constitutes acceptance of the new Terms."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"8. Contact"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"For questions about these Terms, please contact us at support@bjjos.app"})]})]})}function X1e(){const[,e]=Ze(),t=()=>{Ce("light"),e("/ios-profile")};return n.jsxs("div",{style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF"},children:[n.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",display:"flex",alignItems:"center",gap:"16px",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[n.jsx("button",{onClick:t,"data-testid":"button-back",style:{background:"transparent",border:"none",padding:"8px",marginLeft:"-8px",cursor:"pointer",display:"flex",alignItems:"center"},children:n.jsx(Wr,{size:24,color:"#8B5CF6"})}),n.jsx("h1",{style:{fontSize:"20px",fontWeight:600,margin:0},children:"Privacy Policy"})]}),n.jsxs("div",{style:{padding:"20px",paddingBottom:"100px",lineHeight:1.7},children:[n.jsx("p",{style:{color:"#71717A",fontSize:"13px",marginBottom:"24px"},children:"Last updated: December 2024"}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"1. Information We Collect"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"16px"},children:"We collect information you provide directly, including:"}),n.jsxs("ul",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px",paddingLeft:"20px"},children:[n.jsx("li",{style:{marginBottom:"8px"},children:"Account information (email, name, belt level)"}),n.jsx("li",{style:{marginBottom:"8px"},children:"Training preferences and goals"}),n.jsx("li",{style:{marginBottom:"8px"},children:"Chat conversations with Professor OS"}),n.jsx("li",{style:{marginBottom:"8px"},children:"Video viewing history and saved content"})]}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"2. How We Use Your Information"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"16px"},children:"We use your information to:"}),n.jsxs("ul",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px",paddingLeft:"20px"},children:[n.jsx("li",{style:{marginBottom:"8px"},children:"Provide personalized training recommendations"}),n.jsx("li",{style:{marginBottom:"8px"},children:"Improve our AI coaching capabilities"}),n.jsx("li",{style:{marginBottom:"8px"},children:"Send you relevant training content and updates"}),n.jsx("li",{style:{marginBottom:"8px"},children:"Process payments and manage subscriptions"})]}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"3. Data Storage and Security"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"Your data is stored securely using industry-standard encryption. We use secure cloud infrastructure to protect your information. We retain your data for as long as your account is active or as needed to provide services."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"4. AI and Chat Data"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"Conversations with Professor OS are used to improve coaching quality and personalize your experience. Chat data may be analyzed to enhance our AI models. We do not share individual conversations with third parties."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"5. Third-Party Services"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"We use trusted third-party services for payments (Stripe), analytics, and AI processing. These services have their own privacy policies. We only share the minimum data necessary to provide our services."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"6. Your Rights"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"16px"},children:"You have the right to:"}),n.jsxs("ul",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px",paddingLeft:"20px"},children:[n.jsx("li",{style:{marginBottom:"8px"},children:"Access your personal data"}),n.jsx("li",{style:{marginBottom:"8px"},children:"Request correction of inaccurate data"}),n.jsx("li",{style:{marginBottom:"8px"},children:"Delete your account and associated data"}),n.jsx("li",{style:{marginBottom:"8px"},children:"Export your data in a portable format"})]}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"7. Children's Privacy"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"BJJ OS is not intended for children under 13. We do not knowingly collect information from children under 13. If you believe we have collected such information, please contact us immediately."}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"8. Contact Us"}),n.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"For privacy-related inquiries, please contact us at privacy@bjjos.app"})]})]})}const MT=[{question:"How does Professor OS work?",answer:"Professor OS is an AI-powered BJJ coach that uses advanced language models to provide personalized training advice. It learns from your conversations and adapts its recommendations based on your skill level, training goals, and areas you want to improve."},{question:"Can I cancel my subscription anytime?",answer:"Yes! You can cancel your subscription at any time from the Profile page. You'll continue to have access until the end of your current billing period. No refunds are provided for partial periods."},{question:"How do I change my belt level?",answer:"Your belt level can be updated during onboarding or by contacting support. Belt level helps Professor OS tailor advice to your experience level."},{question:"Are the video recommendations from real instructors?",answer:"Yes! We curate technique videos from verified, high-quality BJJ instructors. Our AI analyzes and categorizes thousands of instructional videos to recommend the most relevant content for your training needs."},{question:"Is my conversation data private?",answer:"Your privacy is important to us. Conversations are used to improve your experience and enhance our AI. We do not share individual conversations with third parties. See our Privacy Policy for full details."},{question:"What if I'm injured - can Professor OS help?",answer:"Professor OS can suggest modified training approaches and techniques that may work around certain limitations. However, always consult a medical professional for injury advice. Our AI is for educational purposes only."}];function Z1e(){const[,e]=Ze(),[t,r]=g.useState(null),i=()=>{Ce("light"),e("/ios-profile")},a=s=>{Ce("light"),r(t===s?null:s)};return n.jsxs("div",{style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF"},children:[n.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",display:"flex",alignItems:"center",gap:"16px",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[n.jsx("button",{onClick:i,"data-testid":"button-back",style:{background:"transparent",border:"none",padding:"8px",marginLeft:"-8px",cursor:"pointer",display:"flex",alignItems:"center"},children:n.jsx(Wr,{size:24,color:"#8B5CF6"})}),n.jsx("h1",{style:{fontSize:"20px",fontWeight:600,margin:0},children:"Help & Support"})]}),n.jsxs("div",{style:{padding:"20px",paddingBottom:"100px"},children:[n.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"20px",marginBottom:"24px",border:"1px solid #2A2A2E"},children:[n.jsx("h2",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px"},children:"Contact Support"}),n.jsxs("a",{href:"mailto:support@bjjos.app",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#2A2A2E",borderRadius:"12px",textDecoration:"none",marginBottom:"12px"},"data-testid":"link-email-support",children:[n.jsx(na,{size:20,color:"#8B5CF6"}),n.jsxs("div",{children:[n.jsx("div",{style:{color:"#FFFFFF",fontSize:"15px",fontWeight:500},children:"Email Support"}),n.jsx("div",{style:{color:"#71717A",fontSize:"13px"},children:"support@bjjos.app"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#2A2A2E",borderRadius:"12px"},children:[n.jsx(ff,{size:20,color:"#8B5CF6"}),n.jsxs("div",{children:[n.jsx("div",{style:{color:"#FFFFFF",fontSize:"15px",fontWeight:500},children:"Response Time"}),n.jsx("div",{style:{color:"#71717A",fontSize:"13px"},children:"Usually within 24 hours"})]})]})]}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px"},children:"Frequently Asked Questions"}),n.jsx("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E"},children:MT.map((s,o)=>n.jsxs("div",{style:{borderBottom:o<MT.length-1?"1px solid #2A2A2E":"none"},children:[n.jsxs("button",{onClick:()=>a(o),"data-testid":`faq-${o}`,style:{width:"100%",padding:"16px 20px",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",textAlign:"left"},children:[n.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px",fontWeight:500,flex:1,paddingRight:"12px"},children:s.question}),t===o?n.jsx(O1,{size:20,color:"#71717A"}):n.jsx(Fa,{size:20,color:"#71717A"})]}),t===o&&n.jsx("div",{style:{padding:"0 20px 16px 20px",color:"#A1A1AA",fontSize:"14px",lineHeight:1.6},children:s.answer})]},o))}),n.jsx("p",{style:{marginTop:"24px",textAlign:"center",color:"#71717A",fontSize:"13px"},children:"Can't find what you're looking for? Email us anytime."})]})]})}function eNe(){const[,e]=Ze(),t=localStorage.getItem("mobileUserId")!==null;return g.useEffect(()=>{Zt()&&e(t?"/ios-chat":"/ios-login")},[t,e]),Zt()?null:n.jsx(cV,{})}function tNe(){const[e,t]=g.useState(!Zt()),r=localStorage.getItem("mobileUserId")!==null;return g.useEffect(()=>{async function i(){Zt()&&(await O4(),t(!0))}i()},[]),g.useEffect(()=>{XU()},[]),e?n.jsx(W8,{client:Te,children:n.jsx(JU,{children:n.jsx(W1,{children:n.jsxs(YU,{defaultTheme:"dark",children:[n.jsxs(k8,{children:[n.jsx(Ne,{path:"/",component:eNe}),n.jsx(Ne,{path:"/pricing",component:dV}),n.jsx(Ne,{path:"/success",component:Mk}),n.jsx(Ne,{path:"/terms",component:uV}),n.jsx(Ne,{path:"/privacy",component:fV}),n.jsx(Ne,{path:"/refund",component:hV}),n.jsx(Ne,{path:"/login",component:EV}),n.jsx(Ne,{path:"/signup",component:PV}),n.jsx(Ne,{path:"/email-signup",component:R9}),n.jsx(Ne,{path:"/email-login",component:$9}),n.jsx(Ne,{path:"/ios-login",component:D9}),n.jsx(Ne,{path:"/ios-forgot-password",component:L9}),n.jsx(Ne,{path:"/ios-verify-reset",component:B9}),n.jsx(Ne,{path:"/ios-reset-password",component:z9}),n.jsx(Ne,{path:"/forgot-password",component:F9}),n.jsx(Ne,{path:"/lifetime-signup",component:q9}),n.jsx(Ne,{path:"/welcome/lifetime",component:V9}),n.jsx(Ne,{path:"/auth/magic",component:pH}),n.jsx(Ne,{path:"/ios-home",component:L1e}),n.jsx(Ne,{path:"/ios-chat",component:B1e}),n.jsx(Ne,{path:"/ios-library",component:z1e}),n.jsx(Ne,{path:"/ios-saved",component:q1e}),n.jsx(Ne,{path:"/ios-profile",component:G1e}),n.jsx(Ne,{path:"/ios-settings",component:Q1e}),n.jsx(Ne,{path:"/ios-terms",component:J1e}),n.jsx(Ne,{path:"/ios-privacy",component:X1e}),n.jsx(Ne,{path:"/ios-help",component:Z1e}),n.jsx(Ne,{path:"/ios-onboarding",component:rs}),n.jsx(Ne,{path:"/chat",component:Lwe}),n.jsx(Ne,{path:"/dashboard",children:()=>{const[,i]=Ze();return g.useEffect(()=>{i("/chat")},[i]),null}}),n.jsx(Ne,{path:"/settings",component:p1e}),n.jsx(Ne,{path:"/settings/profile",component:l1e}),n.jsx(Ne,{path:"/settings/security",component:c1e}),n.jsx(Ne,{path:"/settings/subscription",component:d1e}),n.jsx(Ne,{path:"/settings/referrals",component:u1e}),n.jsx(Ne,{path:"/mobile-settings",component:RT}),n.jsx(Ne,{path:"/progress",component:g1e}),n.jsx(Ne,{path:"/saved-videos",component:TT}),n.jsx(Ne,{path:"/saved",component:TT}),n.jsx(Ne,{path:"/library",component:v1e}),n.jsx(Ne,{path:"/onboarding",component:mH}),n.jsx(Ne,{path:"/onboarding/full",component:W9}),n.jsx(Ne,{path:"/payment",component:x1e}),n.jsx(Ne,{path:"/payment/success",component:Mk}),n.jsx(Ne,{path:"/theme-settings",component:D1e}),n.jsx(Ne,{path:"/mobile-onboarding",component:rs}),n.jsx(Ne,{path:"/app",children:()=>Zt()?null:r?n.jsx(IT,{}):n.jsx(rs,{})}),n.jsx(Ne,{path:"/app/chat",children:()=>Zt()?null:r?n.jsx(IT,{}):n.jsx(rs,{})}),n.jsx(Ne,{path:"/app/saved",children:r?n.jsx(T1e,{}):n.jsx(rs,{})}),n.jsx(Ne,{path:"/app/progress",children:r?n.jsx(O1e,{}):n.jsx(rs,{})}),n.jsx(Ne,{path:"/app/settings",children:r?n.jsx(RT,{}):n.jsx(rs,{})}),n.jsx(Ne,{path:"/app/profile",children:r?n.jsx(R1e,{}):n.jsx(rs,{})}),n.jsx(Ne,{path:"/launch-admin",component:PH}),n.jsx(Ne,{path:"/admin/login",component:SH}),n.jsx(Ne,{path:"/admin",component:NC}),n.jsx(Ne,{path:"/admin/dashboard",component:NC}),n.jsx(Ne,{path:"/admin/chat",component:Pwe}),n.jsx(Ne,{path:"/admin/command-center",component:Twe}),n.jsx(Ne,{path:"/admin/videos",component:x0e}),n.jsx(Ne,{path:"/admin/users",component:MH}),n.jsx(Ne,{path:"/admin/users-management",component:Owe}),n.jsx(Ne,{path:"/admin/referrals",component:Qbe}),n.jsx(Ne,{path:"/admin/lifetime",component:xT}),n.jsx(Ne,{path:"/admin/lifetime-access",component:xT}),n.jsx(Ne,{path:"/admin/feedback",component:y0e}),n.jsx(Ne,{path:"/admin/meta",component:Mje}),n.jsx(Ne,{path:"/admin/instructors",component:twe}),n.jsx(Ne,{path:"/admin/partnerships",component:rwe}),n.jsx(Ne,{path:"/admin/chains",component:ywe}),n.jsx(Ne,{path:"/admin/logs",component:bwe}),n.jsx(Ne,{path:"/admin/schedules",component:jwe}),n.jsx(Ne,{path:"/admin/techniques",component:wwe}),n.jsx(Ne,{path:"/admin/flagged-accounts",component:Nwe}),n.jsx(Ne,{path:"/admin/instructor-priority",component:Swe}),n.jsx(Ne,{path:"/admin/activity",component:kwe}),n.jsx(Ne,{path:"/admin/magic-links",component:$je}),n.jsx(Ne,{path:"/admin/auto-curation",component:Cwe}),n.jsx(Ne,{path:"/admin/dev-os",component:Rwe}),n.jsx(Ne,{path:"/admin/analytics",component:Awe}),n.jsx(Ne,{path:"/admin/emails",component:_we}),n.jsx(Ne,{component:Mwe})]}),n.jsx(jq,{})]})})})}):n.jsxs("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center",children:[n.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-8 w-auto mb-4"}),n.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})]})}a4(document.getElementById("root")).render(n.jsx(tNe,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("SW registered:",e)}).catch(e=>{console.log("SW registration failed:",e)})});export{$u as I,Fu as N,S1 as W};

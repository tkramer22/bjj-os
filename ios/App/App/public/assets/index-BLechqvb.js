var p2=e=>{throw TypeError(e)};var Sy=(e,t,n)=>t.has(e)||p2("Cannot "+n);var K=(e,t,n)=>(Sy(e,t,"read from private field"),n?n.call(e):t.get(e)),Ye=(e,t,n)=>t.has(e)?p2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Me=(e,t,n,s)=>(Sy(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ut=(e,t,n)=>(Sy(e,t,"access private method"),n);var vm=(e,t,n,s)=>({set _(i){Me(e,t,i,n)},get _(){return K(e,t,s)}});function t6(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CO={exports:{}},Dx={},AO={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh=Symbol.for("react.element"),n6=Symbol.for("react.portal"),r6=Symbol.for("react.fragment"),s6=Symbol.for("react.strict_mode"),i6=Symbol.for("react.profiler"),a6=Symbol.for("react.provider"),o6=Symbol.for("react.context"),l6=Symbol.for("react.forward_ref"),c6=Symbol.for("react.suspense"),d6=Symbol.for("react.memo"),u6=Symbol.for("react.lazy"),g2=Symbol.iterator;function f6(e){return e===null||typeof e!="object"?null:(e=g2&&e[g2]||e["@@iterator"],typeof e=="function"?e:null)}var PO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EO=Object.assign,TO={};function Dd(e,t,n){this.props=e,this.context=t,this.refs=TO,this.updater=n||PO}Dd.prototype.isReactComponent={};Dd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function OO(){}OO.prototype=Dd.prototype;function c1(e,t,n){this.props=e,this.context=t,this.refs=TO,this.updater=n||PO}var d1=c1.prototype=new OO;d1.constructor=c1;EO(d1,Dd.prototype);d1.isPureReactComponent=!0;var x2=Array.isArray,_O=Object.prototype.hasOwnProperty,u1={current:null},IO={key:!0,ref:!0,__self:!0,__source:!0};function RO(e,t,n){var s,i={},a=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)_O.call(t,s)&&!IO.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:Uh,type:e,key:a,ref:o,props:i,_owner:u1.current}}function h6(e,t){return{$$typeof:Uh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function f1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uh}function m6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var v2=/\/+/g;function ky(e,t){return typeof e=="object"&&e!==null&&e.key!=null?m6(""+e.key):t.toString(36)}function fp(e,t,n,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Uh:case n6:o=!0}}if(o)return o=e,i=i(o),e=s===""?"."+ky(o,0):s,x2(i)?(n="",e!=null&&(n=e.replace(v2,"$&/")+"/"),fp(i,t,n,"",function(d){return d})):i!=null&&(f1(i)&&(i=h6(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(v2,"$&/")+"/")+e)),t.push(i)),1;if(o=0,s=s===""?".":s+":",x2(e))for(var l=0;l<e.length;l++){a=e[l];var c=s+ky(a,l);o+=fp(a,t,n,c,i)}else if(c=f6(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=s+ky(a,l++),o+=fp(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function bm(e,t,n){if(e==null)return e;var s=[],i=0;return fp(e,s,"","",function(a){return t.call(n,a,i++)}),s}function p6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Sr={current:null},hp={transition:null},g6={ReactCurrentDispatcher:Sr,ReactCurrentBatchConfig:hp,ReactCurrentOwner:u1};function MO(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:bm,forEach:function(e,t,n){bm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bm(e,function(){t++}),t},toArray:function(e){return bm(e,function(t){return t})||[]},only:function(e){if(!f1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gt.Component=Dd;gt.Fragment=r6;gt.Profiler=i6;gt.PureComponent=c1;gt.StrictMode=s6;gt.Suspense=c6;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g6;gt.act=MO;gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=EO({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=u1.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_O.call(t,c)&&!IO.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Uh,type:e.type,key:i,ref:a,props:s,_owner:o}};gt.createContext=function(e){return e={$$typeof:o6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:a6,_context:e},e.Consumer=e};gt.createElement=RO;gt.createFactory=function(e){var t=RO.bind(null,e);return t.type=e,t};gt.createRef=function(){return{current:null}};gt.forwardRef=function(e){return{$$typeof:l6,render:e}};gt.isValidElement=f1;gt.lazy=function(e){return{$$typeof:u6,_payload:{_status:-1,_result:e},_init:p6}};gt.memo=function(e,t){return{$$typeof:d6,type:e,compare:t===void 0?null:t}};gt.startTransition=function(e){var t=hp.transition;hp.transition={};try{e()}finally{hp.transition=t}};gt.unstable_act=MO;gt.useCallback=function(e,t){return Sr.current.useCallback(e,t)};gt.useContext=function(e){return Sr.current.useContext(e)};gt.useDebugValue=function(){};gt.useDeferredValue=function(e){return Sr.current.useDeferredValue(e)};gt.useEffect=function(e,t){return Sr.current.useEffect(e,t)};gt.useId=function(){return Sr.current.useId()};gt.useImperativeHandle=function(e,t,n){return Sr.current.useImperativeHandle(e,t,n)};gt.useInsertionEffect=function(e,t){return Sr.current.useInsertionEffect(e,t)};gt.useLayoutEffect=function(e,t){return Sr.current.useLayoutEffect(e,t)};gt.useMemo=function(e,t){return Sr.current.useMemo(e,t)};gt.useReducer=function(e,t,n){return Sr.current.useReducer(e,t,n)};gt.useRef=function(e){return Sr.current.useRef(e)};gt.useState=function(e){return Sr.current.useState(e)};gt.useSyncExternalStore=function(e,t,n){return Sr.current.useSyncExternalStore(e,t,n)};gt.useTransition=function(){return Sr.current.useTransition()};gt.version="18.3.1";AO.exports=gt;var x=AO.exports;const q=Dt(x),FO=t6({__proto__:null,default:q},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x6=x,v6=Symbol.for("react.element"),y6=Symbol.for("react.fragment"),b6=Object.prototype.hasOwnProperty,j6=x6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w6={key:!0,ref:!0,__self:!0,__source:!0};function $O(e,t,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)b6.call(t,s)&&!w6.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:v6,type:e,key:a,ref:o,props:i,_owner:j6.current}}Dx.Fragment=y6;Dx.jsx=$O;Dx.jsxs=$O;CO.exports=Dx;var r=CO.exports,DO={exports:{}},Xr={},LO={exports:{}},BO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,B){var H=I.length;I.push(B);e:for(;0<H;){var Q=H-1>>>1,D=I[Q];if(0<i(D,B))I[Q]=B,I[H]=D,H=Q;else break e}}function n(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var B=I[0],H=I.pop();if(H!==B){I[0]=H;e:for(var Q=0,D=I.length,te=D>>>1;Q<te;){var V=2*(Q+1)-1,J=I[V],me=V+1,de=I[me];if(0>i(J,H))me<D&&0>i(de,J)?(I[Q]=de,I[me]=H,Q=me):(I[Q]=J,I[V]=H,Q=V);else if(me<D&&0>i(de,H))I[Q]=de,I[me]=H,Q=me;else break e}}return B}function i(I,B){var H=I.sortIndex-B.sortIndex;return H!==0?H:I.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,h=3,p=!1,v=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(I){for(var B=n(d);B!==null;){if(B.callback===null)s(d);else if(B.startTime<=I)s(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(d)}}function N(I){if(g=!1,b(I),!v)if(n(c)!==null)v=!0,C(w);else{var B=n(d);B!==null&&R(N,B.startTime-I)}}function w(I,B){v=!1,g&&(g=!1,j(P),P=-1),p=!0;var H=h;try{for(b(B),f=n(c);f!==null&&(!(f.expirationTime>B)||I&&!F());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,h=f.priorityLevel;var D=Q(f.expirationTime<=B);B=e.unstable_now(),typeof D=="function"?f.callback=D:f===n(c)&&s(c),b(B)}else s(c);f=n(c)}if(f!==null)var te=!0;else{var V=n(d);V!==null&&R(N,V.startTime-B),te=!1}return te}finally{f=null,h=H,p=!1}}var S=!1,k=null,P=-1,E=5,_=-1;function F(){return!(e.unstable_now()-_<E)}function A(){if(k!==null){var I=e.unstable_now();_=I;var B=!0;try{B=k(!0,I)}finally{B?T():(S=!1,k=null)}}else S=!1}var T;if(typeof m=="function")T=function(){m(A)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,O=M.port2;M.port1.onmessage=A,T=function(){O.postMessage(null)}}else T=function(){y(A,0)};function C(I){k=I,S||(S=!0,T())}function R(I,B){P=y(function(){I(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,C(w))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var H=h;h=B;try{return I()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,B){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var H=h;h=I;try{return B()}finally{h=H}},e.unstable_scheduleCallback=function(I,B,H){var Q=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Q+H:Q):H=Q,I){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=H+D,I={id:u++,callback:B,priorityLevel:I,startTime:H,expirationTime:D,sortIndex:-1},H>Q?(I.sortIndex=H,t(d,I),n(c)===null&&I===n(d)&&(g?(j(P),P=-1):g=!0,R(N,H-Q))):(I.sortIndex=D,t(c,I),v||p||(v=!0,C(w))),I},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(I){var B=h;return function(){var H=h;h=B;try{return I.apply(this,arguments)}finally{h=H}}}})(BO);LO.exports=BO;var N6=LO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S6=x,Yr=N6;function we(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zO=new Set,xf={};function El(e,t){Kc(e,t),Kc(e+"Capture",t)}function Kc(e,t){for(xf[e]=t,e=0;e<t.length;e++)zO.add(t[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qb=Object.prototype.hasOwnProperty,k6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y2={},b2={};function C6(e){return Qb.call(b2,e)?!0:Qb.call(y2,e)?!1:k6.test(e)?b2[e]=!0:(y2[e]=!0,!1)}function A6(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P6(e,t,n,s){if(t===null||typeof t>"u"||A6(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kr(e,t,n,s,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Jn[e]=new kr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Jn[t]=new kr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Jn[e]=new kr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Jn[e]=new kr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Jn[e]=new kr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Jn[e]=new kr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Jn[e]=new kr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Jn[e]=new kr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Jn[e]=new kr(e,5,!1,e.toLowerCase(),null,!1,!1)});var h1=/[\-:]([a-z])/g;function m1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(h1,m1);Jn[t]=new kr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(h1,m1);Jn[t]=new kr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(h1,m1);Jn[t]=new kr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Jn[e]=new kr(e,1,!1,e.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Jn[e]=new kr(e,1,!1,e.toLowerCase(),null,!0,!0)});function p1(e,t,n,s){var i=Jn.hasOwnProperty(t)?Jn[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(P6(t,n,i,s)&&(n=null),s||i===null?C6(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,s=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var xa=S6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jm=Symbol.for("react.element"),rc=Symbol.for("react.portal"),sc=Symbol.for("react.fragment"),g1=Symbol.for("react.strict_mode"),Jb=Symbol.for("react.profiler"),qO=Symbol.for("react.provider"),UO=Symbol.for("react.context"),x1=Symbol.for("react.forward_ref"),Xb=Symbol.for("react.suspense"),Zb=Symbol.for("react.suspense_list"),v1=Symbol.for("react.memo"),_a=Symbol.for("react.lazy"),VO=Symbol.for("react.offscreen"),j2=Symbol.iterator;function du(e){return e===null||typeof e!="object"?null:(e=j2&&e[j2]||e["@@iterator"],typeof e=="function"?e:null)}var cn=Object.assign,Cy;function $u(e){if(Cy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Cy=t&&t[1]||""}return`
`+Cy+e}var Ay=!1;function Py(e,t){if(!e||Ay)return"";Ay=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ay=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$u(e):""}function E6(e){switch(e.tag){case 5:return $u(e.type);case 16:return $u("Lazy");case 13:return $u("Suspense");case 19:return $u("SuspenseList");case 0:case 2:case 15:return e=Py(e.type,!1),e;case 11:return e=Py(e.type.render,!1),e;case 1:return e=Py(e.type,!0),e;default:return""}}function e0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sc:return"Fragment";case rc:return"Portal";case Jb:return"Profiler";case g1:return"StrictMode";case Xb:return"Suspense";case Zb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case UO:return(e.displayName||"Context")+".Consumer";case qO:return(e._context.displayName||"Context")+".Provider";case x1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case v1:return t=e.displayName||null,t!==null?t:e0(e.type)||"Memo";case _a:t=e._payload,e=e._init;try{return e0(e(t))}catch{}}return null}function T6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return e0(t);case 8:return t===g1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ho(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function WO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function O6(e){var t=WO(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wm(e){e._valueTracker||(e._valueTracker=O6(e))}function HO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=WO(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Dp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function t0(e,t){var n=t.checked;return cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function w2(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ho(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function KO(e,t){t=t.checked,t!=null&&p1(e,"checked",t,!1)}function n0(e,t){KO(e,t);var n=ho(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?r0(e,t.type,n):t.hasOwnProperty("defaultValue")&&r0(e,t.type,ho(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function N2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function r0(e,t,n){(t!=="number"||Dp(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Du=Array.isArray;function vc(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ho(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function s0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(we(91));return cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function S2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(we(92));if(Du(n)){if(1<n.length)throw Error(we(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ho(n)}}function GO(e,t){var n=ho(t.value),s=ho(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function k2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function YO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?YO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Nm,QO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Nm=Nm||document.createElement("div"),Nm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_6=["Webkit","ms","Moz","O"];Object.keys(Hu).forEach(function(e){_6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hu[t]=Hu[e]})});function JO(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hu.hasOwnProperty(e)&&Hu[e]?(""+t).trim():t+"px"}function XO(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=JO(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}var I6=cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a0(e,t){if(t){if(I6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(we(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(we(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(we(61))}if(t.style!=null&&typeof t.style!="object")throw Error(we(62))}}function o0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l0=null;function y1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var c0=null,yc=null,bc=null;function C2(e){if(e=Hh(e)){if(typeof c0!="function")throw Error(we(280));var t=e.stateNode;t&&(t=Ux(t),c0(e.stateNode,e.type,t))}}function ZO(e){yc?bc?bc.push(e):bc=[e]:yc=e}function e_(){if(yc){var e=yc,t=bc;if(bc=yc=null,C2(e),t)for(e=0;e<t.length;e++)C2(t[e])}}function t_(e,t){return e(t)}function n_(){}var Ey=!1;function r_(e,t,n){if(Ey)return e(t,n);Ey=!0;try{return t_(e,t,n)}finally{Ey=!1,(yc!==null||bc!==null)&&(n_(),e_())}}function yf(e,t){var n=e.stateNode;if(n===null)return null;var s=Ux(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(we(231,t,typeof n));return n}var d0=!1;if(ia)try{var uu={};Object.defineProperty(uu,"passive",{get:function(){d0=!0}}),window.addEventListener("test",uu,uu),window.removeEventListener("test",uu,uu)}catch{d0=!1}function R6(e,t,n,s,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var Ku=!1,Lp=null,Bp=!1,u0=null,M6={onError:function(e){Ku=!0,Lp=e}};function F6(e,t,n,s,i,a,o,l,c){Ku=!1,Lp=null,R6.apply(M6,arguments)}function $6(e,t,n,s,i,a,o,l,c){if(F6.apply(this,arguments),Ku){if(Ku){var d=Lp;Ku=!1,Lp=null}else throw Error(we(198));Bp||(Bp=!0,u0=d)}}function Tl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function A2(e){if(Tl(e)!==e)throw Error(we(188))}function D6(e){var t=e.alternate;if(!t){if(t=Tl(e),t===null)throw Error(we(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return A2(i),e;if(a===s)return A2(i),t;a=a.sibling}throw Error(we(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o)throw Error(we(189))}}if(n.alternate!==s)throw Error(we(190))}if(n.tag!==3)throw Error(we(188));return n.stateNode.current===n?e:t}function i_(e){return e=D6(e),e!==null?a_(e):null}function a_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=a_(e);if(t!==null)return t;e=e.sibling}return null}var o_=Yr.unstable_scheduleCallback,P2=Yr.unstable_cancelCallback,L6=Yr.unstable_shouldYield,B6=Yr.unstable_requestPaint,vn=Yr.unstable_now,z6=Yr.unstable_getCurrentPriorityLevel,b1=Yr.unstable_ImmediatePriority,l_=Yr.unstable_UserBlockingPriority,zp=Yr.unstable_NormalPriority,q6=Yr.unstable_LowPriority,c_=Yr.unstable_IdlePriority,Lx=null,hi=null;function U6(e){if(hi&&typeof hi.onCommitFiberRoot=="function")try{hi.onCommitFiberRoot(Lx,e,void 0,(e.current.flags&128)===128)}catch{}}var Hs=Math.clz32?Math.clz32:H6,V6=Math.log,W6=Math.LN2;function H6(e){return e>>>=0,e===0?32:31-(V6(e)/W6|0)|0}var Sm=64,km=4194304;function Lu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qp(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?s=Lu(l):(a&=o,a!==0&&(s=Lu(a)))}else o=n&~i,o!==0?s=Lu(o):a!==0&&(s=Lu(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Hs(t),i=1<<n,s|=e[n],t&=~i;return s}function K6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G6(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Hs(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&s)&&(i[o]=K6(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function f0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function d_(){var e=Sm;return Sm<<=1,!(Sm&4194240)&&(Sm=64),e}function Ty(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Hs(t),e[t]=n}function Y6(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Hs(n),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~a}}function j1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Hs(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var Rt=0;function u_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var f_,w1,h_,m_,p_,h0=!1,Cm=[],Za=null,eo=null,to=null,bf=new Map,jf=new Map,Fa=[],Q6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E2(e,t){switch(e){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":bf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jf.delete(t.pointerId)}}function fu(e,t,n,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Hh(t),t!==null&&w1(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function J6(e,t,n,s,i){switch(t){case"focusin":return Za=fu(Za,e,t,n,s,i),!0;case"dragenter":return eo=fu(eo,e,t,n,s,i),!0;case"mouseover":return to=fu(to,e,t,n,s,i),!0;case"pointerover":var a=i.pointerId;return bf.set(a,fu(bf.get(a)||null,e,t,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,jf.set(a,fu(jf.get(a)||null,e,t,n,s,i)),!0}return!1}function g_(e){var t=Wo(e.target);if(t!==null){var n=Tl(t);if(n!==null){if(t=n.tag,t===13){if(t=s_(n),t!==null){e.blockedOn=t,p_(e.priority,function(){h_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=m0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);l0=s,n.target.dispatchEvent(s),l0=null}else return t=Hh(n),t!==null&&w1(t),e.blockedOn=n,!1;t.shift()}return!0}function T2(e,t,n){mp(e)&&n.delete(t)}function X6(){h0=!1,Za!==null&&mp(Za)&&(Za=null),eo!==null&&mp(eo)&&(eo=null),to!==null&&mp(to)&&(to=null),bf.forEach(T2),jf.forEach(T2)}function hu(e,t){e.blockedOn===t&&(e.blockedOn=null,h0||(h0=!0,Yr.unstable_scheduleCallback(Yr.unstable_NormalPriority,X6)))}function wf(e){function t(i){return hu(i,e)}if(0<Cm.length){hu(Cm[0],e);for(var n=1;n<Cm.length;n++){var s=Cm[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Za!==null&&hu(Za,e),eo!==null&&hu(eo,e),to!==null&&hu(to,e),bf.forEach(t),jf.forEach(t),n=0;n<Fa.length;n++)s=Fa[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Fa.length&&(n=Fa[0],n.blockedOn===null);)g_(n),n.blockedOn===null&&Fa.shift()}var jc=xa.ReactCurrentBatchConfig,Up=!0;function Z6(e,t,n,s){var i=Rt,a=jc.transition;jc.transition=null;try{Rt=1,N1(e,t,n,s)}finally{Rt=i,jc.transition=a}}function eB(e,t,n,s){var i=Rt,a=jc.transition;jc.transition=null;try{Rt=4,N1(e,t,n,s)}finally{Rt=i,jc.transition=a}}function N1(e,t,n,s){if(Up){var i=m0(e,t,n,s);if(i===null)By(e,t,s,Vp,n),E2(e,s);else if(J6(i,e,t,n,s))s.stopPropagation();else if(E2(e,s),t&4&&-1<Q6.indexOf(e)){for(;i!==null;){var a=Hh(i);if(a!==null&&f_(a),a=m0(e,t,n,s),a===null&&By(e,t,s,Vp,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else By(e,t,s,null,n)}}var Vp=null;function m0(e,t,n,s){if(Vp=null,e=y1(s),e=Wo(e),e!==null)if(t=Tl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=s_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vp=e,null}function x_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z6()){case b1:return 1;case l_:return 4;case zp:case q6:return 16;case c_:return 536870912;default:return 16}default:return 16}}var Ya=null,S1=null,pp=null;function v_(){if(pp)return pp;var e,t=S1,n=t.length,s,i="value"in Ya?Ya.value:Ya.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===i[a-s];s++);return pp=i.slice(e,1<s?1-s:void 0)}function gp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Am(){return!0}function O2(){return!1}function Zr(e){function t(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Am:O2,this.isPropagationStopped=O2,this}return cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Am)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Am)},persist:function(){},isPersistent:Am}),t}var Ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},k1=Zr(Ld),Wh=cn({},Ld,{view:0,detail:0}),tB=Zr(Wh),Oy,_y,mu,Bx=cn({},Wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mu&&(mu&&e.type==="mousemove"?(Oy=e.screenX-mu.screenX,_y=e.screenY-mu.screenY):_y=Oy=0,mu=e),Oy)},movementY:function(e){return"movementY"in e?e.movementY:_y}}),_2=Zr(Bx),nB=cn({},Bx,{dataTransfer:0}),rB=Zr(nB),sB=cn({},Wh,{relatedTarget:0}),Iy=Zr(sB),iB=cn({},Ld,{animationName:0,elapsedTime:0,pseudoElement:0}),aB=Zr(iB),oB=cn({},Ld,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lB=Zr(oB),cB=cn({},Ld,{data:0}),I2=Zr(cB),dB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hB(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fB[e])?!!t[e]:!1}function C1(){return hB}var mB=cn({},Wh,{key:function(e){if(e.key){var t=dB[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uB[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C1,charCode:function(e){return e.type==="keypress"?gp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pB=Zr(mB),gB=cn({},Bx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R2=Zr(gB),xB=cn({},Wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C1}),vB=Zr(xB),yB=cn({},Ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),bB=Zr(yB),jB=cn({},Bx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wB=Zr(jB),NB=[9,13,27,32],A1=ia&&"CompositionEvent"in window,Gu=null;ia&&"documentMode"in document&&(Gu=document.documentMode);var SB=ia&&"TextEvent"in window&&!Gu,y_=ia&&(!A1||Gu&&8<Gu&&11>=Gu),M2=" ",F2=!1;function b_(e,t){switch(e){case"keyup":return NB.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ic=!1;function kB(e,t){switch(e){case"compositionend":return j_(t);case"keypress":return t.which!==32?null:(F2=!0,M2);case"textInput":return e=t.data,e===M2&&F2?null:e;default:return null}}function CB(e,t){if(ic)return e==="compositionend"||!A1&&b_(e,t)?(e=v_(),pp=S1=Ya=null,ic=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return y_&&t.locale!=="ko"?null:t.data;default:return null}}var AB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AB[e.type]:t==="textarea"}function w_(e,t,n,s){ZO(s),t=Wp(t,"onChange"),0<t.length&&(n=new k1("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Yu=null,Nf=null;function PB(e){I_(e,0)}function zx(e){var t=lc(e);if(HO(t))return e}function EB(e,t){if(e==="change")return t}var N_=!1;if(ia){var Ry;if(ia){var My="oninput"in document;if(!My){var D2=document.createElement("div");D2.setAttribute("oninput","return;"),My=typeof D2.oninput=="function"}Ry=My}else Ry=!1;N_=Ry&&(!document.documentMode||9<document.documentMode)}function L2(){Yu&&(Yu.detachEvent("onpropertychange",S_),Nf=Yu=null)}function S_(e){if(e.propertyName==="value"&&zx(Nf)){var t=[];w_(t,Nf,e,y1(e)),r_(PB,t)}}function TB(e,t,n){e==="focusin"?(L2(),Yu=t,Nf=n,Yu.attachEvent("onpropertychange",S_)):e==="focusout"&&L2()}function OB(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zx(Nf)}function _B(e,t){if(e==="click")return zx(t)}function IB(e,t){if(e==="input"||e==="change")return zx(t)}function RB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ys=typeof Object.is=="function"?Object.is:RB;function Sf(e,t){if(Ys(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Qb.call(t,i)||!Ys(e[i],t[i]))return!1}return!0}function B2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function z2(e,t){var n=B2(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B2(n)}}function k_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?k_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function C_(){for(var e=window,t=Dp();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Dp(e.document)}return t}function P1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function MB(e){var t=C_(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&k_(n.ownerDocument.documentElement,n)){if(s!==null&&P1(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=z2(n,a);var o=z2(n,s);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FB=ia&&"documentMode"in document&&11>=document.documentMode,ac=null,p0=null,Qu=null,g0=!1;function q2(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;g0||ac==null||ac!==Dp(s)||(s=ac,"selectionStart"in s&&P1(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qu&&Sf(Qu,s)||(Qu=s,s=Wp(p0,"onSelect"),0<s.length&&(t=new k1("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ac)))}function Pm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var oc={animationend:Pm("Animation","AnimationEnd"),animationiteration:Pm("Animation","AnimationIteration"),animationstart:Pm("Animation","AnimationStart"),transitionend:Pm("Transition","TransitionEnd")},Fy={},A_={};ia&&(A_=document.createElement("div").style,"AnimationEvent"in window||(delete oc.animationend.animation,delete oc.animationiteration.animation,delete oc.animationstart.animation),"TransitionEvent"in window||delete oc.transitionend.transition);function qx(e){if(Fy[e])return Fy[e];if(!oc[e])return e;var t=oc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in A_)return Fy[e]=t[n];return e}var P_=qx("animationend"),E_=qx("animationiteration"),T_=qx("animationstart"),O_=qx("transitionend"),__=new Map,U2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wo(e,t){__.set(e,t),El(t,[e])}for(var $y=0;$y<U2.length;$y++){var Dy=U2[$y],$B=Dy.toLowerCase(),DB=Dy[0].toUpperCase()+Dy.slice(1);wo($B,"on"+DB)}wo(P_,"onAnimationEnd");wo(E_,"onAnimationIteration");wo(T_,"onAnimationStart");wo("dblclick","onDoubleClick");wo("focusin","onFocus");wo("focusout","onBlur");wo(O_,"onTransitionEnd");Kc("onMouseEnter",["mouseout","mouseover"]);Kc("onMouseLeave",["mouseout","mouseover"]);Kc("onPointerEnter",["pointerout","pointerover"]);Kc("onPointerLeave",["pointerout","pointerover"]);El("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));El("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));El("onBeforeInput",["compositionend","keypress","textInput","paste"]);El("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));El("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));El("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bu));function V2(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,$6(s,t,void 0,e),e.currentTarget=null}function I_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;V2(i,l,d),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;V2(i,l,d),a=c}}}if(Bp)throw e=u0,Bp=!1,u0=null,e}function Ht(e,t){var n=t[j0];n===void 0&&(n=t[j0]=new Set);var s=e+"__bubble";n.has(s)||(R_(t,e,2,!1),n.add(s))}function Ly(e,t,n){var s=0;t&&(s|=4),R_(n,e,s,t)}var Em="_reactListening"+Math.random().toString(36).slice(2);function kf(e){if(!e[Em]){e[Em]=!0,zO.forEach(function(n){n!=="selectionchange"&&(LB.has(n)||Ly(n,!1,e),Ly(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Em]||(t[Em]=!0,Ly("selectionchange",!1,t))}}function R_(e,t,n,s){switch(x_(t)){case 1:var i=Z6;break;case 4:i=eB;break;default:i=N1}n=i.bind(null,t,n,e),i=void 0,!d0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function By(e,t,n,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Wo(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}r_(function(){var d=a,u=y1(n),f=[];e:{var h=__.get(e);if(h!==void 0){var p=k1,v=e;switch(e){case"keypress":if(gp(n)===0)break e;case"keydown":case"keyup":p=pB;break;case"focusin":v="focus",p=Iy;break;case"focusout":v="blur",p=Iy;break;case"beforeblur":case"afterblur":p=Iy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=rB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=vB;break;case P_:case E_:case T_:p=aB;break;case O_:p=bB;break;case"scroll":p=tB;break;case"wheel":p=wB;break;case"copy":case"cut":case"paste":p=lB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=R2}var g=(t&4)!==0,y=!g&&e==="scroll",j=g?h!==null?h+"Capture":null:h;g=[];for(var m=d,b;m!==null;){b=m;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,j!==null&&(N=yf(m,j),N!=null&&g.push(Cf(m,N,b)))),y)break;m=m.return}0<g.length&&(h=new p(h,v,null,n,u),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==l0&&(v=n.relatedTarget||n.fromElement)&&(Wo(v)||v[aa]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=d,v=v?Wo(v):null,v!==null&&(y=Tl(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=d),p!==v)){if(g=_2,N="onMouseLeave",j="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=R2,N="onPointerLeave",j="onPointerEnter",m="pointer"),y=p==null?h:lc(p),b=v==null?h:lc(v),h=new g(N,m+"leave",p,n,u),h.target=y,h.relatedTarget=b,N=null,Wo(u)===d&&(g=new g(j,m+"enter",v,n,u),g.target=b,g.relatedTarget=y,N=g),y=N,p&&v)t:{for(g=p,j=v,m=0,b=g;b;b=ql(b))m++;for(b=0,N=j;N;N=ql(N))b++;for(;0<m-b;)g=ql(g),m--;for(;0<b-m;)j=ql(j),b--;for(;m--;){if(g===j||j!==null&&g===j.alternate)break t;g=ql(g),j=ql(j)}g=null}else g=null;p!==null&&W2(f,h,p,g,!1),v!==null&&y!==null&&W2(f,y,v,g,!0)}}e:{if(h=d?lc(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=EB;else if($2(h))if(N_)w=IB;else{w=OB;var S=TB}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=_B);if(w&&(w=w(e,d))){w_(f,w,n,u);break e}S&&S(e,h,d),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&r0(h,"number",h.value)}switch(S=d?lc(d):window,e){case"focusin":($2(S)||S.contentEditable==="true")&&(ac=S,p0=d,Qu=null);break;case"focusout":Qu=p0=ac=null;break;case"mousedown":g0=!0;break;case"contextmenu":case"mouseup":case"dragend":g0=!1,q2(f,n,u);break;case"selectionchange":if(FB)break;case"keydown":case"keyup":q2(f,n,u)}var k;if(A1)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ic?b_(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(y_&&n.locale!=="ko"&&(ic||P!=="onCompositionStart"?P==="onCompositionEnd"&&ic&&(k=v_()):(Ya=u,S1="value"in Ya?Ya.value:Ya.textContent,ic=!0)),S=Wp(d,P),0<S.length&&(P=new I2(P,e,null,n,u),f.push({event:P,listeners:S}),k?P.data=k:(k=j_(n),k!==null&&(P.data=k)))),(k=SB?kB(e,n):CB(e,n))&&(d=Wp(d,"onBeforeInput"),0<d.length&&(u=new I2("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:d}),u.data=k))}I_(f,t)})}function Cf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wp(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=yf(e,n),a!=null&&s.unshift(Cf(e,a,i)),a=yf(e,t),a!=null&&s.push(Cf(e,a,i))),e=e.return}return s}function ql(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function W2(e,t,n,s,i){for(var a=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,i?(c=yf(n,a),c!=null&&o.unshift(Cf(n,c,l))):i||(c=yf(n,a),c!=null&&o.push(Cf(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var BB=/\r\n?/g,zB=/\u0000|\uFFFD/g;function H2(e){return(typeof e=="string"?e:""+e).replace(BB,`
`).replace(zB,"")}function Tm(e,t,n){if(t=H2(t),H2(e)!==t&&n)throw Error(we(425))}function Hp(){}var x0=null,v0=null;function y0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var b0=typeof setTimeout=="function"?setTimeout:void 0,qB=typeof clearTimeout=="function"?clearTimeout:void 0,K2=typeof Promise=="function"?Promise:void 0,UB=typeof queueMicrotask=="function"?queueMicrotask:typeof K2<"u"?function(e){return K2.resolve(null).then(e).catch(VB)}:b0;function VB(e){setTimeout(function(){throw e})}function zy(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){e.removeChild(i),wf(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);wf(t)}function no(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function G2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Bd=Math.random().toString(36).slice(2),oi="__reactFiber$"+Bd,Af="__reactProps$"+Bd,aa="__reactContainer$"+Bd,j0="__reactEvents$"+Bd,WB="__reactListeners$"+Bd,HB="__reactHandles$"+Bd;function Wo(e){var t=e[oi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[aa]||n[oi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=G2(e);e!==null;){if(n=e[oi])return n;e=G2(e)}return t}e=n,n=e.parentNode}return null}function Hh(e){return e=e[oi]||e[aa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function lc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(we(33))}function Ux(e){return e[Af]||null}var w0=[],cc=-1;function No(e){return{current:e}}function Yt(e){0>cc||(e.current=w0[cc],w0[cc]=null,cc--)}function Vt(e,t){cc++,w0[cc]=e.current,e.current=t}var mo={},cr=No(mo),Or=No(!1),fl=mo;function Gc(e,t){var n=e.type.contextTypes;if(!n)return mo;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function _r(e){return e=e.childContextTypes,e!=null}function Kp(){Yt(Or),Yt(cr)}function Y2(e,t,n){if(cr.current!==mo)throw Error(we(168));Vt(cr,t),Vt(Or,n)}function M_(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(we(108,T6(e)||"Unknown",i));return cn({},n,s)}function Gp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mo,fl=cr.current,Vt(cr,e),Vt(Or,Or.current),!0}function Q2(e,t,n){var s=e.stateNode;if(!s)throw Error(we(169));n?(e=M_(e,t,fl),s.__reactInternalMemoizedMergedChildContext=e,Yt(Or),Yt(cr),Vt(cr,e)):Yt(Or),Vt(Or,n)}var Di=null,Vx=!1,qy=!1;function F_(e){Di===null?Di=[e]:Di.push(e)}function KB(e){Vx=!0,F_(e)}function So(){if(!qy&&Di!==null){qy=!0;var e=0,t=Rt;try{var n=Di;for(Rt=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Di=null,Vx=!1}catch(i){throw Di!==null&&(Di=Di.slice(e+1)),o_(b1,So),i}finally{Rt=t,qy=!1}}return null}var dc=[],uc=0,Yp=null,Qp=0,as=[],os=0,hl=null,zi=1,qi="";function Do(e,t){dc[uc++]=Qp,dc[uc++]=Yp,Yp=e,Qp=t}function $_(e,t,n){as[os++]=zi,as[os++]=qi,as[os++]=hl,hl=e;var s=zi;e=qi;var i=32-Hs(s)-1;s&=~(1<<i),n+=1;var a=32-Hs(t)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,zi=1<<32-Hs(t)+i|n<<i|s,qi=a+e}else zi=1<<a|n<<i|s,qi=e}function E1(e){e.return!==null&&(Do(e,1),$_(e,1,0))}function T1(e){for(;e===Yp;)Yp=dc[--uc],dc[uc]=null,Qp=dc[--uc],dc[uc]=null;for(;e===hl;)hl=as[--os],as[os]=null,qi=as[--os],as[os]=null,zi=as[--os],as[os]=null}var Hr=null,Wr=null,Xt=!1,Fs=null;function D_(e,t){var n=ls(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function J2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hr=e,Wr=no(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hr=e,Wr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hl!==null?{id:zi,overflow:qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ls(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Hr=e,Wr=null,!0):!1;default:return!1}}function N0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function S0(e){if(Xt){var t=Wr;if(t){var n=t;if(!J2(e,t)){if(N0(e))throw Error(we(418));t=no(n.nextSibling);var s=Hr;t&&J2(e,t)?D_(s,n):(e.flags=e.flags&-4097|2,Xt=!1,Hr=e)}}else{if(N0(e))throw Error(we(418));e.flags=e.flags&-4097|2,Xt=!1,Hr=e}}}function X2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hr=e}function Om(e){if(e!==Hr)return!1;if(!Xt)return X2(e),Xt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!y0(e.type,e.memoizedProps)),t&&(t=Wr)){if(N0(e))throw L_(),Error(we(418));for(;t;)D_(e,t),t=no(t.nextSibling)}if(X2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(we(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wr=no(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wr=null}}else Wr=Hr?no(e.stateNode.nextSibling):null;return!0}function L_(){for(var e=Wr;e;)e=no(e.nextSibling)}function Yc(){Wr=Hr=null,Xt=!1}function O1(e){Fs===null?Fs=[e]:Fs.push(e)}var GB=xa.ReactCurrentBatchConfig;function pu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(we(309));var s=n.stateNode}if(!s)throw Error(we(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(we(284));if(!n._owner)throw Error(we(290,e))}return e}function _m(e,t){throw e=Object.prototype.toString.call(t),Error(we(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Z2(e){var t=e._init;return t(e._payload)}function B_(e){function t(j,m){if(e){var b=j.deletions;b===null?(j.deletions=[m],j.flags|=16):b.push(m)}}function n(j,m){if(!e)return null;for(;m!==null;)t(j,m),m=m.sibling;return null}function s(j,m){for(j=new Map;m!==null;)m.key!==null?j.set(m.key,m):j.set(m.index,m),m=m.sibling;return j}function i(j,m){return j=ao(j,m),j.index=0,j.sibling=null,j}function a(j,m,b){return j.index=b,e?(b=j.alternate,b!==null?(b=b.index,b<m?(j.flags|=2,m):b):(j.flags|=2,m)):(j.flags|=1048576,m)}function o(j){return e&&j.alternate===null&&(j.flags|=2),j}function l(j,m,b,N){return m===null||m.tag!==6?(m=Yy(b,j.mode,N),m.return=j,m):(m=i(m,b),m.return=j,m)}function c(j,m,b,N){var w=b.type;return w===sc?u(j,m,b.props.children,N,b.key):m!==null&&(m.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_a&&Z2(w)===m.type)?(N=i(m,b.props),N.ref=pu(j,m,b),N.return=j,N):(N=Np(b.type,b.key,b.props,null,j.mode,N),N.ref=pu(j,m,b),N.return=j,N)}function d(j,m,b,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=Qy(b,j.mode,N),m.return=j,m):(m=i(m,b.children||[]),m.return=j,m)}function u(j,m,b,N,w){return m===null||m.tag!==7?(m=ol(b,j.mode,N,w),m.return=j,m):(m=i(m,b),m.return=j,m)}function f(j,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Yy(""+m,j.mode,b),m.return=j,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case jm:return b=Np(m.type,m.key,m.props,null,j.mode,b),b.ref=pu(j,null,m),b.return=j,b;case rc:return m=Qy(m,j.mode,b),m.return=j,m;case _a:var N=m._init;return f(j,N(m._payload),b)}if(Du(m)||du(m))return m=ol(m,j.mode,b,null),m.return=j,m;_m(j,m)}return null}function h(j,m,b,N){var w=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:l(j,m,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jm:return b.key===w?c(j,m,b,N):null;case rc:return b.key===w?d(j,m,b,N):null;case _a:return w=b._init,h(j,m,w(b._payload),N)}if(Du(b)||du(b))return w!==null?null:u(j,m,b,N,null);_m(j,b)}return null}function p(j,m,b,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return j=j.get(b)||null,l(m,j,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case jm:return j=j.get(N.key===null?b:N.key)||null,c(m,j,N,w);case rc:return j=j.get(N.key===null?b:N.key)||null,d(m,j,N,w);case _a:var S=N._init;return p(j,m,b,S(N._payload),w)}if(Du(N)||du(N))return j=j.get(b)||null,u(m,j,N,w,null);_m(m,N)}return null}function v(j,m,b,N){for(var w=null,S=null,k=m,P=m=0,E=null;k!==null&&P<b.length;P++){k.index>P?(E=k,k=null):E=k.sibling;var _=h(j,k,b[P],N);if(_===null){k===null&&(k=E);break}e&&k&&_.alternate===null&&t(j,k),m=a(_,m,P),S===null?w=_:S.sibling=_,S=_,k=E}if(P===b.length)return n(j,k),Xt&&Do(j,P),w;if(k===null){for(;P<b.length;P++)k=f(j,b[P],N),k!==null&&(m=a(k,m,P),S===null?w=k:S.sibling=k,S=k);return Xt&&Do(j,P),w}for(k=s(j,k);P<b.length;P++)E=p(k,j,P,b[P],N),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?P:E.key),m=a(E,m,P),S===null?w=E:S.sibling=E,S=E);return e&&k.forEach(function(F){return t(j,F)}),Xt&&Do(j,P),w}function g(j,m,b,N){var w=du(b);if(typeof w!="function")throw Error(we(150));if(b=w.call(b),b==null)throw Error(we(151));for(var S=w=null,k=m,P=m=0,E=null,_=b.next();k!==null&&!_.done;P++,_=b.next()){k.index>P?(E=k,k=null):E=k.sibling;var F=h(j,k,_.value,N);if(F===null){k===null&&(k=E);break}e&&k&&F.alternate===null&&t(j,k),m=a(F,m,P),S===null?w=F:S.sibling=F,S=F,k=E}if(_.done)return n(j,k),Xt&&Do(j,P),w;if(k===null){for(;!_.done;P++,_=b.next())_=f(j,_.value,N),_!==null&&(m=a(_,m,P),S===null?w=_:S.sibling=_,S=_);return Xt&&Do(j,P),w}for(k=s(j,k);!_.done;P++,_=b.next())_=p(k,j,P,_.value,N),_!==null&&(e&&_.alternate!==null&&k.delete(_.key===null?P:_.key),m=a(_,m,P),S===null?w=_:S.sibling=_,S=_);return e&&k.forEach(function(A){return t(j,A)}),Xt&&Do(j,P),w}function y(j,m,b,N){if(typeof b=="object"&&b!==null&&b.type===sc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case jm:e:{for(var w=b.key,S=m;S!==null;){if(S.key===w){if(w=b.type,w===sc){if(S.tag===7){n(j,S.sibling),m=i(S,b.props.children),m.return=j,j=m;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_a&&Z2(w)===S.type){n(j,S.sibling),m=i(S,b.props),m.ref=pu(j,S,b),m.return=j,j=m;break e}n(j,S);break}else t(j,S);S=S.sibling}b.type===sc?(m=ol(b.props.children,j.mode,N,b.key),m.return=j,j=m):(N=Np(b.type,b.key,b.props,null,j.mode,N),N.ref=pu(j,m,b),N.return=j,j=N)}return o(j);case rc:e:{for(S=b.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){n(j,m.sibling),m=i(m,b.children||[]),m.return=j,j=m;break e}else{n(j,m);break}else t(j,m);m=m.sibling}m=Qy(b,j.mode,N),m.return=j,j=m}return o(j);case _a:return S=b._init,y(j,m,S(b._payload),N)}if(Du(b))return v(j,m,b,N);if(du(b))return g(j,m,b,N);_m(j,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(n(j,m.sibling),m=i(m,b),m.return=j,j=m):(n(j,m),m=Yy(b,j.mode,N),m.return=j,j=m),o(j)):n(j,m)}return y}var Qc=B_(!0),z_=B_(!1),Jp=No(null),Xp=null,fc=null,_1=null;function I1(){_1=fc=Xp=null}function R1(e){var t=Jp.current;Yt(Jp),e._currentValue=t}function k0(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function wc(e,t){Xp=e,_1=fc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Er=!0),e.firstContext=null)}function hs(e){var t=e._currentValue;if(_1!==e)if(e={context:e,memoizedValue:t,next:null},fc===null){if(Xp===null)throw Error(we(308));fc=e,Xp.dependencies={lanes:0,firstContext:e}}else fc=fc.next=e;return t}var Ho=null;function M1(e){Ho===null?Ho=[e]:Ho.push(e)}function q_(e,t,n,s){var i=t.interleaved;return i===null?(n.next=n,M1(t)):(n.next=i.next,i.next=n),t.interleaved=n,oa(e,s)}function oa(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ia=!1;function F1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ro(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,St&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,oa(e,n)}return i=s.interleaved,i===null?(t.next=t,M1(s)):(t.next=i.next,i.next=t),s.interleaved=t,oa(e,n)}function xp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,j1(e,n)}}function ek(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zp(e,t,n,s){var i=e.updateQueue;Ia=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;o=0,u=d=c=null,l=a;do{var h=l.lane,p=l.eventTime;if((s&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,g=l;switch(h=t,p=n,g.tag){case 1:if(v=g.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=cn({},f,h);break e;case 2:Ia=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=f):u=u.next=p,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=f),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);pl|=o,e.lanes=o,e.memoizedState=f}}function tk(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(we(191,i));i.call(s)}}}var Kh={},mi=No(Kh),Pf=No(Kh),Ef=No(Kh);function Ko(e){if(e===Kh)throw Error(we(174));return e}function $1(e,t){switch(Vt(Ef,t),Vt(Pf,e),Vt(mi,Kh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:i0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=i0(t,e)}Yt(mi),Vt(mi,t)}function Jc(){Yt(mi),Yt(Pf),Yt(Ef)}function V_(e){Ko(Ef.current);var t=Ko(mi.current),n=i0(t,e.type);t!==n&&(Vt(Pf,e),Vt(mi,n))}function D1(e){Pf.current===e&&(Yt(mi),Yt(Pf))}var rn=No(0);function eg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Uy=[];function L1(){for(var e=0;e<Uy.length;e++)Uy[e]._workInProgressVersionPrimary=null;Uy.length=0}var vp=xa.ReactCurrentDispatcher,Vy=xa.ReactCurrentBatchConfig,ml=0,ln=null,Tn=null,Dn=null,tg=!1,Ju=!1,Tf=0,YB=0;function er(){throw Error(we(321))}function B1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ys(e[n],t[n]))return!1;return!0}function z1(e,t,n,s,i,a){if(ml=a,ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vp.current=e===null||e.memoizedState===null?ZB:e8,e=n(s,i),Ju){a=0;do{if(Ju=!1,Tf=0,25<=a)throw Error(we(301));a+=1,Dn=Tn=null,t.updateQueue=null,vp.current=t8,e=n(s,i)}while(Ju)}if(vp.current=ng,t=Tn!==null&&Tn.next!==null,ml=0,Dn=Tn=ln=null,tg=!1,t)throw Error(we(300));return e}function q1(){var e=Tf!==0;return Tf=0,e}function ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?ln.memoizedState=Dn=e:Dn=Dn.next=e,Dn}function ms(){if(Tn===null){var e=ln.alternate;e=e!==null?e.memoizedState:null}else e=Tn.next;var t=Dn===null?ln.memoizedState:Dn.next;if(t!==null)Dn=t,Tn=e;else{if(e===null)throw Error(we(310));Tn=e,e={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Dn===null?ln.memoizedState=Dn=e:Dn=Dn.next=e}return Dn}function Of(e,t){return typeof t=="function"?t(e):t}function Wy(e){var t=ms(),n=t.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=e;var s=Tn,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((ml&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=s):c=c.next=f,ln.lanes|=u,pl|=u}d=d.next}while(d!==null&&d!==a);c===null?o=s:c.next=l,Ys(s,t.memoizedState)||(Er=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){i=e;do a=i.lane,ln.lanes|=a,pl|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Hy(e){var t=ms(),n=t.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Ys(a,t.memoizedState)||(Er=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function W_(){}function H_(e,t){var n=ln,s=ms(),i=t(),a=!Ys(s.memoizedState,i);if(a&&(s.memoizedState=i,Er=!0),s=s.queue,U1(Y_.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||Dn!==null&&Dn.memoizedState.tag&1){if(n.flags|=2048,_f(9,G_.bind(null,n,s,i,t),void 0,null),Ln===null)throw Error(we(349));ml&30||K_(n,t,i)}return i}function K_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function G_(e,t,n,s){t.value=n,t.getSnapshot=s,Q_(t)&&J_(e)}function Y_(e,t,n){return n(function(){Q_(t)&&J_(e)})}function Q_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ys(e,n)}catch{return!0}}function J_(e){var t=oa(e,1);t!==null&&Ks(t,e,1,-1)}function nk(e){var t=ni();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Of,lastRenderedState:e},t.queue=e,e=e.dispatch=XB.bind(null,ln,e),[t.memoizedState,e]}function _f(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function X_(){return ms().memoizedState}function yp(e,t,n,s){var i=ni();ln.flags|=e,i.memoizedState=_f(1|t,n,void 0,s===void 0?null:s)}function Wx(e,t,n,s){var i=ms();s=s===void 0?null:s;var a=void 0;if(Tn!==null){var o=Tn.memoizedState;if(a=o.destroy,s!==null&&B1(s,o.deps)){i.memoizedState=_f(t,n,a,s);return}}ln.flags|=e,i.memoizedState=_f(1|t,n,a,s)}function rk(e,t){return yp(8390656,8,e,t)}function U1(e,t){return Wx(2048,8,e,t)}function Z_(e,t){return Wx(4,2,e,t)}function e4(e,t){return Wx(4,4,e,t)}function t4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function n4(e,t,n){return n=n!=null?n.concat([e]):null,Wx(4,4,t4.bind(null,t,e),n)}function V1(){}function r4(e,t){var n=ms();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&B1(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function s4(e,t){var n=ms();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&B1(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function i4(e,t,n){return ml&21?(Ys(n,t)||(n=d_(),ln.lanes|=n,pl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Er=!0),e.memoizedState=n)}function QB(e,t){var n=Rt;Rt=n!==0&&4>n?n:4,e(!0);var s=Vy.transition;Vy.transition={};try{e(!1),t()}finally{Rt=n,Vy.transition=s}}function a4(){return ms().memoizedState}function JB(e,t,n){var s=io(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},o4(e))l4(t,n);else if(n=q_(e,t,n,s),n!==null){var i=yr();Ks(n,e,s,i),c4(n,t,s)}}function XB(e,t,n){var s=io(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(o4(e))l4(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,Ys(l,o)){var c=t.interleaved;c===null?(i.next=i,M1(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=q_(e,t,i,s),n!==null&&(i=yr(),Ks(n,e,s,i),c4(n,t,s))}}function o4(e){var t=e.alternate;return e===ln||t!==null&&t===ln}function l4(e,t){Ju=tg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function c4(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,j1(e,n)}}var ng={readContext:hs,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},ZB={readContext:hs,useCallback:function(e,t){return ni().memoizedState=[e,t===void 0?null:t],e},useContext:hs,useEffect:rk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yp(4194308,4,t4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yp(4194308,4,e,t)},useInsertionEffect:function(e,t){return yp(4,2,e,t)},useMemo:function(e,t){var n=ni();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ni();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=JB.bind(null,ln,e),[s.memoizedState,e]},useRef:function(e){var t=ni();return e={current:e},t.memoizedState=e},useState:nk,useDebugValue:V1,useDeferredValue:function(e){return ni().memoizedState=e},useTransition:function(){var e=nk(!1),t=e[0];return e=QB.bind(null,e[1]),ni().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ln,i=ni();if(Xt){if(n===void 0)throw Error(we(407));n=n()}else{if(n=t(),Ln===null)throw Error(we(349));ml&30||K_(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,rk(Y_.bind(null,s,a,e),[e]),s.flags|=2048,_f(9,G_.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=ni(),t=Ln.identifierPrefix;if(Xt){var n=qi,s=zi;n=(s&~(1<<32-Hs(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Tf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=YB++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},e8={readContext:hs,useCallback:r4,useContext:hs,useEffect:U1,useImperativeHandle:n4,useInsertionEffect:Z_,useLayoutEffect:e4,useMemo:s4,useReducer:Wy,useRef:X_,useState:function(){return Wy(Of)},useDebugValue:V1,useDeferredValue:function(e){var t=ms();return i4(t,Tn.memoizedState,e)},useTransition:function(){var e=Wy(Of)[0],t=ms().memoizedState;return[e,t]},useMutableSource:W_,useSyncExternalStore:H_,useId:a4,unstable_isNewReconciler:!1},t8={readContext:hs,useCallback:r4,useContext:hs,useEffect:U1,useImperativeHandle:n4,useInsertionEffect:Z_,useLayoutEffect:e4,useMemo:s4,useReducer:Hy,useRef:X_,useState:function(){return Hy(Of)},useDebugValue:V1,useDeferredValue:function(e){var t=ms();return Tn===null?t.memoizedState=e:i4(t,Tn.memoizedState,e)},useTransition:function(){var e=Hy(Of)[0],t=ms().memoizedState;return[e,t]},useMutableSource:W_,useSyncExternalStore:H_,useId:a4,unstable_isNewReconciler:!1};function Es(e,t){if(e&&e.defaultProps){t=cn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function C0(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:cn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hx={isMounted:function(e){return(e=e._reactInternals)?Tl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=yr(),i=io(e),a=Gi(s,i);a.payload=t,n!=null&&(a.callback=n),t=ro(e,a,i),t!==null&&(Ks(t,e,i,s),xp(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=yr(),i=io(e),a=Gi(s,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ro(e,a,i),t!==null&&(Ks(t,e,i,s),xp(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yr(),s=io(e),i=Gi(n,s);i.tag=2,t!=null&&(i.callback=t),t=ro(e,i,s),t!==null&&(Ks(t,e,s,n),xp(t,e,s))}};function sk(e,t,n,s,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,o):t.prototype&&t.prototype.isPureReactComponent?!Sf(n,s)||!Sf(i,a):!0}function d4(e,t,n){var s=!1,i=mo,a=t.contextType;return typeof a=="object"&&a!==null?a=hs(a):(i=_r(t)?fl:cr.current,s=t.contextTypes,a=(s=s!=null)?Gc(e,i):mo),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hx,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ik(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Hx.enqueueReplaceState(t,t.state,null)}function A0(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},F1(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=hs(a):(a=_r(t)?fl:cr.current,i.context=Gc(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(C0(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Hx.enqueueReplaceState(i,i.state,null),Zp(e,n,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Xc(e,t){try{var n="",s=t;do n+=E6(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Ky(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function P0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var n8=typeof WeakMap=="function"?WeakMap:Map;function u4(e,t,n){n=Gi(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){sg||(sg=!0,D0=s),P0(e,t)},n}function f4(e,t,n){n=Gi(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){P0(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){P0(e,t),typeof s!="function"&&(so===null?so=new Set([this]):so.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function ak(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new n8;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=g8.bind(null,e,t,n),t.then(e,e))}function ok(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lk(e,t,n,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gi(-1,1),t.tag=2,ro(n,t,1))),n.lanes|=1),e)}var r8=xa.ReactCurrentOwner,Er=!1;function gr(e,t,n,s){t.child=e===null?z_(t,null,n,s):Qc(t,e.child,n,s)}function ck(e,t,n,s,i){n=n.render;var a=t.ref;return wc(t,i),s=z1(e,t,n,s,a,i),n=q1(),e!==null&&!Er?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,la(e,t,i)):(Xt&&n&&E1(t),t.flags|=1,gr(e,t,s,i),t.child)}function dk(e,t,n,s,i){if(e===null){var a=n.type;return typeof a=="function"&&!X1(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,h4(e,t,a,s,i)):(e=Np(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Sf,n(o,s)&&e.ref===t.ref)return la(e,t,i)}return t.flags|=1,e=ao(a,s),e.ref=t.ref,e.return=t,t.child=e}function h4(e,t,n,s,i){if(e!==null){var a=e.memoizedProps;if(Sf(a,s)&&e.ref===t.ref)if(Er=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(Er=!0);else return t.lanes=e.lanes,la(e,t,i)}return E0(e,t,n,s,i)}function m4(e,t,n){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(mc,Br),Br|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(mc,Br),Br|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Vt(mc,Br),Br|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,Vt(mc,Br),Br|=s;return gr(e,t,i,n),t.child}function p4(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function E0(e,t,n,s,i){var a=_r(n)?fl:cr.current;return a=Gc(t,a),wc(t,i),n=z1(e,t,n,s,a,i),s=q1(),e!==null&&!Er?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,la(e,t,i)):(Xt&&s&&E1(t),t.flags|=1,gr(e,t,n,i),t.child)}function uk(e,t,n,s,i){if(_r(n)){var a=!0;Gp(t)}else a=!1;if(wc(t,i),t.stateNode===null)bp(e,t),d4(t,n,s),A0(t,n,s,i),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=hs(d):(d=_r(n)?fl:cr.current,d=Gc(t,d));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&ik(t,o,s,d),Ia=!1;var h=t.memoizedState;o.state=h,Zp(t,s,o,i),c=t.memoizedState,l!==s||h!==c||Or.current||Ia?(typeof u=="function"&&(C0(t,n,u,s),c=t.memoizedState),(l=Ia||sk(t,n,l,s,h,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,U_(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Es(t.type,l),o.props=d,f=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=hs(c):(c=_r(n)?fl:cr.current,c=Gc(t,c));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&ik(t,o,s,c),Ia=!1,h=t.memoizedState,o.state=h,Zp(t,s,o,i);var v=t.memoizedState;l!==f||h!==v||Or.current||Ia?(typeof p=="function"&&(C0(t,n,p,s),v=t.memoizedState),(d=Ia||sk(t,n,d,s,h,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),o.props=s,o.state=v,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return T0(e,t,n,s,a,i)}function T0(e,t,n,s,i,a){p4(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return i&&Q2(t,n,!1),la(e,t,a);s=t.stateNode,r8.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Qc(t,e.child,null,a),t.child=Qc(t,null,l,a)):gr(e,t,l,a),t.memoizedState=s.state,i&&Q2(t,n,!0),t.child}function g4(e){var t=e.stateNode;t.pendingContext?Y2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Y2(e,t.context,!1),$1(e,t.containerInfo)}function fk(e,t,n,s,i){return Yc(),O1(i),t.flags|=256,gr(e,t,n,s),t.child}var O0={dehydrated:null,treeContext:null,retryLane:0};function _0(e){return{baseLanes:e,cachePool:null,transitions:null}}function x4(e,t,n){var s=t.pendingProps,i=rn.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Vt(rn,i&1),e===null)return S0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Yx(o,s,0,null),e=ol(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=_0(n),t.memoizedState=O0,e):W1(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return s8(e,t,o,s,l,i,n);if(a){a=s.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=ao(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=ao(l,a):(a=ol(a,o,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=e.child.memoizedState,o=o===null?_0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=O0,s}return a=e.child,e=a.sibling,s=ao(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function W1(e,t){return t=Yx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Im(e,t,n,s){return s!==null&&O1(s),Qc(t,e.child,null,n),e=W1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function s8(e,t,n,s,i,a,o){if(n)return t.flags&256?(t.flags&=-257,s=Ky(Error(we(422))),Im(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=Yx({mode:"visible",children:s.children},i,0,null),a=ol(a,i,o,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Qc(t,e.child,null,o),t.child.memoizedState=_0(o),t.memoizedState=O0,a);if(!(t.mode&1))return Im(e,t,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(we(419)),s=Ky(a,s,void 0),Im(e,t,o,s)}if(l=(o&e.childLanes)!==0,Er||l){if(s=Ln,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,oa(e,i),Ks(s,e,i,-1))}return J1(),s=Ky(Error(we(421))),Im(e,t,o,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=x8.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Wr=no(i.nextSibling),Hr=t,Xt=!0,Fs=null,e!==null&&(as[os++]=zi,as[os++]=qi,as[os++]=hl,zi=e.id,qi=e.overflow,hl=t),t=W1(t,s.children),t.flags|=4096,t)}function hk(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),k0(e.return,t,n)}function Gy(e,t,n,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function v4(e,t,n){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(gr(e,t,s.children,n),s=rn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hk(e,n,t);else if(e.tag===19)hk(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Vt(rn,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&eg(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Gy(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&eg(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Gy(t,!0,n,null,a);break;case"together":Gy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function la(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(we(153));if(t.child!==null){for(e=t.child,n=ao(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ao(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function i8(e,t,n){switch(t.tag){case 3:g4(t),Yc();break;case 5:V_(t);break;case 1:_r(t.type)&&Gp(t);break;case 4:$1(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;Vt(Jp,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Vt(rn,rn.current&1),t.flags|=128,null):n&t.child.childLanes?x4(e,t,n):(Vt(rn,rn.current&1),e=la(e,t,n),e!==null?e.sibling:null);Vt(rn,rn.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return v4(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vt(rn,rn.current),s)break;return null;case 22:case 23:return t.lanes=0,m4(e,t,n)}return la(e,t,n)}var y4,I0,b4,j4;y4=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};I0=function(){};b4=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Ko(mi.current);var a=null;switch(n){case"input":i=t0(e,i),s=t0(e,s),a=[];break;case"select":i=cn({},i,{value:void 0}),s=cn({},s,{value:void 0}),a=[];break;case"textarea":i=s0(e,i),s=s0(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Hp)}a0(n,s);var o;n=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(xf.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(xf.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ht("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};j4=function(e,t,n,s){n!==s&&(t.flags|=4)};function gu(e,t){if(!Xt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function tr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function a8(e,t,n){var s=t.pendingProps;switch(T1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(t),null;case 1:return _r(t.type)&&Kp(),tr(t),null;case 3:return s=t.stateNode,Jc(),Yt(Or),Yt(cr),L1(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Om(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fs!==null&&(z0(Fs),Fs=null))),I0(e,t),tr(t),null;case 5:D1(t);var i=Ko(Ef.current);if(n=t.type,e!==null&&t.stateNode!=null)b4(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(we(166));return tr(t),null}if(e=Ko(mi.current),Om(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[oi]=t,s[Af]=a,e=(t.mode&1)!==0,n){case"dialog":Ht("cancel",s),Ht("close",s);break;case"iframe":case"object":case"embed":Ht("load",s);break;case"video":case"audio":for(i=0;i<Bu.length;i++)Ht(Bu[i],s);break;case"source":Ht("error",s);break;case"img":case"image":case"link":Ht("error",s),Ht("load",s);break;case"details":Ht("toggle",s);break;case"input":w2(s,a),Ht("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ht("invalid",s);break;case"textarea":S2(s,a),Ht("invalid",s)}a0(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&Tm(s.textContent,l,e),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Tm(s.textContent,l,e),i=["children",""+l]):xf.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ht("scroll",s)}switch(n){case"input":wm(s),N2(s,a,!0);break;case"textarea":wm(s),k2(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Hp)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=YO(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[oi]=t,e[Af]=s,y4(e,t,!1,!1),t.stateNode=e;e:{switch(o=o0(n,s),n){case"dialog":Ht("cancel",e),Ht("close",e),i=s;break;case"iframe":case"object":case"embed":Ht("load",e),i=s;break;case"video":case"audio":for(i=0;i<Bu.length;i++)Ht(Bu[i],e);i=s;break;case"source":Ht("error",e),i=s;break;case"img":case"image":case"link":Ht("error",e),Ht("load",e),i=s;break;case"details":Ht("toggle",e),i=s;break;case"input":w2(e,s),i=t0(e,s),Ht("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=cn({},s,{value:void 0}),Ht("invalid",e);break;case"textarea":S2(e,s),i=s0(e,s),Ht("invalid",e);break;default:i=s}a0(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?XO(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&QO(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vf(e,c):typeof c=="number"&&vf(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(xf.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ht("scroll",e):c!=null&&p1(e,a,c,o))}switch(n){case"input":wm(e),N2(e,s,!1);break;case"textarea":wm(e),k2(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ho(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?vc(e,!!s.multiple,a,!1):s.defaultValue!=null&&vc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Hp)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tr(t),null;case 6:if(e&&t.stateNode!=null)j4(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(we(166));if(n=Ko(Ef.current),Ko(mi.current),Om(t)){if(s=t.stateNode,n=t.memoizedProps,s[oi]=t,(a=s.nodeValue!==n)&&(e=Hr,e!==null))switch(e.tag){case 3:Tm(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tm(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[oi]=t,t.stateNode=s}return tr(t),null;case 13:if(Yt(rn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xt&&Wr!==null&&t.mode&1&&!(t.flags&128))L_(),Yc(),t.flags|=98560,a=!1;else if(a=Om(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(we(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(we(317));a[oi]=t}else Yc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tr(t),a=!1}else Fs!==null&&(z0(Fs),Fs=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||rn.current&1?In===0&&(In=3):J1())),t.updateQueue!==null&&(t.flags|=4),tr(t),null);case 4:return Jc(),I0(e,t),e===null&&kf(t.stateNode.containerInfo),tr(t),null;case 10:return R1(t.type._context),tr(t),null;case 17:return _r(t.type)&&Kp(),tr(t),null;case 19:if(Yt(rn),a=t.memoizedState,a===null)return tr(t),null;if(s=(t.flags&128)!==0,o=a.rendering,o===null)if(s)gu(a,!1);else{if(In!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=eg(e),o!==null){for(t.flags|=128,gu(a,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vt(rn,rn.current&1|2),t.child}e=e.sibling}a.tail!==null&&vn()>Zc&&(t.flags|=128,s=!0,gu(a,!1),t.lanes=4194304)}else{if(!s)if(e=eg(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Xt)return tr(t),null}else 2*vn()-a.renderingStartTime>Zc&&n!==1073741824&&(t.flags|=128,s=!0,gu(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=vn(),t.sibling=null,n=rn.current,Vt(rn,s?n&1|2:n&1),t):(tr(t),null);case 22:case 23:return Q1(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Br&1073741824&&(tr(t),t.subtreeFlags&6&&(t.flags|=8192)):tr(t),null;case 24:return null;case 25:return null}throw Error(we(156,t.tag))}function o8(e,t){switch(T1(t),t.tag){case 1:return _r(t.type)&&Kp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jc(),Yt(Or),Yt(cr),L1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return D1(t),null;case 13:if(Yt(rn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(we(340));Yc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Yt(rn),null;case 4:return Jc(),null;case 10:return R1(t.type._context),null;case 22:case 23:return Q1(),null;case 24:return null;default:return null}}var Rm=!1,sr=!1,l8=typeof WeakSet=="function"?WeakSet:Set,Le=null;function hc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){fn(e,t,s)}else n.current=null}function R0(e,t,n){try{n()}catch(s){fn(e,t,s)}}var mk=!1;function c8(e,t){if(x0=Up,e=C_(),P1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=e,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==a||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++d===i&&(l=o),h===a&&++u===s&&(c=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(v0={focusedElem:e,selectionRange:n},Up=!1,Le=t;Le!==null;)if(t=Le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Le=e;else for(;Le!==null;){t=Le;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,y=v.memoizedState,j=t.stateNode,m=j.getSnapshotBeforeUpdate(t.elementType===t.type?g:Es(t.type,g),y);j.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(N){fn(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Le=e;break}Le=t.return}return v=mk,mk=!1,v}function Xu(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&R0(t,n,a)}i=i.next}while(i!==s)}}function Kx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function M0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function w4(e){var t=e.alternate;t!==null&&(e.alternate=null,w4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[oi],delete t[Af],delete t[j0],delete t[WB],delete t[HB])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function N4(e){return e.tag===5||e.tag===3||e.tag===4}function pk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||N4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function F0(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hp));else if(s!==4&&(e=e.child,e!==null))for(F0(e,t,n),e=e.sibling;e!==null;)F0(e,t,n),e=e.sibling}function $0(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for($0(e,t,n),e=e.sibling;e!==null;)$0(e,t,n),e=e.sibling}var Hn=null,Os=!1;function Sa(e,t,n){for(n=n.child;n!==null;)S4(e,t,n),n=n.sibling}function S4(e,t,n){if(hi&&typeof hi.onCommitFiberUnmount=="function")try{hi.onCommitFiberUnmount(Lx,n)}catch{}switch(n.tag){case 5:sr||hc(n,t);case 6:var s=Hn,i=Os;Hn=null,Sa(e,t,n),Hn=s,Os=i,Hn!==null&&(Os?(e=Hn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(Os?(e=Hn,n=n.stateNode,e.nodeType===8?zy(e.parentNode,n):e.nodeType===1&&zy(e,n),wf(e)):zy(Hn,n.stateNode));break;case 4:s=Hn,i=Os,Hn=n.stateNode.containerInfo,Os=!0,Sa(e,t,n),Hn=s,Os=i;break;case 0:case 11:case 14:case 15:if(!sr&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&R0(n,t,o),i=i.next}while(i!==s)}Sa(e,t,n);break;case 1:if(!sr&&(hc(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){fn(n,t,l)}Sa(e,t,n);break;case 21:Sa(e,t,n);break;case 22:n.mode&1?(sr=(s=sr)||n.memoizedState!==null,Sa(e,t,n),sr=s):Sa(e,t,n);break;default:Sa(e,t,n)}}function gk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new l8),t.forEach(function(s){var i=v8.bind(null,e,s);n.has(s)||(n.add(s),s.then(i,i))})}}function ks(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Hn=l.stateNode,Os=!1;break e;case 3:Hn=l.stateNode.containerInfo,Os=!0;break e;case 4:Hn=l.stateNode.containerInfo,Os=!0;break e}l=l.return}if(Hn===null)throw Error(we(160));S4(a,o,i),Hn=null,Os=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){fn(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)k4(t,e),t=t.sibling}function k4(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ks(t,e),ti(e),s&4){try{Xu(3,e,e.return),Kx(3,e)}catch(g){fn(e,e.return,g)}try{Xu(5,e,e.return)}catch(g){fn(e,e.return,g)}}break;case 1:ks(t,e),ti(e),s&512&&n!==null&&hc(n,n.return);break;case 5:if(ks(t,e),ti(e),s&512&&n!==null&&hc(n,n.return),e.flags&32){var i=e.stateNode;try{vf(i,"")}catch(g){fn(e,e.return,g)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&KO(i,a),o0(l,o);var d=o0(l,a);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?XO(i,f):u==="dangerouslySetInnerHTML"?QO(i,f):u==="children"?vf(i,f):p1(i,u,f,d)}switch(l){case"input":n0(i,a);break;case"textarea":GO(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?vc(i,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?vc(i,!!a.multiple,a.defaultValue,!0):vc(i,!!a.multiple,a.multiple?[]:"",!1))}i[Af]=a}catch(g){fn(e,e.return,g)}}break;case 6:if(ks(t,e),ti(e),s&4){if(e.stateNode===null)throw Error(we(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){fn(e,e.return,g)}}break;case 3:if(ks(t,e),ti(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{wf(t.containerInfo)}catch(g){fn(e,e.return,g)}break;case 4:ks(t,e),ti(e);break;case 13:ks(t,e),ti(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(G1=vn())),s&4&&gk(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(sr=(d=sr)||u,ks(t,e),sr=d):ks(t,e),ti(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Le=e,u=e.child;u!==null;){for(f=Le=u;Le!==null;){switch(h=Le,p=h.child,h.tag){case 0:case 11:case 14:case 15:Xu(4,h,h.return);break;case 1:hc(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){fn(s,n,g)}}break;case 5:hc(h,h.return);break;case 22:if(h.memoizedState!==null){vk(f);continue}}p!==null?(p.return=h,Le=p):vk(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=JO("display",o))}catch(g){fn(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){fn(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ks(t,e),ti(e),s&4&&gk(e);break;case 21:break;default:ks(t,e),ti(e)}}function ti(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(N4(n)){var s=n;break e}n=n.return}throw Error(we(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(vf(i,""),s.flags&=-33);var a=pk(e);$0(e,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=pk(e);F0(e,l,o);break;default:throw Error(we(161))}}catch(c){fn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function d8(e,t,n){Le=e,C4(e)}function C4(e,t,n){for(var s=(e.mode&1)!==0;Le!==null;){var i=Le,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||Rm;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||sr;l=Rm;var d=sr;if(Rm=o,(sr=c)&&!d)for(Le=i;Le!==null;)o=Le,c=o.child,o.tag===22&&o.memoizedState!==null?yk(i):c!==null?(c.return=o,Le=c):yk(i);for(;a!==null;)Le=a,C4(a),a=a.sibling;Le=i,Rm=l,sr=d}xk(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Le=a):xk(e)}}function xk(e){for(;Le!==null;){var t=Le;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sr||Kx(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!sr)if(n===null)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Es(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&tk(t,a,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}tk(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&wf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}sr||t.flags&512&&M0(t)}catch(h){fn(t,t.return,h)}}if(t===e){Le=null;break}if(n=t.sibling,n!==null){n.return=t.return,Le=n;break}Le=t.return}}function vk(e){for(;Le!==null;){var t=Le;if(t===e){Le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Le=n;break}Le=t.return}}function yk(e){for(;Le!==null;){var t=Le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Kx(4,t)}catch(c){fn(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){fn(t,i,c)}}var a=t.return;try{M0(t)}catch(c){fn(t,a,c)}break;case 5:var o=t.return;try{M0(t)}catch(c){fn(t,o,c)}}}catch(c){fn(t,t.return,c)}if(t===e){Le=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Le=l;break}Le=t.return}}var u8=Math.ceil,rg=xa.ReactCurrentDispatcher,H1=xa.ReactCurrentOwner,ds=xa.ReactCurrentBatchConfig,St=0,Ln=null,kn=null,Qn=0,Br=0,mc=No(0),In=0,If=null,pl=0,Gx=0,K1=0,Zu=null,Pr=null,G1=0,Zc=1/0,$i=null,sg=!1,D0=null,so=null,Mm=!1,Qa=null,ig=0,ef=0,L0=null,jp=-1,wp=0;function yr(){return St&6?vn():jp!==-1?jp:jp=vn()}function io(e){return e.mode&1?St&2&&Qn!==0?Qn&-Qn:GB.transition!==null?(wp===0&&(wp=d_()),wp):(e=Rt,e!==0||(e=window.event,e=e===void 0?16:x_(e.type)),e):1}function Ks(e,t,n,s){if(50<ef)throw ef=0,L0=null,Error(we(185));Vh(e,n,s),(!(St&2)||e!==Ln)&&(e===Ln&&(!(St&2)&&(Gx|=n),In===4&&$a(e,Qn)),Ir(e,s),n===1&&St===0&&!(t.mode&1)&&(Zc=vn()+500,Vx&&So()))}function Ir(e,t){var n=e.callbackNode;G6(e,t);var s=qp(e,e===Ln?Qn:0);if(s===0)n!==null&&P2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&P2(n),t===1)e.tag===0?KB(bk.bind(null,e)):F_(bk.bind(null,e)),UB(function(){!(St&6)&&So()}),n=null;else{switch(u_(s)){case 1:n=b1;break;case 4:n=l_;break;case 16:n=zp;break;case 536870912:n=c_;break;default:n=zp}n=R4(n,A4.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function A4(e,t){if(jp=-1,wp=0,St&6)throw Error(we(327));var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var s=qp(e,e===Ln?Qn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=ag(e,s);else{t=s;var i=St;St|=2;var a=E4();(Ln!==e||Qn!==t)&&($i=null,Zc=vn()+500,al(e,t));do try{m8();break}catch(l){P4(e,l)}while(!0);I1(),rg.current=a,St=i,kn!==null?t=0:(Ln=null,Qn=0,t=In)}if(t!==0){if(t===2&&(i=f0(e),i!==0&&(s=i,t=B0(e,i))),t===1)throw n=If,al(e,0),$a(e,s),Ir(e,vn()),n;if(t===6)$a(e,s);else{if(i=e.current.alternate,!(s&30)&&!f8(i)&&(t=ag(e,s),t===2&&(a=f0(e),a!==0&&(s=a,t=B0(e,a))),t===1))throw n=If,al(e,0),$a(e,s),Ir(e,vn()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(we(345));case 2:Lo(e,Pr,$i);break;case 3:if($a(e,s),(s&130023424)===s&&(t=G1+500-vn(),10<t)){if(qp(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){yr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=b0(Lo.bind(null,e,Pr,$i),t);break}Lo(e,Pr,$i);break;case 4:if($a(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var o=31-Hs(s);a=1<<o,o=t[o],o>i&&(i=o),s&=~a}if(s=i,s=vn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*u8(s/1960))-s,10<s){e.timeoutHandle=b0(Lo.bind(null,e,Pr,$i),s);break}Lo(e,Pr,$i);break;case 5:Lo(e,Pr,$i);break;default:throw Error(we(329))}}}return Ir(e,vn()),e.callbackNode===n?A4.bind(null,e):null}function B0(e,t){var n=Zu;return e.current.memoizedState.isDehydrated&&(al(e,t).flags|=256),e=ag(e,t),e!==2&&(t=Pr,Pr=n,t!==null&&z0(t)),e}function z0(e){Pr===null?Pr=e:Pr.push.apply(Pr,e)}function f8(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!Ys(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $a(e,t){for(t&=~K1,t&=~Gx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Hs(t),s=1<<n;e[n]=-1,t&=~s}}function bk(e){if(St&6)throw Error(we(327));Nc();var t=qp(e,0);if(!(t&1))return Ir(e,vn()),null;var n=ag(e,t);if(e.tag!==0&&n===2){var s=f0(e);s!==0&&(t=s,n=B0(e,s))}if(n===1)throw n=If,al(e,0),$a(e,t),Ir(e,vn()),n;if(n===6)throw Error(we(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lo(e,Pr,$i),Ir(e,vn()),null}function Y1(e,t){var n=St;St|=1;try{return e(t)}finally{St=n,St===0&&(Zc=vn()+500,Vx&&So())}}function gl(e){Qa!==null&&Qa.tag===0&&!(St&6)&&Nc();var t=St;St|=1;var n=ds.transition,s=Rt;try{if(ds.transition=null,Rt=1,e)return e()}finally{Rt=s,ds.transition=n,St=t,!(St&6)&&So()}}function Q1(){Br=mc.current,Yt(mc)}function al(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,qB(n)),kn!==null)for(n=kn.return;n!==null;){var s=n;switch(T1(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Kp();break;case 3:Jc(),Yt(Or),Yt(cr),L1();break;case 5:D1(s);break;case 4:Jc();break;case 13:Yt(rn);break;case 19:Yt(rn);break;case 10:R1(s.type._context);break;case 22:case 23:Q1()}n=n.return}if(Ln=e,kn=e=ao(e.current,null),Qn=Br=t,In=0,If=null,K1=Gx=pl=0,Pr=Zu=null,Ho!==null){for(t=0;t<Ho.length;t++)if(n=Ho[t],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}Ho=null}return e}function P4(e,t){do{var n=kn;try{if(I1(),vp.current=ng,tg){for(var s=ln.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}tg=!1}if(ml=0,Dn=Tn=ln=null,Ju=!1,Tf=0,H1.current=null,n===null||n.return===null){In=1,If=t,kn=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Qn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=ok(o);if(p!==null){p.flags&=-257,lk(p,o,l,a,t),p.mode&1&&ak(a,d,t),t=p,c=d;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){ak(a,d,t),J1();break e}c=Error(we(426))}}else if(Xt&&l.mode&1){var y=ok(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),lk(y,o,l,a,t),O1(Xc(c,l));break e}}a=c=Xc(c,l),In!==4&&(In=2),Zu===null?Zu=[a]:Zu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var j=u4(a,c,t);ek(a,j);break e;case 1:l=c;var m=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(so===null||!so.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=f4(a,l,t);ek(a,N);break e}}a=a.return}while(a!==null)}O4(n)}catch(w){t=w,kn===n&&n!==null&&(kn=n=n.return);continue}break}while(!0)}function E4(){var e=rg.current;return rg.current=ng,e===null?ng:e}function J1(){(In===0||In===3||In===2)&&(In=4),Ln===null||!(pl&268435455)&&!(Gx&268435455)||$a(Ln,Qn)}function ag(e,t){var n=St;St|=2;var s=E4();(Ln!==e||Qn!==t)&&($i=null,al(e,t));do try{h8();break}catch(i){P4(e,i)}while(!0);if(I1(),St=n,rg.current=s,kn!==null)throw Error(we(261));return Ln=null,Qn=0,In}function h8(){for(;kn!==null;)T4(kn)}function m8(){for(;kn!==null&&!L6();)T4(kn)}function T4(e){var t=I4(e.alternate,e,Br);e.memoizedProps=e.pendingProps,t===null?O4(e):kn=t,H1.current=null}function O4(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=o8(n,t),n!==null){n.flags&=32767,kn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{In=6,kn=null;return}}else if(n=a8(n,t,Br),n!==null){kn=n;return}if(t=t.sibling,t!==null){kn=t;return}kn=t=e}while(t!==null);In===0&&(In=5)}function Lo(e,t,n){var s=Rt,i=ds.transition;try{ds.transition=null,Rt=1,p8(e,t,n,s)}finally{ds.transition=i,Rt=s}return null}function p8(e,t,n,s){do Nc();while(Qa!==null);if(St&6)throw Error(we(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(we(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Y6(e,a),e===Ln&&(kn=Ln=null,Qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mm||(Mm=!0,R4(zp,function(){return Nc(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ds.transition,ds.transition=null;var o=Rt;Rt=1;var l=St;St|=4,H1.current=null,c8(e,n),k4(n,e),MB(v0),Up=!!x0,v0=x0=null,e.current=n,d8(n),B6(),St=l,Rt=o,ds.transition=a}else e.current=n;if(Mm&&(Mm=!1,Qa=e,ig=i),a=e.pendingLanes,a===0&&(so=null),U6(n.stateNode),Ir(e,vn()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(sg)throw sg=!1,e=D0,D0=null,e;return ig&1&&e.tag!==0&&Nc(),a=e.pendingLanes,a&1?e===L0?ef++:(ef=0,L0=e):ef=0,So(),null}function Nc(){if(Qa!==null){var e=u_(ig),t=ds.transition,n=Rt;try{if(ds.transition=null,Rt=16>e?16:e,Qa===null)var s=!1;else{if(e=Qa,Qa=null,ig=0,St&6)throw Error(we(331));var i=St;for(St|=4,Le=e.current;Le!==null;){var a=Le,o=a.child;if(Le.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Le=d;Le!==null;){var u=Le;switch(u.tag){case 0:case 11:case 15:Xu(8,u,a)}var f=u.child;if(f!==null)f.return=u,Le=f;else for(;Le!==null;){u=Le;var h=u.sibling,p=u.return;if(w4(u),u===d){Le=null;break}if(h!==null){h.return=p,Le=h;break}Le=p}}}var v=a.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Le=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Le=o;else e:for(;Le!==null;){if(a=Le,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Xu(9,a,a.return)}var j=a.sibling;if(j!==null){j.return=a.return,Le=j;break e}Le=a.return}}var m=e.current;for(Le=m;Le!==null;){o=Le;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Le=b;else e:for(o=m;Le!==null;){if(l=Le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Kx(9,l)}}catch(w){fn(l,l.return,w)}if(l===o){Le=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Le=N;break e}Le=l.return}}if(St=i,So(),hi&&typeof hi.onPostCommitFiberRoot=="function")try{hi.onPostCommitFiberRoot(Lx,e)}catch{}s=!0}return s}finally{Rt=n,ds.transition=t}}return!1}function jk(e,t,n){t=Xc(n,t),t=u4(e,t,1),e=ro(e,t,1),t=yr(),e!==null&&(Vh(e,1,t),Ir(e,t))}function fn(e,t,n){if(e.tag===3)jk(e,e,n);else for(;t!==null;){if(t.tag===3){jk(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(so===null||!so.has(s))){e=Xc(n,e),e=f4(t,e,1),t=ro(t,e,1),e=yr(),t!==null&&(Vh(t,1,e),Ir(t,e));break}}t=t.return}}function g8(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=yr(),e.pingedLanes|=e.suspendedLanes&n,Ln===e&&(Qn&n)===n&&(In===4||In===3&&(Qn&130023424)===Qn&&500>vn()-G1?al(e,0):K1|=n),Ir(e,t)}function _4(e,t){t===0&&(e.mode&1?(t=km,km<<=1,!(km&130023424)&&(km=4194304)):t=1);var n=yr();e=oa(e,t),e!==null&&(Vh(e,t,n),Ir(e,n))}function x8(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_4(e,n)}function v8(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(we(314))}s!==null&&s.delete(t),_4(e,n)}var I4;I4=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Or.current)Er=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Er=!1,i8(e,t,n);Er=!!(e.flags&131072)}else Er=!1,Xt&&t.flags&1048576&&$_(t,Qp,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;bp(e,t),e=t.pendingProps;var i=Gc(t,cr.current);wc(t,n),i=z1(null,t,s,e,i,n);var a=q1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_r(s)?(a=!0,Gp(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,F1(t),i.updater=Hx,t.stateNode=i,i._reactInternals=t,A0(t,s,e,n),t=T0(null,t,s,!0,a,n)):(t.tag=0,Xt&&a&&E1(t),gr(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(bp(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=b8(s),e=Es(s,e),i){case 0:t=E0(null,t,s,e,n);break e;case 1:t=uk(null,t,s,e,n);break e;case 11:t=ck(null,t,s,e,n);break e;case 14:t=dk(null,t,s,Es(s.type,e),n);break e}throw Error(we(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Es(s,i),E0(e,t,s,i,n);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Es(s,i),uk(e,t,s,i,n);case 3:e:{if(g4(t),e===null)throw Error(we(387));s=t.pendingProps,a=t.memoizedState,i=a.element,U_(e,t),Zp(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Xc(Error(we(423)),t),t=fk(e,t,s,n,i);break e}else if(s!==i){i=Xc(Error(we(424)),t),t=fk(e,t,s,n,i);break e}else for(Wr=no(t.stateNode.containerInfo.firstChild),Hr=t,Xt=!0,Fs=null,n=z_(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yc(),s===i){t=la(e,t,n);break e}gr(e,t,s,n)}t=t.child}return t;case 5:return V_(t),e===null&&S0(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,y0(s,i)?o=null:a!==null&&y0(s,a)&&(t.flags|=32),p4(e,t),gr(e,t,o,n),t.child;case 6:return e===null&&S0(t),null;case 13:return x4(e,t,n);case 4:return $1(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Qc(t,null,s,n):gr(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Es(s,i),ck(e,t,s,i,n);case 7:return gr(e,t,t.pendingProps,n),t.child;case 8:return gr(e,t,t.pendingProps.children,n),t.child;case 12:return gr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Vt(Jp,s._currentValue),s._currentValue=o,a!==null)if(Ys(a.value,o)){if(a.children===i.children&&!Or.current){t=la(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Gi(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),k0(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(we(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),k0(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}gr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,wc(t,n),i=hs(i),s=s(i),t.flags|=1,gr(e,t,s,n),t.child;case 14:return s=t.type,i=Es(s,t.pendingProps),i=Es(s.type,i),dk(e,t,s,i,n);case 15:return h4(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Es(s,i),bp(e,t),t.tag=1,_r(s)?(e=!0,Gp(t)):e=!1,wc(t,n),d4(t,s,i),A0(t,s,i,n),T0(null,t,s,!0,e,n);case 19:return v4(e,t,n);case 22:return m4(e,t,n)}throw Error(we(156,t.tag))};function R4(e,t){return o_(e,t)}function y8(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(e,t,n,s){return new y8(e,t,n,s)}function X1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function b8(e){if(typeof e=="function")return X1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===x1)return 11;if(e===v1)return 14}return 2}function ao(e,t){var n=e.alternate;return n===null?(n=ls(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Np(e,t,n,s,i,a){var o=2;if(s=e,typeof e=="function")X1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case sc:return ol(n.children,i,a,t);case g1:o=8,i|=8;break;case Jb:return e=ls(12,n,t,i|2),e.elementType=Jb,e.lanes=a,e;case Xb:return e=ls(13,n,t,i),e.elementType=Xb,e.lanes=a,e;case Zb:return e=ls(19,n,t,i),e.elementType=Zb,e.lanes=a,e;case VO:return Yx(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qO:o=10;break e;case UO:o=9;break e;case x1:o=11;break e;case v1:o=14;break e;case _a:o=16,s=null;break e}throw Error(we(130,e==null?e:typeof e,""))}return t=ls(o,n,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function ol(e,t,n,s){return e=ls(7,e,s,t),e.lanes=n,e}function Yx(e,t,n,s){return e=ls(22,e,s,t),e.elementType=VO,e.lanes=n,e.stateNode={isHidden:!1},e}function Yy(e,t,n){return e=ls(6,e,null,t),e.lanes=n,e}function Qy(e,t,n){return t=ls(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function j8(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ty(0),this.expirationTimes=Ty(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ty(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Z1(e,t,n,s,i,a,o,l,c){return e=new j8(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ls(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},F1(a),e}function w8(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function M4(e){if(!e)return mo;e=e._reactInternals;e:{if(Tl(e)!==e||e.tag!==1)throw Error(we(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_r(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(we(171))}if(e.tag===1){var n=e.type;if(_r(n))return M_(e,n,t)}return t}function F4(e,t,n,s,i,a,o,l,c){return e=Z1(n,s,!0,e,i,a,o,l,c),e.context=M4(null),n=e.current,s=yr(),i=io(n),a=Gi(s,i),a.callback=t??null,ro(n,a,i),e.current.lanes=i,Vh(e,i,s),Ir(e,s),e}function Qx(e,t,n,s){var i=t.current,a=yr(),o=io(i);return n=M4(n),t.context===null?t.context=n:t.pendingContext=n,t=Gi(a,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ro(i,t,o),e!==null&&(Ks(e,i,o,a),xp(e,i,o)),o}function og(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function eN(e,t){wk(e,t),(e=e.alternate)&&wk(e,t)}function N8(){return null}var $4=typeof reportError=="function"?reportError:function(e){console.error(e)};function tN(e){this._internalRoot=e}Jx.prototype.render=tN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(we(409));Qx(e,t,null,null)};Jx.prototype.unmount=tN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gl(function(){Qx(null,e,null,null)}),t[aa]=null}};function Jx(e){this._internalRoot=e}Jx.prototype.unstable_scheduleHydration=function(e){if(e){var t=m_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fa.length&&t!==0&&t<Fa[n].priority;n++);Fa.splice(n,0,e),n===0&&g_(e)}};function nN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nk(){}function S8(e,t,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=og(o);a.call(d)}}var o=F4(t,s,e,0,null,!1,!1,"",Nk);return e._reactRootContainer=o,e[aa]=o.current,kf(e.nodeType===8?e.parentNode:e),gl(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var d=og(c);l.call(d)}}var c=Z1(e,0,!1,null,null,!1,!1,"",Nk);return e._reactRootContainer=c,e[aa]=c.current,kf(e.nodeType===8?e.parentNode:e),gl(function(){Qx(t,c,n,s)}),c}function Zx(e,t,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=og(o);l.call(c)}}Qx(t,o,e,i)}else o=S8(n,t,e,i,s);return og(o)}f_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Lu(t.pendingLanes);n!==0&&(j1(t,n|1),Ir(t,vn()),!(St&6)&&(Zc=vn()+500,So()))}break;case 13:gl(function(){var s=oa(e,1);if(s!==null){var i=yr();Ks(s,e,1,i)}}),eN(e,1)}};w1=function(e){if(e.tag===13){var t=oa(e,134217728);if(t!==null){var n=yr();Ks(t,e,134217728,n)}eN(e,134217728)}};h_=function(e){if(e.tag===13){var t=io(e),n=oa(e,t);if(n!==null){var s=yr();Ks(n,e,t,s)}eN(e,t)}};m_=function(){return Rt};p_=function(e,t){var n=Rt;try{return Rt=e,t()}finally{Rt=n}};c0=function(e,t,n){switch(t){case"input":if(n0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=Ux(s);if(!i)throw Error(we(90));HO(s),n0(s,i)}}}break;case"textarea":GO(e,n);break;case"select":t=n.value,t!=null&&vc(e,!!n.multiple,t,!1)}};t_=Y1;n_=gl;var k8={usingClientEntryPoint:!1,Events:[Hh,lc,Ux,ZO,e_,Y1]},xu={findFiberByHostInstance:Wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C8={bundleType:xu.bundleType,version:xu.version,rendererPackageName:xu.rendererPackageName,rendererConfig:xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=i_(e),e===null?null:e.stateNode},findFiberByHostInstance:xu.findFiberByHostInstance||N8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fm.isDisabled&&Fm.supportsFiber)try{Lx=Fm.inject(C8),hi=Fm}catch{}}Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k8;Xr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nN(t))throw Error(we(200));return w8(e,t,null,n)};Xr.createRoot=function(e,t){if(!nN(e))throw Error(we(299));var n=!1,s="",i=$4;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Z1(e,1,!1,null,null,n,!1,s,i),e[aa]=t.current,kf(e.nodeType===8?e.parentNode:e),new tN(t)};Xr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(we(188)):(e=Object.keys(e).join(","),Error(we(268,e)));return e=i_(t),e=e===null?null:e.stateNode,e};Xr.flushSync=function(e){return gl(e)};Xr.hydrate=function(e,t,n){if(!Xx(t))throw Error(we(200));return Zx(null,e,t,!0,n)};Xr.hydrateRoot=function(e,t,n){if(!nN(e))throw Error(we(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=$4;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=F4(t,null,e,1,n??null,i,!1,a,o),e[aa]=t.current,kf(e),s)for(e=0;e<s.length;e++)n=s[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jx(t)};Xr.render=function(e,t,n){if(!Xx(t))throw Error(we(200));return Zx(null,e,t,!1,n)};Xr.unmountComponentAtNode=function(e){if(!Xx(e))throw Error(we(40));return e._reactRootContainer?(gl(function(){Zx(null,null,e,!1,function(){e._reactRootContainer=null,e[aa]=null})}),!0):!1};Xr.unstable_batchedUpdates=Y1;Xr.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Xx(n))throw Error(we(200));if(e==null||e._reactInternals===void 0)throw Error(we(38));return Zx(e,t,n,!1,s)};Xr.version="18.3.1-next-f1338f8080-20240426";function D4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D4)}catch(e){console.error(e)}}D4(),DO.exports=Xr;var Ol=DO.exports;const A8=Dt(Ol);var L4,Sk=Ol;L4=Sk.createRoot,Sk.hydrateRoot;const P8="modulepreload",E8=function(e){return"/"+e},kk={},or=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=E8(c),c in kk)return;kk[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":P8,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function T8(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,i,a,o=[],l="",c=e.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(o.push(n),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~s?s:~a?a:i.length)),l+=~s&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~s?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var B4={exports:{}},z4={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ed=x;function O8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _8=typeof Object.is=="function"?Object.is:O8,I8=ed.useState,R8=ed.useEffect,M8=ed.useLayoutEffect,F8=ed.useDebugValue;function $8(e,t){var n=t(),s=I8({inst:{value:n,getSnapshot:t}}),i=s[0].inst,a=s[1];return M8(function(){i.value=n,i.getSnapshot=t,Jy(i)&&a({inst:i})},[e,n,t]),R8(function(){return Jy(i)&&a({inst:i}),e(function(){Jy(i)&&a({inst:i})})},[e]),F8(n),n}function Jy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_8(e,n)}catch{return!0}}function D8(e,t){return t()}var L8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?D8:$8;z4.useSyncExternalStore=ed.useSyncExternalStore!==void 0?ed.useSyncExternalStore:L8;B4.exports=z4;var B8=B4.exports;const z8=FO.useInsertionEffect,q8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U8=q8?x.useLayoutEffect:x.useEffect,V8=z8||U8,q4=e=>{const t=x.useRef([e,(...n)=>t[0](...n)]).current;return V8(()=>{t[0]=e}),t[1]},W8="popstate",rN="pushState",sN="replaceState",H8="hashchange",Ck=[W8,rN,sN,H8],K8=e=>{for(const t of Ck)addEventListener(t,e);return()=>{for(const t of Ck)removeEventListener(t,e)}},U4=(e,t)=>B8.useSyncExternalStore(K8,e,t),G8=()=>location.search,Y8=({ssrSearch:e=""}={})=>U4(G8,()=>e),Ak=()=>location.pathname,Q8=({ssrPath:e}={})=>U4(Ak,e?()=>e:Ak),J8=(e,{replace:t=!1,state:n=null}={})=>history[t?sN:rN](n,"",e),X8=(e={})=>[Q8(e),J8],Pk=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Pk]>"u"){for(const e of[rN,sN]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,Pk,{value:!0})}const Z8=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",V4=(e="")=>e==="/"?"":e,ez=(e,t)=>e[0]==="~"?e.slice(1):V4(t)+e,tz=(e="",t)=>Z8(q0(V4(e)),q0(t)),nz=e=>e[0]==="?"?e.slice(1):e,q0=e=>{try{return decodeURI(e)}catch{return e}},rz=e=>q0(nz(e)),W4={hook:X8,searchHook:Y8,parser:T8,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},H4=x.createContext(W4),zd=()=>x.useContext(H4),K4={},G4=x.createContext(K4),sz=()=>x.useContext(G4),ev=e=>{const[t,n]=e.hook(e);return[tz(e.base,t),q4((s,i)=>n(ez(s,e.base),i))]},it=()=>ev(zd()),Y4=()=>{const e=zd();return rz(e.searchHook(e))},Q4=(e,t,n,s)=>{const{pattern:i,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),o=i.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((f,h)=>[f,c[h]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...s?[l]:[]]:[!1,null]},iz=({children:e,...t})=>{var u,f;const n=zd(),s=t.hook?W4:n;let i=s;const[a,o]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=a),t.hrefs=t.hrefs??((f=t.hook)==null?void 0:f.hrefs);let l=x.useRef({}),c=l.current,d=c;for(let h in s){const p=h==="base"?s[h]+(t[h]||""):t[h]||s[h];c===d&&p!==d[h]&&(l.current=d={...d}),d[h]=p,p!==s[h]&&(i=d)}return x.createElement(H4.Provider,{value:i,children:e})},Ek=({children:e,component:t},n)=>t?x.createElement(t,{params:n}):typeof e=="function"?e(n):e,az=e=>{let t=x.useRef(K4),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},Ee=({path:e,nest:t,match:n,...s})=>{const i=zd(),[a]=ev(i),[o,l,c]=n??Q4(i.parser,e,a,t),d=az({...sz(),...l});if(!o)return null;const u=c?x.createElement(iz,{base:c},Ek(s,d)):Ek(s,d);return x.createElement(G4.Provider,{value:d,children:u})},sn=x.forwardRef((e,t)=>{const n=zd(),[s,i]=ev(n),{to:a="",href:o=a,onClick:l,asChild:c,children:d,className:u,replace:f,state:h,...p}=e,v=q4(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),i(o,e)))}),g=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&x.isValidElement(d)?x.cloneElement(d,{onClick:v,href:g}):x.createElement("a",{...p,onClick:v,href:g,className:u!=null&&u.call?u(s===o):u,children:d,ref:t})}),J4=e=>Array.isArray(e)?e.flatMap(t=>J4(t&&t.type===x.Fragment?t.props.children:t)):[e],oz=({children:e,location:t})=>{const n=zd(),[s]=ev(n);for(const i of J4(e)){let a=0;if(x.isValidElement(i)&&(a=Q4(n.parser,i.props.path,t||s,i.props.nest))[0])return x.cloneElement(i,{match:a})}return null};var qd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xl=typeof window>"u"||"Deno"in globalThis;function is(){}function lz(e,t){return typeof e=="function"?e(t):e}function U0(e){return typeof e=="number"&&e>=0&&e!==1/0}function X4(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Sc(e,t){return typeof e=="function"?e(t):e}function $s(e,t){return typeof e=="function"?e(t):e}function Tk(e,t){const{type:n="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==iN(o,t.options))return!1}else if(!Rf(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function Ok(e,t){const{exact:n,status:s,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(vl(t.options.mutationKey)!==vl(a))return!1}else if(!Rf(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function iN(e,t){return((t==null?void 0:t.queryKeyHashFn)||vl)(e)}function vl(e){return JSON.stringify(e,(t,n)=>V0(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function Rf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Rf(e[n],t[n])):!1}function Z4(e,t){if(e===t)return e;const n=_k(e)&&_k(t);if(n||V0(e)&&V0(t)){const s=n?e:Object.keys(e),i=s.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const u=n?d:a[d];(!n&&s.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=Z4(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return i===o&&c===i?e:l}return t}function lg(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function _k(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function V0(e){if(!Ik(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Ik(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ik(e){return Object.prototype.toString.call(e)==="[object Object]"}function cz(e){return new Promise(t=>{setTimeout(t,e)})}function W0(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Z4(e,t):t}function dz(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function uz(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var aN=Symbol();function eI(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===aN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Zo,Ba,Rc,gO,fz=(gO=class extends qd{constructor(){super();Ye(this,Zo);Ye(this,Ba);Ye(this,Rc);Me(this,Rc,t=>{if(!xl&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,Ba)||this.setEventListener(K(this,Rc))}onUnsubscribe(){var t;this.hasListeners()||((t=K(this,Ba))==null||t.call(this),Me(this,Ba,void 0))}setEventListener(t){var n;Me(this,Rc,t),(n=K(this,Ba))==null||n.call(this),Me(this,Ba,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){K(this,Zo)!==t&&(Me(this,Zo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof K(this,Zo)=="boolean"?K(this,Zo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Zo=new WeakMap,Ba=new WeakMap,Rc=new WeakMap,gO),oN=new fz,Mc,za,Fc,xO,hz=(xO=class extends qd{constructor(){super();Ye(this,Mc,!0);Ye(this,za);Ye(this,Fc);Me(this,Fc,t=>{if(!xl&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){K(this,za)||this.setEventListener(K(this,Fc))}onUnsubscribe(){var t;this.hasListeners()||((t=K(this,za))==null||t.call(this),Me(this,za,void 0))}setEventListener(t){var n;Me(this,Fc,t),(n=K(this,za))==null||n.call(this),Me(this,za,t(this.setOnline.bind(this)))}setOnline(t){K(this,Mc)!==t&&(Me(this,Mc,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return K(this,Mc)}},Mc=new WeakMap,za=new WeakMap,Fc=new WeakMap,xO),cg=new hz;function H0(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function s(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{s({status:"fulfilled",value:i}),e(i)},n.reject=i=>{s({status:"rejected",reason:i}),t(i)},n}function mz(e){return Math.min(1e3*2**e,3e4)}function tI(e){return(e??"online")==="online"?cg.isOnline():!0}var nI=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Xy(e){return e instanceof nI}function rI(e){let t=!1,n=0,s=!1,i;const a=H0(),o=g=>{var y;s||(h(new nI(g)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>oN.isFocused()&&(e.networkMode==="always"||cg.isOnline())&&e.canRun(),u=()=>tI(e.networkMode)&&e.canRun(),f=g=>{var y;s||(s=!0,(y=e.onSuccess)==null||y.call(e,g),i==null||i(),a.resolve(g))},h=g=>{var y;s||(s=!0,(y=e.onError)==null||y.call(e,g),i==null||i(),a.reject(g))},p=()=>new Promise(g=>{var y;i=j=>{(s||d())&&g(j)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;i=void 0,s||(g=e.onContinue)==null||g.call(e)}),v=()=>{if(s)return;let g;const y=n===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(j){g=Promise.reject(j)}Promise.resolve(g).then(f).catch(j=>{var S;if(s)return;const m=e.retry??(xl?0:3),b=e.retryDelay??mz,N=typeof b=="function"?b(n,j):b,w=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,j);if(t||!w){h(j);return}n++,(S=e.onFail)==null||S.call(e,n,j),cz(N).then(()=>d()?void 0:p()).then(()=>{t?h(j):v()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?v():p().then(v),a)}}function pz(){let e=[],t=0,n=l=>{l()},s=l=>{l()},i=l=>setTimeout(l,0);const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{i=l}}}var On=pz(),el,vO,sI=(vO=class{constructor(){Ye(this,el)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),U0(this.gcTime)&&Me(this,el,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(xl?1/0:5*60*1e3))}clearGcTimeout(){K(this,el)&&(clearTimeout(K(this,el)),Me(this,el,void 0))}},el=new WeakMap,vO),$c,Dc,ss,nr,Lh,tl,Ts,Fi,yO,gz=(yO=class extends sI{constructor(t){super();Ye(this,Ts);Ye(this,$c);Ye(this,Dc);Ye(this,ss);Ye(this,nr);Ye(this,Lh);Ye(this,tl);Me(this,tl,!1),Me(this,Lh,t.defaultOptions),this.setOptions(t.options),this.observers=[],Me(this,ss,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Me(this,$c,xz(this.options)),this.state=t.state??K(this,$c),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=K(this,nr))==null?void 0:t.promise}setOptions(t){this.options={...K(this,Lh),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,ss).remove(this)}setData(t,n){const s=W0(this.state.data,t,this.options);return ut(this,Ts,Fi).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){ut(this,Ts,Fi).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,i;const n=(s=K(this,nr))==null?void 0:s.promise;return(i=K(this,nr))==null||i.cancel(t),n?n.then(is).catch(is):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,$c))}isActive(){return this.observers.some(t=>$s(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===aN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!X4(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=K(this,nr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=K(this,nr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),K(this,ss).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(K(this,nr)&&(K(this,tl)?K(this,nr).cancel({revert:!0}):K(this,nr).cancelRetry()),this.scheduleGc()),K(this,ss).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ut(this,Ts,Fi).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(K(this,nr))return K(this,nr).continueRetry(),K(this,nr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Me(this,tl,!0),s.signal)})},a=()=>{const f=eI(this.options,n),h={queryKey:this.queryKey,meta:this.meta};return i(h),Me(this,tl,!1),this.options.persister?this.options.persister(f,h,this):f(h)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),Me(this,Dc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&ut(this,Ts,Fi).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=f=>{var h,p,v,g;Xy(f)&&f.silent||ut(this,Ts,Fi).call(this,{type:"error",error:f}),Xy(f)||((p=(h=K(this,ss).config).onError)==null||p.call(h,f,this),(g=(v=K(this,ss).config).onSettled)==null||g.call(v,this.state.data,f,this)),this.scheduleGc()};return Me(this,nr,rI({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var h,p,v,g;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(y){l(y);return}(p=(h=K(this,ss).config).onSuccess)==null||p.call(h,f,this),(g=(v=K(this,ss).config).onSettled)==null||g.call(v,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{ut(this,Ts,Fi).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{ut(this,Ts,Fi).call(this,{type:"pause"})},onContinue:()=>{ut(this,Ts,Fi).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),K(this,nr).start()}},$c=new WeakMap,Dc=new WeakMap,ss=new WeakMap,nr=new WeakMap,Lh=new WeakMap,tl=new WeakMap,Ts=new WeakSet,Fi=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...iI(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Xy(i)&&i.revert&&K(this,Dc)?{...K(this,Dc),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),On.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,ss).notify({query:this,type:"updated",action:t})})},yO);function iI(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tI(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function xz(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ri,bO,vz=(bO=class extends qd{constructor(t={}){super();Ye(this,ri);this.config=t,Me(this,ri,new Map)}build(t,n,s){const i=n.queryKey,a=n.queryHash??iN(i,n);let o=this.get(a);return o||(o=new gz({cache:this,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){K(this,ri).has(t.queryHash)||(K(this,ri).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=K(this,ri).get(t.queryHash);n&&(t.destroy(),n===t&&K(this,ri).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){On.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return K(this,ri).get(t)}getAll(){return[...K(this,ri).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Tk(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>Tk(t,s)):n}notify(t){On.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){On.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){On.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ri=new WeakMap,bO),si,hr,nl,ii,Ea,jO,yz=(jO=class extends sI{constructor(t){super();Ye(this,ii);Ye(this,si);Ye(this,hr);Ye(this,nl);this.mutationId=t.mutationId,Me(this,hr,t.mutationCache),Me(this,si,[]),this.state=t.state||aI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){K(this,si).includes(t)||(K(this,si).push(t),this.clearGcTimeout(),K(this,hr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Me(this,si,K(this,si).filter(n=>n!==t)),this.scheduleGc(),K(this,hr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){K(this,si).length||(this.state.status==="pending"?this.scheduleGc():K(this,hr).remove(this))}continue(){var t;return((t=K(this,nl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,o,l,c,d,u,f,h,p,v,g,y,j,m,b,N,w,S,k;Me(this,nl,rI({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,E)=>{ut(this,ii,Ea).call(this,{type:"failed",failureCount:P,error:E})},onPause:()=>{ut(this,ii,Ea).call(this,{type:"pause"})},onContinue:()=>{ut(this,ii,Ea).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,hr).canRun(this)}));const n=this.state.status==="pending",s=!K(this,nl).canStart();try{if(!n){ut(this,ii,Ea).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(i=K(this,hr).config).onMutate)==null?void 0:a.call(i,t,this));const E=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));E!==this.state.context&&ut(this,ii,Ea).call(this,{type:"pending",context:E,variables:t,isPaused:s})}const P=await K(this,nl).start();return await((d=(c=K(this,hr).config).onSuccess)==null?void 0:d.call(c,P,t,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,P,t,this.state.context)),await((p=(h=K(this,hr).config).onSettled)==null?void 0:p.call(h,P,null,this.state.variables,this.state.context,this)),await((g=(v=this.options).onSettled)==null?void 0:g.call(v,P,null,t,this.state.context)),ut(this,ii,Ea).call(this,{type:"success",data:P}),P}catch(P){try{throw await((j=(y=K(this,hr).config).onError)==null?void 0:j.call(y,P,t,this.state.context,this)),await((b=(m=this.options).onError)==null?void 0:b.call(m,P,t,this.state.context)),await((w=(N=K(this,hr).config).onSettled)==null?void 0:w.call(N,void 0,P,this.state.variables,this.state.context,this)),await((k=(S=this.options).onSettled)==null?void 0:k.call(S,void 0,P,t,this.state.context)),P}finally{ut(this,ii,Ea).call(this,{type:"error",error:P})}}finally{K(this,hr).runNext(this)}}},si=new WeakMap,hr=new WeakMap,nl=new WeakMap,ii=new WeakSet,Ea=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),On.batch(()=>{K(this,si).forEach(s=>{s.onMutationUpdate(t)}),K(this,hr).notify({mutation:this,type:"updated",action:t})})},jO);function aI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Lr,Bh,wO,bz=(wO=class extends qd{constructor(t={}){super();Ye(this,Lr);Ye(this,Bh);this.config=t,Me(this,Lr,new Map),Me(this,Bh,Date.now())}build(t,n,s){const i=new yz({mutationCache:this,mutationId:++vm(this,Bh)._,options:t.defaultMutationOptions(n),state:s});return this.add(i),i}add(t){const n=$m(t),s=K(this,Lr).get(n)??[];s.push(t),K(this,Lr).set(n,s),this.notify({type:"added",mutation:t})}remove(t){var s;const n=$m(t);if(K(this,Lr).has(n)){const i=(s=K(this,Lr).get(n))==null?void 0:s.filter(a=>a!==t);i&&(i.length===0?K(this,Lr).delete(n):K(this,Lr).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var s;const n=(s=K(this,Lr).get($m(t)))==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var s;const n=(s=K(this,Lr).get($m(t)))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){On.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...K(this,Lr).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Ok(n,s))}findAll(t={}){return this.getAll().filter(n=>Ok(t,n))}notify(t){On.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return On.batch(()=>Promise.all(t.map(n=>n.continue().catch(is))))}},Lr=new WeakMap,Bh=new WeakMap,wO);function $m(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Rk(e){return{onFetch:(t,n)=>{var u,f,h,p,v;const s=t.options,i=(h=(f=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},j=eI(t.options,t.fetchOptions),m=async(b,N,w)=>{if(g)return Promise.reject();if(N==null&&b.pages.length)return Promise.resolve(b);const S={queryKey:t.queryKey,pageParam:N,direction:w?"backward":"forward",meta:t.options.meta};y(S);const k=await j(S),{maxPages:P}=t.options,E=w?uz:dz;return{pages:E(b.pages,k,P),pageParams:E(b.pageParams,N,P)}};if(i&&a.length){const b=i==="backward",N=b?jz:Mk,w={pages:a,pageParams:o},S=N(s,w);l=await m(w,S,b)}else{const b=e??a.length;do{const N=c===0?o[0]??s.initialPageParam:Mk(s,l);if(c>0&&N==null)break;l=await m(l,N),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function Mk(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function jz(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var dn,qa,Ua,Lc,Bc,Va,zc,qc,NO,wz=(NO=class{constructor(e={}){Ye(this,dn);Ye(this,qa);Ye(this,Ua);Ye(this,Lc);Ye(this,Bc);Ye(this,Va);Ye(this,zc);Ye(this,qc);Me(this,dn,e.queryCache||new vz),Me(this,qa,e.mutationCache||new bz),Me(this,Ua,e.defaultOptions||{}),Me(this,Lc,new Map),Me(this,Bc,new Map),Me(this,Va,0)}mount(){vm(this,Va)._++,K(this,Va)===1&&(Me(this,zc,oN.subscribe(async e=>{e&&(await this.resumePausedMutations(),K(this,dn).onFocus())})),Me(this,qc,cg.subscribe(async e=>{e&&(await this.resumePausedMutations(),K(this,dn).onOnline())})))}unmount(){var e,t;vm(this,Va)._--,K(this,Va)===0&&((e=K(this,zc))==null||e.call(this),Me(this,zc,void 0),(t=K(this,qc))==null||t.call(this),Me(this,qc,void 0))}isFetching(e){return K(this,dn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return K(this,qa).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=K(this,dn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),s=K(this,dn).build(this,n);return e.revalidateIfStale&&s.isStaleByTime(Sc(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return K(this,dn).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),i=K(this,dn).get(s.queryHash),a=i==null?void 0:i.state.data,o=lz(t,a);if(o!==void 0)return K(this,dn).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return On.batch(()=>K(this,dn).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=K(this,dn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=K(this,dn);On.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=K(this,dn),s={type:"active",...e};return On.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},s=On.batch(()=>K(this,dn).findAll(e).map(i=>i.cancel(n)));return Promise.all(s).then(is).catch(is)}invalidateQueries(e={},t={}){return On.batch(()=>{if(K(this,dn).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=On.batch(()=>K(this,dn).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(is)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(is)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=K(this,dn).build(this,t);return n.isStaleByTime(Sc(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(is).catch(is)}fetchInfiniteQuery(e){return e.behavior=Rk(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(is).catch(is)}ensureInfiniteQueryData(e){return e.behavior=Rk(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return cg.isOnline()?K(this,qa).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,dn)}getMutationCache(){return K(this,qa)}getDefaultOptions(){return K(this,Ua)}setDefaultOptions(e){Me(this,Ua,e)}setQueryDefaults(e,t){K(this,Lc).set(vl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...K(this,Lc).values()];let n={};return t.forEach(s=>{Rf(e,s.queryKey)&&(n={...n,...s.defaultOptions})}),n}setMutationDefaults(e,t){K(this,Bc).set(vl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...K(this,Bc).values()];let n={};return t.forEach(s=>{Rf(e,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...K(this,Ua).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=iN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===aN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...K(this,Ua).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){K(this,dn).clear(),K(this,qa).clear()}},dn=new WeakMap,qa=new WeakMap,Ua=new WeakMap,Lc=new WeakMap,Bc=new WeakMap,Va=new WeakMap,zc=new WeakMap,qc=new WeakMap,NO),Cr,vt,zh,mr,rl,Uc,Wa,ai,qh,Vc,Wc,sl,il,Ha,Hc,Tt,zu,K0,G0,Y0,Q0,J0,X0,Z0,oI,SO,Nz=(SO=class extends qd{constructor(t,n){super();Ye(this,Tt);Ye(this,Cr);Ye(this,vt);Ye(this,zh);Ye(this,mr);Ye(this,rl);Ye(this,Uc);Ye(this,Wa);Ye(this,ai);Ye(this,qh);Ye(this,Vc);Ye(this,Wc);Ye(this,sl);Ye(this,il);Ye(this,Ha);Ye(this,Hc,new Set);this.options=n,Me(this,Cr,t),Me(this,ai,null),Me(this,Wa,H0()),this.options.experimental_prefetchInRender||K(this,Wa).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(K(this,vt).addObserver(this),Fk(K(this,vt),this.options)?ut(this,Tt,zu).call(this):this.updateResult(),ut(this,Tt,Q0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ej(K(this,vt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ej(K(this,vt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ut(this,Tt,J0).call(this),ut(this,Tt,X0).call(this),K(this,vt).removeObserver(this)}setOptions(t,n){const s=this.options,i=K(this,vt);if(this.options=K(this,Cr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $s(this.options.enabled,K(this,vt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ut(this,Tt,Z0).call(this),K(this,vt).setOptions(this.options),s._defaulted&&!lg(this.options,s)&&K(this,Cr).getQueryCache().notify({type:"observerOptionsUpdated",query:K(this,vt),observer:this});const a=this.hasListeners();a&&$k(K(this,vt),i,this.options,s)&&ut(this,Tt,zu).call(this),this.updateResult(n),a&&(K(this,vt)!==i||$s(this.options.enabled,K(this,vt))!==$s(s.enabled,K(this,vt))||Sc(this.options.staleTime,K(this,vt))!==Sc(s.staleTime,K(this,vt)))&&ut(this,Tt,K0).call(this);const o=ut(this,Tt,G0).call(this);a&&(K(this,vt)!==i||$s(this.options.enabled,K(this,vt))!==$s(s.enabled,K(this,vt))||o!==K(this,Ha))&&ut(this,Tt,Y0).call(this,o)}getOptimisticResult(t){const n=K(this,Cr).getQueryCache().build(K(this,Cr),t),s=this.createResult(n,t);return kz(this,s)&&(Me(this,mr,s),Me(this,Uc,this.options),Me(this,rl,K(this,vt).state)),s}getCurrentResult(){return K(this,mr)}trackResult(t,n){const s={};return Object.keys(t).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),s}trackProp(t){K(this,Hc).add(t)}getCurrentQuery(){return K(this,vt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=K(this,Cr).defaultQueryOptions(t),s=K(this,Cr).getQueryCache().build(K(this,Cr),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return ut(this,Tt,zu).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),K(this,mr)))}createResult(t,n){var P;const s=K(this,vt),i=this.options,a=K(this,mr),o=K(this,rl),l=K(this,Uc),d=t!==s?t.state:K(this,zh),{state:u}=t;let f={...u},h=!1,p;if(n._optimisticResults){const E=this.hasListeners(),_=!E&&Fk(t,n),F=E&&$k(t,s,n,i);(_||F)&&(f={...f,...iI(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:y}=f;if(n.select&&f.data!==void 0)if(a&&f.data===(o==null?void 0:o.data)&&n.select===K(this,qh))p=K(this,Vc);else try{Me(this,qh,n.select),p=n.select(f.data),p=W0(a==null?void 0:a.data,p,n),Me(this,Vc,p),Me(this,ai,null)}catch(E){Me(this,ai,E)}else p=f.data;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let E;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))E=a.data;else if(E=typeof n.placeholderData=="function"?n.placeholderData((P=K(this,Wc))==null?void 0:P.state.data,K(this,Wc)):n.placeholderData,n.select&&E!==void 0)try{E=n.select(E),Me(this,ai,null)}catch(_){Me(this,ai,_)}E!==void 0&&(y="success",p=W0(a==null?void 0:a.data,E,n),h=!0)}K(this,ai)&&(v=K(this,ai),p=K(this,Vc),g=Date.now(),y="error");const j=f.fetchStatus==="fetching",m=y==="pending",b=y==="error",N=m&&j,w=p!==void 0,k={status:y,fetchStatus:f.fetchStatus,isPending:m,isSuccess:y==="success",isError:b,isInitialLoading:N,isLoading:N,data:p,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&!m,isLoadingError:b&&!w,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:b&&w,isStale:lN(t,n),refetch:this.refetch,promise:K(this,Wa)};if(this.options.experimental_prefetchInRender){const E=A=>{k.status==="error"?A.reject(k.error):k.data!==void 0&&A.resolve(k.data)},_=()=>{const A=Me(this,Wa,k.promise=H0());E(A)},F=K(this,Wa);switch(F.status){case"pending":t.queryHash===s.queryHash&&E(F);break;case"fulfilled":(k.status==="error"||k.data!==F.value)&&_();break;case"rejected":(k.status!=="error"||k.error!==F.reason)&&_();break}}return k}updateResult(t){const n=K(this,mr),s=this.createResult(K(this,vt),this.options);if(Me(this,rl,K(this,vt).state),Me(this,Uc,this.options),K(this,rl).data!==void 0&&Me(this,Wc,K(this,vt)),lg(s,n))return;Me(this,mr,s);const i={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!K(this,Hc).size)return!0;const c=new Set(l??K(this,Hc));return this.options.throwOnError&&c.add("error"),Object.keys(K(this,mr)).some(d=>{const u=d;return K(this,mr)[u]!==n[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&a()&&(i.listeners=!0),ut(this,Tt,oI).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ut(this,Tt,Q0).call(this)}},Cr=new WeakMap,vt=new WeakMap,zh=new WeakMap,mr=new WeakMap,rl=new WeakMap,Uc=new WeakMap,Wa=new WeakMap,ai=new WeakMap,qh=new WeakMap,Vc=new WeakMap,Wc=new WeakMap,sl=new WeakMap,il=new WeakMap,Ha=new WeakMap,Hc=new WeakMap,Tt=new WeakSet,zu=function(t){ut(this,Tt,Z0).call(this);let n=K(this,vt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(is)),n},K0=function(){ut(this,Tt,J0).call(this);const t=Sc(this.options.staleTime,K(this,vt));if(xl||K(this,mr).isStale||!U0(t))return;const s=X4(K(this,mr).dataUpdatedAt,t)+1;Me(this,sl,setTimeout(()=>{K(this,mr).isStale||this.updateResult()},s))},G0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(K(this,vt)):this.options.refetchInterval)??!1},Y0=function(t){ut(this,Tt,X0).call(this),Me(this,Ha,t),!(xl||$s(this.options.enabled,K(this,vt))===!1||!U0(K(this,Ha))||K(this,Ha)===0)&&Me(this,il,setInterval(()=>{(this.options.refetchIntervalInBackground||oN.isFocused())&&ut(this,Tt,zu).call(this)},K(this,Ha)))},Q0=function(){ut(this,Tt,K0).call(this),ut(this,Tt,Y0).call(this,ut(this,Tt,G0).call(this))},J0=function(){K(this,sl)&&(clearTimeout(K(this,sl)),Me(this,sl,void 0))},X0=function(){K(this,il)&&(clearInterval(K(this,il)),Me(this,il,void 0))},Z0=function(){const t=K(this,Cr).getQueryCache().build(K(this,Cr),this.options);if(t===K(this,vt))return;const n=K(this,vt);Me(this,vt,t),Me(this,zh,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},oI=function(t){On.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(K(this,mr))}),K(this,Cr).getQueryCache().notify({query:K(this,vt),type:"observerResultsUpdated"})})},SO);function Sz(e,t){return $s(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Fk(e,t){return Sz(e,t)||e.state.data!==void 0&&ej(e,t,t.refetchOnMount)}function ej(e,t,n){if($s(t.enabled,e)!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&lN(e,t)}return!1}function $k(e,t,n,s){return(e!==t||$s(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&lN(e,n)}function lN(e,t){return $s(t.enabled,e)!==!1&&e.isStaleByTime(Sc(t.staleTime,e))}function kz(e,t){return!lg(e.getCurrentResult(),t)}var Ka,Ga,Ar,Bi,sa,Sp,tj,kO,Cz=(kO=class extends qd{constructor(n,s){super();Ye(this,sa);Ye(this,Ka);Ye(this,Ga);Ye(this,Ar);Ye(this,Bi);Me(this,Ka,n),this.setOptions(s),this.bindMethods(),ut(this,sa,Sp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const s=this.options;this.options=K(this,Ka).defaultMutationOptions(n),lg(this.options,s)||K(this,Ka).getMutationCache().notify({type:"observerOptionsUpdated",mutation:K(this,Ar),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&vl(s.mutationKey)!==vl(this.options.mutationKey)?this.reset():((i=K(this,Ar))==null?void 0:i.state.status)==="pending"&&K(this,Ar).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=K(this,Ar))==null||n.removeObserver(this)}onMutationUpdate(n){ut(this,sa,Sp).call(this),ut(this,sa,tj).call(this,n)}getCurrentResult(){return K(this,Ga)}reset(){var n;(n=K(this,Ar))==null||n.removeObserver(this),Me(this,Ar,void 0),ut(this,sa,Sp).call(this),ut(this,sa,tj).call(this)}mutate(n,s){var i;return Me(this,Bi,s),(i=K(this,Ar))==null||i.removeObserver(this),Me(this,Ar,K(this,Ka).getMutationCache().build(K(this,Ka),this.options)),K(this,Ar).addObserver(this),K(this,Ar).execute(n)}},Ka=new WeakMap,Ga=new WeakMap,Ar=new WeakMap,Bi=new WeakMap,sa=new WeakSet,Sp=function(){var s;const n=((s=K(this,Ar))==null?void 0:s.state)??aI();Me(this,Ga,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},tj=function(n){On.batch(()=>{var s,i,a,o,l,c,d,u;if(K(this,Bi)&&this.hasListeners()){const f=K(this,Ga).variables,h=K(this,Ga).context;(n==null?void 0:n.type)==="success"?((i=(s=K(this,Bi)).onSuccess)==null||i.call(s,n.data,f,h),(o=(a=K(this,Bi)).onSettled)==null||o.call(a,n.data,null,f,h)):(n==null?void 0:n.type)==="error"&&((c=(l=K(this,Bi)).onError)==null||c.call(l,n.error,f,h),(u=(d=K(this,Bi)).onSettled)==null||u.call(d,void 0,n.error,f,h))}this.listeners.forEach(f=>{f(K(this,Ga))})})},kO),lI=x.createContext(void 0),va=e=>{const t=x.useContext(lI);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Az=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(lI.Provider,{value:e,children:t})),cI=x.createContext(!1),Pz=()=>x.useContext(cI);cI.Provider;function Ez(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Tz=x.createContext(Ez()),Oz=()=>x.useContext(Tz);function dI(e,t){return typeof e=="function"?e(...t):!!e}function nj(){}var _z=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Iz=e=>{x.useEffect(()=>{e.clearReset()},[e])},Rz=({result:e,errorResetBoundary:t,throwOnError:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&dI(n,[e.error,s]),Mz=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Fz=(e,t)=>e.isLoading&&e.isFetching&&!t,$z=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Dk=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Dz(e,t,n){var u,f,h,p,v;const s=va(),i=Pz(),a=Oz(),o=s.defaultQueryOptions(e);(f=(u=s.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||f.call(u,o),o._optimisticResults=i?"isRestoring":"optimistic",Mz(o),_z(o,a),Iz(a);const l=!s.getQueryCache().get(o.queryHash),[c]=x.useState(()=>new t(s,o)),d=c.getOptimisticResult(o);if(x.useSyncExternalStore(x.useCallback(g=>{const y=i?nj:c.subscribe(On.batchCalls(g));return c.updateResult(),y},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),x.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),$z(o,d))throw Dk(o,c,a);if(Rz({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw d.error;if((p=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||p.call(h,o,d),o.experimental_prefetchInRender&&!xl&&Fz(d,i)){const g=l?Dk(o,c,a):(v=s.getQueryCache().get(o.queryHash))==null?void 0:v.promise;g==null||g.catch(nj).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function pe(e,t){return Dz(e,Nz)}function qe(e,t){const n=va(),[s]=x.useState(()=>new Cz(n,e));x.useEffect(()=>{s.setOptions(e)},[s,e]);const i=x.useSyncExternalStore(x.useCallback(o=>s.subscribe(On.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=x.useCallback((o,l)=>{s.mutate(o,l).catch(nj)},[s]);if(i.error&&dI(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}/*! Capacitor: https://capacitorjs.com/ - MIT License */var td;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(td||(td={}));class kc extends Error{constructor(t,n,s){super(t),this.message=t,this.code=n,this.data=s}}const Lz=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Bz=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},s=n.Plugins=n.Plugins||{},i=()=>t!==null?t.name:Lz(e),a=()=>i()!=="web",o=f=>{const h=d.get(f);return!!(h!=null&&h.platforms.has(i())||l(f))},l=f=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(p=>p.name===f)},c=f=>e.console.error(f),d=new Map,u=(f,h={})=>{const p=d.get(f);if(p)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),p.proxy;const v=i(),g=l(f);let y;const j=async()=>(!y&&v in h?y=typeof h[v]=="function"?y=await h[v]():y=h[v]:t!==null&&!y&&"web"in h&&(y=typeof h.web=="function"?y=await h.web():y=h.web),y),m=(P,E)=>{var _,F;if(g){const A=g==null?void 0:g.methods.find(T=>E===T.name);if(A)return A.rtype==="promise"?T=>n.nativePromise(f,E.toString(),T):(T,M)=>n.nativeCallback(f,E.toString(),T,M);if(P)return(_=P[E])===null||_===void 0?void 0:_.bind(P)}else{if(P)return(F=P[E])===null||F===void 0?void 0:F.bind(P);throw new kc(`"${f}" plugin is not implemented on ${v}`,td.Unimplemented)}},b=P=>{let E;const _=(...F)=>{const A=j().then(T=>{const M=m(T,P);if(M){const O=M(...F);return E=O==null?void 0:O.remove,O}else throw new kc(`"${f}.${P}()" is not implemented on ${v}`,td.Unimplemented)});return P==="addListener"&&(A.remove=async()=>E()),A};return _.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(_,"name",{value:P,writable:!1,configurable:!1}),_},N=b("addListener"),w=b("removeListener"),S=(P,E)=>{const _=N({eventName:P},E),F=async()=>{const T=await _;w({eventName:P,callbackId:T},E)},A=new Promise(T=>_.then(()=>T({remove:F})));return A.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await F()},A},k=new Proxy({},{get(P,E){switch(E){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?S:N;case"removeListener":return w;default:return b(E)}}});return s[f]=k,d.set(f,{name:f,proxy:k,platforms:new Set([...Object.keys(h),...g?[v]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=f=>f),n.getPlatform=i,n.handleError=c,n.isNativePlatform=a,n.isPluginAvailable=o,n.registerPlugin=u,n.Exception=kc,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},zz=e=>e.Capacitor=Bz(e),tn=zz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ko=tn.registerPlugin;class tv{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let s=!1;this.listeners[t]||(this.listeners[t]=[],s=!0),this.listeners[t].push(n);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a),s&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,s){const i=this.listeners[t];if(!i){if(s){let a=this.retainedEventArguments[t];a||(a=[]),a.push(n),this.retainedEventArguments[t]=a}return}i.forEach(a=>a(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(t="not implemented"){return new tn.Exception(t,td.Unimplemented)}unavailable(t="not available"){return new tn.Exception(t,td.Unavailable)}async removeListener(t,n){const s=this.listeners[t];if(!s)return;const i=s.indexOf(n);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(s=>{this.notifyListeners(t,s)}))}}const Lk=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Bk=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class qz extends tv{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[i,a]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=Bk(i).trim(),a=Bk(a).trim(),n[i]=a}),n}async setCookie(t){try{const n=Lk(t.key),s=Lk(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${s||""}${i}; path=${a}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}ko("CapacitorCookies",{web:()=>new qz});const Uz=async e=>new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{const i=s.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},s.onerror=i=>n(i),s.readAsDataURL(e)}),Vz=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,a,o)=>(i[a]=e[t[o]],i),{})},Wz=(e,t=!0)=>e?Object.entries(e).reduce((s,i)=>{const[a,o]=i;let l,c;return Array.isArray(o)?(c="",o.forEach(d=>{l=t?encodeURIComponent(d):d,c+=`${a}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(o):o,c=`${a}=${l}`),`${s}&${c}`},"").substr(1):null,Hz=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=Vz(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[o,l]of Object.entries(e.data||{}))a.set(o,l);n.body=a.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const a=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{a.append(c,l)});else for(const l of Object.keys(e.data))a.append(l,e.data[l]);n.body=a;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class Kz extends tv{async request(t){const n=Hz(t,t.webFetchExtra),s=Wz(t.params,t.shouldEncodeUrlParams),i=s?`${t.url}?${s}`:t.url,a=await fetch(i,n),o=a.headers.get("content-type")||"";let{responseType:l="text"}=a.ok?t:{};o.includes("application/json")&&(l="json");let c,d;switch(l){case"arraybuffer":case"blob":d=await a.blob(),c=await Uz(d);break;case"json":c=await a.json();break;case"document":case"text":default:c=await a.text()}const u={};return a.headers.forEach((f,h)=>{u[h]=f}),{data:c,headers:u,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}ko("CapacitorHttp",{web:()=>new Kz});var zk;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(zk||(zk={}));var qk;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(qk||(qk={}));class Gz extends tv{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}ko("SystemBars",{web:()=>new Gz});const _n=ko("Preferences",{web:()=>or(()=>import("./web-BI7sM34Y.js"),[]).then(e=>new e.PreferencesWeb)}),Gh="authToken",nv="userData",rj="mobileUserId",Yz="https://bjjos.app";function Zt(e){if(tn.isNativePlatform()){const t=e.startsWith("/")?e:`/${e}`;return`${Yz}${t}`}return e}function zt(){var e,t;return!!(tn.isNativePlatform()||typeof window<"u"&&((t=(e=window.Capacitor)==null?void 0:e.isNativePlatform)!=null&&t.call(e))||typeof window<"u"&&window.location.pathname.startsWith("/ios-")&&window.Capacitor!==void 0)}function Qz(){return tn.getPlatform()==="ios"}function Jz(){return tn.getPlatform()==="android"}async function li(e){zt()&&await _n.set({key:Gh,value:e}),localStorage.setItem("sessionToken",e),localStorage.setItem("token",e)}async function ci(e){const t=JSON.stringify(e);zt()&&await _n.set({key:nv,value:t}),localStorage.setItem("user",t)}async function rv(){if(zt()){const{value:e}=await _n.get({key:Gh});if(e)return localStorage.setItem("sessionToken",e),localStorage.setItem("token",e),e}return localStorage.getItem("sessionToken")||localStorage.getItem("token")}async function Xz(){if(zt()){const{value:t}=await _n.get({key:nv});if(t){localStorage.setItem("user",t);try{return JSON.parse(t)}catch{return null}}}const e=localStorage.getItem("user");if(e)try{return JSON.parse(e)}catch{return null}return null}async function nd(){zt()&&(await _n.remove({key:Gh}),await _n.remove({key:nv}),await _n.remove({key:rj})),localStorage.removeItem("sessionToken"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("mobileUserId"),window.dispatchEvent(new Event("bjjos-auth-change"))}async function uI(){var e;if(!zt())return!1;try{const{value:t}=await _n.get({key:Gh}),{value:n}=await _n.get({key:nv}),{value:s}=await _n.get({key:rj});if(t){if(localStorage.setItem("sessionToken",t),localStorage.setItem("token",t),n){localStorage.setItem("user",n);try{const i=JSON.parse(n),a=s||((e=i==null?void 0:i.id)==null?void 0:e.toString())||"1";localStorage.setItem("mobileUserId",a),!s&&(i!=null&&i.id)&&await _n.set({key:rj,value:a})}catch{s&&localStorage.setItem("mobileUserId",s)}}else s&&localStorage.setItem("mobileUserId",s);return!0}}catch(t){console.error("Error restoring auth from native storage:",t)}return!1}async function Zz(){if(zt()){const{value:e}=await _n.get({key:Gh});return!!e}return!!(localStorage.getItem("sessionToken")||localStorage.getItem("token"))}const Mf=Object.freeze(Object.defineProperty({__proto__:null,clearAuth:nd,getApiUrl:Zt,getAuthToken:rv,getUserData:Xz,hasStoredAuth:Zz,isAndroidApp:Jz,isIOSApp:Qz,isNativeApp:zt,restoreAuthFromNative:uI,saveAuthToken:li,saveUserData:ci},Symbol.toStringTag,{value:"Module"}));async function fI(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}function hI(e){const t=e.includes("?")?"&":"?";return`${e}${t}_t=${Date.now()}`}function mI(){return localStorage.getItem("sessionToken")||localStorage.getItem("token")}async function lt(e,t,n){const s=Zt(t),i=hI(s),a=localStorage.getItem("adminToken"),o=mI(),l=await fetch(i,{method:e,headers:{...n?{"Content-Type":"application/json"}:{},...a?{Authorization:`Bearer ${a}`}:o?{Authorization:`Bearer ${o}`}:{},"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"},body:n?JSON.stringify(n):void 0,credentials:"include",cache:"no-store"});return await fI(l),l}const e7=({on401:e})=>async({queryKey:t})=>{const n=t.join("/"),s=Zt(n),i=hI(s),a=mI(),o=await fetch(i,{credentials:"include",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",...a?{Authorization:`Bearer ${a}`}:{}},cache:"no-store"});return e==="returnNull"&&o.status===401?null:(await fI(o),await o.json())},_e=new wz({defaultOptions:{queries:{queryFn:e7({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),t7=1,n7=1e6;let Zy=0;function r7(){return Zy=(Zy+1)%Number.MAX_SAFE_INTEGER,Zy.toString()}const eb=new Map,Uk=e=>{if(eb.has(e))return;const t=setTimeout(()=>{eb.delete(e),tf({type:"REMOVE_TOAST",toastId:e})},n7);eb.set(e,t)},s7=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,t7)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Uk(n):e.toasts.forEach(s=>{Uk(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},kp=[];let Cp={toasts:[]};function tf(e){Cp=s7(Cp,e),kp.forEach(t=>{t(Cp)})}function i7({...e}){const t=r7(),n=i=>tf({type:"UPDATE_TOAST",toast:{...i,id:t}}),s=()=>tf({type:"DISMISS_TOAST",toastId:t});return tf({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||s()}}}),{id:t,dismiss:s,update:n}}function Je(){const[e,t]=x.useState(Cp);return x.useEffect(()=>(kp.push(t),()=>{const n=kp.indexOf(t);n>-1&&kp.splice(n,1)}),[e]),{...e,toast:i7,dismiss:n=>tf({type:"DISMISS_TOAST",toastId:n})}}function $e(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Vk(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function pI(...e){return t=>{let n=!1;const s=e.map(i=>{const a=Vk(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():Vk(e[i],null)}}}}function ct(...e){return x.useCallback(pI(...e),e)}function a7(e,t){const n=x.createContext(t),s=a=>{const{children:o,...l}=a,c=x.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:o})};s.displayName=e+"Provider";function i(a){const o=x.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[s,i]}function Mr(e,t=[]){let n=[];function s(a,o){const l=x.createContext(o),c=n.length;n=[...n,o];const d=f=>{var j;const{scope:h,children:p,...v}=f,g=((j=h==null?void 0:h[e])==null?void 0:j[c])||l,y=x.useMemo(()=>v,Object.values(v));return r.jsx(g.Provider,{value:y,children:p})};d.displayName=a+"Provider";function u(f,h){var g;const p=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[s,o7(i,...t)]}function o7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const f=c(a)[`__scope${d}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function rd(e){const t=l7(e),n=x.forwardRef((s,i)=>{const{children:a,...o}=s,l=x.Children.toArray(a),c=l.find(c7);if(c){const d=c.props.children,u=l.map(f=>f===c?x.Children.count(d)>1?x.Children.only(null):x.isValidElement(d)?d.props.children:null:f);return r.jsx(t,{...o,ref:i,children:x.isValidElement(d)?x.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var sv=rd("Slot");function l7(e){const t=x.forwardRef((n,s)=>{const{children:i,...a}=n;if(x.isValidElement(i)){const o=u7(i),l=d7(a,i.props);return i.type!==x.Fragment&&(l.ref=s?pI(s,o):o),x.cloneElement(i,l)}return x.Children.count(i)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var gI=Symbol("radix.slottable");function xI(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=gI,t}function c7(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===gI}function d7(e,t){const n={...t};for(const s in t){const i=e[s],a=t[s];/^on[A-Z]/.test(s)?i&&a?n[s]=(...l)=>{a(...l),i(...l)}:i&&(n[s]=i):s==="style"?n[s]={...i,...a}:s==="className"&&(n[s]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function u7(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function iv(e){const t=e+"CollectionProvider",[n,s]=Mr(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:j}=g,m=q.useRef(null),b=q.useRef(new Map).current;return r.jsx(i,{scope:y,itemMap:b,collectionRef:m,children:j})};o.displayName=t;const l=e+"CollectionSlot",c=rd(l),d=q.forwardRef((g,y)=>{const{scope:j,children:m}=g,b=a(l,j),N=ct(y,b.collectionRef);return r.jsx(c,{ref:N,children:m})});d.displayName=l;const u=e+"CollectionItemSlot",f="data-radix-collection-item",h=rd(u),p=q.forwardRef((g,y)=>{const{scope:j,children:m,...b}=g,N=q.useRef(null),w=ct(y,N),S=a(u,j);return q.useEffect(()=>(S.itemMap.set(N,{ref:N,...b}),()=>void S.itemMap.delete(N))),r.jsx(h,{[f]:"",ref:w,children:m})});p.displayName=u;function v(g){const y=a(e+"CollectionConsumer",g);return q.useCallback(()=>{const m=y.collectionRef.current;if(!m)return[];const b=Array.from(m.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((S,k)=>b.indexOf(S.ref.current)-b.indexOf(k.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},v,s]}var f7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],He=f7.reduce((e,t)=>{const n=rd(`Primitive.${t}`),s=x.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function vI(e,t){e&&Ol.flushSync(()=>e.dispatchEvent(t))}function yn(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function h7(e,t=globalThis==null?void 0:globalThis.document){const n=yn(e);x.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var m7="DismissableLayer",sj="dismissableLayer.update",p7="dismissableLayer.pointerDownOutside",g7="dismissableLayer.focusOutside",Wk,yI=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yh=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=x.useContext(yI),[u,f]=x.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),v=ct(t,k=>f(k)),g=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),j=g.indexOf(y),m=u?g.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,N=m>=j,w=v7(k=>{const P=k.target,E=[...d.branches].some(_=>_.contains(P));!N||E||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},h),S=y7(k=>{const P=k.target;[...d.branches].some(_=>_.contains(P))||(a==null||a(k),o==null||o(k),k.defaultPrevented||l==null||l())},h);return h7(k=>{m===d.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},h),x.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Wk=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Hk(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Wk)}},[u,h,n,d]),x.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Hk())},[u,d]),x.useEffect(()=>{const k=()=>p({});return document.addEventListener(sj,k),()=>document.removeEventListener(sj,k)},[]),r.jsx(He.div,{...c,ref:v,style:{pointerEvents:b?N?"auto":"none":void 0,...e.style},onFocusCapture:$e(e.onFocusCapture,S.onFocusCapture),onBlurCapture:$e(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:$e(e.onPointerDownCapture,w.onPointerDownCapture)})});Yh.displayName=m7;var x7="DismissableLayerBranch",bI=x.forwardRef((e,t)=>{const n=x.useContext(yI),s=x.useRef(null),i=ct(t,s);return x.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),r.jsx(He.div,{...e,ref:i})});bI.displayName=x7;function v7(e,t=globalThis==null?void 0:globalThis.document){const n=yn(e),s=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){jI(p7,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function y7(e,t=globalThis==null?void 0:globalThis.document){const n=yn(e),s=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!s.current&&jI(g7,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Hk(){const e=new CustomEvent(sj);document.dispatchEvent(e)}function jI(e,t,n,{discrete:s}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?vI(i,a):i.dispatchEvent(a)}var b7=Yh,j7=bI,Xn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},w7="Portal",av=x.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[i,a]=x.useState(!1);Xn(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?A8.createPortal(r.jsx(He.div,{...s,ref:t}),o):null});av.displayName=w7;function N7(e,t){return x.useReducer((n,s)=>t[n][s]??n,e)}var vs=e=>{const{present:t,children:n}=e,s=S7(t),i=typeof n=="function"?n({present:s.isPresent}):x.Children.only(n),a=ct(s.ref,k7(i));return typeof n=="function"||s.isPresent?x.cloneElement(i,{ref:a}):null};vs.displayName="Presence";function S7(e){const[t,n]=x.useState(),s=x.useRef({}),i=x.useRef(e),a=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=N7(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const d=Dm(s.current);a.current=l==="mounted"?d:"none"},[l]),Xn(()=>{const d=s.current,u=i.current;if(u!==e){const h=a.current,p=Dm(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),Xn(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,f=p=>{const g=Dm(s.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!i.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=p=>{p.target===t&&(a.current=Dm(s.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(d=>{d&&(s.current=getComputedStyle(d)),n(d)},[])}}function Dm(e){return(e==null?void 0:e.animationName)||"none"}function k7(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function bi({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,i]=C7({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:s,l=yn(n),c=x.useCallback(d=>{if(a){const f=typeof d=="function"?d(e):d;f!==e&&l(f)}else i(d)},[a,e,i,l]);return[o,c]}function C7({defaultProp:e,onChange:t}){const n=x.useState(e),[s]=n,i=x.useRef(s),a=yn(t);return x.useEffect(()=>{i.current!==s&&(a(s),i.current=s)},[s,i,a]),n}var A7="VisuallyHidden",Qh=x.forwardRef((e,t)=>r.jsx(He.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Qh.displayName=A7;var P7=Qh,cN="ToastProvider",[dN,E7,T7]=iv("Toast"),[wI,XNe]=Mr("Toast",[T7]),[O7,ov]=wI(cN),NI=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=x.useState(null),[d,u]=x.useState(0),f=x.useRef(!1),h=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${cN}\`. Expected non-empty \`string\`.`),r.jsx(dN.Provider,{scope:t,children:r.jsx(O7,{scope:t,label:n,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>u(p=>p+1),[]),onToastRemove:x.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};NI.displayName=cN;var SI="ToastViewport",_7=["F8"],ij="toast.viewportPause",aj="toast.viewportResume",kI=x.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=_7,label:i="Notifications ({hotkey})",...a}=e,o=ov(SI,n),l=E7(n),c=x.useRef(null),d=x.useRef(null),u=x.useRef(null),f=x.useRef(null),h=ct(t,f,o.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;x.useEffect(()=>{const y=j=>{var b;s.length!==0&&s.every(N=>j[N]||j.code===N)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s]),x.useEffect(()=>{const y=c.current,j=f.current;if(v&&y&&j){const m=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(ij);j.dispatchEvent(S),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(aj);j.dispatchEvent(S),o.isClosePausedRef.current=!1}},N=S=>{!y.contains(S.relatedTarget)&&b()},w=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",m),y.addEventListener("focusout",N),y.addEventListener("pointermove",m),y.addEventListener("pointerleave",w),window.addEventListener("blur",m),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",m),y.removeEventListener("focusout",N),y.removeEventListener("pointermove",m),y.removeEventListener("pointerleave",w),window.removeEventListener("blur",m),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:y})=>{const m=l().map(b=>{const N=b.ref.current,w=[N,...W7(N)];return y==="forwards"?w:w.reverse()});return(y==="forwards"?m.reverse():m).flat()},[l]);return x.useEffect(()=>{const y=f.current;if(y){const j=m=>{var w,S,k;const b=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!b){const P=document.activeElement,E=m.shiftKey;if(m.target===y&&E){(w=d.current)==null||w.focus();return}const A=g({tabbingDirection:E?"backwards":"forwards"}),T=A.findIndex(M=>M===P);tb(A.slice(T+1))?m.preventDefault():E?(S=d.current)==null||S.focus():(k=u.current)==null||k.focus()}};return y.addEventListener("keydown",j),()=>y.removeEventListener("keydown",j)}},[l,g]),r.jsxs(j7,{ref:c,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&r.jsx(oj,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});tb(y)}}),r.jsx(dN.Slot,{scope:n,children:r.jsx(He.ol,{tabIndex:-1,...a,ref:h})}),v&&r.jsx(oj,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});tb(y)}})]})});kI.displayName=SI;var CI="ToastFocusProxy",oj=x.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...i}=e,a=ov(CI,n);return r.jsx(Qh,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&s()}})});oj.displayName=CI;var lv="Toast",I7="toast.swipeStart",R7="toast.swipeMove",M7="toast.swipeCancel",F7="toast.swipeEnd",AI=x.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:i,onOpenChange:a,...o}=e,[l=!0,c]=bi({prop:s,defaultProp:i,onChange:a});return r.jsx(vs,{present:n||l,children:r.jsx(L7,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:yn(e.onPause),onResume:yn(e.onResume),onSwipeStart:$e(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(e.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:$e(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(e.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});AI.displayName=lv;var[$7,D7]=wI(lv,{onClose(){}}),L7=x.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:p,...v}=e,g=ov(lv,n),[y,j]=x.useState(null),m=ct(t,M=>j(M)),b=x.useRef(null),N=x.useRef(null),w=i||g.duration,S=x.useRef(0),k=x.useRef(w),P=x.useRef(0),{onToastAdd:E,onToastRemove:_}=g,F=yn(()=>{var O;(y==null?void 0:y.contains(document.activeElement))&&((O=g.viewport)==null||O.focus()),o()}),A=x.useCallback(M=>{!M||M===1/0||(window.clearTimeout(P.current),S.current=new Date().getTime(),P.current=window.setTimeout(F,M))},[F]);x.useEffect(()=>{const M=g.viewport;if(M){const O=()=>{A(k.current),d==null||d()},C=()=>{const R=new Date().getTime()-S.current;k.current=k.current-R,window.clearTimeout(P.current),c==null||c()};return M.addEventListener(ij,C),M.addEventListener(aj,O),()=>{M.removeEventListener(ij,C),M.removeEventListener(aj,O)}}},[g.viewport,w,c,d,A]),x.useEffect(()=>{a&&!g.isClosePausedRef.current&&A(w)},[a,w,g.isClosePausedRef,A]),x.useEffect(()=>(E(),()=>_()),[E,_]);const T=x.useMemo(()=>y?RI(y):null,[y]);return g.viewport?r.jsxs(r.Fragment,{children:[T&&r.jsx(B7,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:T}),r.jsx($7,{scope:n,onClose:F,children:Ol.createPortal(r.jsx(dN.ItemSlot,{scope:n,children:r.jsx(b7,{asChild:!0,onEscapeKeyDown:$e(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||F(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(He.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:m,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:$e(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:$e(e.onPointerDown,M=>{M.button===0&&(b.current={x:M.clientX,y:M.clientY})}),onPointerMove:$e(e.onPointerMove,M=>{if(!b.current)return;const O=M.clientX-b.current.x,C=M.clientY-b.current.y,R=!!N.current,I=["left","right"].includes(g.swipeDirection),B=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,H=I?B(0,O):0,Q=I?0:B(0,C),D=M.pointerType==="touch"?10:2,te={x:H,y:Q},V={originalEvent:M,delta:te};R?(N.current=te,Lm(R7,f,V,{discrete:!1})):Kk(te,g.swipeDirection,D)?(N.current=te,Lm(I7,u,V,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(O)>D||Math.abs(C)>D)&&(b.current=null)}),onPointerUp:$e(e.onPointerUp,M=>{const O=N.current,C=M.target;if(C.hasPointerCapture(M.pointerId)&&C.releasePointerCapture(M.pointerId),N.current=null,b.current=null,O){const R=M.currentTarget,I={originalEvent:M,delta:O};Kk(O,g.swipeDirection,g.swipeThreshold)?Lm(F7,p,I,{discrete:!0}):Lm(M7,h,I,{discrete:!0}),R.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),B7=e=>{const{__scopeToast:t,children:n,...s}=e,i=ov(lv,t),[a,o]=x.useState(!1),[l,c]=x.useState(!1);return U7(()=>o(!0)),x.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(av,{asChild:!0,children:r.jsx(Qh,{...s,children:a&&r.jsxs(r.Fragment,{children:[i.label," ",n]})})})},z7="ToastTitle",PI=x.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(He.div,{...s,ref:t})});PI.displayName=z7;var q7="ToastDescription",EI=x.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(He.div,{...s,ref:t})});EI.displayName=q7;var TI="ToastAction",OI=x.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?r.jsx(II,{altText:n,asChild:!0,children:r.jsx(uN,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${TI}\`. Expected non-empty \`string\`.`),null)});OI.displayName=TI;var _I="ToastClose",uN=x.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,i=D7(_I,n);return r.jsx(II,{asChild:!0,children:r.jsx(He.button,{type:"button",...s,ref:t,onClick:$e(e.onClick,i.onClose)})})});uN.displayName=_I;var II=x.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...i}=e;return r.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:t})});function RI(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),V7(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...RI(s))}}),t}function Lm(e,t,n,{discrete:s}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?vI(i,a):i.dispatchEvent(a)}var Kk=(e,t,n=0)=>{const s=Math.abs(e.x),i=Math.abs(e.y),a=s>i;return t==="left"||t==="right"?a&&s>n:!a&&i>n};function U7(e=()=>{}){const t=yn(e);Xn(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function V7(e){return e.nodeType===e.ELEMENT_NODE}function W7(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function tb(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var H7=NI,MI=kI,FI=AI,$I=PI,DI=EI,LI=OI,BI=uN;function zI(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=zI(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Nt(){for(var e,t,n=0,s="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=zI(e))&&(s&&(s+=" "),s+=t);return s}const Gk=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Yk=Nt,Ud=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Yk(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const u=n==null?void 0:n[d],f=a==null?void 0:a[d];if(u===null)return null;const h=Gk(u)||Gk(f);return i[d][h]}),l=n&&Object.entries(n).reduce((d,u)=>{let[f,h]=u;return h===void 0||(d[f]=h),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(v=>{let[g,y]=v;return Array.isArray(y)?y.includes({...a,...l}[g]):{...a,...l}[g]===y})?[...d,f,h]:d},[]);return Yk(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qI=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var G7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...l},c)=>x.createElement("svg",{ref:c,...G7,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:qI("lucide",i),...l},[...o.map(([d,u])=>x.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(e,t)=>{const n=x.forwardRef(({className:s,...i},a)=>x.createElement(Y7,{ref:a,iconNode:t,className:qI(`lucide-${K7(e)}`,s),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=xe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=xe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=xe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=xe("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=xe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=xe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=xe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=xe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=xe("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=xe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=xe("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=xe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=xe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=xe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=xe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=xe("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=xe("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=xe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=xe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=xe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=xe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=xe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=xe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=xe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=xe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=xe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=xe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=xe("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=xe("MailWarning",[["path",{d:"M22 10.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h12.5",key:"e61zoh"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M20 14v4",key:"1hm744"}],["path",{d:"M20 22v.01",key:"12bgn6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=xe("MailX",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9",key:"1j9vog"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m17 17 4 4",key:"1b3523"}],["path",{d:"m21 17-4 4",key:"uinynz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=xe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=xe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=xe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=xe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=xe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=xe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=xe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=xe("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=xe("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=xe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=xe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=xe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=xe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=xe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=xe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=xe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=xe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=xe("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=xe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=xe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=xe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=xe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=xe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=xe("Vibrate",[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=xe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=xe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=xe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=xe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),pN="-",wq=e=>{const t=Sq(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(pN);return l[0]===""&&l.length!==1&&l.shift(),JI(l,t)||Nq(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},JI=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),i=s?JI(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(pN);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},nC=/^\[(.+)\]$/,Nq=e=>{if(nC.test(e)){const t=nC.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Sq=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return Cq(Object.entries(e.classGroups),n).forEach(([a,o])=>{mj(o,s,a,t)}),s},mj=(e,t,n,s)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:rC(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(kq(i)){mj(i(s),t,n,s);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{mj(o,rC(t,a),n,s)})})},rC=(e,t)=>{let n=e;return t.split(pN).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},kq=e=>e.isThemeGetter,Cq=(e,t)=>t?e.map(([n,s])=>{const i=s.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,i]}):e,Aq=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const i=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,s=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=s.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},XI="!",Pq=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let d=0,u=0,f;for(let y=0;y<l.length;y++){let j=l[y];if(d===0){if(j===i&&(s||l.slice(y,y+a)===t)){c.push(l.slice(u,y)),u=y+a;continue}if(j==="/"){f=y;continue}}j==="["?d++:j==="]"&&d--}const h=c.length===0?l:l.substring(u),p=h.startsWith(XI),v=p?h.substring(1):h,g=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},Eq=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},Tq=e=>({cache:Aq(e.cacheSize),parseClassName:Pq(e),...wq(e)}),Oq=/\s+/,_q=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(Oq);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=n(d);let v=!!p,g=s(v?h.substring(0,p):h);if(!g){if(!v){l=d+(l.length>0?" "+l:l);continue}if(g=s(h),!g){l=d+(l.length>0?" "+l:l);continue}v=!1}const y=Eq(u).join(":"),j=f?y+XI:y,m=j+g;if(a.includes(m))continue;a.push(m);const b=i(g,v);for(let N=0;N<b.length;++N){const w=b[N];a.push(j+w)}l=d+(l.length>0?" "+l:l)}return l};function Iq(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=ZI(t))&&(s&&(s+=" "),s+=n);return s}const ZI=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=ZI(e[s]))&&(n&&(n+=" "),n+=t);return n};function Rq(e,...t){let n,s,i,a=o;function o(c){const d=t.reduce((u,f)=>f(u),e());return n=Tq(d),s=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const d=s(c);if(d)return d;const u=_q(c,n);return i(c,u),u}return function(){return a(Iq.apply(null,arguments))}}const Wt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},e5=/^\[(?:([a-z-]+):)?(.+)\]$/i,Mq=/^\d+\/\d+$/,Fq=new Set(["px","full","screen"]),$q=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Dq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Lq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Bq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oi=e=>Cc(e)||Fq.has(e)||Mq.test(e),ka=e=>Wd(e,"length",Yq),Cc=e=>!!e&&!Number.isNaN(Number(e)),sb=e=>Wd(e,"number",Cc),vu=e=>!!e&&Number.isInteger(Number(e)),qq=e=>e.endsWith("%")&&Cc(e.slice(0,-1)),ot=e=>e5.test(e),Ca=e=>$q.test(e),Uq=new Set(["length","size","percentage"]),Vq=e=>Wd(e,Uq,t5),Wq=e=>Wd(e,"position",t5),Hq=new Set(["image","url"]),Kq=e=>Wd(e,Hq,Jq),Gq=e=>Wd(e,"",Qq),yu=()=>!0,Wd=(e,t,n)=>{const s=e5.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},Yq=e=>Dq.test(e)&&!Lq.test(e),t5=()=>!1,Qq=e=>Bq.test(e),Jq=e=>zq.test(e),Xq=()=>{const e=Wt("colors"),t=Wt("spacing"),n=Wt("blur"),s=Wt("brightness"),i=Wt("borderColor"),a=Wt("borderRadius"),o=Wt("borderSpacing"),l=Wt("borderWidth"),c=Wt("contrast"),d=Wt("grayscale"),u=Wt("hueRotate"),f=Wt("invert"),h=Wt("gap"),p=Wt("gradientColorStops"),v=Wt("gradientColorStopPositions"),g=Wt("inset"),y=Wt("margin"),j=Wt("opacity"),m=Wt("padding"),b=Wt("saturate"),N=Wt("scale"),w=Wt("sepia"),S=Wt("skew"),k=Wt("space"),P=Wt("translate"),E=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",ot,t],A=()=>[ot,t],T=()=>["",Oi,ka],M=()=>["auto",Cc,ot],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],C=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",ot],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Cc,ot];return{cacheSize:500,separator:":",theme:{colors:[yu],spacing:[Oi,ka],blur:["none","",Ca,ot],brightness:Q(),borderColor:[e],borderRadius:["none","","full",Ca,ot],borderSpacing:A(),borderWidth:T(),contrast:Q(),grayscale:B(),hueRotate:Q(),invert:B(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[qq,ka],inset:F(),margin:F(),opacity:Q(),padding:A(),saturate:Q(),scale:Q(),sepia:B(),skew:Q(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",ot]}],container:["container"],columns:[{columns:[Ca]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),ot]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vu,ot]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ot]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",vu,ot]}],"grid-cols":[{"grid-cols":[yu]}],"col-start-end":[{col:["auto",{span:["full",vu,ot]},ot]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[yu]}],"row-start-end":[{row:["auto",{span:[vu,ot]},ot]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ot]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ot,t]}],"min-w":[{"min-w":[ot,t,"min","max","fit"]}],"max-w":[{"max-w":[ot,t,"none","full","min","max","fit","prose",{screen:[Ca]},Ca]}],h:[{h:[ot,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ot,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ca,ka]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",sb]}],"font-family":[{font:[yu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ot]}],"line-clamp":[{"line-clamp":["none",Cc,sb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Oi,ot]}],"list-image":[{"list-image":["none",ot]}],"list-style-type":[{list:["none","disc","decimal",ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...C(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Oi,ka]}],"underline-offset":[{"underline-offset":["auto",Oi,ot]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),Wq]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Vq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Kq]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...C(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:C()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...C()]}],"outline-offset":[{"outline-offset":[Oi,ot]}],"outline-w":[{outline:[Oi,ka]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Oi,ka]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ca,Gq]}],"shadow-color":[{shadow:[yu]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ca,ot]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ot]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",ot]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[vu,ot]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ot]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Oi,ka,sb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Zq=Rq(Xq);function Ce(...e){return Zq(Nt(e))}const eU=H7,n5=x.forwardRef(({className:e,...t},n)=>r.jsx(MI,{ref:n,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));n5.displayName=MI.displayName;const tU=Ud("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),r5=x.forwardRef(({className:e,variant:t,...n},s)=>r.jsx(FI,{ref:s,className:Ce(tU({variant:t}),e),...n}));r5.displayName=FI.displayName;const nU=x.forwardRef(({className:e,...t},n)=>r.jsx(LI,{ref:n,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));nU.displayName=LI.displayName;const s5=x.forwardRef(({className:e,...t},n)=>r.jsx(BI,{ref:n,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(ys,{className:"h-4 w-4"})}));s5.displayName=BI.displayName;const i5=x.forwardRef(({className:e,...t},n)=>r.jsx($I,{ref:n,className:Ce("text-sm font-semibold",e),...t}));i5.displayName=$I.displayName;const a5=x.forwardRef(({className:e,...t},n)=>r.jsx(DI,{ref:n,className:Ce("text-sm opacity-90",e),...t}));a5.displayName=DI.displayName;function rU(){const{toasts:e}=Je();return r.jsxs(eU,{children:[e.map(function({id:t,title:n,description:s,action:i,...a}){return r.jsxs(r5,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(i5,{children:n}),s&&r.jsx(a5,{children:s})]}),i,r.jsx(s5,{})]},t)}),r.jsx(n5,{})]})}var sU=FO[" useId ".trim().toString()]||(()=>{}),iU=0;function Xi(e){const[t,n]=x.useState(sU());return Xn(()=>{n(s=>s??String(iU++))},[e]),t?`radix-${t}`:""}const aU=["top","right","bottom","left"],po=Math.min,Ur=Math.max,hg=Math.round,Bm=Math.floor,gi=e=>({x:e,y:e}),oU={left:"right",right:"left",bottom:"top",top:"bottom"},lU={start:"end",end:"start"};function pj(e,t,n){return Ur(e,po(t,n))}function ca(e,t){return typeof e=="function"?e(t):e}function da(e){return e.split("-")[0]}function Hd(e){return e.split("-")[1]}function gN(e){return e==="x"?"y":"x"}function xN(e){return e==="y"?"height":"width"}function go(e){return["top","bottom"].includes(da(e))?"y":"x"}function vN(e){return gN(go(e))}function cU(e,t,n){n===void 0&&(n=!1);const s=Hd(e),i=vN(e),a=xN(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=mg(o)),[o,mg(o)]}function dU(e){const t=mg(e);return[gj(e),t,gj(t)]}function gj(e){return e.replace(/start|end/g,t=>lU[t])}function uU(e,t,n){const s=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:s:t?s:i;case"left":case"right":return t?a:o;default:return[]}}function fU(e,t,n,s){const i=Hd(e);let a=uU(da(e),n==="start",s);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(gj)))),a}function mg(e){return e.replace(/left|right|bottom|top/g,t=>oU[t])}function hU(e){return{top:0,right:0,bottom:0,left:0,...e}}function o5(e){return typeof e!="number"?hU(e):{top:e,right:e,bottom:e,left:e}}function pg(e){const{x:t,y:n,width:s,height:i}=e;return{width:s,height:i,top:n,left:t,right:t+s,bottom:n+i,x:t,y:n}}function sC(e,t,n){let{reference:s,floating:i}=e;const a=go(t),o=vN(t),l=xN(o),c=da(t),d=a==="y",u=s.x+s.width/2-i.width/2,f=s.y+s.height/2-i.height/2,h=s[l]/2-i[l]/2;let p;switch(c){case"top":p={x:u,y:s.y-i.height};break;case"bottom":p={x:u,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:f};break;case"left":p={x:s.x-i.width,y:f};break;default:p={x:s.x,y:s.y}}switch(Hd(t)){case"start":p[o]-=h*(n&&d?-1:1);break;case"end":p[o]+=h*(n&&d?-1:1);break}return p}const mU=async(e,t,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:f}=sC(d,s,c),h=s,p={},v=0;for(let g=0;g<l.length;g++){const{name:y,fn:j}=l[g],{x:m,y:b,data:N,reset:w}=await j({x:u,y:f,initialPlacement:s,placement:h,strategy:i,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=m??u,f=b??f,p={...p,[y]:{...p[y],...N}},w&&v<=50&&(v++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(d=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:u,y:f}=sC(d,h,c)),g=-1)}return{x:u,y:f,placement:h,strategy:i,middlewareData:p}};async function Uf(e,t){var n;t===void 0&&(t={});const{x:s,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=ca(t,e),v=o5(p),y=l[h?f==="floating"?"reference":"floating":f],j=pg(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),m=f==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),N=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},w=pg(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:m,offsetParent:b,strategy:c}):m);return{top:(j.top-w.top+v.top)/N.y,bottom:(w.bottom-j.bottom+v.bottom)/N.y,left:(j.left-w.left+v.left)/N.x,right:(w.right-j.right+v.right)/N.x}}const pU=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=ca(e,t)||{};if(d==null)return{};const f=o5(u),h={x:n,y:s},p=vN(i),v=xN(p),g=await o.getDimensions(d),y=p==="y",j=y?"top":"left",m=y?"bottom":"right",b=y?"clientHeight":"clientWidth",N=a.reference[v]+a.reference[p]-h[p]-a.floating[v],w=h[p]-a.reference[p],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let k=S?S[b]:0;(!k||!await(o.isElement==null?void 0:o.isElement(S)))&&(k=l.floating[b]||a.floating[v]);const P=N/2-w/2,E=k/2-g[v]/2-1,_=po(f[j],E),F=po(f[m],E),A=_,T=k-g[v]-F,M=k/2-g[v]/2+P,O=pj(A,M,T),C=!c.arrow&&Hd(i)!=null&&M!==O&&a.reference[v]/2-(M<A?_:F)-g[v]/2<0,R=C?M<A?M-A:M-T:0;return{[p]:h[p]+R,data:{[p]:O,centerOffset:M-O-R,...C&&{alignmentOffset:R}},reset:C}}}),gU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...y}=ca(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const j=da(i),m=go(l),b=da(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),w=h||(b||!g?[mg(l)]:dU(l)),S=v!=="none";!h&&S&&w.push(...fU(l,g,v,N));const k=[l,...w],P=await Uf(t,y),E=[];let _=((s=a.flip)==null?void 0:s.overflows)||[];if(u&&E.push(P[j]),f){const M=cU(i,o,N);E.push(P[M[0]],P[M[1]])}if(_=[..._,{placement:i,overflows:E}],!E.every(M=>M<=0)){var F,A;const M=(((F=a.flip)==null?void 0:F.index)||0)+1,O=k[M];if(O)return{data:{index:M,overflows:_},reset:{placement:O}};let C=(A=_.filter(R=>R.overflows[0]<=0).sort((R,I)=>R.overflows[1]-I.overflows[1])[0])==null?void 0:A.placement;if(!C)switch(p){case"bestFit":{var T;const R=(T=_.filter(I=>{if(S){const B=go(I.placement);return B===m||B==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(B=>B>0).reduce((B,H)=>B+H,0)]).sort((I,B)=>I[1]-B[1])[0])==null?void 0:T[0];R&&(C=R);break}case"initialPlacement":C=l;break}if(i!==C)return{reset:{placement:C}}}return{}}}};function iC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function aC(e){return aU.some(t=>e[t]>=0)}const xU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...i}=ca(e,t);switch(s){case"referenceHidden":{const a=await Uf(t,{...i,elementContext:"reference"}),o=iC(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:aC(o)}}}case"escaped":{const a=await Uf(t,{...i,altBoundary:!0}),o=iC(a,n.floating);return{data:{escapedOffsets:o,escaped:aC(o)}}}default:return{}}}}};async function vU(e,t){const{placement:n,platform:s,elements:i}=e,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=da(n),l=Hd(n),c=go(n)==="y",d=["left","top"].includes(o)?-1:1,u=a&&c?-1:1,f=ca(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*u,y:h*d}:{x:h*d,y:p*u}}const yU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await vU(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},bU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:j,y:m}=y;return{x:j,y:m}}},...c}=ca(e,t),d={x:n,y:s},u=await Uf(t,c),f=go(da(i)),h=gN(f);let p=d[h],v=d[f];if(a){const y=h==="y"?"top":"left",j=h==="y"?"bottom":"right",m=p+u[y],b=p-u[j];p=pj(m,p,b)}if(o){const y=f==="y"?"top":"left",j=f==="y"?"bottom":"right",m=v+u[y],b=v-u[j];v=pj(m,v,b)}const g=l.fn({...t,[h]:p,[f]:v});return{...g,data:{x:g.x-n,y:g.y-s,enabled:{[h]:a,[f]:o}}}}}},jU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ca(e,t),u={x:n,y:s},f=go(i),h=gN(f);let p=u[h],v=u[f];const g=ca(l,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=h==="y"?"height":"width",N=a.reference[h]-a.floating[b]+y.mainAxis,w=a.reference[h]+a.reference[b]-y.mainAxis;p<N?p=N:p>w&&(p=w)}if(d){var j,m;const b=h==="y"?"width":"height",N=["top","left"].includes(da(i)),w=a.reference[f]-a.floating[b]+(N&&((j=o.offset)==null?void 0:j[f])||0)+(N?0:y.crossAxis),S=a.reference[f]+a.reference[b]+(N?0:((m=o.offset)==null?void 0:m[f])||0)-(N?y.crossAxis:0);v<w?v=w:v>S&&(v=S)}return{[h]:p,[f]:v}}}},wU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=ca(e,t),u=await Uf(t,d),f=da(i),h=Hd(i),p=go(i)==="y",{width:v,height:g}=a.floating;let y,j;f==="top"||f==="bottom"?(y=f,j=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(j=f,y=h==="end"?"top":"bottom");const m=g-u.top-u.bottom,b=v-u.left-u.right,N=po(g-u[y],m),w=po(v-u[j],b),S=!t.middlewareData.shift;let k=N,P=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(k=m),S&&!h){const _=Ur(u.left,0),F=Ur(u.right,0),A=Ur(u.top,0),T=Ur(u.bottom,0);p?P=v-2*(_!==0||F!==0?_+F:Ur(u.left,u.right)):k=g-2*(A!==0||T!==0?A+T:Ur(u.top,u.bottom))}await c({...t,availableWidth:P,availableHeight:k});const E=await o.getDimensions(l.floating);return v!==E.width||g!==E.height?{reset:{rects:!0}}:{}}}};function mv(){return typeof window<"u"}function Kd(e){return l5(e)?(e.nodeName||"").toLowerCase():"#document"}function Gr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Pi(e){var t;return(t=(l5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function l5(e){return mv()?e instanceof Node||e instanceof Gr(e).Node:!1}function Js(e){return mv()?e instanceof Element||e instanceof Gr(e).Element:!1}function ki(e){return mv()?e instanceof HTMLElement||e instanceof Gr(e).HTMLElement:!1}function oC(e){return!mv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gr(e).ShadowRoot}function Jh(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=Xs(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(i)}function NU(e){return["table","td","th"].includes(Kd(e))}function pv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function yN(e){const t=bN(),n=Js(e)?Xs(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function SU(e){let t=xo(e);for(;ki(t)&&!id(t);){if(yN(t))return t;if(pv(t))return null;t=xo(t)}return null}function bN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function id(e){return["html","body","#document"].includes(Kd(e))}function Xs(e){return Gr(e).getComputedStyle(e)}function gv(e){return Js(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function xo(e){if(Kd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||oC(e)&&e.host||Pi(e);return oC(t)?t.host:t}function c5(e){const t=xo(e);return id(t)?e.ownerDocument?e.ownerDocument.body:e.body:ki(t)&&Jh(t)?t:c5(t)}function Vf(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=c5(e),a=i===((s=e.ownerDocument)==null?void 0:s.body),o=Gr(i);if(a){const l=xj(o);return t.concat(o,o.visualViewport||[],Jh(i)?i:[],l&&n?Vf(l):[])}return t.concat(i,Vf(i,[],n))}function xj(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function d5(e){const t=Xs(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=ki(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:s,l=hg(n)!==a||hg(s)!==o;return l&&(n=a,s=o),{width:n,height:s,$:l}}function jN(e){return Js(e)?e:e.contextElement}function Ac(e){const t=jN(e);if(!ki(t))return gi(1);const n=t.getBoundingClientRect(),{width:s,height:i,$:a}=d5(t);let o=(a?hg(n.width):n.width)/s,l=(a?hg(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const kU=gi(0);function u5(e){const t=Gr(e);return!bN()||!t.visualViewport?kU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function CU(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gr(e)?!1:t}function bl(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=jN(e);let o=gi(1);t&&(s?Js(s)&&(o=Ac(s)):o=Ac(e));const l=CU(a,n,s)?u5(a):gi(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(a){const h=Gr(a),p=s&&Js(s)?Gr(s):s;let v=h,g=xj(v);for(;g&&s&&p!==v;){const y=Ac(g),j=g.getBoundingClientRect(),m=Xs(g),b=j.left+(g.clientLeft+parseFloat(m.paddingLeft))*y.x,N=j.top+(g.clientTop+parseFloat(m.paddingTop))*y.y;c*=y.x,d*=y.y,u*=y.x,f*=y.y,c+=b,d+=N,v=Gr(g),g=xj(v)}}return pg({width:u,height:f,x:c,y:d})}function wN(e,t){const n=gv(e).scrollLeft;return t?t.left+n:bl(Pi(e)).left+n}function f5(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=s.left+t.scrollLeft-(n?0:wN(e,s)),a=s.top+t.scrollTop;return{x:i,y:a}}function AU(e){let{elements:t,rect:n,offsetParent:s,strategy:i}=e;const a=i==="fixed",o=Pi(s),l=t?pv(t.floating):!1;if(s===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},d=gi(1);const u=gi(0),f=ki(s);if((f||!f&&!a)&&((Kd(s)!=="body"||Jh(o))&&(c=gv(s)),ki(s))){const p=bl(s);d=Ac(s),u.x=p.x+s.clientLeft,u.y=p.y+s.clientTop}const h=o&&!f&&!a?f5(o,c,!0):gi(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:n.y*d.y-c.scrollTop*d.y+u.y+h.y}}function PU(e){return Array.from(e.getClientRects())}function EU(e){const t=Pi(e),n=gv(e),s=e.ownerDocument.body,i=Ur(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=Ur(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+wN(e);const l=-n.scrollTop;return Xs(s).direction==="rtl"&&(o+=Ur(t.clientWidth,s.clientWidth)-i),{width:i,height:a,x:o,y:l}}function TU(e,t){const n=Gr(e),s=Pi(e),i=n.visualViewport;let a=s.clientWidth,o=s.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=bN();(!d||d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function OU(e,t){const n=bl(e,!0,t==="fixed"),s=n.top+e.clientTop,i=n.left+e.clientLeft,a=ki(e)?Ac(e):gi(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,d=s*a.y;return{width:o,height:l,x:c,y:d}}function lC(e,t,n){let s;if(t==="viewport")s=TU(e,n);else if(t==="document")s=EU(Pi(e));else if(Js(t))s=OU(t,n);else{const i=u5(e);s={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return pg(s)}function h5(e,t){const n=xo(e);return n===t||!Js(n)||id(n)?!1:Xs(n).position==="fixed"||h5(n,t)}function _U(e,t){const n=t.get(e);if(n)return n;let s=Vf(e,[],!1).filter(l=>Js(l)&&Kd(l)!=="body"),i=null;const a=Xs(e).position==="fixed";let o=a?xo(e):e;for(;Js(o)&&!id(o);){const l=Xs(o),c=yN(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Jh(o)&&!c&&h5(e,o))?s=s.filter(u=>u!==o):i=l,o=xo(o)}return t.set(e,s),s}function IU(e){let{element:t,boundary:n,rootBoundary:s,strategy:i}=e;const o=[...n==="clippingAncestors"?pv(t)?[]:_U(t,this._c):[].concat(n),s],l=o[0],c=o.reduce((d,u)=>{const f=lC(t,u,i);return d.top=Ur(f.top,d.top),d.right=po(f.right,d.right),d.bottom=po(f.bottom,d.bottom),d.left=Ur(f.left,d.left),d},lC(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function RU(e){const{width:t,height:n}=d5(e);return{width:t,height:n}}function MU(e,t,n){const s=ki(t),i=Pi(t),a=n==="fixed",o=bl(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=gi(0);if(s||!s&&!a)if((Kd(t)!=="body"||Jh(i))&&(l=gv(t)),s){const h=bl(t,!0,a,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else i&&(c.x=wN(i));const d=i&&!s&&!a?f5(i,l):gi(0),u=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:u,y:f,width:o.width,height:o.height}}function ib(e){return Xs(e).position==="static"}function cC(e,t){if(!ki(e)||Xs(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Pi(e)===n&&(n=n.ownerDocument.body),n}function m5(e,t){const n=Gr(e);if(pv(e))return n;if(!ki(e)){let i=xo(e);for(;i&&!id(i);){if(Js(i)&&!ib(i))return i;i=xo(i)}return n}let s=cC(e,t);for(;s&&NU(s)&&ib(s);)s=cC(s,t);return s&&id(s)&&ib(s)&&!yN(s)?n:s||SU(e)||n}const FU=async function(e){const t=this.getOffsetParent||m5,n=this.getDimensions,s=await n(e.floating);return{reference:MU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function $U(e){return Xs(e).direction==="rtl"}const DU={convertOffsetParentRelativeRectToViewportRelativeRect:AU,getDocumentElement:Pi,getClippingRect:IU,getOffsetParent:m5,getElementRects:FU,getClientRects:PU,getDimensions:RU,getScale:Ac,isElement:Js,isRTL:$U};function p5(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function LU(e,t){let n=null,s;const i=Pi(e);function a(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:u,top:f,width:h,height:p}=d;if(l||t(),!h||!p)return;const v=Bm(f),g=Bm(i.clientWidth-(u+h)),y=Bm(i.clientHeight-(f+p)),j=Bm(u),b={rootMargin:-v+"px "+-g+"px "+-y+"px "+-j+"px",threshold:Ur(0,po(1,c))||1};let N=!0;function w(S){const k=S[0].intersectionRatio;if(k!==c){if(!N)return o();k?o(!1,k):s=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!p5(d,e.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(w,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,b)}n.observe(e)}return o(!0),a}function BU(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=jN(e),u=i||a?[...d?Vf(d):[],...Vf(t)]:[];u.forEach(j=>{i&&j.addEventListener("scroll",n,{passive:!0}),a&&j.addEventListener("resize",n)});const f=d&&l?LU(d,n):null;let h=-1,p=null;o&&(p=new ResizeObserver(j=>{let[m]=j;m&&m.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),d&&!c&&p.observe(d),p.observe(t));let v,g=c?bl(e):null;c&&y();function y(){const j=bl(e);g&&!p5(g,j)&&n(),g=j,v=requestAnimationFrame(y)}return n(),()=>{var j;u.forEach(m=>{i&&m.removeEventListener("scroll",n),a&&m.removeEventListener("resize",n)}),f==null||f(),(j=p)==null||j.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const zU=yU,qU=bU,UU=gU,VU=wU,WU=xU,dC=pU,HU=jU,KU=(e,t,n)=>{const s=new Map,i={platform:DU,...n},a={...i.platform,_c:s};return mU(e,t,{...i,platform:a})};var Pp=typeof document<"u"?x.useLayoutEffect:x.useEffect;function gg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!gg(e[s],t[s]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){const a=i[s];if(!(a==="_owner"&&e.$$typeof)&&!gg(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function g5(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function uC(e,t){const n=g5(e);return Math.round(t*n)/n}function ab(e){const t=x.useRef(e);return Pp(()=>{t.current=e}),t}function GU(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,f]=x.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=x.useState(s);gg(h,s)||p(s);const[v,g]=x.useState(null),[y,j]=x.useState(null),m=x.useCallback(I=>{I!==S.current&&(S.current=I,g(I))},[]),b=x.useCallback(I=>{I!==k.current&&(k.current=I,j(I))},[]),N=a||v,w=o||y,S=x.useRef(null),k=x.useRef(null),P=x.useRef(u),E=c!=null,_=ab(c),F=ab(i),A=ab(d),T=x.useCallback(()=>{if(!S.current||!k.current)return;const I={placement:t,strategy:n,middleware:h};F.current&&(I.platform=F.current),KU(S.current,k.current,I).then(B=>{const H={...B,isPositioned:A.current!==!1};M.current&&!gg(P.current,H)&&(P.current=H,Ol.flushSync(()=>{f(H)}))})},[h,t,n,F,A]);Pp(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(I=>({...I,isPositioned:!1})))},[d]);const M=x.useRef(!1);Pp(()=>(M.current=!0,()=>{M.current=!1}),[]),Pp(()=>{if(N&&(S.current=N),w&&(k.current=w),N&&w){if(_.current)return _.current(N,w,T);T()}},[N,w,T,_,E]);const O=x.useMemo(()=>({reference:S,floating:k,setReference:m,setFloating:b}),[m,b]),C=x.useMemo(()=>({reference:N,floating:w}),[N,w]),R=x.useMemo(()=>{const I={position:n,left:0,top:0};if(!C.floating)return I;const B=uC(C.floating,u.x),H=uC(C.floating,u.y);return l?{...I,transform:"translate("+B+"px, "+H+"px)",...g5(C.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:H}},[n,l,C.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:T,refs:O,elements:C,floatingStyles:R}),[u,T,O,C,R])}const YU=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:i}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?dC({element:s.current,padding:i}).fn(n):{}:s?dC({element:s,padding:i}).fn(n):{}}}},QU=(e,t)=>({...zU(e),options:[e,t]}),JU=(e,t)=>({...qU(e),options:[e,t]}),XU=(e,t)=>({...HU(e),options:[e,t]}),ZU=(e,t)=>({...UU(e),options:[e,t]}),e9=(e,t)=>({...VU(e),options:[e,t]}),t9=(e,t)=>({...WU(e),options:[e,t]}),n9=(e,t)=>({...YU(e),options:[e,t]});var r9="Arrow",x5=x.forwardRef((e,t)=>{const{children:n,width:s=10,height:i=5,...a}=e;return r.jsx(He.svg,{...a,ref:t,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});x5.displayName=r9;var s9=x5;function xv(e){const[t,n]=x.useState(void 0);return Xn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var NN="Popper",[v5,vv]=Mr(NN),[i9,y5]=v5(NN),b5=e=>{const{__scopePopper:t,children:n}=e,[s,i]=x.useState(null);return r.jsx(i9,{scope:t,anchor:s,onAnchorChange:i,children:n})};b5.displayName=NN;var j5="PopperAnchor",w5=x.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...i}=e,a=y5(j5,n),o=x.useRef(null),l=ct(t,o);return x.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:r.jsx(He.div,{...i,ref:l})});w5.displayName=j5;var SN="PopperContent",[a9,o9]=v5(SN),N5=x.forwardRef((e,t)=>{var de,ve,ce,U,L,z;const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:v,...g}=e,y=y5(SN,n),[j,m]=x.useState(null),b=ct(t,Ne=>m(Ne)),[N,w]=x.useState(null),S=xv(N),k=(S==null?void 0:S.width)??0,P=(S==null?void 0:S.height)??0,E=s+(a!=="center"?"-"+a:""),_=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(d)?d:[d],A=F.length>0,T={padding:_,boundary:F.filter(c9),altBoundary:A},{refs:M,floatingStyles:O,placement:C,isPositioned:R,middlewareData:I}=GU({strategy:"fixed",placement:E,whileElementsMounted:(...Ne)=>BU(...Ne,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[QU({mainAxis:i+P,alignmentAxis:o}),c&&JU({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?XU():void 0,...T}),c&&ZU({...T}),e9({...T,apply:({elements:Ne,rects:le,availableWidth:Ae,availableHeight:Ke})=>{const{width:Fe,height:ht}=le.reference,nt=Ne.floating.style;nt.setProperty("--radix-popper-available-width",`${Ae}px`),nt.setProperty("--radix-popper-available-height",`${Ke}px`),nt.setProperty("--radix-popper-anchor-width",`${Fe}px`),nt.setProperty("--radix-popper-anchor-height",`${ht}px`)}}),N&&n9({element:N,padding:l}),d9({arrowWidth:k,arrowHeight:P}),h&&t9({strategy:"referenceHidden",...T})]}),[B,H]=C5(C),Q=yn(v);Xn(()=>{R&&(Q==null||Q())},[R,Q]);const D=(de=I.arrow)==null?void 0:de.x,te=(ve=I.arrow)==null?void 0:ve.y,V=((ce=I.arrow)==null?void 0:ce.centerOffset)!==0,[J,me]=x.useState();return Xn(()=>{j&&me(window.getComputedStyle(j).zIndex)},[j]),r.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:R?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(U=I.transformOrigin)==null?void 0:U.x,(L=I.transformOrigin)==null?void 0:L.y].join(" "),...((z=I.hide)==null?void 0:z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(a9,{scope:n,placedSide:B,onArrowChange:w,arrowX:D,arrowY:te,shouldHideArrow:V,children:r.jsx(He.div,{"data-side":B,"data-align":H,...g,ref:b,style:{...g.style,animation:R?void 0:"none"}})})})});N5.displayName=SN;var S5="PopperArrow",l9={top:"bottom",right:"left",bottom:"top",left:"right"},k5=x.forwardRef(function(t,n){const{__scopePopper:s,...i}=t,a=o9(S5,s),o=l9[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(s9,{...i,ref:n,style:{...i.style,display:"block"}})})});k5.displayName=S5;function c9(e){return e!==null}var d9=e=>({name:"transformOrigin",options:e,fn(t){var y,j,m;const{placement:n,rects:s,middlewareData:i}=t,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=C5(n),f={start:"0%",center:"50%",end:"100%"}[u],h=(((j=i.arrow)==null?void 0:j.x)??0)+l/2,p=(((m=i.arrow)==null?void 0:m.y)??0)+c/2;let v="",g="";return d==="bottom"?(v=o?f:`${h}px`,g=`${-c}px`):d==="top"?(v=o?f:`${h}px`,g=`${s.floating.height+c}px`):d==="right"?(v=`${-c}px`,g=o?f:`${p}px`):d==="left"&&(v=`${s.floating.width+c}px`,g=o?f:`${p}px`),{data:{x:v,y:g}}}});function C5(e){const[t,n="center"]=e.split("-");return[t,n]}var A5=b5,P5=w5,E5=N5,T5=k5,[yv,ZNe]=Mr("Tooltip",[vv]),bv=vv(),O5="TooltipProvider",u9=700,vj="tooltip.open",[f9,kN]=yv(O5),_5=e=>{const{__scopeTooltip:t,delayDuration:n=u9,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:a}=e,o=x.useRef(!0),l=x.useRef(!1),c=x.useRef(0);return x.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(f9,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:x.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};_5.displayName=O5;var jv="Tooltip",[h9,wv]=yv(jv),I5=e=>{const{__scopeTooltip:t,children:n,open:s,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=kN(jv,e.__scopeTooltip),d=bv(t),[u,f]=x.useState(null),h=Xi(),p=x.useRef(0),v=o??c.disableHoverableContent,g=l??c.delayDuration,y=x.useRef(!1),[j=!1,m]=bi({prop:s,defaultProp:i,onChange:k=>{k?(c.onOpen(),document.dispatchEvent(new CustomEvent(vj))):c.onClose(),a==null||a(k)}}),b=x.useMemo(()=>j?y.current?"delayed-open":"instant-open":"closed",[j]),N=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,m(!0)},[m]),w=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,m(!1)},[m]),S=x.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,m(!0),p.current=0},g)},[g,m]);return x.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),r.jsx(A5,{...d,children:r.jsx(h9,{scope:t,contentId:h,open:j,stateAttribute:b,trigger:u,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayedRef.current?S():N()},[c.isOpenDelayedRef,S,N]),onTriggerLeave:x.useCallback(()=>{v?w():(window.clearTimeout(p.current),p.current=0)},[w,v]),onOpen:N,onClose:w,disableHoverableContent:v,children:n})})};I5.displayName=jv;var yj="TooltipTrigger",R5=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=wv(yj,n),a=kN(yj,n),o=bv(n),l=x.useRef(null),c=ct(t,l,i.onTriggerChange),d=x.useRef(!1),u=x.useRef(!1),f=x.useCallback(()=>d.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),r.jsx(P5,{asChild:!0,...o,children:r.jsx(He.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:c,onPointerMove:$e(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:$e(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:$e(e.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:$e(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:$e(e.onBlur,i.onClose),onClick:$e(e.onClick,i.onClose)})})});R5.displayName=yj;var m9="TooltipPortal",[eSe,p9]=yv(m9,{forceMount:void 0}),ad="TooltipContent",M5=x.forwardRef((e,t)=>{const n=p9(ad,e.__scopeTooltip),{forceMount:s=n.forceMount,side:i="top",...a}=e,o=wv(ad,e.__scopeTooltip);return r.jsx(vs,{present:s||o.open,children:o.disableHoverableContent?r.jsx(F5,{side:i,...a,ref:t}):r.jsx(g9,{side:i,...a,ref:t})})}),g9=x.forwardRef((e,t)=>{const n=wv(ad,e.__scopeTooltip),s=kN(ad,e.__scopeTooltip),i=x.useRef(null),a=ct(t,i),[o,l]=x.useState(null),{trigger:c,onClose:d}=n,u=i.current,{onPointerInTransitChange:f}=s,h=x.useCallback(()=>{l(null),f(!1)},[f]),p=x.useCallback((v,g)=>{const y=v.currentTarget,j={x:v.clientX,y:v.clientY},m=j9(j,y.getBoundingClientRect()),b=w9(j,m),N=N9(g.getBoundingClientRect()),w=k9([...b,...N]);l(w),f(!0)},[f]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(c&&u){const v=y=>p(y,u),g=y=>p(y,c);return c.addEventListener("pointerleave",v),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",g)}}},[c,u,p,h]),x.useEffect(()=>{if(o){const v=g=>{const y=g.target,j={x:g.clientX,y:g.clientY},m=(c==null?void 0:c.contains(y))||(u==null?void 0:u.contains(y)),b=!S9(j,o);m?h():b&&(h(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,u,o,d,h]),r.jsx(F5,{...e,ref:a})}),[x9,v9]=yv(jv,{isInside:!1}),y9=xI("TooltipContent"),F5=x.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=wv(ad,n),d=bv(n),{onClose:u}=c;return x.useEffect(()=>(document.addEventListener(vj,u),()=>document.removeEventListener(vj,u)),[u]),x.useEffect(()=>{if(c.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),r.jsx(Yh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:r.jsxs(E5,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(y9,{children:s}),r.jsx(x9,{scope:n,isInside:!0,children:r.jsx(P7,{id:c.contentId,role:"tooltip",children:i||s})})]})})});M5.displayName=ad;var $5="TooltipArrow",b9=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=bv(n);return v9($5,n).isInside?null:r.jsx(T5,{...i,...s,ref:t})});b9.displayName=$5;function j9(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,s,i,a)){case a:return"left";case i:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function w9(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function N9(e){const{top:t,right:n,bottom:s,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:s},{x:i,y:s}]}function S9(e,t){const{x:n,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>s!=u>s&&n<(d-l)*(s-c)/(u-c)+l&&(i=!i)}return i}function k9(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),C9(t)}function C9(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const i=e[s];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const i=e[s];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var A9=_5,P9=I5,E9=R5,D5=M5;const CN=A9,L5=P9,B5=E9,AN=x.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(D5,{ref:s,sideOffset:t,className:Ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));AN.displayName=D5.displayName;const T9=x.createContext(void 0);function O9({children:e,defaultTheme:t="dark"}){const[n,s]=x.useState(()=>localStorage.getItem("theme")||t);return x.useEffect(()=>{const i=document.documentElement;i.classList.remove("light","dark"),i.classList.add(n),localStorage.setItem("theme",n)},[n]),r.jsx(T9.Provider,{value:{theme:n,setTheme:s},children:e})}const z5=x.createContext(null);function _9(e){const t=new Set;return e.filter(n=>t.has(n.id)?!1:(t.add(n.id),!0))}function I9({children:e}){const[t,n]=x.useState([]),[s,i]=x.useState(!1),a=x.useCallback(d=>{n(u=>{const f=typeof d=="function"?d(u):d;return _9(f)})},[]),o=x.useCallback(d=>{n(u=>u.some(f=>f.id===d.id)?u:[...u,d])},[]),l=x.useCallback((d,u)=>{a(f=>f.map(h=>h.id===d?{...h,...u}:h))},[]),c=x.useCallback(()=>{a([]),i(!1)},[]);return r.jsx(z5.Provider,{value:{messages:t,setMessages:a,addMessage:o,updateMessage:l,clearMessages:c,historyLoaded:s,setHistoryLoaded:i},children:e})}function PN(){const e=x.useContext(z5);if(!e)throw new Error("useChatContext must be used within a ChatProvider");return e}async function R9(){try{const e=await fetch("/api/version");if(!e.ok){console.log("[VERSION] Server version check failed, using fallback");return}const t=await e.json(),n=localStorage.getItem("app_version");if(n&&n!==t.version){console.log(`[VERSION] Detected version change: ${n}  ${t.version}`),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(s=>{s.forEach(i=>{i.unregister()})}),"caches"in window&&caches.keys().then(s=>{s.forEach(i=>{caches.delete(i)})}),localStorage.setItem("app_version",t.version),console.log("[VERSION] Forcing reload for new version..."),window.location.reload();return}localStorage.setItem("app_version",t.version),console.log(`[VERSION] Current version: ${t.version}`)}catch(e){console.log("[VERSION] Version check skipped:",e)}}class M9{constructor(){this.visitorId=this.getOrCreateVisitorId(),this.sessionId=this.getOrCreateSessionId(),this.pageLoadTime=Date.now()}getOrCreateVisitorId(){let t=localStorage.getItem("bjj_visitor_id");return t||(t="v_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),localStorage.setItem("bjj_visitor_id",t)),t}getOrCreateSessionId(){let t=sessionStorage.getItem("bjj_session_id");return t||(t="s_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),sessionStorage.setItem("bjj_session_id",t)),t}getTrafficSource(){const t=document.referrer,n=new URLSearchParams(window.location.search),s=n.get("utm_source");return s?{source:s,utmMedium:n.get("utm_medium"),utmCampaign:n.get("utm_campaign"),referrer:t}:t?t.includes("instagram.com")?{source:"instagram",referrer:t}:t.includes("google.com")?{source:"google",referrer:t}:t.includes("facebook.com")?{source:"facebook",referrer:t}:t.includes("twitter.com")||t.includes("t.co")?{source:"twitter",referrer:t}:t.includes("youtube.com")?{source:"youtube",referrer:t}:t.includes("reddit.com")?{source:"reddit",referrer:t}:t.includes("tiktok.com")?{source:"tiktok",referrer:t}:{source:"referral",referrer:t}:{source:"direct",referrer:""}}getDeviceInfo(){const t=navigator.userAgent;let n="desktop";/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(t)?n="tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)&&(n="mobile");let s="unknown";t.includes("Chrome")?s="Chrome":t.includes("Safari")?s="Safari":t.includes("Firefox")?s="Firefox":t.includes("Edge")&&(s="Edge");let i="unknown";return t.includes("Windows")?i="Windows":t.includes("Mac")?i="macOS":t.includes("iPhone")||t.includes("iPad")?i="iOS":t.includes("Android")?i="Android":t.includes("Linux")&&(i="Linux"),{deviceType:n,browser:s,os:i}}async trackPageView(){try{const t=this.getTrafficSource(),n=this.getDeviceInfo(),s={pagePath:window.location.pathname,pageTitle:document.title,visitorId:this.visitorId,sessionId:this.sessionId,referrer:t.referrer,source:t.source,utmSource:"utmMedium"in t?t.source:null,utmMedium:"utmMedium"in t?t.utmMedium:null,utmCampaign:"utmCampaign"in t?t.utmCampaign:null,deviceType:n.deviceType,browser:n.browser,os:n.os};await fetch("/api/analytics/pageview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),this.trackTimeOnPage()}catch(t){console.error("Analytics error:",t)}}trackTimeOnPage(){window.addEventListener("beforeunload",()=>{const t=Math.round((Date.now()-this.pageLoadTime)/1e3);navigator.sendBeacon("/api/analytics/time-on-page",JSON.stringify({visitorId:this.visitorId,sessionId:this.sessionId,pagePath:window.location.pathname,timeOnPage:t}))})}}if(window.location.pathname==="/"||window.location.pathname.startsWith("/pricing")){const e=new M9;e.trackPageView(),window.bjjAnalytics=e}var q5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},fC=q.createContext&&q.createContext(q5),F9=["attr","size","title"];function $9(e,t){if(e==null)return{};var n=D9(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function D9(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function xg(){return xg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xg.apply(this,arguments)}function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function vg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(n),!0).forEach(function(s){L9(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function L9(e,t,n){return t=B9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B9(e){var t=z9(e,"string");return typeof t=="symbol"?t:t+""}function z9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U5(e){return e&&e.map((t,n)=>q.createElement(t.tag,vg({key:n},t.attr),U5(t.child)))}function q9(e){return t=>q.createElement(U9,xg({attr:vg({},e.attr)},t),U5(e.child))}function U9(e){var t=n=>{var{attr:s,size:i,title:a}=e,o=$9(e,F9),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),q.createElement("svg",xg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:c,style:vg(vg({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&q.createElement("title",null,a),e.children)};return fC!==void 0?q.createElement(fC.Consumer,null,n=>t(n)):t(q5)}function V9(e){return q9({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"},child:[]}]})(e)}function W9(){const[,e]=it();return x.useEffect(()=>{const t=document.querySelectorAll("section:not(.landing-hero)"),n={root:null,rootMargin:"0px",threshold:.1},s=a=>{a.forEach(o=>{o.isIntersecting&&o.target.classList.add("visible")})},i=new IntersectionObserver(s,n);return t.forEach(a=>{i.observe(a)}),()=>{i.disconnect()}},[]),r.jsxs("div",{className:"landing-page page-container",children:[r.jsx("nav",{className:"landing-nav",children:r.jsxs("div",{className:"landing-nav-content",children:[r.jsx("div",{className:"landing-nav-left",children:r.jsx("a",{href:"/",className:"landing-logo-link","data-testid":"link-home",children:r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"landing-logo-img"})})}),r.jsxs("div",{className:"landing-nav-right",children:[r.jsx("button",{className:"landing-nav-login",onClick:()=>e("/login"),"data-testid":"button-login",children:"Login"}),r.jsx("button",{className:"landing-nav-signup",onClick:()=>e("/pricing"),"data-testid":"button-signup",children:"Sign Up"})]})]})}),r.jsxs("section",{className:"landing-hero hero-section",children:[r.jsxs("div",{className:"landing-hero-content",children:[r.jsxs("h1",{className:"landing-hero-headline",children:["The smartest Jiu-Jitsu training partner ever built.",r.jsx("br",{}),"3,000+ instructionals studied & analyzed.",r.jsx("br",{}),"Perfect memory."]}),r.jsxs("p",{className:"landing-hero-subhead",children:["You train. It remembers.",r.jsx("br",{}),"You ask. It knows."]}),r.jsx("button",{className:"landing-cta-button cta-button",onClick:()=>e("/pricing"),"data-testid":"button-start-trial",children:"Start 7-Day Free Trial"}),r.jsx("p",{className:"landing-price-note",children:"$19.99/month  Cancel anytime"})]}),r.jsx("div",{className:"landing-scroll-indicator",children:r.jsx(ji,{className:"landing-scroll-icon"})})]}),r.jsx("section",{className:"landing-intelligence intelligence-section",children:r.jsxs("div",{className:"landing-intelligence-content",children:[r.jsx("h2",{className:"landing-section-header",children:"NOT A SEARCH ENGINE."}),r.jsx("p",{className:"landing-intelligence-body",children:"Prof. OS has analyzed every videotechniques, timestamps, key details."}),r.jsx("div",{className:"landing-conversation-snippet",children:r.jsx("p",{className:"landing-conversation-quote",children:'"Why do I keep losing the underhook?"'})}),r.jsx("p",{className:"landing-intelligence-body",children:"Get breakdowns from multiple world-class coacheseach linked to the exact timestamp you need."})]})}),r.jsx("section",{className:"landing-library library-section",children:r.jsxs("div",{className:"landing-library-content",children:[r.jsx("h2",{className:"landing-section-header",children:"YOUR VIDEO LIBRARY"}),r.jsx("p",{className:"landing-library-body",children:"3,500+ videos searchable by technique, position, or instructor. Save what matters. Build your collection."}),r.jsx("p",{className:"landing-library-note",children:"Growing daily."})]})}),r.jsx("section",{className:"landing-proof proof-section",children:r.jsxs("div",{className:"landing-proof-content",children:[r.jsxs("div",{className:"landing-checklist",children:[r.jsxs("div",{className:"landing-check-item",children:[r.jsx("span",{className:"landing-check-icon",children:""}),r.jsx("span",{children:"3,500+ videos analyzed"})]}),r.jsxs("div",{className:"landing-check-item",children:[r.jsx("span",{className:"landing-check-icon",children:""}),r.jsx("span",{children:"200+ elite instructors"})]}),r.jsxs("div",{className:"landing-check-item",children:[r.jsx("span",{className:"landing-check-icon",children:""}),r.jsx("span",{children:"New content added daily"})]}),r.jsxs("div",{className:"landing-check-item",children:[r.jsx("span",{className:"landing-check-icon",children:""}),r.jsx("span",{children:"Every session remembered"})]}),r.jsxs("div",{className:"landing-check-item",children:[r.jsx("span",{className:"landing-check-icon",children:""}),r.jsx("span",{children:"Your library, your way"})]})]}),r.jsx("button",{className:"landing-cta-button cta-button",onClick:()=>e("/pricing"),"data-testid":"button-start-trial-footer",children:"Start 7-Day Free Trial"})]})}),r.jsx("footer",{className:"landing-footer",children:r.jsxs("div",{className:"landing-footer-content",children:[r.jsxs("div",{className:"landing-footer-links",children:[r.jsx("a",{href:"/privacy",className:"landing-footer-link footer-link","data-testid":"link-privacy",children:"Privacy Policy"}),r.jsx("span",{className:"landing-footer-separator",children:""}),r.jsx("a",{href:"/terms",className:"landing-footer-link footer-link","data-testid":"link-terms",children:"Terms of Service"}),r.jsx("span",{className:"landing-footer-separator",children:""}),r.jsx("a",{href:"mailto:support@bjjos.app",className:"landing-footer-link footer-link","data-testid":"link-support",children:"support@bjjos.app"})]}),r.jsx("a",{href:"https://instagram.com/bjjosapp",target:"_blank",rel:"noopener noreferrer",className:"landing-footer-instagram","data-testid":"link-instagram","aria-label":"Follow us on Instagram",children:r.jsx(V9,{})}),r.jsx("p",{className:"landing-footer-copyright footer-copyright",children:" 2025 BJJ OS"})]})}),r.jsx("style",{children:`
        /* ==================== GLOBAL VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0A0A0A;
          --white: #FFFFFF;
          --gray-light: #B0B0B0;
          --gray-medium: #71717A;
          --gray-dim: #52525B;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --blue-hover-1: #1D4ED8;
          --purple-hover-1: #6D28D9;
          --blue-hover-2: #1E40AF;
          --purple-hover-2: #5B21B6;
          --green: #22C55E;
          --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
          --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
          
          /* Typography Scale */
          --text-hero: clamp(36px, 7vw, 56px);
          --text-section: clamp(20px, 4vw, 28px);
          --text-subhead: clamp(18px, 3vw, 24px);
          --text-body: clamp(16px, 2vw, 18px);
          --text-small: clamp(13px, 1.5vw, 15px);
        }

        /* ==================== MOTION SYSTEM ==================== */
        @media (prefers-reduced-motion: reduce) {
          *,
          *::before,
          *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
          }
        }

        html {
          scroll-behavior: smooth;
          overflow-x: hidden;
          -webkit-overflow-scrolling: touch;
        }

        section {
          opacity: 0;
          transform: translateY(20px);
          transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .hero-section {
          opacity: 1 !important;
          transform: translateY(0) !important;
          transition: none !important;
        }

        section.visible {
          opacity: 1;
          transform: translateY(0);
          will-change: auto;
        }

        .cta-button {
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
        }

        @keyframes gradient-shift {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }

        /* ==================== BASE STYLES ==================== */
        .landing-page {
          font-family: var(--font-sans);
          background: var(--black);
          color: var(--white);
          min-height: 100vh;
          overflow-x: hidden;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          text-rendering: optimizeLegibility;
          position: relative;
        }

        .landing-page::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
          pointer-events: none;
          z-index: 9999;
          mix-blend-mode: overlay;
          opacity: 1;
        }

        .landing-page * {
          box-sizing: border-box;
        }

        /* ==================== NAVIGATION ==================== */
        .landing-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: var(--black);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid var(--gray-dark);
        }

        .landing-nav-content {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 24px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .landing-nav-left {
          display: flex;
          align-items: center;
        }

        .landing-logo-link {
          display: flex;
          align-items: center;
        }

        .landing-logo-img {
          height: 32px;
          width: auto;
        }

        .landing-nav-right {
          display: flex;
          align-items: center;
          gap: 16px;
        }

        .landing-nav-login {
          background: none;
          border: none;
          font-family: var(--font-sans);
          font-size: 15px;
          font-weight: 500;
          color: var(--gray-light);
          cursor: pointer;
          transition: color 150ms ease;
          padding: 12px;
          user-select: none;
        }

        .landing-nav-login:hover {
          color: var(--white);
        }

        .landing-nav-signup {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 0;
          font-family: var(--font-sans);
          font-weight: 600;
          font-size: 14px;
          color: var(--white);
          padding: 10px 20px;
          cursor: pointer;
          transition: background 150ms ease;
          user-select: none;
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
        }

        .landing-nav-signup:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .landing-nav-signup:active {
          background: linear-gradient(135deg, var(--blue-hover-2) 0%, var(--purple-hover-2) 100%);
          transform: translateY(1px);
        }

        /* ==================== HERO SECTION ==================== */
        .landing-hero {
          background: var(--black);
          min-height: 100vh;
          min-height: 100dvh;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          padding: 100px 24px 60px;
          position: relative;
          text-align: center;
        }

        .landing-hero-content {
          max-width: 800px;
          margin: 0 auto;
        }

        .landing-hero-headline {
          font-family: var(--font-mono);
          font-size: var(--text-hero);
          font-weight: 700;
          line-height: 1.15;
          letter-spacing: -0.02em;
          color: var(--white);
          margin: 0 0 32px;
          user-select: text;
        }

        .landing-hero-subhead {
          font-family: var(--font-sans);
          font-size: var(--text-subhead);
          font-weight: 400;
          line-height: 1.6;
          color: var(--gray-light);
          margin: 0 0 48px;
          user-select: text;
        }

        .landing-cta-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 0;
          box-shadow: none;
          font-family: var(--font-sans);
          font-weight: 600;
          font-size: 16px;
          color: var(--white);
          padding: 18px 48px;
          cursor: pointer;
          transition: background 150ms ease;
          margin: 0 auto 16px;
          display: block;
          user-select: none;
          will-change: transform;
          transform: translateZ(0);
          backface-visibility: hidden;
        }

        .landing-cta-button:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .landing-cta-button:active {
          background: linear-gradient(135deg, var(--blue-hover-2) 0%, var(--purple-hover-2) 100%);
          transform: translateY(1px);
        }

        .landing-price-note {
          font-family: var(--font-sans);
          font-size: var(--text-small);
          font-weight: 400;
          color: var(--gray-medium);
          line-height: 1.5;
          text-align: center;
          margin: 0;
        }

        /* Scroll indicator */
        .landing-scroll-indicator {
          position: absolute;
          bottom: 32px;
          left: 50%;
          transform: translateX(-50%);
          animation: bounce 2s infinite;
        }

        .landing-scroll-icon {
          width: 24px;
          height: 24px;
          color: var(--gray-dim);
          opacity: 0.6;
        }

        @keyframes bounce {
          0%, 20%, 50%, 80%, 100% {
            transform: translateX(-50%) translateY(0);
          }
          40% {
            transform: translateX(-50%) translateY(-8px);
          }
          60% {
            transform: translateX(-50%) translateY(-4px);
          }
        }

        /* ==================== INTELLIGENCE SECTION (Screen 2) ==================== */
        .landing-intelligence {
          background: var(--black);
          padding: 100px 24px;
          min-height: 100vh;
          min-height: 100dvh;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .landing-intelligence-content {
          max-width: 700px;
          margin: 0 auto;
          text-align: center;
        }

        .landing-section-header {
          font-family: var(--font-mono);
          font-size: var(--text-section);
          font-weight: 700;
          color: var(--white);
          letter-spacing: -0.01em;
          margin: 0 0 40px;
          text-transform: uppercase;
        }

        .landing-intelligence-body {
          font-family: var(--font-sans);
          font-size: var(--text-body);
          font-weight: 400;
          line-height: 1.75;
          color: var(--gray-light);
          margin: 0 0 32px;
        }

        .landing-conversation-snippet {
          background: var(--black-elevated);
          border-left: 3px solid var(--purple);
          padding: 24px 32px;
          margin: 40px 0;
        }

        .landing-conversation-quote {
          font-family: var(--font-sans);
          font-size: var(--text-subhead);
          font-weight: 400;
          font-style: italic;
          color: var(--white);
          margin: 0;
          line-height: 1.5;
        }

        /* ==================== LIBRARY SECTION (Screen 3) ==================== */
        .landing-library {
          background: var(--black);
          padding: 80px 24px;
          min-height: 60vh;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .landing-library-content {
          max-width: 600px;
          margin: 0 auto;
          text-align: center;
        }

        .landing-library-body {
          font-family: var(--font-sans);
          font-size: var(--text-body);
          font-weight: 400;
          line-height: 1.7;
          color: var(--gray-light);
          margin: 0 0 16px;
        }

        .landing-library-note {
          font-family: var(--font-sans);
          font-size: var(--text-small);
          font-weight: 400;
          color: var(--gray-medium);
          margin: 0;
        }

        /* ==================== PROOF SECTION (Screen 4) ==================== */
        .landing-proof {
          background: var(--black);
          padding: 80px 24px 100px;
          min-height: 60vh;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .landing-proof-content {
          max-width: 500px;
          margin: 0 auto;
          text-align: center;
        }

        .landing-checklist {
          margin-bottom: 48px;
        }

        .landing-check-item {
          display: flex;
          align-items: center;
          justify-content: flex-start;
          gap: 16px;
          font-family: var(--font-sans);
          font-size: var(--text-body);
          color: var(--gray-light);
          padding: 12px 0;
          text-align: left;
        }

        .landing-check-icon {
          color: var(--green);
          font-size: 18px;
          font-weight: 700;
          flex-shrink: 0;
        }

        /* ==================== FOOTER ==================== */
        .landing-footer {
          background: var(--black);
          padding: 40px 24px;
          border-top: 1px solid var(--gray-dark);
        }

        .landing-footer-content {
          max-width: 1200px;
          margin: 0 auto;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 16px;
        }

        .landing-footer-links {
          display: flex;
          align-items: center;
          gap: 8px;
          flex-wrap: wrap;
          justify-content: center;
        }

        .landing-footer-link {
          font-family: var(--font-sans);
          font-size: 14px;
          color: var(--gray-medium);
          text-decoration: none;
          transition: color 150ms ease;
        }

        .landing-footer-link:hover {
          color: var(--white);
        }

        .landing-footer-separator {
          color: var(--gray-dim);
        }

        .landing-footer-instagram {
          color: var(--gray-medium);
          font-size: 20px;
          transition: color 150ms ease;
        }

        .landing-footer-instagram:hover {
          color: var(--white);
        }

        .landing-footer-copyright {
          font-family: var(--font-sans);
          font-size: 13px;
          color: var(--gray-dim);
          margin: 0;
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .landing-nav {
            height: 64px;
          }

          .landing-hero {
            padding: 80px 20px 50px;
            min-height: 100vh;
            min-height: 100dvh;
          }

          .landing-hero-headline {
            font-size: clamp(28px, 8vw, 40px);
            margin-bottom: 24px;
          }

          .landing-hero-subhead {
            font-size: clamp(16px, 4vw, 20px);
            margin-bottom: 40px;
          }

          .landing-cta-button {
            width: 100%;
            max-width: 300px;
            padding: 16px 32px;
          }

          .landing-intelligence {
            padding: 80px 20px;
            min-height: auto;
          }

          .landing-conversation-snippet {
            padding: 20px 24px;
            margin: 32px 0;
          }

          .landing-library {
            padding: 60px 20px;
            min-height: auto;
          }

          .landing-proof {
            padding: 60px 20px 80px;
            min-height: auto;
          }

          .landing-checklist {
            text-align: left;
          }

          .landing-scroll-indicator {
            bottom: 24px;
          }
        }

        /* Touch Targets */
        @media (max-width: 768px) {
          .landing-nav-login,
          .landing-nav-signup,
          .landing-cta-button {
            min-height: 44px;
          }
        }
      `})]})}function H9(){const e=tn.isNativePlatform()&&tn.getPlatform()==="ios",[,t]=it(),[n,s]=x.useState(""),[i,a]=x.useState(""),[o,l]=x.useState(!1);x.useEffect(()=>{window.scrollTo(0,0)},[]);const c=f=>{const h=f.toUpperCase();s(h),a(""),l(!1)},d=()=>{if(!n){a("Please enter a referral code"),l(!1);return}if(!/^[A-Z0-9]{4,12}$/.test(n)){a("Invalid code format"),l(!1);return}a(`Code ${n} applied - Extra 30 days free trial!`),l(!0)},u=()=>{const f=new URLSearchParams;f.set("plan","monthly"),o&&n&&f.set("ref",n),t(`/signup?${f.toString()}`)};return r.jsxs("div",{className:"pricing-page page-container",children:[r.jsx("nav",{className:"pricing-nav",children:r.jsxs("div",{className:"pricing-nav-content",children:[r.jsx("div",{className:"pricing-nav-left",children:r.jsx("a",{href:"/",className:"pricing-logo-link","data-testid":"link-home",children:r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"pricing-logo-img"})})}),r.jsxs("div",{className:"pricing-nav-right",children:[r.jsx("button",{className:"pricing-nav-login",onClick:()=>t("/login"),"data-testid":"button-login",children:"Login"}),r.jsx("button",{className:"pricing-nav-signup",onClick:()=>t("/pricing"),"data-testid":"button-signup",children:"Sign Up"})]})]})}),r.jsxs("div",{className:"pricing-container",children:[r.jsxs("div",{className:"pricing-header",children:[r.jsx("h1",{className:"pricing-headline",children:"BJJ OS"}),r.jsx("p",{className:"pricing-subheadline",children:"Your AI-powered BJJ training partner"})]}),r.jsxs("div",{className:"pricing-single-card","data-testid":"card-plan",children:[r.jsxs("div",{className:"plan-price-section",children:[r.jsx("div",{className:"plan-price",children:"$19.99"}),r.jsx("div",{className:"plan-period",children:"/month"})]}),r.jsx("div",{className:"trial-badge",children:"7-day free trial"}),r.jsx("p",{className:"trial-note",children:"Credit card required. Auto-charges after 7 days. Cancel anytime."}),r.jsxs("div",{className:"features-list",children:[r.jsxs("div",{className:"feature-item","data-testid":"feature-coaching",children:[r.jsx("span",{className:"feature-check",children:""}),r.jsx("span",{children:"Unlimited Prof. OS coaching"})]}),r.jsxs("div",{className:"feature-item","data-testid":"feature-videos",children:[r.jsx("span",{className:"feature-check",children:""}),r.jsx("span",{children:"3,000+ videos  analyzed, timestamped, searchable"})]}),r.jsxs("div",{className:"feature-item","data-testid":"feature-library",children:[r.jsx("span",{className:"feature-check",children:""}),r.jsx("span",{children:"Your personal video library"})]}),r.jsxs("div",{className:"feature-item","data-testid":"feature-memory",children:[r.jsx("span",{className:"feature-check",children:""}),r.jsx("span",{children:"Training memory that learns your game"})]}),r.jsxs("div",{className:"feature-item","data-testid":"feature-daily",children:[r.jsx("span",{className:"feature-check",children:""}),r.jsx("span",{children:"New content added daily"})]})]}),r.jsx("button",{className:"start-trial-button",onClick:u,"data-testid":"button-start-trial",children:"Start 7-Day Free Trial"})]}),!e&&r.jsxs("div",{className:"referral-section",children:[r.jsx("div",{className:"referral-header",children:"Have a referral code?"}),r.jsxs("div",{className:"referral-input-group",children:[r.jsx("input",{type:"text",className:`referral-input ${o?"valid":""} ${i&&!o?"invalid":""}`,placeholder:"Enter code",value:n,onChange:f=>c(f.target.value),maxLength:12,readOnly:o,"data-testid":"input-referral"}),r.jsx("button",{className:"apply-button",onClick:d,disabled:o,"data-testid":"button-apply-referral",children:"Apply"})]}),i&&r.jsxs("div",{className:o?"referral-success":"referral-error","data-testid":"text-referral-message",children:[o&&r.jsx("span",{className:"success-indicator",children:""}),i]})]})]}),r.jsx("style",{children:`
        /* ==================== GLOBAL VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0F0F0F;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --blue-hover-1: #1D4ED8;
          --purple-hover-1: #6D28D9;
          --blue-hover-2: #1E40AF;
          --purple-hover-2: #5B21B6;
          --green: #22C55E;
          --green-dim: rgba(34, 197, 94, 0.1);
          --green-glow: rgba(34, 197, 94, 0.3);
          --red: #EF4444;
          --font-mono: 'JetBrains Mono', monospace;
        }

        /* ==================== MOTION SYSTEM ==================== */
        
        /* Respect reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
          *,
          *::before,
          *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
          }
        }

        /* Smooth scroll */
        html {
          scroll-behavior: smooth;
          overflow-x: hidden;
          -webkit-overflow-scrolling: touch;
        }

        /* Gradient animation on buttons */
        .continue-button,
        .select-button.selected,
        .pricing-nav-signup {
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
        }

        @keyframes gradient-shift {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }

        /* ==================== BASE STYLES ==================== */
        .pricing-page {
          font-family: var(--font-mono);
          background: var(--black);
          color: var(--white);
          min-height: 100vh;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          text-rendering: optimizeLegibility;
          font-feature-settings: "liga" 1, "kern" 1;
          position: relative;
        }

        /* Subtle grain texture overlay */
        .pricing-page::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
          pointer-events: none;
          z-index: 9999;
          mix-blend-mode: overlay;
          opacity: 1;
        }

        .pricing-page * {
          box-sizing: border-box;
        }

        /* ==================== NAVIGATION ==================== */
        .pricing-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: var(--black);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid var(--gray-dark);
        }

        .pricing-nav-content {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 40px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .pricing-nav-left {
          display: flex;
          align-items: center;
        }

        .pricing-logo-link {
          display: flex;
          align-items: center;
        }

        .pricing-logo-img {
          height: 36px;
          width: auto;
        }

        .pricing-nav-right {
          display: flex;
          align-items: center;
          gap: 24px;
        }

        .pricing-nav-login {
          background: none;
          border: none;
          font-family: var(--font-mono);
          font-size: 16px;
          color: var(--gray-light);
          cursor: pointer;
          transition: color 150ms ease;
          padding: 16px;
          user-select: none;
        }

        .pricing-nav-login:hover {
          color: var(--white);
        }

        .pricing-nav-signup {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 0;
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
          padding: 12px 24px;
          cursor: pointer;
          transition: background 150ms ease;
          user-select: none;
        }

        .pricing-nav-signup:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        /* ==================== CONTAINER ==================== */
        .pricing-container {
          padding: calc(80px + 72px) 40px 80px; /* Top padding + nav height */
          max-width: 900px;
          margin: 0 auto;
        }

        /* ==================== HEADER ==================== */
        .pricing-header {
          text-align: center;
          margin-bottom: 48px;
        }

        .pricing-headline {
          font-size: 48px;
          font-weight: 700;
          color: var(--white);
          line-height: 1.1;
          letter-spacing: -0.01em;
          margin-bottom: 16px;
        }

        .pricing-subheadline {
          font-size: 16px;
          font-weight: 400;
          color: var(--gray-light);
          line-height: 1.6;
          max-width: 600px;
          margin: 0 auto;
        }

        /* ==================== SINGLE PRICING CARD ==================== */
        .pricing-single-card {
          background: var(--black-elevated);
          padding: 48px;
          max-width: 480px;
          margin: 48px auto;
          text-align: center;
          border: 1px solid var(--gray-dark);
        }

        .plan-price-section {
          display: flex;
          align-items: baseline;
          justify-content: center;
          gap: 4px;
          margin-bottom: 16px;
        }

        .plan-price {
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 56px;
          color: var(--white);
          line-height: 1;
        }

        .plan-period {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 18px;
          color: var(--gray-medium);
        }

        .trial-badge {
          display: inline-block;
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          color: var(--white);
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 14px;
          padding: 8px 24px;
          letter-spacing: 0.02em;
          text-transform: uppercase;
          margin-bottom: 12px;
        }

        .trial-note {
          font-family: var(--font-mono);
          font-size: 13px;
          color: var(--gray-medium);
          margin: 0 0 32px;
        }

        .features-list {
          text-align: left;
          margin-bottom: 32px;
        }

        .feature-item {
          display: flex;
          align-items: center;
          gap: 12px;
          font-family: var(--font-mono);
          font-size: 15px;
          color: var(--gray-light);
          padding: 12px 0;
          border-bottom: 1px solid var(--gray-dark);
        }

        .feature-item:last-child {
          border-bottom: none;
        }

        .feature-check {
          color: var(--green);
          font-size: 16px;
          font-weight: 700;
        }

        .start-trial-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
          padding: 18px 48px;
          width: 100%;
          cursor: pointer;
          transition: all 150ms ease;
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
        }

        .start-trial-button:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .start-trial-button:active {
          transform: translateY(1px);
        }

        /* ==================== REFERRAL SECTION ==================== */
        .referral-section {
          margin: 48px auto 0;
          max-width: 500px;
        }

        .referral-header {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 16px;
          color: var(--white);
          margin-bottom: 16px;
          text-align: center;
        }

        .referral-input-group {
          display: flex;
          gap: 16px;
          margin-bottom: 8px;
        }

        /* Referral Input */
        .referral-input {
          background: var(--black-elevated);
          border: 1px solid var(--gray-dark);
          color: var(--white);
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 16px;
          padding: 12px 16px;
          border-radius: 0;
          flex: 1;
          transition: all 150ms ease;
        }

        .referral-input::placeholder {
          color: var(--gray-medium);
        }

        .referral-input:focus {
          outline: none;
          border: 1px solid var(--blue);
        }

        .referral-input.valid {
          border: 1px solid var(--green);
        }

        .referral-input.invalid {
          border: 1px solid var(--red);
          animation: shake 0.3s ease;
        }

        .referral-input:read-only {
          opacity: 0.7;
          cursor: not-allowed;
          border: 1px solid var(--green);
        }

        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-4px); }
          75% { transform: translateX(4px); }
        }

        /* Apply Button */
        .apply-button {
          background: transparent;
          border: 1px solid var(--blue);
          color: var(--blue);
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 14px;
          padding: 12px 32px;
          border-radius: 0;
          cursor: pointer;
          transition: all 150ms ease;
        }

        .apply-button:hover:not(:disabled) {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          color: var(--white);
        }

        .apply-button:active {
          transform: translateY(1px);
        }

        .apply-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Success/Error Messages */
        .referral-success {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 14px;
          color: var(--green);
          text-shadow: 0 0 20px var(--green-glow);
          margin-top: 8px;
          text-align: center;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          animation: success-fade-in 0.3s ease;
        }

        @keyframes success-fade-in {
          from { 
            opacity: 0; 
            transform: translateY(-4px); 
          }
          to { 
            opacity: 1; 
            transform: translateY(0); 
          }
        }

        /* Success checkmark animation */
        .success-indicator {
          color: var(--green);
          font-size: 16px;
          animation: checkmark-pop 0.4s ease;
        }

        @keyframes checkmark-pop {
          0% { 
            transform: scale(0); 
            opacity: 0; 
          }
          50% { 
            transform: scale(1.2); 
          }
          100% { 
            transform: scale(1); 
            opacity: 1; 
          }
        }

        .referral-error {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 14px;
          color: var(--red);
          margin-top: 8px;
          text-align: center;
        }

        /* ==================== CONTINUE SECTION ==================== */
        .continue-section {
          margin: 64px auto 0;
          max-width: 400px;
          text-align: center;
        }

        .continue-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 0;
          box-shadow: none;
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
          padding: 18px 48px;
          cursor: pointer;
          transition: all 150ms ease;
          width: 100%;
          max-width: 400px;
          display: block;
          margin: 0 auto 24px;
        }

        .continue-button:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .continue-button:active {
          background: linear-gradient(135deg, var(--blue-hover-2) 0%, var(--purple-hover-2) 100%);
          transform: translateY(1px);
        }

        .continue-button:disabled {
          background: var(--gray-dark);
          color: var(--gray-medium);
          cursor: not-allowed;
          opacity: 0.5;
        }

        .continue-button:focus {
          outline: 2px solid var(--blue);
          outline-offset: 2px;
        }

        .continue-footer-text {
          font-family: var(--font-mono);
          font-weight: 400;
          font-size: 14px;
          color: var(--gray-medium);
          line-height: 1.5;
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .pricing-nav {
            height: 64px;
          }

          .pricing-nav-content {
            padding: 0 24px;
          }

          .pricing-container {
            padding: calc(60px + 64px) 24px 60px;
          }

          .pricing-headline {
            font-size: 36px;
          }

          .pricing-cards-grid {
            grid-template-columns: 1fr;
            gap: 24px;
          }

          .pricing-card {
            padding: 32px;
          }

          .referral-input-group {
            flex-direction: column;
            gap: 16px;
          }

          .referral-input,
          .apply-button {
            width: 100%;
          }

          .continue-button {
            width: 100%;
          }
        }

        /* Touch Targets (Mobile) */
        @media (max-width: 768px) {
          .pricing-nav-login,
          .pricing-nav-signup,
          .select-button,
          .apply-button,
          .continue-button {
            min-height: 44px;
            min-width: 44px;
          }
        }
      `})]})}const EN=Ud("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Z=x.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...i},a)=>{const o=s?sv:"button";return r.jsx(o,{className:Ce(EN({variant:t,size:n,className:e})),ref:a,...i})});Z.displayName="Button";function mC(){const[,e]=it(),[t,n]=x.useState(""),[s,i]=x.useState(!1);x.useEffect(()=>{const l=new URLSearchParams(window.location.search).get("email");l&&(i(!0),n(`Your account for ${l} is being created. You can now log in!`))},[]);const a=()=>{e(s?"/login":"/chat")};return s?r.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-6",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"mb-8 flex justify-center",children:r.jsx(jr,{className:"w-20 h-20 text-green-500"})}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Payment Successful!"}),r.jsx("p",{className:"text-white/70 text-lg mb-8",children:t}),r.jsx(Z,{onClick:a,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 text-lg","data-testid":"button-continue-login",children:"Continue to Login"})]})}):r.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-8xl mb-8",children:""}),r.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white",children:"Check your phone."})]})})}function K9(){const[,e]=it();return r.jsxs("div",{className:"legal-page",children:[r.jsx("nav",{className:"legal-nav",children:r.jsxs("div",{className:"legal-nav-content",children:[r.jsx("div",{className:"legal-nav-left",children:r.jsx("a",{href:"/",className:"legal-logo-link","data-testid":"link-home",children:r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"legal-logo-img"})})}),r.jsx("div",{className:"legal-nav-right",children:r.jsx("button",{className:"legal-nav-button",onClick:()=>e("/pricing"),"data-testid":"button-signup",children:"Sign Up"})})]})}),r.jsxs("main",{className:"legal-content",children:[r.jsx("h1",{className:"legal-title",children:"Terms of Service"}),r.jsx("p",{className:"legal-updated",children:"Last Updated: December 9, 2025"}),r.jsx("p",{className:"legal-intro",children:"Welcome to BJJ OS. By using our platform, you agree to these Terms."}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"1. Acceptance of Terms"}),r.jsx("p",{className:"legal-text",children:"By creating an account or using BJJ OS (bjjos.app), you agree to these Terms and our Privacy Policy."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"2. Description of Service"}),r.jsx("p",{className:"legal-text",children:"BJJ OS provides:"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"AI-powered BJJ coaching via Professor OS"}),r.jsx("li",{children:"Curated instructional video recommendations"}),r.jsx("li",{children:"Training session logging"}),r.jsx("li",{children:"Personalized technique suggestions"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"3. Account Registration"}),r.jsx("p",{className:"legal-text",children:"You must:"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"Be at least 13 years old"}),r.jsx("li",{children:"Provide accurate information"}),r.jsx("li",{children:"Maintain account security"}),r.jsx("li",{children:"Notify us of unauthorized access"})]}),r.jsx("p",{className:"legal-text",children:"You are responsible for all activity under your account."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"4. Subscription and Payment"}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Pricing"}),r.jsx("p",{className:"legal-text",children:"$19.99/month with 7-day free trial"})]}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Billing"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"Payments via Stripe"}),r.jsx("li",{children:"Subscriptions auto-renew"}),r.jsx("li",{children:"Cancel anytime in settings"})]})]}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Refunds"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"No charge if cancelled within trial"}),r.jsx("li",{children:"No refunds for partial months"}),r.jsx("li",{children:"Billing errors refunded upon verification"})]})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"5. Acceptable Use"}),r.jsx("p",{className:"legal-text",children:"You agree NOT to:"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"Share your account"}),r.jsx("li",{children:"Reverse engineer the platform"}),r.jsx("li",{children:"Scrape data"}),r.jsx("li",{children:"Use for illegal purposes"}),r.jsx("li",{children:"Harass others"}),r.jsx("li",{children:"Upload harmful content"}),r.jsx("li",{children:"Misrepresent identity"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"6. Intellectual Property"}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Our Content"}),r.jsx("p",{className:"legal-text",children:"All BJJ OS content is owned by us and protected by intellectual property laws."})]}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Third-Party Content"}),r.jsx("p",{className:"legal-text",children:"Instructional videos curated from public sources. Instructors retain their rights."})]}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Your Content"}),r.jsx("p",{className:"legal-text",children:"You retain ownership of training logs and notes. You grant us license to use your data to improve services."})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"7. Disclaimer"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"BJJ OS is a training companion, not a substitute for in-person instruction"}),r.jsx("li",{children:"We are not responsible for training injuries"}),r.jsx("li",{children:"Professor OS may contain errors - verify with qualified instructors"}),r.jsx("li",{children:"We do not provide medical advice"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"8. Limitation of Liability"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:'BJJ OS is provided "as is" without warranties'}),r.jsx("li",{children:"We are not liable for indirect or consequential damages"}),r.jsx("li",{children:"Total liability limited to amount paid in past 12 months"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"9. Indemnification"}),r.jsx("p",{className:"legal-text",children:"You agree to indemnify BJJ OS from claims arising from your use, violation of Terms, or violation of third-party rights."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"10. Termination"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"You may cancel and delete your account anytime"}),r.jsx("li",{children:"We may suspend accounts that violate Terms"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"11. Changes to Terms"}),r.jsx("p",{className:"legal-text",children:"We may modify Terms anytime. Continued use constitutes acceptance."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"12. Governing Law"}),r.jsx("p",{className:"legal-text",children:"Terms governed by Delaware law."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"13. Dispute Resolution"}),r.jsx("p",{className:"legal-text",children:"Disputes resolved through binding arbitration per AAA rules."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"14. Contact"}),r.jsx("p",{className:"legal-text",children:r.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-link","data-testid":"link-support-contact",children:"support@bjjos.app"})})]}),r.jsx("p",{className:"legal-agreement",children:"By using BJJ OS, you agree to these Terms of Service."})]}),r.jsx("footer",{className:"legal-footer",children:r.jsxs("div",{className:"legal-footer-content",children:[r.jsxs("div",{className:"legal-footer-links",children:[r.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-footer-link","data-testid":"link-footer-support",children:"support@bjjos.app"}),r.jsx("a",{href:"/privacy",className:"legal-footer-link","data-testid":"link-footer-privacy",children:"Privacy Policy"}),r.jsx("a",{href:"/terms",className:"legal-footer-link legal-footer-link-active","data-testid":"link-footer-terms",children:"Terms of Service"})]}),r.jsx("p",{className:"legal-footer-copyright",children:" 2025 BJJ OS"})]})}),r.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');
        
        :root {
          --black: #000000;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
        }

        .legal-page {
          font-family: var(--font-mono);
          background: var(--black);
          color: var(--white);
          min-height: 100vh;
          width: 100%;
          overflow-y: auto;
          overflow-x: hidden;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

        .legal-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: var(--black);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid var(--gray-dark);
        }

        .legal-nav-content {
          max-width: 800px;
          margin: 0 auto;
          padding: 0 24px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .legal-nav-left {
          display: flex;
          align-items: center;
        }

        .legal-logo-link {
          display: flex;
          align-items: center;
        }

        .legal-logo-img {
          height: 36px;
          width: auto;
        }

        .legal-nav-right {
          display: flex;
          align-items: center;
        }

        .legal-nav-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 4px;
          font-family: var(--font-mono);
          font-weight: 600;
          font-size: 14px;
          color: var(--white);
          padding: 10px 20px;
          cursor: pointer;
          transition: opacity 150ms ease;
        }

        .legal-nav-button:hover {
          opacity: 0.9;
        }

        .legal-content {
          max-width: 800px;
          width: 100%;
          margin: 0 auto;
          padding: calc(72px + 60px) 24px 80px;
        }

        .legal-title {
          font-family: var(--font-mono);
          font-size: 32px;
          font-weight: 700;
          color: var(--white);
          margin: 0 0 8px;
          letter-spacing: -0.02em;
        }

        .legal-updated {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-medium);
          margin: 0 0 32px;
        }

        .legal-intro {
          font-family: var(--font-mono);
          font-size: 16px;
          color: var(--gray-light);
          line-height: 1.7;
          margin: 0 0 40px;
        }

        .legal-section {
          margin-bottom: 40px;
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
        }

        .legal-page section {
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
        }

        .legal-section-title {
          font-family: var(--font-mono);
          font-size: 18px;
          font-weight: 700;
          color: var(--white);
          margin: 0 0 16px;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .legal-subsection {
          margin-bottom: 16px;
        }

        .legal-subsection-title {
          font-family: var(--font-mono);
          font-size: 14px;
          font-weight: 600;
          color: var(--white);
          margin: 0 0 4px;
        }

        .legal-text {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          line-height: 1.7;
          margin: 0 0 12px;
        }

        .legal-text strong {
          color: var(--white);
          font-weight: 600;
        }

        .legal-list {
          list-style: none;
          padding: 0;
          margin: 0 0 12px;
        }

        .legal-list li {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          line-height: 1.7;
          padding-left: 20px;
          position: relative;
          margin-bottom: 8px;
        }

        .legal-list li::before {
          content: '';
          position: absolute;
          left: 0;
          color: var(--gray-medium);
        }

        .legal-list li strong {
          color: var(--white);
          font-weight: 600;
        }

        .legal-link {
          color: var(--white);
          text-decoration: none;
          border-bottom: 1px solid var(--gray-medium);
          transition: border-color 150ms ease;
        }

        .legal-link:hover {
          border-color: var(--white);
        }

        .legal-agreement {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-medium);
          font-style: italic;
          margin-top: 48px;
          padding-top: 24px;
          border-top: 1px solid var(--gray-dark);
        }

        .legal-footer {
          background: var(--black);
          padding: 40px 24px;
          border-top: 1px solid var(--gray-dark);
        }

        .legal-footer-content {
          max-width: 800px;
          margin: 0 auto;
          text-align: center;
        }

        .legal-footer-links {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 24px;
          margin-bottom: 16px;
        }

        .legal-footer-link {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          text-decoration: none;
          transition: color 150ms ease;
        }

        .legal-footer-link:hover {
          color: var(--white);
        }

        .legal-footer-link-active {
          color: var(--white);
        }

        .legal-footer-copyright {
          font-family: var(--font-mono);
          font-size: 12px;
          color: var(--gray-medium);
          margin: 0;
        }

        @media (max-width: 768px) {
          .legal-nav {
            height: 64px;
          }

          .legal-content {
            padding: calc(64px + 40px) 20px 40px;
          }

          .legal-title {
            font-size: 28px;
          }

          .legal-section-title {
            font-size: 16px;
          }
        }
      `})]})}function G9(){const[,e]=it();return r.jsxs("div",{className:"legal-page",children:[r.jsx("nav",{className:"legal-nav",children:r.jsxs("div",{className:"legal-nav-content",children:[r.jsx("div",{className:"legal-nav-left",children:r.jsx("a",{href:"/",className:"legal-logo-link","data-testid":"link-home",children:r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"legal-logo-img"})})}),r.jsx("div",{className:"legal-nav-right",children:r.jsx("button",{className:"legal-nav-button",onClick:()=>e("/pricing"),"data-testid":"button-signup",children:"Sign Up"})})]})}),r.jsxs("main",{className:"legal-content",children:[r.jsx("h1",{className:"legal-title",children:"Privacy Policy"}),r.jsx("p",{className:"legal-updated",children:"Last Updated: December 9, 2025"}),r.jsx("p",{className:"legal-intro",children:'BJJ OS ("we," "our," or "us") operates bjjos.app. This Privacy Policy explains how we collect, use, and safeguard your information.'}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"Information We Collect"}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Account Information"}),r.jsx("p",{className:"legal-text",children:"Email address, name, belt rank, training preferences, password (encrypted)"})]}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Training Data"}),r.jsx("p",{className:"legal-text",children:"Session logs, technique preferences, training goals, conversations with Professor OS"})]}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Payment Information"}),r.jsx("p",{className:"legal-text",children:"Billing details processed securely by Stripe. We do not store full credit card numbers."})]}),r.jsxs("div",{className:"legal-subsection",children:[r.jsx("h3",{className:"legal-subsection-title",children:"Usage Data"}),r.jsx("p",{className:"legal-text",children:"Device type, browser, pages visited, time on platform, feature usage patterns"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"How We Use Your Information"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"Provide and personalize Professor OS coaching"}),r.jsx("li",{children:"Process subscription payments"}),r.jsx("li",{children:"Improve platform and features"}),r.jsx("li",{children:"Send service-related communications"}),r.jsx("li",{children:"Respond to support requests"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"Data Sharing"}),r.jsx("p",{className:"legal-text",children:"We do not sell your personal information. We share data only with:"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"Stripe (payment processing)"}),r.jsx("li",{children:"Anthropic (AI coaching services - anonymized)"}),r.jsx("li",{children:"Service providers (hosting and infrastructure)"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"Data Security"}),r.jsx("p",{className:"legal-text",children:"We implement industry-standard security:"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"Encrypted transmission (HTTPS)"}),r.jsx("li",{children:"Secure password hashing"}),r.jsx("li",{children:"Regular security audits"}),r.jsx("li",{children:"Access controls and monitoring"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"Your Rights"}),r.jsx("p",{className:"legal-text",children:"You may:"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"Access your personal data"}),r.jsx("li",{children:"Request data correction"}),r.jsx("li",{children:"Request data deletion"}),r.jsx("li",{children:"Export your training data"}),r.jsx("li",{children:"Opt out of marketing emails"})]}),r.jsxs("p",{className:"legal-text",children:["To exercise these rights: ",r.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-link","data-testid":"link-support-rights",children:"support@bjjos.app"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"Data Retention"}),r.jsxs("ul",{className:"legal-list",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Active accounts:"})," Data retained while subscription active"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Cancelled accounts:"})," Data deleted within 90 days upon request"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Training logs:"})," Retained to improve coaching until deletion requested"]})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"Children's Privacy"}),r.jsx("p",{className:"legal-text",children:"BJJ OS is not intended for users under 13. We do not knowingly collect information from children."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"California Privacy Rights (CCPA)"}),r.jsx("p",{className:"legal-text",children:"California residents may:"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"Know what personal information is collected"}),r.jsx("li",{children:"Request deletion"}),r.jsx("li",{children:"Opt-out of sale (we do not sell data)"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"International Users (GDPR)"}),r.jsx("p",{className:"legal-text",children:"For EU/UK users:"}),r.jsxs("ul",{className:"legal-list",children:[r.jsx("li",{children:"Legal basis is contract performance and legitimate interests"}),r.jsx("li",{children:"Data transfers secured through standard contractual clauses"}),r.jsx("li",{children:"Right to lodge complaints with supervisory authorities"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"Changes to This Policy"}),r.jsx("p",{className:"legal-text",children:"We may update this policy periodically. Material changes communicated via email or in-app notification."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{className:"legal-section-title",children:"Contact"}),r.jsx("p",{className:"legal-text",children:r.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-link","data-testid":"link-support-contact",children:"support@bjjos.app"})})]}),r.jsx("p",{className:"legal-agreement",children:"By using BJJ OS, you agree to this Privacy Policy."})]}),r.jsx("footer",{className:"legal-footer",children:r.jsxs("div",{className:"legal-footer-content",children:[r.jsxs("div",{className:"legal-footer-links",children:[r.jsx("a",{href:"mailto:support@bjjos.app",className:"legal-footer-link","data-testid":"link-footer-support",children:"support@bjjos.app"}),r.jsx("a",{href:"/privacy",className:"legal-footer-link legal-footer-link-active","data-testid":"link-footer-privacy",children:"Privacy Policy"}),r.jsx("a",{href:"/terms",className:"legal-footer-link","data-testid":"link-footer-terms",children:"Terms of Service"})]}),r.jsx("p",{className:"legal-footer-copyright",children:" 2025 BJJ OS"})]})}),r.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');
        
        :root {
          --black: #000000;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
        }

        .legal-page {
          font-family: var(--font-mono);
          background: var(--black);
          color: var(--white);
          min-height: 100vh;
          width: 100%;
          overflow-y: auto;
          overflow-x: hidden;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

        .legal-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: var(--black);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid var(--gray-dark);
        }

        .legal-nav-content {
          max-width: 800px;
          margin: 0 auto;
          padding: 0 24px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .legal-nav-left {
          display: flex;
          align-items: center;
        }

        .legal-logo-link {
          display: flex;
          align-items: center;
        }

        .legal-logo-img {
          height: 36px;
          width: auto;
        }

        .legal-nav-right {
          display: flex;
          align-items: center;
        }

        .legal-nav-button {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          border-radius: 4px;
          font-family: var(--font-mono);
          font-weight: 600;
          font-size: 14px;
          color: var(--white);
          padding: 10px 20px;
          cursor: pointer;
          transition: opacity 150ms ease;
        }

        .legal-nav-button:hover {
          opacity: 0.9;
        }

        .legal-content {
          max-width: 800px;
          width: 100%;
          margin: 0 auto;
          padding: calc(72px + 60px) 24px 80px;
        }

        .legal-title {
          font-family: var(--font-mono);
          font-size: 32px;
          font-weight: 700;
          color: var(--white);
          margin: 0 0 8px;
          letter-spacing: -0.02em;
        }

        .legal-updated {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-medium);
          margin: 0 0 32px;
        }

        .legal-intro {
          font-family: var(--font-mono);
          font-size: 16px;
          color: var(--gray-light);
          line-height: 1.7;
          margin: 0 0 40px;
        }

        .legal-section {
          margin-bottom: 40px;
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
        }

        .legal-page section {
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
        }

        .legal-section-title {
          font-family: var(--font-mono);
          font-size: 18px;
          font-weight: 700;
          color: var(--white);
          margin: 0 0 16px;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .legal-subsection {
          margin-bottom: 16px;
        }

        .legal-subsection-title {
          font-family: var(--font-mono);
          font-size: 14px;
          font-weight: 600;
          color: var(--white);
          margin: 0 0 4px;
        }

        .legal-text {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          line-height: 1.7;
          margin: 0 0 12px;
        }

        .legal-text strong {
          color: var(--white);
          font-weight: 600;
        }

        .legal-list {
          list-style: none;
          padding: 0;
          margin: 0 0 12px;
        }

        .legal-list li {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          line-height: 1.7;
          padding-left: 20px;
          position: relative;
          margin-bottom: 8px;
        }

        .legal-list li::before {
          content: '';
          position: absolute;
          left: 0;
          color: var(--gray-medium);
        }

        .legal-list li strong {
          color: var(--white);
          font-weight: 600;
        }

        .legal-link {
          color: var(--white);
          text-decoration: none;
          border-bottom: 1px solid var(--gray-medium);
          transition: border-color 150ms ease;
        }

        .legal-link:hover {
          border-color: var(--white);
        }

        .legal-agreement {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-medium);
          font-style: italic;
          margin-top: 48px;
          padding-top: 24px;
          border-top: 1px solid var(--gray-dark);
        }

        .legal-footer {
          background: var(--black);
          padding: 40px 24px;
          border-top: 1px solid var(--gray-dark);
        }

        .legal-footer-content {
          max-width: 800px;
          margin: 0 auto;
          text-align: center;
        }

        .legal-footer-links {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 24px;
          margin-bottom: 16px;
        }

        .legal-footer-link {
          font-family: var(--font-mono);
          font-size: 14px;
          color: var(--gray-light);
          text-decoration: none;
          transition: color 150ms ease;
        }

        .legal-footer-link:hover {
          color: var(--white);
        }

        .legal-footer-link-active {
          color: var(--white);
        }

        .legal-footer-copyright {
          font-family: var(--font-mono);
          font-size: 12px;
          color: var(--gray-medium);
          margin: 0;
        }

        @media (max-width: 768px) {
          .legal-nav {
            height: 64px;
          }

          .legal-content {
            padding: calc(64px + 40px) 20px 40px;
          }

          .legal-title {
            font-size: 28px;
          }

          .legal-section-title {
            font-size: 16px;
          }
        }
      `})]})}function Y9(){const e=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return x.useEffect(()=>{const t=document.body.style.fontFamily;return document.body.style.fontFamily="'JetBrains Mono', monospace",()=>{document.body.style.fontFamily=t}},[]),r.jsx("div",{className:"min-h-screen bg-black text-white font-['JetBrains_Mono']",children:r.jsxs("div",{className:"max-w-[800px] mx-auto py-[60px] px-6",children:[r.jsx(sn,{href:"/",className:"text-blue-500 hover:text-blue-400 mb-8 inline-block","data-testid":"link-back-home",children:" Back to BJJ OS"}),r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Refund Policy"}),r.jsxs("p",{className:"text-gray-400 mb-12",children:["Last Updated: ",e]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Free Tier"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4",children:[r.jsx("li",{children:"No payment required"}),r.jsx("li",{children:"No refunds needed (free forever)"}),r.jsx("li",{children:"Upgrade anytime to premium features"})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Annual Subscription Refunds"}),r.jsx("h3",{className:"text-xl font-semibold mb-3 text-blue-400",children:"Within 7 Days of Purchase:"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4 mb-6",children:[r.jsx("li",{children:"Full refund available for annual subscription"}),r.jsx("li",{children:"Applies to both Founding Member ($89/year) and Pro ($179/year)"}),r.jsxs("li",{children:["Contact: ",r.jsx("a",{href:"mailto:support@bjjos.app",className:"text-blue-500 hover:text-blue-400",children:"support@bjjos.app"})]}),r.jsx("li",{children:"Refund processed within 5-7 business days"}),r.jsx("li",{children:"Access will be canceled upon refund"})]}),r.jsx("h3",{className:"text-xl font-semibold mb-3 text-blue-400",children:"After 7 Days:"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4 mb-6",children:[r.jsx("li",{children:"No refunds for partial years"}),r.jsx("li",{children:"You can cancel to stop future renewals"}),r.jsx("li",{children:"Access continues until end of current annual period"})]}),r.jsx("h3",{className:"text-xl font-semibold mb-3 text-blue-400",children:"Annual Renewal:"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4",children:[r.jsx("li",{children:"Subscription renews automatically each year"}),r.jsx("li",{children:"7-day refund window applies to renewal charges"}),r.jsx("li",{children:"Cancel before renewal to avoid being charged"})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"How to Cancel"}),r.jsxs("ol",{className:"list-decimal list-inside text-gray-300 space-y-2 ml-4",children:[r.jsx("li",{children:"Open BJJ OS app"}),r.jsx("li",{children:"Go to Settings"}),r.jsx("li",{children:'Tap "Manage Subscription"'}),r.jsx("li",{children:'Tap "Cancel Subscription"'}),r.jsx("li",{children:"Confirm cancellation"})]}),r.jsx("p",{className:"text-gray-300 leading-relaxed mt-4",children:"Cancellation stops future charges immediately. Your access continues until the end of your current billing period."})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Refund Process"}),r.jsx("p",{className:"text-gray-300 leading-relaxed mb-3",children:"To request a refund (within 7 days of charge):"}),r.jsxs("ol",{className:"list-decimal list-inside text-gray-300 space-y-2 ml-4 mb-4",children:[r.jsxs("li",{children:["Email: ",r.jsx("a",{href:"mailto:support@bjjos.app",className:"text-blue-500 hover:text-blue-400",children:"support@bjjos.app"})]}),r.jsx("li",{children:'Subject: "Refund Request"'}),r.jsx("li",{children:"Include: Phone number and reason (optional)"}),r.jsx("li",{children:"We'll process within 2 business days"})]}),r.jsx("p",{className:"text-gray-300 leading-relaxed",children:"Refunds are issued to your original payment method."})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Special Circumstances"}),r.jsx("p",{className:"text-gray-300 leading-relaxed mb-3",children:"Refunds outside the 7-day window may be considered for:"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4 mb-4",children:[r.jsx("li",{children:"Technical issues preventing use"}),r.jsx("li",{children:"Unauthorized charges"}),r.jsx("li",{children:"Duplicate charges"})]}),r.jsxs("p",{className:"text-gray-300 leading-relaxed",children:["Contact ",r.jsx("a",{href:"mailto:support@bjjos.app",className:"text-blue-500 hover:text-blue-400",children:"support@bjjos.app"})," to discuss."]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Non-Refundable"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2 ml-4",children:[r.jsx("li",{children:"Partial month subscriptions (after 7 days)"}),r.jsx("li",{children:"Free months earned via referrals"}),r.jsx("li",{children:"Account deletions (data recovery not possible)"})]})]}),r.jsxs("section",{className:"mb-12",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Contact"}),r.jsxs("p",{className:"text-gray-300 leading-relaxed mb-2",children:["Refund questions? Email: ",r.jsx("a",{href:"mailto:support@bjjos.app",className:"text-blue-500 hover:text-blue-400",children:"support@bjjos.app"})]}),r.jsx("p",{className:"text-gray-300 leading-relaxed",children:"Response time: Within 24 hours"})]}),r.jsxs("footer",{className:"border-t border-gray-800 pt-8 text-center",children:[r.jsxs("div",{className:"flex justify-center gap-4 mb-4 text-sm",children:[r.jsx(sn,{href:"/terms",className:"text-blue-500 hover:text-blue-400","data-testid":"link-terms",children:"Terms"}),r.jsx("span",{className:"text-gray-600",children:""}),r.jsx(sn,{href:"/privacy",className:"text-blue-500 hover:text-blue-400","data-testid":"link-privacy",children:"Privacy"}),r.jsx("span",{className:"text-gray-600",children:""}),r.jsx(sn,{href:"/refund",className:"text-blue-500 hover:text-blue-400","data-testid":"link-refund",children:"Refund"})]}),r.jsx("p",{className:"text-gray-600 text-sm",children:" 2025 BJJ OS"})]})]})})}var Q9=Object.defineProperty,J9=Object.defineProperties,X9=Object.getOwnPropertyDescriptors,yg=Object.getOwnPropertySymbols,V5=Object.prototype.hasOwnProperty,W5=Object.prototype.propertyIsEnumerable,pC=(e,t,n)=>t in e?Q9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z9=(e,t)=>{for(var n in t||(t={}))V5.call(t,n)&&pC(e,n,t[n]);if(yg)for(var n of yg(t))W5.call(t,n)&&pC(e,n,t[n]);return e},eV=(e,t)=>J9(e,X9(t)),tV=(e,t)=>{var n={};for(var s in e)V5.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&yg)for(var s of yg(e))t.indexOf(s)<0&&W5.call(e,s)&&(n[s]=e[s]);return n};function nV(e){let t=setTimeout(e,0),n=setTimeout(e,10),s=setTimeout(e,50);return[t,n,s]}function rV(e){let t=x.useRef();return x.useEffect(()=>{t.current=e}),t.current}var sV=18,H5=40,iV=`${H5}px`,aV=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function oV({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:s}){let[i,a]=x.useState(!1),[o,l]=x.useState(!1),[c,d]=x.useState(!1),u=x.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&i&&o,[i,o,n]),f=x.useCallback(()=>{let h=e.current,p=t.current;if(!h||!p||c||n==="none")return;let v=h,g=v.getBoundingClientRect().left+v.offsetWidth,y=v.getBoundingClientRect().top+v.offsetHeight/2,j=g-sV,m=y;document.querySelectorAll(aV).length===0&&document.elementFromPoint(j,m)===h||(a(!0),d(!0))},[e,t,c,n]);return x.useEffect(()=>{let h=e.current;if(!h||n==="none")return;function p(){let g=window.innerWidth-h.getBoundingClientRect().right;l(g>=H5)}p();let v=setInterval(p,1e3);return()=>{clearInterval(v)}},[e,n]),x.useEffect(()=>{let h=s||document.activeElement===t.current;if(n==="none"||!h)return;let p=setTimeout(f,0),v=setTimeout(f,2e3),g=setTimeout(f,5e3),y=setTimeout(()=>{d(!0)},6e3);return()=>{clearTimeout(p),clearTimeout(v),clearTimeout(g),clearTimeout(y)}},[t,s,n,f]),{hasPWMBadge:i,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:iV}}var K5=x.createContext({}),G5=x.forwardRef((e,t)=>{var n=e,{value:s,onChange:i,maxLength:a,textAlign:o="left",pattern:l,placeholder:c,inputMode:d="numeric",onComplete:u,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:h,containerClassName:p,noScriptCSSFallback:v=lV,render:g,children:y}=n,j=tV(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),m,b,N,w,S;let[k,P]=x.useState(typeof j.defaultValue=="string"?j.defaultValue:""),E=s??k,_=rV(E),F=x.useCallback(le=>{i==null||i(le),P(le)},[i]),A=x.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),T=x.useRef(null),M=x.useRef(null),O=x.useRef({value:E,onChange:F,isIOS:typeof window<"u"&&((b=(m=window==null?void 0:window.CSS)==null?void 0:m.supports)==null?void 0:b.call(m,"-webkit-touch-callout","none"))}),C=x.useRef({prev:[(N=T.current)==null?void 0:N.selectionStart,(w=T.current)==null?void 0:w.selectionEnd,(S=T.current)==null?void 0:S.selectionDirection]});x.useImperativeHandle(t,()=>T.current,[]),x.useEffect(()=>{let le=T.current,Ae=M.current;if(!le||!Ae)return;O.current.value!==le.value&&O.current.onChange(le.value),C.current.prev=[le.selectionStart,le.selectionEnd,le.selectionDirection];function Ke(){if(document.activeElement!==le){D(null),V(null);return}let nt=le.selectionStart,pt=le.selectionEnd,Ot=le.selectionDirection,$=le.maxLength,Y=le.value,ie=C.current.prev,be=-1,ye=-1,ge;if(Y.length!==0&&nt!==null&&pt!==null){let nn=nt===pt,Na=nt===Y.length&&Y.length<$;if(nn&&!Na){let Zn=nt;if(Zn===0)be=0,ye=1,ge="forward";else if(Zn===$)be=Zn-1,ye=Zn,ge="backward";else if($>1&&Y.length>1){let Jt=0;if(ie[0]!==null&&ie[1]!==null){ge=Zn<ie[1]?"backward":"forward";let he=ie[0]===ie[1]&&ie[0]<$;ge==="backward"&&!he&&(Jt=-1)}be=Jt+Zn,ye=Jt+Zn+1}}be!==-1&&ye!==-1&&be!==ye&&T.current.setSelectionRange(be,ye,ge)}let Pe=be!==-1?be:nt,We=ye!==-1?ye:pt,_t=ge??Ot;D(Pe),V(We),C.current.prev=[Pe,We,_t]}if(document.addEventListener("selectionchange",Ke,{capture:!0}),Ke(),document.activeElement===le&&H(!0),!document.getElementById("input-otp-style")){let nt=document.createElement("style");if(nt.id="input-otp-style",document.head.appendChild(nt),nt.sheet){let pt="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";bu(nt.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),bu(nt.sheet,`[data-input-otp]:autofill { ${pt} }`),bu(nt.sheet,`[data-input-otp]:-webkit-autofill { ${pt} }`),bu(nt.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),bu(nt.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Fe=()=>{Ae&&Ae.style.setProperty("--root-height",`${le.clientHeight}px`)};Fe();let ht=new ResizeObserver(Fe);return ht.observe(le),()=>{document.removeEventListener("selectionchange",Ke,{capture:!0}),ht.disconnect()}},[]);let[R,I]=x.useState(!1),[B,H]=x.useState(!1),[Q,D]=x.useState(null),[te,V]=x.useState(null);x.useEffect(()=>{nV(()=>{var le,Ae,Ke,Fe;(le=T.current)==null||le.dispatchEvent(new Event("input"));let ht=(Ae=T.current)==null?void 0:Ae.selectionStart,nt=(Ke=T.current)==null?void 0:Ke.selectionEnd,pt=(Fe=T.current)==null?void 0:Fe.selectionDirection;ht!==null&&nt!==null&&(D(ht),V(nt),C.current.prev=[ht,nt,pt])})},[E,B]),x.useEffect(()=>{_!==void 0&&E!==_&&_.length<a&&E.length===a&&(u==null||u(E))},[a,u,_,E]);let J=oV({containerRef:M,inputRef:T,pushPasswordManagerStrategy:f,isFocused:B}),me=x.useCallback(le=>{let Ae=le.currentTarget.value.slice(0,a);if(Ae.length>0&&A&&!A.test(Ae)){le.preventDefault();return}typeof _=="string"&&Ae.length<_.length&&document.dispatchEvent(new Event("selectionchange")),F(Ae)},[a,F,_,A]),de=x.useCallback(()=>{var le;if(T.current){let Ae=Math.min(T.current.value.length,a-1),Ke=T.current.value.length;(le=T.current)==null||le.setSelectionRange(Ae,Ke),D(Ae),V(Ke)}H(!0)},[a]),ve=x.useCallback(le=>{var Ae,Ke;let Fe=T.current;if(!h&&(!O.current.isIOS||!le.clipboardData||!Fe))return;let ht=le.clipboardData.getData("text/plain"),nt=h?h(ht):ht;le.preventDefault();let pt=(Ae=T.current)==null?void 0:Ae.selectionStart,Ot=(Ke=T.current)==null?void 0:Ke.selectionEnd,$=(pt!==Ot?E.slice(0,pt)+nt+E.slice(Ot):E.slice(0,pt)+nt+E.slice(pt)).slice(0,a);if($.length>0&&A&&!A.test($))return;Fe.value=$,F($);let Y=Math.min($.length,a-1),ie=$.length;Fe.setSelectionRange(Y,ie),D(Y),V(ie)},[a,F,A,E]),ce=x.useMemo(()=>({position:"relative",cursor:j.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[j.disabled]),U=x.useMemo(()=>({position:"absolute",inset:0,width:J.willPushPWMBadge?`calc(100% + ${J.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:J.willPushPWMBadge?`inset(0 ${J.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[J.PWM_BADGE_SPACE_WIDTH,J.willPushPWMBadge,o]),L=x.useMemo(()=>x.createElement("input",eV(Z9({autoComplete:j.autoComplete||"one-time-code"},j),{"data-input-otp":!0,"data-input-otp-placeholder-shown":E.length===0||void 0,"data-input-otp-mss":Q,"data-input-otp-mse":te,inputMode:d,pattern:A==null?void 0:A.source,"aria-placeholder":c,style:U,maxLength:a,value:E,ref:T,onPaste:le=>{var Ae;ve(le),(Ae=j.onPaste)==null||Ae.call(j,le)},onChange:me,onMouseOver:le=>{var Ae;I(!0),(Ae=j.onMouseOver)==null||Ae.call(j,le)},onMouseLeave:le=>{var Ae;I(!1),(Ae=j.onMouseLeave)==null||Ae.call(j,le)},onFocus:le=>{var Ae;de(),(Ae=j.onFocus)==null||Ae.call(j,le)},onBlur:le=>{var Ae;H(!1),(Ae=j.onBlur)==null||Ae.call(j,le)}})),[me,de,ve,d,U,a,te,Q,j,A==null?void 0:A.source,E]),z=x.useMemo(()=>({slots:Array.from({length:a}).map((le,Ae)=>{var Ke;let Fe=B&&Q!==null&&te!==null&&(Q===te&&Ae===Q||Ae>=Q&&Ae<te),ht=E[Ae]!==void 0?E[Ae]:null,nt=E[0]!==void 0?null:(Ke=c==null?void 0:c[Ae])!=null?Ke:null;return{char:ht,placeholderChar:nt,isActive:Fe,hasFakeCaret:Fe&&ht===null}}),isFocused:B,isHovering:!j.disabled&&R}),[B,R,a,te,Q,j.disabled,E]),Ne=x.useMemo(()=>g?g(z):x.createElement(K5.Provider,{value:z},y),[y,z,g]);return x.createElement(x.Fragment,null,v!==null&&x.createElement("noscript",null,x.createElement("style",null,v)),x.createElement("div",{ref:M,"data-input-otp-container":!0,style:ce,className:p},Ne,x.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},L)))});G5.displayName="Input";function bu(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var lV=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Y5=x.forwardRef(({className:e,containerClassName:t,...n},s)=>r.jsx(G5,{ref:s,containerClassName:Ce("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:Ce("disabled:cursor-not-allowed",e),...n}));Y5.displayName="InputOTP";const Q5=x.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ce("flex items-center",e),...t}));Q5.displayName="InputOTPGroup";const Bo=x.forwardRef(({index:e,className:t,...n},s)=>{const i=x.useContext(K5),{char:a,hasFakeCaret:o,isActive:l}=i.slots[e];return r.jsxs("div",{ref:s,className:Ce("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...n,children:[a,o&&r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});Bo.displayName="InputOTPSlot";const cV=x.forwardRef(({...e},t)=>r.jsx("div",{ref:t,role:"separator",...e,children:r.jsx(Z7,{})}));cV.displayName="InputOTPSeparator";function dV(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState("password"),[i,a]=x.useState(""),[o,l]=x.useState(""),[c,d]=x.useState(!1),[u,f]=x.useState(""),[h,p]=x.useState(!1),[v,g]=x.useState(""),[y,j]=x.useState(!1),[m,b]=x.useState(!0),[N,w]=x.useState(!1);x.useEffect(()=>{window.scrollTo(0,0)},[]);const S=async E=>{var F;if(E.preventDefault(),g(""),!i){g("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){g("Please enter a valid email address");return}if(!o){g("Password is required");return}p(!0);try{const A=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.toLowerCase().trim(),password:o,rememberMe:m})}),T=await A.json();if(!A.ok){if(T.error==="NO_PASSWORD_SET"){w(!0);return}throw new Error(T.error||"Invalid email or password")}const M=T.token||T.sessionToken;M&&await li(M),T.user&&await ci(T.user),t({title:"Welcome Back!",description:"Successfully logged in"}),T.redirect?e(T.redirect):(F=T.user)!=null&&F.onboardingCompleted?e("/chat"):e("/onboarding")}catch(A){g(A.message||"Invalid email or password. Please try again."),t({title:"Login Failed",description:A.message||"Invalid email or password",variant:"destructive"})}finally{p(!1)}},k=async()=>{g(""),p(!0);try{const E=await fetch("/api/auth/email/request-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.toLowerCase().trim()})}),_=await E.json();if(!E.ok)throw new Error(_.error||"Failed to send verification code");_.isAdmin&&j(!0),t({title:"Code Sent!",description:"Check your email for the 6-digit verification code"}),s("code")}catch(E){g(E.message||"Failed to send code. Please try again."),t({title:"Error",description:E.message||"Failed to send verification code",variant:"destructive"})}finally{p(!1)}},P=async E=>{if(E.preventDefault(),g(""),!u||u.length!==6){g("Please enter the 6-digit code");return}p(!0);try{const _=await fetch("/api/auth/email/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.toLowerCase().trim(),code:u,rememberMe:m})}),F=await _.json();if(!_.ok){if(F.subscriptionExpired){t({title:"Subscription Expired",description:"Your subscription has expired. Please resubscribe to continue.",variant:"destructive"}),e("/pricing");return}throw new Error(F.error||"Invalid verification code")}if(F.requiresPayment){t({title:"Email Verified!",description:"Redirecting to checkout..."});try{const A=await fetch("/api/signup/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.toLowerCase().trim(),priceId:"monthly"})}),T=await A.json();if(!A.ok)throw new Error(T.error||"Failed to create checkout session");if(T.devBypass&&T.token&&T.user){await li(T.token),await ci(T.user),e("/onboarding");return}if(T.url)window.location.href=T.url;else throw new Error("No checkout URL received")}catch(A){g(A.message||"Failed to start checkout")}return}if(!F.token||!F.user)throw new Error("Login failed - no session token received");await li(F.token),await ci(F.user),t({title:"Welcome Back!",description:"Successfully logged in"}),F.redirect?e(F.redirect):F.user.onboardingCompleted?e("/chat"):e("/onboarding")}catch(_){g(_.message||"Invalid code. Please try again."),t({title:"Verification Failed",description:_.message||"Invalid code",variant:"destructive"})}finally{p(!1)}};return N?r.jsxs("div",{className:"login-page page-container",children:[r.jsx("nav",{className:"login-nav",children:r.jsx("div",{className:"login-nav-content",children:r.jsx("div",{className:"login-nav-left",children:r.jsx("a",{href:"/",className:"login-logo-link","data-testid":"link-home",children:r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"login-logo-img"})})})})}),r.jsxs("div",{className:"login-container",style:{textAlign:"center"},children:[r.jsx("div",{style:{width:"64px",height:"64px",margin:"0 auto 24px",background:"rgba(234, 179, 8, 0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(pi,{className:"w-8 h-8",style:{color:"#EAB308"}})}),r.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"white",marginBottom:"16px"},children:"Password Not Set Up"}),r.jsx("p",{style:{color:"#A0A0A0",marginBottom:"24px",lineHeight:1.6},children:"Your account uses email verification codes. You can either use a verification code to log in, or visit Settings to set up a password."}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[r.jsx("button",{onClick:()=>{w(!1),k()},className:"login-button",disabled:h,"data-testid":"button-use-code",children:h?r.jsx(De,{className:"w-4 h-4 animate-spin"}):"Sign in with verification code"}),r.jsx("button",{onClick:()=>w(!1),style:{background:"transparent",border:"1px solid rgba(255,255,255,0.1)",color:"white",padding:"14px 24px",cursor:"pointer",fontSize:"16px"},"data-testid":"button-cancel",children:"Cancel"})]})]}),r.jsx("style",{children:gC})]}):r.jsxs("div",{className:"login-page page-container",children:[r.jsx("nav",{className:"login-nav",children:r.jsxs("div",{className:"login-nav-content",children:[r.jsx("div",{className:"login-nav-left",children:r.jsx("a",{href:"/",className:"login-logo-link","data-testid":"link-home",children:r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"login-logo-img"})})}),r.jsx("div",{className:"login-nav-right",children:r.jsx("button",{className:"login-nav-signup",onClick:()=>e("/pricing"),"data-testid":"button-signup",children:"Sign Up"})})]})}),r.jsxs("div",{className:"login-container",children:[n==="code"&&r.jsxs(Z,{variant:"ghost",onClick:()=>s("password"),className:"mb-8 text-white hover:text-white/80","data-testid":"button-back",children:[r.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs("div",{className:"login-header",children:[r.jsx("h1",{className:"login-headline",children:n==="password"?"Welcome Back":"Enter Code"}),r.jsx("p",{className:"login-subheadline",children:n==="password"?"Sign in to continue training":y?"Use your admin bypass code":`We sent a 6-digit code to ${i}`})]}),n==="password"&&r.jsxs("form",{onSubmit:S,className:"login-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"email",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(gs,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"email",type:"text",inputMode:"email",className:`form-input pl-11 ${v?"error":""}`,placeholder:"you@example.com",value:i,onChange:E=>a(E.target.value),disabled:h,"data-testid":"input-email"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"password",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(pi,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"password",type:c?"text":"password",className:`form-input pl-11 pr-11 ${v?"error":""}`,placeholder:"Enter your password",value:o,onChange:E=>l(E.target.value),disabled:h,"data-testid":"input-password"}),r.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-3 text-gray-400 hover:text-white","data-testid":"button-toggle-password",children:c?r.jsx(Yi,{className:"h-5 w-5"}):r.jsx(Bn,{className:"h-5 w-5"})})]})]}),v&&r.jsx("div",{className:"form-error","data-testid":"text-error",children:v}),r.jsx("div",{className:"remember-me-container",children:r.jsxs("label",{className:"remember-me-label",children:[r.jsx("input",{type:"checkbox",checked:m,onChange:E=>b(E.target.checked),className:"remember-me-checkbox","data-testid":"checkbox-remember-me"}),r.jsx("span",{className:"remember-me-text",children:"Keep me signed in"})]})}),r.jsx("button",{type:"submit",className:"login-button",disabled:h,"data-testid":"button-sign-in",children:h?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing In..."]}):"Sign In"}),r.jsx("div",{className:"signup-link",children:r.jsx("button",{type:"button",onClick:()=>e("/forgot-password"),className:"signup-link-button","data-testid":"link-forgot-password",children:"Forgot password?"})}),r.jsx("div",{className:"divider",children:r.jsx("span",{children:"OR"})}),r.jsx("button",{type:"button",onClick:()=>{if(!i||!i.includes("@")){g("Please enter your email first");return}k()},className:"secondary-button",disabled:h,"data-testid":"button-use-code",children:"Sign in with verification code"}),r.jsxs("div",{className:"signup-link",children:["Don't have an account?"," ",r.jsx("button",{type:"button",onClick:()=>e("/pricing"),className:"signup-link-button","data-testid":"link-signup",children:"Sign Up"})]})]}),n==="code"&&r.jsxs("form",{onSubmit:P,className:"login-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label text-center block mb-6",children:"Enter 6-Digit Code"}),r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx(Y5,{value:u,onChange:f,maxLength:6,"data-testid":"input-code",children:r.jsxs(Q5,{children:[r.jsx(Bo,{index:0}),r.jsx(Bo,{index:1}),r.jsx(Bo,{index:2}),r.jsx(Bo,{index:3}),r.jsx(Bo,{index:4}),r.jsx(Bo,{index:5})]})})}),v&&r.jsx("div",{className:"form-error text-center","data-testid":"text-code-error",children:v})]}),r.jsx("button",{type:"submit",className:"login-button",disabled:h||u.length!==6,"data-testid":"button-verify-code",children:h?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify Code"}),r.jsxs("div",{className:"signup-link",children:["Didn't receive the code?"," ",r.jsx("button",{type:"button",onClick:k,className:"signup-link-button",disabled:h,"data-testid":"button-resend",children:"Resend Code"})]})]})]}),r.jsx("style",{children:gC})]})}const gC=`
  :root {
    --black: #000000;
    --black-elevated: #0F0F0F;
    --white: #FFFFFF;
    --gray-light: #A0A0A0;
    --gray-medium: #71717A;
    --gray-dark: #1A1A1A;
    --blue: #2563EB;
    --purple: #7C3AED;
    --blue-hover-1: #1D4ED8;
    --purple-hover-1: #6D28D9;
    --red: #EF4444;
  }

  .login-page {
    background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
    color: var(--white);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    position: relative;
  }

  .login-page::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
    mix-blend-mode: overlay;
  }

  .login-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(10, 8, 18, 0.8);
    backdrop-filter: blur(12px);
    height: 72px;
    z-index: 1000;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }

  .login-nav-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 40px;
    height: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .login-nav-left {
    display: flex;
    align-items: center;
  }

  .login-logo-link {
    display: flex;
    align-items: center;
  }

  .login-logo-img {
    height: 36px;
    width: auto;
  }

  .login-nav-right {
    display: flex;
    align-items: center;
  }

  .login-nav-signup {
    background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
    border: none;
    font-weight: 700;
    font-size: 16px;
    color: var(--white);
    padding: 12px 24px;
    cursor: pointer;
    transition: background 150ms ease;
  }

  .login-nav-signup:hover {
    background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
  }

  .login-container {
    padding: calc(80px + 72px) 40px 80px;
    max-width: 500px;
    margin: 0 auto;
  }

  .login-header {
    text-align: center;
    margin-bottom: 48px;
  }

  .login-headline {
    font-size: 48px;
    font-weight: 700;
    color: var(--white);
    line-height: 1.1;
    letter-spacing: -0.01em;
    margin-bottom: 16px;
  }

  .login-subheadline {
    font-size: 18px;
    color: var(--gray-light);
    line-height: 1.5;
  }

  .login-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .form-label {
    font-size: 14px;
    font-weight: 500;
    color: var(--gray-light);
  }

  .form-input {
    width: 100%;
    padding: 14px 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--white);
    font-size: 16px;
    transition: all 200ms ease;
  }

  .form-input:focus {
    outline: none;
    border-color: var(--purple);
    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.15);
  }

  .form-input.error {
    border-color: var(--red);
  }

  .form-input::placeholder {
    color: var(--gray-medium);
  }

  .form-error {
    color: var(--red);
    font-size: 14px;
    margin-top: 4px;
  }

  .remember-me-container {
    display: flex;
    align-items: center;
  }

  .remember-me-label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
  }

  .remember-me-checkbox {
    width: 18px;
    height: 18px;
    accent-color: var(--purple);
    cursor: pointer;
  }

  .remember-me-text {
    font-size: 14px;
    color: var(--gray-light);
  }

  .login-button {
    width: 100%;
    padding: 16px 24px;
    background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
    border: none;
    color: var(--white);
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 200ms ease;
  }

  .login-button:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
  }

  .login-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .secondary-button {
    width: 100%;
    padding: 16px 24px;
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--white);
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: all 200ms ease;
  }

  .secondary-button:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.3);
  }

  .secondary-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .divider {
    display: flex;
    align-items: center;
    gap: 16px;
    color: var(--gray-medium);
    font-size: 14px;
  }

  .divider::before,
  .divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: rgba(255, 255, 255, 0.1);
  }

  .signup-link {
    text-align: center;
    font-size: 14px;
    color: var(--gray-light);
  }

  .signup-link-button {
    background: none;
    border: none;
    color: var(--purple);
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: color 200ms ease;
  }

  .signup-link-button:hover {
    color: var(--white);
  }

  @media (max-width: 640px) {
    .login-nav-content {
      padding: 0 20px;
    }

    .login-container {
      padding: calc(60px + 72px) 20px 60px;
    }

    .login-headline {
      font-size: 32px;
    }

    .login-subheadline {
      font-size: 16px;
    }
  }
`;function uV(){const[,e]=it(),{toast:t}=Je(),n=tn.isNativePlatform()&&tn.getPlatform()==="ios",s=new URLSearchParams(window.location.search),i=s.get("plan")||"monthly",a=n?"":s.get("ref")||"",o=s.get("invite")||"",[l,c]=x.useState(""),[d,u]=x.useState(""),[f,h]=x.useState(""),[p,v]=x.useState(""),[g,y]=x.useState(""),[j,m]=x.useState(!1),[b,N]=x.useState(!1),[w,S]=x.useState(!1),[k,P]=x.useState(!1),[E,_]=x.useState(""),[F,A]=x.useState(""),[T,M]=x.useState(""),[O,C]=x.useState(""),[R,I]=x.useState(null),[B,H]=x.useState([]),[Q,D]=x.useState(!1),[te,V]=x.useState(!1);x.useEffect(()=>{window.scrollTo(0,0),o&&!k&&J()},[]);const J=async()=>{try{const L=await(await lt("GET",`/api/auth/validate-invite?token=${o}`)).json();L.valid?(S(!0),c(L.email||""),t({title:"Lifetime Access Invitation",description:"You've been invited to BJJ OS with lifetime access!"})):(t({variant:"destructive",title:"Invalid Invitation",description:L.error||"This invitation link is invalid or has expired."}),window.history.replaceState({},"","/signup"))}catch{t({variant:"destructive",title:"Error",description:"Failed to validate invitation link"})}finally{P(!0)}},me=async()=>{if(!l){_("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)){_("Please enter a valid email address");return}N(!0);try{const z=await(await lt("POST","/api/auth/email/request-code",{email:l})).json();z.success?(m(!0),t({title:"Code Sent!",description:"Check your email for the verification code"})):t({variant:"destructive",title:"Failed to Send Code",description:z.error||"Please try again"})}catch(L){t({variant:"destructive",title:"Error",description:L.message||"Failed to send verification code"})}finally{N(!1)}};x.useEffect(()=>{if(!p||p.length<3){I(null),H([]),C("");return}const L=setTimeout(async()=>{D(!0),C("");try{const Ne=await(await lt("POST","/api/validate-username",{username:p})).json();Ne.available?(I(!0),H([])):(I(!1),H(Ne.suggestions||[]),Ne.error&&C(Ne.error))}catch{C("Failed to check username availability")}finally{D(!1)}},500);return()=>clearTimeout(L)},[p]);const de=()=>{let U=!0;return l?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)?_(""):(_("Please enter a valid email address"),U=!1):(_("Email is required"),U=!1),d?d.length<8?(A("Password must be at least 8 characters"),U=!1):A(""):(A("Password is required"),U=!1),f?d!==f?(M("Passwords do not match"),U=!1):M(""):(M("Please confirm your password"),U=!1),p?p.length<3?(C("Username must be at least 3 characters"),U=!1):Q||R===null?(C("Checking username availability..."),U=!1):R===!1?(C("Username is not available"),U=!1):C(""):(C("Username is required"),U=!1),U},ve=async U=>{if(U.preventDefault(),o&&w){if(!g){t({variant:"destructive",title:"Verification Code Required",description:"Please enter the verification code sent to your email"});return}V(!0);try{const z=await(await lt("POST","/api/auth/signup-with-invite",{email:l,username:p||void 0,verificationCode:g,inviteToken:o})).json();z.success&&z.token?(localStorage.setItem("sessionToken",z.token),localStorage.setItem("user",JSON.stringify(z.user)),t({title:"Welcome to BJJ OS!",description:"Your lifetime access account has been created"}),_e.invalidateQueries({queryKey:["/api/auth/me"]}),e("/onboarding")):t({variant:"destructive",title:"Signup Failed",description:z.error||"Failed to create account"})}catch(L){t({variant:"destructive",title:"Signup Failed",description:L.message||"An error occurred during signup"})}finally{V(!1)}return}if(de()){V(!0);try{const z=await(await lt("POST","/api/auth/signup",{email:l,password:d,referralCode:a||void 0})).json();if(z.requiresPayment){z.passwordHash&&sessionStorage.setItem("pendingPasswordHash",z.passwordHash),sessionStorage.setItem("pendingEmail",l),t({title:"Redirecting to Payment",description:"You'll be redirected to complete your subscription..."});const le=await(await lt("POST","/api/signup/checkout",{email:z.email||l,priceId:i||"monthly",referralCode:a||void 0})).json();if(le.url){window.location.href=le.url;return}else if(le.devBypass){t({title:"Account Created!",description:"Welcome to BJJ OS (Dev Mode)"}),_e.invalidateQueries({queryKey:["/api/auth/me"]}),e("/onboarding");return}else throw new Error(le.error||"Failed to create checkout session")}if(z.error){t({variant:"destructive",title:"Signup Failed",description:z.error});return}z.sessionToken&&z.user&&(t({title:"Account Created!",description:"Welcome to BJJ OS"}),_e.invalidateQueries({queryKey:["/api/auth/me"]}),e("/onboarding"))}catch(L){t({variant:"destructive",title:"Signup Failed",description:L.message||"An error occurred during signup"})}finally{V(!1)}}},ce=()=>i==="annual"?"Annual ($149.88/year)":i==="monthly"?"Monthly ($19.99/month)":"Free Preview";return r.jsxs("div",{className:"signup-page page-container",children:[r.jsx("nav",{className:"signup-nav",children:r.jsxs("div",{className:"signup-nav-content",children:[r.jsx("div",{className:"signup-nav-left",children:r.jsx("a",{href:"/",className:"signup-logo-link","data-testid":"link-home",children:r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"signup-logo-img"})})}),r.jsx("div",{className:"signup-nav-right",children:r.jsx("button",{className:"signup-nav-login",onClick:()=>e("/login"),"data-testid":"button-login",children:"Login"})})]})}),r.jsxs("div",{className:"signup-container",children:[r.jsxs("div",{className:"signup-header",children:[r.jsx("h1",{className:"signup-headline",children:w?"Accept Your Invitation":"Create Your Account"}),r.jsx("p",{className:"signup-subheadline",children:w?"You've been invited to BJJ OS with lifetime access":"Start your 7-day free trial today  $19.99/month after trial"}),w&&r.jsx("div",{className:"selected-plan-badge",style:{background:"linear-gradient(135deg, #2563EB 0%, #7C3AED 100%)",color:"white"},"data-testid":"badge-lifetime-access",children:" Lifetime Access Invitation"}),!w&&i&&r.jsxs("div",{className:"selected-plan-badge","data-testid":"badge-selected-plan",children:["Selected: ",ce()]}),!w&&a&&!n&&r.jsxs("div",{className:"referral-applied","data-testid":"text-referral-applied",children:[' Referral code "',a,'" will be applied']})]}),r.jsxs("form",{onSubmit:ve,className:"signup-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"email",children:"Email"}),r.jsx("input",{id:"email",type:"email",className:`form-input ${E?"error":""}`,placeholder:"your@email.com",value:l,onChange:U=>c(U.target.value),disabled:te||w,readOnly:w,"data-testid":"input-email"}),E&&r.jsx("div",{className:"form-error","data-testid":"text-email-error",children:E}),w&&!j&&r.jsx("p",{className:"form-hint",children:"Request a verification code to continue"})]}),w&&r.jsx(r.Fragment,{children:j?r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"verificationCode",children:"Verification Code"}),r.jsx("input",{id:"verificationCode",type:"text",className:"form-input",placeholder:"Enter 6-digit code",value:g,onChange:U=>y(U.target.value),maxLength:6,disabled:te,"data-testid":"input-verification-code"}),r.jsx("p",{className:"form-hint",children:"Check your email for the verification code"})]}):r.jsx("button",{type:"button",onClick:me,disabled:b||!l,className:"signup-button",style:{marginBottom:"20px"},"data-testid":"button-request-code",children:b?"Sending Code...":"Request Verification Code"})}),!w&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"password",children:"Password"}),r.jsx("input",{id:"password",type:"password",className:`form-input ${F?"error":""}`,placeholder:"At least 8 characters",value:d,onChange:U=>u(U.target.value),disabled:te,"data-testid":"input-password"}),F&&r.jsx("div",{className:"form-error","data-testid":"text-password-error",children:F})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"confirmPassword",children:"Confirm Password"}),r.jsx("input",{id:"confirmPassword",type:"password",className:`form-input ${T?"error":""}`,placeholder:"Re-enter your password",value:f,onChange:U=>h(U.target.value),disabled:te,"data-testid":"input-confirm-password"}),T&&r.jsx("div",{className:"form-error","data-testid":"text-confirm-password-error",children:T})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"username",children:["Username ",w&&r.jsx("span",{style:{opacity:.6},children:"(Optional)"})]}),r.jsxs("div",{className:"username-input-wrapper",children:[r.jsx("input",{id:"username",type:"text",className:`form-input ${O?"error":""} ${R?"success":""}`,placeholder:"username",value:p,onChange:U=>v(U.target.value.toLowerCase()),disabled:te,"data-testid":"input-username"}),!w&&r.jsxs("div",{className:"username-status",children:[Q&&r.jsx(De,{className:"w-4 h-4 animate-spin text-gray-400"}),!Q&&R===!0&&r.jsx(Qs,{className:"w-4 h-4 text-green-500","data-testid":"icon-available"}),!Q&&R===!1&&r.jsx(lr,{className:"w-4 h-4 text-red-500","data-testid":"icon-unavailable"})]})]}),!w&&R===!0&&r.jsxs("div",{className:"form-success","data-testid":"text-username-available",children:["@",p," is available!"]}),!w&&O&&r.jsx("div",{className:"form-error","data-testid":"text-username-error",children:O}),!w&&R===!1&&B.length>0&&r.jsxs("div",{className:"username-suggestions","data-testid":"div-suggestions",children:[r.jsx("p",{className:"suggestions-label",children:"Username taken. Try these:"}),r.jsx("div",{className:"suggestions-list",children:B.map(U=>r.jsxs("button",{type:"button",className:"suggestion-badge",onClick:()=>v(U),"data-testid":`badge-suggestion-${U}`,children:["@",U]},U))})]}),r.jsx("p",{className:"form-hint",children:w?"Optional - you can add this later in settings":"3-20 characters, lowercase letters, numbers, and underscores only"})]}),r.jsx("button",{type:"submit",className:"signup-button",disabled:te||w&&(!j||!g),"data-testid":"button-signup",children:te?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):w?"Create Account with Lifetime Access":"Create Account"}),r.jsxs("div",{className:"login-link",children:["Already have an account?"," ",r.jsx("button",{type:"button",onClick:()=>e("/login"),className:"login-link-button","data-testid":"link-login",children:"Log In"})]})]})]}),r.jsx("style",{children:`
        /* ==================== GLOBAL VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0F0F0F;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --blue-hover-1: #1D4ED8;
          --purple-hover-1: #6D28D9;
          --blue-hover-2: #1E40AF;
          --purple-hover-2: #5B21B6;
          --green: #22C55E;
          --green-glow: rgba(34, 197, 94, 0.3);
          --red: #EF4444;
          --font-mono: 'JetBrains Mono', monospace;
        }

        /* ==================== BASE STYLES ==================== */
        .signup-page {
          font-family: var(--font-mono);
          background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
          color: var(--white);
          min-height: 100vh;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          position: relative;
        }

        /* Subtle grain texture overlay */
        .signup-page::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
          pointer-events: none;
          z-index: 9999;
          mix-blend-mode: overlay;
        }

        /* ==================== NAVIGATION ==================== */
        .signup-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: rgba(10, 8, 18, 0.8);
          backdrop-filter: blur(12px);
          height: 72px;
          z-index: 1000;
          border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .signup-nav-content {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 40px;
          height: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .signup-nav-left {
          display: flex;
          align-items: center;
        }

        .signup-logo-link {
          display: flex;
          align-items: center;
        }

        .signup-logo-img {
          height: 36px;
          width: auto;
        }

        .signup-nav-right {
          display: flex;
          align-items: center;
        }

        .signup-nav-login {
          background: none;
          border: none;
          font-family: var(--font-mono);
          font-size: 16px;
          color: var(--gray-light);
          cursor: pointer;
          transition: color 150ms ease;
          padding: 16px;
        }

        .signup-nav-login:hover {
          color: var(--white);
        }

        /* ==================== CONTAINER ==================== */
        .signup-container {
          padding: calc(80px + 72px) 40px 80px;
          max-width: 500px;
          margin: 0 auto;
        }

        /* ==================== HEADER ==================== */
        .signup-header {
          text-align: center;
          margin-bottom: 48px;
        }

        .signup-headline {
          font-size: 48px;
          font-weight: 700;
          color: var(--white);
          line-height: 1.1;
          letter-spacing: -0.01em;
          margin-bottom: 16px;
        }

        .signup-subheadline {
          font-size: 16px;
          font-weight: 400;
          color: var(--gray-light);
          line-height: 1.6;
          margin-bottom: 24px;
        }

        .selected-plan-badge {
          display: inline-block;
          font-size: 14px;
          font-weight: 600;
          color: var(--white);
          padding: 8px 16px;
          background: rgba(37, 99, 235, 0.1);
          border: 1px solid rgba(37, 99, 235, 0.3);
          margin-bottom: 8px;
        }

        .referral-applied {
          font-size: 14px;
          color: var(--green);
          text-shadow: 0 0 20px var(--green-glow);
        }

        /* ==================== FORM STYLES ==================== */
        .signup-form {
          background: var(--black-elevated);
          padding: 48px;
          border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .form-group {
          margin-bottom: 24px;
        }

        .form-label {
          display: block;
          font-family: var(--font-mono);
          font-weight: 600;
          font-size: 14px;
          color: var(--white);
          margin-bottom: 8px;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .form-input {
          width: 100%;
          background: var(--black);
          border: 1px solid var(--gray-dark);
          color: var(--white);
          font-family: var(--font-mono);
          font-size: 16px;
          padding: 12px 16px;
          transition: all 150ms ease;
        }

        .form-input::placeholder {
          color: var(--gray-medium);
        }

        .form-input:focus {
          outline: none;
          border: 1px solid var(--blue);
        }

        .form-input.error {
          border: 1px solid var(--red);
        }

        .form-input.success {
          border: 1px solid var(--green);
        }

        .form-error {
          font-size: 14px;
          color: var(--red);
          margin-top: 8px;
        }

        .form-success {
          font-size: 14px;
          color: var(--green);
          text-shadow: 0 0 20px var(--green-glow);
          margin-top: 8px;
        }

        .form-hint {
          font-size: 12px;
          color: var(--gray-medium);
          margin-top: 8px;
        }

        /* Username Input */
        .username-input-wrapper {
          position: relative;
        }

        .username-status {
          position: absolute;
          right: 12px;
          top: 50%;
          transform: translateY(-50%);
        }

        .username-suggestions {
          margin-top: 12px;
        }

        .suggestions-label {
          font-size: 14px;
          color: var(--gray-light);
          margin-bottom: 8px;
        }

        .suggestions-list {
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
        }

        .suggestion-badge {
          background: transparent;
          border: 1px solid var(--gray-dark);
          color: var(--gray-light);
          font-family: var(--font-mono);
          font-size: 14px;
          padding: 6px 12px;
          cursor: pointer;
          transition: all 150ms ease;
        }

        .suggestion-badge:hover {
          border: 1px solid var(--blue);
          color: var(--blue);
        }

        /* Submit Button */
        .signup-button {
          width: 100%;
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
          border: none;
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
          padding: 18px 48px;
          cursor: pointer;
          transition: all 150ms ease;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-top: 32px;
        }

        .signup-button:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .signup-button:active {
          transform: translateY(1px);
        }

        .signup-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        @keyframes gradient-shift {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }

        /* Login Link */
        .login-link {
          text-align: center;
          font-size: 14px;
          color: var(--gray-light);
          margin-top: 24px;
        }

        .login-link-button {
          background: none;
          border: none;
          color: var(--blue);
          font-family: var(--font-mono);
          font-weight: 600;
          cursor: pointer;
          transition: color 150ms ease;
        }

        .login-link-button:hover {
          color: var(--purple);
          text-decoration: underline;
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .signup-nav {
            height: 64px;
          }

          .signup-nav-content {
            padding: 0 24px;
          }

          .signup-container {
            padding: calc(60px + 64px) 24px 60px;
          }

          .signup-headline {
            font-size: 36px;
          }

          .signup-form {
            padding: 32px;
          }
        }
      `})]})}var Xh=e=>e.type==="checkbox",Go=e=>e instanceof Date,xr=e=>e==null;const J5=e=>typeof e=="object";var wn=e=>!xr(e)&&!Array.isArray(e)&&J5(e)&&!Go(e),X5=e=>wn(e)&&e.target?Xh(e.target)?e.target.checked:e.target.value:e,fV=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Z5=(e,t)=>e.has(fV(t)),hV=e=>{const t=e.constructor&&e.constructor.prototype;return wn(t)&&t.hasOwnProperty("isPrototypeOf")},TN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Vn(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(TN&&(e instanceof Blob||s))&&(n||wn(e)))if(t=n?[]:{},!n&&!hV(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Vn(e[i]));else return e;return t}var Nv=e=>Array.isArray(e)?e.filter(Boolean):[],xn=e=>e===void 0,Oe=(e,t,n)=>{if(!t||!wn(e))return n;const s=Nv(t.split(/[,[\].]+?/)).reduce((i,a)=>xr(i)?i:i[a],e);return xn(s)||s===e?xn(e[t])?n:e[t]:s},qr=e=>typeof e=="boolean",ON=e=>/^\w*$/.test(e),eR=e=>Nv(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Et=(e,t,n)=>{let s=-1;const i=ON(t)?[t]:eR(t),a=i.length,o=a-1;for(;++s<a;){const l=i[s];let c=n;if(s!==o){const d=e[l];c=wn(d)||Array.isArray(d)?d:isNaN(+i[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const bg={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Bs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_i={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},tR=q.createContext(null),Sv=()=>q.useContext(tR),mV=e=>{const{children:t,...n}=e;return q.createElement(tR.Provider,{value:n},t)};var nR=(e,t,n,s=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Bs.all&&(t._proxyFormState[o]=!s||Bs.all),n&&(n[o]=!0),e[o]}});return i};function pV(e){const t=Sv(),{control:n=t.control,disabled:s,name:i,exact:a}=e||{},[o,l]=q.useState(n._formState),c=q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=q.useRef(i);return d.current=i,q.useEffect(()=>n._subscribe({name:d.current,formState:c.current,exact:a,callback:u=>{!s&&l({...n._formState,...u})}}),[n,s,a]),q.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),q.useMemo(()=>nR(o,n,c.current,!1),[o,n])}var ui=e=>typeof e=="string",rR=(e,t,n,s,i)=>ui(e)?(s&&t.watch.add(e),Oe(n,e,i)):Array.isArray(e)?e.map(a=>(s&&t.watch.add(a),Oe(n,a))):(s&&(t.watchAll=!0),n);function gV(e){const t=Sv(),{control:n=t.control,name:s,defaultValue:i,disabled:a,exact:o}=e||{},l=q.useRef(s),c=q.useRef(i);l.current=s,q.useEffect(()=>n._subscribe({name:l.current,formState:{values:!0},exact:o,callback:f=>!a&&u(rR(l.current,n._names,f.values||n._formValues,!1,c.current))}),[n,a,o]);const[d,u]=q.useState(n._getWatch(s,i));return q.useEffect(()=>n._removeUnmounted()),d}function xV(e){const t=Sv(),{name:n,disabled:s,control:i=t.control,shouldUnregister:a}=e,o=Z5(i._names.array,n),l=gV({control:i,name:n,defaultValue:Oe(i._formValues,n,Oe(i._defaultValues,n,e.defaultValue)),exact:!0}),c=pV({control:i,name:n,exact:!0}),d=q.useRef(e),u=q.useRef(i.register(n,{...e.rules,value:l,...qr(e.disabled)?{disabled:e.disabled}:{}})),f=q.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Oe(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Oe(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Oe(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Oe(c.validatingFields,n)},error:{enumerable:!0,get:()=>Oe(c.errors,n)}}),[c,n]),h=q.useCallback(y=>u.current.onChange({target:{value:X5(y),name:n},type:bg.CHANGE}),[n]),p=q.useCallback(()=>u.current.onBlur({target:{value:Oe(i._formValues,n),name:n},type:bg.BLUR}),[n,i._formValues]),v=q.useCallback(y=>{const j=Oe(i._fields,n);j&&y&&(j._f.ref={focus:()=>y.focus(),select:()=>y.select(),setCustomValidity:m=>y.setCustomValidity(m),reportValidity:()=>y.reportValidity()})},[i._fields,n]),g=q.useMemo(()=>({name:n,value:l,...qr(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:h,onBlur:p,ref:v}),[n,s,c.disabled,h,p,v,l]);return q.useEffect(()=>{const y=i._options.shouldUnregister||a;i.register(n,{...d.current.rules,...qr(d.current.disabled)?{disabled:d.current.disabled}:{}});const j=(m,b)=>{const N=Oe(i._fields,m);N&&N._f&&(N._f.mount=b)};if(j(n,!0),y){const m=Vn(Oe(i._options.defaultValues,n));Et(i._defaultValues,n,m),xn(Oe(i._formValues,n))&&Et(i._formValues,n,m)}return!o&&i.register(n),()=>{(o?y&&!i._state.action:y)?i.unregister(n):j(n,!1)}},[n,i,o,a]),q.useEffect(()=>{i._setDisabledField({disabled:s,name:n})},[s,n,i]),q.useMemo(()=>({field:g,formState:c,fieldState:f}),[g,c,f])}const vV=e=>e.render(xV(e));var sR=(e,t,n,s,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:i||!0}}:{},sf=e=>Array.isArray(e)?e:[e],xC=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},bj=e=>xr(e)||!J5(e);function Da(e,t){if(bj(e)||bj(t))return e===t;if(Go(e)&&Go(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const i of n){const a=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const o=t[i];if(Go(a)&&Go(o)||wn(a)&&wn(o)||Array.isArray(a)&&Array.isArray(o)?!Da(a,o):a!==o)return!1}}return!0}var pr=e=>wn(e)&&!Object.keys(e).length,_N=e=>e.type==="file",zs=e=>typeof e=="function",jg=e=>{if(!TN)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},iR=e=>e.type==="select-multiple",IN=e=>e.type==="radio",yV=e=>IN(e)||Xh(e),ob=e=>jg(e)&&e.isConnected;function bV(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=xn(e)?s++:e[t[s++]];return e}function jV(e){for(const t in e)if(e.hasOwnProperty(t)&&!xn(e[t]))return!1;return!0}function En(e,t){const n=Array.isArray(t)?t:ON(t)?[t]:eR(t),s=n.length===1?e:bV(e,n),i=n.length-1,a=n[i];return s&&delete s[a],i!==0&&(wn(s)&&pr(s)||Array.isArray(s)&&jV(s))&&En(e,n.slice(0,-1)),e}var aR=e=>{for(const t in e)if(zs(e[t]))return!0;return!1};function wg(e,t={}){const n=Array.isArray(e);if(wn(e)||n)for(const s in e)Array.isArray(e[s])||wn(e[s])&&!aR(e[s])?(t[s]=Array.isArray(e[s])?[]:{},wg(e[s],t[s])):xr(e[s])||(t[s]=!0);return t}function oR(e,t,n){const s=Array.isArray(e);if(wn(e)||s)for(const i in e)Array.isArray(e[i])||wn(e[i])&&!aR(e[i])?xn(t)||bj(n[i])?n[i]=Array.isArray(e[i])?wg(e[i],[]):{...wg(e[i])}:oR(e[i],xr(t)?{}:t[i],n[i]):n[i]=!Da(e[i],t[i]);return n}var ju=(e,t)=>oR(e,t,wg(t));const vC={value:!1,isValid:!1},yC={value:!0,isValid:!0};var lR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!xn(e[0].attributes.value)?xn(e[0].value)||e[0].value===""?yC:{value:e[0].value,isValid:!0}:yC:vC}return vC},cR=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>xn(e)?e:t?e===""?NaN:e&&+e:n&&ui(e)?new Date(e):s?s(e):e;const bC={isValid:!1,value:null};var dR=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,bC):bC;function jC(e){const t=e.ref;return _N(t)?t.files:IN(t)?dR(e.refs).value:iR(t)?[...t.selectedOptions].map(({value:n})=>n):Xh(t)?lR(e.refs).value:cR(xn(t.value)?e.ref.value:t.value,e)}var wV=(e,t,n,s)=>{const i={};for(const a of e){const o=Oe(t,a);o&&Et(i,a,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:s}},Ng=e=>e instanceof RegExp,wu=e=>xn(e)?e:Ng(e)?e.source:wn(e)?Ng(e.value)?e.value.source:e.value:e,wC=e=>({isOnSubmit:!e||e===Bs.onSubmit,isOnBlur:e===Bs.onBlur,isOnChange:e===Bs.onChange,isOnAll:e===Bs.all,isOnTouch:e===Bs.onTouched});const NC="AsyncFunction";var NV=e=>!!e&&!!e.validate&&!!(zs(e.validate)&&e.validate.constructor.name===NC||wn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===NC)),SV=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),SC=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const af=(e,t,n,s)=>{for(const i of n||Object.keys(e)){const a=Oe(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!s)return!0;if(o.ref&&t(o.ref,o.name)&&!s)return!0;if(af(l,t))break}else if(wn(l)&&af(l,t))break}}};function kC(e,t,n){const s=Oe(e,n);if(s||ON(n))return{error:s,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Oe(t,a),l=Oe(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var kV=(e,t,n,s)=>{n(e);const{name:i,...a}=e;return pr(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!s||Bs.all))},CV=(e,t,n)=>!e||!t||e===t||sf(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),AV=(e,t,n,s,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?s.isOnBlur:i.isOnBlur)?!e:(n?s.isOnChange:i.isOnChange)?e:!0,PV=(e,t)=>!Nv(Oe(e,t)).length&&En(e,t),EV=(e,t,n)=>{const s=sf(Oe(e,n));return Et(s,"root",t[n]),Et(e,n,s),e},Ep=e=>ui(e);function CC(e,t,n="validate"){if(Ep(e)||Array.isArray(e)&&e.every(Ep)||qr(e)&&!e)return{type:n,message:Ep(e)?e:"",ref:t}}var Ul=e=>wn(e)&&!Ng(e)?e:{value:e,message:""},AC=async(e,t,n,s,i,a)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:f,max:h,pattern:p,validate:v,name:g,valueAsNumber:y,mount:j}=e._f,m=Oe(n,g);if(!j||t.has(g))return{};const b=l?l[0]:o,N=A=>{i&&b.reportValidity&&(b.setCustomValidity(qr(A)?"":A||""),b.reportValidity())},w={},S=IN(o),k=Xh(o),P=S||k,E=(y||_N(o))&&xn(o.value)&&xn(m)||jg(o)&&o.value===""||m===""||Array.isArray(m)&&!m.length,_=sR.bind(null,g,s,w),F=(A,T,M,O=_i.maxLength,C=_i.minLength)=>{const R=A?T:M;w[g]={type:A?O:C,message:R,ref:o,..._(A?O:C,R)}};if(a?!Array.isArray(m)||!m.length:c&&(!P&&(E||xr(m))||qr(m)&&!m||k&&!lR(l).isValid||S&&!dR(l).isValid)){const{value:A,message:T}=Ep(c)?{value:!!c,message:c}:Ul(c);if(A&&(w[g]={type:_i.required,message:T,ref:b,..._(_i.required,T)},!s))return N(T),w}if(!E&&(!xr(f)||!xr(h))){let A,T;const M=Ul(h),O=Ul(f);if(!xr(m)&&!isNaN(m)){const C=o.valueAsNumber||m&&+m;xr(M.value)||(A=C>M.value),xr(O.value)||(T=C<O.value)}else{const C=o.valueAsDate||new Date(m),R=H=>new Date(new Date().toDateString()+" "+H),I=o.type=="time",B=o.type=="week";ui(M.value)&&m&&(A=I?R(m)>R(M.value):B?m>M.value:C>new Date(M.value)),ui(O.value)&&m&&(T=I?R(m)<R(O.value):B?m<O.value:C<new Date(O.value))}if((A||T)&&(F(!!A,M.message,O.message,_i.max,_i.min),!s))return N(w[g].message),w}if((d||u)&&!E&&(ui(m)||a&&Array.isArray(m))){const A=Ul(d),T=Ul(u),M=!xr(A.value)&&m.length>+A.value,O=!xr(T.value)&&m.length<+T.value;if((M||O)&&(F(M,A.message,T.message),!s))return N(w[g].message),w}if(p&&!E&&ui(m)){const{value:A,message:T}=Ul(p);if(Ng(A)&&!m.match(A)&&(w[g]={type:_i.pattern,message:T,ref:o,..._(_i.pattern,T)},!s))return N(T),w}if(v){if(zs(v)){const A=await v(m,n),T=CC(A,b);if(T&&(w[g]={...T,..._(_i.validate,T.message)},!s))return N(T.message),w}else if(wn(v)){let A={};for(const T in v){if(!pr(A)&&!s)break;const M=CC(await v[T](m,n),b,T);M&&(A={...M,..._(T,M.message)},N(M.message),s&&(w[g]=A))}if(!pr(A)&&(w[g]={ref:b,...A},!s))return w}}return N(!0),w};const TV={mode:Bs.onSubmit,reValidateMode:Bs.onChange,shouldFocusError:!0};function OV(e={}){let t={...TV,...e},n={submitCount:0,isDirty:!1,isLoading:zs(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const s={};let i=wn(t.defaultValues)||wn(t.values)?Vn(t.values||t.defaultValues)||{}:{},a=t.shouldUnregister?{}:Vn(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const h={array:xC(),state:xC()},p=wC(t.mode),v=wC(t.reValidateMode),g=t.criteriaMode===Bs.all,y=$=>Y=>{clearTimeout(d),d=setTimeout($,Y)},j=async $=>{if(!t.disabled&&(u.isValid||f.isValid||$)){const Y=t.resolver?pr((await E()).errors):await F(s,!0);Y!==n.isValid&&h.state.next({isValid:Y})}},m=($,Y)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&(($||Array.from(l.mount)).forEach(ie=>{ie&&(Y?Et(n.validatingFields,ie,Y):En(n.validatingFields,ie))}),h.state.next({validatingFields:n.validatingFields,isValidating:!pr(n.validatingFields)}))},b=($,Y=[],ie,be,ye=!0,ge=!0)=>{if(be&&ie&&!t.disabled){if(o.action=!0,ge&&Array.isArray(Oe(s,$))){const Pe=ie(Oe(s,$),be.argA,be.argB);ye&&Et(s,$,Pe)}if(ge&&Array.isArray(Oe(n.errors,$))){const Pe=ie(Oe(n.errors,$),be.argA,be.argB);ye&&Et(n.errors,$,Pe),PV(n.errors,$)}if((u.touchedFields||f.touchedFields)&&ge&&Array.isArray(Oe(n.touchedFields,$))){const Pe=ie(Oe(n.touchedFields,$),be.argA,be.argB);ye&&Et(n.touchedFields,$,Pe)}(u.dirtyFields||f.dirtyFields)&&(n.dirtyFields=ju(i,a)),h.state.next({name:$,isDirty:T($,Y),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Et(a,$,Y)},N=($,Y)=>{Et(n.errors,$,Y),h.state.next({errors:n.errors})},w=$=>{n.errors=$,h.state.next({errors:n.errors,isValid:!1})},S=($,Y,ie,be)=>{const ye=Oe(s,$);if(ye){const ge=Oe(a,$,xn(ie)?Oe(i,$):ie);xn(ge)||be&&be.defaultChecked||Y?Et(a,$,Y?ge:jC(ye._f)):C($,ge),o.mount&&j()}},k=($,Y,ie,be,ye)=>{let ge=!1,Pe=!1;const We={name:$};if(!t.disabled){if(!ie||be){(u.isDirty||f.isDirty)&&(Pe=n.isDirty,n.isDirty=We.isDirty=T(),ge=Pe!==We.isDirty);const _t=Da(Oe(i,$),Y);Pe=!!Oe(n.dirtyFields,$),_t?En(n.dirtyFields,$):Et(n.dirtyFields,$,!0),We.dirtyFields=n.dirtyFields,ge=ge||(u.dirtyFields||f.dirtyFields)&&Pe!==!_t}if(ie){const _t=Oe(n.touchedFields,$);_t||(Et(n.touchedFields,$,ie),We.touchedFields=n.touchedFields,ge=ge||(u.touchedFields||f.touchedFields)&&_t!==ie)}ge&&ye&&h.state.next(We)}return ge?We:{}},P=($,Y,ie,be)=>{const ye=Oe(n.errors,$),ge=(u.isValid||f.isValid)&&qr(Y)&&n.isValid!==Y;if(t.delayError&&ie?(c=y(()=>N($,ie)),c(t.delayError)):(clearTimeout(d),c=null,ie?Et(n.errors,$,ie):En(n.errors,$)),(ie?!Da(ye,ie):ye)||!pr(be)||ge){const Pe={...be,...ge&&qr(Y)?{isValid:Y}:{},errors:n.errors,name:$};n={...n,...Pe},h.state.next(Pe)}},E=async $=>{m($,!0);const Y=await t.resolver(a,t.context,wV($||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return m($),Y},_=async $=>{const{errors:Y}=await E($);if($)for(const ie of $){const be=Oe(Y,ie);be?Et(n.errors,ie,be):En(n.errors,ie)}else n.errors=Y;return Y},F=async($,Y,ie={valid:!0})=>{for(const be in $){const ye=$[be];if(ye){const{_f:ge,...Pe}=ye;if(ge){const We=l.array.has(ge.name),_t=ye._f&&NV(ye._f);_t&&u.validatingFields&&m([be],!0);const nn=await AC(ye,l.disabled,a,g,t.shouldUseNativeValidation&&!Y,We);if(_t&&u.validatingFields&&m([be]),nn[ge.name]&&(ie.valid=!1,Y))break;!Y&&(Oe(nn,ge.name)?We?EV(n.errors,nn,ge.name):Et(n.errors,ge.name,nn[ge.name]):En(n.errors,ge.name))}!pr(Pe)&&await F(Pe,Y,ie)}}return ie.valid},A=()=>{for(const $ of l.unMount){const Y=Oe(s,$);Y&&(Y._f.refs?Y._f.refs.every(ie=>!ob(ie)):!ob(Y._f.ref))&&ce($)}l.unMount=new Set},T=($,Y)=>!t.disabled&&($&&Y&&Et(a,$,Y),!Da(D(),i)),M=($,Y,ie)=>rR($,l,{...o.mount?a:xn(Y)?i:ui($)?{[$]:Y}:Y},ie,Y),O=$=>Nv(Oe(o.mount?a:i,$,t.shouldUnregister?Oe(i,$,[]):[])),C=($,Y,ie={})=>{const be=Oe(s,$);let ye=Y;if(be){const ge=be._f;ge&&(!ge.disabled&&Et(a,$,cR(Y,ge)),ye=jg(ge.ref)&&xr(Y)?"":Y,iR(ge.ref)?[...ge.ref.options].forEach(Pe=>Pe.selected=ye.includes(Pe.value)):ge.refs?Xh(ge.ref)?ge.refs.length>1?ge.refs.forEach(Pe=>(!Pe.defaultChecked||!Pe.disabled)&&(Pe.checked=Array.isArray(ye)?!!ye.find(We=>We===Pe.value):ye===Pe.value)):ge.refs[0]&&(ge.refs[0].checked=!!ye):ge.refs.forEach(Pe=>Pe.checked=Pe.value===ye):_N(ge.ref)?ge.ref.value="":(ge.ref.value=ye,ge.ref.type||h.state.next({name:$,values:Vn(a)})))}(ie.shouldDirty||ie.shouldTouch)&&k($,ye,ie.shouldTouch,ie.shouldDirty,!0),ie.shouldValidate&&Q($)},R=($,Y,ie)=>{for(const be in Y){const ye=Y[be],ge=`${$}.${be}`,Pe=Oe(s,ge);(l.array.has($)||wn(ye)||Pe&&!Pe._f)&&!Go(ye)?R(ge,ye,ie):C(ge,ye,ie)}},I=($,Y,ie={})=>{const be=Oe(s,$),ye=l.array.has($),ge=Vn(Y);Et(a,$,ge),ye?(h.array.next({name:$,values:Vn(a)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&ie.shouldDirty&&h.state.next({name:$,dirtyFields:ju(i,a),isDirty:T($,ge)})):be&&!be._f&&!xr(ge)?R($,ge,ie):C($,ge,ie),SC($,l)&&h.state.next({...n}),h.state.next({name:o.mount?$:void 0,values:Vn(a)})},B=async $=>{o.mount=!0;const Y=$.target;let ie=Y.name,be=!0;const ye=Oe(s,ie),ge=Pe=>{be=Number.isNaN(Pe)||Go(Pe)&&isNaN(Pe.getTime())||Da(Pe,Oe(a,ie,Pe))};if(ye){let Pe,We;const _t=Y.type?jC(ye._f):X5($),nn=$.type===bg.BLUR||$.type===bg.FOCUS_OUT,Na=!SV(ye._f)&&!t.resolver&&!Oe(n.errors,ie)&&!ye._f.deps||AV(nn,Oe(n.touchedFields,ie),n.isSubmitted,v,p),Zn=SC(ie,l,nn);Et(a,ie,_t),nn?(ye._f.onBlur&&ye._f.onBlur($),c&&c(0)):ye._f.onChange&&ye._f.onChange($);const Jt=k(ie,_t,nn),he=!pr(Jt)||Zn;if(!nn&&h.state.next({name:ie,type:$.type,values:Vn(a)}),Na)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?nn&&j():nn||j()),he&&h.state.next({name:ie,...Zn?{}:Jt});if(!nn&&Zn&&h.state.next({...n}),t.resolver){const{errors:Ge}=await E([ie]);if(ge(_t),be){const Lt=kC(n.errors,s,ie),at=kC(Ge,s,Lt.name||ie);Pe=at.error,ie=at.name,We=pr(Ge)}}else m([ie],!0),Pe=(await AC(ye,l.disabled,a,g,t.shouldUseNativeValidation))[ie],m([ie]),ge(_t),be&&(Pe?We=!1:(u.isValid||f.isValid)&&(We=await F(s,!0)));be&&(ye._f.deps&&Q(ye._f.deps),P(ie,We,Pe,Jt))}},H=($,Y)=>{if(Oe(n.errors,Y)&&$.focus)return $.focus(),1},Q=async($,Y={})=>{let ie,be;const ye=sf($);if(t.resolver){const ge=await _(xn($)?$:ye);ie=pr(ge),be=$?!ye.some(Pe=>Oe(ge,Pe)):ie}else $?(be=(await Promise.all(ye.map(async ge=>{const Pe=Oe(s,ge);return await F(Pe&&Pe._f?{[ge]:Pe}:Pe)}))).every(Boolean),!(!be&&!n.isValid)&&j()):be=ie=await F(s);return h.state.next({...!ui($)||(u.isValid||f.isValid)&&ie!==n.isValid?{}:{name:$},...t.resolver||!$?{isValid:ie}:{},errors:n.errors}),Y.shouldFocus&&!be&&af(s,H,$?ye:l.mount),be},D=$=>{const Y={...o.mount?a:i};return xn($)?Y:ui($)?Oe(Y,$):$.map(ie=>Oe(Y,ie))},te=($,Y)=>({invalid:!!Oe((Y||n).errors,$),isDirty:!!Oe((Y||n).dirtyFields,$),error:Oe((Y||n).errors,$),isValidating:!!Oe(n.validatingFields,$),isTouched:!!Oe((Y||n).touchedFields,$)}),V=$=>{$&&sf($).forEach(Y=>En(n.errors,Y)),h.state.next({errors:$?n.errors:{}})},J=($,Y,ie)=>{const be=(Oe(s,$,{_f:{}})._f||{}).ref,ye=Oe(n.errors,$)||{},{ref:ge,message:Pe,type:We,..._t}=ye;Et(n.errors,$,{..._t,...Y,ref:be}),h.state.next({name:$,errors:n.errors,isValid:!1}),ie&&ie.shouldFocus&&be&&be.focus&&be.focus()},me=($,Y)=>zs($)?h.state.subscribe({next:ie=>$(M(void 0,Y),ie)}):M($,Y,!0),de=$=>h.state.subscribe({next:Y=>{CV($.name,Y.name,$.exact)&&kV(Y,$.formState||u,nt,$.reRenderRoot)&&$.callback({values:{...a},...n,...Y})}}).unsubscribe,ve=$=>(o.mount=!0,f={...f,...$.formState},de({...$,formState:f})),ce=($,Y={})=>{for(const ie of $?sf($):l.mount)l.mount.delete(ie),l.array.delete(ie),Y.keepValue||(En(s,ie),En(a,ie)),!Y.keepError&&En(n.errors,ie),!Y.keepDirty&&En(n.dirtyFields,ie),!Y.keepTouched&&En(n.touchedFields,ie),!Y.keepIsValidating&&En(n.validatingFields,ie),!t.shouldUnregister&&!Y.keepDefaultValue&&En(i,ie);h.state.next({values:Vn(a)}),h.state.next({...n,...Y.keepDirty?{isDirty:T()}:{}}),!Y.keepIsValid&&j()},U=({disabled:$,name:Y})=>{(qr($)&&o.mount||$||l.disabled.has(Y))&&($?l.disabled.add(Y):l.disabled.delete(Y))},L=($,Y={})=>{let ie=Oe(s,$);const be=qr(Y.disabled)||qr(t.disabled);return Et(s,$,{...ie||{},_f:{...ie&&ie._f?ie._f:{ref:{name:$}},name:$,mount:!0,...Y}}),l.mount.add($),ie?U({disabled:qr(Y.disabled)?Y.disabled:t.disabled,name:$}):S($,!0,Y.value),{...be?{disabled:Y.disabled||t.disabled}:{},...t.progressive?{required:!!Y.required,min:wu(Y.min),max:wu(Y.max),minLength:wu(Y.minLength),maxLength:wu(Y.maxLength),pattern:wu(Y.pattern)}:{},name:$,onChange:B,onBlur:B,ref:ye=>{if(ye){L($,Y),ie=Oe(s,$);const ge=xn(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,Pe=yV(ge),We=ie._f.refs||[];if(Pe?We.find(_t=>_t===ge):ge===ie._f.ref)return;Et(s,$,{_f:{...ie._f,...Pe?{refs:[...We.filter(ob),ge,...Array.isArray(Oe(i,$))?[{}]:[]],ref:{type:ge.type,name:$}}:{ref:ge}}}),S($,!1,void 0,ge)}else ie=Oe(s,$,{}),ie._f&&(ie._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(Z5(l.array,$)&&o.action)&&l.unMount.add($)}}},z=()=>t.shouldFocusError&&af(s,H,l.mount),Ne=$=>{qr($)&&(h.state.next({disabled:$}),af(s,(Y,ie)=>{const be=Oe(s,ie);be&&(Y.disabled=be._f.disabled||$,Array.isArray(be._f.refs)&&be._f.refs.forEach(ye=>{ye.disabled=be._f.disabled||$}))},0,!1))},le=($,Y)=>async ie=>{let be;ie&&(ie.preventDefault&&ie.preventDefault(),ie.persist&&ie.persist());let ye=Vn(a);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ge,values:Pe}=await E();n.errors=ge,ye=Pe}else await F(s);if(l.disabled.size)for(const ge of l.disabled)Et(ye,ge,void 0);if(En(n.errors,"root"),pr(n.errors)){h.state.next({errors:{}});try{await $(ye,ie)}catch(ge){be=ge}}else Y&&await Y({...n.errors},ie),z(),setTimeout(z);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:pr(n.errors)&&!be,submitCount:n.submitCount+1,errors:n.errors}),be)throw be},Ae=($,Y={})=>{Oe(s,$)&&(xn(Y.defaultValue)?I($,Vn(Oe(i,$))):(I($,Y.defaultValue),Et(i,$,Vn(Y.defaultValue))),Y.keepTouched||En(n.touchedFields,$),Y.keepDirty||(En(n.dirtyFields,$),n.isDirty=Y.defaultValue?T($,Vn(Oe(i,$))):T()),Y.keepError||(En(n.errors,$),u.isValid&&j()),h.state.next({...n}))},Ke=($,Y={})=>{const ie=$?Vn($):i,be=Vn(ie),ye=pr($),ge=ye?i:be;if(Y.keepDefaultValues||(i=ie),!Y.keepValues){if(Y.keepDirtyValues){const Pe=new Set([...l.mount,...Object.keys(ju(i,a))]);for(const We of Array.from(Pe))Oe(n.dirtyFields,We)?Et(ge,We,Oe(a,We)):I(We,Oe(ge,We))}else{if(TN&&xn($))for(const Pe of l.mount){const We=Oe(s,Pe);if(We&&We._f){const _t=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(jg(_t)){const nn=_t.closest("form");if(nn){nn.reset();break}}}}for(const Pe of l.mount)I(Pe,Oe(ge,Pe))}a=Vn(ge),h.array.next({values:{...ge}}),h.state.next({values:{...ge}})}l={mount:Y.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:Y.keepSubmitCount?n.submitCount:0,isDirty:ye?!1:Y.keepDirty?n.isDirty:!!(Y.keepDefaultValues&&!Da($,i)),isSubmitted:Y.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ye?{}:Y.keepDirtyValues?Y.keepDefaultValues&&a?ju(i,a):n.dirtyFields:Y.keepDefaultValues&&$?ju(i,$):Y.keepDirty?n.dirtyFields:{},touchedFields:Y.keepTouched?n.touchedFields:{},errors:Y.keepErrors?n.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Fe=($,Y)=>Ke(zs($)?$(a):$,Y),ht=($,Y={})=>{const ie=Oe(s,$),be=ie&&ie._f;if(be){const ye=be.refs?be.refs[0]:be.ref;ye.focus&&(ye.focus(),Y.shouldSelect&&zs(ye.select)&&ye.select())}},nt=$=>{n={...n,...$}},Ot={control:{register:L,unregister:ce,getFieldState:te,handleSubmit:le,setError:J,_subscribe:de,_runSchema:E,_getWatch:M,_getDirty:T,_setValid:j,_setFieldArray:b,_setDisabledField:U,_setErrors:w,_getFieldArray:O,_reset:Ke,_resetDefaultValues:()=>zs(t.defaultValues)&&t.defaultValues().then($=>{Fe($,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:A,_disableForm:Ne,_subjects:h,_proxyFormState:u,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state($){o=$},get _defaultValues(){return i},get _names(){return l},set _names($){l=$},get _formState(){return n},get _options(){return t},set _options($){t={...t,...$}}},subscribe:ve,trigger:Q,register:L,handleSubmit:le,watch:me,setValue:I,getValues:D,reset:Fe,resetField:Ae,clearErrors:V,unregister:ce,setError:J,setFocus:ht,getFieldState:te};return{...Ot,formControl:Ot}}function _V(e={}){const t=q.useRef(void 0),n=q.useRef(void 0),[s,i]=q.useState({isDirty:!1,isValidating:!1,isLoading:zs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:zs(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:OV(e),formState:s},e.formControl&&e.defaultValues&&!zs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const a=t.current.control;return a._options=e,q.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),q.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),q.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==s.isDirty&&a._subjects.state.next({isDirty:o})}},[a,s.isDirty]),q.useEffect(()=>{e.values&&!Da(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),q.useEffect(()=>{e.errors&&!pr(e.errors)&&a._setErrors(e.errors)},[e.errors,a]),q.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),q.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=nR(s,a),t.current}const PC=(e,t,n)=>{if(e&&"reportValidity"in e){const s=Oe(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},uR=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?PC(s.ref,n,e):s.refs&&s.refs.forEach(i=>PC(i,n,e))}},IV=(e,t)=>{t.shouldUseNativeValidation&&uR(e,t);const n={};for(const s in e){const i=Oe(t.fields,s),a=Object.assign(e[s]||{},{ref:i&&i.ref});if(RV(t.names||Object.keys(e),s)){const o=Object.assign({},Oe(n,s));Et(o,"root",a),Et(n,s,o)}else Et(n,s,a)}return n},RV=(e,t)=>e.some(n=>n.startsWith(t+"."));var MV=function(e,t){for(var n={};e.length;){var s=e[0],i=s.code,a=s.message,o=s.path.join(".");if(!n[o])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return e.push(f)})}),t){var c=n[o].types,d=c&&c[s.code];n[o]=sR(o,t,n,i,d?[].concat(d,s.message):s.message)}e.shift()}return n},FV=function(e,t,n){return n===void 0&&(n={}),function(s,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return a.shouldUseNativeValidation&&uR({},a),{errors:{},values:n.raw?s:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:IV(MV(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Ct;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function s(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=s,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Ct||(Ct={}));var EC;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(EC||(EC={}));const Ue=Ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ra=e=>{switch(typeof e){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return Number.isNaN(e)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(e)?Ue.array:e===null?Ue.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ue.promise:typeof Map<"u"&&e instanceof Map?Ue.map:typeof Set<"u"&&e instanceof Set?Ue.set:typeof Date<"u"&&e instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Se=Ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ua extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},s={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)s._errors.push(n(o));else{let l=s,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),s}static assert(t){if(!(t instanceof ua))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},s=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(t(i))}else s.push(t(i));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}ua.create=e=>new ua(e);const jj=(e,t)=>{let n;switch(e.code){case Se.invalid_type:e.received===Ue.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Se.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Ct.jsonStringifyReplacer)}`;break;case Se.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ct.joinValues(e.keys,", ")}`;break;case Se.invalid_union:n="Invalid input";break;case Se.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ct.joinValues(e.options)}`;break;case Se.invalid_enum_value:n=`Invalid enum value. Expected ${Ct.joinValues(e.options)}, received '${e.received}'`;break;case Se.invalid_arguments:n="Invalid function arguments";break;case Se.invalid_return_type:n="Invalid function return type";break;case Se.invalid_date:n="Invalid date";break;case Se.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Ct.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Se.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Se.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Se.custom:n="Invalid input";break;case Se.invalid_intersection_types:n="Intersection results could not be merged";break;case Se.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Se.not_finite:n="Number must be finite";break;default:n=t.defaultError,Ct.assertNever(e)}return{message:n}};let $V=jj;function DV(){return $V}const LV=e=>{const{data:t,path:n,errorMaps:s,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}};function Re(e,t){const n=DV(),s=LV({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===jj?void 0:jj].filter(i=>!!i)});e.common.issues.push(s)}class Qr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const s=[];for(const i of n){if(i.status==="aborted")return rt;i.status==="dirty"&&t.dirty(),s.push(i.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,n){const s=[];for(const i of n){const a=await i.key,o=await i.value;s.push({key:a,value:o})}return Qr.mergeObjectSync(t,s)}static mergeObjectSync(t,n){const s={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return rt;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(s[a.value]=o.value)}return{status:t.value,value:s}}}const rt=Object.freeze({status:"aborted"}),Uu=e=>({status:"dirty",value:e}),bs=e=>({status:"valid",value:e}),TC=e=>e.status==="aborted",OC=e=>e.status==="dirty",od=e=>e.status==="valid",Sg=e=>typeof Promise<"u"&&e instanceof Promise;var Ve;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ve||(Ve={}));class vo{constructor(t,n,s,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=s,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _C=(e,t)=>{if(od(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ua(e.common.issues);return this._error=n,this._error}}};function mt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:i}=e;if(t&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??s??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:i}}class kt{get description(){return this._def.description}_getType(t){return Ra(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Ra(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Qr,ctx:{common:t.parent.common,data:t.data,parsedType:Ra(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Sg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const s=this.safeParse(t,n);if(s.success)return s.data;throw s.error}safeParse(t,n){const s={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ra(t)},i=this._parseSync({data:t,path:s.path,parent:s});return _C(s,i)}"~validate"(t){var s,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ra(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:n});return od(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(s=a==null?void 0:a.message)==null?void 0:s.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(a=>od(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(t,n){const s=await this.safeParseAsync(t,n);if(s.success)return s.data;throw s.error}async safeParseAsync(t,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ra(t)},i=this._parse({data:t,path:s.path,parent:s}),a=await(Sg(i)?i:Promise.resolve(i));return _C(s,a)}refine(t,n){const s=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:Se.custom,...s(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((s,i)=>t(s)?!0:(i.addIssue(typeof n=="function"?n(s,i):n),!1))}_refinement(t){return new cd({schema:this,typeName:st.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return lo.create(this,this._def)}nullable(){return dd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xi.create(this)}promise(){return Pg.create(this,this._def)}or(t){return Cg.create([this,t],this._def)}and(t){return Ag.create(this,t,this._def)}transform(t){return new cd({...mt(this._def),schema:this,typeName:st.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Nj({...mt(this._def),innerType:this,defaultValue:n,typeName:st.ZodDefault})}brand(){return new lW({typeName:st.ZodBranded,type:this,...mt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Sj({...mt(this._def),innerType:this,catchValue:n,typeName:st.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return RN.create(this,t)}readonly(){return kj.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const BV=/^c[^\s-]{8,}$/i,zV=/^[0-9a-z]+$/,qV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,UV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,VV=/^[a-z0-9_-]{21}$/i,WV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,HV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,KV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,GV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let lb;const YV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,QV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,JV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,XV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ZV=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eW=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,fR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tW=new RegExp(`^${fR}$`);function hR(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function nW(e){return new RegExp(`^${hR(e)}$`)}function rW(e){let t=`${fR}T${hR(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function sW(e,t){return!!((t==="v4"||!t)&&YV.test(e)||(t==="v6"||!t)&&JV.test(e))}function iW(e,t){if(!WV.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function aW(e,t){return!!((t==="v4"||!t)&&QV.test(e)||(t==="v6"||!t)&&XV.test(e))}class Ja extends kt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ue.string){const a=this._getOrReturnCtx(t);return Re(a,{code:Se.invalid_type,expected:Ue.string,received:a.parsedType}),rt}const s=new Qr;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?Re(i,{code:Se.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Re(i,{code:Se.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")KV.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"email",code:Se.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")lb||(lb=new RegExp(GV,"u")),lb.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"emoji",code:Se.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")UV.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"uuid",code:Se.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")VV.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"nanoid",code:Se.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")BV.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"cuid",code:Se.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")zV.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"cuid2",code:Se.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")qV.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"ulid",code:Se.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Re(i,{validation:"url",code:Se.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"regex",code:Se.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?rW(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?tW.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?nW(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?HV.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"duration",code:Se.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?sW(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"ip",code:Se.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?iW(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"jwt",code:Se.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?aW(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"cidr",code:Se.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?ZV.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"base64",code:Se.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?eW.test(t.data)||(i=this._getOrReturnCtx(t,i),Re(i,{validation:"base64url",code:Se.invalid_string,message:a.message}),s.dirty()):Ct.assertNever(a);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(i=>t.test(i),{validation:n,code:Se.invalid_string,...Ve.errToObj(s)})}_addCheck(t){return new Ja({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ve.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ve.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ve.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ve.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ve.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ve.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ve.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ve.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ve.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ve.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ve.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ve.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ve.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Ve.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ve.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ve.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Ve.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Ve.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Ve.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Ve.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Ve.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Ve.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Ve.errToObj(n)})}nonempty(t){return this.min(1,Ve.errToObj(t))}trim(){return new Ja({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ja({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ja({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ja.create=e=>new Ja({checks:[],typeName:st.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...mt(e)});function oW(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,i=n>s?n:s,a=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return a%o/10**i}class Wf extends kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ue.number){const a=this._getOrReturnCtx(t);return Re(a,{code:Se.invalid_type,expected:Ue.number,received:a.parsedType}),rt}let s;const i=new Qr;for(const a of this._def.checks)a.kind==="int"?Ct.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),Re(s,{code:Se.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Re(s,{code:Se.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Re(s,{code:Se.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?oW(t.data,a.value)!==0&&(s=this._getOrReturnCtx(t,s),Re(s,{code:Se.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),Re(s,{code:Se.not_finite,message:a.message}),i.dirty()):Ct.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Ve.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Ve.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Ve.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Ve.toString(n))}setLimit(t,n,s,i){return new Wf({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:Ve.toString(i)}]})}_addCheck(t){return new Wf({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ve.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ve.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ve.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ve.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ve.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Ve.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Ve.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ve.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ve.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ct.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Wf.create=e=>new Wf({checks:[],typeName:st.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...mt(e)});class Hf extends kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ue.bigint)return this._getInvalidInput(t);let s;const i=new Qr;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Re(s,{code:Se.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Re(s,{code:Se.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),Re(s,{code:Se.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Ct.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Re(n,{code:Se.invalid_type,expected:Ue.bigint,received:n.parsedType}),rt}gte(t,n){return this.setLimit("min",t,!0,Ve.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Ve.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Ve.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Ve.toString(n))}setLimit(t,n,s,i){return new Hf({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:Ve.toString(i)}]})}_addCheck(t){return new Hf({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ve.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ve.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ve.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ve.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Ve.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Hf.create=e=>new Hf({checks:[],typeName:st.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...mt(e)});class IC extends kt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ue.boolean){const s=this._getOrReturnCtx(t);return Re(s,{code:Se.invalid_type,expected:Ue.boolean,received:s.parsedType}),rt}return bs(t.data)}}IC.create=e=>new IC({typeName:st.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...mt(e)});class kg extends kt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ue.date){const a=this._getOrReturnCtx(t);return Re(a,{code:Se.invalid_type,expected:Ue.date,received:a.parsedType}),rt}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Re(a,{code:Se.invalid_date}),rt}const s=new Qr;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Re(i,{code:Se.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):Ct.assertNever(a);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new kg({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Ve.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Ve.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}kg.create=e=>new kg({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:st.ZodDate,...mt(e)});class RC extends kt{_parse(t){if(this._getType(t)!==Ue.symbol){const s=this._getOrReturnCtx(t);return Re(s,{code:Se.invalid_type,expected:Ue.symbol,received:s.parsedType}),rt}return bs(t.data)}}RC.create=e=>new RC({typeName:st.ZodSymbol,...mt(e)});class MC extends kt{_parse(t){if(this._getType(t)!==Ue.undefined){const s=this._getOrReturnCtx(t);return Re(s,{code:Se.invalid_type,expected:Ue.undefined,received:s.parsedType}),rt}return bs(t.data)}}MC.create=e=>new MC({typeName:st.ZodUndefined,...mt(e)});class FC extends kt{_parse(t){if(this._getType(t)!==Ue.null){const s=this._getOrReturnCtx(t);return Re(s,{code:Se.invalid_type,expected:Ue.null,received:s.parsedType}),rt}return bs(t.data)}}FC.create=e=>new FC({typeName:st.ZodNull,...mt(e)});class $C extends kt{constructor(){super(...arguments),this._any=!0}_parse(t){return bs(t.data)}}$C.create=e=>new $C({typeName:st.ZodAny,...mt(e)});class DC extends kt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return bs(t.data)}}DC.create=e=>new DC({typeName:st.ZodUnknown,...mt(e)});class yo extends kt{_parse(t){const n=this._getOrReturnCtx(t);return Re(n,{code:Se.invalid_type,expected:Ue.never,received:n.parsedType}),rt}}yo.create=e=>new yo({typeName:st.ZodNever,...mt(e)});class LC extends kt{_parse(t){if(this._getType(t)!==Ue.undefined){const s=this._getOrReturnCtx(t);return Re(s,{code:Se.invalid_type,expected:Ue.void,received:s.parsedType}),rt}return bs(t.data)}}LC.create=e=>new LC({typeName:st.ZodVoid,...mt(e)});class xi extends kt{_parse(t){const{ctx:n,status:s}=this._processInputParams(t),i=this._def;if(n.parsedType!==Ue.array)return Re(n,{code:Se.invalid_type,expected:Ue.array,received:n.parsedType}),rt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Re(n,{code:o?Se.too_big:Se.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Re(n,{code:Se.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Re(n,{code:Se.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new vo(n,o,n.path,l)))).then(o=>Qr.mergeArray(s,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new vo(n,o,n.path,l)));return Qr.mergeArray(s,a)}get element(){return this._def.type}min(t,n){return new xi({...this._def,minLength:{value:t,message:Ve.toString(n)}})}max(t,n){return new xi({...this._def,maxLength:{value:t,message:Ve.toString(n)}})}length(t,n){return new xi({...this._def,exactLength:{value:t,message:Ve.toString(n)}})}nonempty(t){return this.min(1,t)}}xi.create=(e,t)=>new xi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:st.ZodArray,...mt(t)});function nc(e){if(e instanceof un){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=lo.create(nc(s))}return new un({...e._def,shape:()=>t})}else return e instanceof xi?new xi({...e._def,type:nc(e.element)}):e instanceof lo?lo.create(nc(e.unwrap())):e instanceof dd?dd.create(nc(e.unwrap())):e instanceof jl?jl.create(e.items.map(t=>nc(t))):e}class un extends kt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Ct.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==Ue.object){const d=this._getOrReturnCtx(t);return Re(d,{code:Se.invalid_type,expected:Ue.object,received:d.parsedType}),rt}const{status:s,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof yo&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=a[d],f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new vo(i,f,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof yo){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(d==="strict")l.length>0&&(Re(i,{code:Se.unrecognized_keys,keys:l}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new vo(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const f=await u.key,h=await u.value;d.push({key:f,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>Qr.mergeObjectSync(s,d)):Qr.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return Ve.errToObj,new un({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,s)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,s).message)??s.defaultError;return n.code==="unrecognized_keys"?{message:Ve.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new un({...this._def,unknownKeys:"strip"})}passthrough(){return new un({...this._def,unknownKeys:"passthrough"})}extend(t){return new un({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new un({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:st.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new un({...this._def,catchall:t})}pick(t){const n={};for(const s of Ct.objectKeys(t))t[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new un({...this._def,shape:()=>n})}omit(t){const n={};for(const s of Ct.objectKeys(this.shape))t[s]||(n[s]=this.shape[s]);return new un({...this._def,shape:()=>n})}deepPartial(){return nc(this)}partial(t){const n={};for(const s of Ct.objectKeys(this.shape)){const i=this.shape[s];t&&!t[s]?n[s]=i:n[s]=i.optional()}return new un({...this._def,shape:()=>n})}required(t){const n={};for(const s of Ct.objectKeys(this.shape))if(t&&!t[s])n[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof lo;)a=a._def.innerType;n[s]=a}return new un({...this._def,shape:()=>n})}keyof(){return mR(Ct.objectKeys(this.shape))}}un.create=(e,t)=>new un({shape:()=>e,unknownKeys:"strip",catchall:yo.create(),typeName:st.ZodObject,...mt(t)});un.strictCreate=(e,t)=>new un({shape:()=>e,unknownKeys:"strict",catchall:yo.create(),typeName:st.ZodObject,...mt(t)});un.lazycreate=(e,t)=>new un({shape:e,unknownKeys:"strip",catchall:yo.create(),typeName:st.ZodObject,...mt(t)});class Cg extends kt{_parse(t){const{ctx:n}=this._processInputParams(t),s=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new ua(l.ctx.common.issues));return Re(n,{code:Se.invalid_union,unionErrors:o}),rt}if(n.common.async)return Promise.all(s.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of s){const d={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new ua(c));return Re(n,{code:Se.invalid_union,unionErrors:l}),rt}}get options(){return this._def.options}}Cg.create=(e,t)=>new Cg({options:e,typeName:st.ZodUnion,...mt(t)});function wj(e,t){const n=Ra(e),s=Ra(t);if(e===t)return{valid:!0,data:e};if(n===Ue.object&&s===Ue.object){const i=Ct.objectKeys(t),a=Ct.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const c=wj(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===Ue.array&&s===Ue.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],c=wj(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===Ue.date&&s===Ue.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ag extends kt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=(a,o)=>{if(TC(a)||TC(o))return rt;const l=wj(a.value,o.value);return l.valid?((OC(a)||OC(o))&&n.dirty(),{status:n.value,value:l.data}):(Re(s,{code:Se.invalid_intersection_types}),rt)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Ag.create=(e,t,n)=>new Ag({left:e,right:t,typeName:st.ZodIntersection,...mt(n)});class jl extends kt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==Ue.array)return Re(s,{code:Se.invalid_type,expected:Ue.array,received:s.parsedType}),rt;if(s.data.length<this._def.items.length)return Re(s,{code:Se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),rt;!this._def.rest&&s.data.length>this._def.items.length&&(Re(s,{code:Se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...s.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new vo(s,o,s.path,l)):null}).filter(o=>!!o);return s.common.async?Promise.all(a).then(o=>Qr.mergeArray(n,o)):Qr.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new jl({...this._def,rest:t})}}jl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new jl({items:e,typeName:st.ZodTuple,rest:null,...mt(t)})};class BC extends kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==Ue.map)return Re(s,{code:Se.invalid_type,expected:Ue.map,received:s.parsedType}),rt;const i=this._def.keyType,a=this._def.valueType,o=[...s.data.entries()].map(([l,c],d)=>({key:i._parse(new vo(s,l,s.path,[d,"key"])),value:a._parse(new vo(s,c,s.path,[d,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return rt;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),l.set(d.value,u.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return rt;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),l.set(d.value,u.value)}return{status:n.value,value:l}}}}BC.create=(e,t,n)=>new BC({valueType:t,keyType:e,typeName:st.ZodMap,...mt(n)});class Kf extends kt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==Ue.set)return Re(s,{code:Se.invalid_type,expected:Ue.set,received:s.parsedType}),rt;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(Re(s,{code:Se.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(Re(s,{code:Se.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return rt;u.status==="dirty"&&n.dirty(),d.add(u.value)}return{status:n.value,value:d}}const l=[...s.data.values()].map((c,d)=>a._parse(new vo(s,c,s.path,d)));return s.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,n){return new Kf({...this._def,minSize:{value:t,message:Ve.toString(n)}})}max(t,n){return new Kf({...this._def,maxSize:{value:t,message:Ve.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Kf.create=(e,t)=>new Kf({valueType:e,minSize:null,maxSize:null,typeName:st.ZodSet,...mt(t)});class zC extends kt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}zC.create=(e,t)=>new zC({getter:e,typeName:st.ZodLazy,...mt(t)});class qC extends kt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Re(n,{received:n.data,code:Se.invalid_literal,expected:this._def.value}),rt}return{status:"valid",value:t.data}}get value(){return this._def.value}}qC.create=(e,t)=>new qC({value:e,typeName:st.ZodLiteral,...mt(t)});function mR(e,t){return new ld({values:e,typeName:st.ZodEnum,...mt(t)})}class ld extends kt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),s=this._def.values;return Re(n,{expected:Ct.joinValues(s),received:n.parsedType,code:Se.invalid_type}),rt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),s=this._def.values;return Re(n,{received:n.data,code:Se.invalid_enum_value,options:s}),rt}return bs(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ld.create(t,{...this._def,...n})}exclude(t,n=this._def){return ld.create(this.options.filter(s=>!t.includes(s)),{...this._def,...n})}}ld.create=mR;class UC extends kt{_parse(t){const n=Ct.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==Ue.string&&s.parsedType!==Ue.number){const i=Ct.objectValues(n);return Re(s,{expected:Ct.joinValues(i),received:s.parsedType,code:Se.invalid_type}),rt}if(this._cache||(this._cache=new Set(Ct.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Ct.objectValues(n);return Re(s,{received:s.data,code:Se.invalid_enum_value,options:i}),rt}return bs(t.data)}get enum(){return this._def.values}}UC.create=(e,t)=>new UC({values:e,typeName:st.ZodNativeEnum,...mt(t)});class Pg extends kt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Ue.promise&&n.common.async===!1)return Re(n,{code:Se.invalid_type,expected:Ue.promise,received:n.parsedType}),rt;const s=n.parsedType===Ue.promise?n.data:Promise.resolve(n.data);return bs(s.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Pg.create=(e,t)=>new Pg({type:e,typeName:st.ZodPromise,...mt(t)});class cd extends kt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===st.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Re(s,o),o.fatal?n.abort():n.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(s.data,a);if(s.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return rt;const c=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return c.status==="aborted"?rt:c.status==="dirty"||n.value==="dirty"?Uu(c.value):c});{if(n.value==="aborted")return rt;const l=this._def.schema._parseSync({data:o,path:s.path,parent:s});return l.status==="aborted"?rt:l.status==="dirty"||n.value==="dirty"?Uu(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?rt:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?rt:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!od(o))return rt;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>od(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):rt);Ct.assertNever(i)}}cd.create=(e,t,n)=>new cd({schema:e,typeName:st.ZodEffects,effect:t,...mt(n)});cd.createWithPreprocess=(e,t,n)=>new cd({schema:t,effect:{type:"preprocess",transform:e},typeName:st.ZodEffects,...mt(n)});class lo extends kt{_parse(t){return this._getType(t)===Ue.undefined?bs(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}lo.create=(e,t)=>new lo({innerType:e,typeName:st.ZodOptional,...mt(t)});class dd extends kt{_parse(t){return this._getType(t)===Ue.null?bs(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}dd.create=(e,t)=>new dd({innerType:e,typeName:st.ZodNullable,...mt(t)});class Nj extends kt{_parse(t){const{ctx:n}=this._processInputParams(t);let s=n.data;return n.parsedType===Ue.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Nj.create=(e,t)=>new Nj({innerType:e,typeName:st.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...mt(t)});class Sj extends kt{_parse(t){const{ctx:n}=this._processInputParams(t),s={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Sg(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ua(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ua(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Sj.create=(e,t)=>new Sj({innerType:e,typeName:st.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...mt(t)});class VC extends kt{_parse(t){if(this._getType(t)!==Ue.nan){const s=this._getOrReturnCtx(t);return Re(s,{code:Se.invalid_type,expected:Ue.nan,received:s.parsedType}),rt}return{status:"valid",value:t.data}}}VC.create=e=>new VC({typeName:st.ZodNaN,...mt(e)});class lW extends kt{_parse(t){const{ctx:n}=this._processInputParams(t),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class RN extends kt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?rt:a.status==="dirty"?(n.dirty(),Uu(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?rt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(t,n){return new RN({in:t,out:n,typeName:st.ZodPipeline})}}class kj extends kt{_parse(t){const n=this._def.innerType._parse(t),s=i=>(od(i)&&(i.value=Object.freeze(i.value)),i);return Sg(n)?n.then(i=>s(i)):s(n)}unwrap(){return this._def.innerType}}kj.create=(e,t)=>new kj({innerType:e,typeName:st.ZodReadonly,...mt(t)});un.lazycreate;var st;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(st||(st={}));const cb=Ja.create;yo.create;xi.create;const cW=un.create;un.strictCreate;Cg.create;Ag.create;jl.create;ld.create;Pg.create;lo.create;dd.create;const je=x.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:Ce("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));je.displayName="Input";const G=x.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ce("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));G.displayName="Card";const re=x.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ce("flex flex-col space-y-1.5 p-6",e),...t}));re.displayName="CardHeader";const se=x.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ce("text-2xl font-semibold leading-none tracking-tight",e),...t}));se.displayName="CardTitle";const ze=x.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ce("text-sm text-muted-foreground",e),...t}));ze.displayName="CardDescription";const ee=x.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ce("p-6 pt-0",e),...t}));ee.displayName="CardContent";const dW=x.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ce("flex items-center p-6 pt-0",e),...t}));dW.displayName="CardFooter";var uW="Label",pR=x.forwardRef((e,t)=>r.jsx(He.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));pR.displayName=uW;var gR=pR;const fW=Ud("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),fe=x.forwardRef(({className:e,...t},n)=>r.jsx(gR,{ref:n,className:Ce(fW(),e),...t}));fe.displayName=gR.displayName;const hW=mV,xR=x.createContext({}),db=({...e})=>r.jsx(xR.Provider,{value:{name:e.name},children:r.jsx(vV,{...e})}),kv=()=>{const e=x.useContext(xR),t=x.useContext(vR),{getFieldState:n,formState:s}=Sv(),i=n(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},vR=x.createContext({}),Tp=x.forwardRef(({className:e,...t},n)=>{const s=x.useId();return r.jsx(vR.Provider,{value:{id:s},children:r.jsx("div",{ref:n,className:Ce("space-y-2",e),...t})})});Tp.displayName="FormItem";const Op=x.forwardRef(({className:e,...t},n)=>{const{error:s,formItemId:i}=kv();return r.jsx(fe,{ref:n,className:Ce(s&&"text-destructive",e),htmlFor:i,...t})});Op.displayName="FormLabel";const _p=x.forwardRef(({...e},t)=>{const{error:n,formItemId:s,formDescriptionId:i,formMessageId:a}=kv();return r.jsx(sv,{ref:t,id:s,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...e})});_p.displayName="FormControl";const mW=x.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:s}=kv();return r.jsx("p",{ref:n,id:s,className:Ce("text-sm text-muted-foreground",e),...t})});mW.displayName="FormDescription";const Ip=x.forwardRef(({className:e,children:t,...n},s)=>{const{error:i,formMessageId:a}=kv(),o=i?String((i==null?void 0:i.message)??""):t;return o?r.jsx("p",{ref:s,id:a,className:Ce("text-sm font-medium text-destructive",e),...n,children:o}):null});Ip.displayName="FormMessage";const pW=cW({name:cb().optional(),email:cb().email("Please enter a valid email"),password:cb().min(8,"Password must be at least 8 characters")});function gW(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState(!1),i=_V({resolver:FV(pW),defaultValues:{name:"",email:"",password:""}}),a=async o=>{s(!0);try{const l=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!l.ok){const d=await l.json();throw new Error(d.error||"Signup failed")}const c=await l.json();localStorage.setItem("sessionToken",c.sessionToken),localStorage.setItem("user",JSON.stringify(c.user)),t({title:"Welcome to BJJ OS!",description:"Your account has been created successfully."}),e("/onboarding")}catch(l){console.error("Signup error:",l),t({title:"Signup Failed",description:l.message||"Something went wrong. Please try again.",variant:"destructive"}),s(!1)}};return r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center py-12 px-6",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx(sn,{href:"/",children:r.jsxs(Z,{variant:"ghost",className:"mb-6","data-testid":"button-back-home",children:[r.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),r.jsxs(G,{children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#667eea] to-[#764ba2] flex items-center justify-center",children:r.jsx(ll,{className:"w-8 h-8 text-white"})})}),r.jsx(se,{className:"text-2xl",children:"Start Your BJJ Journey"}),r.jsx(ze,{children:"Create your account to chat with Prof. OS"})]}),r.jsx(ee,{children:r.jsx(hW,{...i,children:r.jsxs("form",{onSubmit:i.handleSubmit(a),className:"space-y-4",children:[r.jsx(db,{control:i.control,name:"name",render:({field:o})=>r.jsxs(Tp,{children:[r.jsx(Op,{children:"Name (optional)"}),r.jsx(_p,{children:r.jsx(je,{placeholder:"Your name",...o,"data-testid":"input-name"})}),r.jsx(Ip,{})]})}),r.jsx(db,{control:i.control,name:"email",render:({field:o})=>r.jsxs(Tp,{children:[r.jsx(Op,{children:"Email"}),r.jsx(_p,{children:r.jsx(je,{type:"email",placeholder:"your@email.com",...o,"data-testid":"input-email"})}),r.jsx(Ip,{})]})}),r.jsx(db,{control:i.control,name:"password",render:({field:o})=>r.jsxs(Tp,{children:[r.jsx(Op,{children:"Password"}),r.jsx(_p,{children:r.jsx(je,{type:"password",placeholder:"Min 8 characters",...o,"data-testid":"input-password"})}),r.jsx(Ip,{})]})}),r.jsx(Z,{type:"submit",className:"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2]",disabled:n,"data-testid":"button-signup",children:n?"Creating Account...":"Start Free"}),r.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["By signing up, you agree to our"," ",r.jsx(sn,{href:"/terms",children:r.jsx("a",{className:"text-primary hover:underline",children:"Terms of Service"})})," ","and"," ",r.jsx(sn,{href:"/privacy",children:r.jsx("a",{className:"text-primary hover:underline",children:"Privacy Policy"})})]}),r.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Already have an account?"," ",r.jsx(sn,{href:"/login",children:r.jsx("a",{className:"text-primary hover:underline font-medium","data-testid":"link-login",children:"Log in"})})]})]})})})]})]})})}const xW={small:{width:125,height:20},medium:{width:250,height:40},large:{width:400,height:64},hero:{width:500,height:80}},WC={white:{mainColor:"#FFFFFF",stripeColor:"#FFFFFF",stripeSectionColor:"#000000",showStripes:!0,needsBorder:!0},blue:{mainColor:"#2563EB",stripeColor:"#FFFFFF",stripeSectionColor:"#000000",showStripes:!0,needsBorder:!1},purple:{mainColor:"#7C3AED",stripeColor:"#FFFFFF",stripeSectionColor:"#000000",showStripes:!0,needsBorder:!1},brown:{mainColor:"#92400E",stripeColor:"#FFFFFF",stripeSectionColor:"#000000",showStripes:!0,needsBorder:!1},black:{mainColor:"#000000",stripeColor:"#FFFFFF",stripeSectionColor:"#DC2626",showStripes:!0,needsBorder:!0}},Vl=[458,468,479,489];function Gd({rank:e="blue",size:t="medium",className:n="",animated:s=!1}){const i=xW[t],[a,o]=x.useState(s?"white":e);if(x.useEffect(()=>{if(!s)return;const c=["white","blue","purple","brown","black"];let d=0;o("white");const u=setInterval(()=>{d=(d+1)%c.length,o(c[d])},2e3);return()=>clearInterval(u)},[s]),!s){const c=WC[e];return r.jsxs("svg",{width:i.width,height:i.height,viewBox:"0 0 500 80",xmlns:"http://www.w3.org/2000/svg",className:n,"data-testid":`belt-icon-${e}`,style:{filter:"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.4))"},children:[e==="white"&&r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"1",y:"1",width:"448",height:"78",fill:c.mainColor,stroke:"#333333",strokeWidth:"2"}),r.jsx("rect",{x:"450",y:"1",width:"49",height:"78",fill:c.stripeSectionColor,stroke:"#333333",strokeWidth:"2"}),Vl.map((d,u)=>r.jsx("rect",{x:d,y:"0",width:"3",height:"80",fill:c.stripeColor},u))]}),e==="black"&&r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"1",y:"1",width:"448",height:"78",fill:c.mainColor,stroke:"#FFFFFF",strokeWidth:"2"}),r.jsx("rect",{x:"450",y:"0",width:"50",height:"80",fill:c.stripeSectionColor}),Vl.map((d,u)=>r.jsx("rect",{x:d,y:"0",width:"3",height:"80",fill:c.stripeColor},u))]}),e!=="white"&&e!=="black"&&r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"0",y:"0",width:"450",height:"80",fill:c.mainColor}),r.jsx("rect",{x:"450",y:"0",width:"50",height:"80",fill:c.stripeSectionColor}),c.showStripes&&Vl.map((d,u)=>r.jsx("rect",{x:d,y:"0",width:"3",height:"80",fill:c.stripeColor},u))]})]})}const l=["white","blue","purple","brown","black"];return r.jsx("svg",{width:i.width,height:i.height,viewBox:"0 0 500 80",xmlns:"http://www.w3.org/2000/svg",className:n,"data-testid":`belt-icon-${a}`,style:{filter:"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.4))"},children:l.map(c=>{const d=WC[c],u=c===a;return r.jsxs("g",{style:{opacity:u?1:0,transition:"opacity 0.5s ease-in-out"},children:[c==="white"&&r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"1",y:"1",width:"448",height:"78",fill:d.mainColor,stroke:"#333333",strokeWidth:"2"}),r.jsx("rect",{x:"450",y:"1",width:"49",height:"78",fill:d.stripeSectionColor,stroke:"#333333",strokeWidth:"2"}),Vl.map((f,h)=>r.jsx("rect",{x:f,y:"0",width:"3",height:"80",fill:d.stripeColor},h))]}),c==="black"&&r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"1",y:"1",width:"448",height:"78",fill:d.mainColor,stroke:"#FFFFFF",strokeWidth:"2"}),r.jsx("rect",{x:"450",y:"0",width:"50",height:"80",fill:d.stripeSectionColor}),Vl.map((f,h)=>r.jsx("rect",{x:f,y:"0",width:"3",height:"80",fill:d.stripeColor},h))]}),c!=="white"&&c!=="black"&&r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"0",y:"0",width:"450",height:"80",fill:d.mainColor}),r.jsx("rect",{x:"450",y:"0",width:"50",height:"80",fill:d.stripeSectionColor}),d.showStripes&&Vl.map((f,h)=>r.jsx("rect",{x:f,y:"0",width:"3",height:"80",fill:d.stripeColor},h))]})]},c)})})}function vW(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState("email"),[i,a]=x.useState(""),[o,l]=x.useState(""),[c,d]=x.useState(""),[u,f]=x.useState(!1),[h,p]=x.useState(!1),[v,g]=x.useState(!0),y=async m=>{if(m.preventDefault(),d(""),!i||!i.includes("@")){d("Please enter a valid email address");return}f(!0);try{const b=await fetch("/api/auth/email/request-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})}),N=await b.json();if(!b.ok){d(N.error||"Failed to send verification code");return}N.isAdmin?(p(!0),t({title:"Admin Account",description:"Please use your admin bypass code"})):t({title:"Code Sent!",description:"Check your email for the verification code"}),s("code")}catch(b){d(b.message||"Something went wrong. Please try again."),t({title:"Error",description:b.message||"Failed to send code",variant:"destructive"})}finally{f(!1)}},j=async m=>{var b;if(m.preventDefault(),d(""),!o||o.length!==6){d("Please enter the 6-digit code");return}f(!0);try{const N=await fetch("/api/auth/email/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,code:o,rememberMe:v})}),w=await N.json();if(!N.ok){d(w.error||"Invalid verification code");return}await li(w.token),await ci(w.user);const S=((b=w.user.id)==null?void 0:b.toString())||"1";localStorage.setItem("mobileUserId",S),zt()&&await _n.set({key:"mobileUserId",value:S}),t({title:w.isNewUser?"Welcome!":"Welcome Back!",description:w.isNewUser?"Your account has been created":"Successfully logged in"}),w.redirect?e(w.redirect):w.user.onboardingCompleted?e(zt()?"/chat":"/app/chat"):e("/mobile-onboarding")}catch(N){d(N.message||"Something went wrong. Please try again."),t({title:"Verification Failed",description:N.message||"Invalid code",variant:"destructive"})}finally{f(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-purple-950/20 to-black flex items-center justify-center p-6",children:r.jsxs("div",{className:"w-full max-w-md",children:[!zt()&&r.jsxs(Z,{variant:"outline",onClick:()=>n==="code"?s("email"):e("/"),className:"mb-8 bg-white/5 border-white/10 hover:bg-white/10","data-testid":"button-back",children:[r.jsx(Gn,{className:"w-4 h-4 mr-2"}),n==="code"?"Back":"Back to Home"]}),zt()&&n==="code"&&r.jsxs(Z,{variant:"outline",onClick:()=>s("email"),className:"mb-8 bg-white/5 border-white/10 hover:bg-white/10","data-testid":"button-back",children:[r.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:r.jsx(Gd,{className:"w-16 h-16"})}),r.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:n==="email"?"Sign In":"Enter Code"}),r.jsx("p",{className:"text-gray-400",children:n==="email"?"Enter your email to get started":h?"Use your admin bypass code":"We sent a 6-digit code to your email"})]}),n==="email"&&r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"email",className:"text-white",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(gs,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx(je,{id:"email",type:"text",inputMode:"email",placeholder:"you@example.com",value:i,onChange:m=>a(m.target.value),disabled:u,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-email",autoFocus:!0})]})]}),c&&r.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:c}),r.jsx(Z,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:u||!i,"data-testid":"button-continue",children:u?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending Code..."]}):"Continue"})]}),n==="code"&&r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"code",className:"text-white",children:h?"Admin Bypass Code":"Verification Code"}),r.jsx(je,{id:"code",type:"text",placeholder:"000000",value:o,onChange:m=>l(m.target.value.replace(/\D/g,"").slice(0,6)),disabled:u,className:"text-center text-2xl tracking-widest bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-code",autoFocus:!0,maxLength:6})]}),c&&r.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:c}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"rememberMe",checked:v,onChange:m=>g(m.target.checked),className:"w-4 h-4 accent-purple-600 cursor-pointer","data-testid":"checkbox-remember-me"}),r.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-gray-400 cursor-pointer",children:"Keep me signed in for 30 days"})]}),r.jsx(Z,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:u||o.length!==6,"data-testid":"button-verify",children:u?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify & Continue"}),r.jsx("div",{className:"text-center",children:r.jsx("button",{type:"button",onClick:()=>{s("email"),l(""),d("")},className:"text-sm text-gray-400 hover:text-white transition-colors","data-testid":"button-resend",children:"Didn't receive it? Try again"})})]})]}),r.jsxs("div",{className:"mt-6 text-center text-sm text-gray-400 space-y-2",children:[r.jsx("div",{children:r.jsx(sn,{href:"/forgot-password",className:"hover:text-white transition-colors","data-testid":"link-forgot-password",children:"Forgot your password?"})}),r.jsx("div",{children:r.jsx(sn,{href:"/login",className:"hover:text-white transition-colors","data-testid":"link-phone-login",children:"Use phone number instead"})})]})]})})}function yW(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState("email"),[i,a]=x.useState(""),[o,l]=x.useState(""),[c,d]=x.useState(""),[u,f]=x.useState(""),[h,p]=x.useState(!1),[v,g]=x.useState(""),[y,j]=x.useState(!1),m=async w=>{if(w.preventDefault(),g(""),!i||!i.includes("@")){g("Please enter a valid email address");return}j(!0);try{const S=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})}),k=await S.json();if(!S.ok){g(k.error||"Failed to send reset code");return}t({title:"Reset Code Sent",description:"Check your email for the password reset code"}),s("code")}catch(S){g(S.message||"Something went wrong. Please try again.")}finally{j(!1)}},b=async w=>{if(w.preventDefault(),g(""),!o||o.length!==6){g("Please enter the 6-digit code");return}j(!0);try{const S=await fetch("/api/auth/verify-reset-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,code:o})}),k=await S.json();if(!S.ok){g(k.error||"Invalid code");return}s("newPassword")}catch(S){g(S.message||"Something went wrong. Please try again.")}finally{j(!1)}},N=async w=>{if(w.preventDefault(),g(""),c.length<8){g("Password must be at least 8 characters");return}if(c!==u){g("Passwords don't match");return}j(!0);try{const S=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,code:o,newPassword:c})}),k=await S.json();if(!S.ok){g(k.error||"Failed to reset password");return}t({title:"Password Reset",description:"Your password has been reset. You can now log in."}),e("/email-login")}catch(S){g(S.message||"Something went wrong. Please try again.")}finally{j(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-purple-950/20 to-black flex items-center justify-center p-6",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs(Z,{variant:"outline",onClick:()=>{n==="code"?s("email"):n==="newPassword"?s("code"):e("/email-login")},className:"mb-8 bg-white/5 border-white/10 hover:bg-white/10","data-testid":"button-back",children:[r.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:r.jsx(Gd,{className:"w-16 h-16"})}),r.jsxs("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:[n==="email"&&"Reset Password",n==="code"&&"Enter Code",n==="newPassword"&&"New Password"]}),r.jsxs("p",{className:"text-gray-400",children:[n==="email"&&"Enter your email to receive a reset code",n==="code"&&"We sent a 6-digit code to your email",n==="newPassword"&&"Enter your new password"]})]}),n==="email"&&r.jsxs("form",{onSubmit:m,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"email",className:"text-white",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(gs,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx(je,{id:"email",type:"email",placeholder:"you@example.com",value:i,onChange:w=>a(w.target.value),disabled:y,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-email",autoFocus:!0})]})]}),v&&r.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:v}),r.jsx(Z,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:y||!i,"data-testid":"button-continue",children:y?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending Code..."]}):"Send Reset Code"})]}),n==="code"&&r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"code",className:"text-white",children:"Reset Code"}),r.jsx(je,{id:"code",type:"text",placeholder:"000000",value:o,onChange:w=>l(w.target.value.replace(/\D/g,"").slice(0,6)),disabled:y,className:"text-center text-2xl tracking-widest bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-code",autoFocus:!0,maxLength:6})]}),v&&r.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:v}),r.jsx(Z,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:y||o.length!==6,"data-testid":"button-verify",children:y?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify Code"})]}),n==="newPassword"&&r.jsxs("form",{onSubmit:N,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"newPassword",className:"text-white",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(pi,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx(je,{id:"newPassword",type:h?"text":"password",placeholder:"Min 8 characters",value:c,onChange:w=>d(w.target.value),disabled:y,className:"pl-10 pr-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-new-password",autoFocus:!0}),r.jsx(Z,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full text-gray-400 hover:text-white",onClick:()=>p(!h),"data-testid":"button-toggle-password",children:h?r.jsx(Yi,{className:"w-4 h-4"}):r.jsx(Bn,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"confirmPassword",className:"text-white",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(pi,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx(je,{id:"confirmPassword",type:h?"text":"password",placeholder:"Confirm password",value:u,onChange:w=>f(w.target.value),disabled:y,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500","data-testid":"input-confirm-password"})]})]}),v&&r.jsx("p",{className:"text-sm text-red-400","data-testid":"text-error",children:v}),r.jsx(Z,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:y||!c||!u,"data-testid":"button-reset",children:y?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Resetting..."]}):"Reset Password"})]})]}),r.jsx("div",{className:"mt-6 text-center text-sm text-gray-400",children:r.jsx(sn,{href:"/email-login",className:"hover:text-white transition-colors","data-testid":"link-login",children:"Back to login"})})]})})}var of;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})(of||(of={}));var lf;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(lf||(lf={}));const Ii=ko("Haptics",{web:()=>or(()=>import("./web-ApGH-t9S.js"),[]).then(e=>new e.HapticsWeb)});async function oe(e="light"){if(tn.isNativePlatform())try{switch(e){case"light":await Ii.impact({style:of.Light});break;case"medium":await Ii.impact({style:of.Medium});break;case"heavy":await Ii.impact({style:of.Heavy});break;case"success":await Ii.notification({type:lf.Success});break;case"warning":await Ii.notification({type:lf.Warning});break;case"error":await Ii.notification({type:lf.Error});break;case"selection":await Ii.selectionStart(),await Ii.selectionChanged(),await Ii.selectionEnd();break}}catch(t){console.warn("Haptics not available:",t)}}const yR=tn.getPlatform(),bW=yR==="android",jW=yR==="ios";function wW(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState("login"),[i,a]=x.useState(""),[o,l]=x.useState(""),[c,d]=x.useState(""),[u,f]=x.useState(!1),[h,p]=x.useState(""),[v,g]=x.useState(!1),[y,j]=x.useState(!1),[m,b]=x.useState(!1),[N,w]=x.useState(!1),S=async()=>{var A,T,M,O,C,R;p(""),oe("light"),j(!0);try{const{SignInWithApple:I}=await or(async()=>{const{SignInWithApple:D}=await import("./index-BwMKelJl.js");return{SignInWithApple:D}},[]),B=await I.authorize({clientId:"app.bjjos.ios",redirectURI:"https://bjjos.app/auth/apple/callback",scopes:"email name",state:"bjjos-auth",nonce:Math.random().toString(36).substring(7)});console.log("[APPLE SIGN IN] Response:",B.response);const H=await fetch(Zt("/api/auth/ios/prepare"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authType:"apple",appleIdentityToken:B.response.identityToken,appleUserId:B.response.user,email:B.response.email,displayName:B.response.givenName||B.response.familyName?`${B.response.givenName||""} ${B.response.familyName||""}`.trim():null})}),Q=await H.json();if(!H.ok)throw new Error(Q.error||"Apple sign in failed");if(Q.existingUser){oe("success"),Q.token&&await li(Q.token),Q.user&&(await ci(Q.user),localStorage.setItem("mobileUserId",((A=Q.user.id)==null?void 0:A.toString())||"1"),await _n.set({key:"mobileUserId",value:((T=Q.user.id)==null?void 0:T.toString())||"1"}),window.dispatchEvent(new Event("bjjos-auth-change"))),t({title:"Welcome back!",description:"You're now signed in"}),(M=Q.user)!=null&&M.onboardingCompleted?e("/ios-chat"):e("/ios-onboarding");return}if(Q.requiresPayment){console.log("[APPLE SIGN IN] New user - triggering Apple IAP payment...");try{const{ApplePurchaseService:D}=await or(async()=>{const{ApplePurchaseService:me}=await Promise.resolve().then(()=>pf);return{ApplePurchaseService:me}},void 0);await D.initialize();const te=await new Promise(me=>{D.purchase(de=>{me({success:de.success,receipt:de.receiptData,transactionId:de.transactionId,error:de.error})})});if(!te.success||!te.receipt){j(!1),p(te.error||"Payment was not completed. Please try again."),oe("error");return}console.log("[APPLE SIGN IN] Payment successful, completing account creation...");const V=await fetch(Zt("/api/auth/ios/complete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prepToken:Q.prepToken,receipt:te.receipt,transactionId:te.transactionId,productId:"bjjos_monthly"})}),J=await V.json();if(!V.ok){j(!1),p(J.error||"Account creation failed. Please contact support."),oe("error");return}oe("success"),J.token&&await li(J.token),J.user&&(await ci(J.user),localStorage.setItem("mobileUserId",((O=J.user.id)==null?void 0:O.toString())||"1"),await _n.set({key:"mobileUserId",value:((C=J.user.id)==null?void 0:C.toString())||"1"}),window.dispatchEvent(new Event("bjjos-auth-change"))),t({title:"Welcome to Prof. OS!",description:"Your subscription is now active"}),e("/ios-onboarding")}catch(D){console.error("[APPLE SIGN IN] Purchase error:",D),j(!1),(R=D.message)!=null&&R.includes("cancel")?p("Payment was cancelled. No account was created."):p("Payment failed. Please try again."),oe("error");return}}}catch(I){console.error("[APPLE SIGN IN] Error:",I);const B=I.message||"";if(B.includes("canceled")||B.includes("cancelled")||B.includes("error 1000")||B.includes("AuthorizationError error 1000")){j(!1);return}p("Apple sign in failed. Please try again."),oe("error")}finally{j(!1)}},k=async()=>{var A,T,M;p(""),oe("light"),b(!0);try{const{GoogleAuthService:O}=await or(async()=>{const{GoogleAuthService:B}=await import("./googleAuth-CGB4EDGQ.js");return{GoogleAuthService:B}},[]),C=await O.signIn();console.log("[GOOGLE SIGN IN] Response:",C);const R=await fetch(Zt("/api/auth/google"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:C.email,name:C.name,googleId:C.id,idToken:C.authentication.idToken})}),I=await R.json();if(!R.ok)throw new Error(I.error||"Google sign in failed");oe("success"),I.token&&await li(I.token),I.user&&(await ci(I.user),localStorage.setItem("mobileUserId",((A=I.user.id)==null?void 0:A.toString())||"1"),await _n.set({key:"mobileUserId",value:((T=I.user.id)==null?void 0:T.toString())||"1"}),window.dispatchEvent(new Event("bjjos-auth-change"))),t({title:I.isNewUser?"Welcome to Prof. OS!":"Welcome back!",description:I.isNewUser?"Your account has been created":"You're now signed in"}),(M=I.user)!=null&&M.onboardingCompleted?e("/ios-chat"):e("/ios-onboarding")}catch(O){console.error("[GOOGLE SIGN IN] Error:",O);const C=O.message||"";if(C.includes("canceled")||C.includes("cancelled")||C.includes("popup_closed")||C.includes("12501")){b(!1);return}p("Google sign in failed. Please try again."),oe("error")}finally{b(!1)}},P=async A=>{var T,M,O;if(A.preventDefault(),p(""),oe("light"),!i||!i.includes("@")){p("Please enter a valid email address"),oe("error");return}if(!o||o.length<1){p("Please enter your password"),oe("error");return}g(!0);try{const C=await fetch(Zt("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:i,password:o})}),R=await C.json();if(!C.ok){if(g(!1),R.error==="NO_PASSWORD_SET"){w(!0),oe("warning");return}const B=(R.error||"").toLowerCase();let H="Something went wrong. Please try again.";B.includes("invalid")||B.includes("credentials")||B.includes("password")||B.includes("not found")||B.includes("incorrect")||B.includes("wrong")?H="Incorrect email or password":B.includes("network")||B.includes("fetch")?H="Connection error. Please try again.":B.includes("timeout")?H="Connection timed out. Please try again.":(B.includes("too many")||B.includes("rate limit"))&&(H="Too many attempts. Please try again later."),p(H),oe("error");return}oe("success");const I=R.token||R.sessionToken;I&&await li(I),R.user&&(await ci(R.user),localStorage.setItem("mobileUserId",((T=R.user.id)==null?void 0:T.toString())||"1"),await _n.set({key:"mobileUserId",value:((M=R.user.id)==null?void 0:M.toString())||"1"}),window.dispatchEvent(new Event("bjjos-auth-change"))),t({title:"Welcome back!",description:"You're now signed in"}),(O=R.user)!=null&&O.onboardingCompleted?e("/ios-chat"):e("/ios-onboarding")}catch(C){let R="Something went wrong. Please try again.";const I=(C.message||"").toLowerCase();I.includes("network")||I.includes("fetch")||I.includes("failed to fetch")?R="Connection error. Please try again.":(I.includes("timeout")||I.includes("timed out"))&&(R="Connection timed out. Please try again."),p(R),oe("error")}finally{g(!1)}},E=async A=>{var T,M,O;if(A.preventDefault(),p(""),oe("light"),!i||!i.includes("@")){p("Please enter a valid email address"),oe("error");return}if(!o||o.length<6){p("Password must be at least 6 characters"),oe("error");return}if(o!==c){p("Passwords don't match"),oe("error");return}g(!0);try{const C=await fetch(Zt("/api/auth/ios/prepare"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:o,authType:"email"})}),R=await C.json();if(!C.ok){g(!1);const I=(R.error||"").toLowerCase();let B=R.error||"Something went wrong. Please try again.";(I.includes("already exists")||I.includes("duplicate"))&&(B="An account with this email already exists. Please sign in."),p(B),oe("error");return}if(R.requiresPayment){console.log("[REGISTER] Triggering Apple IAP payment...");try{const{ApplePurchaseService:I}=await or(async()=>{const{ApplePurchaseService:D}=await Promise.resolve().then(()=>pf);return{ApplePurchaseService:D}},void 0);await I.initialize();const B=await new Promise(D=>{I.purchase(te=>{D({success:te.success,receipt:te.receiptData,transactionId:te.transactionId,error:te.error})})});if(!B.success||!B.receipt){g(!1),p(B.error||"Payment was not completed. Please try again."),oe("error");return}console.log("[REGISTER] Payment successful, completing account creation...");const H=await fetch(Zt("/api/auth/ios/complete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prepToken:R.prepToken,receipt:B.receipt,transactionId:B.transactionId,productId:"bjjos_monthly"})}),Q=await H.json();if(!H.ok){g(!1),p(Q.error||"Account creation failed. Please contact support."),oe("error");return}oe("success"),Q.token&&await li(Q.token),Q.user&&(await ci(Q.user),localStorage.setItem("mobileUserId",((T=Q.user.id)==null?void 0:T.toString())||"1"),await _n.set({key:"mobileUserId",value:((M=Q.user.id)==null?void 0:M.toString())||"1"}),window.dispatchEvent(new Event("bjjos-auth-change"))),t({title:"Welcome to Prof. OS!",description:"Your subscription is now active"}),e("/ios-onboarding")}catch(I){console.error("[REGISTER] Purchase error:",I),g(!1),(O=I.message)!=null&&O.includes("cancel")?p("Payment was cancelled. No account was created."):p("Payment failed. Please try again."),oe("error");return}}}catch(C){let R="Something went wrong. Please try again.";const I=(C.message||"").toLowerCase();(I.includes("network")||I.includes("fetch"))&&(R="Connection error. Please try again."),p(R),oe("error")}finally{g(!1)}},_=()=>{oe("light"),e("/ios-forgot-password")},F=A=>{oe("light"),s(A),p(""),l(""),d("")};return N?r.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:r.jsxs("div",{className:"w-full max-w-sm space-y-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto bg-yellow-500/20 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-xl font-bold text-white",children:"Password Not Set Up"}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Your account was created with email verification. To sign in on iOS, you'll need to set a password first."}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:'Use the "Forgot Password" option to set up your password.'}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{onClick:()=>{oe("light"),w(!1),_()},className:"w-full bg-white text-black hover:bg-gray-200","data-testid":"button-set-password",children:"Set Up Password"}),r.jsx(Z,{onClick:()=>{oe("light"),w(!1)},variant:"ghost",className:"w-full text-gray-400","data-testid":"button-cancel",children:"Cancel"})]})]})}):r.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:r.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-12 w-auto mx-auto mb-3"}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Thousands of techniques analyzed."}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"One coach who never forgets."})]}),jW&&r.jsx(Z,{type:"button",onClick:S,disabled:y,className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg flex items-center justify-center gap-3","data-testid":"button-apple-sign-in",children:y?r.jsx(De,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),"Continue with Apple"]})}),bW&&r.jsx(Z,{type:"button",onClick:k,disabled:m,className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg flex items-center justify-center gap-3","data-testid":"button-google-sign-in",children:m?r.jsx(De,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-[#2A2A2B]"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-[#0A0A0B] px-2 text-gray-500",children:"or"})})]}),n==="login"?r.jsxs("form",{onSubmit:P,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),r.jsx(je,{type:"text",inputMode:"email",placeholder:"Email",value:i,onChange:A=>a(A.target.value),className:"h-12 pl-11 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg",autoComplete:"email",autoCapitalize:"none","data-testid":"input-email"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(pi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),r.jsx(je,{type:u?"text":"password",placeholder:"Password",value:o,onChange:A=>l(A.target.value),className:"h-12 pl-11 pr-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg",autoComplete:"current-password","data-testid":"input-password"}),r.jsx("button",{type:"button",onClick:()=>{oe("light"),f(!u)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white","data-testid":"button-toggle-password",children:u?r.jsx(Yi,{className:"w-5 h-5"}):r.jsx(Bn,{className:"w-5 h-5"})})]}),h&&r.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:h}),r.jsx(Z,{type:"submit",disabled:v,className:"w-full h-12 bg-[#8B5CF6] text-white font-semibold hover:bg-[#7C3AED] rounded-lg","data-testid":"button-sign-in",children:v?r.jsx(De,{className:"w-5 h-5 animate-spin"}):"Sign In"}),r.jsx("button",{type:"button",onClick:_,className:"w-full text-gray-400 text-sm hover:text-white transition-colors py-2","data-testid":"link-forgot-password",children:"Forgot password?"}),r.jsx("p",{className:"text-xs text-zinc-500 text-center mt-6",children:"BJJ OS: $19.99/month. Auto-renews monthly. Cancel anytime."})]}):r.jsxs("form",{onSubmit:E,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),r.jsx(je,{type:"text",inputMode:"email",placeholder:"Email",value:i,onChange:A=>a(A.target.value),className:"h-12 pl-11 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg",autoComplete:"email",autoCapitalize:"none","data-testid":"input-email"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(pi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),r.jsx(je,{type:u?"text":"password",placeholder:"Password (min 6 characters)",value:o,onChange:A=>l(A.target.value),className:"h-12 pl-11 pr-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg",autoComplete:"new-password","data-testid":"input-password"}),r.jsx("button",{type:"button",onClick:()=>{oe("light"),f(!u)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white","data-testid":"button-toggle-password",children:u?r.jsx(Yi,{className:"w-5 h-5"}):r.jsx(Bn,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"relative",children:[r.jsx(pi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),r.jsx(je,{type:u?"text":"password",placeholder:"Confirm password",value:c,onChange:A=>d(A.target.value),className:"h-12 pl-11 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg",autoComplete:"new-password","data-testid":"input-confirm-password"})]}),h&&r.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:h}),r.jsxs("div",{className:"text-center my-6 p-4 bg-zinc-900 rounded-lg",children:[r.jsx("p",{className:"text-sm text-zinc-300",children:"BJJ OS Subscription"}),r.jsx("p",{className:"text-2xl text-white font-bold",children:"$19.99/month"}),r.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"Auto-renews monthly. Cancel anytime."})]}),r.jsx(Z,{type:"submit",disabled:v,className:"w-full h-12 bg-[#8B5CF6] text-white font-semibold hover:bg-[#7C3AED] rounded-lg","data-testid":"button-create-account",children:v?r.jsx(De,{className:"w-5 h-5 animate-spin"}):"Create Account"})]}),r.jsx("div",{className:"text-center pt-4",children:n==="login"?r.jsxs("p",{className:"text-gray-400 text-sm",children:["Don't have an account?"," ",r.jsx("button",{type:"button",onClick:()=>F("register"),className:"text-[#8B5CF6] font-medium hover:text-[#A78BFA]","data-testid":"link-create-account",children:"Create Account"})]}):r.jsxs("p",{className:"text-gray-400 text-sm",children:["Already have an account?"," ",r.jsx("button",{type:"button",onClick:()=>F("login"),className:"text-[#8B5CF6] font-medium hover:text-[#A78BFA]","data-testid":"link-sign-in",children:"Sign In"})]})})]})})}function NW(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState(""),[i,a]=x.useState(""),[o,l]=x.useState(!1),c=async d=>{if(d.preventDefault(),a(""),oe("light"),!n||!n.includes("@")){a("Please enter a valid email address"),oe("error");return}l(!0);try{const u=await fetch(Zt("/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:n.toLowerCase().trim()})}),f=await u.json();if(!u.ok){a(f.error||"Failed to send reset code"),oe("error");return}oe("success"),t({title:"Code sent!",description:"Check your email for the reset code"}),e(`/ios-verify-reset?email=${encodeURIComponent(n.toLowerCase().trim())}`)}catch(u){a(u.message||"Something went wrong. Please try again."),oe("error")}finally{l(!1)}};return r.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:r.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-12 w-auto mx-auto mb-6"}),r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Reset Password"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Enter your email and we'll send you a code to reset your password."})]}),r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsx("div",{className:"space-y-2",children:r.jsx(je,{type:"email",placeholder:"Email",value:n,onChange:d=>s(d.target.value),className:"h-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg",autoComplete:"email",autoCapitalize:"none","data-testid":"input-email"})}),i&&r.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:i}),r.jsx(Z,{type:"submit",disabled:o,className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg","data-testid":"button-send-code",children:o?r.jsx(De,{className:"w-5 h-5 animate-spin"}):"Send Reset Code"})]}),r.jsx("div",{className:"text-center",children:r.jsxs("button",{type:"button",onClick:()=>{oe("light"),e("/ios-login")},className:"text-gray-400 text-sm hover:text-white transition-colors inline-flex items-center gap-2","data-testid":"link-back-to-login",children:[r.jsx(Gn,{className:"w-4 h-4"}),"Back to Sign In"]})})]})})}function SW(){const[,e]=it(),t=Y4(),{toast:n}=Je(),i=new URLSearchParams(t).get("email")||"",[a,o]=x.useState(["","","","","",""]),[l,c]=x.useState(""),[d,u]=x.useState(!1),[f,h]=x.useState(!1),p=x.useRef([]);x.useEffect(()=>{i||e("/ios-forgot-password")},[i,e]);const v=(b,N)=>{var S;if(N.length>1&&(N=N.slice(-1)),!/^\d*$/.test(N))return;const w=[...a];w[b]=N,o(w),N&&b<5&&((S=p.current[b+1])==null||S.focus())},g=(b,N)=>{var w;N.key==="Backspace"&&!a[b]&&b>0&&((w=p.current[b-1])==null||w.focus())},y=b=>{var w;b.preventDefault();const N=b.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);N.length===6&&(o(N.split("")),(w=p.current[5])==null||w.focus())},j=async b=>{b.preventDefault(),c(""),oe("light");const N=a.join("");if(N.length!==6){c("Please enter the 6-digit code"),oe("error");return}u(!0);try{const w=await fetch(Zt("/api/auth/verify-reset-code"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:i,code:N})}),S=await w.json();if(!w.ok){c(S.error||"Invalid or expired code"),oe("error");return}oe("success"),e(`/ios-reset-password?email=${encodeURIComponent(i)}&code=${N}`)}catch(w){c(w.message||"Something went wrong. Please try again."),oe("error")}finally{u(!1)}},m=async()=>{h(!0),oe("light");try{(await fetch(Zt("/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:i})})).ok&&(n({title:"Code resent!",description:"Check your email for the new code"}),oe("success"))}catch{n({title:"Failed to resend",description:"Please try again",variant:"destructive"})}finally{h(!1)}};return r.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:r.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-12 w-auto mx-auto mb-6"}),r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Enter Code"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"We sent a 6-digit code to your email."})]}),r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsx("div",{className:"flex justify-center gap-2",onPaste:y,children:a.map((b,N)=>r.jsx("input",{ref:w=>{p.current[N]=w},type:"text",inputMode:"numeric",maxLength:1,value:b,onChange:w=>v(N,w.target.value),onKeyDown:w=>g(N,w),className:"w-12 h-14 text-center text-2xl font-bold bg-[#1A1A1B] border border-[#2A2A2B] text-white rounded-lg focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none","data-testid":`input-code-${N}`},N))}),l&&r.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:l}),r.jsx(Z,{type:"submit",disabled:d,className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg","data-testid":"button-verify-code",children:d?r.jsx(De,{className:"w-5 h-5 animate-spin"}):"Verify Code"})]}),r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("button",{type:"button",onClick:m,disabled:f,className:"text-gray-400 text-sm hover:text-white transition-colors","data-testid":"button-resend-code",children:f?"Sending...":"Didn't receive it? Send again"}),r.jsx("div",{children:r.jsxs("button",{type:"button",onClick:()=>{oe("light"),e("/ios-forgot-password")},className:"text-gray-400 text-sm hover:text-white transition-colors inline-flex items-center gap-2","data-testid":"link-back",children:[r.jsx(Gn,{className:"w-4 h-4"}),"Back"]})})]})]})})}function kW(){const[,e]=it(),t=Y4(),{toast:n}=Je(),s=new URLSearchParams(t),i=s.get("email")||"",a=s.get("code")||"",[o,l]=x.useState(""),[c,d]=x.useState(""),[u,f]=x.useState(!1),[h,p]=x.useState(!1),[v,g]=x.useState(""),[y,j]=x.useState(!1),[m,b]=x.useState(!1);x.useEffect(()=>{(!i||!a)&&e("/ios-forgot-password")},[i,a,e]);const N=async w=>{if(w.preventDefault(),g(""),oe("light"),o.length<8){g("Password must be at least 8 characters"),oe("error");return}if(o!==c){g("Passwords don't match"),oe("error");return}j(!0);try{const S=await fetch(Zt("/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:i,code:a,newPassword:o})}),k=await S.json();if(!S.ok){g(k.error||"Failed to reset password"),oe("error");return}oe("success"),b(!0),n({title:"Password reset!",description:"You can now sign in with your new password"})}catch(S){g(S.message||"Something went wrong. Please try again."),oe("error")}finally{j(!1)}};return m?r.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:r.jsxs("div",{className:"w-full max-w-sm space-y-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto bg-green-500/20 rounded-full flex items-center justify-center",children:r.jsx(Qs,{className:"w-8 h-8 text-green-500"})}),r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Success!"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Your password has been reset. You can now sign in with your new password."}),r.jsx(Z,{onClick:()=>{oe("light"),e("/ios-login")},className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg","data-testid":"button-back-to-login",children:"Back to Sign In"})]})}):r.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center p-6 ios-safe-area",children:r.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-12 w-auto mx-auto mb-6"}),r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Set New Password"})]}),r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2 relative",children:[r.jsx(je,{type:u?"text":"password",placeholder:"New Password",value:o,onChange:w=>l(w.target.value),className:"h-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg pr-12",autoComplete:"new-password","data-testid":"input-password"}),r.jsx("button",{type:"button",onClick:()=>{oe("light"),f(!u)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white","data-testid":"button-toggle-password",children:u?r.jsx(Yi,{className:"w-5 h-5"}):r.jsx(Bn,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-2 relative",children:[r.jsx(je,{type:h?"text":"password",placeholder:"Confirm Password",value:c,onChange:w=>d(w.target.value),className:"h-12 bg-[#1A1A1B] border-[#2A2A2B] text-white placeholder:text-gray-500 rounded-lg pr-12",autoComplete:"new-password","data-testid":"input-confirm-password"}),r.jsx("button",{type:"button",onClick:()=>{oe("light"),p(!h)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white","data-testid":"button-toggle-confirm-password",children:h?r.jsx(Yi,{className:"w-5 h-5"}):r.jsx(Bn,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-gray-500 text-xs",children:"Password must be at least 8 characters"}),v&&r.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:v}),r.jsx(Z,{type:"submit",disabled:y,className:"w-full h-12 bg-white text-black font-semibold hover:bg-gray-200 rounded-lg","data-testid":"button-save-password",children:y?r.jsx(De,{className:"w-5 h-5 animate-spin"}):"Save Password"})]})]})})}function CW(){const[,e]=it(),{toast:t}=Je(),s=new URLSearchParams(window.location.search).get("token")||"",[i,a]=x.useState(!1),[o,l]=x.useState(!0),[c,d]=x.useState(""),[u,f]=x.useState(""),[h,p]=x.useState(""),[v,g]=x.useState(""),[y,j]=x.useState(""),[m,b]=x.useState(""),[N,w]=x.useState(""),[S,k]=x.useState(""),[P,E]=x.useState(""),[_,F]=x.useState(""),[A,T]=x.useState(""),[M,O]=x.useState(!1),[C,R]=x.useState(null),[I,B]=x.useState(!1);x.useEffect(()=>{window.scrollTo(0,0),H()},[]);const H=async()=>{if(!s){l(!1),t({variant:"destructive",title:"Invalid Link",description:"No invitation token found. Please use the link from your invitation email."});return}try{const V=await(await lt("GET",`/api/auth/validate-lifetime-invite?token=${s}`)).json();V.success&&V.email?(a(!0),d(V.email)):t({variant:"destructive",title:"Invalid Invitation",description:V.error||"This invitation link is invalid or has expired."})}catch{t({variant:"destructive",title:"Error",description:"Failed to validate invitation link"})}finally{l(!1)}};x.useEffect(()=>{if(!h||h.length<3){R(null);return}const te=setTimeout(async()=>{B(!0);try{const J=await(await lt("POST","/api/auth/check-username",{username:h})).json();J.available?(R(!0),E("")):(R(!1),E(J.message||"Username is already taken"))}catch(V){console.error("Username check error:",V)}finally{B(!1)}},500);return()=>clearTimeout(te)},[h]);const Q=()=>{let te=!0;return u.trim()?k(""):(k("First name is required"),te=!1),!h||h.length<3?(E("Username must be at least 3 characters"),te=!1):/^[a-zA-Z0-9_]+$/.test(h)?C!==!0&&(E(C===!1?"Username is already taken":"Please wait while we check username availability"),te=!1):(E("Username can only contain letters, numbers, and underscores"),te=!1),m||(t({variant:"destructive",title:"Missing Information",description:"Please select what technique you struggle with most"}),te=!1),N||(t({variant:"destructive",title:"Missing Information",description:"Please select your primary training style"}),te=!1),!v||v.length<8?(F("Password must be at least 8 characters"),te=!1):F(""),v!==y?(T("Passwords do not match"),te=!1):T(""),te},D=async te=>{if(te.preventDefault(),!!Q()){if(C===!1){t({variant:"destructive",title:"Username Taken",description:"Please choose a different username"});return}O(!0);try{const J=await(await lt("POST","/api/auth/signup-with-lifetime-invite",{token:s,firstName:u.trim(),username:h.trim(),password:v,struggleArea:m,trainingFocus:N})).json();J.success?(t({title:"Welcome to BJJ OS!",description:"Your lifetime access account has been created successfully."}),localStorage.setItem("sessionToken",J.token),setTimeout(()=>{e("/welcome/lifetime")},1e3)):t({variant:"destructive",title:"Signup Failed",description:J.error||"Failed to create your account. Please try again."})}catch(V){t({variant:"destructive",title:"Error",description:V.message||"Failed to create account"})}finally{O(!1)}}};return o?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsx(G,{className:"w-full max-w-md",children:r.jsxs(ee,{className:"pt-6 text-center",children:[r.jsx(De,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Validating your invitation..."})]})})}):i?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:r.jsx(Qs,{className:"h-6 w-6 text-primary"})}),r.jsx(se,{children:"Activate Lifetime Access"}),r.jsx(ze,{children:"Complete your signup to get lifetime access to BJJ OS - free forever."})]}),r.jsx(ee,{children:r.jsxs("form",{onSubmit:D,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"email","data-testid":"label-email",children:"Email Address"}),r.jsx(je,{id:"email",type:"email",value:c,disabled:!0,readOnly:!0,className:"bg-muted","data-testid":"input-email"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"This email is from your invitation"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"firstName","data-testid":"label-first-name",children:"First Name *"}),r.jsx(je,{id:"firstName",type:"text",value:u,onChange:te=>f(te.target.value),placeholder:"John",required:!0,"data-testid":"input-first-name"}),S&&r.jsx("p",{className:"text-sm text-destructive",children:S})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"username","data-testid":"label-username",children:"Username *"}),r.jsxs("div",{className:"relative",children:[r.jsx(je,{id:"username",type:"text",value:h,onChange:te=>{p(te.target.value.toLowerCase()),R(null),E("")},placeholder:"johndoe",required:!0,"data-testid":"input-username"}),I&&r.jsx(De,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin text-muted-foreground"}),!I&&C===!0&&h.length>=3&&r.jsx(Qs,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-green-500"}),!I&&C===!1&&r.jsx(lr,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-destructive"})]}),P&&r.jsx("p",{className:"text-sm text-destructive",children:P}),!P&&h.length>=3&&C===!0&&r.jsx("p",{className:"text-sm text-green-600",children:"Username is available"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"What technique do you struggle with most? *"}),r.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"This helps Professor OS give you personalized guidance"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Z,{type:"button",variant:m==="guard_passing"?"default":"outline",className:"h-auto py-3",onClick:()=>b("guard_passing"),"data-testid":"button-struggle-guard-passing",children:"Guard Passing"}),r.jsx(Z,{type:"button",variant:m==="guard_retention"?"default":"outline",className:"h-auto py-3",onClick:()=>b("guard_retention"),"data-testid":"button-struggle-guard-retention",children:"Guard Retention"}),r.jsx(Z,{type:"button",variant:m==="takedowns"?"default":"outline",className:"h-auto py-3",onClick:()=>b("takedowns"),"data-testid":"button-struggle-takedowns",children:"Takedowns"}),r.jsx(Z,{type:"button",variant:m==="submissions"?"default":"outline",className:"h-auto py-3",onClick:()=>b("submissions"),"data-testid":"button-struggle-submissions",children:"Submissions"}),r.jsx(Z,{type:"button",variant:m==="escapes"?"default":"outline",className:"h-auto py-3",onClick:()=>b("escapes"),"data-testid":"button-struggle-escapes",children:"Escapes"}),r.jsx(Z,{type:"button",variant:m==="transitions"?"default":"outline",className:"h-auto py-3",onClick:()=>b("transitions"),"data-testid":"button-struggle-transitions",children:"Transitions"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"What do you primarily train? *"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(Z,{type:"button",variant:N==="gi"?"default":"outline",className:"h-auto py-3",onClick:()=>w("gi"),"data-testid":"button-training-gi",children:"Gi"}),r.jsx(Z,{type:"button",variant:N==="nogi"?"default":"outline",className:"h-auto py-3",onClick:()=>w("nogi"),"data-testid":"button-training-nogi",children:"No-Gi"}),r.jsx(Z,{type:"button",variant:N==="both"?"default":"outline",className:"h-auto py-3",onClick:()=>w("both"),"data-testid":"button-training-both",children:"Both"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"password","data-testid":"label-password",children:"Password *"}),r.jsx(je,{id:"password",type:"password",value:v,onChange:te=>g(te.target.value),placeholder:"At least 8 characters",required:!0,"data-testid":"input-password"}),_&&r.jsx("p",{className:"text-sm text-destructive",children:_})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"confirmPassword","data-testid":"label-confirm-password",children:"Confirm Password *"}),r.jsx(je,{id:"confirmPassword",type:"password",value:y,onChange:te=>j(te.target.value),placeholder:"Re-enter your password",required:!0,"data-testid":"input-confirm-password"}),A&&r.jsx("p",{className:"text-sm text-destructive",children:A})]}),r.jsx(Z,{type:"submit",className:"w-full",disabled:M||C!==!0||I||!m||!N,"data-testid":"button-activate-lifetime-access",children:M?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Your Account..."]}):"Activate Lifetime Access"})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center mb-4",children:r.jsx(lr,{className:"h-6 w-6 text-destructive"})}),r.jsx(se,{children:"Invalid Invitation"}),r.jsx(ze,{children:"This invitation link is invalid or has expired. Please contact support if you believe this is an error."})]}),r.jsx(ee,{children:r.jsx(Z,{variant:"outline",className:"w-full",onClick:()=>e("/"),"data-testid":"button-back-home",children:"Back to Home"})})]})})}const AW=Ud("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ae({className:e,variant:t,...n}){return r.jsx("div",{className:Ce(AW({variant:t}),e),...n})}function PW(){const[,e]=it(),t=["Unlimited Professor OS conversations","Complete curated video library (3,500+ techniques)","Personalized recommendations for your game","Training session tracking & progress","All future features & updates","Priority support"];return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-6",children:r.jsx(G,{className:"w-full max-w-2xl border-primary/20 shadow-2xl",children:r.jsxs(ee,{className:"p-8 md:p-12",children:[r.jsxs("div",{className:"text-center space-y-6 mb-8",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx(ll,{className:"h-16 w-16 text-primary animate-pulse"})}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Welcome to BJJ OS! "}),r.jsx("div",{className:"flex justify-center",children:r.jsx(ae,{variant:"default",className:"px-6 py-2 text-sm font-semibold tracking-wider bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",children:"LIFETIME ACCESS"})})]}),r.jsxs("div",{className:"space-y-6 mb-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Your lifetime membership includes:"}),r.jsx("div",{className:"space-y-3",children:t.map((n,s)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover-elevate border border-border/50","data-testid":`benefit-item-${s}`,children:[r.jsx("div",{className:"mt-0.5 shrink-0",children:r.jsx("div",{className:"h-5 w-5 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(Kn,{className:"h-3.5 w-3.5 text-primary"})})}),r.jsx("p",{className:"text-base text-foreground",children:n})]},s))}),r.jsx("div",{className:"mt-8 p-4 rounded-lg bg-primary/10 border border-primary/20",children:r.jsx("p",{className:"text-center text-lg font-semibold text-primary",children:"No expiration. No monthly fees. Ever."})})]}),r.jsx("div",{className:"flex justify-center pt-4",children:r.jsx(Z,{size:"lg",onClick:()=>e("/onboarding"),className:"px-12 py-6 text-lg font-semibold bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90","data-testid":"button-start-training",children:"Continue "})})]})})})}const Ta=x.forwardRef(({className:e,variant:t="primary",size:n="default",children:s,...i},a)=>r.jsx("button",{className:Ce("inline-flex items-center justify-center gap-2 rounded-xl font-semibold transition-all duration-200","disabled:opacity-50 disabled:cursor-not-allowed",n==="default"&&"px-10 py-4 text-lg",n==="lg"&&"px-12 py-5 text-xl",t==="primary"&&["bjj-gradient-bg text-white border-none","hover:-translate-y-0.5 hover:bjj-hero-shadow","active:translate-y-0"],t==="secondary"&&["bg-transparent border-2 border-[hsl(var(--bjj-primary-purple))] text-[hsl(var(--bjj-text-primary))]","hover:-translate-y-0.5 hover:bg-[hsl(var(--bjj-primary-purple)_/_0.1)]","active:translate-y-0"],t==="outline"&&["bg-transparent border-2 border-[hsl(var(--border))] text-[hsl(var(--foreground))]","hover:-translate-y-0.5 hover:border-[hsl(var(--bjj-primary-purple))]","active:translate-y-0"],e),ref:a,...i,children:s}));Ta.displayName="BJJButton";function EW(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState("name"),[i,a]=x.useState(!1),{data:o}=pe({queryKey:["/api/auth/me"]});x.useEffect(()=>{o&&o.onboardingCompleted&&(console.log("[ONBOARDING] User already completed onboarding, redirecting to /chat"),e("/chat"))},[o,e]);const[l,c]=x.useState(""),[d,u]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState(5),[g,y]=x.useState(9),[j,m]=x.useState(175),[b,N]=x.useState(170),[w,S]=x.useState(!1),k=M=>{if(M&&!w){const O=p*12+g,C=Math.round(O*2.54);m(C),N(Math.round(b/2.205))}else if(!M&&w){const O=Math.round(j/2.54);v(Math.floor(O/12)),y(O%12),N(Math.round(b*2.205))}S(M)},P=()=>{switch(n){case"name":return 1;case"belt":return 2;case"style":return 3;case"body":return 4;default:return 1}},E=()=>{if(!l.trim()){t({title:"Name Required",description:"Please enter your first name",variant:"destructive"});return}s("belt")},_=()=>{if(!d){t({title:"Selection Required",description:"Please select your current belt level",variant:"destructive"});return}s("style")},F=()=>{if(!f){t({title:"Selection Required",description:"Please select your training style",variant:"destructive"});return}s("body")},A=async()=>{a(!0);const M=w?`${j}cm`:`${p}'${g}"`;try{console.log("[ONBOARDING] Submitting simplified data:",{displayName:l.trim(),beltLevel:d,style:f,height:M,weight:b,unitPreference:w?"metric":"imperial"}),await lt("PATCH","/api/auth/profile",{displayName:l.trim(),beltLevel:d,style:f,height:M,weight:b,unitPreference:w?"metric":"imperial",onboardingCompleted:!0}),console.log("[ONBOARDING] Profile updated, invalidating cache..."),await _e.invalidateQueries({queryKey:["/api/auth/me"]}),await _e.refetchQueries({queryKey:["/api/auth/me"]}),t({title:"Profile Complete!",description:"Moving to payment setup..."}),e("/payment")}catch(O){t({title:"Error",description:O.message||"Failed to save preferences",variant:"destructive"}),a(!1)}},T=()=>{n==="belt"?s("name"):n==="style"?s("belt"):n==="body"&&s("style")};return r.jsxs("div",{className:"onboarding-page",children:[r.jsxs("div",{className:"onboarding-container",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:r.jsx(Gd,{className:"w-16 h-16"})}),r.jsx("h1",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-[hsl(var(--bjj-primary-purple))] to-[hsl(var(--bjj-primary-blue))] bg-clip-text text-transparent",children:"Welcome to BJJ OS"}),r.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] text-lg",children:"Let's get you set up in under a minute"})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-sm text-[hsl(var(--bjj-text-secondary))]",children:["Step ",P()," of 4"]}),r.jsxs("span",{className:"text-sm text-[hsl(var(--bjj-text-secondary))]",children:[Math.round(P()/4*100),"% complete"]})]}),r.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden","data-testid":"progress-bar",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-[hsl(var(--bjj-primary-purple))] to-[hsl(var(--bjj-primary-blue))] transition-all duration-300",style:{width:`${P()/4*100}%`}})})]}),n==="name"&&r.jsxs("div",{className:"onboarding-step",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"What's your name?"}),r.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"How should Professor OS address you?"}),r.jsx(je,{type:"text",placeholder:"Enter your first name",value:l,onChange:M=>c(M.target.value),onKeyPress:M=>M.key==="Enter"&&E(),autoFocus:!0,className:"mb-6 bg-black/50 border-white/10 text-white placeholder:text-white/40","data-testid":"input-name"}),r.jsx(Ta,{onClick:E,disabled:!l.trim(),className:"w-full","data-testid":"button-next-name",children:"Continue"})]}),n==="belt"&&r.jsxs("div",{className:"onboarding-step",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"What's your belt?"}),r.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"Select your current rank"}),r.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:["white","blue","purple","brown","black"].map(M=>r.jsx("button",{onClick:()=>{oe("light"),u(M)},className:`p-4 rounded-lg border-2 transition-all ${d===M?"border-[hsl(var(--bjj-primary-purple))] bg-[hsl(var(--bjj-primary-purple))]/10":"border-white/10 bg-black/30 hover:border-white/20"}`,"data-testid":`button-belt-${M}`,children:r.jsxs("span",{className:"text-white font-medium capitalize",children:[M," Belt"]})},M))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Ta,{variant:"outline",onClick:T,"data-testid":"button-back",children:"Back"}),r.jsx(Ta,{onClick:_,disabled:!d,className:"flex-1","data-testid":"button-next-belt",children:"Continue"})]})]}),n==="style"&&r.jsxs("div",{className:"onboarding-step",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"What do you train?"}),r.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"Choose your training focus"}),r.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:["gi","nogi","both"].map(M=>r.jsx("button",{onClick:()=>{oe("light"),h(M)},className:`p-4 rounded-lg border-2 transition-all ${f===M?"border-[hsl(var(--bjj-primary-purple))] bg-[hsl(var(--bjj-primary-purple))]/10":"border-white/10 bg-black/30 hover:border-white/20"}`,"data-testid":`button-style-${M}`,children:r.jsx("span",{className:"text-white font-medium",children:M==="gi"?"Gi":M==="nogi"?"No-Gi":"Both"})},M))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Ta,{variant:"outline",onClick:T,"data-testid":"button-back",children:"Back"}),r.jsx(Ta,{onClick:F,disabled:!f,className:"flex-1","data-testid":"button-next-style",children:"Continue"})]})]}),n==="body"&&r.jsxs("div",{className:"onboarding-step",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"Height & Weight"}),r.jsx("p",{className:"text-[hsl(var(--bjj-text-secondary))] mb-6",children:"Helps Professor OS recommend techniques for your body type"}),r.jsxs("div",{className:"flex justify-center gap-2 mb-6",children:[r.jsx("button",{onClick:()=>k(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${w?"bg-white/10 text-white/60 hover:bg-white/20":"bg-[hsl(var(--bjj-primary-purple))] text-white"}`,"data-testid":"button-imperial",children:"Imperial"}),r.jsx("button",{onClick:()=>k(!0),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${w?"bg-[hsl(var(--bjj-primary-purple))] text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,"data-testid":"button-metric",children:"Metric"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-white/80 mb-2 text-sm",children:"Height"}),w?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(je,{type:"number",value:j,onChange:M=>m(parseInt(M.target.value)||0),className:"w-24 bg-black/50 border-white/10 text-white text-center",min:100,max:250,"data-testid":"input-height-cm"}),r.jsx("span",{className:"text-white/60",children:"cm"})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(je,{type:"number",value:p,onChange:M=>{oe("light"),v(parseInt(M.target.value)||0)},className:"w-16 bg-black/50 border-white/10 text-white text-center",min:4,max:7,"data-testid":"input-height-feet"}),r.jsx("span",{className:"text-white/60",children:"ft"}),r.jsx(je,{type:"number",value:g,onChange:M=>{oe("light"),y(parseInt(M.target.value)||0)},className:"w-16 bg-black/50 border-white/10 text-white text-center",min:0,max:11,"data-testid":"input-height-inches"}),r.jsx("span",{className:"text-white/60",children:"in"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-white/80 mb-2 text-sm",children:"Weight"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(je,{type:"number",value:b,onChange:M=>{oe("light"),N(parseInt(M.target.value)||0)},className:"w-24 bg-black/50 border-white/10 text-white text-center",min:w?40:90,max:w?200:400,"data-testid":"input-weight"}),r.jsx("span",{className:"text-white/60",children:w?"kg":"lbs"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Ta,{variant:"outline",onClick:T,disabled:i,"data-testid":"button-back",children:"Back"}),r.jsx(Ta,{onClick:A,disabled:i,className:"flex-1","data-testid":"button-complete",children:i?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Get Started"})]})]})]}),r.jsx("style",{children:`
        .onboarding-page {
          min-height: 100vh;
          background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
          color: white;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 40px 20px;
        }

        .onboarding-container {
          width: 100%;
          max-width: 600px;
        }

        .onboarding-step {
          background: rgba(15, 15, 15, 0.8);
          border: 1px solid rgba(255, 255, 255, 0.05);
          border-radius: 16px;
          padding: 32px;
        }

        @media (max-width: 768px) {
          .onboarding-page {
            padding: 20px;
          }

          .onboarding-step {
            padding: 24px;
          }
        }
      `})]})}function Gf(e,[t,n]){return Math.min(n,Math.max(t,e))}var TW=x.createContext(void 0);function Zh(e){const t=x.useContext(TW);return e||t||"ltr"}var ub=0;function bR(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??HC()),document.body.insertAdjacentElement("beforeend",e[1]??HC()),ub++,()=>{ub===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ub--}},[])}function HC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fb="focusScope.autoFocusOnMount",hb="focusScope.autoFocusOnUnmount",KC={bubbles:!1,cancelable:!0},OW="FocusScope",MN=x.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=x.useState(null),d=yn(i),u=yn(a),f=x.useRef(null),h=ct(t,g=>c(g)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(s){let g=function(b){if(p.paused||!l)return;const N=b.target;l.contains(N)?f.current=N:Oa(f.current,{select:!0})},y=function(b){if(p.paused||!l)return;const N=b.relatedTarget;N!==null&&(l.contains(N)||Oa(f.current,{select:!0}))},j=function(b){if(document.activeElement===document.body)for(const w of b)w.removedNodes.length>0&&Oa(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const m=new MutationObserver(j);return l&&m.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),m.disconnect()}}},[s,l,p.paused]),x.useEffect(()=>{if(l){YC.add(p);const g=document.activeElement;if(!l.contains(g)){const j=new CustomEvent(fb,KC);l.addEventListener(fb,d),l.dispatchEvent(j),j.defaultPrevented||(_W($W(jR(l)),{select:!0}),document.activeElement===g&&Oa(l))}return()=>{l.removeEventListener(fb,d),setTimeout(()=>{const j=new CustomEvent(hb,KC);l.addEventListener(hb,u),l.dispatchEvent(j),j.defaultPrevented||Oa(g??document.body,{select:!0}),l.removeEventListener(hb,u),YC.remove(p)},0)}}},[l,d,u,p]);const v=x.useCallback(g=>{if(!n&&!s||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,j=document.activeElement;if(y&&j){const m=g.currentTarget,[b,N]=IW(m);b&&N?!g.shiftKey&&j===N?(g.preventDefault(),n&&Oa(b,{select:!0})):g.shiftKey&&j===b&&(g.preventDefault(),n&&Oa(N,{select:!0})):j===m&&g.preventDefault()}},[n,s,p.paused]);return r.jsx(He.div,{tabIndex:-1,...o,ref:h,onKeyDown:v})});MN.displayName=OW;function _W(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Oa(s,{select:t}),document.activeElement!==n)return}function IW(e){const t=jR(e),n=GC(t,e),s=GC(t.reverse(),e);return[n,s]}function jR(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function GC(e,t){for(const n of e)if(!RW(n,{upTo:t}))return n}function RW(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function MW(e){return e instanceof HTMLInputElement&&"select"in e}function Oa(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&MW(e)&&t&&e.select()}}var YC=FW();function FW(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=QC(e,t),e.unshift(t)},remove(t){var n;e=QC(e,t),(n=e[0])==null||n.resume()}}}function QC(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function $W(e){return e.filter(t=>t.tagName!=="A")}function Cv(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var DW=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Wl=new WeakMap,zm=new WeakMap,qm={},mb=0,wR=function(e){return e&&(e.host||wR(e.parentNode))},LW=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=wR(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},BW=function(e,t,n,s){var i=LW(t,Array.isArray(e)?e:[e]);qm[n]||(qm[n]=new WeakMap);var a=qm[n],o=[],l=new Set,c=new Set(i),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};i.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))u(h);else try{var p=h.getAttribute(s),v=p!==null&&p!=="false",g=(Wl.get(h)||0)+1,y=(a.get(h)||0)+1;Wl.set(h,g),a.set(h,y),o.push(h),g===1&&v&&zm.set(h,!0),y===1&&h.setAttribute(n,"true"),v||h.setAttribute(s,"true")}catch(j){console.error("aria-hidden: cannot operate on ",h,j)}})};return u(t),l.clear(),mb++,function(){o.forEach(function(f){var h=Wl.get(f)-1,p=a.get(f)-1;Wl.set(f,h),a.set(f,p),h||(zm.has(f)||f.removeAttribute(s),zm.delete(f)),p||f.removeAttribute(n)}),mb--,mb||(Wl=new WeakMap,Wl=new WeakMap,zm=new WeakMap,qm={})}},NR=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),i=DW(e);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live]"))),BW(s,i,n,"aria-hidden")):function(){return null}},di=function(){return di=Object.assign||function(t){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},di.apply(this,arguments)};function SR(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function zW(e,t,n){if(n||arguments.length===2)for(var s=0,i=t.length,a;s<i;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var Rp="right-scroll-bar-position",Mp="width-before-scroll-bar",qW="with-scroll-bars-hidden",UW="--removed-body-scroll-bar-size";function pb(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function VW(e,t){var n=x.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=t,n.facade}var WW=typeof window<"u"?x.useLayoutEffect:x.useEffect,JC=new WeakMap;function HW(e,t){var n=VW(null,function(s){return e.forEach(function(i){return pb(i,s)})});return WW(function(){var s=JC.get(n);if(s){var i=new Set(s),a=new Set(e),o=n.current;i.forEach(function(l){a.has(l)||pb(l,null)}),a.forEach(function(l){i.has(l)||pb(l,o)})}JC.set(n,e)},[e]),n}function KW(e){return e}function GW(e,t){t===void 0&&(t=KW);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(s=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var u=o;o=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),n}}}};return i}function YW(e){e===void 0&&(e={});var t=GW(null);return t.options=di({async:!0,ssr:!1},e),t}var kR=function(e){var t=e.sideCar,n=SR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return x.createElement(s,di({},n))};kR.isSideCarExport=!0;function QW(e,t){return e.useMedium(t),kR}var CR=YW(),gb=function(){},Av=x.forwardRef(function(e,t){var n=x.useRef(null),s=x.useState({onScrollCapture:gb,onWheelCapture:gb,onTouchMoveCapture:gb}),i=s[0],a=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,v=e.inert,g=e.allowPinchZoom,y=e.as,j=y===void 0?"div":y,m=e.gapMode,b=SR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=h,w=HW([n,t]),S=di(di({},b),i);return x.createElement(x.Fragment,null,u&&x.createElement(N,{sideCar:CR,removeScrollBar:d,shards:f,noIsolation:p,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:m}),o?x.cloneElement(x.Children.only(l),di(di({},S),{ref:w})):x.createElement(j,di({},S,{className:c,ref:w}),l))});Av.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Av.classNames={fullWidth:Mp,zeroRight:Rp};var JW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XW(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=JW();return t&&e.setAttribute("nonce",t),e}function ZW(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function eH(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var tH=function(){var e=0,t=null;return{add:function(n){e==0&&(t=XW())&&(ZW(t,n),eH(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},nH=function(){var e=tH();return function(t,n){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},AR=function(){var e=nH(),t=function(n){var s=n.styles,i=n.dynamic;return e(s,i),null};return t},rH={left:0,top:0,right:0,gap:0},xb=function(e){return parseInt(e||"",10)||0},sH=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[xb(n),xb(s),xb(i)]},iH=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return rH;var t=sH(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},aH=AR(),Pc="data-scroll-locked",oH=function(e,t,n,s){var i=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(qW,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Pc,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rp,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Mp,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Rp," .").concat(Rp,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Mp," .").concat(Mp,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Pc,`] {
    `).concat(UW,": ").concat(l,`px;
  }
`)},XC=function(){var e=parseInt(document.body.getAttribute(Pc)||"0",10);return isFinite(e)?e:0},lH=function(){x.useEffect(function(){return document.body.setAttribute(Pc,(XC()+1).toString()),function(){var e=XC()-1;e<=0?document.body.removeAttribute(Pc):document.body.setAttribute(Pc,e.toString())}},[])},cH=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,i=s===void 0?"margin":s;lH();var a=x.useMemo(function(){return iH(i)},[i]);return x.createElement(aH,{styles:oH(a,!t,i,n?"":"!important")})},Cj=!1;if(typeof window<"u")try{var Um=Object.defineProperty({},"passive",{get:function(){return Cj=!0,!0}});window.addEventListener("test",Um,Um),window.removeEventListener("test",Um,Um)}catch{Cj=!1}var Hl=Cj?{passive:!1}:!1,dH=function(e){return e.tagName==="TEXTAREA"},PR=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!dH(e)&&n[t]==="visible")},uH=function(e){return PR(e,"overflowY")},fH=function(e){return PR(e,"overflowX")},ZC=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=ER(e,s);if(i){var a=TR(e,s),o=a[1],l=a[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},hH=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},mH=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},ER=function(e,t){return e==="v"?uH(t):fH(t)},TR=function(e,t){return e==="v"?hH(t):mH(t)},pH=function(e,t){return e==="h"&&t==="rtl"?-1:1},gH=function(e,t,n,s,i){var a=pH(e,window.getComputedStyle(t).direction),o=a*s,l=n.target,c=t.contains(l),d=!1,u=o>0,f=0,h=0;do{var p=TR(e,l),v=p[0],g=p[1],y=p[2],j=g-y-a*v;(v||j)&&ER(e,l)&&(f+=j,h+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(f)<1||!i)||!u&&(Math.abs(h)<1||!i))&&(d=!0),d},Vm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eA=function(e){return[e.deltaX,e.deltaY]},tA=function(e){return e&&"current"in e?e.current:e},xH=function(e,t){return e[0]===t[0]&&e[1]===t[1]},vH=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},yH=0,Kl=[];function bH(e){var t=x.useRef([]),n=x.useRef([0,0]),s=x.useRef(),i=x.useState(yH++)[0],a=x.useState(AR)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=zW([e.lockRef.current],(e.shards||[]).map(tA),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var j=Vm(g),m=n.current,b="deltaX"in g?g.deltaX:m[0]-j[0],N="deltaY"in g?g.deltaY:m[1]-j[1],w,S=g.target,k=Math.abs(b)>Math.abs(N)?"h":"v";if("touches"in g&&k==="h"&&S.type==="range")return!1;var P=ZC(k,S);if(!P)return!0;if(P?w=k:(w=k==="v"?"h":"v",P=ZC(k,S)),!P)return!1;if(!s.current&&"changedTouches"in g&&(b||N)&&(s.current=w),!w)return!0;var E=s.current||w;return gH(E,y,g,E==="h"?b:N,!0)},[]),c=x.useCallback(function(g){var y=g;if(!(!Kl.length||Kl[Kl.length-1]!==a)){var j="deltaY"in y?eA(y):Vm(y),m=t.current.filter(function(w){return w.name===y.type&&(w.target===y.target||y.target===w.shadowParent)&&xH(w.delta,j)})[0];if(m&&m.should){y.cancelable&&y.preventDefault();return}if(!m){var b=(o.current.shards||[]).map(tA).filter(Boolean).filter(function(w){return w.contains(y.target)}),N=b.length>0?l(y,b[0]):!o.current.noIsolation;N&&y.cancelable&&y.preventDefault()}}},[]),d=x.useCallback(function(g,y,j,m){var b={name:g,delta:y,target:j,should:m,shadowParent:jH(j)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(N){return N!==b})},1)},[]),u=x.useCallback(function(g){n.current=Vm(g),s.current=void 0},[]),f=x.useCallback(function(g){d(g.type,eA(g),g.target,l(g,e.lockRef.current))},[]),h=x.useCallback(function(g){d(g.type,Vm(g),g.target,l(g,e.lockRef.current))},[]);x.useEffect(function(){return Kl.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Hl),document.addEventListener("touchmove",c,Hl),document.addEventListener("touchstart",u,Hl),function(){Kl=Kl.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,Hl),document.removeEventListener("touchmove",c,Hl),document.removeEventListener("touchstart",u,Hl)}},[]);var p=e.removeScrollBar,v=e.inert;return x.createElement(x.Fragment,null,v?x.createElement(a,{styles:vH(i)}):null,p?x.createElement(cH,{gapMode:e.gapMode}):null)}function jH(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const wH=QW(CR,bH);var FN=x.forwardRef(function(e,t){return x.createElement(Av,di({},e,{ref:t,sideCar:wH}))});FN.classNames=Av.classNames;var NH=[" ","Enter","ArrowUp","ArrowDown"],SH=[" ","Enter"],em="Select",[Pv,Ev,kH]=iv(em),[Yd,tSe]=Mr(em,[kH,vv]),Tv=vv(),[CH,Ao]=Yd(em),[AH,PH]=Yd(em),OR=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:h,required:p,form:v}=e,g=Tv(t),[y,j]=x.useState(null),[m,b]=x.useState(null),[N,w]=x.useState(!1),S=Zh(d),[k=!1,P]=bi({prop:s,defaultProp:i,onChange:a}),[E,_]=bi({prop:o,defaultProp:l,onChange:c}),F=x.useRef(null),A=y?v||!!y.closest("form"):!0,[T,M]=x.useState(new Set),O=Array.from(T).map(C=>C.props.value).join(";");return r.jsx(A5,{...g,children:r.jsxs(CH,{required:p,scope:t,trigger:y,onTriggerChange:j,valueNode:m,onValueNodeChange:b,valueNodeHasChildren:N,onValueNodeHasChildrenChange:w,contentId:Xi(),value:E,onValueChange:_,open:k,onOpenChange:P,dir:S,triggerPointerDownPosRef:F,disabled:h,children:[r.jsx(Pv.Provider,{scope:t,children:r.jsx(AH,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(C=>{M(R=>new Set(R).add(C))},[]),onNativeOptionRemove:x.useCallback(C=>{M(R=>{const I=new Set(R);return I.delete(C),I})},[]),children:n})}),A?r.jsxs(nM,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:E,onChange:C=>_(C.target.value),disabled:h,form:v,children:[E===void 0?r.jsx("option",{value:""}):null,Array.from(T)]},O):null]})})};OR.displayName=em;var _R="SelectTrigger",IR=x.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...i}=e,a=Tv(n),o=Ao(_R,n),l=o.disabled||s,c=ct(t,o.onTriggerChange),d=Ev(n),u=x.useRef("touch"),[f,h,p]=rM(g=>{const y=d().filter(b=>!b.disabled),j=y.find(b=>b.value===o.value),m=sM(y,g,j);m!==void 0&&o.onValueChange(m.value)}),v=g=>{l||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return r.jsx(P5,{asChild:!0,...a,children:r.jsx(He.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":tM(o.value)?"":void 0,...i,ref:c,onClick:$e(i.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&v(g)}),onPointerDown:$e(i.onPointerDown,g=>{u.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(v(g),g.preventDefault())}),onKeyDown:$e(i.onKeyDown,g=>{const y=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(y&&g.key===" ")&&NH.includes(g.key)&&(v(),g.preventDefault())})})})});IR.displayName=_R;var RR="SelectValue",MR=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,children:a,placeholder:o="",...l}=e,c=Ao(RR,n),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,f=ct(t,c.onValueNodeChange);return Xn(()=>{d(u)},[d,u]),r.jsx(He.span,{...l,ref:f,style:{pointerEvents:"none"},children:tM(c.value)?r.jsx(r.Fragment,{children:o}):a})});MR.displayName=RR;var EH="SelectIcon",FR=x.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...i}=e;return r.jsx(He.span,{"aria-hidden":!0,...i,ref:t,children:s||""})});FR.displayName=EH;var TH="SelectPortal",$R=e=>r.jsx(av,{asChild:!0,...e});$R.displayName=TH;var wl="SelectContent",DR=x.forwardRef((e,t)=>{const n=Ao(wl,e.__scopeSelect),[s,i]=x.useState();if(Xn(()=>{i(new DocumentFragment)},[]),!n.open){const a=s;return a?Ol.createPortal(r.jsx(LR,{scope:e.__scopeSelect,children:r.jsx(Pv.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),a):null}return r.jsx(BR,{...e,ref:t})});DR.displayName=wl;var Ps=10,[LR,Po]=Yd(wl),OH="SelectContentImpl",_H=rd("SelectContent.RemoveScroll"),BR=x.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:y,...j}=e,m=Ao(wl,n),[b,N]=x.useState(null),[w,S]=x.useState(null),k=ct(t,de=>N(de)),[P,E]=x.useState(null),[_,F]=x.useState(null),A=Ev(n),[T,M]=x.useState(!1),O=x.useRef(!1);x.useEffect(()=>{if(b)return NR(b)},[b]),bR();const C=x.useCallback(de=>{const[ve,...ce]=A().map(z=>z.ref.current),[U]=ce.slice(-1),L=document.activeElement;for(const z of de)if(z===L||(z==null||z.scrollIntoView({block:"nearest"}),z===ve&&w&&(w.scrollTop=0),z===U&&w&&(w.scrollTop=w.scrollHeight),z==null||z.focus(),document.activeElement!==L))return},[A,w]),R=x.useCallback(()=>C([P,b]),[C,P,b]);x.useEffect(()=>{T&&R()},[T,R]);const{onOpenChange:I,triggerPointerDownPosRef:B}=m;x.useEffect(()=>{if(b){let de={x:0,y:0};const ve=U=>{var L,z;de={x:Math.abs(Math.round(U.pageX)-(((L=B.current)==null?void 0:L.x)??0)),y:Math.abs(Math.round(U.pageY)-(((z=B.current)==null?void 0:z.y)??0))}},ce=U=>{de.x<=10&&de.y<=10?U.preventDefault():b.contains(U.target)||I(!1),document.removeEventListener("pointermove",ve),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",ve),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ve),document.removeEventListener("pointerup",ce,{capture:!0})}}},[b,I,B]),x.useEffect(()=>{const de=()=>I(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[I]);const[H,Q]=rM(de=>{const ve=A().filter(L=>!L.disabled),ce=ve.find(L=>L.ref.current===document.activeElement),U=sM(ve,de,ce);U&&setTimeout(()=>U.ref.current.focus())}),D=x.useCallback((de,ve,ce)=>{const U=!O.current&&!ce;(m.value!==void 0&&m.value===ve||U)&&(E(de),U&&(O.current=!0))},[m.value]),te=x.useCallback(()=>b==null?void 0:b.focus(),[b]),V=x.useCallback((de,ve,ce)=>{const U=!O.current&&!ce;(m.value!==void 0&&m.value===ve||U)&&F(de)},[m.value]),J=s==="popper"?Aj:zR,me=J===Aj?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:y}:{};return r.jsx(LR,{scope:n,content:b,viewport:w,onViewportChange:S,itemRefCallback:D,selectedItem:P,onItemLeave:te,itemTextRefCallback:V,focusSelectedItem:R,selectedItemText:_,position:s,isPositioned:T,searchRef:H,children:r.jsx(FN,{as:_H,allowPinchZoom:!0,children:r.jsx(MN,{asChild:!0,trapped:m.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:$e(i,de=>{var ve;(ve=m.trigger)==null||ve.focus({preventScroll:!0}),de.preventDefault()}),children:r.jsx(Yh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:r.jsx(J,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:de=>de.preventDefault(),...j,...me,onPlaced:()=>M(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:$e(j.onKeyDown,de=>{const ve=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!ve&&de.key.length===1&&Q(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let U=A().filter(L=>!L.disabled).map(L=>L.ref.current);if(["ArrowUp","End"].includes(de.key)&&(U=U.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const L=de.target,z=U.indexOf(L);U=U.slice(z+1)}setTimeout(()=>C(U)),de.preventDefault()}})})})})})})});BR.displayName=OH;var IH="SelectItemAlignedPosition",zR=x.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...i}=e,a=Ao(wl,n),o=Po(wl,n),[l,c]=x.useState(null),[d,u]=x.useState(null),f=ct(t,k=>u(k)),h=Ev(n),p=x.useRef(!1),v=x.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:j,focusSelectedItem:m}=o,b=x.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&g&&y&&j){const k=a.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),E=a.valueNode.getBoundingClientRect(),_=j.getBoundingClientRect();if(a.dir!=="rtl"){const L=_.left-P.left,z=E.left-L,Ne=k.left-z,le=k.width+Ne,Ae=Math.max(le,P.width),Ke=window.innerWidth-Ps,Fe=Gf(z,[Ps,Math.max(Ps,Ke-Ae)]);l.style.minWidth=le+"px",l.style.left=Fe+"px"}else{const L=P.right-_.right,z=window.innerWidth-E.right-L,Ne=window.innerWidth-k.right-z,le=k.width+Ne,Ae=Math.max(le,P.width),Ke=window.innerWidth-Ps,Fe=Gf(z,[Ps,Math.max(Ps,Ke-Ae)]);l.style.minWidth=le+"px",l.style.right=Fe+"px"}const F=h(),A=window.innerHeight-Ps*2,T=g.scrollHeight,M=window.getComputedStyle(d),O=parseInt(M.borderTopWidth,10),C=parseInt(M.paddingTop,10),R=parseInt(M.borderBottomWidth,10),I=parseInt(M.paddingBottom,10),B=O+C+T+I+R,H=Math.min(y.offsetHeight*5,B),Q=window.getComputedStyle(g),D=parseInt(Q.paddingTop,10),te=parseInt(Q.paddingBottom,10),V=k.top+k.height/2-Ps,J=A-V,me=y.offsetHeight/2,de=y.offsetTop+me,ve=O+C+de,ce=B-ve;if(ve<=V){const L=F.length>0&&y===F[F.length-1].ref.current;l.style.bottom="0px";const z=d.clientHeight-g.offsetTop-g.offsetHeight,Ne=Math.max(J,me+(L?te:0)+z+R),le=ve+Ne;l.style.height=le+"px"}else{const L=F.length>0&&y===F[0].ref.current;l.style.top="0px";const Ne=Math.max(V,O+g.offsetTop+(L?D:0)+me)+ce;l.style.height=Ne+"px",g.scrollTop=ve-V+g.offsetTop}l.style.margin=`${Ps}px 0`,l.style.minHeight=H+"px",l.style.maxHeight=A+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[h,a.trigger,a.valueNode,l,d,g,y,j,a.dir,s]);Xn(()=>b(),[b]);const[N,w]=x.useState();Xn(()=>{d&&w(window.getComputedStyle(d).zIndex)},[d]);const S=x.useCallback(k=>{k&&v.current===!0&&(b(),m==null||m(),v.current=!1)},[b,m]);return r.jsx(MH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:S,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:r.jsx(He.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});zR.displayName=IH;var RH="SelectPopperPosition",Aj=x.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:i=Ps,...a}=e,o=Tv(n);return r.jsx(E5,{...o,...a,ref:t,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Aj.displayName=RH;var[MH,$N]=Yd(wl,{}),Pj="SelectViewport",qR=x.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...i}=e,a=Po(Pj,n),o=$N(Pj,n),l=ct(t,a.onViewportChange),c=x.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Pv.Slot,{scope:n,children:r.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:$e(i.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const p=Math.abs(c.current-u.scrollTop);if(p>0){const v=window.innerHeight-Ps*2,g=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),j=Math.max(g,y);if(j<v){const m=j+p,b=Math.min(v,m),N=m-b;f.style.height=b+"px",f.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});qR.displayName=Pj;var UR="SelectGroup",[FH,$H]=Yd(UR),DH=x.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=Xi();return r.jsx(FH,{scope:n,id:i,children:r.jsx(He.div,{role:"group","aria-labelledby":i,...s,ref:t})})});DH.displayName=UR;var VR="SelectLabel",WR=x.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=$H(VR,n);return r.jsx(He.div,{id:i.id,...s,ref:t})});WR.displayName=VR;var Eg="SelectItem",[LH,HR]=Yd(Eg),KR=x.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:i=!1,textValue:a,...o}=e,l=Ao(Eg,n),c=Po(Eg,n),d=l.value===s,[u,f]=x.useState(a??""),[h,p]=x.useState(!1),v=ct(t,m=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,m,s,i)}),g=Xi(),y=x.useRef("touch"),j=()=>{i||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(LH,{scope:n,value:s,disabled:i,textId:g,isSelected:d,onItemTextChange:x.useCallback(m=>{f(b=>b||((m==null?void 0:m.textContent)??"").trim())},[]),children:r.jsx(Pv.ItemSlot,{scope:n,value:s,disabled:i,textValue:u,children:r.jsx(He.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:$e(o.onFocus,()=>p(!0)),onBlur:$e(o.onBlur,()=>p(!1)),onClick:$e(o.onClick,()=>{y.current!=="mouse"&&j()}),onPointerUp:$e(o.onPointerUp,()=>{y.current==="mouse"&&j()}),onPointerDown:$e(o.onPointerDown,m=>{y.current=m.pointerType}),onPointerMove:$e(o.onPointerMove,m=>{var b;y.current=m.pointerType,i?(b=c.onItemLeave)==null||b.call(c):y.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(o.onPointerLeave,m=>{var b;m.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:$e(o.onKeyDown,m=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&m.key===" "||(SH.includes(m.key)&&j(),m.key===" "&&m.preventDefault())})})})})});KR.displayName=Eg;var Vu="SelectItemText",GR=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,...a}=e,o=Ao(Vu,n),l=Po(Vu,n),c=HR(Vu,n),d=PH(Vu,n),[u,f]=x.useState(null),h=ct(t,j=>f(j),c.onItemTextChange,j=>{var m;return(m=l.itemTextRefCallback)==null?void 0:m.call(l,j,c.value,c.disabled)}),p=u==null?void 0:u.textContent,v=x.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=d;return Xn(()=>(g(v),()=>y(v)),[g,y,v]),r.jsxs(r.Fragment,{children:[r.jsx(He.span,{id:c.textId,...a,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ol.createPortal(a.children,o.valueNode):null]})});GR.displayName=Vu;var YR="SelectItemIndicator",QR=x.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return HR(YR,n).isSelected?r.jsx(He.span,{"aria-hidden":!0,...s,ref:t}):null});QR.displayName=YR;var Ej="SelectScrollUpButton",JR=x.forwardRef((e,t)=>{const n=Po(Ej,e.__scopeSelect),s=$N(Ej,e.__scopeSelect),[i,a]=x.useState(!1),o=ct(t,s.onScrollButtonChange);return Xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(ZR,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});JR.displayName=Ej;var Tj="SelectScrollDownButton",XR=x.forwardRef((e,t)=>{const n=Po(Tj,e.__scopeSelect),s=$N(Tj,e.__scopeSelect),[i,a]=x.useState(!1),o=ct(t,s.onScrollButtonChange);return Xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(ZR,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});XR.displayName=Tj;var ZR=x.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...i}=e,a=Po("SelectScrollButton",n),o=x.useRef(null),l=Ev(n),c=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),Xn(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),r.jsx(He.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:$e(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:$e(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:$e(i.onPointerLeave,()=>{c()})})}),BH="SelectSeparator",eM=x.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(He.div,{"aria-hidden":!0,...s,ref:t})});eM.displayName=BH;var Oj="SelectArrow",zH=x.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=Tv(n),a=Ao(Oj,n),o=Po(Oj,n);return a.open&&o.position==="popper"?r.jsx(T5,{...i,...s,ref:t}):null});zH.displayName=Oj;function tM(e){return e===""||e===void 0}var nM=x.forwardRef((e,t)=>{const{value:n,...s}=e,i=x.useRef(null),a=ct(t,i),o=Cv(n);return x.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&u){const f=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(f)}},[o,n]),r.jsx(Qh,{asChild:!0,children:r.jsx("select",{...s,ref:a,defaultValue:n})})});nM.displayName="BubbleSelect";function rM(e){const t=yn(e),n=x.useRef(""),s=x.useRef(0),i=x.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=x.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,i,a]}function sM(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=qH(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function qH(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var UH=OR,iM=IR,VH=MR,WH=FR,HH=$R,aM=DR,KH=qR,oM=WR,lM=KR,GH=GR,YH=QR,cM=JR,dM=XR,uM=eM;const et=UH,tt=VH,Xe=x.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(iM,{ref:s,className:Ce("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(WH,{asChild:!0,children:r.jsx(ji,{className:"h-4 w-4 opacity-50"})})]}));Xe.displayName=iM.displayName;const fM=x.forwardRef(({className:e,...t},n)=>r.jsx(cM,{ref:n,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(fN,{className:"h-4 w-4"})}));fM.displayName=cM.displayName;const hM=x.forwardRef(({className:e,...t},n)=>r.jsx(dM,{ref:n,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(ji,{className:"h-4 w-4"})}));hM.displayName=dM.displayName;const Ze=x.forwardRef(({className:e,children:t,position:n="popper",...s},i)=>r.jsx(HH,{children:r.jsxs(aM,{ref:i,className:Ce("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(fM,{}),r.jsx(KH,{className:Ce("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(hM,{})]})}));Ze.displayName=aM.displayName;const QH=x.forwardRef(({className:e,...t},n)=>r.jsx(oM,{ref:n,className:Ce("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));QH.displayName=oM.displayName;const ne=x.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(lM,{ref:s,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(YH,{children:r.jsx(Kn,{className:"h-4 w-4"})})}),r.jsx(GH,{children:t})]}));ne.displayName=lM.displayName;const JH=x.forwardRef(({className:e,...t},n)=>r.jsx(uM,{ref:n,className:Ce("-mx-1 my-1 h-px bg-muted",e),...t}));JH.displayName=uM.displayName;function XH(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState(1),[i,a]=x.useState(!1),[o,l]=x.useState({displayName:"",beltLevel:"",style:"",struggleAreaCategory:"",heightFeet:"",heightInches:"",weight:"",age:""}),c=()=>{const h=parseInt(o.heightFeet)||0,p=parseInt(o.heightInches)||0;if(!(h===0&&p===0))return String(h*12+p)},d=[{value:"guard_passing",label:"Guard Passing"},{value:"guard_retention",label:"Guard Retention"},{value:"submissions",label:"Submissions from Top"},{value:"escapes",label:"Escapes from Bottom"},{value:"takedowns",label:"Takedowns"},{value:"transitions",label:"Position Transitions"},{value:"other",label:"Other"}],u=async()=>{a(!0);try{await lt("PATCH","/api/auth/profile",{displayName:o.displayName,beltLevel:o.beltLevel,style:o.style,struggleAreaCategory:o.struggleAreaCategory,height:c(),weight:o.weight,age:o.age,onboardingCompleted:!0}),await _e.invalidateQueries({queryKey:["/api/auth/me"]}),t({title:"Profile Complete!",description:"Professor OS is ready to coach you."}),e(zt()?"/ios-home":"/chat")}catch{t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}finally{a(!1)}},f=()=>{switch(n){case 1:return o.displayName.trim().length>0;case 2:return o.beltLevel.length>0;case 3:return o.style.length>0;case 4:return o.struggleAreaCategory.length>0;case 5:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-6",children:r.jsx(G,{className:"w-full max-w-xl border-primary/20 shadow-2xl",children:r.jsxs(ee,{className:"p-8 md:p-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Step ",n," of 5"]}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(n/5*100),"%"]})]}),r.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-purple-600 transition-all duration-300",style:{width:`${n/5*100}%`}})})]}),n===1&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"What's your name?"}),r.jsx("p",{className:"text-muted-foreground",children:"This helps Professor OS address you personally"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"name",children:"First Name"}),r.jsx(je,{id:"name",type:"text",placeholder:"Enter your first name",value:o.displayName,onChange:h=>l({...o,displayName:h.target.value}),onKeyPress:h=>h.key==="Enter"&&f()&&s(2),autoFocus:!0,className:"text-lg h-12","data-testid":"input-name"})]}),r.jsxs(Z,{size:"lg",onClick:()=>s(2),disabled:!f(),className:"w-full","data-testid":"button-next-step-1",children:["Next ",r.jsx(nb,{className:"ml-2 h-5 w-5"})]})]}),n===2&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"What's your belt level?"}),r.jsx("p",{className:"text-muted-foreground",children:"Helps us match techniques to your skill level"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"white",label:"White",color:"bg-white text-black hover:bg-gray-100"},{value:"blue",label:"Blue",color:"bg-blue-600 text-white hover:bg-blue-700"},{value:"purple",label:"Purple",color:"bg-purple-600 text-white hover:bg-purple-700"},{value:"brown",label:"Brown",color:"bg-amber-800 text-white hover:bg-amber-900"},{value:"black",label:"Black",color:"bg-black text-white hover:bg-gray-900 border-2 border-white/20"}].map(h=>r.jsx(Z,{variant:o.beltLevel===h.value?"default":"outline",size:"lg",onClick:()=>{l({...o,beltLevel:h.value}),setTimeout(()=>s(3),200)},className:`h-20 text-lg font-bold ${o.beltLevel===h.value?"ring-2 ring-primary ring-offset-2":h.color}`,"data-testid":`button-belt-${h.value}`,children:h.label},h.value))}),r.jsxs(Z,{variant:"ghost",onClick:()=>s(1),className:"w-full","data-testid":"button-back-step-2",children:[r.jsx(Gn,{className:"mr-2 h-5 w-5"})," Back"]})]}),n===3&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"How do you train?"}),r.jsx("p",{className:"text-muted-foreground",children:"We'll prioritize relevant content for you"})]}),r.jsx("div",{className:"space-y-3",children:[{value:"gi",label:"Gi Only",desc:"Traditional BJJ with the kimono"},{value:"nogi",label:"No-Gi Only",desc:"Grappling without the gi"},{value:"both",label:"Both Gi & No-Gi",desc:"I train in both styles"}].map(h=>r.jsxs(Z,{variant:o.style===h.value?"default":"outline",size:"lg",onClick:()=>{l({...o,style:h.value}),setTimeout(()=>s(4),200)},className:`w-full h-auto py-4 flex flex-col items-start ${o.style===h.value?"ring-2 ring-primary ring-offset-2":""}`,"data-testid":`button-style-${h.value}`,children:[r.jsx("span",{className:"text-lg font-semibold",children:h.label}),r.jsx("span",{className:"text-sm text-muted-foreground",children:h.desc})]},h.value))}),r.jsxs(Z,{variant:"ghost",onClick:()=>s(2),className:"w-full","data-testid":"button-back-step-3",children:[r.jsx(Gn,{className:"mr-2 h-5 w-5"})," Back"]})]}),n===4&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"What's your biggest struggle?"}),r.jsx("p",{className:"text-muted-foreground",children:"Professor OS will focus on helping you improve here"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"struggle",children:"Select your main challenge"}),r.jsxs(et,{value:o.struggleAreaCategory,onValueChange:h=>l({...o,struggleAreaCategory:h}),children:[r.jsx(Xe,{className:"h-12 text-lg","data-testid":"select-struggle",children:r.jsx(tt,{placeholder:"Choose your biggest struggle..."})}),r.jsx(Ze,{children:d.map(h=>r.jsx(ne,{value:h.value,"data-testid":`option-struggle-${h.value}`,children:h.label},h.value))})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Z,{size:"lg",onClick:()=>s(5),disabled:!f(),className:"w-full","data-testid":"button-next-step-4",children:["Next ",r.jsx(nb,{className:"ml-2 h-5 w-5"})]}),r.jsxs(Z,{variant:"ghost",onClick:()=>s(3),className:"w-full","data-testid":"button-back-step-4",children:[r.jsx(Gn,{className:"mr-2 h-5 w-5"})," Back"]})]})]}),n===5&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Help us personalize more"}),r.jsx("p",{className:"text-muted-foreground",children:"Optional - but helps Professor OS give better advice"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Height (optional)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(je,{id:"height-feet",type:"number",min:"0",max:"8",placeholder:"5",value:o.heightFeet,onChange:h=>l({...o,heightFeet:h.target.value}),className:"h-11","data-testid":"input-height-feet"})}),r.jsx("span",{className:"text-muted-foreground font-medium",children:"ft"}),r.jsx("div",{className:"flex-1",children:r.jsx(je,{id:"height-inches",type:"number",min:"0",max:"11",placeholder:"10",value:o.heightInches,onChange:h=>l({...o,heightInches:h.target.value}),className:"h-11","data-testid":"input-height-inches"})}),r.jsx("span",{className:"text-muted-foreground font-medium",children:"in"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"weight",children:"Weight (optional)"}),r.jsx(je,{id:"weight",type:"text",placeholder:"e.g., 170 lbs or 77kg",value:o.weight,onChange:h=>l({...o,weight:h.target.value}),className:"h-11","data-testid":"input-weight"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"age",children:"Age (optional)"}),r.jsx(je,{id:"age",type:"text",placeholder:"e.g., 32",value:o.age,onChange:h=>l({...o,age:h.target.value}),className:"h-11","data-testid":"input-age"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Z,{size:"lg",onClick:u,disabled:i,className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90","data-testid":"button-complete-onboarding",children:[i?"Saving...":"Complete Setup"," ",r.jsx(nb,{className:"ml-2 h-5 w-5"})]}),r.jsx(Z,{variant:"ghost",onClick:u,disabled:i,className:"w-full","data-testid":"button-skip-optional",children:"Skip optional details"}),r.jsxs(Z,{variant:"ghost",onClick:()=>s(4),disabled:i,className:"w-full","data-testid":"button-back-step-5",children:[r.jsx(Gn,{className:"mr-2 h-5 w-5"})," Back"]})]})]})]})})})}function ZH(){const[,e]=it(),[t,n]=x.useState("loading"),[s,i]=x.useState("");return x.useEffect(()=>{(async()=>{try{const l=new URLSearchParams(window.location.search).get("token");if(!l){n("error"),i("Invalid magic link - no token provided");return}const c=await fetch(`/api/auth/magic/verify?token=${l}`),d=await c.json();if(!c.ok){n("error"),i(d.error||"Magic link verification failed");return}localStorage.setItem("token",d.token),n("success"),i("Welcome! Redirecting to your dashboard..."),setTimeout(()=>{e("/chat")},2e3)}catch(o){console.error("Magic link error:",o),n("error"),i("Something went wrong. Please try again or contact support.")}})()},[e]),r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:r.jsx(G,{className:"w-full max-w-md p-8",children:r.jsxs("div",{className:"text-center space-y-6",children:[t==="loading"&&r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-16 h-16 mx-auto animate-spin text-purple-600"}),r.jsx("h2",{className:"text-2xl font-bold",children:"Verifying Your Access..."}),r.jsx("p",{className:"text-muted-foreground",children:"Please wait while we set up your account"})]}),t==="success"&&r.jsxs(r.Fragment,{children:[r.jsx(Qs,{className:"w-16 h-16 mx-auto text-green-600"}),r.jsx("h2",{className:"text-2xl font-bold text-green-600",children:"Access Granted!"}),r.jsx("p",{className:"text-muted-foreground",children:s}),r.jsx("div",{className:"animate-pulse text-sm text-muted-foreground",children:"Redirecting to Prof. OS..."})]}),t==="error"&&r.jsxs(r.Fragment,{children:[r.jsx(wi,{className:"w-16 h-16 mx-auto text-red-600"}),r.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground",children:s}),r.jsxs("div",{className:"space-y-2 pt-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Possible reasons:"}),r.jsxs("ul",{className:"text-sm text-muted-foreground text-left list-disc list-inside space-y-1",children:[r.jsx("li",{children:"Link already used"}),r.jsx("li",{children:"Link expired (7 days max)"}),r.jsx("li",{children:"Invalid or corrupted link"})]}),r.jsx(Z,{onClick:()=>e("/"),variant:"outline",className:"mt-4","data-testid":"button-go-home",children:"Go to Homepage"})]})]})]})})})}var DN="Checkbox",[eK,nSe]=Mr(DN),[tK,nK]=eK(DN),mM=x.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...f}=e,[h,p]=x.useState(null),v=ct(t,N=>p(N)),g=x.useRef(!1),y=h?u||!!h.closest("form"):!0,[j=!1,m]=bi({prop:i,defaultProp:a,onChange:d}),b=x.useRef(j);return x.useEffect(()=>{const N=h==null?void 0:h.form;if(N){const w=()=>m(b.current);return N.addEventListener("reset",w),()=>N.removeEventListener("reset",w)}},[h,m]),r.jsxs(tK,{scope:n,state:j,disabled:l,children:[r.jsx(He.button,{type:"button",role:"checkbox","aria-checked":co(j)?"mixed":j,"aria-required":o,"data-state":xM(j),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onKeyDown:$e(e.onKeyDown,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:$e(e.onClick,N=>{m(w=>co(w)?!0:!w),y&&(g.current=N.isPropagationStopped(),g.current||N.stopPropagation())})}),y&&r.jsx(rK,{control:h,bubbles:!g.current,name:s,value:c,checked:j,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:co(a)?!1:a})]})});mM.displayName=DN;var pM="CheckboxIndicator",gM=x.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...i}=e,a=nK(pM,n);return r.jsx(vs,{present:s||co(a.state)||a.state===!0,children:r.jsx(He.span,{"data-state":xM(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});gM.displayName=pM;var rK=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:i,...a}=e,o=x.useRef(null),l=Cv(n),c=xv(t);x.useEffect(()=>{const u=o.current,f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&p){const v=new Event("click",{bubbles:s});u.indeterminate=co(n),p.call(u,co(n)?!1:n),u.dispatchEvent(v)}},[l,n,s]);const d=x.useRef(co(n)?!1:n);return r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function co(e){return e==="indeterminate"}function xM(e){return co(e)?"indeterminate":e?"checked":"unchecked"}var vM=mM,sK=gM;const Vs=x.forwardRef(({className:e,...t},n)=>r.jsx(vM,{ref:n,className:Ce("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(sK,{className:Ce("flex items-center justify-center text-current"),children:r.jsx(Kn,{className:"h-4 w-4"})})}));Vs.displayName=vM.displayName;function iK(e,t){console.log(" [setAdminAuth] Setting admin authentication"),console.log("[setAdminAuth] Token length:",(e==null?void 0:e.length)||0),console.log("[setAdminAuth] ExpiresIn:",t),localStorage.setItem("adminToken",e);const n=aK(t),s=Date.now()+n;console.log("[setAdminAuth] Expiration time:",new Date(s).toLocaleString()),localStorage.setItem("adminTokenExpiration",s.toString()),console.log(" [setAdminAuth] Token and expiration saved to localStorage")}function aK(e){const t=e.match(/^(\d+)([dhms])$/);if(!t)return 7*24*60*60*1e3;const n=parseInt(t[1],10);switch(t[2]){case"d":return n*24*60*60*1e3;case"h":return n*60*60*1e3;case"m":return n*60*1e3;case"s":return n*1e3;default:return 7*24*60*60*1e3}}function oK(){localStorage.removeItem("adminToken"),localStorage.removeItem("adminTokenExpiration"),localStorage.removeItem("adminUser")}async function Ie(e,t="GET",n){const i={method:t,headers:{"Content-Type":"application/json"},credentials:"include"};n&&t!=="GET"&&(i.body=JSON.stringify(n));const a=await fetch(e,i);if(a.status===401||a.status===403)throw window.location.href="/admin/login",new Error("Session expired - please login again");if(!a.ok){const o=await a.json();throw new Error(o.error||`Request failed with status ${a.status}`)}return a.json()}function lK(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState(""),[i,a]=x.useState(!1),o=qe({mutationFn:async c=>{const d=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});if(!d.ok){const u=await d.json();throw new Error(u.error||"Login failed")}return await d.json()},onSuccess:c=>{console.log(" [ADMIN LOGIN] Login successful, session cookie set"),c.token&&iK(c.token,c.expiresIn||"24h"),c.admin&&localStorage.setItem("adminUser",JSON.stringify(c.admin)),t({title:"Login Successful",description:"Welcome back! Session valid for 24 hours."}),console.log(" [ADMIN LOGIN] Redirecting to /admin/dashboard..."),e("/admin/dashboard")},onError:c=>{t({title:"Login Failed",description:c.message||"Invalid credentials",variant:"destructive"})}}),l=c=>{if(c.preventDefault(),!n){t({title:"Missing Information",description:"Please enter your admin password",variant:"destructive"});return}o.mutate({password:n,rememberMe:i})};return r.jsx("div",{className:"page-container min-h-screen flex items-center justify-center p-4",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsxs(re,{className:"space-y-1 flex flex-col items-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #2563EB 0%, #7C3AED 100%)"},children:r.jsx(Ni,{className:"w-8 h-8 text-white"})}),r.jsx(se,{className:"text-2xl font-bold text-center",children:"BJJ OS Admin"}),r.jsx(ze,{className:"text-center",children:"Sign in to access the admin dashboard"})]}),r.jsxs(ee,{children:[r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"password",children:"Admin Password"}),r.jsx(je,{id:"password",type:"password",placeholder:"",value:n,onChange:c=>s(c.target.value),required:!0,autoFocus:!0,"data-testid":"input-admin-password"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vs,{id:"rememberMe",checked:i,onCheckedChange:c=>a(c===!0),"data-testid":"checkbox-remember-me"}),r.jsx(fe,{htmlFor:"rememberMe",className:"text-sm font-normal cursor-pointer",children:"Remember me for 30 days"})]}),r.jsx(Z,{type:"submit",className:"w-full",disabled:o.isPending,"data-testid":"button-admin-login",children:o.isPending?"Signing in...":"Sign In"})]}),r.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[r.jsx(pi,{className:"w-4 h-4"}),r.jsx("span",{children:"Admin access only  All actions are logged"})]})]})]})})}function cK(){const[e,t]=x.useState(!0),{data:n,isLoading:s,isError:i,error:a,refetch:o}=pe({queryKey:["/api/admin/activity-24h"],queryFn:async()=>await Ie("/api/admin/activity-24h","GET"),refetchInterval:e?6e4:!1});if(x.useEffect(()=>{o()},[o]),i)return r.jsx(G,{className:"border-destructive",children:r.jsxs(ee,{className:"py-12 text-center",children:[r.jsx(lr,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Failed to Load Activity Data"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:a instanceof Error?a.message:"Unknown error occurred"}),r.jsx(Z,{onClick:()=>o(),variant:"outline",children:"Try Again"})]})});if(s)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold",children:" Last 24 Hours Activity"}),r.jsx(ae,{variant:"secondary",children:"Loading..."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(c=>r.jsxs(G,{className:"animate-pulse",children:[r.jsx(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx("div",{className:"h-4 bg-muted rounded w-24"})}),r.jsx(ee,{children:r.jsx("div",{className:"h-8 bg-muted rounded w-16"})})]},c))})]});if(!n)return r.jsx(G,{children:r.jsx(ee,{className:"py-12 text-center",children:r.jsx("p",{className:"text-muted-foreground",children:"No activity data available"})})});const l=({title:c,value:d,icon:u,trend:f,subtitle:h})=>r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:c}),r.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold",children:d}),h&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h}),f&&r.jsxs("div",{className:`flex items-center text-xs mt-1 ${f.isPositive?"text-green-500":"text-red-500"}`,children:[f.isPositive?"":""," ",Math.abs(f.value),"%"]})]})]});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold","data-testid":"text-activity-dashboard-title",children:" Last 24 Hours Activity"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Real-time monitoring for beta launch"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ae,{variant:e?"default":"secondary",className:"cursor-pointer",onClick:()=>t(!e),"data-testid":"badge-auto-refresh",children:e?" Auto-refresh ON":" Auto-refresh OFF"}),r.jsxs(ae,{variant:"outline","data-testid":"badge-last-updated",children:["Updated ",new Date().toLocaleTimeString()]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Mn,{className:"w-5 h-5"}),"User Activity"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(l,{title:"Total Queries",value:n.userActivity.totalQueries,icon:sd,subtitle:"Questions asked"}),r.jsx(l,{title:"Unique Users",value:n.userActivity.uniqueUsers,icon:Mn,subtitle:"Active users"}),r.jsx(l,{title:"New Signups",value:n.userActivity.newSignups,icon:jn,subtitle:"First-time users"}),r.jsx(l,{title:"Returning Users",value:n.userActivity.returningUsers,icon:Ds,subtitle:"Came back"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Ji,{className:"w-5 h-5"}),"Engagement"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(l,{title:"Videos Clicked",value:n.engagement.videosClicked,icon:Ji,subtitle:"Recommendations clicked"}),r.jsx(l,{title:"Videos Watched",value:n.engagement.videosWatched,icon:Ji,subtitle:">30 seconds"}),r.jsx(l,{title:"Avg Watch Time",value:`${n.engagement.avgWatchDuration}s`,icon:Kr,subtitle:"Per video"}),r.jsx(l,{title:"Completion Rate",value:`${n.engagement.completionRate}%`,icon:jn,subtitle:"Clicked  Watched"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(qf,{className:"w-5 h-5"}),"System Health"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(l,{title:"Multi-Agent",value:`${n.systemHealth.multiAgentPercentage}%`,icon:qf,subtitle:`${n.systemHealth.multiAgentQueries} queries`}),r.jsx(l,{title:"Avg Response",value:`${n.systemHealth.avgResponseTime}ms`,icon:Kr,subtitle:"AI response time"}),r.jsx(l,{title:"Error Rate",value:`${n.systemHealth.errorRate}%`,icon:lr,subtitle:"Failed queries"}),r.jsx(l,{title:"Basic Algorithm",value:n.systemHealth.basicQueries,icon:Ds,subtitle:"Legacy queries"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Qi,{className:"w-5 h-5"}),"User Feedback"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(l,{title:"Satisfaction",value:`${n.userFeedback.satisfactionRate}%`,icon:Qi,subtitle:`${n.userFeedback.totalFeedback} ratings`}),r.jsx(l,{title:"Thumbs Up",value:n.userFeedback.thumbsUp,icon:Qi,subtitle:"Positive feedback"}),r.jsx(l,{title:"Thumbs Down",value:n.userFeedback.thumbsDown,icon:pq,subtitle:"Negative feedback"}),r.jsx(l,{title:"Total Feedback",value:n.userFeedback.totalFeedback,icon:sd,subtitle:"All ratings"})]})]})]}),n.contentPerformance.mostRecommendedVideos.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:" Most Recommended Videos (Top 5)"}),r.jsx(G,{children:r.jsx(ee,{className:"p-0",children:r.jsx("div",{className:"divide-y",children:n.contentPerformance.mostRecommendedVideos.map((c,d)=>r.jsxs("div",{className:"p-4 flex items-center justify-between hover-elevate",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsxs(ae,{variant:"secondary",className:"font-bold",children:["#",d+1]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium truncate",children:c.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:c.instructor})]})]}),r.jsxs(ae,{variant:"default",children:[c.recommendCount," recommendations"]})]},c.videoId))})})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:" Recent Activity (Last 20 Queries)"}),r.jsx(G,{children:r.jsx(ee,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-muted/50",children:r.jsxs("tr",{className:"text-left text-sm",children:[r.jsx("th",{className:"p-3 font-medium",children:"Time"}),r.jsx("th",{className:"p-3 font-medium",children:"User"}),r.jsx("th",{className:"p-3 font-medium",children:"Question"}),r.jsx("th",{className:"p-3 font-medium text-center",children:"Videos"}),r.jsx("th",{className:"p-3 font-medium text-center",children:"System"}),r.jsx("th",{className:"p-3 font-medium text-center",children:"Response"})]})}),r.jsx("tbody",{className:"divide-y",children:n.recentActivity.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"p-8 text-center text-muted-foreground",children:"No recent activity"})}):n.recentActivity.map((c,d)=>r.jsxs("tr",{className:"hover-elevate",children:[r.jsx("td",{className:"p-3 text-sm",children:new Date(c.timestamp).toLocaleTimeString()}),r.jsx("td",{className:"p-3 text-sm font-mono",children:c.userAnonymized}),r.jsx("td",{className:"p-3 text-sm max-w-md truncate",title:c.question||"No question recorded",children:c.question||r.jsx("span",{className:"text-muted-foreground italic",children:"No question recorded"})}),r.jsx("td",{className:"p-3 text-center",children:r.jsx(ae,{variant:"secondary",children:c.videosRecommended})}),r.jsx("td",{className:"p-3 text-center",children:r.jsx(ae,{variant:c.multiAgent?"default":"outline",children:c.multiAgent?" Multi":"Basic"})}),r.jsx("td",{className:"p-3 text-center text-sm",children:c.responseTime?`${c.responseTime}ms`:"-"})]},d))})]})})})})]})]})}function Qt({children:e}){const[,t]=it(),{toast:n}=Je(),[s,i]=x.useState(!1),a=async()=>{oK();try{await fetch("/api/admin/logout",{method:"POST",credentials:"include"})}catch{}n({title:"Logged Out",description:"You have been securely logged out"}),t("/admin/login")},o=()=>i(!1);return r.jsxs("div",{className:"flex h-screen bg-background page-container",children:[r.jsx("button",{className:"fixed top-5 left-5 w-14 h-14 rounded-full bg-gradient-to-br from-primary to-purple-600 text-white border-none shadow-lg z-[1000] flex items-center justify-center transition-transform active:scale-95 lg:hidden",onClick:()=>i(!s),"aria-label":"Menu","data-testid":"button-floating-menu",children:s?r.jsx(ys,{className:"w-6 h-6"}):r.jsx(cq,{className:"w-6 h-6"})}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-[998] lg:hidden",onClick:o,"data-testid":"overlay-menu"}),r.jsx("aside",{className:`fixed inset-y-0 left-0 z-[999] w-[280px] bg-card border-r transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:z-auto ${s?"translate-x-0":"-translate-x-full"}`,children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"p-6 border-b",style:{marginTop:"80px"},children:r.jsxs("div",{className:"flex flex-col items-start gap-2",children:[r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ/OS",className:"h-8 w-auto"}),r.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Admin Dashboard"})]})}),r.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1",children:[r.jsx(dr,{href:"/admin/dashboard",icon:r.jsx(rq,{}),label:"Dashboard",onClick:o}),r.jsx(dr,{href:"/admin/command-center",icon:r.jsx(qf,{}),label:"Command Center",onClick:o}),r.jsx(dr,{href:"/admin/videos",icon:r.jsx(Ji,{}),label:"Videos",onClick:o}),r.jsx(dr,{href:"/admin/users",icon:r.jsx(Mn,{}),label:"Users",onClick:o}),r.jsx(dr,{href:"/admin/analytics",icon:r.jsx(cj,{}),label:"Analytics",onClick:o}),r.jsx(dr,{href:"/admin/lifetime-access",icon:r.jsx(qn,{}),label:"Lifetime Access",onClick:o}),r.jsx(dr,{href:"/admin/referrals",icon:r.jsx(Lf,{}),label:"Referrals",onClick:o}),r.jsx(dr,{href:"/admin/feedback",icon:r.jsx(Qi,{}),label:"Feedback",onClick:o}),r.jsx(dr,{href:"/admin/chat",icon:r.jsx(sd,{}),label:"Chat",onClick:o}),r.jsx(dr,{href:"/admin/techniques",icon:r.jsx(oo,{}),label:"Techniques",onClick:o}),r.jsx(dr,{href:"/admin/chains",icon:r.jsx(HI,{}),label:"Chains",onClick:o}),r.jsx(dr,{href:"/admin/instructors",icon:r.jsx(Mn,{}),label:"Instructors",onClick:o}),r.jsx(dr,{href:"/admin/partnerships",icon:r.jsx(UI,{}),label:"Partnerships",onClick:o}),r.jsx(dr,{href:"/admin/meta",icon:r.jsx(Df,{}),label:"Meta",onClick:o}),r.jsx(dr,{href:"/admin/flagged-accounts",icon:r.jsx(Ni,{}),label:"Flagged Accounts",onClick:o})]}),r.jsx("div",{className:"p-4 border-t",children:r.jsxs(Z,{variant:"ghost",className:"w-full justify-start",onClick:a,"data-testid":"button-logout",children:[r.jsx(Vd,{className:"w-5 h-5 mr-3"}),"Logout"]})})]})}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("header",{className:"hidden lg:flex items-center gap-4 p-4 border-b bg-card",children:r.jsx("div",{className:"flex-1",children:r.jsx("h1",{className:"text-xl font-semibold",children:"Admin Dashboard"})})}),r.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",style:{paddingTop:"80px"},children:e})]})]})}function dr({href:e,icon:t,label:n,onClick:s}){const[i]=it(),a=i===e;return r.jsxs(sn,{href:e,onClick:s,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors min-h-[44px] ${a?"bg-primary text-primary-foreground":"hover:bg-muted text-muted-foreground hover:text-foreground active:bg-muted/80"}`,"data-testid":`nav-${n.toLowerCase().replace(" ","-")}`,children:[r.jsx("span",{className:"w-5 h-5",children:t}),r.jsx("span",{className:"font-medium text-base",children:n})]})}function Wm(e){return e.curationStatus==="active"||e.curationRunning?{text:" Active",color:"text-green-500"}:e.curationStatus==="scheduled"?{text:" Scheduled",color:"text-yellow-500"}:e.curationStatus==="paused_target_reached"||e.targetReached?{text:" Target Reached",color:"text-blue-500"}:{text:" Offline",color:"text-red-500"}}function dK(){return r.jsxs(sn,{href:"/admin/command-center",className:"fixed bottom-6 right-6 bg-gradient-to-br from-primary to-purple-600 text-white px-6 py-4 rounded-full shadow-lg z-[900] flex items-center gap-2 text-base font-semibold transition-transform active:scale-95 hover:shadow-xl","data-testid":"fab-run-curation",children:[r.jsx(Rr,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Run Curation"})]})}function vb({title:e,icon:t,children:n,defaultExpanded:s=!1,testId:i}){const[a,o]=x.useState(s);return r.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden","data-testid":i,children:[r.jsxs("button",{onClick:()=>o(!a),className:"w-full px-6 py-4 flex items-center justify-between bg-muted/30 hover:bg-muted/50 transition-colors active:bg-muted/70 min-h-[56px]","data-testid":`${i}-toggle`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:t}),r.jsx("h3",{className:"text-lg font-semibold text-left",children:e})]}),a?r.jsx(ji,{className:"w-5 h-5 text-muted-foreground"}):r.jsx(Cn,{className:"w-5 h-5 text-muted-foreground"})]}),a&&r.jsx("div",{className:"p-6",children:n})]})}function uK({metrics:e,onRefresh:t}){const{toast:n}=Je(),[s,i]=x.useState(!1),a=e.totalVideos>0?Math.round(e.geminiAnalyzed/e.totalVideos*100):0,o=e.totalVideos-e.geminiAnalyzed,l=async()=>{if(!s){i(!0);try{const c=await fetch("/api/admin/analyze-all-videos",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to start analysis")}const d=await c.json();n({title:"Gemini Analysis Started",description:`Analyzing ${o} unanalyzed videos in background. This may take a while.`}),setTimeout(()=>t(),5e3)}catch(c){n({title:"Error",description:c.message||"Failed to start analysis",variant:"destructive"})}finally{i(!1)}}};return r.jsxs("div",{className:"bg-card rounded-lg border p-5",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Gemini Analyzed"}),r.jsxs("p",{className:"text-2xl font-bold","data-testid":"value-gemini-analyzed",children:[e.geminiAnalyzed," / ",e.totalVideos]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:`text-sm ${a<80?"text-yellow-500":"text-muted-foreground"}`,children:[a,"% complete"]}),o>0&&r.jsx(Z,{variant:"outline",size:"sm",onClick:l,disabled:s,className:"h-7 text-xs","data-testid":"button-analyze-all",children:s?r.jsxs(r.Fragment,{children:[r.jsx(wr,{className:"w-3 h-3 mr-1 animate-spin"}),"Starting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Rr,{className:"w-3 h-3 mr-1"}),"Analyze All"]})})]})]})}function nA(){const[e,t]=x.useState(!1),{data:n,isLoading:s,isError:i,error:a,refetch:o}=pe({queryKey:["/api/admin/quick-metrics"],queryFn:async()=>{const c=await fetch("/api/admin/quick-metrics",{credentials:"include",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(c.status===401)throw window.location.href="/admin/login",new Error("Authentication required");if(!c.ok){const d=await c.json().catch(()=>({}));throw new Error(d.error||`Failed to fetch metrics (${c.status})`)}return c.json()},refetchInterval:3e4,retry:2,retryDelay:1e3}),l=async()=>{t(!0);try{await o()}finally{t(!1)}};return i?r.jsx(Qt,{children:r.jsxs("div",{className:"text-center py-12 space-y-4",children:[r.jsx("p",{className:"text-destructive text-lg",children:"Failed to load dashboard metrics"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:a instanceof Error?a.message:"Unknown error"}),r.jsxs(Z,{onClick:()=>o(),variant:"outline","data-testid":"button-retry-metrics",children:[r.jsx(wr,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):s||!n?r.jsx(Qt,{children:r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading metrics..."})}):r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-4 pb-24",children:[r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold",children:"BJJ OS Dashboard"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time curation efficiency metrics"})]}),r.jsx(Z,{variant:"outline",size:"icon",onClick:l,disabled:e,className:"self-start sm:self-auto","data-testid":"button-refresh-dashboard",children:r.jsx(wr,{className:`w-4 h-4 ${e?"animate-spin":""}`})})]}),r.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(sn,{href:"/admin/videos",className:"bg-card rounded-lg border p-5 hover-elevate cursor-pointer","data-testid":"card-library",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Library"}),r.jsx("p",{className:"text-2xl font-bold","data-testid":"value-total-videos",children:n.totalVideos})]})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["+",n.videosToday," today"]})]}),r.jsx(uK,{metrics:n,onRefresh:l}),r.jsxs("div",{className:"bg-card rounded-lg border p-5",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Curation"}),r.jsx("p",{className:`text-2xl font-bold ${Wm(n).color}`,"data-testid":"value-curation-status",children:Wm(n).text})]})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:n.minutesSinceRun<999?`${n.minutesSinceRun}m ago`:"Never run"})]}),r.jsxs(sn,{href:"/admin/users",className:"bg-card rounded-lg border p-5 hover-elevate cursor-pointer","data-testid":"card-users",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Users"}),r.jsx("p",{className:"text-2xl font-bold","data-testid":"value-total-users",children:n.totalUsers})]})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.activeSubscriptions," subscriptions"]})]})]}),r.jsx(vb,{title:"Curation Efficiency (Today)",icon:"",defaultExpanded:!0,testId:"section-curation-efficiency",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"mb-4",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Today = ",new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"short",day:"numeric",year:"numeric"})," EST"]})}),r.jsxs("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-3 md:grid-cols-5",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Discovered"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold","data-testid":"value-discovered",children:n.curationEfficiency.discovered}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"From YouTube"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Analyzed"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-blue-500","data-testid":"value-analyzed",children:n.curationEfficiency.analyzed}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"AI processed"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Accepted"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-500","data-testid":"value-accepted",children:n.curationEfficiency.accepted}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"To library"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Rejected"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-red-500","data-testid":"value-rejected",children:n.curationEfficiency.rejected}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Quality check"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Skipped"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-500","data-testid":"value-skipped",children:n.curationEfficiency.skipped}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pre-filtered"})]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Acceptance Rate"}),r.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-primary","data-testid":"value-acceptance-rate",children:[n.curationEfficiency.acceptanceRate.toFixed(1),"%"]})]})]})}),r.jsx(vb,{title:"System Overview",icon:"",defaultExpanded:!1,testId:"section-system-overview",children:r.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Curation Pipeline"}),r.jsx("p",{className:`font-medium text-lg ${Wm(n).color}`,children:Wm(n).text})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Monthly Revenue"}),r.jsxs("p",{className:"font-medium text-lg",children:["$",n.mrr]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"New Users Today"}),r.jsx("p",{className:"font-medium text-lg",children:n.signedUpToday})]})]})}),r.jsx(vb,{title:"User Activity (24h)",icon:"",defaultExpanded:!0,testId:"section-activity",children:r.jsx(cK,{})}),r.jsx(dK,{})]})})}const Ci=x.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Ci.displayName="Textarea";const bt=x.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:Ce("w-full caption-bottom text-sm",e),...t})}));bt.displayName="Table";const jt=x.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:Ce("[&_tr]:border-b",e),...t}));jt.displayName="TableHeader";const wt=x.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:Ce("[&_tr:last-child]:border-0",e),...t}));wt.displayName="TableBody";const fK=x.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:Ce("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));fK.displayName="TableFooter";const ke=x.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:Ce("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ke.displayName="TableRow";const X=x.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:Ce("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));X.displayName="TableHead";const W=x.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:Ce("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));W.displayName="TableCell";const hK=x.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:Ce("mt-4 text-sm text-muted-foreground",e),...t}));hK.displayName="TableCaption";function mK(){const[e,t]=x.useState(!1),[n,s]=x.useState(""),[i,a]=x.useState(""),{toast:o}=Je(),l=qe({mutationFn:async N=>{const S=await(await lt("POST","/api/admin/login",{password:N})).json();return S.token&&localStorage.setItem("adminToken",S.token),S},onSuccess:()=>{t(!0),o({title:"Login successful"})},onError:()=>{o({title:"Invalid password",variant:"destructive"})}}),{data:c,isLoading:d,refetch:u}=pe({queryKey:["/api/admin/users"],queryFn:async()=>{const N=localStorage.getItem("adminToken"),w=await fetch("/api/admin/users?timeFilter=all&planFilter=all&statusFilter=all&beltFilter=all",{headers:{Authorization:`Bearer ${N}`}});if(!w.ok)throw new Error("Failed to fetch users");return w.json()},enabled:e}),f=qe({mutationFn:async N=>{const w=localStorage.getItem("adminToken"),S=await fetch("/api/admin/lifetime/grant-bulk",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},body:JSON.stringify({phoneNumbers:N,reason:"Beta Tester",notes:"Launch day beta test access"})});if(!S.ok)throw new Error("Failed to grant access");return S.json()},onSuccess:N=>{_e.invalidateQueries({queryKey:["/api/admin/users"]}),a(""),o({title:"Success!",description:`Granted lifetime access to ${N.granted} users`})},onError:N=>{o({title:"Error",description:N.message,variant:"destructive"})}}),h=N=>{N.preventDefault(),l.mutate(n)},p=()=>{const N=i.split(`
`).map(w=>w.trim()).filter(w=>w.length>0);if(N.length===0){o({title:"Error",description:"Please enter at least one phone number",variant:"destructive"});return}f.mutate(N)};if(!e)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsxs(re,{children:[r.jsx(se,{children:" Launch Day Admin"}),r.jsx(ze,{children:"BJJ OS Beta Testing Dashboard"})]}),r.jsx(ee,{children:r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"password",children:"Admin Password"}),r.jsx(je,{id:"password",type:"password",value:n,onChange:N=>s(N.target.value),placeholder:"Enter ADMIN_PASSWORD","data-testid":"input-admin-password"})]}),r.jsx(Z,{type:"submit",className:"w-full",disabled:l.isPending,"data-testid":"button-admin-login",children:l.isPending?"Logging in...":"Login"})]})})]})});const v=(c==null?void 0:c.length)||0,g=new Date;g.setHours(0,0,0,0);const y=(c==null?void 0:c.filter(N=>new Date(N.createdAt)>=g).length)||0,j=(c==null?void 0:c.filter(N=>N.subscriptionTier==="lifetime").length)||0,m=(c==null?void 0:c.filter(N=>N.onboardingCompleted).length)||0,b=(c==null?void 0:c.slice(0,20))||[];return r.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:" Launch Day Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"BJJ OS Beta Testing - Manual Admin"})]}),r.jsx(Z,{variant:"outline",size:"icon",onClick:()=>u(),"data-testid":"button-refresh",children:r.jsx(wr,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsx(re,{className:"pb-2",children:r.jsxs(se,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Mn,{className:"w-4 h-4"}),"Total Signups"]})}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-users",children:v})})]}),r.jsxs(G,{children:[r.jsx(re,{className:"pb-2",children:r.jsxs(se,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Kr,{className:"w-4 h-4"}),"Signups Today"]})}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-signups-today",children:y})})]}),r.jsxs(G,{children:[r.jsx(re,{className:"pb-2",children:r.jsxs(se,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),"Completed Onboarding"]})}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-active-users",children:m})})]}),r.jsxs(G,{children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Lifetime Access"})}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-lifetime-users",children:j})})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Bulk Grant Lifetime Access"}),r.jsx(ze,{children:"Paste phone numbers (one per line) to grant lifetime access to all beta testers"})]}),r.jsxs(ee,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"bulk-phones",children:"Phone Numbers (E.164 format: +1XXXXXXXXXX)"}),r.jsx(Ci,{id:"bulk-phones",value:i,onChange:N=>a(N.target.value),placeholder:`+15551234567
+15559876543
+15555555555`,className:"h-32 font-mono text-sm","data-testid":"textarea-bulk-phones"})]}),r.jsx(Z,{onClick:p,disabled:f.isPending||!i.trim(),"data-testid":"button-bulk-grant",children:f.isPending?"Granting Access...":"Grant All Lifetime Access"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Recent Signups (Last 20)"}),r.jsx(ze,{children:"Most recent users, newest first"})]}),r.jsx(ee,{children:d?r.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Phone Number"}),r.jsx(X,{children:"Signup Time"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Belt"}),r.jsx(X,{children:"Access"})]})}),r.jsx(wt,{children:b.length===0?r.jsx(ke,{children:r.jsx(W,{colSpan:5,className:"text-center text-muted-foreground",children:"No signups yet"})}):b.map(N=>r.jsxs(ke,{children:[r.jsx(W,{className:"font-mono text-sm",children:N.phoneNumber}),r.jsx(W,{className:"text-sm",children:new Date(N.createdAt).toLocaleString()}),r.jsx(W,{children:r.jsx(ae,{variant:N.onboardingCompleted?"default":"secondary",children:N.onboardingCompleted?"Completed":"Pending"})}),r.jsx(W,{className:"capitalize",children:N.beltLevel||"-"}),r.jsx(W,{children:r.jsx(ae,{variant:N.subscriptionTier==="lifetime"?"default":"outline",children:N.subscriptionTier==="lifetime"?"Lifetime":N.subscriptionStatus})})]},N.id))})]})})})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Quick SQL Queries"}),r.jsx(ze,{children:"Copy these to Replit Database  Query tab"})]}),r.jsxs(ee,{className:"space-y-3",children:[r.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-xs",children:[r.jsx("p",{className:"text-muted-foreground mb-1",children:"-- Grant lifetime access to one user"}),r.jsx("code",{children:"UPDATE bjj_users SET subscription_tier = 'lifetime', subscription_status = 'active' WHERE phone_number = '+15551234567';"})]}),r.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-xs",children:[r.jsx("p",{className:"text-muted-foreground mb-1",children:"-- View signups today"}),r.jsx("code",{children:"SELECT COUNT(*) FROM bjj_users WHERE created_at >= CURRENT_DATE;"})]}),r.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-xs",children:[r.jsx("p",{className:"text-muted-foreground mb-1",children:"-- Check active users (sent messages)"}),r.jsx("code",{children:"SELECT COUNT(DISTINCT user_id) FROM conversations WHERE created_at >= CURRENT_DATE;"})]})]})]})]})})}var LN="Switch",[pK,rSe]=Mr(LN),[gK,xK]=pK(LN),yM=x.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...f}=e,[h,p]=x.useState(null),v=ct(t,b=>p(b)),g=x.useRef(!1),y=h?u||!!h.closest("form"):!0,[j=!1,m]=bi({prop:i,defaultProp:a,onChange:d});return r.jsxs(gK,{scope:n,checked:j,disabled:l,children:[r.jsx(He.button,{type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":wM(j),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onClick:$e(e.onClick,b=>{m(N=>!N),y&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),y&&r.jsx(vK,{control:h,bubbles:!g.current,name:s,value:c,checked:j,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});yM.displayName=LN;var bM="SwitchThumb",jM=x.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,i=xK(bM,n);return r.jsx(He.span,{"data-state":wM(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});jM.displayName=bM;var vK=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=x.useRef(null),o=Cv(n),l=xv(t);return x.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&f){const h=new Event("click",{bubbles:s});f.call(c,n),c.dispatchEvent(h)}},[o,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function wM(e){return e?"checked":"unchecked"}var NM=yM,yK=jM;const BN=x.forwardRef(({className:e,...t},n)=>r.jsx(NM,{className:Ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(yK,{className:Ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));BN.displayName=NM.displayName;const Mo=20;function rA(e){const n=new Date().getTime()-e.getTime(),s=Math.floor(n/6e4),i=Math.floor(n/36e5),a=Math.floor(n/864e5);return s<1?"Just now":s<60?`${s}m ago`:i<24?`${i}h ago`:a===1?"Yesterday":a<7?`${a}d ago`:e.toLocaleDateString()}function bK(){const[e,t]=x.useState(""),[n,s]=x.useState("all"),[i,a]=x.useState("all"),[o,l]=x.useState("all"),[c,d]=x.useState("all"),[u,f]=x.useState(1),[h,p]=x.useState(!1),{toast:v}=Je(),[g,y]=x.useState("createdAt"),[j,m]=x.useState("desc"),b=C=>{g===C?m(j==="asc"?"desc":"asc"):(y(C),m("desc")),f(1)},{data:N,isLoading:w,refetch:S}=pe({queryKey:["/api/admin/users",{timeFilter:n,planFilter:i,statusFilter:o,beltFilter:c}],queryFn:()=>Ie(`/api/admin/users?timeFilter=${n}&planFilter=${i}&statusFilter=${o}&beltFilter=${c}`)}),k=qe({mutationFn:async()=>{const C=await fetch("/api/admin/create-test-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`}});if(!C.ok)throw new Error("Failed to create test user");return C.json()},onSuccess:()=>{v({title:"Test User Created",description:"A demo user has been created for testing"}),_e.invalidateQueries({queryKey:["/api/admin/users"]})},onError:()=>{v({title:"Error",description:"Failed to create test user",variant:"destructive"})}});qe({mutationFn:async({userId:C,enable:R})=>{const I=await fetch(`/api/admin/users/${C}/toggle-lifetime-bypass`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify({enable:R})});if(!I.ok)throw new Error("Failed to toggle lifetime bypass");return I.json()},onSuccess:C=>{v({title:"Lifetime Bypass Updated",description:`LIFETIME code ${C.isLifetimeUser?"enabled":"disabled"} for ${C.phoneNumber}`}),_e.invalidateQueries({queryKey:["/api/admin/users"]})},onError:()=>{v({title:"Error",description:"Failed to toggle lifetime bypass",variant:"destructive"})}});const P=qe({mutationFn:async({email:C})=>await Ie("/api/admin/lifetime/grant-instant","POST",{email:C,sendEmail:!1}),onSuccess:C=>{v({title:"Lifetime Access Granted",description:C.message}),_e.invalidateQueries({queryKey:["/api/admin/users"]})},onError:C=>{v({title:"Error",description:C.message||"Failed to grant lifetime access",variant:"destructive"})}}),E=qe({mutationFn:async({userId:C})=>await Ie(`/api/admin/users/${C}/revoke-lifetime`,"POST",{}),onSuccess:()=>{v({title:"Lifetime Access Revoked",description:"User subscription changed to free tier"}),_e.invalidateQueries({queryKey:["/api/admin/users"]})},onError:C=>{v({title:"Error",description:C.message||"Failed to revoke lifetime access",variant:"destructive"})}}),_=((N==null?void 0:N.filter(C=>{var R,I;return((R=C.name)==null?void 0:R.toLowerCase().includes(e.toLowerCase()))||((I=C.email)==null?void 0:I.toLowerCase().includes(e.toLowerCase()))}))||[]).sort((C,R)=>{const I=g==="lastActiveAt"&&(C.lastActiveAt||C.lastLogin)||C.createdAt,B=g==="lastActiveAt"&&(R.lastActiveAt||R.lastLogin)||R.createdAt,H=new Date(I||0).getTime(),Q=new Date(B||0).getTime();return j==="desc"?Q-H:H-Q}),F=Math.max(1,Math.ceil(_.length/Mo)),A=Math.min(u,F),T=_.slice((A-1)*Mo,A*Mo);x.useEffect(()=>{f(1)},[e,n,i,o,c]);const M=C=>{if(!N)return 0;const R=new Date;return N.filter(I=>{const B=new Date(I.createdAt);switch(C){case"24h":return R.getTime()-B.getTime()<=24*60*60*1e3;case"7d":return R.getTime()-B.getTime()<=7*24*60*60*1e3;case"30d":return R.getTime()-B.getTime()<=30*24*60*60*1e3;case"90d":return R.getTime()-B.getTime()<=90*24*60*60*1e3;case"all":return!0;default:return!0}}).length},O=C=>{const R=new Date(C);return new Date().getTime()-R.getTime()<=24*60*60*1e3};return r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold",children:"User Management"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and monitor your users"})]}),r.jsx(Z,{variant:"outline",size:"icon",onClick:async()=>{p(!0);try{await S()}finally{p(!1)}},disabled:h,"data-testid":"button-refresh-users",children:r.jsx(wr,{className:`w-4 h-4 ${h?"animate-spin":""}`})})]}),r.jsx(G,{className:"p-1",children:r.jsx("div",{className:"flex gap-1",children:["24h","7d","30d","90d","all"].map(C=>r.jsxs(Z,{variant:n===C?"default":"ghost",onClick:()=>{s(C),f(1)},className:"flex-1","data-testid":`filter-time-${C}`,children:[r.jsx("span",{className:"font-medium",children:C==="24h"?"Last 24 Hours":C==="7d"?"Last 7 Days":C==="30d"?"Last 30 Days":C==="90d"?"Last 90 Days":"All Time"}),r.jsx(ae,{variant:"secondary",className:"ml-2",children:M(C)})]},C))})}),r.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[r.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(je,{placeholder:"Search by name or email...",className:"pl-10",value:e,onChange:C=>{t(C.target.value),f(1)},"data-testid":"input-user-search"})]}),r.jsxs(et,{value:i,onValueChange:C=>{a(C),f(1)},children:[r.jsx(Xe,{className:"w-[180px]","data-testid":"select-plan-filter",children:r.jsx(tt,{placeholder:"Plan Type"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Plans"}),r.jsx(ne,{value:"sms",children:"SMS Only"}),r.jsx(ne,{value:"full",children:"Full AI Package"}),r.jsx(ne,{value:"lifetime",children:"Lifetime"}),r.jsx(ne,{value:"free",children:"Free"})]})]}),r.jsxs(et,{value:o,onValueChange:C=>{l(C),f(1)},children:[r.jsx(Xe,{className:"w-[180px]","data-testid":"select-status-filter",children:r.jsx(tt,{placeholder:"Status"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Status"}),r.jsx(ne,{value:"active",children:"Active"}),r.jsx(ne,{value:"trial",children:"Trial"}),r.jsx(ne,{value:"cancelled",children:"Cancelled"})]})]}),r.jsxs(et,{value:c,onValueChange:C=>{d(C),f(1)},children:[r.jsx(Xe,{className:"w-[180px]","data-testid":"select-belt-filter",children:r.jsx(tt,{placeholder:"Belt Level"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Belts"}),r.jsx(ne,{value:"white",children:"White Belt"}),r.jsx(ne,{value:"blue",children:"Blue Belt"}),r.jsx(ne,{value:"purple",children:"Purple Belt"}),r.jsx(ne,{value:"brown",children:"Brown Belt"}),r.jsx(ne,{value:"black",children:"Black Belt"})]})]})]}),!w&&_.length===0&&!e?r.jsx(G,{className:"p-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center",children:r.jsx(Mn,{className:"w-8 h-8 text-muted-foreground"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No users yet"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Your first user will appear here when they sign up."})]}),r.jsxs(Z,{onClick:()=>k.mutate(),disabled:k.isPending,"data-testid":"button-create-test-user",children:[r.jsx(yq,{className:"w-4 h-4 mr-2"}),"Create Test User"]})]})}):r.jsxs("div",{className:"rounded-lg border bg-card flex flex-col",children:[F>1&&r.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-muted/30",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",_.length>0?(A-1)*Mo+1:0," - ",Math.min(A*Mo,_.length)," of ",_.length," users"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>f(C=>Math.max(1,C-1)),disabled:A===1,"data-testid":"button-prev-page-top",children:[r.jsx(Qk,{className:"w-4 h-4 mr-1"}),"Previous"]}),r.jsxs("span",{className:"text-sm font-medium px-2",children:["Page ",A," of ",F]}),r.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>f(C=>Math.min(F,C+1)),disabled:A===F,"data-testid":"button-next-page-top",children:["Next",r.jsx(Cn,{className:"w-4 h-4 ml-1"})]})]})]}),r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"User"}),r.jsx(X,{children:"Email"}),r.jsx(X,{children:"Plan"}),r.jsx(X,{children:"Belt"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"LIFETIME Bypass"}),r.jsxs(X,{className:"cursor-pointer hover:bg-muted/50 select-none",onClick:()=>b("createdAt"),"data-testid":"sort-joined",children:["Joined ",g==="createdAt"&&(j==="desc"?"":"")]}),r.jsxs(X,{className:"cursor-pointer hover:bg-muted/50 select-none",onClick:()=>b("lastActiveAt"),"data-testid":"sort-last-active",children:["Last Active ",g==="lastActiveAt"&&(j==="desc"?"":"")]}),r.jsx(X,{className:"text-right",children:"Actions"})]})}),r.jsx(wt,{children:w?r.jsx(ke,{children:r.jsx(W,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"Loading users..."})}):T.length===0?r.jsx(ke,{children:r.jsx(W,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No users found matching your filters"})}):T.map(C=>r.jsxs(ke,{children:[r.jsx(W,{className:"font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[C.name||"Unnamed",O(C.createdAt)&&r.jsx(ae,{variant:"default",className:"text-xs",children:"NEW"})]})}),r.jsx(W,{children:C.email||"No email"}),r.jsx(W,{children:r.jsx(ae,{variant:C.subscriptionType==="lifetime"?"default":"secondary",children:C.subscriptionType||"free"})}),r.jsx(W,{children:C.beltLevel?r.jsx(ae,{variant:"outline",children:C.beltLevel}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(W,{children:r.jsx(ae,{variant:C.subscriptionStatus==="active"?"default":"secondary",children:C.subscriptionStatus||"inactive"})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(BN,{checked:C.subscriptionType==="lifetime",onCheckedChange:R=>{R?P.mutate({email:C.email}):E.mutate({userId:C.id})},disabled:P.isPending||E.isPending,"data-testid":`toggle-lifetime-bypass-${C.id}`}),C.subscriptionType==="lifetime"&&r.jsxs(ae,{variant:"default",className:"text-xs",children:[r.jsx(qn,{className:"w-3 h-3 mr-1 text-yellow-500"}),"LIFETIME"]})]})}),r.jsx(W,{className:"text-muted-foreground",children:new Date(C.createdAt).toLocaleDateString()}),r.jsx(W,{className:"text-muted-foreground",children:C.lastActiveAt?rA(new Date(C.lastActiveAt)):C.lastLogin?rA(new Date(C.lastLogin)):"Never"}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[C.subscriptionType!=="lifetime"?r.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>P.mutate({email:C.email}),disabled:!C.email||P.isPending,title:"Grant Lifetime Access","data-testid":`button-grant-lifetime-${C.id}`,children:r.jsx(qn,{className:"w-4 h-4 text-yellow-500"})}):r.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>E.mutate({userId:C.id}),disabled:E.isPending,title:"Revoke Lifetime Access","data-testid":`button-revoke-lifetime-${C.id}`,children:r.jsx(wi,{className:"w-4 h-4 text-red-500"})}),r.jsx(Z,{variant:"ghost",size:"icon","data-testid":`button-view-user-${C.id}`,children:r.jsx(Bn,{className:"w-4 h-4"})}),r.jsx(Z,{variant:"ghost",size:"icon","data-testid":`button-edit-user-${C.id}`,children:r.jsx(rf,{className:"w-4 h-4"})})]})})]},C.id))})]}),F>1&&r.jsxs("div",{className:"flex items-center justify-between p-4 border-t",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",_.length>0?(A-1)*Mo+1:0," - ",Math.min(A*Mo,_.length)," of ",_.length," users"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>f(C=>Math.max(1,C-1)),disabled:A===1,"data-testid":"button-prev-page",children:[r.jsx(Qk,{className:"w-4 h-4 mr-1"}),"Previous"]}),r.jsxs("span",{className:"text-sm text-muted-foreground px-2",children:["Page ",A," of ",F]}),r.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>f(C=>Math.min(F,C+1)),disabled:A===F,"data-testid":"button-next-page",children:["Next",r.jsx(Cn,{className:"w-4 h-4 ml-1"})]})]})]})]})]})})}var zN="Dialog",[SM,kM]=Mr(zN),[jK,Zs]=SM(zN),CM=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[d=!1,u]=bi({prop:s,defaultProp:i,onChange:a});return r.jsx(jK,{scope:t,triggerRef:l,contentRef:c,contentId:Xi(),titleId:Xi(),descriptionId:Xi(),open:d,onOpenChange:u,onOpenToggle:x.useCallback(()=>u(f=>!f),[u]),modal:o,children:n})};CM.displayName=zN;var AM="DialogTrigger",PM=x.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=Zs(AM,n),a=ct(t,i.triggerRef);return r.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":VN(i.open),...s,ref:a,onClick:$e(e.onClick,i.onOpenToggle)})});PM.displayName=AM;var qN="DialogPortal",[wK,EM]=SM(qN,{forceMount:void 0}),TM=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:i}=e,a=Zs(qN,t);return r.jsx(wK,{scope:t,forceMount:n,children:x.Children.map(s,o=>r.jsx(vs,{present:n||a.open,children:r.jsx(av,{asChild:!0,container:i,children:o})}))})};TM.displayName=qN;var Tg="DialogOverlay",OM=x.forwardRef((e,t)=>{const n=EM(Tg,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=Zs(Tg,e.__scopeDialog);return a.modal?r.jsx(vs,{present:s||a.open,children:r.jsx(SK,{...i,ref:t})}):null});OM.displayName=Tg;var NK=rd("DialogOverlay.RemoveScroll"),SK=x.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=Zs(Tg,n);return r.jsx(FN,{as:NK,allowPinchZoom:!0,shards:[i.contentRef],children:r.jsx(He.div,{"data-state":VN(i.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Nl="DialogContent",_M=x.forwardRef((e,t)=>{const n=EM(Nl,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=Zs(Nl,e.__scopeDialog);return r.jsx(vs,{present:s||a.open,children:a.modal?r.jsx(kK,{...i,ref:t}):r.jsx(CK,{...i,ref:t})})});_M.displayName=Nl;var kK=x.forwardRef((e,t)=>{const n=Zs(Nl,e.__scopeDialog),s=x.useRef(null),i=ct(t,n.contentRef,s);return x.useEffect(()=>{const a=s.current;if(a)return NR(a)},[]),r.jsx(IM,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:$e(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:$e(e.onFocusOutside,a=>a.preventDefault())})}),CK=x.forwardRef((e,t)=>{const n=Zs(Nl,e.__scopeDialog),s=x.useRef(!1),i=x.useRef(!1);return r.jsx(IM,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),IM=x.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=Zs(Nl,n),c=x.useRef(null),d=ct(t,c);return bR(),r.jsxs(r.Fragment,{children:[r.jsx(MN,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(Yh,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":VN(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(PK,{titleId:l.titleId}),r.jsx(TK,{contentRef:c,descriptionId:l.descriptionId})]})]})}),UN="DialogTitle",RM=x.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=Zs(UN,n);return r.jsx(He.h2,{id:i.titleId,...s,ref:t})});RM.displayName=UN;var MM="DialogDescription",FM=x.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=Zs(MM,n);return r.jsx(He.p,{id:i.descriptionId,...s,ref:t})});FM.displayName=MM;var $M="DialogClose",DM=x.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=Zs($M,n);return r.jsx(He.button,{type:"button",...s,ref:t,onClick:$e(e.onClick,()=>i.onOpenChange(!1))})});DM.displayName=$M;function VN(e){return e?"open":"closed"}var LM="DialogTitleWarning",[AK,BM]=a7(LM,{contentName:Nl,titleName:UN,docsSlug:"dialog"}),PK=({titleId:e})=>{const t=BM(LM),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},EK="DialogDescriptionWarning",TK=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BM(EK).contentName}}.`;return x.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},WN=CM,zM=PM,HN=TM,tm=OM,nm=_M,rm=RM,sm=FM,im=DM;const Nn=WN,Yf=zM,OK=HN,_K=im,qM=x.forwardRef(({className:e,...t},n)=>r.jsx(tm,{ref:n,className:Ce("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));qM.displayName=tm.displayName;const mn=x.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(OK,{children:[r.jsx(qM,{}),r.jsxs(nm,{ref:s,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(im,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(ys,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mn.displayName=nm.displayName;const pn=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});pn.displayName="DialogHeader";const bo=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});bo.displayName="DialogFooter";const gn=x.forwardRef(({className:e,...t},n)=>r.jsx(rm,{ref:n,className:Ce("text-lg font-semibold leading-none tracking-tight",e),...t}));gn.displayName=rm.displayName;const zn=x.forwardRef(({className:e,...t},n)=>r.jsx(sm,{ref:n,className:Ce("text-sm text-muted-foreground",e),...t}));zn.displayName=sm.displayName;var yb="rovingFocusGroup.onEntryFocus",IK={bubbles:!1,cancelable:!0},Ov="RovingFocusGroup",[_j,UM,RK]=iv(Ov),[MK,VM]=Mr(Ov,[RK]),[FK,$K]=MK(Ov),WM=x.forwardRef((e,t)=>r.jsx(_j.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(_j.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(DK,{...e,ref:t})})}));WM.displayName=Ov;var DK=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=e,h=x.useRef(null),p=ct(t,h),v=Zh(a),[g=null,y]=bi({prop:o,defaultProp:l,onChange:c}),[j,m]=x.useState(!1),b=yn(d),N=UM(n),w=x.useRef(!1),[S,k]=x.useState(0);return x.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(yb,b),()=>P.removeEventListener(yb,b)},[b]),r.jsx(FK,{scope:n,orientation:s,dir:v,loop:i,currentTabStopId:g,onItemFocus:x.useCallback(P=>y(P),[y]),onItemShiftTab:x.useCallback(()=>m(!0),[]),onFocusableItemAdd:x.useCallback(()=>k(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>k(P=>P-1),[]),children:r.jsx(He.div,{tabIndex:j||S===0?-1:0,"data-orientation":s,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:$e(e.onMouseDown,()=>{w.current=!0}),onFocus:$e(e.onFocus,P=>{const E=!w.current;if(P.target===P.currentTarget&&E&&!j){const _=new CustomEvent(yb,IK);if(P.currentTarget.dispatchEvent(_),!_.defaultPrevented){const F=N().filter(C=>C.focusable),A=F.find(C=>C.active),T=F.find(C=>C.id===g),O=[A,T,...F].filter(Boolean).map(C=>C.ref.current);GM(O,u)}}w.current=!1}),onBlur:$e(e.onBlur,()=>m(!1))})})}),HM="RovingFocusGroupItem",KM=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:a,...o}=e,l=Xi(),c=a||l,d=$K(HM,n),u=d.currentTabStopId===c,f=UM(n),{onFocusableItemAdd:h,onFocusableItemRemove:p}=d;return x.useEffect(()=>{if(s)return h(),()=>p()},[s,h,p]),r.jsx(_j.ItemSlot,{scope:n,id:c,focusable:s,active:i,children:r.jsx(He.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:$e(e.onMouseDown,v=>{s?d.onItemFocus(c):v.preventDefault()}),onFocus:$e(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:$e(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const g=zK(v,d.orientation,d.dir);if(g!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let j=f().filter(m=>m.focusable).map(m=>m.ref.current);if(g==="last")j.reverse();else if(g==="prev"||g==="next"){g==="prev"&&j.reverse();const m=j.indexOf(v.currentTarget);j=d.loop?qK(j,m+1):j.slice(m+1)}setTimeout(()=>GM(j))}})})})});KM.displayName=HM;var LK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BK(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zK(e,t,n){const s=BK(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return LK[s]}function GM(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function qK(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var UK=WM,VK=KM,KN="Tabs",[WK,sSe]=Mr(KN,[VM]),YM=VM(),[HK,GN]=WK(KN),QM=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Zh(l),[f,h]=bi({prop:s,onChange:i,defaultProp:a});return r.jsx(HK,{scope:n,baseId:Xi(),value:f,onValueChange:h,orientation:o,dir:u,activationMode:c,children:r.jsx(He.div,{dir:u,"data-orientation":o,...d,ref:t})})});QM.displayName=KN;var JM="TabsList",XM=x.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...i}=e,a=GN(JM,n),o=YM(n);return r.jsx(UK,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:s,children:r.jsx(He.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});XM.displayName=JM;var ZM="TabsTrigger",eF=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:i=!1,...a}=e,o=GN(ZM,n),l=YM(n),c=rF(o.baseId,s),d=sF(o.baseId,s),u=s===o.value;return r.jsx(VK,{asChild:!0,...l,focusable:!i,active:u,children:r.jsx(He.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:$e(e.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(s):f.preventDefault()}),onKeyDown:$e(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(s)}),onFocus:$e(e.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!i&&f&&o.onValueChange(s)})})})});eF.displayName=ZM;var tF="TabsContent",nF=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:i,children:a,...o}=e,l=GN(tF,n),c=rF(l.baseId,s),d=sF(l.baseId,s),u=s===l.value,f=x.useRef(u);return x.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),r.jsx(vs,{present:i||u,children:({present:h})=>r.jsx(He.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&a})})});nF.displayName=tF;function rF(e,t){return`${e}-trigger-${t}`}function sF(e,t){return`${e}-content-${t}`}var KK=QM,iF=XM,aF=eF,oF=nF;const Il=KK,Eo=x.forwardRef(({className:e,...t},n)=>r.jsx(iF,{ref:n,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Eo.displayName=iF.displayName;const an=x.forwardRef(({className:e,...t},n)=>r.jsx(aF,{ref:n,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));an.displayName=aF.displayName;const on=x.forwardRef(({className:e,...t},n)=>r.jsx(oF,{ref:n,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));on.displayName=oF.displayName;var GK=Array.isArray,Fr=GK,YK=typeof ym=="object"&&ym&&ym.Object===Object&&ym,lF=YK,QK=lF,JK=typeof self=="object"&&self&&self.Object===Object&&self,XK=QK||JK||Function("return this")(),Ei=XK,ZK=Ei,eG=ZK.Symbol,am=eG,sA=am,cF=Object.prototype,tG=cF.hasOwnProperty,nG=cF.toString,Nu=sA?sA.toStringTag:void 0;function rG(e){var t=tG.call(e,Nu),n=e[Nu];try{e[Nu]=void 0;var s=!0}catch{}var i=nG.call(e);return s&&(t?e[Nu]=n:delete e[Nu]),i}var sG=rG,iG=Object.prototype,aG=iG.toString;function oG(e){return aG.call(e)}var lG=oG,iA=am,cG=sG,dG=lG,uG="[object Null]",fG="[object Undefined]",aA=iA?iA.toStringTag:void 0;function hG(e){return e==null?e===void 0?fG:uG:aA&&aA in Object(e)?cG(e):dG(e)}var ya=hG;function mG(e){return e!=null&&typeof e=="object"}var ba=mG,pG=ya,gG=ba,xG="[object Symbol]";function vG(e){return typeof e=="symbol"||gG(e)&&pG(e)==xG}var Qd=vG,yG=Fr,bG=Qd,jG=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wG=/^\w*$/;function NG(e,t){if(yG(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||bG(e)?!0:wG.test(e)||!jG.test(e)||t!=null&&e in Object(t)}var YN=NG;function SG(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var To=SG;const Jd=Dt(To);var kG=ya,CG=To,AG="[object AsyncFunction]",PG="[object Function]",EG="[object GeneratorFunction]",TG="[object Proxy]";function OG(e){if(!CG(e))return!1;var t=kG(e);return t==PG||t==EG||t==AG||t==TG}var QN=OG;const ft=Dt(QN);var _G=Ei,IG=_G["__core-js_shared__"],RG=IG,bb=RG,oA=function(){var e=/[^.]+$/.exec(bb&&bb.keys&&bb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function MG(e){return!!oA&&oA in e}var FG=MG,$G=Function.prototype,DG=$G.toString;function LG(e){if(e!=null){try{return DG.call(e)}catch{}try{return e+""}catch{}}return""}var dF=LG,BG=QN,zG=FG,qG=To,UG=dF,VG=/[\\^$.*+?()[\]{}|]/g,WG=/^\[object .+?Constructor\]$/,HG=Function.prototype,KG=Object.prototype,GG=HG.toString,YG=KG.hasOwnProperty,QG=RegExp("^"+GG.call(YG).replace(VG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JG(e){if(!qG(e)||zG(e))return!1;var t=BG(e)?QG:WG;return t.test(UG(e))}var XG=JG;function ZG(e,t){return e==null?void 0:e[t]}var eY=ZG,tY=XG,nY=eY;function rY(e,t){var n=nY(e,t);return tY(n)?n:void 0}var Rl=rY,sY=Rl,iY=sY(Object,"create"),_v=iY,lA=_v;function aY(){this.__data__=lA?lA(null):{},this.size=0}var oY=aY;function lY(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var cY=lY,dY=_v,uY="__lodash_hash_undefined__",fY=Object.prototype,hY=fY.hasOwnProperty;function mY(e){var t=this.__data__;if(dY){var n=t[e];return n===uY?void 0:n}return hY.call(t,e)?t[e]:void 0}var pY=mY,gY=_v,xY=Object.prototype,vY=xY.hasOwnProperty;function yY(e){var t=this.__data__;return gY?t[e]!==void 0:vY.call(t,e)}var bY=yY,jY=_v,wY="__lodash_hash_undefined__";function NY(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=jY&&t===void 0?wY:t,this}var SY=NY,kY=oY,CY=cY,AY=pY,PY=bY,EY=SY;function Xd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Xd.prototype.clear=kY;Xd.prototype.delete=CY;Xd.prototype.get=AY;Xd.prototype.has=PY;Xd.prototype.set=EY;var TY=Xd;function OY(){this.__data__=[],this.size=0}var _Y=OY;function IY(e,t){return e===t||e!==e&&t!==t}var JN=IY,RY=JN;function MY(e,t){for(var n=e.length;n--;)if(RY(e[n][0],t))return n;return-1}var Iv=MY,FY=Iv,$Y=Array.prototype,DY=$Y.splice;function LY(e){var t=this.__data__,n=FY(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():DY.call(t,n,1),--this.size,!0}var BY=LY,zY=Iv;function qY(e){var t=this.__data__,n=zY(t,e);return n<0?void 0:t[n][1]}var UY=qY,VY=Iv;function WY(e){return VY(this.__data__,e)>-1}var HY=WY,KY=Iv;function GY(e,t){var n=this.__data__,s=KY(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var YY=GY,QY=_Y,JY=BY,XY=UY,ZY=HY,eQ=YY;function Zd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Zd.prototype.clear=QY;Zd.prototype.delete=JY;Zd.prototype.get=XY;Zd.prototype.has=ZY;Zd.prototype.set=eQ;var Rv=Zd,tQ=Rl,nQ=Ei,rQ=tQ(nQ,"Map"),XN=rQ,cA=TY,sQ=Rv,iQ=XN;function aQ(){this.size=0,this.__data__={hash:new cA,map:new(iQ||sQ),string:new cA}}var oQ=aQ;function lQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var cQ=lQ,dQ=cQ;function uQ(e,t){var n=e.__data__;return dQ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Mv=uQ,fQ=Mv;function hQ(e){var t=fQ(this,e).delete(e);return this.size-=t?1:0,t}var mQ=hQ,pQ=Mv;function gQ(e){return pQ(this,e).get(e)}var xQ=gQ,vQ=Mv;function yQ(e){return vQ(this,e).has(e)}var bQ=yQ,jQ=Mv;function wQ(e,t){var n=jQ(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var NQ=wQ,SQ=oQ,kQ=mQ,CQ=xQ,AQ=bQ,PQ=NQ;function eu(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}eu.prototype.clear=SQ;eu.prototype.delete=kQ;eu.prototype.get=CQ;eu.prototype.has=AQ;eu.prototype.set=PQ;var ZN=eu,uF=ZN,EQ="Expected a function";function eS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(EQ);var n=function(){var s=arguments,i=t?t.apply(this,s):s[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,s);return n.cache=a.set(i,o)||a,o};return n.cache=new(eS.Cache||uF),n}eS.Cache=uF;var fF=eS;const TQ=Dt(fF);var OQ=fF,_Q=500;function IQ(e){var t=OQ(e,function(s){return n.size===_Q&&n.clear(),s}),n=t.cache;return t}var RQ=IQ,MQ=RQ,FQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$Q=/\\(\\)?/g,DQ=MQ(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(FQ,function(n,s,i,a){t.push(i?a.replace($Q,"$1"):s||n)}),t}),LQ=DQ;function BQ(e,t){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=t(e[n],n,e);return i}var tS=BQ,dA=am,zQ=tS,qQ=Fr,UQ=Qd,VQ=1/0,uA=dA?dA.prototype:void 0,fA=uA?uA.toString:void 0;function hF(e){if(typeof e=="string")return e;if(qQ(e))return zQ(e,hF)+"";if(UQ(e))return fA?fA.call(e):"";var t=e+"";return t=="0"&&1/e==-VQ?"-0":t}var WQ=hF,HQ=WQ;function KQ(e){return e==null?"":HQ(e)}var mF=KQ,GQ=Fr,YQ=YN,QQ=LQ,JQ=mF;function XQ(e,t){return GQ(e)?e:YQ(e,t)?[e]:QQ(JQ(e))}var pF=XQ,ZQ=Qd,eJ=1/0;function tJ(e){if(typeof e=="string"||ZQ(e))return e;var t=e+"";return t=="0"&&1/e==-eJ?"-0":t}var Fv=tJ,nJ=pF,rJ=Fv;function sJ(e,t){t=nJ(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[rJ(t[n++])];return n&&n==s?e:void 0}var nS=sJ,iJ=nS;function aJ(e,t,n){var s=e==null?void 0:iJ(e,t);return s===void 0?n:s}var gF=aJ;const us=Dt(gF);function oJ(e){return e==null}var lJ=oJ;const xt=Dt(lJ);var cJ=ya,dJ=Fr,uJ=ba,fJ="[object String]";function hJ(e){return typeof e=="string"||!dJ(e)&&uJ(e)&&cJ(e)==fJ}var mJ=hJ;const om=Dt(mJ);var xF={exports:{}},Mt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS=Symbol.for("react.element"),sS=Symbol.for("react.portal"),$v=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),Lv=Symbol.for("react.profiler"),Bv=Symbol.for("react.provider"),zv=Symbol.for("react.context"),pJ=Symbol.for("react.server_context"),qv=Symbol.for("react.forward_ref"),Uv=Symbol.for("react.suspense"),Vv=Symbol.for("react.suspense_list"),Wv=Symbol.for("react.memo"),Hv=Symbol.for("react.lazy"),gJ=Symbol.for("react.offscreen"),vF;vF=Symbol.for("react.module.reference");function js(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case rS:switch(e=e.type,e){case $v:case Lv:case Dv:case Uv:case Vv:return e;default:switch(e=e&&e.$$typeof,e){case pJ:case zv:case qv:case Hv:case Wv:case Bv:return e;default:return t}}case sS:return t}}}Mt.ContextConsumer=zv;Mt.ContextProvider=Bv;Mt.Element=rS;Mt.ForwardRef=qv;Mt.Fragment=$v;Mt.Lazy=Hv;Mt.Memo=Wv;Mt.Portal=sS;Mt.Profiler=Lv;Mt.StrictMode=Dv;Mt.Suspense=Uv;Mt.SuspenseList=Vv;Mt.isAsyncMode=function(){return!1};Mt.isConcurrentMode=function(){return!1};Mt.isContextConsumer=function(e){return js(e)===zv};Mt.isContextProvider=function(e){return js(e)===Bv};Mt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===rS};Mt.isForwardRef=function(e){return js(e)===qv};Mt.isFragment=function(e){return js(e)===$v};Mt.isLazy=function(e){return js(e)===Hv};Mt.isMemo=function(e){return js(e)===Wv};Mt.isPortal=function(e){return js(e)===sS};Mt.isProfiler=function(e){return js(e)===Lv};Mt.isStrictMode=function(e){return js(e)===Dv};Mt.isSuspense=function(e){return js(e)===Uv};Mt.isSuspenseList=function(e){return js(e)===Vv};Mt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===$v||e===Lv||e===Dv||e===Uv||e===Vv||e===gJ||typeof e=="object"&&e!==null&&(e.$$typeof===Hv||e.$$typeof===Wv||e.$$typeof===Bv||e.$$typeof===zv||e.$$typeof===qv||e.$$typeof===vF||e.getModuleId!==void 0)};Mt.typeOf=js;xF.exports=Mt;var xJ=xF.exports,vJ=ya,yJ=ba,bJ="[object Number]";function jJ(e){return typeof e=="number"||yJ(e)&&vJ(e)==bJ}var yF=jJ;const wJ=Dt(yF);var NJ=yF;function SJ(e){return NJ(e)&&e!=+e}var kJ=SJ;const lm=Dt(kJ);var Ws=function(t){return t===0?0:t>0?1:-1},Yo=function(t){return om(t)&&t.indexOf("%")===t.length-1},Te=function(t){return wJ(t)&&!lm(t)},Rn=function(t){return Te(t)||om(t)},CJ=0,cm=function(t){var n=++CJ;return"".concat(t||"").concat(n)},Sl=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Te(t)&&!om(t))return s;var a;if(Yo(t)){var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return lm(a)&&(a=s),i&&a>n&&(a=n),a},La=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},AJ=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},i=0;i<n;i++)if(!s[t[i]])s[t[i]]=!0;else return!0;return!1},Ls=function(t,n){return Te(t)&&Te(n)?function(s){return t+s*(n-t)}:function(){return n}};function Og(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):us(s,t))===n})}function Ec(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function Ij(e){"@babel/helpers - typeof";return Ij=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ij(e)}var PJ=["viewBox","children"],EJ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hA=["points","pathLength"],jb={svg:PJ,polygon:hA,polyline:hA},iS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],_g=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(x.isValidElement(t)&&(s=t.props),!Jd(s))return null;var i={};return Object.keys(s).forEach(function(a){iS.includes(a)&&(i[a]=n||function(o){return s[a](s,o)})}),i},TJ=function(t,n,s){return function(i){return t(n,s,i),null}},Ig=function(t,n,s){if(!Jd(t)||Ij(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var o=t[a];iS.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=TJ(o,n,s))}),i},OJ=["children"],_J=["children"];function mA(e,t){if(e==null)return{};var n=IJ(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function IJ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Rj(e){"@babel/helpers - typeof";return Rj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rj(e)}var pA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Zi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},gA=null,wb=null,aS=function e(t){if(t===gA&&Array.isArray(wb))return wb;var n=[];return x.Children.forEach(t,function(s){xt(s)||(xJ.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),wb=n,gA=t,n};function fs(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(i){return Zi(i)}):s=[Zi(t)],aS(e).forEach(function(i){var a=us(i,"type.displayName")||us(i,"type.name");s.indexOf(a)!==-1&&n.push(i)}),n}function zr(e,t){var n=fs(e,t);return n&&n[0]}var xA=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,i=n.height;return!(!Te(s)||s<=0||!Te(i)||i<=0)},RJ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],MJ=function(t){return t&&t.type&&om(t.type)&&RJ.indexOf(t.type)>=0},FJ=function(t){return t&&Rj(t)==="object"&&"clipDot"in t},$J=function(t,n,s,i){var a,o=(a=jb==null?void 0:jb[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!ft(t)&&(i&&o.includes(n)||EJ.includes(n))||s&&iS.includes(n)},yt=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(x.isValidElement(t)&&(i=t.props),!Jd(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;$J((l=i)===null||l===void 0?void 0:l[o],o,n,s)&&(a[o]=i[o])}),a},Mj=function e(t,n){if(t===n)return!0;var s=x.Children.count(t);if(s!==x.Children.count(n))return!1;if(s===0)return!0;if(s===1)return vA(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<s;i++){var a=t[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!e(a,o))return!1}else if(!vA(a,o))return!1}return!0},vA=function(t,n){if(xt(t)&&xt(n))return!0;if(!xt(t)&&!xt(n)){var s=t.props||{},i=s.children,a=mA(s,OJ),o=n.props||{},l=o.children,c=mA(o,_J);return i&&l?Ec(a,c)&&Mj(i,l):!i&&!l?Ec(a,c):!1}return!1},yA=function(t,n){var s=[],i={};return aS(t).forEach(function(a,o){if(MJ(a))s.push(a);else if(a){var l=Zi(a.type),c=n[l]||{},d=c.handler,u=c.once;if(d&&(!u||!i[l])){var f=d(a,l,o);s.push(f),i[l]=!0}}}),s},DJ=function(t){var n=t&&t.type;return n&&pA[n]?pA[n]:null},LJ=function(t,n){return aS(n).indexOf(t)},BJ=["children","width","height","viewBox","className","style","title","desc"];function Fj(){return Fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fj.apply(this,arguments)}function zJ(e,t){if(e==null)return{};var n=qJ(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function qJ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function $j(e){var t=e.children,n=e.width,s=e.height,i=e.viewBox,a=e.className,o=e.style,l=e.title,c=e.desc,d=zJ(e,BJ),u=i||{width:n,height:s,x:0,y:0},f=Nt("recharts-surface",a);return q.createElement("svg",Fj({},yt(d,!0,"svg"),{className:f,width:n,height:s,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),q.createElement("title",null,l),q.createElement("desc",null,c),t)}var UJ=["children","className"];function Dj(){return Dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Dj.apply(this,arguments)}function VJ(e,t){if(e==null)return{};var n=WJ(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function WJ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var bn=q.forwardRef(function(e,t){var n=e.children,s=e.className,i=VJ(e,UJ),a=Nt("recharts-layer",s);return q.createElement("g",Dj({className:a},yt(i,!0),{ref:t}),n)}),ea=function(t,n){for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a]};function HJ(e,t,n){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++s<i;)a[s]=e[s+t];return a}var KJ=HJ,GJ=KJ;function YJ(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:GJ(e,t,n)}var QJ=YJ,JJ="\\ud800-\\udfff",XJ="\\u0300-\\u036f",ZJ="\\ufe20-\\ufe2f",eX="\\u20d0-\\u20ff",tX=XJ+ZJ+eX,nX="\\ufe0e\\ufe0f",rX="\\u200d",sX=RegExp("["+rX+JJ+tX+nX+"]");function iX(e){return sX.test(e)}var bF=iX;function aX(e){return e.split("")}var oX=aX,jF="\\ud800-\\udfff",lX="\\u0300-\\u036f",cX="\\ufe20-\\ufe2f",dX="\\u20d0-\\u20ff",uX=lX+cX+dX,fX="\\ufe0e\\ufe0f",hX="["+jF+"]",Lj="["+uX+"]",Bj="\\ud83c[\\udffb-\\udfff]",mX="(?:"+Lj+"|"+Bj+")",wF="[^"+jF+"]",NF="(?:\\ud83c[\\udde6-\\uddff]){2}",SF="[\\ud800-\\udbff][\\udc00-\\udfff]",pX="\\u200d",kF=mX+"?",CF="["+fX+"]?",gX="(?:"+pX+"(?:"+[wF,NF,SF].join("|")+")"+CF+kF+")*",xX=CF+kF+gX,vX="(?:"+[wF+Lj+"?",Lj,NF,SF,hX].join("|")+")",yX=RegExp(Bj+"(?="+Bj+")|"+vX+xX,"g");function bX(e){return e.match(yX)||[]}var jX=bX,wX=oX,NX=bF,SX=jX;function kX(e){return NX(e)?SX(e):wX(e)}var CX=kX,AX=QJ,PX=bF,EX=CX,TX=mF;function OX(e){return function(t){t=TX(t);var n=PX(t)?EX(t):void 0,s=n?n[0]:t.charAt(0),i=n?AX(n,1).join(""):t.slice(1);return s[e]()+i}}var _X=OX,IX=_X,RX=IX("toUpperCase"),MX=RX;const Kv=Dt(MX);function Ut(e){return function(){return e}}const AF=Math.cos,Rg=Math.sin,ei=Math.sqrt,Mg=Math.PI,Gv=2*Mg,zj=Math.PI,qj=2*zj,zo=1e-6,FX=qj-zo;function PF(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function $X(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return PF;const n=10**t;return function(s){this._+=s[0];for(let i=1,a=s.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+s[i]}}class DX{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?PF:$X(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,i){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(t,n,s,i,a,o){this._append`C${+t},${+n},${+s},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,s,i,a){if(t=+t,n=+n,s=+s,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=s-t,d=i-n,u=o-t,f=l-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>zo)if(!(Math.abs(f*c-d*u)>zo)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=s-o,v=i-l,g=c*c+d*d,y=p*p+v*v,j=Math.sqrt(g),m=Math.sqrt(h),b=a*Math.tan((zj-Math.acos((g+h-y)/(2*j*m)))/2),N=b/m,w=b/j;Math.abs(N-1)>zo&&this._append`L${t+N*u},${n+N*f}`,this._append`A${a},${a},0,0,${+(f*p>u*v)},${this._x1=t+w*c},${this._y1=n+w*d}`}}arc(t,n,s,i,a,o){if(t=+t,n=+n,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(i),c=s*Math.sin(i),d=t+l,u=n+c,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>zo||Math.abs(this._y1-u)>zo)&&this._append`L${d},${u}`,s&&(h<0&&(h=h%qj+qj),h>FX?this._append`A${s},${s},0,1,${f},${t-l},${n-c}A${s},${s},0,1,${f},${this._x1=d},${this._y1=u}`:h>zo&&this._append`A${s},${s},0,${+(h>=zj)},${f},${this._x1=t+s*Math.cos(a)},${this._y1=n+s*Math.sin(a)}`)}rect(t,n,s,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function oS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new DX(t)}function lS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function EF(e){this._context=e}EF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Yv(e){return new EF(e)}function TF(e){return e[0]}function OF(e){return e[1]}function _F(e,t){var n=Ut(!0),s=null,i=Yv,a=null,o=oS(l);e=typeof e=="function"?e:e===void 0?TF:Ut(e),t=typeof t=="function"?t:t===void 0?OF:Ut(t);function l(c){var d,u=(c=lS(c)).length,f,h=!1,p;for(s==null&&(a=i(p=o())),d=0;d<=u;++d)!(d<u&&n(f=c[d],d,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,d,c),+t(f,d,c));if(p)return a=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ut(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ut(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ut(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,s!=null&&(a=i(s)),l):i},l.context=function(c){return arguments.length?(c==null?s=a=null:a=i(s=c),l):s},l}function Hm(e,t,n){var s=null,i=Ut(!0),a=null,o=Yv,l=null,c=oS(d);e=typeof e=="function"?e:e===void 0?TF:Ut(+e),t=typeof t=="function"?t:Ut(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?OF:Ut(+n);function d(f){var h,p,v,g=(f=lS(f)).length,y,j=!1,m,b=new Array(g),N=new Array(g);for(a==null&&(l=o(m=c())),h=0;h<=g;++h){if(!(h<g&&i(y=f[h],h,f))===j)if(j=!j)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=h-1;v>=p;--v)l.point(b[v],N[v]);l.lineEnd(),l.areaEnd()}j&&(b[h]=+e(y,h,f),N[h]=+t(y,h,f),l.point(s?+s(y,h,f):b[h],n?+n(y,h,f):N[h]))}if(m)return l=null,m+""||null}function u(){return _F().defined(i).curve(o).context(a)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ut(+f),s=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ut(+f),d):e},d.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:Ut(+f),d):s},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ut(+f),n=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ut(+f),d):t},d.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ut(+f),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ut(!!f),d):i},d.curve=function(f){return arguments.length?(o=f,a!=null&&(l=o(a)),d):o},d.context=function(f){return arguments.length?(f==null?a=l=null:l=o(a=f),d):a},d}class IF{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function LX(e){return new IF(e,!0)}function BX(e){return new IF(e,!1)}const cS={draw(e,t){const n=ei(t/Mg);e.moveTo(n,0),e.arc(0,0,n,0,Gv)}},zX={draw(e,t){const n=ei(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},RF=ei(1/3),qX=RF*2,UX={draw(e,t){const n=ei(t/qX),s=n*RF;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},VX={draw(e,t){const n=ei(t),s=-n/2;e.rect(s,s,n,n)}},WX=.8908130915292852,MF=Rg(Mg/10)/Rg(7*Mg/10),HX=Rg(Gv/10)*MF,KX=-AF(Gv/10)*MF,GX={draw(e,t){const n=ei(t*WX),s=HX*n,i=KX*n;e.moveTo(0,-n),e.lineTo(s,i);for(let a=1;a<5;++a){const o=Gv*a/5,l=AF(o),c=Rg(o);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*i,c*s+l*i)}e.closePath()}},Nb=ei(3),YX={draw(e,t){const n=-ei(t/(Nb*3));e.moveTo(0,n*2),e.lineTo(-Nb*n,-n),e.lineTo(Nb*n,-n),e.closePath()}},es=-.5,ts=ei(3)/2,Uj=1/ei(12),QX=(Uj/2+1)*3,JX={draw(e,t){const n=ei(t/QX),s=n/2,i=n*Uj,a=s,o=n*Uj+n,l=-a,c=o;e.moveTo(s,i),e.lineTo(a,o),e.lineTo(l,c),e.lineTo(es*s-ts*i,ts*s+es*i),e.lineTo(es*a-ts*o,ts*a+es*o),e.lineTo(es*l-ts*c,ts*l+es*c),e.lineTo(es*s+ts*i,es*i-ts*s),e.lineTo(es*a+ts*o,es*o-ts*a),e.lineTo(es*l+ts*c,es*c-ts*l),e.closePath()}};function XX(e,t){let n=null,s=oS(i);e=typeof e=="function"?e:Ut(e||cS),t=typeof t=="function"?t:Ut(t===void 0?64:+t);function i(){let a;if(n||(n=a=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Ut(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Ut(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Fg(){}function $g(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function FF(e){this._context=e}FF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$g(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$g(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ZX(e){return new FF(e)}function $F(e){this._context=e}$F.prototype={areaStart:Fg,areaEnd:Fg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$g(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eZ(e){return new $F(e)}function DF(e){this._context=e}DF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:$g(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tZ(e){return new DF(e)}function LF(e){this._context=e}LF.prototype={areaStart:Fg,areaEnd:Fg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function nZ(e){return new LF(e)}function bA(e){return e<0?-1:1}function jA(e,t,n){var s=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(s||i<0&&-0),o=(n-e._y1)/(i||s<0&&-0),l=(a*i+o*s)/(s+i);return(bA(a)+bA(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function wA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Sb(e,t,n){var s=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-s)/3;e._context.bezierCurveTo(s+l,i+l*t,a-l,o-l*n,a,o)}function Dg(e){this._context=e}Dg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sb(this,this._t0,wA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Sb(this,wA(this,n=jA(this,e,t)),n);break;default:Sb(this,this._t0,n=jA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function BF(e){this._context=new zF(e)}(BF.prototype=Object.create(Dg.prototype)).point=function(e,t){Dg.prototype.point.call(this,t,e)};function zF(e){this._context=e}zF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,i,a){this._context.bezierCurveTo(t,e,s,n,a,i)}};function rZ(e){return new Dg(e)}function sZ(e){return new BF(e)}function qF(e){this._context=e}qF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=NA(e),i=NA(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(s[0][a],i[0][a],s[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function NA(e){var t,n=e.length-1,s,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=i[t]/a[t-1],a[t]-=s,o[t]-=s*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function iZ(e){return new qF(e)}function Qv(e,t){this._context=e,this._t=t}Qv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function aZ(e){return new Qv(e,.5)}function oZ(e){return new Qv(e,0)}function lZ(e){return new Qv(e,1)}function ud(e,t){if((o=e.length)>1)for(var n=1,s,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],s=0;s<l;++s)a[s][1]+=a[s][0]=isNaN(i[s][1])?i[s][0]:i[s][1]}function Vj(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function cZ(e,t){return e[t]}function dZ(e){const t=[];return t.key=e,t}function uZ(){var e=Ut([]),t=Vj,n=ud,s=cZ;function i(a){var o=Array.from(e.apply(this,arguments),dZ),l,c=o.length,d=-1,u;for(const f of a)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(f,o[l].key,d,a)]).data=f;for(l=0,u=lS(t(o));l<c;++l)o[u[l]].index=l;return n(o,u),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Ut(Array.from(a)),i):e},i.value=function(a){return arguments.length?(s=typeof a=="function"?a:Ut(+a),i):s},i.order=function(a){return arguments.length?(t=a==null?Vj:typeof a=="function"?a:Ut(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??ud,i):n},i}function fZ(e,t){if((s=e.length)>0){for(var n,s,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<s;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<s;++n)e[n][i][1]/=o}ud(e,t)}}function hZ(e,t){if((i=e.length)>0){for(var n=0,s=e[t[0]],i,a=s.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;s[n][1]+=s[n][0]=-l/2}ud(e,t)}}function mZ(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,s=1,i,a,o;s<a;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[s][1]||0,h=u[s-1][1]||0,p=(f-h)/2,v=0;v<l;++v){var g=e[t[v]],y=g[s][1]||0,j=g[s-1][1]||0;p+=y-j}c+=f,d+=p*f}i[s-1][1]+=i[s-1][0]=n,c&&(n-=d/c)}i[s-1][1]+=i[s-1][0]=n,ud(e,t)}}function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}var pZ=["type","size","sizeType"];function Wj(){return Wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Wj.apply(this,arguments)}function SA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function kA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(n),!0).forEach(function(s){gZ(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function gZ(e,t,n){return t=xZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xZ(e){var t=vZ(e,"string");return Qf(t)=="symbol"?t:t+""}function vZ(e,t){if(Qf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Qf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yZ(e,t){if(e==null)return{};var n=bZ(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function bZ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var UF={symbolCircle:cS,symbolCross:zX,symbolDiamond:UX,symbolSquare:VX,symbolStar:GX,symbolTriangle:YX,symbolWye:JX},jZ=Math.PI/180,wZ=function(t){var n="symbol".concat(Kv(t));return UF[n]||cS},NZ=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*jZ;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},SZ=function(t,n){UF["symbol".concat(Kv(t))]=n},dS=function(t){var n=t.type,s=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,o=t.sizeType,l=o===void 0?"area":o,c=yZ(t,pZ),d=kA(kA({},c),{},{type:s,size:a,sizeType:l}),u=function(){var y=wZ(s),j=XX().type(y).size(NZ(a,l,s));return j()},f=d.className,h=d.cx,p=d.cy,v=yt(d,!0);return h===+h&&p===+p&&a===+a?q.createElement("path",Wj({},v,{className:Nt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};dS.registerSymbol=SZ;function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function Hj(){return Hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hj.apply(this,arguments)}function CA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function kZ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(n),!0).forEach(function(s){Jf(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function CZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AZ(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,WF(s.key),s)}}function PZ(e,t,n){return t&&AZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EZ(e,t,n){return t=Lg(t),TZ(e,VF()?Reflect.construct(t,n||[],Lg(e).constructor):t.apply(e,n))}function TZ(e,t){if(t&&(fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OZ(e)}function OZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VF=function(){return!!e})()}function Lg(e){return Lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lg(e)}function _Z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kj(e,t)}function Kj(e,t){return Kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Kj(e,t)}function Jf(e,t,n){return t=WF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WF(e){var t=IZ(e,"string");return fd(t)=="symbol"?t:t+""}function IZ(e,t){if(fd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(fd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ns=32,uS=function(e){function t(){return CZ(this,t),EZ(this,t,arguments)}return _Z(t,e),PZ(t,[{key:"renderIcon",value:function(s){var i=this.props.inactiveColor,a=ns/2,o=ns/6,l=ns/3,c=s.inactive?i:s.color;if(s.type==="plainline")return q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:a,x2:ns,y2:a,className:"recharts-legend-icon"});if(s.type==="line")return q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(ns,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(s.type==="rect")return q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ns/8,"h").concat(ns,"v").concat(ns*3/4,"h").concat(-ns,"z"),className:"recharts-legend-icon"});if(q.isValidElement(s.legendIcon)){var d=kZ({},s);return delete d.legendIcon,q.cloneElement(s.legendIcon,d)}return q.createElement(dS,{fill:c,cx:a,cy:a,size:ns,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,u={x:0,y:0,width:ns,height:ns},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,v){var g=p.formatter||c,y=Nt(Jf(Jf({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var j=ft(p.value)?null:p.value;ea(!ft(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var m=p.inactive?d:p.color;return q.createElement("li",Hj({className:y,style:f,key:"legend-item-".concat(v)},Ig(s.props,p,v)),q.createElement($j,{width:o,height:o,viewBox:u,style:h},s.renderIcon(p)),q.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},g?g(j,p,v):j))})}},{key:"render",value:function(){var s=this.props,i=s.payload,a=s.layout,o=s.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return q.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(x.PureComponent);Jf(uS,"displayName","Legend");Jf(uS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var RZ=Rv;function MZ(){this.__data__=new RZ,this.size=0}var FZ=MZ;function $Z(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var DZ=$Z;function LZ(e){return this.__data__.get(e)}var BZ=LZ;function zZ(e){return this.__data__.has(e)}var qZ=zZ,UZ=Rv,VZ=XN,WZ=ZN,HZ=200;function KZ(e,t){var n=this.__data__;if(n instanceof UZ){var s=n.__data__;if(!VZ||s.length<HZ-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new WZ(s)}return n.set(e,t),this.size=n.size,this}var GZ=KZ,YZ=Rv,QZ=FZ,JZ=DZ,XZ=BZ,ZZ=qZ,eee=GZ;function tu(e){var t=this.__data__=new YZ(e);this.size=t.size}tu.prototype.clear=QZ;tu.prototype.delete=JZ;tu.prototype.get=XZ;tu.prototype.has=ZZ;tu.prototype.set=eee;var HF=tu,tee="__lodash_hash_undefined__";function nee(e){return this.__data__.set(e,tee),this}var ree=nee;function see(e){return this.__data__.has(e)}var iee=see,aee=ZN,oee=ree,lee=iee;function Bg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new aee;++t<n;)this.add(e[t])}Bg.prototype.add=Bg.prototype.push=oee;Bg.prototype.has=lee;var KF=Bg;function cee(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var GF=cee;function dee(e,t){return e.has(t)}var YF=dee,uee=KF,fee=GF,hee=YF,mee=1,pee=2;function gee(e,t,n,s,i,a){var o=n&mee,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=a.get(e),u=a.get(t);if(d&&u)return d==t&&u==e;var f=-1,h=!0,p=n&pee?new uee:void 0;for(a.set(e,t),a.set(t,e);++f<l;){var v=e[f],g=t[f];if(s)var y=o?s(g,v,f,t,e,a):s(v,g,f,e,t,a);if(y!==void 0){if(y)continue;h=!1;break}if(p){if(!fee(t,function(j,m){if(!hee(p,m)&&(v===j||i(v,j,n,s,a)))return p.push(m)})){h=!1;break}}else if(!(v===g||i(v,g,n,s,a))){h=!1;break}}return a.delete(e),a.delete(t),h}var QF=gee,xee=Ei,vee=xee.Uint8Array,yee=vee;function bee(e){var t=-1,n=Array(e.size);return e.forEach(function(s,i){n[++t]=[i,s]}),n}var jee=bee;function wee(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var fS=wee,AA=am,PA=yee,Nee=JN,See=QF,kee=jee,Cee=fS,Aee=1,Pee=2,Eee="[object Boolean]",Tee="[object Date]",Oee="[object Error]",_ee="[object Map]",Iee="[object Number]",Ree="[object RegExp]",Mee="[object Set]",Fee="[object String]",$ee="[object Symbol]",Dee="[object ArrayBuffer]",Lee="[object DataView]",EA=AA?AA.prototype:void 0,kb=EA?EA.valueOf:void 0;function Bee(e,t,n,s,i,a,o){switch(n){case Lee:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Dee:return!(e.byteLength!=t.byteLength||!a(new PA(e),new PA(t)));case Eee:case Tee:case Iee:return Nee(+e,+t);case Oee:return e.name==t.name&&e.message==t.message;case Ree:case Fee:return e==t+"";case _ee:var l=kee;case Mee:var c=s&Aee;if(l||(l=Cee),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;s|=Pee,o.set(e,t);var u=See(l(e),l(t),s,i,a,o);return o.delete(e),u;case $ee:if(kb)return kb.call(e)==kb.call(t)}return!1}var zee=Bee;function qee(e,t){for(var n=-1,s=t.length,i=e.length;++n<s;)e[i+n]=t[n];return e}var JF=qee,Uee=JF,Vee=Fr;function Wee(e,t,n){var s=t(e);return Vee(e)?s:Uee(s,n(e))}var Hee=Wee;function Kee(e,t){for(var n=-1,s=e==null?0:e.length,i=0,a=[];++n<s;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var Gee=Kee;function Yee(){return[]}var Qee=Yee,Jee=Gee,Xee=Qee,Zee=Object.prototype,ete=Zee.propertyIsEnumerable,TA=Object.getOwnPropertySymbols,tte=TA?function(e){return e==null?[]:(e=Object(e),Jee(TA(e),function(t){return ete.call(e,t)}))}:Xee,nte=tte;function rte(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var ste=rte,ite=ya,ate=ba,ote="[object Arguments]";function lte(e){return ate(e)&&ite(e)==ote}var cte=lte,OA=cte,dte=ba,XF=Object.prototype,ute=XF.hasOwnProperty,fte=XF.propertyIsEnumerable,hte=OA(function(){return arguments}())?OA:function(e){return dte(e)&&ute.call(e,"callee")&&!fte.call(e,"callee")},hS=hte,zg={exports:{}};function mte(){return!1}var pte=mte;zg.exports;(function(e,t){var n=Ei,s=pte,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(zg,zg.exports);var ZF=zg.exports,gte=9007199254740991,xte=/^(?:0|[1-9]\d*)$/;function vte(e,t){var n=typeof e;return t=t??gte,!!t&&(n=="number"||n!="symbol"&&xte.test(e))&&e>-1&&e%1==0&&e<t}var mS=vte,yte=9007199254740991;function bte(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yte}var pS=bte,jte=ya,wte=pS,Nte=ba,Ste="[object Arguments]",kte="[object Array]",Cte="[object Boolean]",Ate="[object Date]",Pte="[object Error]",Ete="[object Function]",Tte="[object Map]",Ote="[object Number]",_te="[object Object]",Ite="[object RegExp]",Rte="[object Set]",Mte="[object String]",Fte="[object WeakMap]",$te="[object ArrayBuffer]",Dte="[object DataView]",Lte="[object Float32Array]",Bte="[object Float64Array]",zte="[object Int8Array]",qte="[object Int16Array]",Ute="[object Int32Array]",Vte="[object Uint8Array]",Wte="[object Uint8ClampedArray]",Hte="[object Uint16Array]",Kte="[object Uint32Array]",Kt={};Kt[Lte]=Kt[Bte]=Kt[zte]=Kt[qte]=Kt[Ute]=Kt[Vte]=Kt[Wte]=Kt[Hte]=Kt[Kte]=!0;Kt[Ste]=Kt[kte]=Kt[$te]=Kt[Cte]=Kt[Dte]=Kt[Ate]=Kt[Pte]=Kt[Ete]=Kt[Tte]=Kt[Ote]=Kt[_te]=Kt[Ite]=Kt[Rte]=Kt[Mte]=Kt[Fte]=!1;function Gte(e){return Nte(e)&&wte(e.length)&&!!Kt[jte(e)]}var Yte=Gte;function Qte(e){return function(t){return e(t)}}var e$=Qte,qg={exports:{}};qg.exports;(function(e,t){var n=lF,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===s,o=a&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(qg,qg.exports);var Jte=qg.exports,Xte=Yte,Zte=e$,_A=Jte,IA=_A&&_A.isTypedArray,ene=IA?Zte(IA):Xte,t$=ene,tne=ste,nne=hS,rne=Fr,sne=ZF,ine=mS,ane=t$,one=Object.prototype,lne=one.hasOwnProperty;function cne(e,t){var n=rne(e),s=!n&&nne(e),i=!n&&!s&&sne(e),a=!n&&!s&&!i&&ane(e),o=n||s||i||a,l=o?tne(e.length,String):[],c=l.length;for(var d in e)(t||lne.call(e,d))&&!(o&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||ine(d,c)))&&l.push(d);return l}var dne=cne,une=Object.prototype;function fne(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||une;return e===n}var hne=fne;function mne(e,t){return function(n){return e(t(n))}}var n$=mne,pne=n$,gne=pne(Object.keys,Object),xne=gne,vne=hne,yne=xne,bne=Object.prototype,jne=bne.hasOwnProperty;function wne(e){if(!vne(e))return yne(e);var t=[];for(var n in Object(e))jne.call(e,n)&&n!="constructor"&&t.push(n);return t}var Nne=wne,Sne=QN,kne=pS;function Cne(e){return e!=null&&kne(e.length)&&!Sne(e)}var dm=Cne,Ane=dne,Pne=Nne,Ene=dm;function Tne(e){return Ene(e)?Ane(e):Pne(e)}var Jv=Tne,One=Hee,_ne=nte,Ine=Jv;function Rne(e){return One(e,Ine,_ne)}var Mne=Rne,RA=Mne,Fne=1,$ne=Object.prototype,Dne=$ne.hasOwnProperty;function Lne(e,t,n,s,i,a){var o=n&Fne,l=RA(e),c=l.length,d=RA(t),u=d.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:Dne.call(t,h)))return!1}var p=a.get(e),v=a.get(t);if(p&&v)return p==t&&v==e;var g=!0;a.set(e,t),a.set(t,e);for(var y=o;++f<c;){h=l[f];var j=e[h],m=t[h];if(s)var b=o?s(m,j,h,t,e,a):s(j,m,h,e,t,a);if(!(b===void 0?j===m||i(j,m,n,s,a):b)){g=!1;break}y||(y=h=="constructor")}if(g&&!y){var N=e.constructor,w=t.constructor;N!=w&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(g=!1)}return a.delete(e),a.delete(t),g}var Bne=Lne,zne=Rl,qne=Ei,Une=zne(qne,"DataView"),Vne=Une,Wne=Rl,Hne=Ei,Kne=Wne(Hne,"Promise"),Gne=Kne,Yne=Rl,Qne=Ei,Jne=Yne(Qne,"Set"),r$=Jne,Xne=Rl,Zne=Ei,ere=Xne(Zne,"WeakMap"),tre=ere,Gj=Vne,Yj=XN,Qj=Gne,Jj=r$,Xj=tre,s$=ya,nu=dF,MA="[object Map]",nre="[object Object]",FA="[object Promise]",$A="[object Set]",DA="[object WeakMap]",LA="[object DataView]",rre=nu(Gj),sre=nu(Yj),ire=nu(Qj),are=nu(Jj),ore=nu(Xj),qo=s$;(Gj&&qo(new Gj(new ArrayBuffer(1)))!=LA||Yj&&qo(new Yj)!=MA||Qj&&qo(Qj.resolve())!=FA||Jj&&qo(new Jj)!=$A||Xj&&qo(new Xj)!=DA)&&(qo=function(e){var t=s$(e),n=t==nre?e.constructor:void 0,s=n?nu(n):"";if(s)switch(s){case rre:return LA;case sre:return MA;case ire:return FA;case are:return $A;case ore:return DA}return t});var lre=qo,Cb=HF,cre=QF,dre=zee,ure=Bne,BA=lre,zA=Fr,qA=ZF,fre=t$,hre=1,UA="[object Arguments]",VA="[object Array]",Km="[object Object]",mre=Object.prototype,WA=mre.hasOwnProperty;function pre(e,t,n,s,i,a){var o=zA(e),l=zA(t),c=o?VA:BA(e),d=l?VA:BA(t);c=c==UA?Km:c,d=d==UA?Km:d;var u=c==Km,f=d==Km,h=c==d;if(h&&qA(e)){if(!qA(t))return!1;o=!0,u=!1}if(h&&!u)return a||(a=new Cb),o||fre(e)?cre(e,t,n,s,i,a):dre(e,t,c,n,s,i,a);if(!(n&hre)){var p=u&&WA.call(e,"__wrapped__"),v=f&&WA.call(t,"__wrapped__");if(p||v){var g=p?e.value():e,y=v?t.value():t;return a||(a=new Cb),i(g,y,n,s,a)}}return h?(a||(a=new Cb),ure(e,t,n,s,i,a)):!1}var gre=pre,xre=gre,HA=ba;function i$(e,t,n,s,i){return e===t?!0:e==null||t==null||!HA(e)&&!HA(t)?e!==e&&t!==t:xre(e,t,n,s,i$,i)}var gS=i$,vre=HF,yre=gS,bre=1,jre=2;function wre(e,t,n,s){var i=n.length,a=i,o=!s;if(e==null)return!a;for(e=Object(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=n[i];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var f=new vre;if(s)var h=s(d,u,c,e,t,f);if(!(h===void 0?yre(u,d,bre|jre,s,f):h))return!1}}return!0}var Nre=wre,Sre=To;function kre(e){return e===e&&!Sre(e)}var a$=kre,Cre=a$,Are=Jv;function Pre(e){for(var t=Are(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,Cre(i)]}return t}var Ere=Pre;function Tre(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var o$=Tre,Ore=Nre,_re=Ere,Ire=o$;function Rre(e){var t=_re(e);return t.length==1&&t[0][2]?Ire(t[0][0],t[0][1]):function(n){return n===e||Ore(n,e,t)}}var Mre=Rre;function Fre(e,t){return e!=null&&t in Object(e)}var $re=Fre,Dre=pF,Lre=hS,Bre=Fr,zre=mS,qre=pS,Ure=Fv;function Vre(e,t,n){t=Dre(t,e);for(var s=-1,i=t.length,a=!1;++s<i;){var o=Ure(t[s]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++s!=i?a:(i=e==null?0:e.length,!!i&&qre(i)&&zre(o,i)&&(Bre(e)||Lre(e)))}var Wre=Vre,Hre=$re,Kre=Wre;function Gre(e,t){return e!=null&&Kre(e,t,Hre)}var Yre=Gre,Qre=gS,Jre=gF,Xre=Yre,Zre=YN,ese=a$,tse=o$,nse=Fv,rse=1,sse=2;function ise(e,t){return Zre(e)&&ese(t)?tse(nse(e),t):function(n){var s=Jre(n,e);return s===void 0&&s===t?Xre(n,e):Qre(t,s,rse|sse)}}var ase=ise;function ose(e){return e}var ru=ose;function lse(e){return function(t){return t==null?void 0:t[e]}}var cse=lse,dse=nS;function use(e){return function(t){return dse(t,e)}}var fse=use,hse=cse,mse=fse,pse=YN,gse=Fv;function xse(e){return pse(e)?hse(gse(e)):mse(e)}var vse=xse,yse=Mre,bse=ase,jse=ru,wse=Fr,Nse=vse;function Sse(e){return typeof e=="function"?e:e==null?jse:typeof e=="object"?wse(e)?bse(e[0],e[1]):yse(e):Nse(e)}var Oo=Sse;function kse(e,t,n,s){for(var i=e.length,a=n+(s?1:-1);s?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var l$=kse;function Cse(e){return e!==e}var Ase=Cse;function Pse(e,t,n){for(var s=n-1,i=e.length;++s<i;)if(e[s]===t)return s;return-1}var Ese=Pse,Tse=l$,Ose=Ase,_se=Ese;function Ise(e,t,n){return t===t?_se(e,t,n):Tse(e,Ose,n)}var Rse=Ise,Mse=Rse;function Fse(e,t){var n=e==null?0:e.length;return!!n&&Mse(e,t,0)>-1}var $se=Fse;function Dse(e,t,n){for(var s=-1,i=e==null?0:e.length;++s<i;)if(n(t,e[s]))return!0;return!1}var Lse=Dse;function Bse(){}var zse=Bse,Ab=r$,qse=zse,Use=fS,Vse=1/0,Wse=Ab&&1/Use(new Ab([,-0]))[1]==Vse?function(e){return new Ab(e)}:qse,Hse=Wse,Kse=KF,Gse=$se,Yse=Lse,Qse=YF,Jse=Hse,Xse=fS,Zse=200;function eie(e,t,n){var s=-1,i=Gse,a=e.length,o=!0,l=[],c=l;if(n)o=!1,i=Yse;else if(a>=Zse){var d=t?null:Jse(e);if(d)return Xse(d);o=!1,i=Qse,c=new Kse}else c=t?[]:l;e:for(;++s<a;){var u=e[s],f=t?t(u):u;if(u=n||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(u)}else i(c,f,n)||(c!==l&&c.push(f),l.push(u))}return l}var tie=eie,nie=Oo,rie=tie;function sie(e,t){return e&&e.length?rie(e,nie(t)):[]}var iie=sie;const KA=Dt(iie);function c$(e,t,n){return t===!0?KA(e,n):ft(t)?KA(e,t):e}function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}var aie=["ref"];function GA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GA(Object(n),!0).forEach(function(s){Xv(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function oie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YA(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,u$(s.key),s)}}function lie(e,t,n){return t&&YA(e.prototype,t),n&&YA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cie(e,t,n){return t=Ug(t),die(e,d$()?Reflect.construct(t,n||[],Ug(e).constructor):t.apply(e,n))}function die(e,t){if(t&&(hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uie(e)}function uie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d$=function(){return!!e})()}function Ug(e){return Ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ug(e)}function fie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}function Zj(e,t){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Zj(e,t)}function Xv(e,t,n){return t=u$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u$(e){var t=hie(e,"string");return hd(t)=="symbol"?t:t+""}function hie(e,t){if(hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(hd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mie(e,t){if(e==null)return{};var n=pie(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function pie(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function gie(e){return e.value}function xie(e,t){if(q.isValidElement(e))return q.cloneElement(e,t);if(typeof e=="function")return q.createElement(e,t);t.ref;var n=mie(t,aie);return q.createElement(uS,n)}var QA=1,Tc=function(e){function t(){var n;oie(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=cie(this,t,[].concat(i)),Xv(n,"lastBoundingBox",{width:-1,height:-1}),n}return fie(t,e),lie(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>QA||Math.abs(i.height-this.lastBoundingBox.height)>QA)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,s&&s(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ri({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,u=i.chartHeight,f,h;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();f={left:((d||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();h={top:((u||0)-v.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ri(Ri({},f),h)}},{key:"render",value:function(){var s=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,u=i.payload,f=Ri(Ri({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return q.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){s.wrapperNode=p}},xie(a,Ri(Ri({},this.props),{},{payload:c$(u,d,gie)})))}}],[{key:"getWithHeight",value:function(s,i){var a=Ri(Ri({},this.defaultProps),s.props),o=a.layout;return o==="vertical"&&Te(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||i}:null}}])}(x.PureComponent);Xv(Tc,"displayName","Legend");Xv(Tc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var JA=am,vie=hS,yie=Fr,XA=JA?JA.isConcatSpreadable:void 0;function bie(e){return yie(e)||vie(e)||!!(XA&&e&&e[XA])}var jie=bie,wie=JF,Nie=jie;function f$(e,t,n,s,i){var a=-1,o=e.length;for(n||(n=Nie),i||(i=[]);++a<o;){var l=e[a];t>0&&n(l)?t>1?f$(l,t-1,n,s,i):wie(i,l):s||(i[i.length]=l)}return i}var h$=f$;function Sie(e){return function(t,n,s){for(var i=-1,a=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++i];if(n(a[c],c,a)===!1)break}return t}}var kie=Sie,Cie=kie,Aie=Cie(),Pie=Aie,Eie=Pie,Tie=Jv;function Oie(e,t){return e&&Eie(e,t,Tie)}var m$=Oie,_ie=dm;function Iie(e,t){return function(n,s){if(n==null)return n;if(!_ie(n))return e(n,s);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&s(o[a],a,o)!==!1;);return n}}var Rie=Iie,Mie=m$,Fie=Rie,$ie=Fie(Mie),xS=$ie,Die=xS,Lie=dm;function Bie(e,t){var n=-1,s=Lie(e)?Array(e.length):[];return Die(e,function(i,a,o){s[++n]=t(i,a,o)}),s}var p$=Bie;function zie(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var qie=zie,ZA=Qd;function Uie(e,t){if(e!==t){var n=e!==void 0,s=e===null,i=e===e,a=ZA(e),o=t!==void 0,l=t===null,c=t===t,d=ZA(t);if(!l&&!d&&!a&&e>t||a&&o&&c&&!l&&!d||s&&o&&c||!n&&c||!i)return 1;if(!s&&!a&&!d&&e<t||d&&n&&i&&!s&&!a||l&&n&&i||!o&&i||!c)return-1}return 0}var Vie=Uie,Wie=Vie;function Hie(e,t,n){for(var s=-1,i=e.criteria,a=t.criteria,o=i.length,l=n.length;++s<o;){var c=Wie(i[s],a[s]);if(c){if(s>=l)return c;var d=n[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var Kie=Hie,Pb=tS,Gie=nS,Yie=Oo,Qie=p$,Jie=qie,Xie=e$,Zie=Kie,eae=ru,tae=Fr;function nae(e,t,n){t.length?t=Pb(t,function(a){return tae(a)?function(o){return Gie(o,a.length===1?a[0]:a)}:a}):t=[eae];var s=-1;t=Pb(t,Xie(Yie));var i=Qie(e,function(a,o,l){var c=Pb(t,function(d){return d(a)});return{criteria:c,index:++s,value:a}});return Jie(i,function(a,o){return Zie(a,o,n)})}var rae=nae;function sae(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var iae=sae,aae=iae,eP=Math.max;function oae(e,t,n){return t=eP(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,a=eP(s.length-t,0),o=Array(a);++i<a;)o[i]=s[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=s[i];return l[t]=n(o),aae(e,this,l)}}var lae=oae;function cae(e){return function(){return e}}var dae=cae,uae=Rl,fae=function(){try{var e=uae(Object,"defineProperty");return e({},"",{}),e}catch{}}(),g$=fae,hae=dae,tP=g$,mae=ru,pae=tP?function(e,t){return tP(e,"toString",{configurable:!0,enumerable:!1,value:hae(t),writable:!0})}:mae,gae=pae,xae=800,vae=16,yae=Date.now;function bae(e){var t=0,n=0;return function(){var s=yae(),i=vae-(s-n);if(n=s,i>0){if(++t>=xae)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var jae=bae,wae=gae,Nae=jae,Sae=Nae(wae),kae=Sae,Cae=ru,Aae=lae,Pae=kae;function Eae(e,t){return Pae(Aae(e,t,Cae),e+"")}var Tae=Eae,Oae=JN,_ae=dm,Iae=mS,Rae=To;function Mae(e,t,n){if(!Rae(n))return!1;var s=typeof t;return(s=="number"?_ae(n)&&Iae(t,n.length):s=="string"&&t in n)?Oae(n[t],e):!1}var Zv=Mae,Fae=h$,$ae=rae,Dae=Tae,nP=Zv,Lae=Dae(function(e,t){if(e==null)return[];var n=t.length;return n>1&&nP(e,t[0],t[1])?t=[]:n>2&&nP(t[0],t[1],t[2])&&(t=[t[0]]),$ae(e,Fae(t,1),[])}),Bae=Lae;const vS=Dt(Bae);function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function ew(){return ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ew.apply(this,arguments)}function zae(e,t){return Wae(e)||Vae(e,t)||Uae(e,t)||qae()}function qae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uae(e,t){if(e){if(typeof e=="string")return rP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rP(e,t)}}function rP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Vae(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Wae(e){if(Array.isArray(e))return e}function sP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Eb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(n),!0).forEach(function(s){Hae(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sP(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Hae(e,t,n){return t=Kae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kae(e){var t=Gae(e,"string");return Xf(t)=="symbol"?t:t+""}function Gae(e,t){if(Xf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Xf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yae(e){return Array.isArray(e)&&Rn(e[0])&&Rn(e[1])?e.join(" ~ "):e}var Qae=function(t){var n=t.separator,s=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,f=t.formatter,h=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,g=t.label,y=t.labelFormatter,j=t.accessibilityLayer,m=j===void 0?!1:j,b=function(){if(u&&u.length){var A={padding:0,margin:0},T=(h?vS(u,h):u).map(function(M,O){if(M.type==="none")return null;var C=Eb({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),R=M.formatter||f||Yae,I=M.value,B=M.name,H=I,Q=B;if(R&&H!=null&&Q!=null){var D=R(I,B,M,O,u);if(Array.isArray(D)){var te=zae(D,2);H=te[0],Q=te[1]}else H=D}return q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:C},Rn(Q)?q.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,Rn(Q)?q.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,q.createElement("span",{className:"recharts-tooltip-item-value"},H),q.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return q.createElement("ul",{className:"recharts-tooltip-item-list",style:A},T)}return null},N=Eb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=Eb({margin:0},d),S=!xt(g),k=S?g:"",P=Nt("recharts-default-tooltip",p),E=Nt("recharts-tooltip-label",v);S&&y&&u!==void 0&&u!==null&&(k=y(g,u));var _=m?{role:"status","aria-live":"assertive"}:{};return q.createElement("div",ew({className:P,style:N},_),q.createElement("p",{className:E,style:w},q.isValidElement(k)?k:"".concat(k)),b())};function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function Gm(e,t,n){return t=Jae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jae(e){var t=Xae(e,"string");return Zf(t)=="symbol"?t:t+""}function Xae(e,t){if(Zf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Zf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Su="recharts-tooltip-wrapper",Zae={visibility:"hidden"};function eoe(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return Nt(Su,Gm(Gm(Gm(Gm({},"".concat(Su,"-right"),Te(n)&&t&&Te(t.x)&&n>=t.x),"".concat(Su,"-left"),Te(n)&&t&&Te(t.x)&&n<t.x),"".concat(Su,"-bottom"),Te(s)&&t&&Te(t.y)&&s>=t.y),"".concat(Su,"-top"),Te(s)&&t&&Te(t.y)&&s<t.y))}function iP(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(a&&Te(a[s]))return a[s];var u=n[s]-l-i,f=n[s]+i;if(t[s])return o[s]?u:f;if(o[s]){var h=u,p=c[s];return h<p?Math.max(f,c[s]):Math.max(u,c[s])}var v=f+l,g=c[s]+d;return v>g?Math.max(u,c[s]):Math.max(f,c[s])}function toe(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function noe(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,i=e.position,a=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,f;return o.height>0&&o.width>0&&n?(u=iP({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=iP({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=toe({translateX:u,translateY:f,useTranslate3d:l})):d=Zae,{cssProperties:d,cssClasses:eoe({translateX:u,translateY:f,coordinate:n})}}function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}function aP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function oP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(n),!0).forEach(function(s){nw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function roe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function soe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,v$(s.key),s)}}function ioe(e,t,n){return t&&soe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aoe(e,t,n){return t=Vg(t),ooe(e,x$()?Reflect.construct(t,n||[],Vg(e).constructor):t.apply(e,n))}function ooe(e,t){if(t&&(md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return loe(e)}function loe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x$=function(){return!!e})()}function Vg(e){return Vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vg(e)}function coe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tw(e,t)}function tw(e,t){return tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},tw(e,t)}function nw(e,t,n){return t=v$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v$(e){var t=doe(e,"string");return md(t)=="symbol"?t:t+""}function doe(e,t){if(md(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(md(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lP=1,uoe=function(e){function t(){var n;roe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=aoe(this,t,[].concat(i)),nw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),nw(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),n}return coe(t,e),ioe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>lP||Math.abs(s.height-this.state.lastBoundingBox.height)>lP)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,u=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,p=i.offset,v=i.position,g=i.reverseDirection,y=i.useTranslate3d,j=i.viewBox,m=i.wrapperStyle,b=noe({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:p,position:v,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:j}),N=b.cssClasses,w=b.cssProperties,S=oP(oP({transition:h&&a?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},m);return q.createElement("div",{tabIndex:-1,className:N,style:S,ref:function(P){s.wrapperNode=P}},d)}}])}(x.PureComponent),foe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ta={isSsr:foe(),get:function(t){return ta[t]},set:function(t,n){if(typeof t=="string")ta[t]=n;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(i){ta[i]=t[i]})}}};function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function dP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(n),!0).forEach(function(s){yS(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function moe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,b$(s.key),s)}}function poe(e,t,n){return t&&moe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function goe(e,t,n){return t=Wg(t),xoe(e,y$()?Reflect.construct(t,n||[],Wg(e).constructor):t.apply(e,n))}function xoe(e,t){if(t&&(pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return voe(e)}function voe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y$=function(){return!!e})()}function Wg(e){return Wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wg(e)}function yoe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rw(e,t)}function rw(e,t){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},rw(e,t)}function yS(e,t,n){return t=b$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b$(e){var t=boe(e,"string");return pd(t)=="symbol"?t:t+""}function boe(e,t){if(pd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(pd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function joe(e){return e.dataKey}function woe(e,t){return q.isValidElement(e)?q.cloneElement(e,t):typeof e=="function"?q.createElement(e,t):q.createElement(Qae,t)}var Is=function(e){function t(){return hoe(this,t),goe(this,t,arguments)}return yoe(t,e),poe(t,[{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,u=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,v=i.payload,g=i.payloadUniqBy,y=i.position,j=i.reverseDirection,m=i.useTranslate3d,b=i.viewBox,N=i.wrapperStyle,w=v??[];f&&w.length&&(w=c$(v.filter(function(k){return k.value!=null&&(k.hide!==!0||s.props.includeHidden)}),g,joe));var S=w.length>0;return q.createElement(uoe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:a,coordinate:u,hasPayload:S,offset:p,position:y,reverseDirection:j,useTranslate3d:m,viewBox:b,wrapperStyle:N},woe(d,dP(dP({},this.props),{},{payload:w})))}}])}(x.PureComponent);yS(Is,"displayName","Tooltip");yS(Is,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ta.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Noe=Ei,Soe=function(){return Noe.Date.now()},koe=Soe,Coe=/\s/;function Aoe(e){for(var t=e.length;t--&&Coe.test(e.charAt(t)););return t}var Poe=Aoe,Eoe=Poe,Toe=/^\s+/;function Ooe(e){return e&&e.slice(0,Eoe(e)+1).replace(Toe,"")}var _oe=Ooe,Ioe=_oe,uP=To,Roe=Qd,fP=NaN,Moe=/^[-+]0x[0-9a-f]+$/i,Foe=/^0b[01]+$/i,$oe=/^0o[0-7]+$/i,Doe=parseInt;function Loe(e){if(typeof e=="number")return e;if(Roe(e))return fP;if(uP(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=uP(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ioe(e);var n=Foe.test(e);return n||$oe.test(e)?Doe(e.slice(2),n?2:8):Moe.test(e)?fP:+e}var j$=Loe,Boe=To,Tb=koe,hP=j$,zoe="Expected a function",qoe=Math.max,Uoe=Math.min;function Voe(e,t,n){var s,i,a,o,l,c,d=0,u=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(zoe);t=hP(t)||0,Boe(n)&&(u=!!n.leading,f="maxWait"in n,a=f?qoe(hP(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h);function p(S){var k=s,P=i;return s=i=void 0,d=S,o=e.apply(P,k),o}function v(S){return d=S,l=setTimeout(j,t),u?p(S):o}function g(S){var k=S-c,P=S-d,E=t-k;return f?Uoe(E,a-P):E}function y(S){var k=S-c,P=S-d;return c===void 0||k>=t||k<0||f&&P>=a}function j(){var S=Tb();if(y(S))return m(S);l=setTimeout(j,g(S))}function m(S){return l=void 0,h&&s?p(S):(s=i=void 0,o)}function b(){l!==void 0&&clearTimeout(l),d=0,s=c=i=l=void 0}function N(){return l===void 0?o:m(Tb())}function w(){var S=Tb(),k=y(S);if(s=arguments,i=this,c=S,k){if(l===void 0)return v(c);if(f)return clearTimeout(l),l=setTimeout(j,t),p(c)}return l===void 0&&(l=setTimeout(j,t)),o}return w.cancel=b,w.flush=N,w}var Woe=Voe,Hoe=Woe,Koe=To,Goe="Expected a function";function Yoe(e,t,n){var s=!0,i=!0;if(typeof e!="function")throw new TypeError(Goe);return Koe(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),Hoe(e,t,{leading:s,maxWait:t,trailing:i})}var Qoe=Yoe;const w$=Dt(Qoe);function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(e)}function mP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ym(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(n),!0).forEach(function(s){Joe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Joe(e,t,n){return t=Xoe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xoe(e){var t=Zoe(e,"string");return eh(t)=="symbol"?t:t+""}function Zoe(e,t){if(eh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(eh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ele(e,t){return sle(e)||rle(e,t)||nle(e,t)||tle()}function tle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nle(e,t){if(e){if(typeof e=="string")return pP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pP(e,t)}}function pP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function rle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function sle(e){if(Array.isArray(e))return e}var gP=x.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,i=s===void 0?{width:-1,height:-1}:s,a=e.width,o=a===void 0?"100%":a,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,f=e.minHeight,h=e.maxHeight,p=e.children,v=e.debounce,g=v===void 0?0:v,y=e.id,j=e.className,m=e.onResize,b=e.style,N=b===void 0?{}:b,w=x.useRef(null),S=x.useRef();S.current=m,x.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var k=x.useState({containerWidth:i.width,containerHeight:i.height}),P=ele(k,2),E=P[0],_=P[1],F=x.useCallback(function(T,M){_(function(O){var C=Math.round(T),R=Math.round(M);return O.containerWidth===C&&O.containerHeight===R?O:{containerWidth:C,containerHeight:R}})},[]);x.useEffect(function(){var T=function(B){var H,Q=B[0].contentRect,D=Q.width,te=Q.height;F(D,te),(H=S.current)===null||H===void 0||H.call(S,D,te)};g>0&&(T=w$(T,g,{trailing:!0,leading:!1}));var M=new ResizeObserver(T),O=w.current.getBoundingClientRect(),C=O.width,R=O.height;return F(C,R),M.observe(w.current),function(){M.disconnect()}},[F,g]);var A=x.useMemo(function(){var T=E.containerWidth,M=E.containerHeight;if(T<0||M<0)return null;ea(Yo(o)||Yo(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),ea(!n||n>0,"The aspect(%s) must be greater than zero.",n);var O=Yo(o)?T:o,C=Yo(c)?M:c;n&&n>0&&(O?C=O/n:C&&(O=C*n),h&&C>h&&(C=h)),ea(O>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,C,o,c,u,f,n);var R=!Array.isArray(p)&&Zi(p.type).endsWith("Chart");return q.Children.map(p,function(I){return q.isValidElement(I)?x.cloneElement(I,Ym({width:O,height:C},R?{style:Ym({height:"100%",width:"100%",maxHeight:C,maxWidth:O},I.props.style)}:{})):I})},[n,p,c,h,f,u,E,o]);return q.createElement("div",{id:y?"".concat(y):void 0,className:Nt("recharts-responsive-container",j),style:Ym(Ym({},N),{},{width:o,height:c,minWidth:u,minHeight:f,maxHeight:h}),ref:w},A)}),bS=function(t){return null};bS.displayName="Cell";function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(e)}function xP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function sw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(n),!0).forEach(function(s){ile(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ile(e,t,n){return t=ale(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ale(e){var t=ole(e,"string");return th(t)=="symbol"?t:t+""}function ole(e,t){if(th(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(th(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gl={widthCache:{},cacheCount:0},lle=2e3,cle={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vP="recharts_measurement_span";function dle(e){var t=sw({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var cf=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ta.isSsr)return{width:0,height:0};var s=dle(n),i=JSON.stringify({text:t,copyStyle:s});if(Gl.widthCache[i])return Gl.widthCache[i];try{var a=document.getElementById(vP);a||(a=document.createElement("span"),a.setAttribute("id",vP),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=sw(sw({},cle),s);Object.assign(a.style,o),a.textContent="".concat(t);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return Gl.widthCache[i]=c,++Gl.cacheCount>lle&&(Gl.cacheCount=0,Gl.widthCache={}),c}catch{return{width:0,height:0}}},ule=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function Hg(e,t){return ple(e)||mle(e,t)||hle(e,t)||fle()}function fle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hle(e,t){if(e){if(typeof e=="string")return yP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yP(e,t)}}function yP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function mle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function ple(e){if(Array.isArray(e))return e}function gle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bP(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,vle(s.key),s)}}function xle(e,t,n){return t&&bP(e.prototype,t),n&&bP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vle(e){var t=yle(e,"string");return nh(t)=="symbol"?t:t+""}function yle(e,t){if(nh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(nh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ble=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jle=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,N$={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wle=Object.keys(N$),pc="NaN";function Nle(e,t){return e*N$[t]}var Qm=function(){function e(t,n){gle(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!ble.test(n)&&(this.num=NaN,this.unit=""),wle.includes(n)&&(this.num=Nle(t,n),this.unit="px")}return xle(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,i=(s=jle.exec(n))!==null&&s!==void 0?s:[],a=Hg(i,3),o=a[1],l=a[2];return new e(parseFloat(o),l??"")}}])}();function S$(e){if(e.includes(pc))return pc;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=jP.exec(t))!==null&&n!==void 0?n:[],i=Hg(s,4),a=i[1],o=i[2],l=i[3],c=Qm.parse(a??""),d=Qm.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return pc;t=t.replace(jP,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=wP.exec(t))!==null&&f!==void 0?f:[],p=Hg(h,4),v=p[1],g=p[2],y=p[3],j=Qm.parse(v??""),m=Qm.parse(y??""),b=g==="+"?j.add(m):j.subtract(m);if(b.isNaN())return pc;t=t.replace(wP,b.toString())}return t}var NP=/\(([^()]*)\)/;function Sle(e){for(var t=e;t.includes("(");){var n=NP.exec(t),s=Hg(n,2),i=s[1];t=t.replace(NP,S$(i))}return t}function kle(e){var t=e.replace(/\s+/g,"");return t=Sle(t),t=S$(t),t}function Cle(e){try{return kle(e)}catch{return pc}}function Ob(e){var t=Cle(e.slice(5,-1));return t===pc?"":t}var Ale=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Ple=["dx","dy","angle","className","breakAll"];function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},iw.apply(this,arguments)}function SP(e,t){if(e==null)return{};var n=Ele(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Ele(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function kP(e,t){return Ile(e)||_le(e,t)||Ole(e,t)||Tle()}function Tle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ole(e,t){if(e){if(typeof e=="string")return CP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CP(e,t)}}function CP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function _le(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Ile(e){if(Array.isArray(e))return e}var k$=/[ \f\n\r\t\v\u2028\u2029]+/,C$=function(t){var n=t.children,s=t.breakAll,i=t.style;try{var a=[];xt(n)||(s?a=n.toString().split(""):a=n.toString().split(k$));var o=a.map(function(c){return{word:c,width:cf(c,i).width}}),l=s?0:cf("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Rle=function(t,n,s,i,a){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=Te(o),f=l,h=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce(function(C,R){var I=R.word,B=R.width,H=C[C.length-1];if(H&&(i==null||a||H.width+B+s<Number(i)))H.words.push(I),H.width+=B+s;else{var Q={words:[I],width:B};C.push(Q)}return C},[])},p=h(n),v=function(O){return O.reduce(function(C,R){return C.width>R.width?C:R})};if(!u)return p;for(var g="",y=function(O){var C=f.slice(0,O),R=C$({breakAll:d,style:c,children:C+g}).wordsWithComputedWidth,I=h(R),B=I.length>o||v(I).width>Number(i);return[B,I]},j=0,m=f.length-1,b=0,N;j<=m&&b<=f.length-1;){var w=Math.floor((j+m)/2),S=w-1,k=y(S),P=kP(k,2),E=P[0],_=P[1],F=y(w),A=kP(F,1),T=A[0];if(!E&&!T&&(j=w+1),E&&T&&(m=w-1),!E&&T){N=_;break}b++}return N||p},AP=function(t){var n=xt(t)?[]:t.toString().split(k$);return[{words:n}]},Mle=function(t){var n=t.width,s=t.scaleToFit,i=t.children,a=t.style,o=t.breakAll,l=t.maxLines;if((n||s)&&!ta.isSsr){var c,d,u=C$({breakAll:o,children:i,style:a});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;c=f,d=h}else return AP(i);return Rle({breakAll:o,children:i,maxLines:l,style:a},c,d,n,s)}return AP(i)},PP="#808080",Kg=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,f=u===void 0?!1:u,h=t.textAnchor,p=h===void 0?"start":h,v=t.verticalAnchor,g=v===void 0?"end":v,y=t.fill,j=y===void 0?PP:y,m=SP(t,Ale),b=x.useMemo(function(){return Mle({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:f,style:m.style,width:m.width})},[m.breakAll,m.children,m.maxLines,f,m.style,m.width]),N=m.dx,w=m.dy,S=m.angle,k=m.className,P=m.breakAll,E=SP(m,Ple);if(!Rn(s)||!Rn(a))return null;var _=s+(Te(N)?N:0),F=a+(Te(w)?w:0),A;switch(g){case"start":A=Ob("calc(".concat(d,")"));break;case"middle":A=Ob("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:A=Ob("calc(".concat(b.length-1," * -").concat(l,")"));break}var T=[];if(f){var M=b[0].width,O=m.width;T.push("scale(".concat((Te(O)?O/M:1)/M,")"))}return S&&T.push("rotate(".concat(S,", ").concat(_,", ").concat(F,")")),T.length&&(E.transform=T.join(" ")),q.createElement("text",iw({},yt(E,!0),{x:_,y:F,className:Nt("recharts-text",k),textAnchor:p,fill:j.includes("url")?PP:j}),b.map(function(C,R){var I=C.words.join(P?"":" ");return q.createElement("tspan",{x:_,dy:R===0?A:l,key:"".concat(I,"-").concat(R)},I)}))};function uo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fle(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jS(e){let t,n,s;e.length!==2?(t=uo,n=(l,c)=>uo(e(l),c),s=(l,c)=>e(l)-c):(t=e===uo||e===Fle?e:$le,n=e,s=e);function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;n(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;n(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=i(l,c,d,u-1);return f>d&&s(l[f-1],c)>-s(l[f],c)?f-1:f}return{left:i,center:o,right:a}}function $le(){return 0}function A$(e){return e===null?NaN:+e}function*Dle(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Lle=jS(uo),um=Lle.right;jS(A$).center;class EP extends Map{constructor(t,n=qle){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,i]of t)this.set(s,i)}get(t){return super.get(TP(this,t))}has(t){return super.has(TP(this,t))}set(t,n){return super.set(Ble(this,t),n)}delete(t){return super.delete(zle(this,t))}}function TP({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function Ble({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function zle({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function qle(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ule(e=uo){if(e===uo)return P$;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function P$(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Vle=Math.sqrt(50),Wle=Math.sqrt(10),Hle=Math.sqrt(2);function Gg(e,t,n){const s=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(s)),a=s/Math.pow(10,i),o=a>=Vle?10:a>=Wle?5:a>=Hle?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?Gg(e,t,n*2):[l,c,d]}function aw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[i,a,o]=s?Gg(t,e,n):Gg(e,t,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(a-d)/-o;else for(let d=0;d<l;++d)c[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function ow(e,t,n){return t=+t,e=+e,n=+n,Gg(e,t,n)[2]}function lw(e,t,n){t=+t,e=+e,n=+n;const s=t<e,i=s?ow(t,e,n):ow(e,t,n);return(s?-1:1)*(i<0?1/-i:i)}function OP(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function _P(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function E$(e,t,n=0,s=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(i=i===void 0?P$:Ule(i);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),p=Math.max(n,Math.floor(t-d*f/c+h)),v=Math.min(s,Math.floor(t+(c-d)*f/c+h));E$(e,t,p,v,i)}const a=e[t];let o=n,l=s;for(ku(e,n,t),i(e[s],a)>0&&ku(e,n,s);o<l;){for(ku(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?ku(e,n,l):(++l,ku(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function ku(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function Kle(e,t,n){if(e=Float64Array.from(Dle(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return _P(e);if(t>=1)return OP(e);var s,i=(s-1)*t,a=Math.floor(i),o=OP(E$(e,a).subarray(0,a+1)),l=_P(e.subarray(a+1));return o+(l-o)*(i-a)}}function Gle(e,t,n=A$){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,i=(s-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function Yle(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var s=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++s<i;)a[s]=e+s*n;return a}function ws(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ja(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cw=Symbol("implicit");function wS(){var e=new EP,t=[],n=[],s=cw;function i(a){let o=e.get(a);if(o===void 0){if(s!==cw)return s;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new EP;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return wS(t,n).unknown(s)},ws.apply(i,arguments),i}function rh(){var e=wS().unknown(void 0),t=e.domain,n=e.range,s=0,i=1,a,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var h=t().length,p=i<s,v=p?i:s,g=p?s:i;a=(g-v)/Math.max(1,h-c+d*2),l&&(a=Math.floor(a)),v+=(g-v-a*(h-c))*u,o=a*(1-c),l&&(v=Math.round(v),o=Math.round(o));var y=Yle(h).map(function(j){return v+a*j});return n(p?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([s,i]=h,s=+s,i=+i,f()):[s,i]},e.rangeRound=function(h){return[s,i]=h,s=+s,i=+i,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(d=+h,f()):d},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return rh(t(),[s,i]).round(l).paddingInner(c).paddingOuter(d).align(u)},ws.apply(f(),arguments)}function T$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return T$(t())},e}function df(){return T$(rh.apply(null,arguments).paddingInner(1))}function NS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function O$(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function fm(){}var sh=.7,Yg=1/sh,Oc="\\s*([+-]?\\d+)\\s*",ih="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qle=/^#([0-9a-f]{3,8})$/,Jle=new RegExp(`^rgb\\(${Oc},${Oc},${Oc}\\)$`),Xle=new RegExp(`^rgb\\(${vi},${vi},${vi}\\)$`),Zle=new RegExp(`^rgba\\(${Oc},${Oc},${Oc},${ih}\\)$`),ece=new RegExp(`^rgba\\(${vi},${vi},${vi},${ih}\\)$`),tce=new RegExp(`^hsl\\(${ih},${vi},${vi}\\)$`),nce=new RegExp(`^hsla\\(${ih},${vi},${vi},${ih}\\)$`),IP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};NS(fm,ah,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:RP,formatHex:RP,formatHex8:rce,formatHsl:sce,formatRgb:MP,toString:MP});function RP(){return this.rgb().formatHex()}function rce(){return this.rgb().formatHex8()}function sce(){return _$(this).formatHsl()}function MP(){return this.rgb().formatRgb()}function ah(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Qle.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?FP(t):n===3?new Tr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Jm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Jm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Jle.exec(e))?new Tr(t[1],t[2],t[3],1):(t=Xle.exec(e))?new Tr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Zle.exec(e))?Jm(t[1],t[2],t[3],t[4]):(t=ece.exec(e))?Jm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=tce.exec(e))?LP(t[1],t[2]/100,t[3]/100,1):(t=nce.exec(e))?LP(t[1],t[2]/100,t[3]/100,t[4]):IP.hasOwnProperty(e)?FP(IP[e]):e==="transparent"?new Tr(NaN,NaN,NaN,0):null}function FP(e){return new Tr(e>>16&255,e>>8&255,e&255,1)}function Jm(e,t,n,s){return s<=0&&(e=t=n=NaN),new Tr(e,t,n,s)}function ice(e){return e instanceof fm||(e=ah(e)),e?(e=e.rgb(),new Tr(e.r,e.g,e.b,e.opacity)):new Tr}function dw(e,t,n,s){return arguments.length===1?ice(e):new Tr(e,t,n,s??1)}function Tr(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}NS(Tr,dw,O$(fm,{brighter(e){return e=e==null?Yg:Math.pow(Yg,e),new Tr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?sh:Math.pow(sh,e),new Tr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Tr(cl(this.r),cl(this.g),cl(this.b),Qg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$P,formatHex:$P,formatHex8:ace,formatRgb:DP,toString:DP}));function $P(){return`#${Qo(this.r)}${Qo(this.g)}${Qo(this.b)}`}function ace(){return`#${Qo(this.r)}${Qo(this.g)}${Qo(this.b)}${Qo((isNaN(this.opacity)?1:this.opacity)*255)}`}function DP(){const e=Qg(this.opacity);return`${e===1?"rgb(":"rgba("}${cl(this.r)}, ${cl(this.g)}, ${cl(this.b)}${e===1?")":`, ${e})`}`}function Qg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qo(e){return e=cl(e),(e<16?"0":"")+e.toString(16)}function LP(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qs(e,t,n,s)}function _$(e){if(e instanceof qs)return new qs(e.h,e.s,e.l,e.opacity);if(e instanceof fm||(e=ah(e)),!e)return new qs;if(e instanceof qs)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,i=Math.min(t,n,s),a=Math.max(t,n,s),o=NaN,l=a-i,c=(a+i)/2;return l?(t===a?o=(n-s)/l+(n<s)*6:n===a?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new qs(o,l,c,e.opacity)}function oce(e,t,n,s){return arguments.length===1?_$(e):new qs(e,t,n,s??1)}function qs(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}NS(qs,oce,O$(fm,{brighter(e){return e=e==null?Yg:Math.pow(Yg,e),new qs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?sh:Math.pow(sh,e),new qs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,i=2*n-s;return new Tr(_b(e>=240?e-240:e+120,i,s),_b(e,i,s),_b(e<120?e+240:e-120,i,s),this.opacity)},clamp(){return new qs(BP(this.h),Xm(this.s),Xm(this.l),Qg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qg(this.opacity);return`${e===1?"hsl(":"hsla("}${BP(this.h)}, ${Xm(this.s)*100}%, ${Xm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function BP(e){return e=(e||0)%360,e<0?e+360:e}function Xm(e){return Math.max(0,Math.min(1,e||0))}function _b(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const SS=e=>()=>e;function lce(e,t){return function(n){return e+n*t}}function cce(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function dce(e){return(e=+e)==1?I$:function(t,n){return n-t?cce(t,n,e):SS(isNaN(t)?n:t)}}function I$(e,t){var n=t-e;return n?lce(e,n):SS(isNaN(e)?t:e)}const zP=function e(t){var n=dce(t);function s(i,a){var o=n((i=dw(i)).r,(a=dw(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),d=I$(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=l(u),i.b=c(u),i.opacity=d(u),i+""}}return s.gamma=e,s}(1);function uce(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),i;return function(a){for(i=0;i<n;++i)s[i]=e[i]*(1-a)+t[i]*a;return s}}function fce(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hce(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,i=new Array(s),a=new Array(n),o;for(o=0;o<s;++o)i[o]=su(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<s;++o)a[o]=i[o](l);return a}}function mce(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function Jg(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function pce(e,t){var n={},s={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=su(e[i],t[i]):s[i]=t[i];return function(a){for(i in n)s[i]=n[i](a);return s}}var uw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ib=new RegExp(uw.source,"g");function gce(e){return function(){return e}}function xce(e){return function(t){return e(t)+""}}function vce(e,t){var n=uw.lastIndex=Ib.lastIndex=0,s,i,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=uw.exec(e))&&(i=Ib.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(s=s[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Jg(s,i)})),n=Ib.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?xce(c[0].x):gce(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function su(e,t){var n=typeof t,s;return t==null||n==="boolean"?SS(t):(n==="number"?Jg:n==="string"?(s=ah(t))?(t=s,zP):vce:t instanceof ah?zP:t instanceof Date?mce:fce(t)?uce:Array.isArray(t)?hce:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pce:Jg)(e,t)}function kS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function yce(e,t){t===void 0&&(t=e,e=su);for(var n=0,s=t.length-1,i=t[0],a=new Array(s<0?0:s);n<s;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return a[l](o-l)}}function bce(e){return function(){return e}}function Xg(e){return+e}var qP=[0,1];function vr(e){return e}function fw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:bce(isNaN(t)?NaN:.5)}function jce(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function wce(e,t,n){var s=e[0],i=e[1],a=t[0],o=t[1];return i<s?(s=fw(i,s),a=n(o,a)):(s=fw(s,i),a=n(a,o)),function(l){return a(s(l))}}function Nce(e,t,n){var s=Math.min(e.length,t.length)-1,i=new Array(s),a=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)i[o]=fw(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var c=um(e,l,1,s)-1;return a[c](i[c](l))}}function hm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ey(){var e=qP,t=qP,n=su,s,i,a,o=vr,l,c,d;function u(){var h=Math.min(e.length,t.length);return o!==vr&&(o=jce(e[0],e[h-1])),l=h>2?Nce:wce,c=d=null,f}function f(h){return h==null||isNaN(h=+h)?a:(c||(c=l(e.map(s),t,n)))(s(o(h)))}return f.invert=function(h){return o(i((d||(d=l(t,e.map(s),Jg)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Xg),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=kS,u()},f.clamp=function(h){return arguments.length?(o=h?!0:vr,u()):o!==vr},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,p){return s=h,i=p,u()}}function CS(){return ey()(vr,vr)}function Sce(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function gd(e){return e=Zg(Math.abs(e)),e?e[1]:NaN}function kce(e,t){return function(n,s){for(var i=n.length,a=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Cce(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ace=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oh(e){if(!(t=Ace.exec(e)))throw new Error("invalid format: "+e);var t;return new AS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}oh.prototype=AS.prototype;function AS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}AS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Pce(e){e:for(var t=e.length,n=1,s=-1,i;n<t;++n)switch(e[n]){case".":s=i=n;break;case"0":s===0&&(s=n),i=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(i+1):e}var R$;function Ece(e,t){var n=Zg(e,t);if(!n)return e+"";var s=n[0],i=n[1],a=i-(R$=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=s.length;return a===o?s:a>o?s+new Array(a-o+1).join("0"):a>0?s.slice(0,a)+"."+s.slice(a):"0."+new Array(1-a).join("0")+Zg(e,Math.max(0,t+a-1))[0]}function UP(e,t){var n=Zg(e,t);if(!n)return e+"";var s=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+s:s.length>i+1?s.slice(0,i+1)+"."+s.slice(i+1):s+new Array(i-s.length+2).join("0")}const VP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Sce,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>UP(e*100,t),r:UP,s:Ece,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function WP(e){return e}var HP=Array.prototype.map,KP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Tce(e){var t=e.grouping===void 0||e.thousands===void 0?WP:kce(HP.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?WP:Cce(HP.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=oh(f);var h=f.fill,p=f.align,v=f.sign,g=f.symbol,y=f.zero,j=f.width,m=f.comma,b=f.precision,N=f.trim,w=f.type;w==="n"?(m=!0,w="g"):VP[w]||(b===void 0&&(b=12),N=!0,w="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k=g==="$"?s:/[%p]/.test(w)?o:"",P=VP[w],E=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function _(F){var A=S,T=k,M,O,C;if(w==="c")T=P(F)+T,F="";else{F=+F;var R=F<0||1/F<0;if(F=isNaN(F)?c:P(Math.abs(F),b),N&&(F=Pce(F)),R&&+F==0&&v!=="+"&&(R=!1),A=(R?v==="("?v:l:v==="-"||v==="("?"":v)+A,T=(w==="s"?KP[8+R$/3]:"")+T+(R&&v==="("?")":""),E){for(M=-1,O=F.length;++M<O;)if(C=F.charCodeAt(M),48>C||C>57){T=(C===46?i+F.slice(M+1):F.slice(M))+T,F=F.slice(0,M);break}}}m&&!y&&(F=t(F,1/0));var I=A.length+F.length+T.length,B=I<j?new Array(j-I+1).join(h):"";switch(m&&y&&(F=t(B+F,B.length?j-T.length:1/0),B=""),p){case"<":F=A+F+T+B;break;case"=":F=A+B+F+T;break;case"^":F=B.slice(0,I=B.length>>1)+A+F+T+B.slice(I);break;default:F=B+A+F+T;break}return a(F)}return _.toString=function(){return f+""},_}function u(f,h){var p=d((f=oh(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(gd(h)/3)))*3,g=Math.pow(10,-v),y=KP[8+v/3];return function(j){return p(g*j)+y}}return{format:d,formatPrefix:u}}var Zm,PS,M$;Oce({thousands:",",grouping:[3],currency:["$",""]});function Oce(e){return Zm=Tce(e),PS=Zm.format,M$=Zm.formatPrefix,Zm}function _ce(e){return Math.max(0,-gd(Math.abs(e)))}function Ice(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gd(t)/3)))*3-gd(Math.abs(e)))}function Rce(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gd(t)-gd(e))+1}function F$(e,t,n,s){var i=lw(e,t,n),a;switch(s=oh(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(a=Ice(i,o))&&(s.precision=a),M$(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(a=Rce(i,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=a-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(a=_ce(i))&&(s.precision=a-(s.type==="%")*2);break}}return PS(s)}function _o(e){var t=e.domain;return e.ticks=function(n){var s=t();return aw(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var i=t();return F$(i[0],i[i.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),i=0,a=s.length-1,o=s[i],l=s[a],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);u-- >0;){if(d=ow(o,l,n),d===c)return s[i]=o,s[a]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function ex(){var e=CS();return e.copy=function(){return hm(e,ex())},ws.apply(e,arguments),_o(e)}function $$(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,Xg),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return $$(e).unknown(t)},e=arguments.length?Array.from(e,Xg):[0,1],_o(n)}function D$(e,t){e=e.slice();var n=0,s=e.length-1,i=e[n],a=e[s],o;return a<i&&(o=n,n=s,s=o,o=i,i=a,a=o),e[n]=t.floor(i),e[s]=t.ceil(a),e}function GP(e){return Math.log(e)}function YP(e){return Math.exp(e)}function Mce(e){return-Math.log(-e)}function Fce(e){return-Math.exp(-e)}function $ce(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Dce(e){return e===10?$ce:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Lce(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function QP(e){return(t,n)=>-e(-t,n)}function ES(e){const t=e(GP,YP),n=t.domain;let s=10,i,a;function o(){return i=Lce(s),a=Dce(s),n()[0]<0?(i=QP(i),a=QP(a),e(Mce,Fce)):e(GP,YP),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let h=i(d),p=i(u),v,g;const y=l==null?10:+l;let j=[];if(!(s%1)&&p-h<y){if(h=Math.floor(h),p=Math.ceil(p),d>0){for(;h<=p;++h)for(v=1;v<s;++v)if(g=h<0?v/a(-h):v*a(h),!(g<d)){if(g>u)break;j.push(g)}}else for(;h<=p;++h)for(v=s-1;v>=1;--v)if(g=h>0?v/a(-h):v*a(h),!(g<d)){if(g>u)break;j.push(g)}j.length*2<y&&(j=aw(d,u,y))}else j=aw(h,p,Math.min(p-h,y)).map(a);return f?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=oh(c)).precision==null&&(c.trim=!0),c=PS(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let f=u/a(Math.round(i(u)));return f*s<s-.5&&(f*=s),f<=d?c(u):""}},t.nice=()=>n(D$(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function L$(){const e=ES(ey()).domain([1,10]);return e.copy=()=>hm(e,L$()).base(e.base()),ws.apply(e,arguments),e}function JP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function XP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function TS(e){var t=1,n=e(JP(t),XP(t));return n.constant=function(s){return arguments.length?e(JP(t=+s),XP(t)):t},_o(n)}function B$(){var e=TS(ey());return e.copy=function(){return hm(e,B$()).constant(e.constant())},ws.apply(e,arguments)}function ZP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Bce(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function zce(e){return e<0?-e*e:e*e}function OS(e){var t=e(vr,vr),n=1;function s(){return n===1?e(vr,vr):n===.5?e(Bce,zce):e(ZP(n),ZP(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,s()):n},_o(t)}function _S(){var e=OS(ey());return e.copy=function(){return hm(e,_S()).exponent(e.exponent())},ws.apply(e,arguments),e}function qce(){return _S.apply(null,arguments).exponent(.5)}function eE(e){return Math.sign(e)*e*e}function Uce(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function z$(){var e=CS(),t=[0,1],n=!1,s;function i(a){var o=Uce(e(a));return isNaN(o)?s:n?Math.round(o):o}return i.invert=function(a){return e.invert(eE(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Xg)).map(eE)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return z$(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},ws.apply(i,arguments),_o(i)}function q$(){var e=[],t=[],n=[],s;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Gle(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?s:t[um(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(uo),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.quantiles=function(){return n.slice()},a.copy=function(){return q$().domain(e).range(t).unknown(s)},ws.apply(a,arguments)}function U$(){var e=0,t=1,n=1,s=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[um(s,c,0,n)]:a}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return U$().domain([e,t]).range(i).unknown(a)},ws.apply(_o(o),arguments)}function V$(){var e=[.5],t=[0,1],n,s=1;function i(a){return a!=null&&a<=a?t[um(e,a,0,s)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),s=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),s=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return V$().domain(e).range(t).unknown(n)},ws.apply(i,arguments)}const Rb=new Date,Mb=new Date;function Fn(e,t,n,s){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let d;do c.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return c},i.filter=a=>Fn(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Rb.setTime(+a),Mb.setTime(+o),e(Rb),e(Mb),Math.floor(n(Rb,Mb))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(s?o=>s(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const tx=Fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);tx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):tx);tx.range;const Ui=1e3,cs=Ui*60,Vi=cs*60,fa=Vi*24,IS=fa*7,tE=fa*30,Fb=fa*365,Jo=Fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ui)},(e,t)=>(t-e)/Ui,e=>e.getUTCSeconds());Jo.range;const RS=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ui)},(e,t)=>{e.setTime(+e+t*cs)},(e,t)=>(t-e)/cs,e=>e.getMinutes());RS.range;const MS=Fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*cs)},(e,t)=>(t-e)/cs,e=>e.getUTCMinutes());MS.range;const FS=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ui-e.getMinutes()*cs)},(e,t)=>{e.setTime(+e+t*Vi)},(e,t)=>(t-e)/Vi,e=>e.getHours());FS.range;const $S=Fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vi)},(e,t)=>(t-e)/Vi,e=>e.getUTCHours());$S.range;const mm=Fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*cs)/fa,e=>e.getDate()-1);mm.range;const ty=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/fa,e=>e.getUTCDate()-1);ty.range;const W$=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/fa,e=>Math.floor(e/fa));W$.range;function Ml(e){return Fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*cs)/IS)}const ny=Ml(0),nx=Ml(1),Vce=Ml(2),Wce=Ml(3),xd=Ml(4),Hce=Ml(5),Kce=Ml(6);ny.range;nx.range;Vce.range;Wce.range;xd.range;Hce.range;Kce.range;function Fl(e){return Fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/IS)}const ry=Fl(0),rx=Fl(1),Gce=Fl(2),Yce=Fl(3),vd=Fl(4),Qce=Fl(5),Jce=Fl(6);ry.range;rx.range;Gce.range;Yce.range;vd.range;Qce.range;Jce.range;const DS=Fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());DS.range;const LS=Fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());LS.range;const ha=Fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ha.range;const ma=Fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ma.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ma.range;function H$(e,t,n,s,i,a){const o=[[Jo,1,Ui],[Jo,5,5*Ui],[Jo,15,15*Ui],[Jo,30,30*Ui],[a,1,cs],[a,5,5*cs],[a,15,15*cs],[a,30,30*cs],[i,1,Vi],[i,3,3*Vi],[i,6,6*Vi],[i,12,12*Vi],[s,1,fa],[s,2,2*fa],[n,1,IS],[t,1,tE],[t,3,3*tE],[e,1,Fb]];function l(d,u,f){const h=u<d;h&&([d,u]=[u,d]);const p=f&&typeof f.range=="function"?f:c(d,u,f),v=p?p.range(d,+u+1):[];return h?v.reverse():v}function c(d,u,f){const h=Math.abs(u-d)/f,p=jS(([,,y])=>y).right(o,h);if(p===o.length)return e.every(lw(d/Fb,u/Fb,f));if(p===0)return tx.every(Math.max(lw(d,u,f),1));const[v,g]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return v.every(g)}return[l,c]}const[Xce,Zce]=H$(ma,LS,ry,W$,$S,MS),[ede,tde]=H$(ha,DS,ny,mm,FS,RS);function $b(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Db(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cu(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function nde(e){var t=e.dateTime,n=e.date,s=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Au(i),u=Pu(i),f=Au(a),h=Pu(a),p=Au(o),v=Pu(o),g=Au(l),y=Pu(l),j=Au(c),m=Pu(c),b={a:R,A:I,b:B,B:H,c:null,d:oE,e:oE,f:kde,g:Mde,G:$de,H:wde,I:Nde,j:Sde,L:K$,m:Cde,M:Ade,p:Q,q:D,Q:dE,s:uE,S:Pde,u:Ede,U:Tde,V:Ode,w:_de,W:Ide,x:null,X:null,y:Rde,Y:Fde,Z:Dde,"%":cE},N={a:te,A:V,b:J,B:me,c:null,d:lE,e:lE,f:qde,g:Xde,G:eue,H:Lde,I:Bde,j:zde,L:Y$,m:Ude,M:Vde,p:de,q:ve,Q:dE,s:uE,S:Wde,u:Hde,U:Kde,V:Gde,w:Yde,W:Qde,x:null,X:null,y:Jde,Y:Zde,Z:tue,"%":cE},w={a:_,A:F,b:A,B:T,c:M,d:iE,e:iE,f:vde,g:sE,G:rE,H:aE,I:aE,j:mde,L:xde,m:hde,M:pde,p:E,q:fde,Q:bde,s:jde,S:gde,u:ode,U:lde,V:cde,w:ade,W:dde,x:O,X:C,y:sE,Y:rE,Z:ude,"%":yde};b.x=S(n,b),b.X=S(s,b),b.c=S(t,b),N.x=S(n,N),N.X=S(s,N),N.c=S(t,N);function S(ce,U){return function(L){var z=[],Ne=-1,le=0,Ae=ce.length,Ke,Fe,ht;for(L instanceof Date||(L=new Date(+L));++Ne<Ae;)ce.charCodeAt(Ne)===37&&(z.push(ce.slice(le,Ne)),(Fe=nE[Ke=ce.charAt(++Ne)])!=null?Ke=ce.charAt(++Ne):Fe=Ke==="e"?" ":"0",(ht=U[Ke])&&(Ke=ht(L,Fe)),z.push(Ke),le=Ne+1);return z.push(ce.slice(le,Ne)),z.join("")}}function k(ce,U){return function(L){var z=Cu(1900,void 0,1),Ne=P(z,ce,L+="",0),le,Ae;if(Ne!=L.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(U&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(le=Db(Cu(z.y,0,1)),Ae=le.getUTCDay(),le=Ae>4||Ae===0?rx.ceil(le):rx(le),le=ty.offset(le,(z.V-1)*7),z.y=le.getUTCFullYear(),z.m=le.getUTCMonth(),z.d=le.getUTCDate()+(z.w+6)%7):(le=$b(Cu(z.y,0,1)),Ae=le.getDay(),le=Ae>4||Ae===0?nx.ceil(le):nx(le),le=mm.offset(le,(z.V-1)*7),z.y=le.getFullYear(),z.m=le.getMonth(),z.d=le.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),Ae="Z"in z?Db(Cu(z.y,0,1)).getUTCDay():$b(Cu(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(Ae+5)%7:z.w+z.U*7-(Ae+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,Db(z)):$b(z)}}function P(ce,U,L,z){for(var Ne=0,le=U.length,Ae=L.length,Ke,Fe;Ne<le;){if(z>=Ae)return-1;if(Ke=U.charCodeAt(Ne++),Ke===37){if(Ke=U.charAt(Ne++),Fe=w[Ke in nE?U.charAt(Ne++):Ke],!Fe||(z=Fe(ce,L,z))<0)return-1}else if(Ke!=L.charCodeAt(z++))return-1}return z}function E(ce,U,L){var z=d.exec(U.slice(L));return z?(ce.p=u.get(z[0].toLowerCase()),L+z[0].length):-1}function _(ce,U,L){var z=p.exec(U.slice(L));return z?(ce.w=v.get(z[0].toLowerCase()),L+z[0].length):-1}function F(ce,U,L){var z=f.exec(U.slice(L));return z?(ce.w=h.get(z[0].toLowerCase()),L+z[0].length):-1}function A(ce,U,L){var z=j.exec(U.slice(L));return z?(ce.m=m.get(z[0].toLowerCase()),L+z[0].length):-1}function T(ce,U,L){var z=g.exec(U.slice(L));return z?(ce.m=y.get(z[0].toLowerCase()),L+z[0].length):-1}function M(ce,U,L){return P(ce,t,U,L)}function O(ce,U,L){return P(ce,n,U,L)}function C(ce,U,L){return P(ce,s,U,L)}function R(ce){return o[ce.getDay()]}function I(ce){return a[ce.getDay()]}function B(ce){return c[ce.getMonth()]}function H(ce){return l[ce.getMonth()]}function Q(ce){return i[+(ce.getHours()>=12)]}function D(ce){return 1+~~(ce.getMonth()/3)}function te(ce){return o[ce.getUTCDay()]}function V(ce){return a[ce.getUTCDay()]}function J(ce){return c[ce.getUTCMonth()]}function me(ce){return l[ce.getUTCMonth()]}function de(ce){return i[+(ce.getUTCHours()>=12)]}function ve(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var U=S(ce+="",b);return U.toString=function(){return ce},U},parse:function(ce){var U=k(ce+="",!1);return U.toString=function(){return ce},U},utcFormat:function(ce){var U=S(ce+="",N);return U.toString=function(){return ce},U},utcParse:function(ce){var U=k(ce+="",!0);return U.toString=function(){return ce},U}}}var nE={"-":"",_:" ",0:"0"},Un=/^\s*\d+/,rde=/^%/,sde=/[\\^$*+?|[\]().{}]/g;function At(e,t,n){var s=e<0?"-":"",i=(s?-e:e)+"",a=i.length;return s+(a<n?new Array(n-a+1).join(t)+i:i)}function ide(e){return e.replace(sde,"\\$&")}function Au(e){return new RegExp("^(?:"+e.map(ide).join("|")+")","i")}function Pu(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ade(e,t,n){var s=Un.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function ode(e,t,n){var s=Un.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function lde(e,t,n){var s=Un.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function cde(e,t,n){var s=Un.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function dde(e,t,n){var s=Un.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function rE(e,t,n){var s=Un.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function sE(e,t,n){var s=Un.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function ude(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function fde(e,t,n){var s=Un.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function hde(e,t,n){var s=Un.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function iE(e,t,n){var s=Un.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function mde(e,t,n){var s=Un.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function aE(e,t,n){var s=Un.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function pde(e,t,n){var s=Un.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function gde(e,t,n){var s=Un.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function xde(e,t,n){var s=Un.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function vde(e,t,n){var s=Un.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function yde(e,t,n){var s=rde.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function bde(e,t,n){var s=Un.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function jde(e,t,n){var s=Un.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function oE(e,t){return At(e.getDate(),t,2)}function wde(e,t){return At(e.getHours(),t,2)}function Nde(e,t){return At(e.getHours()%12||12,t,2)}function Sde(e,t){return At(1+mm.count(ha(e),e),t,3)}function K$(e,t){return At(e.getMilliseconds(),t,3)}function kde(e,t){return K$(e,t)+"000"}function Cde(e,t){return At(e.getMonth()+1,t,2)}function Ade(e,t){return At(e.getMinutes(),t,2)}function Pde(e,t){return At(e.getSeconds(),t,2)}function Ede(e){var t=e.getDay();return t===0?7:t}function Tde(e,t){return At(ny.count(ha(e)-1,e),t,2)}function G$(e){var t=e.getDay();return t>=4||t===0?xd(e):xd.ceil(e)}function Ode(e,t){return e=G$(e),At(xd.count(ha(e),e)+(ha(e).getDay()===4),t,2)}function _de(e){return e.getDay()}function Ide(e,t){return At(nx.count(ha(e)-1,e),t,2)}function Rde(e,t){return At(e.getFullYear()%100,t,2)}function Mde(e,t){return e=G$(e),At(e.getFullYear()%100,t,2)}function Fde(e,t){return At(e.getFullYear()%1e4,t,4)}function $de(e,t){var n=e.getDay();return e=n>=4||n===0?xd(e):xd.ceil(e),At(e.getFullYear()%1e4,t,4)}function Dde(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+At(t/60|0,"0",2)+At(t%60,"0",2)}function lE(e,t){return At(e.getUTCDate(),t,2)}function Lde(e,t){return At(e.getUTCHours(),t,2)}function Bde(e,t){return At(e.getUTCHours()%12||12,t,2)}function zde(e,t){return At(1+ty.count(ma(e),e),t,3)}function Y$(e,t){return At(e.getUTCMilliseconds(),t,3)}function qde(e,t){return Y$(e,t)+"000"}function Ude(e,t){return At(e.getUTCMonth()+1,t,2)}function Vde(e,t){return At(e.getUTCMinutes(),t,2)}function Wde(e,t){return At(e.getUTCSeconds(),t,2)}function Hde(e){var t=e.getUTCDay();return t===0?7:t}function Kde(e,t){return At(ry.count(ma(e)-1,e),t,2)}function Q$(e){var t=e.getUTCDay();return t>=4||t===0?vd(e):vd.ceil(e)}function Gde(e,t){return e=Q$(e),At(vd.count(ma(e),e)+(ma(e).getUTCDay()===4),t,2)}function Yde(e){return e.getUTCDay()}function Qde(e,t){return At(rx.count(ma(e)-1,e),t,2)}function Jde(e,t){return At(e.getUTCFullYear()%100,t,2)}function Xde(e,t){return e=Q$(e),At(e.getUTCFullYear()%100,t,2)}function Zde(e,t){return At(e.getUTCFullYear()%1e4,t,4)}function eue(e,t){var n=e.getUTCDay();return e=n>=4||n===0?vd(e):vd.ceil(e),At(e.getUTCFullYear()%1e4,t,4)}function tue(){return"+0000"}function cE(){return"%"}function dE(e){return+e}function uE(e){return Math.floor(+e/1e3)}var Yl,J$,X$;nue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nue(e){return Yl=nde(e),J$=Yl.format,Yl.parse,X$=Yl.utcFormat,Yl.utcParse,Yl}function rue(e){return new Date(e)}function sue(e){return e instanceof Date?+e:+new Date(+e)}function BS(e,t,n,s,i,a,o,l,c,d){var u=CS(),f=u.invert,h=u.domain,p=d(".%L"),v=d(":%S"),g=d("%I:%M"),y=d("%I %p"),j=d("%a %d"),m=d("%b %d"),b=d("%B"),N=d("%Y");function w(S){return(c(S)<S?p:l(S)<S?v:o(S)<S?g:a(S)<S?y:s(S)<S?i(S)<S?j:m:n(S)<S?b:N)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?h(Array.from(S,sue)):h().map(rue)},u.ticks=function(S){var k=h();return e(k[0],k[k.length-1],S??10)},u.tickFormat=function(S,k){return k==null?w:d(k)},u.nice=function(S){var k=h();return(!S||typeof S.range!="function")&&(S=t(k[0],k[k.length-1],S??10)),S?h(D$(k,S)):u},u.copy=function(){return hm(u,BS(e,t,n,s,i,a,o,l,c,d))},u}function iue(){return ws.apply(BS(ede,tde,ha,DS,ny,mm,FS,RS,Jo,J$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aue(){return ws.apply(BS(Xce,Zce,ma,LS,ry,ty,$S,MS,Jo,X$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sy(){var e=0,t=1,n,s,i,a,o=vr,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(i===0?.5:(f=(a(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,n=a(e=+e),s=a(t=+t),i=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(h){var p,v;return arguments.length?([p,v]=h,o=f(p,v),d):[o(0),o(1)]}}return d.range=u(su),d.rangeRound=u(kS),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return a=f,n=f(e),s=f(t),i=n===s?0:1/(s-n),d}}function Io(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Z$(){var e=_o(sy()(vr));return e.copy=function(){return Io(e,Z$())},ja.apply(e,arguments)}function e3(){var e=ES(sy()).domain([1,10]);return e.copy=function(){return Io(e,e3()).base(e.base())},ja.apply(e,arguments)}function t3(){var e=TS(sy());return e.copy=function(){return Io(e,t3()).constant(e.constant())},ja.apply(e,arguments)}function zS(){var e=OS(sy());return e.copy=function(){return Io(e,zS()).exponent(e.exponent())},ja.apply(e,arguments)}function oue(){return zS.apply(null,arguments).exponent(.5)}function n3(){var e=[],t=vr;function n(s){if(s!=null&&!isNaN(s=+s))return t((um(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let i of s)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(uo),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,i)=>t(i/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(i,a)=>Kle(e,a/s))},n.copy=function(){return n3(t).domain(e)},ja.apply(n,arguments)}function iy(){var e=0,t=.5,n=1,s=1,i,a,o,l,c,d=vr,u,f=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-a)*(s*g<s*a?l:c),d(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),a=u(t=+t),o=u(n=+n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,p):[e,t,n]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(d=g,p):d};function v(g){return function(y){var j,m,b;return arguments.length?([j,m,b]=y,d=yce(g,[j,m,b]),p):[d(0),d(.5),d(1)]}}return p.range=v(su),p.rangeRound=v(kS),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return u=g,i=g(e),a=g(t),o=g(n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,p}}function r3(){var e=_o(iy()(vr));return e.copy=function(){return Io(e,r3())},ja.apply(e,arguments)}function s3(){var e=ES(iy()).domain([.1,1,10]);return e.copy=function(){return Io(e,s3()).base(e.base())},ja.apply(e,arguments)}function i3(){var e=TS(iy());return e.copy=function(){return Io(e,i3()).constant(e.constant())},ja.apply(e,arguments)}function qS(){var e=OS(iy());return e.copy=function(){return Io(e,qS()).exponent(e.exponent())},ja.apply(e,arguments)}function lue(){return qS.apply(null,arguments).exponent(.5)}const fE=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:rh,scaleDiverging:r3,scaleDivergingLog:s3,scaleDivergingPow:qS,scaleDivergingSqrt:lue,scaleDivergingSymlog:i3,scaleIdentity:$$,scaleImplicit:cw,scaleLinear:ex,scaleLog:L$,scaleOrdinal:wS,scalePoint:df,scalePow:_S,scaleQuantile:q$,scaleQuantize:U$,scaleRadial:z$,scaleSequential:Z$,scaleSequentialLog:e3,scaleSequentialPow:zS,scaleSequentialQuantile:n3,scaleSequentialSqrt:oue,scaleSequentialSymlog:t3,scaleSqrt:qce,scaleSymlog:B$,scaleThreshold:V$,scaleTime:iue,scaleUtc:aue,tickFormat:F$},Symbol.toStringTag,{value:"Module"}));var cue=Qd;function due(e,t,n){for(var s=-1,i=e.length;++s<i;){var a=e[s],o=t(a);if(o!=null&&(l===void 0?o===o&&!cue(o):n(o,l)))var l=o,c=a}return c}var a3=due;function uue(e,t){return e>t}var fue=uue,hue=a3,mue=fue,pue=ru;function gue(e){return e&&e.length?hue(e,pue,mue):void 0}var xue=gue;const ay=Dt(xue);function vue(e,t){return e<t}var yue=vue,bue=a3,jue=yue,wue=ru;function Nue(e){return e&&e.length?bue(e,wue,jue):void 0}var Sue=Nue;const oy=Dt(Sue);var kue=tS,Cue=Oo,Aue=p$,Pue=Fr;function Eue(e,t){var n=Pue(e)?kue:Aue;return n(e,Cue(t))}var Tue=Eue,Oue=h$,_ue=Tue;function Iue(e,t){return Oue(_ue(e,t),1)}var Rue=Iue;const Mue=Dt(Rue);var Fue=gS;function $ue(e,t){return Fue(e,t)}var Due=$ue;const ly=Dt(Due);var iu=1e9,Lue={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},VS,en=!0,xs="[DecimalError] ",dl=xs+"Invalid argument: ",US=xs+"Exponent out of range: ",au=Math.floor,Uo=Math.pow,Bue=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vr,$n=1e7,Gt=7,o3=9007199254740991,sx=au(o3/Gt),Be={};Be.absoluteValue=Be.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Be.comparedTo=Be.cmp=function(e){var t,n,s,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(s=a.d.length,i=e.d.length,t=0,n=s<i?s:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return s===i?0:s>i^a.s<0?1:-1};Be.decimalPlaces=Be.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Gt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Be.dividedBy=Be.div=function(e){return na(this,new this.constructor(e))};Be.dividedToIntegerBy=Be.idiv=function(e){var t=this,n=t.constructor;return qt(na(t,new n(e),0,1),n.precision)};Be.equals=Be.eq=function(e){return!this.cmp(e)};Be.exponent=function(){return An(this)};Be.greaterThan=Be.gt=function(e){return this.cmp(e)>0};Be.greaterThanOrEqualTo=Be.gte=function(e){return this.cmp(e)>=0};Be.isInteger=Be.isint=function(){return this.e>this.d.length-2};Be.isNegative=Be.isneg=function(){return this.s<0};Be.isPositive=Be.ispos=function(){return this.s>0};Be.isZero=function(){return this.s===0};Be.lessThan=Be.lt=function(e){return this.cmp(e)<0};Be.lessThanOrEqualTo=Be.lte=function(e){return this.cmp(e)<1};Be.logarithm=Be.log=function(e){var t,n=this,s=n.constructor,i=s.precision,a=i+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Vr))throw Error(xs+"NaN");if(n.s<1)throw Error(xs+(n.s?"NaN":"-Infinity"));return n.eq(Vr)?new s(0):(en=!1,t=na(lh(n,a),lh(e,a),a),en=!0,qt(t,i))};Be.minus=Be.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?d3(t,e):l3(t,(e.s=-e.s,e))};Be.modulo=Be.mod=function(e){var t,n=this,s=n.constructor,i=s.precision;if(e=new s(e),!e.s)throw Error(xs+"NaN");return n.s?(en=!1,t=na(n,e,0,1).times(e),en=!0,n.minus(t)):qt(new s(n),i)};Be.naturalExponential=Be.exp=function(){return c3(this)};Be.naturalLogarithm=Be.ln=function(){return lh(this)};Be.negated=Be.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Be.plus=Be.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?l3(t,e):d3(t,(e.s=-e.s,e))};Be.precision=Be.sd=function(e){var t,n,s,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(dl+e);if(t=An(i)+1,s=i.d.length-1,n=s*Gt+1,s=i.d[s],s){for(;s%10==0;s/=10)n--;for(s=i.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};Be.squareRoot=Be.sqrt=function(){var e,t,n,s,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(xs+"NaN")}for(e=An(l),en=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=fi(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=au((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(i.toString()),n=c.precision,i=o=n+3;;)if(a=s,s=a.plus(na(l,a,o+2)).times(.5),fi(a.d).slice(0,o)===(t=fi(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(qt(a,n+1,0),a.times(a).eq(l)){s=a;break}}else if(t!="9999")break;o+=4}return en=!0,qt(s,n)};Be.times=Be.mul=function(e){var t,n,s,i,a,o,l,c,d,u=this,f=u.constructor,h=u.d,p=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,n=u.e+e.e,c=h.length,d=p.length,c<d&&(a=h,h=p,p=a,o=c,c=d,d=o),a=[],o=c+d,s=o;s--;)a.push(0);for(s=d;--s>=0;){for(t=0,i=c+s;i>s;)l=a[i]+p[s]*h[i-s-1]+t,a[i--]=l%$n|0,t=l/$n|0;a[i]=(a[i]+t)%$n|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,en?qt(e,f.precision):e};Be.toDecimalPlaces=Be.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(Ai(e,0,iu),t===void 0?t=s.rounding:Ai(t,0,8),qt(n,e+An(n)+1,t))};Be.toExponential=function(e,t){var n,s=this,i=s.constructor;return e===void 0?n=kl(s,!0):(Ai(e,0,iu),t===void 0?t=i.rounding:Ai(t,0,8),s=qt(new i(s),e+1,t),n=kl(s,!0,e+1)),n};Be.toFixed=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?kl(i):(Ai(e,0,iu),t===void 0?t=a.rounding:Ai(t,0,8),s=qt(new a(i),e+An(i)+1,t),n=kl(s.abs(),!1,e+An(s)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Be.toInteger=Be.toint=function(){var e=this,t=e.constructor;return qt(new t(e),An(e)+1,t.rounding)};Be.toNumber=function(){return+this};Be.toPower=Be.pow=function(e){var t,n,s,i,a,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Vr);if(l=new c(l),!l.s){if(e.s<1)throw Error(xs+"Infinity");return l}if(l.eq(Vr))return l;if(s=c.precision,e.eq(Vr))return qt(l,s);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=u<0?-u:u)<=o3){for(i=new c(Vr),t=Math.ceil(s/Gt+4),en=!1;n%2&&(i=i.times(l),mE(i.d,t)),n=au(n/2),n!==0;)l=l.times(l),mE(l.d,t);return en=!0,e.s<0?new c(Vr).div(i):qt(i,s)}}else if(a<0)throw Error(xs+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,en=!1,i=e.times(lh(l,s+d)),en=!0,i=c3(i),i.s=a,i};Be.toPrecision=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?(n=An(i),s=kl(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ai(e,1,iu),t===void 0?t=a.rounding:Ai(t,0,8),i=qt(new a(i),e,t),n=An(i),s=kl(i,e<=n||n<=a.toExpNeg,e)),s};Be.toSignificantDigits=Be.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Ai(e,1,iu),t===void 0?t=s.rounding:Ai(t,0,8)),qt(new s(n),e,t)};Be.toString=Be.valueOf=Be.val=Be.toJSON=Be[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=An(e),n=e.constructor;return kl(e,t<=n.toExpNeg||t>=n.toExpPos)};function l3(e,t){var n,s,i,a,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),en?qt(t,f):t;if(c=e.d,d=t.d,o=e.e,i=t.e,c=c.slice(),a=o-i,a){for(a<0?(s=c,a=-a,l=d.length):(s=d,i=o,l=c.length),o=Math.ceil(f/Gt),l=o>l?o+1:l+1,a>l&&(a=l,s.length=1),s.reverse();a--;)s.push(0);s.reverse()}for(l=c.length,a=d.length,l-a<0&&(a=l,s=d,d=c,c=s),n=0;a;)n=(c[--a]=c[a]+d[a]+n)/$n|0,c[a]%=$n;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,en?qt(t,f):t}function Ai(e,t,n){if(e!==~~e||e<t||e>n)throw Error(dl+e)}function fi(e){var t,n,s,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)s=e[t]+"",n=Gt-s.length,n&&(a+=Ma(n)),a+=s;o=e[t],s=o+"",n=Gt-s.length,n&&(a+=Ma(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var na=function(){function e(s,i){var a,o=0,l=s.length;for(s=s.slice();l--;)a=s[l]*i+o,s[l]=a%$n|0,o=a/$n|0;return o&&s.unshift(o),s}function t(s,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(s[l]!=i[l]){c=s[l]>i[l]?1:-1;break}return c}function n(s,i,a){for(var o=0;a--;)s[a]-=o,o=s[a]<i[a]?1:0,s[a]=o*$n+s[a]-i[a];for(;!s[0]&&s.length>1;)s.shift()}return function(s,i,a,o){var l,c,d,u,f,h,p,v,g,y,j,m,b,N,w,S,k,P,E=s.constructor,_=s.s==i.s?1:-1,F=s.d,A=i.d;if(!s.s)return new E(s);if(!i.s)throw Error(xs+"Division by zero");for(c=s.e-i.e,k=A.length,w=F.length,p=new E(_),v=p.d=[],d=0;A[d]==(F[d]||0);)++d;if(A[d]>(F[d]||0)&&--c,a==null?m=a=E.precision:o?m=a+(An(s)-An(i))+1:m=a,m<0)return new E(0);if(m=m/Gt+2|0,d=0,k==1)for(u=0,A=A[0],m++;(d<w||u)&&m--;d++)b=u*$n+(F[d]||0),v[d]=b/A|0,u=b%A|0;else{for(u=$n/(A[0]+1)|0,u>1&&(A=e(A,u),F=e(F,u),k=A.length,w=F.length),N=k,g=F.slice(0,k),y=g.length;y<k;)g[y++]=0;P=A.slice(),P.unshift(0),S=A[0],A[1]>=$n/2&&++S;do u=0,l=t(A,g,k,y),l<0?(j=g[0],k!=y&&(j=j*$n+(g[1]||0)),u=j/S|0,u>1?(u>=$n&&(u=$n-1),f=e(A,u),h=f.length,y=g.length,l=t(f,g,h,y),l==1&&(u--,n(f,k<h?P:A,h))):(u==0&&(l=u=1),f=A.slice()),h=f.length,h<y&&f.unshift(0),n(g,f,y),l==-1&&(y=g.length,l=t(A,g,k,y),l<1&&(u++,n(g,k<y?P:A,y))),y=g.length):l===0&&(u++,g=[0]),v[d++]=u,l&&g[0]?g[y++]=F[N]||0:(g=[F[N]],y=1);while((N++<w||g[0]!==void 0)&&m--)}return v[0]||v.shift(),p.e=c,qt(p,o?a+An(p)+1:a)}}();function c3(e,t){var n,s,i,a,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(An(e)>16)throw Error(US+An(e));if(!e.s)return new u(Vr);for(t==null?(en=!1,l=f):l=t,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Uo(2,d))/Math.LN10*2+5|0,l+=s,n=i=a=new u(Vr),u.precision=l;;){if(i=qt(i.times(e),l),n=n.times(++c),o=a.plus(na(i,n,l)),fi(o.d).slice(0,l)===fi(a.d).slice(0,l)){for(;d--;)a=qt(a.times(a),l);return u.precision=f,t==null?(en=!0,qt(a,f)):a}a=o}}function An(e){for(var t=e.e*Gt,n=e.d[0];n>=10;n/=10)t++;return t}function Lb(e,t,n){if(t>e.LN10.sd())throw en=!0,n&&(e.precision=n),Error(xs+"LN10 precision limit exceeded");return qt(new e(e.LN10),t)}function Ma(e){for(var t="";e--;)t+="0";return t}function lh(e,t){var n,s,i,a,o,l,c,d,u,f=1,h=10,p=e,v=p.d,g=p.constructor,y=g.precision;if(p.s<1)throw Error(xs+(p.s?"NaN":"-Infinity"));if(p.eq(Vr))return new g(0);if(t==null?(en=!1,d=y):d=t,p.eq(10))return t==null&&(en=!0),Lb(g,d);if(d+=h,g.precision=d,n=fi(v),s=n.charAt(0),a=An(p),Math.abs(a)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)p=p.times(e),n=fi(p.d),s=n.charAt(0),f++;a=An(p),s>1?(p=new g("0."+n),a++):p=new g(s+"."+n.slice(1))}else return c=Lb(g,d+2,y).times(a+""),p=lh(new g(s+"."+n.slice(1)),d-h).plus(c),g.precision=y,t==null?(en=!0,qt(p,y)):p;for(l=o=p=na(p.minus(Vr),p.plus(Vr),d),u=qt(p.times(p),d),i=3;;){if(o=qt(o.times(u),d),c=l.plus(na(o,new g(i),d)),fi(c.d).slice(0,d)===fi(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(Lb(g,d+2,y).times(a+""))),l=na(l,new g(f),d),g.precision=y,t==null?(en=!0,qt(l,y)):l;l=c,i+=2}}function hE(e,t){var n,s,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(s,i),t){if(i-=s,n=n-s-1,e.e=au(n/Gt),e.d=[],s=(n+1)%Gt,n<0&&(s+=Gt),s<i){for(s&&e.d.push(+t.slice(0,s)),i-=Gt;s<i;)e.d.push(+t.slice(s,s+=Gt));t=t.slice(s),s=Gt-t.length}else s-=i;for(;s--;)t+="0";if(e.d.push(+t),en&&(e.e>sx||e.e<-sx))throw Error(US+n)}else e.s=0,e.e=0,e.d=[0];return e}function qt(e,t,n){var s,i,a,o,l,c,d,u,f=e.d;for(o=1,a=f[0];a>=10;a/=10)o++;if(s=t-o,s<0)s+=Gt,i=t,d=f[u=0];else{if(u=Math.ceil((s+1)/Gt),a=f.length,u>=a)return e;for(d=a=f[u],o=1;a>=10;a/=10)o++;s%=Gt,i=s-Gt+o}if(n!==void 0&&(a=Uo(10,o-i-1),l=d/a%10|0,c=t<0||f[u+1]!==void 0||d%a,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?i>0?d/Uo(10,o-i):0:f[u-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return c?(a=An(e),f.length=1,t=t-a-1,f[0]=Uo(10,(Gt-t%Gt)%Gt),e.e=au(-t/Gt)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=u,a=1,u--):(f.length=u+1,a=Uo(10,Gt-s),f[u]=i>0?(d/Uo(10,o-i)%Uo(10,i)|0)*a:0),c)for(;;)if(u==0){(f[0]+=a)==$n&&(f[0]=1,++e.e);break}else{if(f[u]+=a,f[u]!=$n)break;f[u--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop();if(en&&(e.e>sx||e.e<-sx))throw Error(US+An(e));return e}function d3(e,t){var n,s,i,a,o,l,c,d,u,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),en?qt(t,p):t;if(c=e.d,f=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(n=c,o=-o,l=f.length):(n=f,s=d,l=c.length),i=Math.max(Math.ceil(p/Gt),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=f.length,u=i<l,u&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){u=c[i]<f[i];break}o=0}for(u&&(n=c,c=f,f=n,t.s=-t.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>o;){if(c[--i]<f[i]){for(a=i;a&&c[--a]===0;)c[a]=$n-1;--c[a],c[i]+=$n}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,en?qt(t,p):t):new h(0)}function kl(e,t,n){var s,i=An(e),a=fi(e.d),o=a.length;return t?(n&&(s=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Ma(s):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ma(-i-1)+a,n&&(s=n-o)>0&&(a+=Ma(s))):i>=o?(a+=Ma(i+1-o),n&&(s=n-i-1)>0&&(a=a+"."+Ma(s))):((s=i+1)<o&&(a=a.slice(0,s)+"."+a.slice(s)),n&&(s=n-o)>0&&(i+1===o&&(a+="."),a+=Ma(s))),e.s<0?"-"+a:a}function mE(e,t){if(e.length>t)return e.length=t,!0}function u3(e){var t,n,s;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(dl+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return hE(o,a.toString())}else if(typeof a!="string")throw Error(dl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Bue.test(a))hE(o,a);else throw Error(dl+a)}if(i.prototype=Be,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=u3,i.config=i.set=zue,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return i.config(e),i}function zue(e){if(!e||typeof e!="object")throw Error(xs+"Object expected");var t,n,s,i=["precision",1,iu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((s=e[n=i[t]])!==void 0)if(au(s)===s&&s>=i[t+1]&&s<=i[t+2])this[n]=s;else throw Error(dl+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(dl+n+": "+s);return this}var VS=u3(Lue);Vr=new VS(1);const Ft=VS;function que(e){return Hue(e)||Wue(e)||Vue(e)||Uue()}function Uue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vue(e,t){if(e){if(typeof e=="string")return hw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hw(e,t)}}function Wue(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Hue(e){if(Array.isArray(e))return hw(e)}function hw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var Kue=function(t){return t},f3={"@@functional/placeholder":!0},h3=function(t){return t===f3},pE=function(t){return function n(){return arguments.length===0||arguments.length===1&&h3(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Gue=function e(t,n){return t===1?n:pE(function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==f3}).length;return o>=t?n.apply(void 0,i):e(t-o,pE(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=i.map(function(f){return h3(f)?c.shift():f});return n.apply(void 0,que(u).concat(c))}))})},cy=function(t){return Gue(t.length,t)},mw=function(t,n){for(var s=[],i=t;i<n;++i)s[i-t]=i;return s},Yue=cy(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Que=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return Kue;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},pw=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},m3=function(t){var n=null,s=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,s=t.apply(void 0,a)),s}};function Jue(e){var t;return e===0?t=1:t=Math.floor(new Ft(e).abs().log(10).toNumber())+1,t}function Xue(e,t,n){for(var s=new Ft(e),i=0,a=[];s.lt(t)&&i<1e5;)a.push(s.toNumber()),s=s.add(n),i++;return a}var Zue=cy(function(e,t,n){var s=+e,i=+t;return s+n*(i-s)}),efe=cy(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),tfe=cy(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const dy={rangeStep:Xue,getDigitCount:Jue,interpolateNumber:Zue,uninterpolateNumber:efe,uninterpolateTruncation:tfe};function gw(e){return sfe(e)||rfe(e)||p3(e)||nfe()}function nfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rfe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function sfe(e){if(Array.isArray(e))return xw(e)}function ch(e,t){return ofe(e)||afe(e,t)||p3(e,t)||ife()}function ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p3(e,t){if(e){if(typeof e=="string")return xw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xw(e,t)}}function xw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function afe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){i=!0,a=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function ofe(e){if(Array.isArray(e))return e}function g3(e){var t=ch(e,2),n=t[0],s=t[1],i=n,a=s;return n>s&&(i=s,a=n),[i,a]}function x3(e,t,n){if(e.lte(0))return new Ft(0);var s=dy.getDigitCount(e.toNumber()),i=new Ft(10).pow(s),a=e.div(i),o=s!==1?.05:.1,l=new Ft(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return t?c:new Ft(Math.ceil(c))}function lfe(e,t,n){var s=1,i=new Ft(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(s=new Ft(10).pow(dy.getDigitCount(e)-1),i=new Ft(Math.floor(i.div(s).toNumber())).mul(s)):a>1&&(i=new Ft(Math.floor(e)))}else e===0?i=new Ft(Math.floor((t-1)/2)):n||(i=new Ft(Math.floor(e)));var o=Math.floor((t-1)/2),l=Que(Yue(function(c){return i.add(new Ft(c-o).mul(s)).toNumber()}),mw);return l(0,t)}function v3(e,t,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Ft(0),tickMin:new Ft(0),tickMax:new Ft(0)};var a=x3(new Ft(t).sub(e).div(n-1),s,i),o;e<=0&&t>=0?o=new Ft(0):(o=new Ft(e).add(t).div(2),o=o.sub(new Ft(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new Ft(t).sub(o).div(a).toNumber()),d=l+c+1;return d>n?v3(e,t,n,s,i+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:a,tickMin:o.sub(new Ft(l).mul(a)),tickMax:o.add(new Ft(c).mul(a))})}function cfe(e){var t=ch(e,2),n=t[0],s=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=g3([n,s]),c=ch(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(gw(mw(0,i-1).map(function(){return 1/0}))):[].concat(gw(mw(0,i-1).map(function(){return-1/0})),[u]);return n>s?pw(f):f}if(d===u)return lfe(d,i,a);var h=v3(d,u,o,a),p=h.step,v=h.tickMin,g=h.tickMax,y=dy.rangeStep(v,g.add(new Ft(.1).mul(p)),p);return n>s?pw(y):y}function dfe(e,t){var n=ch(e,2),s=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=g3([s,i]),l=ch(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,i];if(c===d)return[c];var u=Math.max(t,2),f=x3(new Ft(d).sub(c).div(u-1),a,0),h=[].concat(gw(dy.rangeStep(new Ft(c),new Ft(d).sub(new Ft(.99).mul(f)),f)),[d]);return s>i?pw(h):h}var ufe=m3(cfe),ffe=m3(dfe),hfe="Invariant failed";function Cl(e,t){throw new Error(hfe)}var mfe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function yd(e){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(e)}function ix(){return ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ix.apply(this,arguments)}function pfe(e,t){return yfe(e)||vfe(e,t)||xfe(e,t)||gfe()}function gfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xfe(e,t){if(e){if(typeof e=="string")return gE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gE(e,t)}}function gE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function vfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function yfe(e){if(Array.isArray(e))return e}function bfe(e,t){if(e==null)return{};var n=jfe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function jfe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function wfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nfe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,j3(s.key),s)}}function Sfe(e,t,n){return t&&Nfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kfe(e,t,n){return t=ax(t),Cfe(e,y3()?Reflect.construct(t,n||[],ax(e).constructor):t.apply(e,n))}function Cfe(e,t){if(t&&(yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Afe(e)}function Afe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y3=function(){return!!e})()}function ax(e){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ax(e)}function Pfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vw(e,t)}function vw(e,t){return vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},vw(e,t)}function b3(e,t,n){return t=j3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j3(e){var t=Efe(e,"string");return yd(t)=="symbol"?t:t+""}function Efe(e,t){if(yd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(yd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pm=function(e){function t(){return wfe(this,t),kfe(this,t,arguments)}return Pfe(t,e),Sfe(t,[{key:"render",value:function(){var s=this.props,i=s.offset,a=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,f=s.yAxis,h=bfe(s,mfe),p=yt(h,!1);this.props.direction==="x"&&u.type!=="number"&&Cl();var v=c.map(function(g){var y=d(g,l),j=y.x,m=y.y,b=y.value,N=y.errorVal;if(!N)return null;var w=[],S,k;if(Array.isArray(N)){var P=pfe(N,2);S=P[0],k=P[1]}else S=k=N;if(a==="vertical"){var E=u.scale,_=m+i,F=_+o,A=_-o,T=E(b-S),M=E(b+k);w.push({x1:M,y1:F,x2:M,y2:A}),w.push({x1:T,y1:_,x2:M,y2:_}),w.push({x1:T,y1:F,x2:T,y2:A})}else if(a==="horizontal"){var O=f.scale,C=j+i,R=C-o,I=C+o,B=O(b-S),H=O(b+k);w.push({x1:R,y1:H,x2:I,y2:H}),w.push({x1:C,y1:B,x2:C,y2:H}),w.push({x1:R,y1:B,x2:I,y2:B})}return q.createElement(bn,ix({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Q){return"".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))},p),w.map(function(Q){return q.createElement("line",ix({},Q,{key:"line-".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))}))});return q.createElement(bn,{className:"recharts-errorBars"},v)}}])}(q.Component);b3(pm,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});b3(pm,"displayName","ErrorBar");function dh(e){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dh(e)}function xE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(n),!0).forEach(function(s){Tfe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Tfe(e,t,n){return t=Ofe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ofe(e){var t=_fe(e,"string");return dh(t)=="symbol"?t:t+""}function _fe(e,t){if(dh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(dh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w3=function(t){var n=t.children,s=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,o=zr(n,Tc);if(!o)return null;var l=Tc.defaultProps,c=l!==void 0?Fo(Fo({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:a==="children"?d=(s||[]).reduce(function(u,f){var h=f.item,p=f.props,v=p.sectors||p.data||[];return u.concat(v.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):d=(s||[]).map(function(u){var f=u.item,h=f.type.defaultProps,p=h!==void 0?Fo(Fo({},h),f.props):{},v=p.dataKey,g=p.name,y=p.legendType,j=p.hide;return{inactive:j,dataKey:v,type:c.iconType||y||"square",color:WS(f),value:g||v,payload:p}}),Fo(Fo(Fo({},c),Tc.getWithHeight(o,i)),{},{payload:d,item:o})};function uh(e){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uh(e)}function vE(e){return Ffe(e)||Mfe(e)||Rfe(e)||Ife()}function Ife(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rfe(e,t){if(e){if(typeof e=="string")return yw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yw(e,t)}}function Mfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ffe(e){if(Array.isArray(e))return yw(e)}function yw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function yE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(n),!0).forEach(function(s){_c(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _c(e,t,n){return t=$fe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $fe(e){var t=Dfe(e,"string");return uh(t)=="symbol"?t:t+""}function Dfe(e,t){if(uh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(uh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jr(e,t,n){return xt(e)||xt(t)?n:Rn(t)?us(e,t,n):ft(t)?t(e):n}function uf(e,t,n,s){var i=Mue(e,function(l){return Jr(l,t)});if(n==="number"){var a=i.filter(function(l){return Te(l)||parseFloat(l)});return a.length?[oy(a),ay(a)]:[1/0,-1/0]}var o=s?i.filter(function(l){return!xt(l)}):i;return o.map(function(l){return Rn(l)||l instanceof Date?l:""})}var Lfe=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,d=0;d<l;d++){var u=d>0?i[d-1].coordinate:i[l-1].coordinate,f=i[d].coordinate,h=d>=l-1?i[0].coordinate:i[d+1].coordinate,p=void 0;if(Ws(f-u)!==Ws(h-f)){var v=[];if(Ws(h-f)===Ws(c[1]-c[0])){p=h;var g=f+c[1]-c[0];v[0]=Math.min(g,(g+u)/2),v[1]=Math.max(g,(g+u)/2)}else{p=u;var y=h+c[1]-c[0];v[0]=Math.min(f,(y+f)/2),v[1]=Math.max(f,(y+f)/2)}var j=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>j[0]&&t<=j[1]||t>=v[0]&&t<=v[1]){o=i[d].index;break}}else{var m=Math.min(u,h),b=Math.max(u,h);if(t>(m+f)/2&&t<=(b+f)/2){o=i[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N>0&&N<l-1&&t>(s[N].coordinate+s[N-1].coordinate)/2&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N===l-1&&t>(s[N].coordinate+s[N-1].coordinate)/2){o=s[N].index;break}return o},WS=function(t){var n,s=t,i=s.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Bfe=function(t){var n=t.barSize,s=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,d=l.length;c<d;c++)for(var u=a[l[c]].stackGroups,f=Object.keys(u),h=0,p=f.length;h<p;h++){var v=u[f[h]],g=v.items,y=v.cateAxisId,j=g.filter(function(k){return Zi(k.type).indexOf("Bar")>=0});if(j&&j.length){var m=j[0].type.defaultProps,b=m!==void 0?hn(hn({},m),j[0].props):j[0].props,N=b.barSize,w=b[y];o[w]||(o[w]=[]);var S=xt(N)?n:N;o[w].push({item:j[0],stackList:j.slice(1),barSize:xt(S)?void 0:Sl(S,s,0)})}}return o},zfe=function(t){var n=t.barGap,s=t.barCategoryGap,i=t.bandSize,a=t.sizeList,o=a===void 0?[]:a,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=Sl(n,i,0,!0),u,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=i/c,v=o.reduce(function(N,w){return N+w.barSize||0},0);v+=(c-1)*d,v>=i&&(v-=(c-1)*d,d=0),v>=i&&p>0&&(h=!0,p*=.9,v=c*p);var g=(i-v)/2>>0,y={offset:g-d,size:0};u=o.reduce(function(N,w){var S={item:w.item,position:{offset:y.offset+y.size+d,size:h?p:w.barSize}},k=[].concat(vE(N),[S]);return y=k[k.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(P){k.push({item:P,position:y})}),k},f)}else{var j=Sl(s,i,0,!0);i-2*j-(c-1)*d<=0&&(d=0);var m=(i-2*j-(c-1)*d)/c;m>1&&(m>>=0);var b=l===+l?Math.min(m,l):m;u=o.reduce(function(N,w,S){var k=[].concat(vE(N),[{item:w.item,position:{offset:j+(m+d)*S+(m-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(P){k.push({item:P,position:k[k.length-1].position})}),k},f)}return u},qfe=function(t,n,s,i){var a=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=w3({children:a,legendWidth:c});if(d){var u=i||{},f=u.width,h=u.height,p=d.align,v=d.verticalAlign,g=d.layout;if((g==="vertical"||g==="horizontal"&&v==="middle")&&p!=="center"&&Te(t[p]))return hn(hn({},t),{},_c({},p,t[p]+(f||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&v!=="middle"&&Te(t[v]))return hn(hn({},t),{},_c({},v,t[v]+(h||0)))}return t},Ufe=function(t,n,s){return xt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},N3=function(t,n,s,i,a){var o=n.props.children,l=fs(o,pm).filter(function(d){return Ufe(i,a,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var f=Jr(u,s);if(xt(f))return d;var h=Array.isArray(f)?[oy(f),ay(f)]:[f,f],p=c.reduce(function(v,g){var y=Jr(u,g,0),j=h[0]-Math.abs(Array.isArray(y)?y[0]:y),m=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(j,v[0]),Math.max(m,v[1])]},[1/0,-1/0]);return[Math.min(p[0],d[0]),Math.max(p[1],d[1])]},[1/0,-1/0])}return null},Vfe=function(t,n,s,i,a){var o=n.map(function(l){return N3(t,l,s,a,i)}).filter(function(l){return!xt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},S3=function(t,n,s,i,a){var o=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&N3(t,c,d,i)||uf(t,d,s,a)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,f=d.length;u<f;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},k3=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},C3=function(t,n,s,i){if(i)return t.map(function(c){return c.coordinate});var a,o,l=t.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===s&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(s),l},Wi=function(t,n,s){if(!t)return null;var i=t.scale,a=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||s)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ws(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var h=a?a.indexOf(f):f;return{coordinate:i(h)+d,value:f,offset:d}});return u.filter(function(f){return!lm(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:i(f)+d,value:f,index:h,offset:d}}):i.ticks&&!s?i.ticks(t.tickCount).map(function(f){return{coordinate:i(f)+d,value:f,offset:d}}):i.domain().map(function(f,h){return{coordinate:i(f)+d,value:a?a[f]:f,index:h,offset:d}})},Bb=new WeakMap,ep=function(t,n){if(typeof n!="function")return t;Bb.has(t)||Bb.set(t,new WeakMap);var s=Bb.get(t);if(s.has(n))return s.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,i),i},Wfe=function(t,n,s){var i=t.scale,a=t.type,o=t.layout,l=t.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:rh(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:ex(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:df(),realScaleType:"point"}:a==="category"?{scale:rh(),realScaleType:"band"}:{scale:ex(),realScaleType:"linear"};if(om(i)){var c="scale".concat(Kv(i));return{scale:(fE[c]||df)(),realScaleType:fE[c]?c:"point"}}return ft(i)?{scale:i}:{scale:df(),realScaleType:"point"}},bE=1e-4,Hfe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,i=t.range(),a=Math.min(i[0],i[1])-bE,o=Math.max(i[0],i[1])+bE,l=t(n[0]),c=t(n[s-1]);(l<a||l>o||c<a||c>o)&&t.domain([n[0],n[s-1]])}},Kfe=function(t,n){if(!t)return null;for(var s=0,i=t.length;s<i;s++)if(t[s].item===n)return t[s].position;return null},Gfe=function(t,n){if(!n||n.length!==2||!Te(n[0])||!Te(n[1]))return t;var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!Te(t[0])||t[0]<s)&&(a[0]=s),(!Te(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<s&&(a[1]=s),a},Yfe=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0,l=0;l<n;++l){var c=lm(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=a,t[l][s][1]=a+c,a=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},Qfe=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0;o<n;++o){var l=lm(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=a,t[o][s][1]=a+l,a=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},Jfe={sign:Yfe,expand:fZ,none:ud,silhouette:hZ,wiggle:mZ,positive:Qfe},Xfe=function(t,n,s){var i=n.map(function(l){return l.props.dataKey}),a=Jfe[s],o=uZ().keys(i).value(function(l,c){return+Jr(l,c,0)}).order(Vj).offset(a);return o(t)},Zfe=function(t,n,s,i,a,o){if(!t)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(f,h){var p,v=(p=h.type)!==null&&p!==void 0&&p.defaultProps?hn(hn({},h.type.defaultProps),h.props):h.props,g=v.stackId,y=v.hide;if(y)return f;var j=v[s],m=f[j]||{hasStack:!1,stackGroups:{}};if(Rn(g)){var b=m.stackGroups[g]||{numericAxisId:s,cateAxisId:i,items:[]};b.items.push(h),m.hasStack=!0,m.stackGroups[g]=b}else m.stackGroups[cm("_stackId_")]={numericAxisId:s,cateAxisId:i,items:[h]};return hn(hn({},f),{},_c({},j,m))},c),u={};return Object.keys(d).reduce(function(f,h){var p=d[h];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,y){var j=p.stackGroups[y];return hn(hn({},g),{},_c({},y,{numericAxisId:s,cateAxisId:i,items:j.items,stackedData:Xfe(t,j.items,a)}))},v)}return hn(hn({},f),{},_c({},h,p))},u)},ehe=function(t,n){var s=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=ufe(d,a,l);return t.domain([oy(u),ay(u)]),{niceTicks:u}}if(a&&i==="number"){var f=t.domain(),h=ffe(f,a,l);return{niceTicks:h}}return null};function jE(e){var t=e.axis,n=e.ticks,s=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!xt(i[t.dataKey])){var l=Og(n,"value",i[t.dataKey]);if(l)return l.coordinate+s/2}return n[a]?n[a].coordinate+s/2:null}var c=Jr(i,xt(o)?t.dataKey:o);return xt(c)?null:t.scale(c)}var wE=function(t){var n=t.axis,s=t.ticks,i=t.offset,a=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return s[l]?s[l].coordinate+i:null;var c=Jr(o,n.dataKey,n.domain[l]);return xt(c)?null:n.scale(c)-a/2+i},the=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var i=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return i<=0&&a>=0?0:a<0?a:i}return s[0]},nhe=function(t,n){var s,i=(s=t.type)!==null&&s!==void 0&&s.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(Rn(a)){var o=n[a];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},rhe=function(t){return t.reduce(function(n,s){return[oy(s.concat([n[0]]).filter(Te)),ay(s.concat([n[1]]).filter(Te))]},[1/0,-1/0])},A3=function(t,n,s){return Object.keys(t).reduce(function(i,a){var o=t[a],l=o.stackedData,c=l.reduce(function(d,u){var f=rhe(u.slice(n,s+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},NE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bw=function(t,n,s){if(ft(t))return t(n,s);if(!Array.isArray(t))return n;var i=[];if(Te(t[0]))i[0]=s?t[0]:Math.min(t[0],n[0]);else if(NE.test(t[0])){var a=+NE.exec(t[0])[1];i[0]=n[0]-a}else ft(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(Te(t[1]))i[1]=s?t[1]:Math.max(t[1],n[1]);else if(SE.test(t[1])){var o=+SE.exec(t[1])[1];i[1]=n[1]+o}else ft(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},ox=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!s||i>0)return i}if(t&&n&&n.length>=2){for(var a=vS(n,function(f){return f.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var d=a[l],u=a[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},kE=function(t,n,s){return!t||!t.length||ly(t,us(s,"type.defaultProps.domain"))?n:t},P3=function(t,n){var s=t.type.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,i=s.dataKey,a=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return hn(hn({},yt(t,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:WS(t),value:Jr(n,i),type:c,payload:n,chartType:d,hide:u})};function fh(e){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fh(e)}function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function AE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(s){she(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function she(e,t,n){return t=ihe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ihe(e){var t=ahe(e,"string");return fh(t)=="symbol"?t:t+""}function ahe(e,t){if(fh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(fh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lx=Math.PI/180,ohe=function(t){return t*180/Math.PI},Yn=function(t,n,s,i){return{x:t+Math.cos(-lx*i)*s,y:n+Math.sin(-lx*i)*s}},lhe=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(s-a,2)+Math.pow(i-o,2))},che=function(t,n){var s=t.x,i=t.y,a=n.cx,o=n.cy,l=lhe({x:s,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(s-a)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:ohe(d),angleInRadian:d}},dhe=function(t){var n=t.startAngle,s=t.endAngle,i=Math.floor(n/360),a=Math.floor(s/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:s-o*360}},uhe=function(t,n){var s=n.startAngle,i=n.endAngle,a=Math.floor(s/360),o=Math.floor(i/360),l=Math.min(a,o);return t+l*360},PE=function(t,n){var s=t.x,i=t.y,a=che({x:s,y:i},n),o=a.radius,l=a.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=dhe(n),f=u.startAngle,h=u.endAngle,p=l,v;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;v=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=f}return v?AE(AE({},n),{},{radius:o,angle:uhe(p,n)}):null};function hh(e){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hh(e)}var fhe=["offset"];function hhe(e){return xhe(e)||ghe(e)||phe(e)||mhe()}function mhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function phe(e,t){if(e){if(typeof e=="string")return jw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jw(e,t)}}function ghe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xhe(e){if(Array.isArray(e))return jw(e)}function jw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function vhe(e,t){if(e==null)return{};var n=yhe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function yhe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function EE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(n),!0).forEach(function(s){bhe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function bhe(e,t,n){return t=jhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jhe(e){var t=whe(e,"string");return hh(t)=="symbol"?t:t+""}function whe(e,t){if(hh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(hh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mh(){return mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mh.apply(this,arguments)}var Nhe=function(t){var n=t.value,s=t.formatter,i=xt(t.children)?n:t.children;return ft(s)?s(i):i},She=function(t,n){var s=Ws(n-t),i=Math.min(Math.abs(n-t),360);return s*i},khe=function(t,n,s){var i=t.position,a=t.viewBox,o=t.offset,l=t.className,c=a,d=c.cx,u=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,v=c.endAngle,g=c.clockWise,y=(f+h)/2,j=She(p,v),m=j>=0?1:-1,b,N;i==="insideStart"?(b=p+m*o,N=g):i==="insideEnd"?(b=v-m*o,N=!g):i==="end"&&(b=v+m*o,N=g),N=j<=0?N:!N;var w=Yn(d,u,y,b),S=Yn(d,u,y,b+(N?1:-1)*359),k="M".concat(w.x,",").concat(w.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(N?0:1,`,
    `).concat(S.x,",").concat(S.y),P=xt(t.id)?cm("recharts-radial-line-"):t.id;return q.createElement("text",mh({},s,{dominantBaseline:"central",className:Nt("recharts-radial-bar-label",l)}),q.createElement("defs",null,q.createElement("path",{id:P,d:k})),q.createElement("textPath",{xlinkHref:"#".concat(P)},n))},Che=function(t){var n=t.viewBox,s=t.offset,i=t.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,d=a.outerRadius,u=a.startAngle,f=a.endAngle,h=(u+f)/2;if(i==="outside"){var p=Yn(o,l,d+s,h),v=p.x,g=p.y;return{x:v,y:g,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+d)/2,j=Yn(o,l,y,h),m=j.x,b=j.y;return{x:m,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Ahe=function(t){var n=t.viewBox,s=t.parentViewBox,i=t.offset,a=t.position,o=n,l=o.x,c=o.y,d=o.width,u=o.height,f=u>=0?1:-1,h=f*i,p=f>0?"end":"start",v=f>0?"start":"end",g=d>=0?1:-1,y=g*i,j=g>0?"end":"start",m=g>0?"start":"end";if(a==="top"){var b={x:l+d/2,y:c-f*i,textAnchor:"middle",verticalAnchor:p};return Pn(Pn({},b),s?{height:Math.max(c-s.y,0),width:d}:{})}if(a==="bottom"){var N={x:l+d/2,y:c+u+h,textAnchor:"middle",verticalAnchor:v};return Pn(Pn({},N),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(a==="left"){var w={x:l-y,y:c+u/2,textAnchor:j,verticalAnchor:"middle"};return Pn(Pn({},w),s?{width:Math.max(w.x-s.x,0),height:u}:{})}if(a==="right"){var S={x:l+d+y,y:c+u/2,textAnchor:m,verticalAnchor:"middle"};return Pn(Pn({},S),s?{width:Math.max(s.x+s.width-S.x,0),height:u}:{})}var k=s?{width:d,height:u}:{};return a==="insideLeft"?Pn({x:l+y,y:c+u/2,textAnchor:m,verticalAnchor:"middle"},k):a==="insideRight"?Pn({x:l+d-y,y:c+u/2,textAnchor:j,verticalAnchor:"middle"},k):a==="insideTop"?Pn({x:l+d/2,y:c+h,textAnchor:"middle",verticalAnchor:v},k):a==="insideBottom"?Pn({x:l+d/2,y:c+u-h,textAnchor:"middle",verticalAnchor:p},k):a==="insideTopLeft"?Pn({x:l+y,y:c+h,textAnchor:m,verticalAnchor:v},k):a==="insideTopRight"?Pn({x:l+d-y,y:c+h,textAnchor:j,verticalAnchor:v},k):a==="insideBottomLeft"?Pn({x:l+y,y:c+u-h,textAnchor:m,verticalAnchor:p},k):a==="insideBottomRight"?Pn({x:l+d-y,y:c+u-h,textAnchor:j,verticalAnchor:p},k):Jd(a)&&(Te(a.x)||Yo(a.x))&&(Te(a.y)||Yo(a.y))?Pn({x:l+Sl(a.x,d),y:c+Sl(a.y,u),textAnchor:"end",verticalAnchor:"end"},k):Pn({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},k)},Phe=function(t){return"cx"in t&&Te(t.cx)};function ir(e){var t=e.offset,n=t===void 0?5:t,s=vhe(e,fhe),i=Pn({offset:n},s),a=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,u=i.className,f=u===void 0?"":u,h=i.textBreakAll;if(!a||xt(l)&&xt(c)&&!x.isValidElement(d)&&!ft(d))return null;if(x.isValidElement(d))return x.cloneElement(d,i);var p;if(ft(d)){if(p=x.createElement(d,i),x.isValidElement(p))return p}else p=Nhe(i);var v=Phe(a),g=yt(i,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return khe(i,p,g);var y=v?Che(i):Ahe(i);return q.createElement(Kg,mh({className:Nt("recharts-label",f)},g,y,{breakAll:h}),p)}ir.displayName="Label";var E3=function(t){var n=t.cx,s=t.cy,i=t.angle,a=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,f=t.x,h=t.y,p=t.top,v=t.left,g=t.width,y=t.height,j=t.clockWise,m=t.labelViewBox;if(m)return m;if(Te(g)&&Te(y)){if(Te(f)&&Te(h))return{x:f,y:h,width:g,height:y};if(Te(p)&&Te(v))return{x:p,y:v,width:g,height:y}}return Te(f)&&Te(h)?{x:f,y:h,width:0,height:0}:Te(n)&&Te(s)?{cx:n,cy:s,startAngle:a||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:j}:t.viewBox?t.viewBox:{}},Ehe=function(t,n){return t?t===!0?q.createElement(ir,{key:"label-implicit",viewBox:n}):Rn(t)?q.createElement(ir,{key:"label-implicit",viewBox:n,value:t}):x.isValidElement(t)?t.type===ir?x.cloneElement(t,{key:"label-implicit",viewBox:n}):q.createElement(ir,{key:"label-implicit",content:t,viewBox:n}):ft(t)?q.createElement(ir,{key:"label-implicit",content:t,viewBox:n}):Jd(t)?q.createElement(ir,mh({viewBox:n},t,{key:"label-implicit"})):null:null},The=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var i=t.children,a=E3(t),o=fs(i,ir).map(function(c,d){return x.cloneElement(c,{viewBox:n||a,key:"label-".concat(d)})});if(!s)return o;var l=Ehe(t.label,n||a);return[l].concat(hhe(o))};ir.parseViewBox=E3;ir.renderCallByParent=The;function Ohe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var _he=Ohe;const Ihe=Dt(_he);function ph(e){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ph(e)}var Rhe=["valueAccessor"],Mhe=["data","dataKey","clockWise","id","textBreakAll"];function Fhe(e){return Bhe(e)||Lhe(e)||Dhe(e)||$he()}function $he(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dhe(e,t){if(e){if(typeof e=="string")return ww(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ww(e,t)}}function Lhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bhe(e){if(Array.isArray(e))return ww(e)}function ww(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function cx(){return cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cx.apply(this,arguments)}function TE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function OE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TE(Object(n),!0).forEach(function(s){zhe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function zhe(e,t,n){return t=qhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qhe(e){var t=Uhe(e,"string");return ph(t)=="symbol"?t:t+""}function Uhe(e,t){if(ph(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ph(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _E(e,t){if(e==null)return{};var n=Vhe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Vhe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Whe=function(t){return Array.isArray(t.value)?Ihe(t.value):t.value};function fo(e){var t=e.valueAccessor,n=t===void 0?Whe:t,s=_E(e,Rhe),i=s.data,a=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=_E(s,Mhe);return!i||!i.length?null:q.createElement(bn,{className:"recharts-label-list"},i.map(function(u,f){var h=xt(a)?n(u,f):Jr(u&&u.payload,a),p=xt(l)?{}:{id:"".concat(l,"-").concat(f)};return q.createElement(ir,cx({},yt(u,!0),d,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:c,viewBox:ir.parseViewBox(xt(o)?u:OE(OE({},u),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}fo.displayName="LabelList";function Hhe(e,t){return e?e===!0?q.createElement(fo,{key:"labelList-implicit",data:t}):q.isValidElement(e)||ft(e)?q.createElement(fo,{key:"labelList-implicit",data:t,content:e}):Jd(e)?q.createElement(fo,cx({data:t},e,{key:"labelList-implicit"})):null:null}function Khe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,i=fs(s,fo).map(function(o,l){return x.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return i;var a=Hhe(e.label,t);return[a].concat(Fhe(i))}fo.renderCallByParent=Khe;function gh(e){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gh(e)}function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Nw.apply(this,arguments)}function IE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function RE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(n),!0).forEach(function(s){Ghe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ghe(e,t,n){return t=Yhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yhe(e){var t=Qhe(e,"string");return gh(t)=="symbol"?t:t+""}function Qhe(e,t){if(gh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(gh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jhe=function(t,n){var s=Ws(n-t),i=Math.min(Math.abs(n-t),359.999);return s*i},tp=function(t){var n=t.cx,s=t.cy,i=t.radius,a=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+i,f=Math.asin(c/u)/lx,h=d?a:a+o*f,p=Yn(n,s,u,h),v=Yn(n,s,i,h),g=d?a-o*f:a,y=Yn(n,s,u*Math.cos(f*lx),g);return{center:p,circleTangency:v,lineTangency:y,theta:f}},T3=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.startAngle,l=t.endAngle,c=Jhe(o,l),d=o+c,u=Yn(n,s,a,o),f=Yn(n,s,a,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=Yn(n,s,i,o),v=Yn(n,s,i,d);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(n,",").concat(s," Z");return h},Xhe=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,f=Ws(u-d),h=tp({cx:n,cy:s,radius:a,angle:d,sign:f,cornerRadius:o,cornerIsExternal:c}),p=h.circleTangency,v=h.lineTangency,g=h.theta,y=tp({cx:n,cy:s,radius:a,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:c}),j=y.circleTangency,m=y.lineTangency,b=y.theta,N=c?Math.abs(d-u):Math.abs(d-u)-g-b;if(N<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):T3({cx:n,cy:s,innerRadius:i,outerRadius:a,startAngle:d,endAngle:u});var w="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
  `);if(i>0){var S=tp({cx:n,cy:s,radius:i,angle:d,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=S.circleTangency,P=S.lineTangency,E=S.theta,_=tp({cx:n,cy:s,radius:i,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),F=_.circleTangency,A=_.lineTangency,T=_.theta,M=c?Math.abs(d-u):Math.abs(d-u)-E-T;if(M<0&&o===0)return"".concat(w,"L").concat(n,",").concat(s,"Z");w+="L".concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else w+="L".concat(n,",").concat(s,"Z");return w},Zhe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},O3=function(t){var n=RE(RE({},Zhe),t),s=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,u=n.startAngle,f=n.endAngle,h=n.className;if(o<a||u===f)return null;var p=Nt("recharts-sector",h),v=o-a,g=Sl(l,v,0,!0),y;return g>0&&Math.abs(u-f)<360?y=Xhe({cx:s,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):y=T3({cx:s,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:f}),q.createElement("path",Nw({},yt(n,!0),{className:p,d:y,role:"img"}))};function xh(e){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xh(e)}function Sw(){return Sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sw.apply(this,arguments)}function ME(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function FE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(n),!0).forEach(function(s){eme(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function eme(e,t,n){return t=tme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tme(e){var t=nme(e,"string");return xh(t)=="symbol"?t:t+""}function nme(e,t){if(xh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(xh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $E={curveBasisClosed:eZ,curveBasisOpen:tZ,curveBasis:ZX,curveBumpX:LX,curveBumpY:BX,curveLinearClosed:nZ,curveLinear:Yv,curveMonotoneX:rZ,curveMonotoneY:sZ,curveNatural:iZ,curveStep:aZ,curveStepAfter:lZ,curveStepBefore:oZ},np=function(t){return t.x===+t.x&&t.y===+t.y},Eu=function(t){return t.x},Tu=function(t){return t.y},rme=function(t,n){if(ft(t))return t;var s="curve".concat(Kv(t));return(s==="curveMonotone"||s==="curveBump")&&n?$E["".concat(s).concat(n==="vertical"?"Y":"X")]:$E[s]||Yv},sme=function(t){var n=t.type,s=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=rme(s,l),f=d?a.filter(function(g){return np(g)}):a,h;if(Array.isArray(o)){var p=d?o.filter(function(g){return np(g)}):o,v=f.map(function(g,y){return FE(FE({},g),{},{base:p[y]})});return l==="vertical"?h=Hm().y(Tu).x1(Eu).x0(function(g){return g.base.x}):h=Hm().x(Eu).y1(Tu).y0(function(g){return g.base.y}),h.defined(np).curve(u),h(v)}return l==="vertical"&&Te(o)?h=Hm().y(Tu).x1(Eu).x0(o):Te(o)?h=Hm().x(Eu).y1(Tu).y0(o):h=_F().x(Eu).y(Tu),h.defined(np).curve(u),h(f)},kw=function(t){var n=t.className,s=t.points,i=t.path,a=t.pathRef;if((!s||!s.length)&&!i)return null;var o=s&&s.length?sme(t):i;return q.createElement("path",Sw({},yt(t,!1),_g(t),{className:Nt("recharts-curve",n),d:o,ref:a}))},_3={exports:{}},ime="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ame=ime,ome=ame;function I3(){}function R3(){}R3.resetWarningCache=I3;var lme=function(){function e(s,i,a,o,l,c){if(c!==ome){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:R3,resetWarningCache:I3};return n.PropTypes=n,n};_3.exports=lme();var cme=_3.exports;const Pt=Dt(cme);var dme=Object.getOwnPropertyNames,ume=Object.getOwnPropertySymbols,fme=Object.prototype.hasOwnProperty;function DE(e,t){return function(s,i,a){return e(s,i,a)&&t(s,i,a)}}function rp(e){return function(n,s,i){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,i);var a=i.cache,o=a.get(n),l=a.get(s);if(o&&l)return o===s&&l===n;a.set(n,s),a.set(s,n);var c=e(n,s,i);return a.delete(n),a.delete(s),c}}function LE(e){return dme(e).concat(ume(e))}var hme=Object.hasOwn||function(e,t){return fme.call(e,t)};function $l(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var mme="__v",pme="__o",gme="_owner",BE=Object.getOwnPropertyDescriptor,zE=Object.keys;function xme(e,t,n){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function vme(e,t){return $l(e.getTime(),t.getTime())}function yme(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function bme(e,t){return e===t}function qE(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var d=t.entries(),u=!1,f=0;(l=d.next())&&!l.done;){if(i[f]){f++;continue}var h=o.value,p=l.value;if(n.equals(h[0],p[0],c,f,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){u=i[f]=!0;break}f++}if(!u)return!1;c++}return!0}var jme=$l;function wme(e,t,n){var s=zE(e),i=s.length;if(zE(t).length!==i)return!1;for(;i-- >0;)if(!M3(e,t,n,s[i]))return!1;return!0}function Ou(e,t,n){var s=LE(e),i=s.length;if(LE(t).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=s[i],!M3(e,t,n,a)||(o=BE(e,a),l=BE(t,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Nme(e,t){return $l(e.valueOf(),t.valueOf())}function Sme(e,t){return e.source===t.source&&e.flags===t.flags}function UE(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.values(),o,l;(o=a.next())&&!o.done;){for(var c=t.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!i[u]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=i[u]=!0;break}u++}if(!d)return!1}return!0}function kme(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Cme(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function M3(e,t,n,s){return(s===gme||s===pme||s===mme)&&(e.$$typeof||t.$$typeof)?!0:hme(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}var Ame="[object Arguments]",Pme="[object Boolean]",Eme="[object Date]",Tme="[object Error]",Ome="[object Map]",_me="[object Number]",Ime="[object Object]",Rme="[object RegExp]",Mme="[object Set]",Fme="[object String]",$me="[object URL]",Dme=Array.isArray,VE=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,WE=Object.assign,Lme=Object.prototype.toString.call.bind(Object.prototype.toString);function Bme(e){var t=e.areArraysEqual,n=e.areDatesEqual,s=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(v,g,y){if(v===g)return!0;if(v==null||g==null)return!1;var j=typeof v;if(j!==typeof g)return!1;if(j!=="object")return j==="number"?o(v,g,y):j==="function"?i(v,g,y):!1;var m=v.constructor;if(m!==g.constructor)return!1;if(m===Object)return l(v,g,y);if(Dme(v))return t(v,g,y);if(VE!=null&&VE(v))return f(v,g,y);if(m===Date)return n(v,g,y);if(m===RegExp)return d(v,g,y);if(m===Map)return a(v,g,y);if(m===Set)return u(v,g,y);var b=Lme(v);return b===Eme?n(v,g,y):b===Rme?d(v,g,y):b===Ome?a(v,g,y):b===Mme?u(v,g,y):b===Ime?typeof v.then!="function"&&typeof g.then!="function"&&l(v,g,y):b===$me?h(v,g,y):b===Tme?s(v,g,y):b===Ame?l(v,g,y):b===Pme||b===_me||b===Fme?c(v,g,y):!1}}function zme(e){var t=e.circular,n=e.createCustomConfig,s=e.strict,i={areArraysEqual:s?Ou:xme,areDatesEqual:vme,areErrorsEqual:yme,areFunctionsEqual:bme,areMapsEqual:s?DE(qE,Ou):qE,areNumbersEqual:jme,areObjectsEqual:s?Ou:wme,arePrimitiveWrappersEqual:Nme,areRegExpsEqual:Sme,areSetsEqual:s?DE(UE,Ou):UE,areTypedArraysEqual:s?Ou:kme,areUrlsEqual:Cme};if(n&&(i=WE({},i,n(i))),t){var a=rp(i.areArraysEqual),o=rp(i.areMapsEqual),l=rp(i.areObjectsEqual),c=rp(i.areSetsEqual);i=WE({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function qme(e){return function(t,n,s,i,a,o,l){return e(t,n,l)}}function Ume(e){var t=e.circular,n=e.comparator,s=e.createState,i=e.equals,a=e.strict;if(s)return function(c,d){var u=s(),f=u.cache,h=f===void 0?t?new WeakMap:void 0:f,p=u.meta;return n(c,d,{cache:h,equals:i,meta:p,strict:a})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,d){return n(c,d,o)}}var Vme=Ro();Ro({strict:!0});Ro({circular:!0});Ro({circular:!0,strict:!0});Ro({createInternalComparator:function(){return $l}});Ro({strict:!0,createInternalComparator:function(){return $l}});Ro({circular:!0,createInternalComparator:function(){return $l}});Ro({circular:!0,createInternalComparator:function(){return $l},strict:!0});function Ro(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,s=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,l=zme(e),c=Bme(l),d=s?s(c):qme(c);return Ume({circular:n,comparator:c,createState:i,equals:d,strict:o})}function Wme(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function HE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):Wme(i)};requestAnimationFrame(s)}function Cw(e){"@babel/helpers - typeof";return Cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cw(e)}function Hme(e){return Qme(e)||Yme(e)||Gme(e)||Kme()}function Kme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gme(e,t){if(e){if(typeof e=="string")return KE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KE(e,t)}}function KE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Yme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qme(e){if(Array.isArray(e))return e}function Jme(){var e={},t=function(){return null},n=!1,s=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=Hme(o),c=l[0],d=l.slice(1);if(typeof c=="number"){HE(i.bind(null,d),c);return}i(c),HE(i.bind(null,d));return}Cw(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,s(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function vh(e){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vh(e)}function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function YE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(n),!0).forEach(function(s){F3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function F3(e,t,n){return t=Xme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xme(e){var t=Zme(e,"string");return vh(t)==="symbol"?t:String(t)}function Zme(e,t){if(vh(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(vh(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var epe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,i){return s.filter(function(a){return i.includes(a)})})},tpe=function(t){return t},npe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},ff=function(t,n){return Object.keys(n).reduce(function(s,i){return YE(YE({},s),{},F3({},i,t(i,n[i])))},{})},QE=function(t,n,s){return t.map(function(i){return"".concat(npe(i)," ").concat(n,"ms ").concat(s)}).join(",")};function rpe(e,t){return ape(e)||ipe(e,t)||$3(e,t)||spe()}function spe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ipe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function ape(e){if(Array.isArray(e))return e}function ope(e){return dpe(e)||cpe(e)||$3(e)||lpe()}function lpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $3(e,t){if(e){if(typeof e=="string")return Aw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aw(e,t)}}function cpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dpe(e){if(Array.isArray(e))return Aw(e)}function Aw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var dx=1e-4,D3=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},L3=function(t,n){return t.map(function(s,i){return s*Math.pow(n,i)}).reduce(function(s,i){return s+i})},JE=function(t,n){return function(s){var i=D3(t,n);return L3(i,s)}},upe=function(t,n){return function(s){var i=D3(t,n),a=[].concat(ope(i.map(function(o,l){return o*l}).slice(1)),[0]);return L3(a,s)}},XE=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=rpe(d,4);i=u[0],a=u[1],o=u[2],l=u[3]}}}var f=JE(i,o),h=JE(a,l),p=upe(i,o),v=function(j){return j>1?1:j<0?0:j},g=function(j){for(var m=j>1?1:j,b=m,N=0;N<8;++N){var w=f(b)-m,S=p(b);if(Math.abs(w-m)<dx||S<dx)return h(b);b=v(b-w/S)}return h(b)};return g.isStepper=!1,g},fpe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,o=t.dt,l=o===void 0?17:o,c=function(u,f,h){var p=-(u-f)*s,v=h*a,g=h+(p-v)*l/1e3,y=h*l/1e3+u;return Math.abs(y-f)<dx&&Math.abs(g)<dx?[f,0]:[y,g]};return c.isStepper=!0,c.dt=l,c},hpe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return XE(i);case"spring":return fpe();default:if(i.split("(")[0]==="cubic-bezier")return XE(i)}return typeof i=="function"?i:null};function yh(e){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yh(e)}function ZE(e){return gpe(e)||ppe(e)||B3(e)||mpe()}function mpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ppe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gpe(e){if(Array.isArray(e))return Ew(e)}function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(s){Pw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Pw(e,t,n){return t=xpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xpe(e){var t=vpe(e,"string");return yh(t)==="symbol"?t:String(t)}function vpe(e,t){if(yh(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(yh(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ype(e,t){return wpe(e)||jpe(e,t)||B3(e,t)||bpe()}function bpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B3(e,t){if(e){if(typeof e=="string")return Ew(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ew(e,t)}}function Ew(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function jpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function wpe(e){if(Array.isArray(e))return e}var ux=function(t,n,s){return t+(n-t)*s},Tw=function(t){var n=t.from,s=t.to;return n!==s},Npe=function e(t,n,s){var i=ff(function(a,o){if(Tw(o)){var l=t(o.from,o.to,o.velocity),c=ype(l,2),d=c[0],u=c[1];return Wn(Wn({},o),{},{from:d,velocity:u})}return o},n);return s<1?ff(function(a,o){return Tw(o)?Wn(Wn({},o),{},{velocity:ux(o.velocity,i[a].velocity,s),from:ux(o.from,i[a].from,s)}):o},n):e(t,i,s-1)};const Spe=function(e,t,n,s,i){var a=epe(e,t),o=a.reduce(function(y,j){return Wn(Wn({},y),{},Pw({},j,[e[j],t[j]]))},{}),l=a.reduce(function(y,j){return Wn(Wn({},y),{},Pw({},j,{from:e[j],velocity:0,to:t[j]}))},{}),c=-1,d,u,f=function(){return null},h=function(){return ff(function(j,m){return m.from},l)},p=function(){return!Object.values(l).filter(Tw).length},v=function(j){d||(d=j);var m=j-d,b=m/n.dt;l=Npe(n,l,b),i(Wn(Wn(Wn({},e),t),h())),d=j,p()||(c=requestAnimationFrame(f))},g=function(j){u||(u=j);var m=(j-u)/s,b=ff(function(w,S){return ux.apply(void 0,ZE(S).concat([n(m)]))},o);if(i(Wn(Wn(Wn({},e),t),b)),m<1)c=requestAnimationFrame(f);else{var N=ff(function(w,S){return ux.apply(void 0,ZE(S).concat([n(1)]))},o);i(Wn(Wn(Wn({},e),t),N))}};return f=n.isStepper?v:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function bd(e){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bd(e)}var kpe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Cpe(e,t){if(e==null)return{};var n=Ape(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Ape(e,t){if(e==null)return{};var n={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function zb(e){return Ope(e)||Tpe(e)||Epe(e)||Ppe()}function Ppe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Epe(e,t){if(e){if(typeof e=="string")return Ow(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ow(e,t)}}function Tpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ope(e){if(Array.isArray(e))return Ow(e)}function Ow(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function tT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Cs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tT(Object(n),!0).forEach(function(s){Wu(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Wu(e,t,n){return t=z3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ipe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,z3(s.key),s)}}function Rpe(e,t,n){return t&&Ipe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function z3(e){var t=Mpe(e,"string");return bd(t)==="symbol"?t:String(t)}function Mpe(e,t){if(bd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(bd(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_w(e,t)}function _w(e,t){return _w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},_w(e,t)}function $pe(e){var t=Dpe();return function(){var s=fx(e),i;if(t){var a=fx(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return Iw(this,i)}}function Iw(e,t){if(t&&(bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rw(e)}function Rw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fx(e){return fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fx(e)}var pa=function(e){Fpe(n,e);var t=$pe(n);function n(s,i){var a;_pe(this,n),a=t.call(this,s,i);var o=a.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,f=o.steps,h=o.children,p=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(Rw(a)),a.changeStyle=a.changeStyle.bind(Rw(a)),!l||p<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:u}),Iw(a);if(f&&f.length)a.state={style:f[0].style};else if(d){if(typeof h=="function")return a.state={style:d},Iw(a);a.state={style:c?Wu({},c,d):d}}else a.state={style:{}};return a}return Rpe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,d=a.shouldReAnimate,u=a.to,f=a.from,h=this.state.style;if(l){if(!o){var p={style:c?Wu({},c,u):u};this.state&&h&&(c&&h[c]!==u||!c&&h!==u)&&this.setState(p);return}if(!(Vme(i.to,u)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=v||d?f:i.to;if(this.state&&h){var y={style:c?Wu({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(y)}this.runAnimation(Cs(Cs({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,d=i.easing,u=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=Spe(o,l,hpe(d),c,this.changeStyle),v=function(){a.stopJSAnimation=p()};this.manager.start([h,u,v,c,f])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],u=d.style,f=d.duration,h=f===void 0?0:f,p=function(g,y,j){if(j===0)return g;var m=y.duration,b=y.easing,N=b===void 0?"ease":b,w=y.style,S=y.properties,k=y.onAnimationEnd,P=j>0?o[j-1]:y,E=S||Object.keys(w);if(typeof N=="function"||N==="spring")return[].concat(zb(g),[a.runJSAnimation.bind(a,{from:P.style,to:w,duration:m,easing:N}),m]);var _=QE(E,m,N),F=Cs(Cs(Cs({},P.style),w),{},{transition:_});return[].concat(zb(g),[F,m,k]).filter(tpe)};return this.manager.start([c].concat(zb(o.reduce(p,[u,Math.max(h,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Jme());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,u=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof p=="function"||d==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var g=l?Wu({},l,c):c,y=QE(Object.keys(g),o,d);v.start([u,a,Cs(Cs({},g),{},{transition:y}),o,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=Cpe(i,kpe),d=x.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!l||d===0||o<=0)return a;var f=function(p){var v=p.props,g=v.style,y=g===void 0?{}:g,j=v.className,m=x.cloneElement(p,Cs(Cs({},c),{},{style:Cs(Cs({},y),u),className:j}));return m};return d===1?f(x.Children.only(a)):q.createElement("div",null,x.Children.map(a,function(h){return f(h)}))}}]),n}(x.PureComponent);pa.displayName="Animate";pa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};pa.propTypes={from:Pt.oneOfType([Pt.object,Pt.string]),to:Pt.oneOfType([Pt.object,Pt.string]),attributeName:Pt.string,duration:Pt.number,begin:Pt.number,easing:Pt.oneOfType([Pt.string,Pt.func]),steps:Pt.arrayOf(Pt.shape({duration:Pt.number.isRequired,style:Pt.object.isRequired,easing:Pt.oneOfType([Pt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Pt.func]),properties:Pt.arrayOf("string"),onAnimationEnd:Pt.func})),children:Pt.oneOfType([Pt.node,Pt.func]),isActive:Pt.bool,canBegin:Pt.bool,onAnimationEnd:Pt.func,shouldReAnimate:Pt.bool,onAnimationStart:Pt.func,onAnimationReStart:Pt.func};function bh(e){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bh(e)}function hx(){return hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hx.apply(this,arguments)}function Lpe(e,t){return Upe(e)||qpe(e,t)||zpe(e,t)||Bpe()}function Bpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zpe(e,t){if(e){if(typeof e=="string")return nT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nT(e,t)}}function nT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function qpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Upe(e){if(Array.isArray(e))return e}function rT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function sT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(n),!0).forEach(function(s){Vpe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Vpe(e,t,n){return t=Wpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wpe(e){var t=Hpe(e,"string");return bh(t)=="symbol"?t:t+""}function Hpe(e,t){if(bh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(bh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iT=function(t,n,s,i,a){var o=Math.min(Math.abs(s)/2,Math.abs(i)/2),l=i>=0?1:-1,c=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,u;if(o>0&&a instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=a[h]>o?o:a[h];u="M".concat(t,",").concat(n+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(n)),u+="L ".concat(t+s-c*f[1],",").concat(n),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+l*f[1])),u+="L ".concat(t+s,",").concat(n+i-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+s-c*f[2],",").concat(n+i)),u+="L ".concat(t+c*f[3],",").concat(n+i),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+i-l*f[3])),u+="Z"}else if(o>0&&a===+a&&a>0){var v=Math.min(o,a);u="M ".concat(t,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+c*v,",").concat(n,`
            L `).concat(t+s-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s,",").concat(n+l*v,`
            L `).concat(t+s,",").concat(n+i-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s-c*v,",").concat(n+i,`
            L `).concat(t+c*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(n+i-l*v," Z")}else u="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(i," h ").concat(-s," Z");return u},Kpe=function(t,n){if(!t||!n)return!1;var s=t.x,i=t.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(a,a+l),u=Math.max(a,a+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return s>=d&&s<=u&&i>=f&&i<=h}return!1},Gpe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},HS=function(t){var n=sT(sT({},Gpe),t),s=x.useRef(),i=x.useState(-1),a=Lpe(i,2),o=a[0],l=a[1];x.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,d=n.y,u=n.width,f=n.height,h=n.radius,p=n.className,v=n.animationEasing,g=n.animationDuration,y=n.animationBegin,j=n.isAnimationActive,m=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var b=Nt("recharts-rectangle",p);return m?q.createElement(pa,{canBegin:o>0,from:{width:u,height:f,x:c,y:d},to:{width:u,height:f,x:c,y:d},duration:g,animationEasing:v,isActive:m},function(N){var w=N.width,S=N.height,k=N.x,P=N.y;return q.createElement(pa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:j,easing:v},q.createElement("path",hx({},yt(n,!0),{className:b,d:iT(k,P,w,S,h),ref:s})))}):q.createElement("path",hx({},yt(n,!0),{className:b,d:iT(c,d,u,f,h)}))};function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mw.apply(this,arguments)}var KS=function(t){var n=t.cx,s=t.cy,i=t.r,a=t.className,o=Nt("recharts-dot",a);return n===+n&&s===+s&&i===+i?q.createElement("circle",Mw({},yt(t,!1),_g(t),{className:o,cx:n,cy:s,r:i})):null};function jh(e){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jh(e)}var Ype=["x","y","top","left","width","height","className"];function Fw(){return Fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fw.apply(this,arguments)}function aT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Qpe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aT(Object(n),!0).forEach(function(s){Jpe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Jpe(e,t,n){return t=Xpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xpe(e){var t=Zpe(e,"string");return jh(t)=="symbol"?t:t+""}function Zpe(e,t){if(jh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(jh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ege(e,t){if(e==null)return{};var n=tge(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function tge(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var nge=function(t,n,s,i,a,o){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(s)},rge=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,f=u===void 0?0:u,h=t.height,p=h===void 0?0:h,v=t.className,g=ege(t,Ype),y=Qpe({x:s,y:a,top:l,left:d,width:f,height:p},g);return!Te(s)||!Te(a)||!Te(f)||!Te(p)||!Te(l)||!Te(d)?null:q.createElement("path",Fw({},yt(y,!0),{className:Nt("recharts-cross",v),d:nge(s,a,f,p,l,d)}))},sge=n$,ige=sge(Object.getPrototypeOf,Object),age=ige,oge=ya,lge=age,cge=ba,dge="[object Object]",uge=Function.prototype,fge=Object.prototype,q3=uge.toString,hge=fge.hasOwnProperty,mge=q3.call(Object);function pge(e){if(!cge(e)||oge(e)!=dge)return!1;var t=lge(e);if(t===null)return!0;var n=hge.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&q3.call(n)==mge}var gge=pge;const xge=Dt(gge);var vge=ya,yge=ba,bge="[object Boolean]";function jge(e){return e===!0||e===!1||yge(e)&&vge(e)==bge}var wge=jge;const Nge=Dt(wge);function wh(e){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wh(e)}function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mx.apply(this,arguments)}function Sge(e,t){return Pge(e)||Age(e,t)||Cge(e,t)||kge()}function kge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cge(e,t){if(e){if(typeof e=="string")return oT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oT(e,t)}}function oT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Age(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Pge(e){if(Array.isArray(e))return e}function lT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function cT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lT(Object(n),!0).forEach(function(s){Ege(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ege(e,t,n){return t=Tge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tge(e){var t=Oge(e,"string");return wh(t)=="symbol"?t:t+""}function Oge(e,t){if(wh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(wh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dT=function(t,n,s,i,a){var o=s-i,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+s,",").concat(n),l+="L ".concat(t+s-o/2,",").concat(n+a),l+="L ".concat(t+s-o/2-i,",").concat(n+a),l+="L ".concat(t,",").concat(n," Z"),l},_ge={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ige=function(t){var n=cT(cT({},_ge),t),s=x.useRef(),i=x.useState(-1),a=Sge(i,2),o=a[0],l=a[1];x.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var b=s.current.getTotalLength();b&&l(b)}catch{}},[]);var c=n.x,d=n.y,u=n.upperWidth,f=n.lowerWidth,h=n.height,p=n.className,v=n.animationEasing,g=n.animationDuration,y=n.animationBegin,j=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var m=Nt("recharts-trapezoid",p);return j?q.createElement(pa,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:u,lowerWidth:f,height:h,x:c,y:d},duration:g,animationEasing:v,isActive:j},function(b){var N=b.upperWidth,w=b.lowerWidth,S=b.height,k=b.x,P=b.y;return q.createElement(pa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:v},q.createElement("path",mx({},yt(n,!0),{className:m,d:dT(k,P,N,w,S),ref:s})))}):q.createElement("g",null,q.createElement("path",mx({},yt(n,!0),{className:m,d:dT(c,d,u,f,h)})))},Rge=["option","shapeType","propTransformer","activeClassName","isActive"];function Nh(e){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nh(e)}function Mge(e,t){if(e==null)return{};var n=Fge(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Fge(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function px(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(n),!0).forEach(function(s){$ge(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $ge(e,t,n){return t=Dge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dge(e){var t=Lge(e,"string");return Nh(t)=="symbol"?t:t+""}function Lge(e,t){if(Nh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Nh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bge(e,t){return px(px({},t),e)}function zge(e,t){return e==="symbols"}function fT(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return q.createElement(HS,n);case"trapezoid":return q.createElement(Ige,n);case"sector":return q.createElement(O3,n);case"symbols":if(zge(t))return q.createElement(dS,n);break;default:return null}}function qge(e){return x.isValidElement(e)?e.props:e}function Uge(e){var t=e.option,n=e.shapeType,s=e.propTransformer,i=s===void 0?Bge:s,a=e.activeClassName,o=a===void 0?"recharts-active-shape":a,l=e.isActive,c=Mge(e,Rge),d;if(x.isValidElement(t))d=x.cloneElement(t,px(px({},c),qge(t)));else if(ft(t))d=t(c);else if(xge(t)&&!Nge(t)){var u=i(t,c);d=q.createElement(fT,{shapeType:n,elementProps:u})}else{var f=c;d=q.createElement(fT,{shapeType:n,elementProps:f})}return l?q.createElement(bn,{className:o},d):d}function uy(e,t){return t!=null&&"trapezoids"in e.props}function fy(e,t){return t!=null&&"sectors"in e.props}function Sh(e,t){return t!=null&&"points"in e.props}function Vge(e,t){var n,s,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return i&&a}function Wge(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function Hge(e,t){var n=e.x===t.x,s=e.y===t.y,i=e.z===t.z;return n&&s&&i}function Kge(e,t){var n;return uy(e,t)?n=Vge:fy(e,t)?n=Wge:Sh(e,t)&&(n=Hge),n}function Gge(e,t){var n;return uy(e,t)?n="trapezoids":fy(e,t)?n="sectors":Sh(e,t)&&(n="points"),n}function Yge(e,t){if(uy(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(fy(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Sh(e,t)?t.payload:{}}function Qge(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,i=Gge(n,t),a=Yge(n,t),o=s.filter(function(c,d){var u=ly(a,c),f=n.props[i].filter(function(v){var g=Kge(n,t);return g(v,t)}),h=n.props[i].indexOf(f[f.length-1]),p=d===h;return u&&p}),l=s.indexOf(o[o.length-1]);return l}var Jge=Math.ceil,Xge=Math.max;function Zge(e,t,n,s){for(var i=-1,a=Xge(Jge((t-e)/(n||1)),0),o=Array(a);a--;)o[s?a:++i]=e,e+=n;return o}var exe=Zge,txe=j$,hT=1/0,nxe=17976931348623157e292;function rxe(e){if(!e)return e===0?e:0;if(e=txe(e),e===hT||e===-hT){var t=e<0?-1:1;return t*nxe}return e===e?e:0}var U3=rxe,sxe=exe,ixe=Zv,qb=U3;function axe(e){return function(t,n,s){return s&&typeof s!="number"&&ixe(t,n,s)&&(n=s=void 0),t=qb(t),n===void 0?(n=t,t=0):n=qb(n),s=s===void 0?t<n?1:-1:qb(s),sxe(t,n,s,e)}}var oxe=axe,lxe=oxe,cxe=lxe(),dxe=cxe;const gx=Dt(dxe);function kh(e){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kh(e)}function mT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function pT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mT(Object(n),!0).forEach(function(s){V3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function V3(e,t,n){return t=uxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uxe(e){var t=fxe(e,"string");return kh(t)=="symbol"?t:t+""}function fxe(e,t){if(kh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(kh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hxe=["Webkit","Moz","O","ms"],mxe=function(t,n){var s=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=hxe.reduce(function(a,o){return pT(pT({},a),{},V3({},o+s,n))},{});return i[t]=n,i};function jd(e){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jd(e)}function xx(){return xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xx.apply(this,arguments)}function gT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ub(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gT(Object(n),!0).forEach(function(s){Dr(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function pxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,H3(s.key),s)}}function gxe(e,t,n){return t&&xT(e.prototype,t),n&&xT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xxe(e,t,n){return t=vx(t),vxe(e,W3()?Reflect.construct(t,n||[],vx(e).constructor):t.apply(e,n))}function vxe(e,t){if(t&&(jd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yxe(e)}function yxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W3=function(){return!!e})()}function vx(e){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vx(e)}function bxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$w(e,t)}function $w(e,t){return $w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},$w(e,t)}function Dr(e,t,n){return t=H3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H3(e){var t=jxe(e,"string");return jd(t)=="symbol"?t:t+""}function jxe(e,t){if(jd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(jd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wxe=function(t){var n=t.data,s=t.startIndex,i=t.endIndex,a=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=df().domain(gx(0,c)).range([a,a+o-l]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(i),scale:d,scaleValues:u}},vT=function(t){return t.changedTouches&&!!t.changedTouches.length},wd=function(e){function t(n){var s;return pxe(this,t),s=xxe(this,t,[n]),Dr(s,"handleDrag",function(i){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(i):s.state.isSlideMoving&&s.handleSlideDrag(i)}),Dr(s,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&s.handleDrag(i.changedTouches[0])}),Dr(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=s.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:a,startIndex:l})}),s.detachDragEndListener()}),Dr(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Dr(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Dr(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Dr(s,"handleSlideDragStart",function(i){var a=vT(i)?i.changedTouches[0]:i;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return bxe(t,e),gxe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var i=s.startX,a=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,f=Math.min(i,a),h=Math.max(i,a),p=t.getIndexInRange(o,f),v=t.getIndexInRange(o,h);return{startIndex:p-p%c,endIndex:v===u?u:v-v%c}}},{key:"getTextOfTick",value:function(s){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=Jr(a[s],l,s);return ft(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,u=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,v=c.onChange,g=s.pageX-a;g>0?g=Math.min(g,d+u-f-l,d+u-f-o):g<0&&(g=Math.max(g,d-o,d-l));var y=this.getIndex({startX:o+g,endX:l+g});(y.startIndex!==h||y.endIndex!==p)&&v&&v(y),this.setState({startX:o+g,endX:l+g,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,i){var a=vT(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],u=this.props,f=u.x,h=u.width,p=u.travellerWidth,v=u.onChange,g=u.gap,y=u.data,j={startX:this.state.startX,endX:this.state.endX},m=s.pageX-a;m>0?m=Math.min(m,f+h-p-d):m<0&&(m=Math.max(m,f-d)),j[o]=d+m;var b=this.getIndex(j),N=b.startIndex,w=b.endIndex,S=function(){var P=y.length-1;return o==="startX"&&(l>c?N%g===0:w%g===0)||l<c&&w===P||o==="endX"&&(l>c?w%g===0:N%g===0)||l>c&&w===P};this.setState(Dr(Dr({},o,d+m),"brushMoveStartX",s.pageX),function(){v&&S()&&v(b)})}},{key:"handleTravellerMoveKeyboard",value:function(s,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[i],f=l.indexOf(u);if(f!==-1){var h=f+s;if(!(h===-1||h>=l.length)){var p=l[h];i==="startX"&&p>=d||i==="endX"&&p<=c||this.setState(Dr({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return q.createElement("rect",{stroke:d,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.data,d=s.children,u=s.padding,f=x.Children.only(d);return f?q.cloneElement(f,{x:i,y:a,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,i){var a,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,v=c.data,g=c.startIndex,y=c.endIndex,j=Math.max(s,this.props.x),m=Ub(Ub({},yt(this.props,!1)),{},{x:j,y:d,width:u,height:f}),b=p||"Min value: ".concat((a=v[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=v[y])===null||o===void 0?void 0:o.name);return q.createElement(bn,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,m))}},{key:"renderSlide",value:function(s,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,d=a.travellerWidth,u=Math.min(s,i)+d,f=Math.max(Math.abs(i-s)-d,0);return q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:f,height:l})}},{key:"renderText",value:function(){var s=this.props,i=s.startIndex,a=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,f=u.startX,h=u.endX,p=5,v={pointerEvents:"none",fill:d};return q.createElement(bn,{className:"recharts-brush-texts"},q.createElement(Kg,xx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:o+l/2},v),this.getTextOfTick(i)),q.createElement(Kg,xx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:o+l/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var s=this.props,i=s.data,a=s.className,o=s.children,l=s.x,c=s.y,d=s.width,u=s.height,f=s.alwaysShowText,h=this.state,p=h.startX,v=h.endX,g=h.isTextActive,y=h.isSlideMoving,j=h.isTravellerMoving,m=h.isTravellerFocused;if(!i||!i.length||!Te(l)||!Te(c)||!Te(d)||!Te(u)||d<=0||u<=0)return null;var b=Nt("recharts-brush",a),N=q.Children.count(o)===1,w=mxe("userSelect","none");return q.createElement(bn,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(g||y||j||m||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var i=s.x,a=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(a+l/2)-1;return q.createElement(q.Fragment,null,q.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),q.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),q.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,i){var a;return q.isValidElement(s)?a=q.cloneElement(s,i):ft(s)?a=s(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(s,i){var a=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,f=s.endIndex;if(a!==i.prevData||d!==i.prevUpdateId)return Ub({prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},a&&a.length?wxe({data:a,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(s.startIndex),endX:i.scale(s.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(s,i){for(var a=s.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>i?l=c:o=c}return i>=s[l]?l:o}}])}(x.PureComponent);Dr(wd,"displayName","Brush");Dr(wd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Nxe=xS;function Sxe(e,t){var n;return Nxe(e,function(s,i,a){return n=t(s,i,a),!n}),!!n}var kxe=Sxe,Cxe=GF,Axe=Oo,Pxe=kxe,Exe=Fr,Txe=Zv;function Oxe(e,t,n){var s=Exe(e)?Cxe:Pxe;return n&&Txe(e,t,n)&&(t=void 0),s(e,Axe(t))}var _xe=Oxe;const Ixe=Dt(_xe);var yi=function(t,n){var s=t.alwaysShow,i=t.ifOverflow;return s&&(i="extendDomain"),i===n},yT=g$;function Rxe(e,t,n){t=="__proto__"&&yT?yT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Mxe=Rxe,Fxe=Mxe,$xe=m$,Dxe=Oo;function Lxe(e,t){var n={};return t=Dxe(t),$xe(e,function(s,i,a){Fxe(n,i,t(s,i,a))}),n}var Bxe=Lxe;const zxe=Dt(Bxe);function qxe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var Uxe=qxe,Vxe=xS;function Wxe(e,t){var n=!0;return Vxe(e,function(s,i,a){return n=!!t(s,i,a),n}),n}var Hxe=Wxe,Kxe=Uxe,Gxe=Hxe,Yxe=Oo,Qxe=Fr,Jxe=Zv;function Xxe(e,t,n){var s=Qxe(e)?Kxe:Gxe;return n&&Jxe(e,t,n)&&(t=void 0),s(e,Yxe(t))}var Zxe=Xxe;const K3=Dt(Zxe);var eve=["x","y"];function Ch(e){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(e)}function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Dw.apply(this,arguments)}function bT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function _u(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(n),!0).forEach(function(s){tve(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tve(e,t,n){return t=nve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nve(e){var t=rve(e,"string");return Ch(t)=="symbol"?t:t+""}function rve(e,t){if(Ch(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ch(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sve(e,t){if(e==null)return{};var n=ive(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ive(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function ave(e,t){var n=e.x,s=e.y,i=sve(e,eve),a="".concat(n),o=parseInt(a,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||i.height),u=parseInt(d,10),f="".concat(t.width||i.width),h=parseInt(f,10);return _u(_u(_u(_u(_u({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function jT(e){return q.createElement(Uge,Dw({shapeType:"rectangle",propTransformer:ave,activeClassName:"recharts-active-bar"},e))}var ove=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,i){if(typeof t=="number")return t;var a=typeof s=="number";return a?t(s,i):(a||Cl(),n)}},lve=["value","background"],G3;function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function cve(e,t){if(e==null)return{};var n=dve(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function dve(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yx.apply(this,arguments)}function wT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(n),!0).forEach(function(s){Xa(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Q3(s.key),s)}}function fve(e,t,n){return t&&NT(e.prototype,t),n&&NT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hve(e,t,n){return t=bx(t),mve(e,Y3()?Reflect.construct(t,n||[],bx(e).constructor):t.apply(e,n))}function mve(e,t){if(t&&(Nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pve(e)}function pve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y3=function(){return!!e})()}function bx(e){return bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bx(e)}function gve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lw(e,t)}function Lw(e,t){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Lw(e,t)}function Xa(e,t,n){return t=Q3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q3(e){var t=xve(e,"string");return Nd(t)=="symbol"?t:t+""}function xve(e,t){if(Nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Nd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dl=function(e){function t(){var n;uve(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=hve(this,t,[].concat(i)),Xa(n,"state",{isAnimationFinished:!1}),Xa(n,"id",cm("recharts-bar-")),Xa(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Xa(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return gve(t,e),fve(t,[{key:"renderRectanglesStatically",value:function(s){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,d=a.activeBar,u=yt(this.props,!1);return s&&s.map(function(f,h){var p=h===c,v=p?d:o,g=Sn(Sn(Sn({},u),f),{},{isActive:p,option:v,index:h,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return q.createElement(bn,yx({className:"recharts-bar-rectangle"},Ig(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),q.createElement(jT,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,u=i.animationEasing,f=i.animationId,h=this.state.prevData;return q.createElement(pa,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,g=a.map(function(y,j){var m=h&&h[j];if(m){var b=Ls(m.x,y.x),N=Ls(m.y,y.y),w=Ls(m.width,y.width),S=Ls(m.height,y.height);return Sn(Sn({},y),{},{x:b(v),y:N(v),width:w(v),height:S(v)})}if(o==="horizontal"){var k=Ls(0,y.height),P=k(v);return Sn(Sn({},y),{},{y:y.y+y.height-P,height:P})}var E=Ls(0,y.width),_=E(v);return Sn(Sn({},y),{},{width:_})});return q.createElement(bn,null,s.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var s=this.props,i=s.data,a=s.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!ly(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var s=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=yt(this.props.background,!1);return a.map(function(d,u){d.value;var f=d.background,h=cve(d,lve);if(!f)return null;var p=Sn(Sn(Sn(Sn(Sn({},h),{},{fill:"#eee"},f),c),Ig(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return q.createElement(jT,yx({key:"background-bar-".concat(u),option:s.props.background,isActive:u===l},p))})}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,d=a.layout,u=a.children,f=fs(u,pm);if(!f)return null;var h=d==="vertical"?o[0].height/2:o[0].width/2,p=function(y,j){var m=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:m,errorVal:Jr(y,j)}},v={clipPath:s?"url(#clipPath-".concat(i,")"):null};return q.createElement(bn,v,f.map(function(g){return q.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var s=this.props,i=s.hide,a=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,u=s.top,f=s.width,h=s.height,p=s.isAnimationActive,v=s.background,g=s.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,j=Nt("recharts-bar",o),m=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,N=m||b,w=xt(g)?this.id:g;return q.createElement(bn,{className:j},m||b?q.createElement("defs",null,q.createElement("clipPath",{id:"clipPath-".concat(w)},q.createElement("rect",{x:m?d:d-f/2,y:b?u:u-h/2,width:m?f:f*2,height:b?h:h*2}))):null,q.createElement(bn,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(w,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,w),(!p||y)&&fo.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:i.curData}:s.data!==i.curData?{curData:s.data}:null}}])}(x.PureComponent);G3=Dl;Xa(Dl,"displayName","Bar");Xa(Dl,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ta.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Xa(Dl,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,h=e.offset,p=Kfe(s,n);if(!p)return null;var v=t.layout,g=n.type.defaultProps,y=g!==void 0?Sn(Sn({},g),n.props):n.props,j=y.dataKey,m=y.children,b=y.minPointSize,N=v==="horizontal"?o:a,w=d?N.scale.domain():null,S=the({numericAxis:N}),k=fs(m,bS),P=f.map(function(E,_){var F,A,T,M,O,C;d?F=Gfe(d[u+_],w):(F=Jr(E,j),Array.isArray(F)||(F=[S,F]));var R=ove(b,G3.defaultProps.minPointSize)(F[1],_);if(v==="horizontal"){var I,B=[o.scale(F[0]),o.scale(F[1])],H=B[0],Q=B[1];A=wE({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:E,index:_}),T=(I=Q??H)!==null&&I!==void 0?I:void 0,M=p.size;var D=H-Q;if(O=Number.isNaN(D)?0:D,C={x:A,y:o.y,width:M,height:o.height},Math.abs(R)>0&&Math.abs(O)<Math.abs(R)){var te=Ws(O||R)*(Math.abs(R)-Math.abs(O));T-=te,O+=te}}else{var V=[a.scale(F[0]),a.scale(F[1])],J=V[0],me=V[1];if(A=J,T=wE({axis:o,ticks:c,bandSize:i,offset:p.offset,entry:E,index:_}),M=me-J,O=p.size,C={x:a.x,y:T,width:a.width,height:O},Math.abs(R)>0&&Math.abs(M)<Math.abs(R)){var de=Ws(M||R)*(Math.abs(R)-Math.abs(M));M+=de}}return Sn(Sn(Sn({},E),{},{x:A,y:T,width:M,height:O,value:d?F:F[1],payload:E,background:C},k&&k[_]&&k[_].props),{},{tooltipPayload:[P3(n,E)],tooltipPosition:{x:A+M/2,y:T+O/2}})});return Sn({data:P,layout:v},h)});function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}function vve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ST(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,J3(s.key),s)}}function yve(e,t,n){return t&&ST(e.prototype,t),n&&ST(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(n),!0).forEach(function(s){hy(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hy(e,t,n){return t=J3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J3(e){var t=bve(e,"string");return Ah(t)=="symbol"?t:t+""}function bve(e,t){if(Ah(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ah(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X3=function(t,n,s,i,a){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(n),f={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},h=!!zr(d,Dl);return u.reduce(function(p,v){var g=n[v],y=g.orientation,j=g.domain,m=g.padding,b=m===void 0?{}:m,N=g.mirror,w=g.reversed,S="".concat(y).concat(N?"Mirror":""),k,P,E,_,F;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var A=j[1]-j[0],T=1/0,M=g.categoricalDomain.sort();if(M.forEach(function(V,J){J>0&&(T=Math.min((V||0)-(M[J-1]||0),T))}),Number.isFinite(T)){var O=T/A,C=g.layout==="vertical"?s.height:s.width;if(g.padding==="gap"&&(k=O*C/2),g.padding==="no-gap"){var R=Sl(t.barCategoryGap,O*C),I=O*C/2;k=I-R-(I-R)/C*R}}}i==="xAxis"?P=[s.left+(b.left||0)+(k||0),s.left+s.width-(b.right||0)-(k||0)]:i==="yAxis"?P=c==="horizontal"?[s.top+s.height-(b.bottom||0),s.top+(b.top||0)]:[s.top+(b.top||0)+(k||0),s.top+s.height-(b.bottom||0)-(k||0)]:P=g.range,w&&(P=[P[1],P[0]]);var B=Wfe(g,a,h),H=B.scale,Q=B.realScaleType;H.domain(j).range(P),Hfe(H);var D=ehe(H,Rs(Rs({},g),{},{realScaleType:Q}));i==="xAxis"?(F=y==="top"&&!N||y==="bottom"&&N,E=s.left,_=f[S]-F*g.height):i==="yAxis"&&(F=y==="left"&&!N||y==="right"&&N,E=f[S]-F*g.width,_=s.top);var te=Rs(Rs(Rs({},g),D),{},{realScaleType:Q,x:E,y:_,scale:H,width:i==="xAxis"?s.width:g.width,height:i==="yAxis"?s.height:g.height});return te.bandSize=ox(te,D),!g.hide&&i==="xAxis"?f[S]+=(F?-1:1)*te.height:g.hide||(f[S]+=(F?-1:1)*te.width),Rs(Rs({},p),{},hy({},v,te))},{})},Z3=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return{x:Math.min(s,a),y:Math.min(i,o),width:Math.abs(a-s),height:Math.abs(o-i)}},jve=function(t){var n=t.x1,s=t.y1,i=t.x2,a=t.y2;return Z3({x:n,y:s},{x:i,y:a})},eD=function(){function e(t){vve(this,e),this.scale=t}return yve(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),i=s[0],a=s[s.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();hy(eD,"EPS",1e-4);var GS=function(t){var n=Object.keys(t).reduce(function(s,i){return Rs(Rs({},s),{},hy({},i,eD.create(t[i])))},{});return Rs(Rs({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return zxe(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return K3(i,function(a,o){return n[o].isInRange(a)})}})};function wve(e){return(e%180+180)%180}var Nve=function(t){var n=t.width,s=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=wve(i),o=a*Math.PI/180,l=Math.atan(s/n),c=o>l&&o<Math.PI-l?s/Math.sin(o):n/Math.cos(o);return Math.abs(c)},Sve=Oo,kve=dm,Cve=Jv;function Ave(e){return function(t,n,s){var i=Object(t);if(!kve(t)){var a=Sve(n);t=Cve(t),n=function(l){return a(i[l],l,i)}}var o=e(t,n,s);return o>-1?i[a?t[o]:o]:void 0}}var Pve=Ave,Eve=U3;function Tve(e){var t=Eve(e),n=t%1;return t===t?n?t-n:t:0}var Ove=Tve,_ve=l$,Ive=Oo,Rve=Ove,Mve=Math.max;function Fve(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var i=n==null?0:Rve(n);return i<0&&(i=Mve(s+i,0)),_ve(e,Ive(t),i)}var $ve=Fve,Dve=Pve,Lve=$ve,Bve=Dve(Lve),zve=Bve;const qve=Dt(zve);var Uve=TQ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),YS=x.createContext(void 0),QS=x.createContext(void 0),tD=x.createContext(void 0),nD=x.createContext({}),rD=x.createContext(void 0),sD=x.createContext(0),iD=x.createContext(0),CT=function(t){var n=t.state,s=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=Uve(a);return q.createElement(YS.Provider,{value:s},q.createElement(QS.Provider,{value:i},q.createElement(nD.Provider,{value:a},q.createElement(tD.Provider,{value:u},q.createElement(rD.Provider,{value:o},q.createElement(sD.Provider,{value:d},q.createElement(iD.Provider,{value:c},l)))))))},Vve=function(){return x.useContext(rD)},aD=function(t){var n=x.useContext(YS);n==null&&Cl();var s=n[t];return s==null&&Cl(),s},Wve=function(){var t=x.useContext(YS);return La(t)},Hve=function(){var t=x.useContext(QS),n=qve(t,function(s){return K3(s.domain,Number.isFinite)});return n||La(t)},oD=function(t){var n=x.useContext(QS);n==null&&Cl();var s=n[t];return s==null&&Cl(),s},Kve=function(){var t=x.useContext(tD);return t},Gve=function(){return x.useContext(nD)},JS=function(){return x.useContext(iD)},XS=function(){return x.useContext(sD)};function Sd(e){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sd(e)}function Yve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qve(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,cD(s.key),s)}}function Jve(e,t,n){return t&&Qve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xve(e,t,n){return t=jx(t),Zve(e,lD()?Reflect.construct(t,n||[],jx(e).constructor):t.apply(e,n))}function Zve(e,t){if(t&&(Sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eye(e)}function eye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lD=function(){return!!e})()}function jx(e){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jx(e)}function tye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bw(e,t)}function Bw(e,t){return Bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Bw(e,t)}function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function PT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(n),!0).forEach(function(s){ZS(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ZS(e,t,n){return t=cD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cD(e){var t=nye(e,"string");return Sd(t)=="symbol"?t:t+""}function nye(e,t){if(Sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Sd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rye(e,t){return oye(e)||aye(e,t)||iye(e,t)||sye()}function sye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iye(e,t){if(e){if(typeof e=="string")return ET(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ET(e,t)}}function ET(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function aye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function oye(e){if(Array.isArray(e))return e}function zw(){return zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zw.apply(this,arguments)}var lye=function(t,n){var s;return q.isValidElement(t)?s=q.cloneElement(t,n):ft(t)?s=t(n):s=q.createElement("line",zw({},n,{className:"recharts-reference-line-line"})),s},cye=function(t,n,s,i,a,o,l,c,d){var u=a.x,f=a.y,h=a.width,p=a.height;if(s){var v=d.y,g=t.y.apply(v,{position:o});if(yi(d,"discard")&&!t.y.isInRange(g))return null;var y=[{x:u+h,y:g},{x:u,y:g}];return c==="left"?y.reverse():y}if(n){var j=d.x,m=t.x.apply(j,{position:o});if(yi(d,"discard")&&!t.x.isInRange(m))return null;var b=[{x:m,y:f+p},{x:m,y:f}];return l==="top"?b.reverse():b}if(i){var N=d.segment,w=N.map(function(S){return t.apply(S,{position:o})});return yi(d,"discard")&&Ixe(w,function(S){return!t.isInRange(S)})?null:w}return null};function dye(e){var t=e.x,n=e.y,s=e.segment,i=e.xAxisId,a=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=Vve(),u=aD(i),f=oD(a),h=Kve();if(!d||!h)return null;ea(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=GS({x:u.scale,y:f.scale}),v=Rn(t),g=Rn(n),y=s&&s.length===2,j=cye(p,v,g,y,h,e.position,u.orientation,f.orientation,e);if(!j)return null;var m=rye(j,2),b=m[0],N=b.x,w=b.y,S=m[1],k=S.x,P=S.y,E=yi(e,"hidden")?"url(#".concat(d,")"):void 0,_=PT(PT({clipPath:E},yt(e,!0)),{},{x1:N,y1:w,x2:k,y2:P});return q.createElement(bn,{className:Nt("recharts-reference-line",l)},lye(o,_),ir.renderCallByParent(e,jve({x1:N,y1:w,x2:k,y2:P})))}var e2=function(e){function t(){return Yve(this,t),Xve(this,t,arguments)}return tye(t,e),Jve(t,[{key:"render",value:function(){return q.createElement(dye,this.props)}}])}(q.Component);ZS(e2,"displayName","ReferenceLine");ZS(e2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qw.apply(this,arguments)}function kd(e){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kd(e)}function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function OT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(n),!0).forEach(function(s){my(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fye(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uD(s.key),s)}}function hye(e,t,n){return t&&fye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mye(e,t,n){return t=wx(t),pye(e,dD()?Reflect.construct(t,n||[],wx(e).constructor):t.apply(e,n))}function pye(e,t){if(t&&(kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gye(e)}function gye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dD=function(){return!!e})()}function wx(e){return wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wx(e)}function xye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uw(e,t)}function Uw(e,t){return Uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Uw(e,t)}function my(e,t,n){return t=uD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uD(e){var t=vye(e,"string");return kd(t)=="symbol"?t:t+""}function vye(e,t){if(kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(kd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yye=function(t){var n=t.x,s=t.y,i=t.xAxis,a=t.yAxis,o=GS({x:i.scale,y:a.scale}),l=o.apply({x:n,y:s},{bandAware:!0});return yi(t,"discard")&&!o.isInRange(l)?null:l},py=function(e){function t(){return uye(this,t),mye(this,t,arguments)}return xye(t,e),hye(t,[{key:"render",value:function(){var s=this.props,i=s.x,a=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=Rn(i),u=Rn(a);if(ea(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=yye(this.props);if(!f)return null;var h=f.x,p=f.y,v=this.props,g=v.shape,y=v.className,j=yi(this.props,"hidden")?"url(#".concat(c,")"):void 0,m=OT(OT({clipPath:j},yt(this.props,!0)),{},{cx:h,cy:p});return q.createElement(bn,{className:Nt("recharts-reference-dot",y)},t.renderDot(g,m),ir.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(q.Component);my(py,"displayName","ReferenceDot");my(py,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});my(py,"renderDot",function(e,t){var n;return q.isValidElement(e)?n=q.cloneElement(e,t):ft(e)?n=e(t):n=q.createElement(KS,qw({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Vw(){return Vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Vw.apply(this,arguments)}function Cd(e){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(e)}function _T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function IT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(n),!0).forEach(function(s){gy(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_T(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function bye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jye(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,hD(s.key),s)}}function wye(e,t,n){return t&&jye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nye(e,t,n){return t=Nx(t),Sye(e,fD()?Reflect.construct(t,n||[],Nx(e).constructor):t.apply(e,n))}function Sye(e,t){if(t&&(Cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kye(e)}function kye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fD=function(){return!!e})()}function Nx(e){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nx(e)}function Cye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ww(e,t)}function Ww(e,t){return Ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Ww(e,t)}function gy(e,t,n){return t=hD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hD(e){var t=Aye(e,"string");return Cd(t)=="symbol"?t:t+""}function Aye(e,t){if(Cd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Cd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pye=function(t,n,s,i,a){var o=a.x1,l=a.x2,c=a.y1,d=a.y2,u=a.xAxis,f=a.yAxis;if(!u||!f)return null;var h=GS({x:u.scale,y:f.scale}),p={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:s?h.y.apply(c,{position:"start"}):h.y.rangeMin},v={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(d,{position:"end"}):h.y.rangeMax};return yi(a,"discard")&&(!h.isInRange(p)||!h.isInRange(v))?null:Z3(p,v)},xy=function(e){function t(){return bye(this,t),Nye(this,t,arguments)}return Cye(t,e),wye(t,[{key:"render",value:function(){var s=this.props,i=s.x1,a=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;ea(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Rn(i),h=Rn(a),p=Rn(o),v=Rn(l),g=this.props.shape;if(!f&&!h&&!p&&!v&&!g)return null;var y=Pye(f,h,p,v,this.props);if(!y&&!g)return null;var j=yi(this.props,"hidden")?"url(#".concat(u,")"):void 0;return q.createElement(bn,{className:Nt("recharts-reference-area",c)},t.renderRect(g,IT(IT({clipPath:j},yt(this.props,!0)),y)),ir.renderCallByParent(this.props,y))}}])}(q.Component);gy(xy,"displayName","ReferenceArea");gy(xy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});gy(xy,"renderRect",function(e,t){var n;return q.isValidElement(e)?n=q.cloneElement(e,t):ft(e)?n=e(t):n=q.createElement(HS,Vw({},t,{className:"recharts-reference-area-rect"})),n});function mD(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],i=0;i<e.length;i+=t)s.push(e[i]);return s}function Eye(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return Nve(s,n)}function Tye(e,t,n){var s=n==="width",i=e.x,a=e.y,o=e.width,l=e.height;return t===1?{start:s?i:a,end:s?i+o:a+l}:{start:s?i+o:a+l,end:s?i:a}}function Sx(e,t,n,s,i){if(e*t<e*s||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-s)>=0&&e*(t+e*a/2-i)<=0}function Oye(e,t){return mD(e,t+1)}function _ye(e,t,n,s,i){for(var a=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,f=function(){var v=s==null?void 0:s[c];if(v===void 0)return{v:mD(s,d)};var g=c,y,j=function(){return y===void 0&&(y=n(v,g)),y},m=v.coordinate,b=c===0||Sx(e,m,j,u,l);b||(c=0,u=o,d+=1),b&&(u=m+e*(j()/2+i),c+=d)},h;d<=a.length;)if(h=f(),h)return h.v;return[]}function Ph(e){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ph(e)}function RT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RT(Object(n),!0).forEach(function(s){Iye(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Iye(e,t,n){return t=Rye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rye(e){var t=Mye(e,"string");return Ph(t)=="symbol"?t:t+""}function Mye(e,t){if(Ph(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ph(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fye(e,t,n,s,i){for(var a=(s||[]).slice(),o=a.length,l=t.start,c=t.end,d=function(h){var p=a[h],v,g=function(){return v===void 0&&(v=n(p,h)),v};if(h===o-1){var y=e*(p.coordinate+e*g()/2-c);a[h]=p=rr(rr({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else a[h]=p=rr(rr({},p),{},{tickCoord:p.coordinate});var j=Sx(e,p.tickCoord,g,l,c);j&&(c=p.tickCoord-e*(g()/2+i),a[h]=rr(rr({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return a}function $ye(e,t,n,s,i,a){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(a){var u=s[l-1],f=n(u,l-1),h=e*(u.coordinate+e*f/2-d);o[l-1]=u=rr(rr({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate});var p=Sx(e,u.tickCoord,function(){return f},c,d);p&&(d=u.tickCoord-e*(f/2+i),o[l-1]=rr(rr({},u),{},{isShow:!0}))}for(var v=a?l-1:l,g=function(m){var b=o[m],N,w=function(){return N===void 0&&(N=n(b,m)),N};if(m===0){var S=e*(b.coordinate-e*w()/2-c);o[m]=b=rr(rr({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else o[m]=b=rr(rr({},b),{},{tickCoord:b.coordinate});var k=Sx(e,b.tickCoord,w,c,d);k&&(c=b.tickCoord+e*(w()/2+i),o[m]=rr(rr({},b),{},{isShow:!0}))},y=0;y<v;y++)g(y);return o}function t2(e,t,n){var s=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,f=e.angle;if(!i||!i.length||!s)return[];if(Te(c)||ta.isSsr)return Oye(i,typeof c=="number"&&Te(c)?c:0);var h=[],p=l==="top"||l==="bottom"?"width":"height",v=u&&p==="width"?cf(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(b,N){var w=ft(d)?d(b.value,N):b.value;return p==="width"?Eye(cf(w,{fontSize:t,letterSpacing:n}),v,f):cf(w,{fontSize:t,letterSpacing:n})[p]},y=i.length>=2?Ws(i[1].coordinate-i[0].coordinate):1,j=Tye(a,y,p);return c==="equidistantPreserveStart"?_ye(y,j,g,i,o):(c==="preserveStart"||c==="preserveStartEnd"?h=$ye(y,j,g,i,o,c==="preserveStartEnd"):h=Fye(y,j,g,i,o),h.filter(function(m){return m.isShow}))}var Dye=["viewBox"],Lye=["viewBox"],Bye=["ticks"];function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}function gc(){return gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gc.apply(this,arguments)}function MT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(n),!0).forEach(function(s){n2(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Vb(e,t){if(e==null)return{};var n=zye(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function zye(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function qye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,gD(s.key),s)}}function Uye(e,t,n){return t&&FT(e.prototype,t),n&&FT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vye(e,t,n){return t=kx(t),Wye(e,pD()?Reflect.construct(t,n||[],kx(e).constructor):t.apply(e,n))}function Wye(e,t){if(t&&(Ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hye(e)}function Hye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pD=function(){return!!e})()}function kx(e){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kx(e)}function Kye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hw(e,t)}function Hw(e,t){return Hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Hw(e,t)}function n2(e,t,n){return t=gD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gD(e){var t=Gye(e,"string");return Ad(t)=="symbol"?t:t+""}function Gye(e,t){if(Ad(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ad(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ou=function(e){function t(n){var s;return qye(this,t),s=Vye(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return Kye(t,e),Uye(t,[{key:"shouldComponentUpdate",value:function(s,i){var a=s.viewBox,o=Vb(s,Dye),l=this.props,c=l.viewBox,d=Vb(l,Lye);return!Ec(a,c)||!Ec(o,d)||!Ec(i,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var i=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,u=i.tickSize,f=i.mirror,h=i.tickMargin,p,v,g,y,j,m,b=f?-1:1,N=s.tickSize||u,w=Te(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":p=v=s.coordinate,y=o+ +!f*c,g=y-b*N,m=g-b*h,j=w;break;case"left":g=y=s.coordinate,v=a+ +!f*l,p=v-b*N,j=p-b*h,m=w;break;case"right":g=y=s.coordinate,v=a+ +f*l,p=v+b*N,j=p+b*h,m=w;break;default:p=v=s.coordinate,y=o+ +f*c,g=y+b*N,m=g+b*h,j=w;break}return{line:{x1:p,y1:g,x2:v,y2:y},tick:{x:j,y:m}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,f=ur(ur(ur({},yt(this.props,!1)),yt(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);f=ur(ur({},f),{},{x1:i,y1:a+h*l,x2:i+o,y2:a+h*l})}else{var p=+(c==="left"&&!d||c==="right"&&d);f=ur(ur({},f),{},{x1:i+p*o,y1:a,x2:i+p*o,y2:a+l})}return q.createElement("line",gc({},f,{className:Nt("recharts-cartesian-axis-line",us(u,"className"))}))}},{key:"renderTicks",value:function(s,i,a){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,f=l.tickFormatter,h=l.unit,p=t2(ur(ur({},this.props),{},{ticks:s}),i,a),v=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=yt(this.props,!1),j=yt(u,!1),m=ur(ur({},y),{},{fill:"none"},yt(c,!1)),b=p.map(function(N,w){var S=o.getTickLineCoord(N),k=S.line,P=S.tick,E=ur(ur(ur(ur({textAnchor:v,verticalAnchor:g},y),{},{stroke:"none",fill:d},j),P),{},{index:w,payload:N,visibleTicksCount:p.length,tickFormatter:f});return q.createElement(bn,gc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Ig(o.props,N,w)),c&&q.createElement("line",gc({},m,k,{className:Nt("recharts-cartesian-axis-tick-line",us(c,"className"))})),u&&t.renderTickItem(u,E,"".concat(ft(f)?f(N.value,w):N.value).concat(h||"")))});return q.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var s=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,u=i.hide;if(u)return null;var f=this.props,h=f.ticks,p=Vb(f,Bye),v=h;return ft(c)&&(v=h&&h.length>0?c(this.props):c(p)),o<=0||l<=0||!v||!v.length?null:q.createElement(bn,{className:Nt("recharts-cartesian-axis",d),ref:function(y){s.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),ir.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,i,a){var o;return q.isValidElement(s)?o=q.cloneElement(s,i):ft(s)?o=s(i):o=q.createElement(Kg,gc({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(x.Component);n2(ou,"displayName","CartesianAxis");n2(ou,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Yye=["x1","y1","x2","y2","key"],Qye=["offset"];function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}function $T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$T(Object(n),!0).forEach(function(s){Jye(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$T(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Jye(e,t,n){return t=Xye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xye(e){var t=Zye(e,"string");return Al(t)=="symbol"?t:t+""}function Zye(e,t){if(Al(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Al(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xo.apply(this,arguments)}function DT(e,t){if(e==null)return{};var n=ebe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ebe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var tbe=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,i=t.x,a=t.y,o=t.width,l=t.height,c=t.ry;return q.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function xD(e,t){var n;if(q.isValidElement(e))n=q.cloneElement(e,t);else if(ft(e))n=e(t);else{var s=t.x1,i=t.y1,a=t.x2,o=t.y2,l=t.key,c=DT(t,Yye),d=yt(c,!1);d.offset;var u=DT(d,Qye);n=q.createElement("line",Xo({},u,{x1:s,y1:i,x2:a,y2:o,fill:"none",key:l}))}return n}function nbe(e){var t=e.x,n=e.width,s=e.horizontal,i=s===void 0?!0:s,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=ar(ar({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return xD(i,d)});return q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function rbe(e){var t=e.y,n=e.height,s=e.vertical,i=s===void 0?!0:s,a=e.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=ar(ar({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return xD(i,d)});return q.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function sbe(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,i=e.y,a=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var v=!u[p+1],g=v?i+o-h:u[p+1]-h;if(g<=0)return null;var y=p%t.length;return q.createElement("rect",{key:"react-".concat(p),y:h,x:s,height:g,width:a,stroke:"none",fill:t[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function ibe(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,i=e.fillOpacity,a=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var u=d.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var v=!u[p+1],g=v?a+l-h:u[p+1]-h;if(g<=0)return null;var y=p%s.length;return q.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:g,height:c,stroke:"none",fill:s[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var abe=function(t,n){var s=t.xAxis,i=t.width,a=t.height,o=t.offset;return C3(t2(ar(ar(ar({},ou.defaultProps),s),{},{ticks:Wi(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},obe=function(t,n){var s=t.yAxis,i=t.width,a=t.height,o=t.offset;return C3(t2(ar(ar(ar({},ou.defaultProps),s),{},{ticks:Wi(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},Ql={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Kw(e){var t,n,s,i,a,o,l=JS(),c=XS(),d=Gve(),u=ar(ar({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ql.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Ql.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:Ql.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Ql.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Ql.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Ql.verticalFill,x:Te(e.x)?e.x:d.left,y:Te(e.y)?e.y:d.top,width:Te(e.width)?e.width:d.width,height:Te(e.height)?e.height:d.height}),f=u.x,h=u.y,p=u.width,v=u.height,g=u.syncWithTicks,y=u.horizontalValues,j=u.verticalValues,m=Wve(),b=Hve();if(!Te(p)||p<=0||!Te(v)||v<=0||!Te(f)||f!==+f||!Te(h)||h!==+h)return null;var N=u.verticalCoordinatesGenerator||abe,w=u.horizontalCoordinatesGenerator||obe,S=u.horizontalPoints,k=u.verticalPoints;if((!S||!S.length)&&ft(w)){var P=y&&y.length,E=w({yAxis:b?ar(ar({},b),{},{ticks:P?y:b.ticks}):void 0,width:l,height:c,offset:d},P?!0:g);ea(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Al(E),"]")),Array.isArray(E)&&(S=E)}if((!k||!k.length)&&ft(N)){var _=j&&j.length,F=N({xAxis:m?ar(ar({},m),{},{ticks:_?j:m.ticks}):void 0,width:l,height:c,offset:d},_?!0:g);ea(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Al(F),"]")),Array.isArray(F)&&(k=F)}return q.createElement("g",{className:"recharts-cartesian-grid"},q.createElement(tbe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),q.createElement(nbe,Xo({},u,{offset:d,horizontalPoints:S,xAxis:m,yAxis:b})),q.createElement(rbe,Xo({},u,{offset:d,verticalPoints:k,xAxis:m,yAxis:b})),q.createElement(sbe,Xo({},u,{horizontalPoints:S})),q.createElement(ibe,Xo({},u,{verticalPoints:k})))}Kw.displayName="CartesianGrid";var lbe=["type","layout","connectNulls","ref"],cbe=["key"];function Pd(e){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(e)}function LT(e,t){if(e==null)return{};var n=dbe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function dbe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function hf(){return hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hf.apply(this,arguments)}function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(n),!0).forEach(function(s){Ms(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Jl(e){return mbe(e)||hbe(e)||fbe(e)||ube()}function ube(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fbe(e,t){if(e){if(typeof e=="string")return Gw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gw(e,t)}}function hbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mbe(e){if(Array.isArray(e))return Gw(e)}function Gw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function pbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,yD(s.key),s)}}function gbe(e,t,n){return t&&zT(e.prototype,t),n&&zT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xbe(e,t,n){return t=Cx(t),vbe(e,vD()?Reflect.construct(t,n||[],Cx(e).constructor):t.apply(e,n))}function vbe(e,t){if(t&&(Pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ybe(e)}function ybe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vD=function(){return!!e})()}function Cx(e){return Cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cx(e)}function bbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yw(e,t)}function Yw(e,t){return Yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Yw(e,t)}function Ms(e,t,n){return t=yD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yD(e){var t=jbe(e,"string");return Pd(t)=="symbol"?t:t+""}function jbe(e,t){if(Pd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Pd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gm=function(e){function t(){var n;pbe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=xbe(this,t,[].concat(i)),Ms(n,"state",{isAnimationFinished:!0,totalLength:0}),Ms(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Ms(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(j,m){return j+m});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),f=o%d,h=l-o,p=[],v=0,g=0;v<c.length;g+=c[v],++v)if(g+c[v]>f){p=[].concat(Jl(c.slice(0,v)),[f-g]);break}var y=p.length%2===0?[0,h]:[h];return[].concat(Jl(t.repeat(c,u)),Jl(p),y).map(function(j){return"".concat(j,"px")}).join(", ")}),Ms(n,"id",cm("recharts-line-")),Ms(n,"pathRef",function(o){n.mainCurve=o}),Ms(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ms(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return bbe(t,e),gbe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,d=a.layout,u=a.children,f=fs(u,pm);if(!f)return null;var h=function(g,y){return{x:g.x,y:g.y,value:g.value,errorVal:Jr(g.payload,y)}},p={clipPath:s?"url(#clipPath-".concat(i,")"):null};return q.createElement(bn,p,f.map(function(v){return q.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,f=yt(this.props,!1),h=yt(c,!0),p=d.map(function(g,y){var j=$r($r($r({key:"dot-".concat(y),r:3},f),h),{},{index:y,cx:g.x,cy:g.y,value:g.value,dataKey:u,payload:g.payload,points:d});return t.renderDotItem(c,j)}),v={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return q.createElement(bn,hf({className:"recharts-line-dots",key:"dots"},v),p)}},{key:"renderCurveStatically",value:function(s,i,a,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var f=LT(l,lbe),h=$r($r($r({},yt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:u});return q.createElement(kw,hf({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,f=o.animationDuration,h=o.animationEasing,p=o.animationId,v=o.animateNewValues,g=o.width,y=o.height,j=this.state,m=j.prevPoints,b=j.totalLength;return q.createElement(pa,{begin:u,duration:f,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var w=N.t;if(m){var S=m.length/l.length,k=l.map(function(A,T){var M=Math.floor(T*S);if(m[M]){var O=m[M],C=Ls(O.x,A.x),R=Ls(O.y,A.y);return $r($r({},A),{},{x:C(w),y:R(w)})}if(v){var I=Ls(g*2,A.x),B=Ls(y/2,A.y);return $r($r({},A),{},{x:I(w),y:B(w)})}return $r($r({},A),{},{x:A.x,y:A.y})});return a.renderCurveStatically(k,s,i)}var P=Ls(0,b),E=P(w),_;if(c){var F="".concat(c).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});_=a.getStrokeDasharray(E,b,F)}else _=a.generateSimpleStrokeDasharray(b,E);return a.renderCurveStatically(l,s,i,{strokeDasharray:_})})}},{key:"renderCurve",value:function(s,i){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!ly(d,o))?this.renderCurveWithAnimation(s,i):this.renderCurveStatically(o,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,u=i.yAxis,f=i.top,h=i.left,p=i.width,v=i.height,g=i.isAnimationActive,y=i.id;if(a||!l||!l.length)return null;var j=this.state.isAnimationFinished,m=l.length===1,b=Nt("recharts-line",c),N=d&&d.allowDataOverflow,w=u&&u.allowDataOverflow,S=N||w,k=xt(y)?this.id:y,P=(s=yt(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},E=P.r,_=E===void 0?3:E,F=P.strokeWidth,A=F===void 0?2:F,T=FJ(o)?o:{},M=T.clipDot,O=M===void 0?!0:M,C=_*2+A;return q.createElement(bn,{className:b},N||w?q.createElement("defs",null,q.createElement("clipPath",{id:"clipPath-".concat(k)},q.createElement("rect",{x:N?h:h-p/2,y:w?f:f-v/2,width:N?p:p*2,height:w?v:v*2})),!O&&q.createElement("clipPath",{id:"clipPath-dots-".concat(k)},q.createElement("rect",{x:h-C/2,y:f-C/2,width:p+C,height:v+C}))):null,!m&&this.renderCurve(S,k),this.renderErrorBar(S,k),(m||o)&&this.renderDots(S,O,k),(!g||j)&&fo.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:i.curPoints}:s.points!==i.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,i){for(var a=s.length%2!==0?[].concat(Jl(s),[0]):s,o=[],l=0;l<i;++l)o=[].concat(Jl(o),Jl(a));return o}},{key:"renderDotItem",value:function(s,i){var a;if(q.isValidElement(s))a=q.cloneElement(s,i);else if(ft(s))a=s(i);else{var o=i.key,l=LT(i,cbe),c=Nt("recharts-line-dot",typeof s!="boolean"?s.className:"");a=q.createElement(KS,hf({key:o},l,{className:c}))}return a}}])}(x.PureComponent);Ms(gm,"displayName","Line");Ms(gm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ta.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ms(gm,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,f=c.map(function(h,p){var v=Jr(h,o);return u==="horizontal"?{x:jE({axis:n,ticks:i,bandSize:l,entry:h,index:p}),y:xt(v)?null:s.scale(v),value:v,payload:h}:{x:xt(v)?null:n.scale(v),y:jE({axis:s,ticks:a,bandSize:l,entry:h,index:p}),value:v,payload:h}});return $r({points:f,layout:u},d)});function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function wbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nbe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,wD(s.key),s)}}function Sbe(e,t,n){return t&&Nbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kbe(e,t,n){return t=Ax(t),Cbe(e,bD()?Reflect.construct(t,n||[],Ax(e).constructor):t.apply(e,n))}function Cbe(e,t){if(t&&(Ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Abe(e)}function Abe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bD=function(){return!!e})()}function Ax(e){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ax(e)}function Pbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qw(e,t)}function Qw(e,t){return Qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Qw(e,t)}function jD(e,t,n){return t=wD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wD(e){var t=Ebe(e,"string");return Ed(t)=="symbol"?t:t+""}function Ebe(e,t){if(Ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ed(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jw(){return Jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Jw.apply(this,arguments)}function Tbe(e){var t=e.xAxisId,n=JS(),s=XS(),i=aD(t);return i==null?null:q.createElement(ou,Jw({},i,{className:Nt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(o){return Wi(o,!0)}}))}var Td=function(e){function t(){return wbe(this,t),kbe(this,t,arguments)}return Pbe(t,e),Sbe(t,[{key:"render",value:function(){return q.createElement(Tbe,this.props)}}])}(q.Component);jD(Td,"displayName","XAxis");jD(Td,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Od(e){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}function Obe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _be(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,kD(s.key),s)}}function Ibe(e,t,n){return t&&_be(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rbe(e,t,n){return t=Px(t),Mbe(e,ND()?Reflect.construct(t,n||[],Px(e).constructor):t.apply(e,n))}function Mbe(e,t){if(t&&(Od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fbe(e)}function Fbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ND(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ND=function(){return!!e})()}function Px(e){return Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Px(e)}function $be(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xw(e,t)}function Xw(e,t){return Xw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},Xw(e,t)}function SD(e,t,n){return t=kD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kD(e){var t=Dbe(e,"string");return Od(t)=="symbol"?t:t+""}function Dbe(e,t){if(Od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Od(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zw.apply(this,arguments)}var Lbe=function(t){var n=t.yAxisId,s=JS(),i=XS(),a=oD(n);return a==null?null:q.createElement(ou,Zw({},a,{className:Nt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:s,height:i},ticksGenerator:function(l){return Wi(l,!0)}}))},_d=function(e){function t(){return Obe(this,t),Rbe(this,t,arguments)}return $be(t,e),Ibe(t,[{key:"render",value:function(){return q.createElement(Lbe,this.props)}}])}(q.Component);SD(_d,"displayName","YAxis");SD(_d,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function qT(e){return Ube(e)||qbe(e)||zbe(e)||Bbe()}function Bbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zbe(e,t){if(e){if(typeof e=="string")return e1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e1(e,t)}}function qbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ube(e){if(Array.isArray(e))return e1(e)}function e1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var t1=function(t,n,s,i,a){var o=fs(t,e2),l=fs(t,py),c=[].concat(qT(o),qT(l)),d=fs(t,xy),u="".concat(i,"Id"),f=i[0],h=n;if(c.length&&(h=c.reduce(function(g,y){if(y.props[u]===s&&yi(y.props,"extendDomain")&&Te(y.props[f])){var j=y.props[f];return[Math.min(g[0],j),Math.max(g[1],j)]}return g},h)),d.length){var p="".concat(f,"1"),v="".concat(f,"2");h=d.reduce(function(g,y){if(y.props[u]===s&&yi(y.props,"extendDomain")&&Te(y.props[p])&&Te(y.props[v])){var j=y.props[p],m=y.props[v];return[Math.min(g[0],j,m),Math.max(g[1],j,m)]}return g},h)}return a&&a.length&&(h=a.reduce(function(g,y){return Te(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},h)),h},CD={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function i(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function a(c,d,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,f||c,h),v=n?n+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=n?n+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,v=new Array(p);h<p;h++)v[h]=f[h].fn;return v},l.prototype.listenerCount=function(d){var u=n?n+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,h,p,v){var g=n?n+d:d;if(!this._events[g])return!1;var y=this._events[g],j=arguments.length,m,b;if(y.fn){switch(y.once&&this.removeListener(d,y.fn,void 0,!0),j){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,f),!0;case 4:return y.fn.call(y.context,u,f,h),!0;case 5:return y.fn.call(y.context,u,f,h,p),!0;case 6:return y.fn.call(y.context,u,f,h,p,v),!0}for(b=1,m=new Array(j-1);b<j;b++)m[b-1]=arguments[b];y.fn.apply(y.context,m)}else{var N=y.length,w;for(b=0;b<N;b++)switch(y[b].once&&this.removeListener(d,y[b].fn,void 0,!0),j){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,f);break;case 4:y[b].fn.call(y[b].context,u,f,h);break;default:if(!m)for(w=1,m=new Array(j-1);w<j;w++)m[w-1]=arguments[w];y[b].fn.apply(y[b].context,m)}}return!0},l.prototype.on=function(d,u,f){return a(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return a(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,h){var p=n?n+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===u&&(!h||v.once)&&(!f||v.context===f)&&o(this,p);else{for(var g=0,y=[],j=v.length;g<j;g++)(v[g].fn!==u||h&&!v[g].once||f&&v[g].context!==f)&&y.push(v[g]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(CD);var Vbe=CD.exports;const Wbe=Dt(Vbe);var Wb=new Wbe,Hb="recharts.syncMouseEvents";function Eh(e){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eh(e)}function Hbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kbe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,AD(s.key),s)}}function Gbe(e,t,n){return t&&Kbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kb(e,t,n){return t=AD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AD(e){var t=Ybe(e,"string");return Eh(t)=="symbol"?t:t+""}function Ybe(e,t){if(Eh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Eh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Qbe=function(){function e(){Hbe(this,e),Kb(this,"activeIndex",0),Kb(this,"coordinateList",[]),Kb(this,"layout","horizontal")}return Gbe(e,[{key:"setDetails",value:function(n){var s,i=n.coordinateList,a=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,u=n.offset,f=u===void 0?null:u,h=n.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(s=a??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,f=a+c+d,h=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function Jbe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],i=e==null?void 0:e[1];if(s&&i&&Te(s)&&Te(i))return!0}return!1}function Xbe(e,t,n,s){var i=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function PD(e){var t=e.cx,n=e.cy,s=e.radius,i=e.startAngle,a=e.endAngle,o=Yn(t,n,s,i),l=Yn(t,n,s,a);return{points:[o,l],cx:t,cy:n,radius:s,startAngle:i,endAngle:a}}function Zbe(e,t,n){var s,i,a,o;if(e==="horizontal")s=t.x,a=s,i=n.top,o=n.top+n.height;else if(e==="vertical")i=t.y,o=i,s=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,f=t.angle,h=Yn(l,c,d,f),p=Yn(l,c,u,f);s=h.x,i=h.y,a=p.x,o=p.y}else return PD(t);return[{x:s,y:i},{x:a,y:o}]}function Th(e){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Th(e)}function UT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function sp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UT(Object(n),!0).forEach(function(s){e0e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function e0e(e,t,n){return t=t0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t0e(e){var t=n0e(e,"string");return Th(t)=="symbol"?t:t+""}function n0e(e,t){if(Th(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Th(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r0e(e){var t,n,s=e.element,i=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,p=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!p||!a||!o||h!=="ScatterChart"&&i!=="axis")return null;var v,g=kw;if(h==="ScatterChart")v=o,g=rge;else if(h==="BarChart")v=Xbe(f,o,c,u),g=HS;else if(f==="radial"){var y=PD(o),j=y.cx,m=y.cy,b=y.radius,N=y.startAngle,w=y.endAngle;v={cx:j,cy:m,startAngle:N,endAngle:w,innerRadius:b,outerRadius:b},g=O3}else v={points:Zbe(f,o,c)},g=kw;var S=sp(sp(sp(sp({stroke:"#ccc",pointerEvents:"none"},c),v),yt(p,!1)),{},{payload:l,payloadIndex:d,className:Nt("recharts-tooltip-cursor",p.className)});return x.isValidElement(p)?x.cloneElement(p,S):x.createElement(g,S)}var s0e=["item"],i0e=["children","className","width","height","style","compact","title","desc"];function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}function xc(){return xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xc.apply(this,arguments)}function VT(e,t){return l0e(e)||o0e(e,t)||TD(e,t)||a0e()}function a0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function l0e(e){if(Array.isArray(e))return e}function WT(e,t){if(e==null)return{};var n=c0e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function c0e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function d0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u0e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,OD(s.key),s)}}function f0e(e,t,n){return t&&u0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h0e(e,t,n){return t=Ex(t),m0e(e,ED()?Reflect.construct(t,n||[],Ex(e).constructor):t.apply(e,n))}function m0e(e,t){if(t&&(Id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p0e(e)}function p0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ED(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ED=function(){return!!e})()}function Ex(e){return Ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ex(e)}function g0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n1(e,t)}function n1(e,t){return n1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},n1(e,t)}function Rd(e){return y0e(e)||v0e(e)||TD(e)||x0e()}function x0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TD(e,t){if(e){if(typeof e=="string")return r1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r1(e,t)}}function v0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function y0e(e){if(Array.isArray(e))return r1(e)}function r1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function HT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HT(Object(n),!0).forEach(function(s){Qe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Qe(e,t,n){return t=OD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OD(e){var t=b0e(e,"string");return Id(t)=="symbol"?t:t+""}function b0e(e,t){if(Id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Id(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j0e={xAxis:["bottom","top"],yAxis:["left","right"]},w0e={width:"100%",height:"100%"},_D={x:0,y:0};function ip(e){return e}var N0e=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},S0e=function(t,n,s,i){var a=n.find(function(u){return u&&u.index===s});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var o=a.coordinate,l=i.radius;return ue(ue(ue({},i),Yn(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,d=i.angle;return ue(ue(ue({},i),Yn(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return _D},vy=function(t,n){var s=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Rd(l),Rd(d)):l},[]);return o.length>0?o:t&&t.length&&Te(i)&&Te(a)?t.slice(i,a+1):[]};function ID(e){return e==="number"?[0,"auto"]:void 0}var s1=function(t,n,s,i){var a=t.graphicalItems,o=t.tooltipAxis,l=vy(n,t);return s<0||!a||!a.length||s>=l.length?null:a.reduce(function(c,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:n;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;h=Og(p,o.dataKey,i)}else h=f&&f[s]||l[s];return h?[].concat(Rd(c),[P3(d,h)]):c},[])},KT=function(t,n,s,i){var a=i||{x:t.chartX,y:t.chartY},o=N0e(a,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=Lfe(o,l,d,c);if(u>=0&&d){var f=d[u]&&d[u].value,h=s1(t,n,u,f),p=S0e(s,l,u,a);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},k0e=function(t,n){var s=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,f=t.children,h=t.stackOffset,p=k3(u,a);return s.reduce(function(v,g){var y,j=g.type.defaultProps!==void 0?ue(ue({},g.type.defaultProps),g.props):g.props,m=j.type,b=j.dataKey,N=j.allowDataOverflow,w=j.allowDuplicatedCategory,S=j.scale,k=j.ticks,P=j.includeHidden,E=j[o];if(v[E])return v;var _=vy(t.data,{graphicalItems:i.filter(function(D){var te,V=o in D.props?D.props[o]:(te=D.type.defaultProps)===null||te===void 0?void 0:te[o];return V===E}),dataStartIndex:c,dataEndIndex:d}),F=_.length,A,T,M;Jbe(j.domain,N,m)&&(A=bw(j.domain,null,N),p&&(m==="number"||S!=="auto")&&(M=uf(_,b,"category")));var O=ID(m);if(!A||A.length===0){var C,R=(C=j.domain)!==null&&C!==void 0?C:O;if(b){if(A=uf(_,b,m),m==="category"&&p){var I=AJ(A);w&&I?(T=A,A=gx(0,F)):w||(A=kE(R,A,g).reduce(function(D,te){return D.indexOf(te)>=0?D:[].concat(Rd(D),[te])},[]))}else if(m==="category")w?A=A.filter(function(D){return D!==""&&!xt(D)}):A=kE(R,A,g).reduce(function(D,te){return D.indexOf(te)>=0||te===""||xt(te)?D:[].concat(Rd(D),[te])},[]);else if(m==="number"){var B=Vfe(_,i.filter(function(D){var te,V,J=o in D.props?D.props[o]:(te=D.type.defaultProps)===null||te===void 0?void 0:te[o],me="hide"in D.props?D.props.hide:(V=D.type.defaultProps)===null||V===void 0?void 0:V.hide;return J===E&&(P||!me)}),b,a,u);B&&(A=B)}p&&(m==="number"||S!=="auto")&&(M=uf(_,b,"category"))}else p?A=gx(0,F):l&&l[E]&&l[E].hasStack&&m==="number"?A=h==="expand"?[0,1]:A3(l[E].stackGroups,c,d):A=S3(_,i.filter(function(D){var te=o in D.props?D.props[o]:D.type.defaultProps[o],V="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return te===E&&(P||!V)}),m,u,!0);if(m==="number")A=t1(f,A,E,a,k),R&&(A=bw(R,A,N));else if(m==="category"&&R){var H=R,Q=A.every(function(D){return H.indexOf(D)>=0});Q&&(A=H)}}return ue(ue({},v),{},Qe({},E,ue(ue({},j),{},{axisType:a,domain:A,categoricalDomain:M,duplicateDomain:T,originalDomain:(y=j.domain)!==null&&y!==void 0?y:O,isCategorical:p,layout:u})))},{})},C0e=function(t,n){var s=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,f=t.children,h=vy(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),p=h.length,v=k3(u,a),g=-1;return s.reduce(function(y,j){var m=j.type.defaultProps!==void 0?ue(ue({},j.type.defaultProps),j.props):j.props,b=m[o],N=ID("number");if(!y[b]){g++;var w;return v?w=gx(0,p):l&&l[b]&&l[b].hasStack?(w=A3(l[b].stackGroups,c,d),w=t1(f,w,b,a)):(w=bw(N,S3(h,s.filter(function(S){var k,P,E=o in S.props?S.props[o]:(k=S.type.defaultProps)===null||k===void 0?void 0:k[o],_="hide"in S.props?S.props.hide:(P=S.type.defaultProps)===null||P===void 0?void 0:P.hide;return E===b&&!_}),"number",u),i.defaultProps.allowDataOverflow),w=t1(f,w,b,a)),ue(ue({},y),{},Qe({},b,ue(ue({axisType:a},i.defaultProps),{},{hide:!0,orientation:us(j0e,"".concat(a,".").concat(g%2),null),domain:w,originalDomain:N,isCategorical:v,layout:u})))}return y},{})},A0e=function(t,n){var s=n.axisType,i=s===void 0?"xAxis":s,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.children,f="".concat(i,"Id"),h=fs(u,a),p={};return h&&h.length?p=k0e(t,{axes:h,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(p=C0e(t,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),p},P0e=function(t){var n=La(t),s=Wi(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:vS(s,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:ox(n,s)}},GT=function(t){var n=t.children,s=t.defaultShowTooltip,i=zr(n,wd),a=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},E0e=function(t){return!t||!t.length?!1:t.some(function(n){var s=Zi(n&&n.type);return s&&s.indexOf("Bar")>=0})},YT=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},T0e=function(t,n){var s=t.props,i=t.graphicalItems,a=t.xAxisMap,o=a===void 0?{}:a,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,u=s.height,f=s.children,h=s.margin||{},p=zr(f,wd),v=zr(f,Tc),g=Object.keys(c).reduce(function(w,S){var k=c[S],P=k.orientation;return!k.mirror&&!k.hide?ue(ue({},w),{},Qe({},P,w[P]+k.width)):w},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(w,S){var k=o[S],P=k.orientation;return!k.mirror&&!k.hide?ue(ue({},w),{},Qe({},P,us(w,"".concat(P))+k.height)):w},{top:h.top||0,bottom:h.bottom||0}),j=ue(ue({},y),g),m=j.bottom;p&&(j.bottom+=p.props.height||wd.defaultProps.height),v&&n&&(j=qfe(j,i,s,n));var b=d-j.left-j.right,N=u-j.top-j.bottom;return ue(ue({brushBottom:m},j),{},{width:Math.max(b,0),height:Math.max(N,0)})},O0e=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},RD=function(t){var n=t.chartName,s=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,h=function(j,m){var b=m.graphicalItems,N=m.stackGroups,w=m.offset,S=m.updateId,k=m.dataStartIndex,P=m.dataEndIndex,E=j.barSize,_=j.layout,F=j.barGap,A=j.barCategoryGap,T=j.maxBarSize,M=YT(_),O=M.numericAxisName,C=M.cateAxisName,R=E0e(b),I=[];return b.forEach(function(B,H){var Q=vy(j.data,{graphicalItems:[B],dataStartIndex:k,dataEndIndex:P}),D=B.type.defaultProps!==void 0?ue(ue({},B.type.defaultProps),B.props):B.props,te=D.dataKey,V=D.maxBarSize,J=D["".concat(O,"Id")],me=D["".concat(C,"Id")],de={},ve=c.reduce(function(Ot,$){var Y=m["".concat($.axisType,"Map")],ie=D["".concat($.axisType,"Id")];Y&&Y[ie]||$.axisType==="zAxis"||Cl();var be=Y[ie];return ue(ue({},Ot),{},Qe(Qe({},$.axisType,be),"".concat($.axisType,"Ticks"),Wi(be)))},de),ce=ve[C],U=ve["".concat(C,"Ticks")],L=N&&N[J]&&N[J].hasStack&&nhe(B,N[J].stackGroups),z=Zi(B.type).indexOf("Bar")>=0,Ne=ox(ce,U),le=[],Ae=R&&Bfe({barSize:E,stackGroups:N,totalSize:O0e(ve,C)});if(z){var Ke,Fe,ht=xt(V)?T:V,nt=(Ke=(Fe=ox(ce,U,!0))!==null&&Fe!==void 0?Fe:ht)!==null&&Ke!==void 0?Ke:0;le=zfe({barGap:F,barCategoryGap:A,bandSize:nt!==Ne?nt:Ne,sizeList:Ae[me],maxBarSize:ht}),nt!==Ne&&(le=le.map(function(Ot){return ue(ue({},Ot),{},{position:ue(ue({},Ot.position),{},{offset:Ot.position.offset-nt/2})})}))}var pt=B&&B.type&&B.type.getComposedData;pt&&I.push({props:ue(ue({},pt(ue(ue({},ve),{},{displayedData:Q,props:j,dataKey:te,item:B,bandSize:Ne,barPosition:le,offset:w,stackedData:L,layout:_,dataStartIndex:k,dataEndIndex:P}))),{},Qe(Qe(Qe({key:B.key||"item-".concat(H)},O,ve[O]),C,ve[C]),"animationId",S)),childIndex:LJ(B,j.children),item:B})}),I},p=function(j,m){var b=j.props,N=j.dataStartIndex,w=j.dataEndIndex,S=j.updateId;if(!xA({props:b}))return null;var k=b.children,P=b.layout,E=b.stackOffset,_=b.data,F=b.reverseStackOrder,A=YT(P),T=A.numericAxisName,M=A.cateAxisName,O=fs(k,s),C=Zfe(_,O,"".concat(T,"Id"),"".concat(M,"Id"),E,F),R=c.reduce(function(D,te){var V="".concat(te.axisType,"Map");return ue(ue({},D),{},Qe({},V,A0e(b,ue(ue({},te),{},{graphicalItems:O,stackGroups:te.axisType===T&&C,dataStartIndex:N,dataEndIndex:w}))))},{}),I=T0e(ue(ue({},R),{},{props:b,graphicalItems:O}),m==null?void 0:m.legendBBox);Object.keys(R).forEach(function(D){R[D]=u(b,R[D],I,D.replace("Map",""),n)});var B=R["".concat(M,"Map")],H=P0e(B),Q=h(b,ue(ue({},R),{},{dataStartIndex:N,dataEndIndex:w,updateId:S,graphicalItems:O,stackGroups:C,offset:I}));return ue(ue({formattedGraphicalItems:Q,graphicalItems:O,offset:I,stackGroups:C},H),R)},v=function(y){function j(m){var b,N,w;return d0e(this,j),w=h0e(this,j,[m]),Qe(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Qe(w,"accessibilityManager",new Qbe),Qe(w,"handleLegendBBoxUpdate",function(S){if(S){var k=w.state,P=k.dataStartIndex,E=k.dataEndIndex,_=k.updateId;w.setState(ue({legendBBox:S},p({props:w.props,dataStartIndex:P,dataEndIndex:E,updateId:_},ue(ue({},w.state),{},{legendBBox:S}))))}}),Qe(w,"handleReceiveSyncEvent",function(S,k,P){if(w.props.syncId===S){if(P===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(k)}}),Qe(w,"handleBrushChange",function(S){var k=S.startIndex,P=S.endIndex;if(k!==w.state.dataStartIndex||P!==w.state.dataEndIndex){var E=w.state.updateId;w.setState(function(){return ue({dataStartIndex:k,dataEndIndex:P},p({props:w.props,dataStartIndex:k,dataEndIndex:P,updateId:E},w.state))}),w.triggerSyncEvent({dataStartIndex:k,dataEndIndex:P})}}),Qe(w,"handleMouseEnter",function(S){var k=w.getMouseInfo(S);if(k){var P=ue(ue({},k),{},{isTooltipActive:!0});w.setState(P),w.triggerSyncEvent(P);var E=w.props.onMouseEnter;ft(E)&&E(P,S)}}),Qe(w,"triggeredAfterMouseMove",function(S){var k=w.getMouseInfo(S),P=k?ue(ue({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(P),w.triggerSyncEvent(P);var E=w.props.onMouseMove;ft(E)&&E(P,S)}),Qe(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Qe(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Qe(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),Qe(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};w.setState(k),w.triggerSyncEvent(k);var P=w.props.onMouseLeave;ft(P)&&P(k,S)}),Qe(w,"handleOuterEvent",function(S){var k=DJ(S),P=us(w.props,"".concat(k));if(k&&ft(P)){var E,_;/.*touch.*/i.test(k)?_=w.getMouseInfo(S.changedTouches[0]):_=w.getMouseInfo(S),P((E=_)!==null&&E!==void 0?E:{},S)}}),Qe(w,"handleClick",function(S){var k=w.getMouseInfo(S);if(k){var P=ue(ue({},k),{},{isTooltipActive:!0});w.setState(P),w.triggerSyncEvent(P);var E=w.props.onClick;ft(E)&&E(P,S)}}),Qe(w,"handleMouseDown",function(S){var k=w.props.onMouseDown;if(ft(k)){var P=w.getMouseInfo(S);k(P,S)}}),Qe(w,"handleMouseUp",function(S){var k=w.props.onMouseUp;if(ft(k)){var P=w.getMouseInfo(S);k(P,S)}}),Qe(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Qe(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),Qe(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),Qe(w,"handleDoubleClick",function(S){var k=w.props.onDoubleClick;if(ft(k)){var P=w.getMouseInfo(S);k(P,S)}}),Qe(w,"handleContextMenu",function(S){var k=w.props.onContextMenu;if(ft(k)){var P=w.getMouseInfo(S);k(P,S)}}),Qe(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&Wb.emit(Hb,w.props.syncId,S,w.eventEmitterSymbol)}),Qe(w,"applySyncEvent",function(S){var k=w.props,P=k.layout,E=k.syncMethod,_=w.state.updateId,F=S.dataStartIndex,A=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(ue({dataStartIndex:F,dataEndIndex:A},p({props:w.props,dataStartIndex:F,dataEndIndex:A,updateId:_},w.state)));else if(S.activeTooltipIndex!==void 0){var T=S.chartX,M=S.chartY,O=S.activeTooltipIndex,C=w.state,R=C.offset,I=C.tooltipTicks;if(!R)return;if(typeof E=="function")O=E(I,S);else if(E==="value"){O=-1;for(var B=0;B<I.length;B++)if(I[B].value===S.activeLabel){O=B;break}}var H=ue(ue({},R),{},{x:R.left,y:R.top}),Q=Math.min(T,H.x+H.width),D=Math.min(M,H.y+H.height),te=I[O]&&I[O].value,V=s1(w.state,w.props.data,O),J=I[O]?{x:P==="horizontal"?I[O].coordinate:Q,y:P==="horizontal"?D:I[O].coordinate}:_D;w.setState(ue(ue({},S),{},{activeLabel:te,activeCoordinate:J,activePayload:V,activeTooltipIndex:O}))}else w.setState(S)}),Qe(w,"renderCursor",function(S){var k,P=w.state,E=P.isTooltipActive,_=P.activeCoordinate,F=P.activePayload,A=P.offset,T=P.activeTooltipIndex,M=P.tooltipAxisBandSize,O=w.getTooltipEventType(),C=(k=S.props.active)!==null&&k!==void 0?k:E,R=w.props.layout,I=S.key||"_recharts-cursor";return q.createElement(r0e,{key:I,activeCoordinate:_,activePayload:F,activeTooltipIndex:T,chartName:n,element:S,isActive:C,layout:R,offset:A,tooltipAxisBandSize:M,tooltipEventType:O})}),Qe(w,"renderPolarAxis",function(S,k,P){var E=us(S,"type.axisType"),_=us(w.state,"".concat(E,"Map")),F=S.type.defaultProps,A=F!==void 0?ue(ue({},F),S.props):S.props,T=_&&_[A["".concat(E,"Id")]];return x.cloneElement(S,ue(ue({},T),{},{className:Nt(E,T.className),key:S.key||"".concat(k,"-").concat(P),ticks:Wi(T,!0)}))}),Qe(w,"renderPolarGrid",function(S){var k=S.props,P=k.radialLines,E=k.polarAngles,_=k.polarRadius,F=w.state,A=F.radiusAxisMap,T=F.angleAxisMap,M=La(A),O=La(T),C=O.cx,R=O.cy,I=O.innerRadius,B=O.outerRadius;return x.cloneElement(S,{polarAngles:Array.isArray(E)?E:Wi(O,!0).map(function(H){return H.coordinate}),polarRadius:Array.isArray(_)?_:Wi(M,!0).map(function(H){return H.coordinate}),cx:C,cy:R,innerRadius:I,outerRadius:B,key:S.key||"polar-grid",radialLines:P})}),Qe(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,k=w.props,P=k.children,E=k.width,_=k.height,F=w.props.margin||{},A=E-(F.left||0)-(F.right||0),T=w3({children:P,formattedGraphicalItems:S,legendWidth:A,legendContent:d});if(!T)return null;var M=T.item,O=WT(T,s0e);return x.cloneElement(M,ue(ue({},O),{},{chartWidth:E,chartHeight:_,margin:F,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Qe(w,"renderTooltip",function(){var S,k=w.props,P=k.children,E=k.accessibilityLayer,_=zr(P,Is);if(!_)return null;var F=w.state,A=F.isTooltipActive,T=F.activeCoordinate,M=F.activePayload,O=F.activeLabel,C=F.offset,R=(S=_.props.active)!==null&&S!==void 0?S:A;return x.cloneElement(_,{viewBox:ue(ue({},C),{},{x:C.left,y:C.top}),active:R,label:O,payload:R?M:[],coordinate:T,accessibilityLayer:E})}),Qe(w,"renderBrush",function(S){var k=w.props,P=k.margin,E=k.data,_=w.state,F=_.offset,A=_.dataStartIndex,T=_.dataEndIndex,M=_.updateId;return x.cloneElement(S,{key:S.key||"_recharts-brush",onChange:ep(w.handleBrushChange,S.props.onChange),data:E,x:Te(S.props.x)?S.props.x:F.left,y:Te(S.props.y)?S.props.y:F.top+F.height+F.brushBottom-(P.bottom||0),width:Te(S.props.width)?S.props.width:F.width,startIndex:A,endIndex:T,updateId:"brush-".concat(M)})}),Qe(w,"renderReferenceElement",function(S,k,P){if(!S)return null;var E=w,_=E.clipPathId,F=w.state,A=F.xAxisMap,T=F.yAxisMap,M=F.offset,O=S.type.defaultProps||{},C=S.props,R=C.xAxisId,I=R===void 0?O.xAxisId:R,B=C.yAxisId,H=B===void 0?O.yAxisId:B;return x.cloneElement(S,{key:S.key||"".concat(k,"-").concat(P),xAxis:A[I],yAxis:T[H],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:_})}),Qe(w,"renderActivePoints",function(S){var k=S.item,P=S.activePoint,E=S.basePoint,_=S.childIndex,F=S.isRange,A=[],T=k.props.key,M=k.item.type.defaultProps!==void 0?ue(ue({},k.item.type.defaultProps),k.item.props):k.item.props,O=M.activeDot,C=M.dataKey,R=ue(ue({index:_,dataKey:C,cx:P.x,cy:P.y,r:4,fill:WS(k.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},yt(O,!1)),_g(O));return A.push(j.renderActiveDot(O,R,"".concat(T,"-activePoint-").concat(_))),E?A.push(j.renderActiveDot(O,ue(ue({},R),{},{cx:E.x,cy:E.y}),"".concat(T,"-basePoint-").concat(_))):F&&A.push(null),A}),Qe(w,"renderGraphicChild",function(S,k,P){var E=w.filterFormatItem(S,k,P);if(!E)return null;var _=w.getTooltipEventType(),F=w.state,A=F.isTooltipActive,T=F.tooltipAxis,M=F.activeTooltipIndex,O=F.activeLabel,C=w.props.children,R=zr(C,Is),I=E.props,B=I.points,H=I.isRange,Q=I.baseLine,D=E.item.type.defaultProps!==void 0?ue(ue({},E.item.type.defaultProps),E.item.props):E.item.props,te=D.activeDot,V=D.hide,J=D.activeBar,me=D.activeShape,de=!!(!V&&A&&R&&(te||J||me)),ve={};_!=="axis"&&R&&R.props.trigger==="click"?ve={onClick:ep(w.handleItemMouseEnter,S.props.onClick)}:_!=="axis"&&(ve={onMouseLeave:ep(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:ep(w.handleItemMouseEnter,S.props.onMouseEnter)});var ce=x.cloneElement(S,ue(ue({},E.props),ve));function U($){return typeof T.dataKey=="function"?T.dataKey($.payload):null}if(de)if(M>=0){var L,z;if(T.dataKey&&!T.allowDuplicatedCategory){var Ne=typeof T.dataKey=="function"?U:"payload.".concat(T.dataKey.toString());L=Og(B,Ne,O),z=H&&Q&&Og(Q,Ne,O)}else L=B==null?void 0:B[M],z=H&&Q&&Q[M];if(me||J){var le=S.props.activeIndex!==void 0?S.props.activeIndex:M;return[x.cloneElement(S,ue(ue(ue({},E.props),ve),{},{activeIndex:le})),null,null]}if(!xt(L))return[ce].concat(Rd(w.renderActivePoints({item:E,activePoint:L,basePoint:z,childIndex:M,isRange:H})))}else{var Ae,Ke=(Ae=w.getItemByXY(w.state.activeCoordinate))!==null&&Ae!==void 0?Ae:{graphicalItem:ce},Fe=Ke.graphicalItem,ht=Fe.item,nt=ht===void 0?S:ht,pt=Fe.childIndex,Ot=ue(ue(ue({},E.props),ve),{},{activeIndex:pt});return[x.cloneElement(nt,Ot),null,null]}return H?[ce,null,null]:[ce,null]}),Qe(w,"renderCustomized",function(S,k,P){return x.cloneElement(S,ue(ue({key:"recharts-customized-".concat(P)},w.props),w.state))}),Qe(w,"renderMap",{CartesianGrid:{handler:ip,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:ip},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:ip},YAxis:{handler:ip},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((b=m.id)!==null&&b!==void 0?b:cm("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=w$(w.triggeredAfterMouseMove,(N=m.throttleDelay)!==null&&N!==void 0?N:1e3/60),w.state={},w}return g0e(j,y),f0e(j,[{key:"componentDidMount",value:function(){var b,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,N=b.children,w=b.data,S=b.height,k=b.layout,P=zr(N,Is);if(P){var E=P.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var _=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,F=s1(this.state,w,E,_),A=this.state.tooltipTicks[E].coordinate,T=(this.state.offset.top+S)/2,M=k==="horizontal",O=M?{x:A,y:T}:{y:A,x:T},C=this.state.formattedGraphicalItems.find(function(I){var B=I.item;return B.type.name==="Scatter"});C&&(O=ue(ue({},O),C.props.points[E].tooltipPosition),F=C.props.points[E].tooltipPayload);var R={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:_,activePayload:F,activeCoordinate:O};this.setState(R),this.renderCursor(P),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){Mj([zr(b.children,Is)],[zr(this.props.children,Is)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=zr(this.props.children,Is);if(b&&typeof b.props.shared=="boolean"){var N=b.props.shared?"axis":"item";return l.indexOf(N)>=0?N:a}return a}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var N=this.container,w=N.getBoundingClientRect(),S=ule(w),k={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},P=w.width/N.offsetWidth||1,E=this.inRange(k.chartX,k.chartY,P);if(!E)return null;var _=this.state,F=_.xAxisMap,A=_.yAxisMap,T=this.getTooltipEventType(),M=KT(this.state,this.props.data,this.props.layout,E);if(T!=="axis"&&F&&A){var O=La(F).scale,C=La(A).scale,R=O&&O.invert?O.invert(k.chartX):null,I=C&&C.invert?C.invert(k.chartY):null;return ue(ue({},k),{},{xValue:R,yValue:I},M)}return M?ue(ue({},k),M):null}},{key:"inRange",value:function(b,N){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,k=b/w,P=N/w;if(S==="horizontal"||S==="vertical"){var E=this.state.offset,_=k>=E.left&&k<=E.left+E.width&&P>=E.top&&P<=E.top+E.height;return _?{x:k,y:P}:null}var F=this.state,A=F.angleAxisMap,T=F.radiusAxisMap;if(A&&T){var M=La(A);return PE({x:k,y:P},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,N=this.getTooltipEventType(),w=zr(b,Is),S={};w&&N==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=_g(this.props,this.handleOuterEvent);return ue(ue({},k),S)}},{key:"addListener",value:function(){Wb.on(Hb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Wb.removeListener(Hb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,N,w){for(var S=this.state.formattedGraphicalItems,k=0,P=S.length;k<P;k++){var E=S[k];if(E.item===b||E.props.key===b.key||N===Zi(E.item.type)&&w===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,N=this.state.offset,w=N.left,S=N.top,k=N.height,P=N.width;return q.createElement("defs",null,q.createElement("clipPath",{id:b},q.createElement("rect",{x:w,y:S,height:k,width:P})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(N,w){var S=VT(w,2),k=S[0],P=S[1];return ue(ue({},N),{},Qe({},k,P.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(N,w){var S=VT(w,2),k=S[0],P=S[1];return ue(ue({},N),{},Qe({},k,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(b){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(b){var N=this.state,w=N.formattedGraphicalItems,S=N.activeItem;if(w&&w.length)for(var k=0,P=w.length;k<P;k++){var E=w[k],_=E.props,F=E.item,A=F.type.defaultProps!==void 0?ue(ue({},F.type.defaultProps),F.props):F.props,T=Zi(F.type);if(T==="Bar"){var M=(_.data||[]).find(function(I){return Kpe(b,I)});if(M)return{graphicalItem:E,payload:M}}else if(T==="RadialBar"){var O=(_.data||[]).find(function(I){return PE(b,I)});if(O)return{graphicalItem:E,payload:O}}else if(uy(E,S)||fy(E,S)||Sh(E,S)){var C=Qge({graphicalItem:E,activeTooltipItem:S,itemData:A.data}),R=A.activeIndex===void 0?C:A.activeIndex;return{graphicalItem:ue(ue({},E),{},{childIndex:R}),payload:Sh(E,S)?A.data[C]:E.props.data[C]}}}return null}},{key:"render",value:function(){var b=this;if(!xA(this))return null;var N=this.props,w=N.children,S=N.className,k=N.width,P=N.height,E=N.style,_=N.compact,F=N.title,A=N.desc,T=WT(N,i0e),M=yt(T,!1);if(_)return q.createElement(CT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},q.createElement($j,xc({},M,{width:k,height:P,title:F,desc:A}),this.renderClipPath(),yA(w,this.renderMap)));if(this.props.accessibilityLayer){var O,C;M.tabIndex=(O=this.props.tabIndex)!==null&&O!==void 0?O:0,M.role=(C=this.props.role)!==null&&C!==void 0?C:"application",M.onKeyDown=function(I){b.accessibilityManager.keyboardEvent(I)},M.onFocus=function(){b.accessibilityManager.focus()}}var R=this.parseEventsOfWrapper();return q.createElement(CT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},q.createElement("div",xc({className:Nt("recharts-wrapper",S),style:ue({position:"relative",cursor:"default",width:k,height:P},E)},R,{ref:function(B){b.container=B}}),q.createElement($j,xc({},M,{width:k,height:P,title:F,desc:A,style:w0e}),this.renderClipPath(),yA(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);Qe(v,"displayName",n),Qe(v,"defaultProps",ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Qe(v,"getDerivedStateFromProps",function(y,j){var m=y.dataKey,b=y.data,N=y.children,w=y.width,S=y.height,k=y.layout,P=y.stackOffset,E=y.margin,_=j.dataStartIndex,F=j.dataEndIndex;if(j.updateId===void 0){var A=GT(y);return ue(ue(ue({},A),{},{updateId:0},p(ue(ue({props:y},A),{},{updateId:0}),j)),{},{prevDataKey:m,prevData:b,prevWidth:w,prevHeight:S,prevLayout:k,prevStackOffset:P,prevMargin:E,prevChildren:N})}if(m!==j.prevDataKey||b!==j.prevData||w!==j.prevWidth||S!==j.prevHeight||k!==j.prevLayout||P!==j.prevStackOffset||!Ec(E,j.prevMargin)){var T=GT(y),M={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},O=ue(ue({},KT(j,b,k)),{},{updateId:j.updateId+1}),C=ue(ue(ue({},T),M),O);return ue(ue(ue({},C),p(ue({props:y},C),j)),{},{prevDataKey:m,prevData:b,prevWidth:w,prevHeight:S,prevLayout:k,prevStackOffset:P,prevMargin:E,prevChildren:N})}if(!Mj(N,j.prevChildren)){var R,I,B,H,Q=zr(N,wd),D=Q&&(R=(I=Q.props)===null||I===void 0?void 0:I.startIndex)!==null&&R!==void 0?R:_,te=Q&&(B=(H=Q.props)===null||H===void 0?void 0:H.endIndex)!==null&&B!==void 0?B:F,V=D!==_||te!==F,J=!xt(b),me=J&&!V?j.updateId:j.updateId+1;return ue(ue({updateId:me},p(ue(ue({props:y},j),{},{updateId:me,dataStartIndex:D,dataEndIndex:te}),j)),{},{prevChildren:N,dataStartIndex:D,dataEndIndex:te})}return null}),Qe(v,"renderActiveDot",function(y,j,m){var b;return x.isValidElement(y)?b=x.cloneElement(y,j):ft(y)?b=y(j):b=q.createElement(KS,j),q.createElement(bn,{className:"recharts-active-dot",key:m},b)});var g=x.forwardRef(function(j,m){return q.createElement(v,xc({},j,{ref:m}))});return g.displayName=v.displayName,g},_0e=RD({chartName:"LineChart",GraphicalChild:gm,axisComponents:[{axisType:"xAxis",AxisComp:Td},{axisType:"yAxis",AxisComp:_d}],formatAxisMap:X3}),I0e=RD({chartName:"BarChart",GraphicalChild:Dl,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Td},{axisType:"yAxis",AxisComp:_d}],formatAxisMap:X3});const R0e=[{value:"none",label:"No Discount",description:"No discount for users"},{value:"percentage",label:"Percentage Off",description:"X% off first month"},{value:"fixed",label:"Fixed Amount Off",description:"$X off first month"},{value:"free_month",label:"Free First Month",description:"1 month free"},{value:"free_months",label:"Multiple Free Months",description:"X months free"},{value:"trial_extension",label:"Extended Trial",description:"Extra trial days"}];function M0e(){var te,V,J,me,de,ve,ce,U;const{toast:e}=Je(),[t,n]=x.useState("codes"),[s,i]=x.useState(!1),[a,o]=x.useState(""),[l,c]=x.useState(""),[d,u]=x.useState("20"),[f,h]=x.useState("influencer"),[p,v]=x.useState("free_month"),[g,y]=x.useState("1"),{data:j,isLoading:m,refetch:b}=pe({queryKey:["/api/admin/referrals/codes"],queryFn:()=>Ie("/api/admin/referrals/codes")}),{data:N,isLoading:w}=pe({queryKey:["/api/admin/referrals/users"],queryFn:()=>Ie("/api/admin/referrals/users"),enabled:t==="users"}),{data:S,isLoading:k}=pe({queryKey:["/api/admin/referrals/payouts"],queryFn:()=>Ie("/api/admin/referrals/payouts"),enabled:t==="payouts"}),{data:P,isLoading:E}=pe({queryKey:["/api/admin/referrals/analytics"],queryFn:()=>Ie("/api/admin/referrals/analytics?period=30"),enabled:t==="analytics"}),_=qe({mutationFn:async L=>await Ie("/api/admin/referrals/codes","POST",L),onSuccess:L=>{_e.invalidateQueries({queryKey:["/api/admin/referrals/codes"]}),e({title:"Referral Code Created",description:L.message||`Code ${a} created successfully`}),T(),i(!1)},onError:L=>{e({title:"Error",description:L.message||"Failed to create referral code",variant:"destructive"})}}),F=qe({mutationFn:async({id:L,isActive:z})=>await Ie(`/api/admin/referrals/codes/${L}`,"PUT",{isActive:z}),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/referrals/codes"]}),e({title:"Code Updated",description:"Referral code status has been updated"})},onError:L=>{e({title:"Error",description:L.message||"Failed to update code",variant:"destructive"})}}),A=qe({mutationFn:async L=>await Ie(`/api/admin/referrals/codes/${L}`,"DELETE",{}),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/referrals/codes"]}),e({title:"Code Deleted",description:"Referral code and associated Stripe coupon have been deleted"})},onError:L=>{e({title:"Error",description:L.message||"Failed to delete code",variant:"destructive"})}}),T=()=>{o(""),c(""),u("20"),h("influencer"),v("free_month"),y("1")},M=()=>{if(!a){e({title:"Missing Code",description:"Please enter a referral code",variant:"destructive"});return}let L=g;p==="free_month"?L="1":p==="none"&&(L="0"),_.mutate({code:a,codeType:f,influencerName:l,commissionRate:d,discountType:p,discountValue:L})},O=L=>{const z=`/api/admin/referrals/export?type=${L}`;window.open(z,"_blank")},C=()=>{switch(p){case"percentage":return"Percentage (0-100)";case"fixed":return"Amount ($)";case"free_months":return"Number of Months";case"trial_extension":return"Extra Days";default:return"Value"}},R=p!=="none"&&p!=="free_month",I=(j==null?void 0:j.codes)||[],B=(N==null?void 0:N.users)||[],H=(S==null?void 0:S.influencers)||[],Q=(S==null?void 0:S.totals)||{},D=P||{};return r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Referral Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage influencer codes, track conversions, and process payouts"})]}),r.jsxs(Nn,{open:s,onOpenChange:i,children:[r.jsx(Yf,{asChild:!0,children:r.jsxs(Z,{"data-testid":"button-create-referral",children:[r.jsx(fv,{className:"w-4 h-4 mr-2"}),"Create Code"]})}),r.jsxs(mn,{className:"max-w-md",children:[r.jsxs(pn,{children:[r.jsx(gn,{children:"Create Referral Code"}),r.jsx(zn,{children:"Create a referral code with optional Stripe coupon for user discounts"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"code",children:"Referral Code"}),r.jsx(je,{id:"code",placeholder:"JTORRES",value:a,onChange:L=>o(L.target.value.toUpperCase()),"data-testid":"input-referral-code"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Code Type"}),r.jsxs(et,{value:f,onValueChange:L=>h(L),children:[r.jsx(Xe,{"data-testid":"select-code-type",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"influencer",children:"Influencer (earns commission)"}),r.jsx(ne,{value:"user",children:"Promo Code (no commission)"})]})]})]}),f==="influencer"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"influencerName",children:"Influencer Name"}),r.jsx(je,{id:"influencerName",placeholder:"JT Torres",value:l,onChange:L=>c(L.target.value),"data-testid":"input-influencer-name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"commission",children:"Commission Rate (%)"}),r.jsx(je,{id:"commission",type:"number",placeholder:"20",value:d,onChange:L=>u(L.target.value),"data-testid":"input-commission-rate"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Influencer earns ",d,"% of every subscription payment"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"User Discount Type"}),r.jsxs(et,{value:p,onValueChange:L=>v(L),children:[r.jsx(Xe,{"data-testid":"select-discount-type",children:r.jsx(tt,{})}),r.jsx(Ze,{children:R0e.map(L=>r.jsx(ne,{value:L.value,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:L.label}),r.jsx("span",{className:"text-xs text-muted-foreground",children:L.description})]})},L.value))})]})]}),R&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"discountValue",children:C()}),r.jsx(je,{id:"discountValue",type:"number",placeholder:"1",value:g,onChange:L=>y(L.target.value),"data-testid":"input-discount-value"})]}),r.jsx(Z,{className:"w-full",onClick:M,disabled:_.isPending,"data-testid":"button-submit-referral",children:_.isPending?"Creating...":"Create Referral Code"})]})]})]})]}),r.jsxs(Il,{value:t,onValueChange:n,children:[r.jsxs(Eo,{className:"grid w-full grid-cols-4",children:[r.jsxs(an,{value:"codes","data-testid":"tab-codes",children:[r.jsx(Lf,{className:"w-4 h-4 mr-2"}),"Codes"]}),r.jsxs(an,{value:"users","data-testid":"tab-users",children:[r.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Referred Users"]}),r.jsxs(an,{value:"payouts","data-testid":"tab-payouts",children:[r.jsx(Ap,{className:"w-4 h-4 mr-2"}),"Payouts"]}),r.jsxs(an,{value:"analytics","data-testid":"tab-analytics",children:[r.jsx(jn,{className:"w-4 h-4 mr-2"}),"Analytics"]})]}),r.jsxs(on,{value:"codes",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.length," referral codes configured"]}),r.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>b(),"data-testid":"button-refresh-codes",children:r.jsx(wr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"rounded-lg border bg-card",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Code"}),r.jsx(X,{children:"Owner"}),r.jsx(X,{children:"Type"}),r.jsx(X,{children:"Commission"}),r.jsx(X,{children:"User Benefit"}),r.jsx(X,{children:"Uses"}),r.jsx(X,{children:"Revenue"}),r.jsx(X,{children:"Status"}),r.jsx(X,{className:"text-right",children:"Actions"})]})}),r.jsx(wt,{children:m?r.jsx(ke,{children:r.jsx(W,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"Loading referral codes..."})}):I.length===0?r.jsx(ke,{children:r.jsx(W,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No referral codes yet. Create your first one above!"})}):I.map(L=>r.jsxs(ke,{"data-testid":`row-code-${L.id}`,children:[r.jsx(W,{className:"font-mono font-medium",children:L.code}),r.jsx(W,{children:L.influencerName||"-"}),r.jsx(W,{children:r.jsx(ae,{variant:L.codeType==="influencer"?"default":"secondary",children:L.codeType})}),r.jsx(W,{children:L.commissionPercent?`${L.commissionPercent}%`:"-"}),r.jsx(W,{children:r.jsx("span",{className:"text-sm",children:L.discountDescription||"No discount"})}),r.jsx(W,{children:L.totalSignups||0}),r.jsxs(W,{className:"font-medium",children:["$",parseFloat(L.totalRevenueGenerated||"0").toFixed(2)]}),r.jsx(W,{children:r.jsx(ae,{variant:L.isActive?"default":"secondary",children:L.isActive?"Active":"Inactive"})}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>F.mutate({id:L.id,isActive:!L.isActive}),"data-testid":`button-toggle-${L.id}`,children:L.isActive?r.jsx(xq,{className:"w-4 h-4"}):r.jsx(gq,{className:"w-4 h-4"})}),r.jsx(Z,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>{confirm(`Delete referral code ${L.code}? This will also delete the Stripe coupon.`)&&A.mutate(L.id)},"data-testid":`button-delete-${L.id}`,children:r.jsx(Si,{className:"w-4 h-4"})})]})})]},L.id))})]})})]}),r.jsxs(on,{value:"users",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:[(N==null?void 0:N.total)||0," users signed up with referral codes"]}),r.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>O("users"),"data-testid":"button-export-users",children:[r.jsx(fj,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),r.jsx("div",{className:"rounded-lg border bg-card",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Email"}),r.jsx(X,{children:"Username"}),r.jsx(X,{children:"Code Used"}),r.jsx(X,{children:"Influencer"}),r.jsx(X,{children:"Discount"}),r.jsx(X,{children:"Signup Date"}),r.jsx(X,{children:"Status"})]})}),r.jsx(wt,{children:w?r.jsx(ke,{children:r.jsx(W,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"Loading referred users..."})}):B.length===0?r.jsx(ke,{children:r.jsx(W,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No users have signed up with referral codes yet"})}):B.map(L=>r.jsxs(ke,{"data-testid":`row-user-${L.id}`,children:[r.jsx(W,{className:"font-medium",children:L.email}),r.jsx(W,{children:L.username||"-"}),r.jsx(W,{className:"font-mono",children:L.referralCodeUsed}),r.jsx(W,{children:L.referredByInfluencer||"-"}),r.jsx(W,{children:r.jsx("span",{className:"text-sm",children:L.discountDescription||"None"})}),r.jsx(W,{children:L.referralSignupDate?new Date(L.referralSignupDate).toLocaleDateString():"-"}),r.jsx(W,{children:r.jsx(ae,{variant:L.subscriptionStatus==="active"?"default":"secondary",children:L.subscriptionStatus||"unknown"})})]},L.id))})]})})]}),r.jsxs(on,{value:"payouts",className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Influencers"}),r.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-influencers",children:Q.influencerCount||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Signups"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-signups",children:Q.totalSignups||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Revenue"}),r.jsx(Ap,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"text-2xl font-bold","data-testid":"text-total-revenue",children:["$",Q.totalRevenue||"0.00"]})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Commission Owed"}),r.jsx(Ap,{className:"h-4 w-4 text-primary"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"text-2xl font-bold text-primary","data-testid":"text-commission-owed",children:["$",Q.totalCommissionOwed||"0.00"]})})]})]}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>O("payouts"),"data-testid":"button-export-payouts",children:[r.jsx(fj,{className:"w-4 h-4 mr-2"}),"Export CSV"]})}),r.jsx("div",{className:"rounded-lg border bg-card",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Influencer"}),r.jsx(X,{children:"Code"}),r.jsx(X,{children:"Commission Rate"}),r.jsx(X,{children:"Signups"}),r.jsx(X,{children:"Active Subs"}),r.jsx(X,{children:"Revenue Generated"}),r.jsx(X,{children:"Commission Owed"}),r.jsx(X,{children:"Status"})]})}),r.jsx(wt,{children:k?r.jsx(ke,{children:r.jsx(W,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"Loading payout data..."})}):H.length===0?r.jsx(ke,{children:r.jsx(W,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No influencer codes yet"})}):H.map(L=>r.jsxs(ke,{"data-testid":`row-influencer-${L.id}`,children:[r.jsx(W,{className:"font-medium",children:L.influencerName}),r.jsx(W,{className:"font-mono",children:L.code}),r.jsxs(W,{children:[L.commissionRate,"%"]}),r.jsx(W,{children:L.totalSignups}),r.jsx(W,{children:L.activeSubscribers}),r.jsxs(W,{children:["$",L.totalRevenue]}),r.jsxs(W,{className:"font-medium text-primary",children:["$",L.commissionOwed]}),r.jsx(W,{children:r.jsx(ae,{variant:L.isActive?"default":"secondary",children:L.isActive?"Active":"Inactive"})})]},L.id))})]})})]}),r.jsxs(on,{value:"analytics",className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Referred"}),r.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-analytics-total",children:((te=D.totals)==null?void 0:te.totalReferred)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Active Subscribers"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-analytics-active",children:((V=D.totals)==null?void 0:V.activeSubscribers)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"In Trial"}),r.jsx(Lf,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-analytics-trials",children:((J=D.totals)==null?void 0:J.trials)||0})})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Referral Signups Over Time (Last 30 Days)"}),r.jsx(ze,{children:"Daily signups from referral codes"})]}),r.jsx(ee,{children:E?r.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Loading chart data..."}):(((me=D.signupsByDay)==null?void 0:me.length)||0)===0?r.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No signup data available yet"}):r.jsx(gP,{width:"100%",height:300,children:r.jsxs(_0e,{data:D.signupsByDay,children:[r.jsx(Kw,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(Td,{dataKey:"date",tickFormatter:L=>new Date(L).toLocaleDateString("en-US",{month:"short",day:"numeric"}),className:"text-muted-foreground"}),r.jsx(_d,{className:"text-muted-foreground"}),r.jsx(Is,{labelFormatter:L=>new Date(L).toLocaleDateString(),contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))"}}),r.jsx(gm,{type:"monotone",dataKey:"count",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))"}})]})})})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Conversion Rate by Discount Type"}),r.jsx(ze,{children:"Which discount types convert best"})]}),r.jsx(ee,{children:E?r.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Loading chart data..."}):(((de=D.conversionByDiscount)==null?void 0:de.length)||0)===0?r.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No conversion data available yet"}):r.jsx(gP,{width:"100%",height:300,children:r.jsxs(I0e,{data:D.conversionByDiscount,children:[r.jsx(Kw,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(Td,{dataKey:"discountType",className:"text-muted-foreground"}),r.jsx(_d,{className:"text-muted-foreground"}),r.jsx(Is,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))"},formatter:(L,z)=>z==="conversionRate"?[`${L}%`,"Conversion Rate"]:[L,z]}),r.jsx(Dl,{dataKey:"conversionRate",fill:"hsl(var(--primary))",radius:[4,4,0,0],children:(ve=D.conversionByDiscount)==null?void 0:ve.map((L,z)=>r.jsx(bS,{fill:`hsl(var(--primary) / ${.5+z*.1})`},`cell-${z}`))})]})})})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Top Performing Codes"}),r.jsx(ze,{children:"Codes ranked by total signups"})]}),r.jsx(ee,{children:r.jsx("div",{className:"rounded-lg border",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Code"}),r.jsx(X,{children:"Influencer"}),r.jsx(X,{children:"Signups"}),r.jsx(X,{children:"Active Subs"}),r.jsx(X,{children:"Revenue"})]})}),r.jsx(wt,{children:E?r.jsx(ke,{children:r.jsx(W,{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"Loading..."})}):(((ce=D.topCodes)==null?void 0:ce.length)||0)===0?r.jsx(ke,{children:r.jsx(W,{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"No codes with signups yet"})}):(U=D.topCodes)==null?void 0:U.map((L,z)=>r.jsxs(ke,{"data-testid":`row-top-code-${z}`,children:[r.jsx(W,{className:"font-mono font-medium",children:L.code}),r.jsx(W,{children:L.influencerName||"-"}),r.jsx(W,{children:L.totalSignups||0}),r.jsx(W,{children:L.activeSubscribers||0}),r.jsxs(W,{children:["$",L.totalRevenueGenerated]})]},L.code))})]})})})]})]})]})]})})}var MD="AlertDialog",[F0e,iSe]=Mr(MD,[kM]),wa=kM(),FD=e=>{const{__scopeAlertDialog:t,...n}=e,s=wa(t);return r.jsx(WN,{...s,...n,modal:!0})};FD.displayName=MD;var $0e="AlertDialogTrigger",$D=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wa(n);return r.jsx(zM,{...i,...s,ref:t})});$D.displayName=$0e;var D0e="AlertDialogPortal",DD=e=>{const{__scopeAlertDialog:t,...n}=e,s=wa(t);return r.jsx(HN,{...s,...n})};DD.displayName=D0e;var L0e="AlertDialogOverlay",LD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wa(n);return r.jsx(tm,{...i,...s,ref:t})});LD.displayName=L0e;var Ic="AlertDialogContent",[B0e,z0e]=F0e(Ic),q0e=xI("AlertDialogContent"),BD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...i}=e,a=wa(n),o=x.useRef(null),l=ct(t,o),c=x.useRef(null);return r.jsx(AK,{contentName:Ic,titleName:zD,docsSlug:"alert-dialog",children:r.jsx(B0e,{scope:n,cancelRef:c,children:r.jsxs(nm,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:$e(i.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(q0e,{children:s}),r.jsx(V0e,{contentRef:o})]})})})});BD.displayName=Ic;var zD="AlertDialogTitle",qD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wa(n);return r.jsx(rm,{...i,...s,ref:t})});qD.displayName=zD;var UD="AlertDialogDescription",VD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wa(n);return r.jsx(sm,{...i,...s,ref:t})});VD.displayName=UD;var U0e="AlertDialogAction",WD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wa(n);return r.jsx(im,{...i,...s,ref:t})});WD.displayName=U0e;var HD="AlertDialogCancel",KD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:i}=z0e(HD,n),a=wa(n),o=ct(t,i);return r.jsx(im,{...a,...s,ref:o})});KD.displayName=HD;var V0e=({contentRef:e})=>{const t=`\`${Ic}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ic}\` by passing a \`${UD}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ic}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},W0e=FD,H0e=$D,K0e=DD,GD=LD,YD=BD,QD=WD,JD=KD,XD=qD,ZD=VD;const Tx=W0e,QT=H0e,G0e=K0e,eL=x.forwardRef(({className:e,...t},n)=>r.jsx(GD,{className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));eL.displayName=GD.displayName;const Oh=x.forwardRef(({className:e,...t},n)=>r.jsxs(G0e,{children:[r.jsx(eL,{}),r.jsx(YD,{ref:n,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Oh.displayName=YD.displayName;const _h=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col space-y-2 text-center sm:text-left",e),...t});_h.displayName="AlertDialogHeader";const Ih=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ih.displayName="AlertDialogFooter";const Rh=x.forwardRef(({className:e,...t},n)=>r.jsx(XD,{ref:n,className:Ce("text-lg font-semibold",e),...t}));Rh.displayName=XD.displayName;const Mh=x.forwardRef(({className:e,...t},n)=>r.jsx(ZD,{ref:n,className:Ce("text-sm text-muted-foreground",e),...t}));Mh.displayName=ZD.displayName;const Fh=x.forwardRef(({className:e,...t},n)=>r.jsx(QD,{ref:n,className:Ce(EN(),e),...t}));Fh.displayName=QD.displayName;const $h=x.forwardRef(({className:e,...t},n)=>r.jsx(JD,{ref:n,className:Ce(EN({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));$h.displayName=JD.displayName;function JT(){const{toast:e}=Je(),[t,n]=x.useState(new Set),[s,i]=x.useState(null),[a,o]=x.useState(null),[l,c]=x.useState(null),[d,u]=x.useState(!1),[f,h]=x.useState(""),[p,v]=x.useState(""),[g,y]=x.useState(""),[j,m]=x.useState(""),[b,N]=x.useState(!1),[w,S]=x.useState(""),[k,P]=x.useState(""),[E,_]=x.useState(!1),[F,A]=x.useState("BJJ OS lifetime access for free"),[T,M]=x.useState(`Hey [Name],

I've been working on this for a while and I'm really excited to finally share it with you. 

It's called BJJ OS - and I'm giving you lifetime access, no charge, ever. I'm genuinely grateful you're willing to try it.

Here's what it actually is:

At the core is Professor OS - an AI system I built specifically for BJJ. It's not just a chatbot that spits out generic answers. 

It learns your game. Tracks what you're working on, what's clicking, what you're struggling with. It autonomously analyzes thousands of videos daily - curating, saving, and categorizing them after passing numerous algorithm tests for quality. The goal is to build a library of thousands of videos over time, with only elite instruction making the cut.

Ask it technique questions and it gives you real answers, not surface-level stuff. It recommends specific videos based on YOUR game, YOUR body type, YOUR goals. The more you use it, the better it gets at coaching you.

I'm seriously shocked by how smart it is and it's constantly learning.

This is something I believe can actually help people improve. Not just track sessions or show random videos - but genuinely accelerate your learning.

That said, I'm still building and refining it. I want to know what's bad and what could be better. Please help me bang out the kinks. Criticism only helps and it's appreciated.

 Click here to get started: https://bjjos.app/signup?email=[EMAIL]

Email me at Todd@bjjos.app or text/call me at 1.914.837.3750 anytime. I would love to hear from you.

Os!
- Todd`),{data:O,isLoading:C}=pe({queryKey:["/api/admin/lifetime-users"],queryFn:()=>Ie("/api/admin/lifetime-users")}),{data:R,isLoading:I}=pe({queryKey:["/api/admin/lifetime-users",s],enabled:!!s,queryFn:()=>Ie(`/api/admin/lifetime-users/${s}`)}),{data:B,isLoading:H}=pe({queryKey:["/api/admin/lifetime-users",a],enabled:!!a,queryFn:async()=>{var L;const U=await Ie(`/api/admin/lifetime-users/${a}`);return h(U.displayName||U.name||""),v(U.beltLevel||""),y(((L=U.membership)==null?void 0:L.reason)||U.reason||""),m(U.adminNotes||""),N(U.isLifetimeUser||!1),U}}),Q=qe({mutationFn:async U=>await Ie(`/api/admin/lifetime-users/${U.id}`,"PATCH",{displayName:U.displayName,beltLevel:U.beltLevel,reason:U.reason,adminNotes:U.adminNotes,isLifetimeUser:U.isLifetimeUser}),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/lifetime-users"]}),e({title:"User Updated",description:"User details updated successfully"}),o(null)},onError:U=>{e({title:"Error",description:U.message||"Failed to update user",variant:"destructive"})}}),D=qe({mutationFn:async U=>await Ie(`/api/admin/lifetime-users/${U}`,"DELETE",{}),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/lifetime-users"]}),e({title:"User Deleted",description:"User deleted successfully"}),c(null),n(new Set)},onError:U=>{e({title:"Error",description:U.message||"Failed to delete user",variant:"destructive"})}}),te=qe({mutationFn:async U=>await Ie("/api/admin/lifetime-users/bulk-delete","POST",{userIds:U}),onSuccess:U=>{_e.invalidateQueries({queryKey:["/api/admin/lifetime-users"]}),e({title:"Bulk Delete Complete",description:U.summary}),u(!1),n(new Set)},onError:U=>{e({title:"Error",description:U.message||"Failed to bulk delete users",variant:"destructive"})}}),V=qe({mutationFn:async U=>await Ie("/api/admin/lifetime/grant-instant","POST",U),onSuccess:U=>{_e.invalidateQueries({queryKey:["/api/admin/lifetime-users"]}),e({title:"Success!",description:U.message}),S(""),P(""),_(!1)},onError:U=>{e({title:"Error",description:U.message||"Failed to grant lifetime access",variant:"destructive"})}}),J=()=>{a&&Q.mutate({id:a,displayName:f,beltLevel:p,reason:g,adminNotes:j,isLifetimeUser:b})},me=()=>{if(!w){e({title:"Missing Information",description:"Please enter an email address",variant:"destructive"});return}if(!k){e({title:"Missing Information",description:"Please select a reason for lifetime access",variant:"destructive"});return}V.mutate({email:w,reason:k,sendEmail:E,emailSubject:E?F:void 0,emailBody:E?T:void 0})},de=U=>{const L=new Set(t);L.has(U)?L.delete(U):L.add(U),n(L)},ve=()=>{t.size===(O==null?void 0:O.length)?n(new Set):n(new Set((O==null?void 0:O.map(U=>U.id))||[]))},ce=U=>{const L=U.displayName||U.name||"Unnamed",z=U.username;return z?`${L} (@${z})`:L};return r.jsxs(Qt,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-3xl font-bold",children:"Lifetime Access Management"}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(gs,{className:"w-5 h-5"}),"Send Lifetime Access Invitation"]}),r.jsx(ze,{children:"Grant free lifetime access to beta testers, special contributors, or VIP users. They get full access forever without paying."})]}),r.jsx(ee,{children:r.jsxs("form",{onSubmit:U=>{U.preventDefault(),me()},className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"invite-email",children:"Email Address *"}),r.jsx(je,{id:"invite-email",type:"email",value:w,onChange:U=>S(U.target.value),placeholder:"user@example.com",required:!0,"data-testid":"input-invite-email"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"invite-reason",children:"Reason for Lifetime Access *"}),r.jsxs(et,{value:k,onValueChange:P,required:!0,children:[r.jsx(Xe,{id:"invite-reason","data-testid":"select-invite-reason",children:r.jsx(tt,{placeholder:"Select a reason"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"Beta Tester",children:"Beta Tester"}),r.jsx(ne,{value:"VIP / Founding Member",children:"VIP / Founding Member"}),r.jsx(ne,{value:"Gym Owner",children:"Gym Owner"}),r.jsx(ne,{value:"Elite Instructor (Black Belt)",children:"Elite Instructor (Black Belt)"}),r.jsx(ne,{value:"Elite Competitor",children:"Elite Competitor"}),r.jsx(ne,{value:"Business Partner",children:"Business Partner"}),r.jsx(ne,{value:"Personal Friend",children:"Personal Friend"}),r.jsx(ne,{value:"Essential Training Partner",children:"Essential Training Partner"}),r.jsx(ne,{value:"Content Creator / Influencer",children:"Content Creator / Influencer"}),r.jsx(ne,{value:"Other",children:"Other"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vs,{id:"send-email",checked:E,onCheckedChange:U=>_(U),"data-testid":"checkbox-send-email"}),r.jsx("label",{htmlFor:"send-email",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Send invitation email"})]}),E&&r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(gs,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Message Preview"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"email-subject",children:"Subject"}),r.jsx(je,{id:"email-subject",value:F,onChange:U=>A(U.target.value),placeholder:"Email subject","data-testid":"input-email-subject"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"email-body",children:"Message Body"}),r.jsx(Ci,{id:"email-body",value:T,onChange:U=>M(U.target.value),placeholder:"Email message",rows:20,className:"font-mono text-sm","data-testid":"textarea-email-body"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground bg-muted/30 p-3 rounded-lg",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"You can edit this message before sending. Use [Name] and [EMAIL] as placeholders."})]})]}),r.jsxs(Z,{type:"submit",disabled:!w||!k||V.isPending,className:"w-full","data-testid":"button-grant-lifetime",children:[r.jsx(qn,{className:"h-4 w-4 mr-2"}),V.isPending?"Granting...":E?"Grant Lifetime Access & Send Email":"Grant Lifetime Access"]})]})})]}),r.jsx(G,{children:r.jsx(re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Mn,{className:"w-5 h-5"}),"Lifetime Memberships"]}),r.jsxs(ze,{children:["Grant free lifetime access to beta testers, special contributors, or VIP users. They get full access forever without paying.",O&&O.length>0&&r.jsxs("span",{className:"ml-2 font-semibold",children:["(",O.length," total)"]})]})]}),t.size>0&&r.jsxs(Z,{variant:"destructive",size:"sm",onClick:()=>u(!0),"data-testid":"button-bulk-delete",children:[r.jsx(Si,{className:"w-4 h-4 mr-2"}),"Delete Selected (",t.size,")"]})]})})}),r.jsx("div",{className:"rounded-lg border bg-card",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{className:"w-12",children:r.jsx(Vs,{checked:(O==null?void 0:O.length)>0&&t.size===(O==null?void 0:O.length),onCheckedChange:ve,"data-testid":"checkbox-select-all"})}),r.jsx(X,{children:"User"}),r.jsx(X,{children:"Phone"}),r.jsx(X,{children:"Reason"}),r.jsx(X,{children:"Belt"}),r.jsx(X,{children:"Created"}),r.jsx(X,{children:"Bypass"}),r.jsx(X,{className:"text-right",children:"Actions"})]})}),r.jsx(wt,{children:C?r.jsx(ke,{children:r.jsxs(W,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:[r.jsx(De,{className:"w-5 h-5 animate-spin mx-auto mb-2"}),"Loading lifetime members..."]})}):(O==null?void 0:O.length)===0?r.jsx(ke,{children:r.jsx(W,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No lifetime members yet. Grant access to your first beta tester above!"})}):O==null?void 0:O.map(U=>r.jsxs(ke,{"data-testid":`row-lifetime-${U.id}`,children:[r.jsx(W,{children:r.jsx(Vs,{checked:t.has(U.id),onCheckedChange:()=>de(U.id),"data-testid":`checkbox-user-${U.id}`})}),r.jsx(W,{className:"font-medium",children:ce(U)}),r.jsx(W,{className:"font-mono text-sm",children:U.phoneNumber||U.email||"Unknown"}),r.jsx(W,{children:U.reason?r.jsx(ae,{variant:"secondary",className:"text-xs",children:U.reason}):r.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),r.jsx(W,{children:U.beltLevel?r.jsx(ae,{variant:"outline",children:U.beltLevel}):r.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),r.jsx(W,{className:"text-muted-foreground text-sm",children:new Date(U.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),r.jsx(W,{children:U.isLifetimeUser?r.jsx(ae,{variant:"default",className:"text-xs",children:"ON"}):r.jsx(ae,{variant:"secondary",className:"text-xs",children:"OFF"})}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>i(U.id),"data-testid":`button-view-${U.id}`,children:r.jsx(Bn,{className:"w-4 h-4"})}),r.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>o(U.id),"data-testid":`button-edit-${U.id}`,children:r.jsx(KI,{className:"w-4 h-4"})}),r.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>c(U.id),"data-testid":`button-delete-${U.id}`,children:r.jsx(ys,{className:"w-4 h-4"})})]})})]},U.id))})]})})]}),r.jsx(Nn,{open:!!s,onOpenChange:U=>!U&&i(null),children:r.jsxs(mn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(pn,{children:[r.jsx(gn,{children:"User Details"}),r.jsx(zn,{children:"Complete information for this lifetime user"})]}),I?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(De,{className:"w-6 h-6 animate-spin"})}):R&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Display Name"}),r.jsx("div",{className:"font-medium",children:R.displayName||R.name||"Not set"})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Username"}),r.jsx("div",{className:"font-mono text-sm",children:R.username||"Not set"})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Phone Number"}),r.jsx("div",{className:"font-mono text-sm",children:R.phoneNumber})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Belt Level"}),r.jsx("div",{children:R.beltLevel||"Not set"})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Style"}),r.jsx("div",{children:R.style||"Not set"})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Content Preference"}),r.jsx("div",{children:R.contentPreference||"Not set"})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Training Frequency"}),r.jsx("div",{children:R.trainingFrequency?`${R.trainingFrequency}x/week`:"Not set"})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Compete Status"}),r.jsx("div",{children:R.competeStatus||"Not set"})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Lifetime Bypass"}),r.jsx("div",{children:R.isLifetimeUser?r.jsx(ae,{variant:"default",children:"Enabled"}):r.jsx(ae,{variant:"secondary",children:"Disabled"})})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Created"}),r.jsx("div",{className:"text-sm",children:new Date(R.createdAt).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Last Login"}),r.jsx("div",{className:"text-sm",children:R.lastLogin?new Date(R.lastLogin).toLocaleString():"Never"})]}),r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Referral Code"}),r.jsx("div",{className:"font-mono text-sm",children:R.referralCode||"None"})]})]}),R.focusAreas&&R.focusAreas.length>0&&r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Focus Areas"}),r.jsx("div",{className:"flex gap-1 flex-wrap mt-1",children:R.focusAreas.map((U,L)=>r.jsx(ae,{variant:"outline",className:"text-xs",children:U},L))})]}),R.struggles&&R.struggles.length>0&&r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Struggles"}),r.jsx("div",{className:"flex gap-1 flex-wrap mt-1",children:R.struggles.map((U,L)=>r.jsx(ae,{variant:"secondary",className:"text-xs",children:U},L))})]}),R.adminNotes&&r.jsxs("div",{children:[r.jsx(fe,{className:"text-xs text-muted-foreground",children:"Admin Notes"}),r.jsx("div",{className:"text-sm mt-1 p-3 bg-muted rounded-md",children:R.adminNotes})]})]})]})}),r.jsx(Nn,{open:!!a,onOpenChange:U=>!U&&o(null),children:r.jsxs(mn,{className:"max-w-lg",children:[r.jsxs(pn,{children:[r.jsx(gn,{children:"Edit User"}),r.jsx(zn,{children:"Update user information and settings"})]}),H?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(De,{className:"w-6 h-6 animate-spin"})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-display-name",children:"Display Name"}),r.jsx(je,{id:"edit-display-name",value:f,onChange:U=>h(U.target.value),placeholder:"John Smith","data-testid":"input-edit-display-name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-belt-level",children:"Belt Level"}),r.jsxs(et,{value:p,onValueChange:v,children:[r.jsx(Xe,{"data-testid":"select-edit-belt",children:r.jsx(tt,{placeholder:"Select belt level"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"white",children:"White"}),r.jsx(ne,{value:"blue",children:"Blue"}),r.jsx(ne,{value:"purple",children:"Purple"}),r.jsx(ne,{value:"brown",children:"Brown"}),r.jsx(ne,{value:"black",children:"Black"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-reason",children:"Reason for Lifetime Access"}),r.jsxs(et,{value:g,onValueChange:y,children:[r.jsx(Xe,{"data-testid":"select-edit-reason",children:r.jsx(tt,{placeholder:"Select a reason"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"Beta Tester",children:"Beta Tester"}),r.jsx(ne,{value:"VIP / Founding Member",children:"VIP / Founding Member"}),r.jsx(ne,{value:"Gym Owner",children:"Gym Owner"}),r.jsx(ne,{value:"Elite Instructor (Black Belt)",children:"Elite Instructor (Black Belt)"}),r.jsx(ne,{value:"Elite Competitor",children:"Elite Competitor"}),r.jsx(ne,{value:"Business Partner",children:"Business Partner"}),r.jsx(ne,{value:"Personal Friend",children:"Personal Friend"}),r.jsx(ne,{value:"Essential Training Partner",children:"Essential Training Partner"}),r.jsx(ne,{value:"Content Creator / Influencer",children:"Content Creator / Influencer"}),r.jsx(ne,{value:"Other",children:"Other"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-admin-notes",children:"Admin Notes"}),r.jsx(Ci,{id:"edit-admin-notes",value:j,onChange:U=>m(U.target.value),placeholder:"Internal notes...",rows:3,"data-testid":"input-edit-admin-notes"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vs,{id:"edit-lifetime-bypass",checked:b,onCheckedChange:U=>N(!!U),"data-testid":"checkbox-edit-lifetime-bypass"}),r.jsx(fe,{htmlFor:"edit-lifetime-bypass",className:"cursor-pointer",children:"Enable Lifetime Bypass (LIFETIME code works)"})]}),r.jsxs(bo,{children:[r.jsx(Z,{variant:"outline",onClick:()=>o(null),"data-testid":"button-cancel-edit",children:"Cancel"}),r.jsx(Z,{onClick:J,disabled:Q.isPending,"data-testid":"button-save-edit",children:Q.isPending?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})}),r.jsx(Tx,{open:!!l,onOpenChange:U=>!U&&c(null),children:r.jsxs(Oh,{children:[r.jsxs(_h,{children:[r.jsx(Rh,{children:"Delete User?"}),r.jsx(Mh,{children:"This will permanently delete this user and all their data. This action cannot be undone."})]}),r.jsxs(Ih,{children:[r.jsx($h,{"data-testid":"button-cancel-delete",children:"Cancel"}),r.jsx(Fh,{onClick:()=>{l&&D.mutate(l)},className:"bg-destructive hover:bg-destructive/90","data-testid":"button-confirm-delete",children:"Delete User"})]})]})}),r.jsx(Tx,{open:d,onOpenChange:u,children:r.jsxs(Oh,{children:[r.jsxs(_h,{children:[r.jsxs(Rh,{children:["Delete ",t.size," Users?"]}),r.jsxs(Mh,{children:["This will permanently delete ",t.size," selected users and all their data. This action cannot be undone."]})]}),r.jsxs(Ih,{children:[r.jsx($h,{"data-testid":"button-cancel-bulk-delete",children:"Cancel"}),r.jsx(Fh,{onClick:()=>te.mutate(Array.from(t)),className:"bg-destructive hover:bg-destructive/90","data-testid":"button-confirm-bulk-delete",children:te.isPending?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):`Delete ${t.size} Users`})]})]})})]})}var r2="Progress",s2=100,[Y0e,aSe]=Mr(r2),[Q0e,J0e]=Y0e(r2),tL=x.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:i,getValueLabel:a=X0e,...o}=e;(i||i===0)&&!XT(i)&&console.error(Z0e(`${i}`,"Progress"));const l=XT(i)?i:s2;s!==null&&!ZT(s,l)&&console.error(eje(`${s}`,"Progress"));const c=ZT(s,l)?s:null,d=Ox(c)?a(c,l):void 0;return r.jsx(Q0e,{scope:n,value:c,max:l,children:r.jsx(He.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ox(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":sL(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});tL.displayName=r2;var nL="ProgressIndicator",rL=x.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,i=J0e(nL,n);return r.jsx(He.div,{"data-state":sL(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:t})});rL.displayName=nL;function X0e(e,t){return`${Math.round(e/t*100)}%`}function sL(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ox(e){return typeof e=="number"}function XT(e){return Ox(e)&&!isNaN(e)&&e>0}function ZT(e,t){return Ox(e)&&!isNaN(e)&&e<=t&&e>=0}function Z0e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${s2}\`.`}function eje(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${s2} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var iL=tL,tje=rL;const aL=x.forwardRef(({className:e,value:t,...n},s)=>r.jsx(iL,{ref:s,className:Ce("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(tje,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));aL.displayName=iL.displayName;async function Xl(e){const t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(t.status===401||t.status===403)throw new Error("AUTH_REQUIRED");if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`Request failed: ${t.status}`)}return t.json()}async function ap(e,t){const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:t?JSON.stringify(t):void 0});if(!n.ok){const s=await n.json().catch(()=>({}));throw new Error(s.error||`Request failed: ${n.status}`)}return n.json()}function nje(){var nt,pt,Ot;const[,e]=it(),[t,n]=x.useState(""),[s,i]=x.useState(""),[a,o]=x.useState("all"),[l,c]=x.useState("all"),[d,u]=x.useState("all"),[f,h]=x.useState("newest"),[p,v]=x.useState(!1),[g,y]=x.useState(null),[j,m]=x.useState(!1),[b,N]=x.useState(null);x.useEffect(()=>{const $=setTimeout(()=>i(t),300);return()=>clearTimeout($)},[t]);const{data:w,isLoading:S,error:k}=pe({queryKey:["/api/admin/videos/stats"],queryFn:()=>Xl("/api/admin/videos/stats"),staleTime:3e4,retry:!1}),{data:P,isLoading:E}=pe({queryKey:["/api/admin/videos/knowledge-status"],queryFn:()=>Xl("/api/admin/videos/knowledge-status"),staleTime:1e4,refetchInterval:3e4,retry:!1,enabled:!p}),{data:_}=pe({queryKey:["/api/admin/videos/bulk-status"],queryFn:()=>Xl("/api/admin/videos/bulk-status"),staleTime:5e3,refetchInterval:$=>{var Y;return(Y=$.state.data)!=null&&Y.isActive?3e3:3e4},retry:!1,enabled:!p}),{data:F}=pe({queryKey:["/api/admin/videos/all-for-filters"],queryFn:()=>Xl("/api/admin/videos/list?limit=2000"),staleTime:6e4,retry:!1,enabled:!p}),{data:A,isLoading:T,error:M}=pe({queryKey:["/api/admin/videos/list",s,a,l,d],queryFn:async()=>{const $=new URLSearchParams;return s&&$.append("q",s),a&&a!=="all"&&$.append("instructor",a),l&&l!=="all"&&$.append("technique",l),d&&d!=="all"&&$.append("knowledgeFilter",d),$.append("limit","50"),Xl(`/api/admin/videos/list?${$.toString()}`)},staleTime:1e4,retry:!1,enabled:!p}),O=qe({mutationFn:()=>ap("/api/admin/videos/process-all",{batchSize:10,delayBetweenBatches:3e4}),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/videos/bulk-status"]})}}),C=qe({mutationFn:()=>ap("/api/admin/videos/bulk-pause"),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/videos/bulk-status"]})}}),R=qe({mutationFn:()=>ap("/api/admin/videos/bulk-stop"),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/videos/bulk-status"]})}}),I=qe({mutationFn:$=>ap(`/api/admin/videos/${$}/process`),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/videos/list"]}),_e.invalidateQueries({queryKey:["/api/admin/videos/knowledge-status"]})}}),{instructorToTechniques:B,techniqueToInstructors:H,allInstructors:Q,allTechniques:D}=x.useMemo(()=>{const $=(F==null?void 0:F.videos)||[],Y=new Map,ie=new Map,be=new Set,ye=new Set;for(const ge of $){const Pe=ge.instructor_name,We=ge.technique_name;Pe&&(be.add(Pe),Y.has(Pe)||Y.set(Pe,new Set),We&&Y.get(Pe).add(We)),We&&(ye.add(We),ie.has(We)||ie.set(We,new Set),Pe&&ie.get(We).add(Pe))}return{instructorToTechniques:Y,techniqueToInstructors:ie,allInstructors:Array.from(be).sort((ge,Pe)=>ge.localeCompare(Pe)),allTechniques:Array.from(ye).sort((ge,Pe)=>ge.localeCompare(Pe))}},[F]),te=x.useMemo(()=>{if(l==="all")return Q;const $=H.get(l);return $?Q.filter(Y=>$.has(Y)):Q},[l,Q,H]),V=x.useMemo(()=>{if(a==="all")return D;const $=B.get(a);return $?D.filter(Y=>$.has(Y)):D},[a,D,B]),J=$=>{if(o($),$!=="all"&&l!=="all"){const Y=B.get($);(!Y||!Y.has(l))&&c("all")}},me=$=>{if(c($),$!=="all"&&a!=="all"){const Y=H.get($);(!Y||!Y.has(a))&&o("all")}},de=async $=>{try{const Y=await Xl(`/api/admin/videos/${$.id}/knowledge`);N(Y),m(!0)}catch(Y){console.error("Failed to fetch knowledge:",Y)}};if(x.useEffect(()=>{const $=k||M;$&&$.message==="AUTH_REQUIRED"&&(v(!0),e("/admin/login"))},[k,M,e]),p)return r.jsx(Qt,{children:r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[r.jsx(lr,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Authentication Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Please log in to access the video library."}),r.jsx(Z,{onClick:()=>e("/admin/login"),"data-testid":"button-login",children:"Go to Login"})]})});const ve=w||{total_videos:0,unique_instructors:0,unique_techniques:0,avg_quality:0},ce=(A==null?void 0:A.videos)||[],U=x.useMemo(()=>{const $=[...ce];return f==="newest"?$.sort((Y,ie)=>new Date(ie.created_at).getTime()-new Date(Y.created_at).getTime()):f==="oldest"?$.sort((Y,ie)=>new Date(Y.created_at).getTime()-new Date(ie.created_at).getTime()):f==="quality"?$.sort((Y,ie)=>(ie.quality_score||0)-(Y.quality_score||0)):$},[ce,f]),L=P||{totalVideos:0,processed:0,pending:0,withTranscript:0,totalTechniques:0,percentComplete:0},z=_||{isActive:!1,total:0,processed:0,succeeded:0,failed:0,currentBatch:0,totalBatches:0,isPaused:!1,estimatedTimeRemaining:null},Ne=$=>$.thumbnail_url?$.thumbnail_url:$.youtube_id?`https://img.youtube.com/vi/${$.youtube_id}/mqdefault.jpg`:"",le=$=>{if(!$)return"";const Y=Math.floor($/60),ie=$%60;return`${Y}:${ie.toString().padStart(2,"0")}`},Ae=$=>l==="all"?((F==null?void 0:F.videos)||[]).filter(be=>be.instructor_name===$).length:((F==null?void 0:F.videos)||[]).filter(ie=>ie.instructor_name===$&&ie.technique_name===l).length,Ke=$=>a==="all"?((F==null?void 0:F.videos)||[]).filter(be=>be.technique_name===$).length:((F==null?void 0:F.videos)||[]).filter(ie=>ie.technique_name===$&&ie.instructor_name===a).length,Fe=$=>{switch($){case"watched":return r.jsx(jr,{className:"h-4 w-4 text-green-500"});case"failed":return r.jsx(lr,{className:"h-4 w-4 text-yellow-500"});default:return r.jsx(dj,{className:"h-4 w-4 text-muted-foreground"})}},ht=$=>{switch($){case"watched":return"Watched";case"failed":return"Failed";default:return"Pending"}};return r.jsxs(Qt,{children:[r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Video Library"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage curated BJJ technique videos"})]}),r.jsx(G,{className:"bg-gradient-to-r from-purple-500/10 to-blue-500/10 border-purple-500/20",children:r.jsxs(ee,{className:"pt-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Us,{className:"h-8 w-8 text-purple-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Video Knowledge System"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[L.totalVideos.toLocaleString()," total | "," ",r.jsxs("span",{className:"text-green-500",children:[L.withTranscript.toLocaleString()," watched"]})," | "," ",r.jsxs("span",{className:"text-yellow-500",children:[L.pending.toLocaleString()," pending"]})," | "," ",L.percentComplete.toFixed(1),"% complete"]}),L.totalTechniques>0&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[L.totalTechniques.toLocaleString()," techniques extracted"]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:z.isActive?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-sm text-muted-foreground mr-2",children:["Batch ",z.currentBatch,"/",z.totalBatches,z.estimatedTimeRemaining&&`  ~${z.estimatedTimeRemaining}`]}),r.jsx(Z,{size:"sm",variant:"outline",onClick:()=>C.mutate(),disabled:C.isPending,"data-testid":"button-pause",children:z.isPaused?r.jsx(Rr,{className:"h-4 w-4"}):r.jsx(ug,{className:"h-4 w-4"})}),r.jsx(Z,{size:"sm",variant:"destructive",onClick:()=>R.mutate(),disabled:R.isPending,"data-testid":"button-stop",children:r.jsx(QI,{className:"h-4 w-4"})})]}):r.jsxs(Z,{onClick:()=>O.mutate(),disabled:O.isPending||L.pending===0,"data-testid":"button-process-all",children:[O.isPending?r.jsx(De,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(Us,{className:"h-4 w-4 mr-2"}),"Process All Pending (",L.pending.toLocaleString(),")"]})})]}),z.isActive&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsx(aL,{value:z.processed/z.total*100,className:"h-2"}),r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[r.jsxs("span",{children:[z.processed.toLocaleString()," / ",z.total.toLocaleString()," processed"]}),r.jsxs("span",{className:"text-green-500",children:[z.succeeded," succeeded"]}),z.failed>0&&r.jsxs("span",{className:"text-red-500",children:[z.failed," failed"]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Videos"}),r.jsx(Ff,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-videos",children:S?r.jsx(De,{className:"h-6 w-6 animate-spin"}):((nt=ve.total_videos)==null?void 0:nt.toLocaleString())||"0"})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Instructors"}),r.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-instructors",children:S?r.jsx(De,{className:"h-6 w-6 animate-spin"}):((pt=ve.unique_instructors)==null?void 0:pt.toLocaleString())||"0"})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Techniques"}),r.jsx(uv,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-techniques",children:S?r.jsx(De,{className:"h-6 w-6 animate-spin"}):((Ot=ve.unique_techniques)==null?void 0:Ot.toLocaleString())||"0"})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Avg Quality"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-avg-quality",children:S?r.jsx(De,{className:"h-6 w-6 animate-spin"}):ve.avg_quality?Number(ve.avg_quality).toFixed(1):"0.0"})})]})]}),r.jsx(G,{children:r.jsx(ee,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search by title or instructor...",value:t,onChange:$=>n($.target.value),className:"pl-10","data-testid":"input-search"})]}),r.jsxs(et,{value:a,onValueChange:J,children:[r.jsx(Xe,{className:"w-[200px]","data-testid":"select-instructor",children:r.jsx(tt,{placeholder:"All Instructors"})}),r.jsxs(Ze,{children:[r.jsxs(ne,{value:"all",children:["All Instructors (",te.length,")"]}),te.map($=>r.jsxs(ne,{value:$,children:[$," (",Ae($),")"]},$))]})]}),r.jsxs(et,{value:l,onValueChange:me,children:[r.jsx(Xe,{className:"w-[200px]","data-testid":"select-technique",children:r.jsx(tt,{placeholder:"All Techniques"})}),r.jsxs(Ze,{children:[r.jsxs(ne,{value:"all",children:["All Techniques (",V.length,")"]}),V.map($=>r.jsxs(ne,{value:$,children:[$," (",Ke($),")"]},$))]})]}),r.jsxs(et,{value:d,onValueChange:u,children:[r.jsx(Xe,{className:"w-[160px]","data-testid":"select-knowledge-filter",children:r.jsx(tt,{placeholder:"Knowledge Status"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Status"}),r.jsx(ne,{value:"watched",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"h-3 w-3 text-green-500"}),"Watched"]})}),r.jsx(ne,{value:"pending",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dj,{className:"h-3 w-3 text-muted-foreground"}),"Pending"]})}),r.jsx(ne,{value:"failed",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"h-3 w-3 text-yellow-500"}),"Failed"]})})]})]}),r.jsxs(et,{value:f,onValueChange:$=>h($),children:[r.jsx(Xe,{className:"w-[140px]","data-testid":"select-sort",children:r.jsx(tt,{placeholder:"Sort By"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"newest",children:"Newest First"}),r.jsx(ne,{value:"oldest",children:"Oldest First"}),r.jsx(ne,{value:"quality",children:"Highest Quality"})]})]})]})})}),r.jsx("div",{children:T?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(De,{className:"h-8 w-8 animate-spin text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading videos..."})]}):U.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground",children:"No videos found"})}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:U.map($=>r.jsxs(G,{className:"overflow-hidden cursor-pointer hover-elevate transition-all","data-testid":`card-video-${$.id}`,onClick:()=>y($),children:[r.jsxs("div",{className:"relative aspect-video bg-muted",children:[r.jsx("img",{src:Ne($),alt:$.title,className:"w-full h-full object-cover",onError:Y=>{Y.target.src=`https://img.youtube.com/vi/${$.youtube_id}/mqdefault.jpg`}}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 hover:bg-black/30 transition-colors",children:r.jsx(Ff,{className:"h-12 w-12 text-white opacity-0 hover:opacity-100 transition-opacity"})}),$.duration&&r.jsx("span",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded",children:le($.duration)}),r.jsx("div",{className:"absolute top-2 left-2 bg-black/70 rounded-full p-1",title:`Knowledge: ${ht($.knowledge_status)}${$.techniques_count?` (${$.techniques_count} techniques)`:""}`,children:Fe($.knowledge_status)}),$.knowledge_status==="watched"&&$.techniques_count&&$.techniques_count>0&&r.jsxs(ae,{className:"absolute top-2 right-2 bg-green-500/90 hover:bg-green-600 text-white text-xs",onClick:Y=>{Y.stopPropagation(),de($)},children:[r.jsx(Bn,{className:"h-3 w-3 mr-1"}),$.techniques_count]})]}),r.jsxs(ee,{className:"p-3 space-y-2",children:[r.jsx("h3",{className:"font-medium text-sm line-clamp-2",title:$.title,children:$.title}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[r.jsx("span",{className:"truncate max-w-[120px]",title:$.instructor_name,children:$.instructor_name||"Unknown"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(qn,{className:"h-3 w-3 text-yellow-500"}),r.jsx("span",{children:$.quality_score?Number($.quality_score).toFixed(1):"-"})]})]}),$.technique_name&&r.jsx(ae,{variant:"secondary",className:"text-xs truncate max-w-full",children:$.technique_name})]})]},$.id))})})]}),r.jsx(Nn,{open:!!g,onOpenChange:$=>!$&&y(null),children:r.jsxs(mn,{className:"max-w-4xl p-0 overflow-hidden",children:[r.jsxs(pn,{className:"p-4 pb-2",children:[r.jsx(gn,{className:"pr-8 line-clamp-2",children:g==null?void 0:g.title}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground flex-wrap",children:[r.jsx("span",{children:g==null?void 0:g.instructor_name}),(g==null?void 0:g.technique_name)&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx(ae,{variant:"secondary",className:"text-xs",children:g==null?void 0:g.technique_name})]}),(g==null?void 0:g.quality_score)&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(qn,{className:"h-3 w-3 text-yellow-500"}),r.jsx("span",{children:Number(g.quality_score).toFixed(1)})]})]}),r.jsx("span",{children:""}),r.jsxs("div",{className:"flex items-center gap-1",children:[Fe(g==null?void 0:g.knowledge_status),r.jsx("span",{children:ht(g==null?void 0:g.knowledge_status)})]}),(g==null?void 0:g.knowledge_status)==="pending"&&r.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>g&&I.mutate(g.id),disabled:I.isPending,"data-testid":"button-process-video",children:[I.isPending?r.jsx(De,{className:"h-3 w-3 animate-spin"}):r.jsx(Us,{className:"h-3 w-3"}),r.jsx("span",{className:"ml-1",children:"Process"})]}),(g==null?void 0:g.knowledge_status)==="watched"&&r.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>g&&de(g),"data-testid":"button-view-knowledge",children:[r.jsx(Bn,{className:"h-3 w-3 mr-1"}),"View Knowledge"]})]})]}),r.jsx("div",{className:"aspect-video w-full",children:g&&r.jsx("iframe",{src:`https://www.youtube.com/embed/${g.youtube_id}?autoplay=1&rel=0`,title:g.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}),r.jsx(Nn,{open:j,onOpenChange:m,children:r.jsxs(mn,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[r.jsx(pn,{children:r.jsxs(gn,{className:"flex items-center gap-2",children:[r.jsx(Us,{className:"h-5 w-5 text-purple-500"}),"Extracted Knowledge"]})}),b&&b.techniques.length>0?r.jsx("div",{className:"space-y-6",children:b.techniques.map(($,Y)=>r.jsxs(G,{children:[r.jsxs(re,{className:"pb-2",children:[r.jsx(se,{className:"text-lg",children:$.techniqueName}),$.positionContext&&r.jsx(ae,{variant:"outline",children:$.positionContext})]}),r.jsxs(ee,{className:"space-y-4",children:[$.timestampStart&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx(Kr,{className:"h-3 w-3 inline mr-1"}),$.timestampStart,$.timestampEnd?` - ${$.timestampEnd}`:""]}),$.keyConcepts&&$.keyConcepts.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm mb-2",children:"Key Concepts"}),r.jsx("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:$.keyConcepts.map((ie,be)=>r.jsx("li",{children:ie},be))})]}),$.instructorTips&&$.instructorTips.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm mb-2 text-green-600",children:"Instructor Tips"}),r.jsx("ul",{className:"list-disc list-inside text-sm space-y-1",children:$.instructorTips.map((ie,be)=>r.jsxs("li",{className:"text-green-600/80",children:['"',ie,'"']},be))})]}),$.commonMistakes&&$.commonMistakes.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm mb-2 text-red-500",children:"Common Mistakes"}),r.jsx("ul",{className:"list-disc list-inside text-sm space-y-1",children:$.commonMistakes.map((ie,be)=>r.jsx("li",{className:"text-red-500/80",children:ie},be))})]}),$.fullSummary&&r.jsx("div",{className:"pt-2 border-t",children:r.jsx("p",{className:"text-sm text-muted-foreground italic",children:$.fullSummary})})]})]},Y))}):r.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No knowledge extracted yet"})]})})]})}const yy=ko("Browser",{web:()=>or(()=>import("./web-GGDevX-N.js"),[]).then(e=>new e.BrowserWeb)});function rje(e){if(!e)return 0;if(typeof e=="number")return e;const t=e.split(":").map(Number);return t.length===2?t[0]*60+t[1]:t.length===3?t[0]*3600+t[1]*60+t[2]:0}function Ll({videoId:e,startTime:t=0,title:n,instructor:s,onClose:i}){const a=rje(t),o=tn.isNativePlatform(),[l,c]=x.useState(!1);e&&e.length===11&&/^[a-zA-Z0-9_-]+$/.test(e);const d=a>0?`&start=${a}`:"",u=o?`/youtube-proxy.html?v=${e}${a>0?`&start=${a}`:""}`:`https://www.youtube.com/embed/${e}?rel=0&modestbranding=1&autoplay=1&playsinline=1${d}`,f=`https://www.youtube.com/watch?v=${e}${a>0?`&t=${a}s`:""}`,h=async()=>{try{await yy.open({url:f}),i()}catch(g){console.error("Failed to open browser:",g),window.open(f,"_blank")}};x.useEffect(()=>{const g=y=>{y.key==="Escape"&&i()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[i]);const p=g=>{g.target===g.currentTarget&&i()},v=()=>{c(!0)};return r.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4","data-testid":"video-player-modal",onClick:p,onTouchEnd:p,children:r.jsxs("div",{className:"w-full max-w-4xl",children:[r.jsxs("div",{className:"bg-sidebar p-4 rounded-t-lg flex justify-between items-center gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-foreground font-semibold truncate","data-testid":"video-player-title",children:n}),r.jsx("p",{className:"text-muted-foreground text-sm truncate","data-testid":"video-player-instructor",children:s})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[o&&r.jsx(Z,{variant:"ghost",size:"icon",onClick:h,title:"Open in YouTube","data-testid":"button-open-external",children:r.jsx($f,{className:"w-5 h-5"})}),r.jsx(Z,{variant:"ghost",size:"icon",onClick:i,"data-testid":"button-close-video",children:r.jsx(ys,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"relative bg-black",style:{paddingBottom:"56.25%"},children:l?r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white p-4 text-center",children:[r.jsx("p",{className:"mb-4",children:"Video playback unavailable in app."}),r.jsxs(Z,{onClick:h,variant:"outline",children:[r.jsx($f,{className:"w-4 h-4 mr-2"}),"Open in YouTube"]})]}):r.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:u,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,referrerPolicy:"strict-origin-when-cross-origin",onError:v,"data-testid":"video-iframe"})})]})})}function sje(){const{toast:e}=Je(),[t,n]=x.useState(null),[s,i]=x.useState(!1),{data:a}=pe({queryKey:["/api/admin/feedback/stats"],queryFn:()=>Ie("/api/admin/feedback/stats")}),{data:o=[]}=pe({queryKey:["/api/admin/feedback/flagged"],queryFn:()=>Ie("/api/admin/feedback/flagged")}),{data:l=[]}=pe({queryKey:["/api/admin/feedback/top-tier"],queryFn:()=>Ie("/api/admin/feedback/top-tier")}),c=qe({mutationFn:async f=>Ie(`/api/admin/feedback/remove-video/${f}`,"POST"),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/feedback/flagged"]}),_e.invalidateQueries({queryKey:["/api/admin/feedback/stats"]}),e({title:"Video removed",description:"Video has been removed from the library"})}}),d=qe({mutationFn:async f=>Ie(`/api/admin/feedback/approve-video/${f}`,"POST"),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/feedback/flagged"]}),e({title:"Video approved",description:"Video has been approved and returned to active status"})}}),u=f=>{n(f),i(!0)};return r.jsx(Qt,{children:r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Feedback Analytics"}),r.jsx("p",{className:"text-muted-foreground",children:"Monitor user feedback and manage video quality"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(G,{"data-testid":"card-total-feedback",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Feedback"}),r.jsx(Qi,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalFeedback)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All time user feedback"})]})]}),r.jsxs(G,{"data-testid":"card-helpful-ratio",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Avg Helpful Ratio"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold",children:a!=null&&a.avgHelpfulRatio?`${Math.round(a.avgHelpfulRatio*100)}%`:"0%"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Videos with 50+ votes"})]})]}),r.jsxs(G,{"data-testid":"card-videos-removed",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Videos Removed"}),r.jsx(wi,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(a==null?void 0:a.videosRemoved)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Due to quality issues"})]})]}),r.jsxs(G,{"data-testid":"card-top-tier",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Top Tier Videos"}),r.jsx(qu,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(a==null?void 0:a.topTierVideos)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"85%+ helpful, 100+ votes"})]})]})]}),r.jsxs(Il,{defaultValue:"flagged",className:"space-y-4",children:[r.jsxs(Eo,{children:[r.jsxs(an,{value:"flagged","data-testid":"tab-flagged",children:[r.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Flagged Videos (",o.length,")"]}),r.jsxs(an,{value:"top-tier","data-testid":"tab-top-tier",children:[r.jsx(qu,{className:"h-4 w-4 mr-2"}),"Top Tier (",l.length,")"]})]}),r.jsx(on,{value:"flagged",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Flagged for Review"}),r.jsx(ze,{children:"Videos with context issues (wrong recommendation, too advanced/basic) - Review and take action"})]}),r.jsx(ee,{children:o.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(jr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No flagged videos - all content looks good!"})]}):r.jsx("div",{className:"space-y-4",children:o.map(f=>r.jsx("div",{className:"flex items-start gap-4 p-4 border rounded-lg","data-testid":`flagged-video-${f.id}`,children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:f.title}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.instructor,"  ",f.technique_name]})]}),r.jsxs(ae,{variant:"outline",className:"ml-2",children:[Math.round((f.helpful_ratio||0)*100),"% helpful"]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Qi,{className:"h-3 w-3"}),f.total_votes||0," votes"]}),r.jsxs("span",{children:["Quality: ",f.quality_score||0,"/10"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{size:"sm",variant:"outline",onClick:()=>u(f),"data-testid":`button-play-${f.id}`,children:"Play Video"}),r.jsxs(Z,{size:"sm",variant:"default",onClick:()=>d.mutate(f.id),disabled:d.isPending,"data-testid":`button-approve-${f.id}`,children:[r.jsx(jr,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(Z,{size:"sm",variant:"destructive",onClick:()=>{confirm(`Remove "${f.title}" from library?`)&&c.mutate(f.id)},disabled:c.isPending,"data-testid":`button-remove-${f.id}`,children:[r.jsx(Si,{className:"h-4 w-4 mr-1"}),"Remove"]})]})]})},f.id))})})]})}),r.jsx(on,{value:"top-tier",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Top Tier Videos"}),r.jsx(ze,{children:"Highest quality content (85%+ helpful ratio, 100+ votes)"})]}),r.jsx(ee,{children:l.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(qu,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No top tier videos yet - need 100+ votes and 85%+ helpful ratio"})]}):r.jsx("div",{className:"space-y-4",children:l.map(f=>r.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg bg-accent/10","data-testid":`top-tier-video-${f.id}`,children:[r.jsx(qu,{className:"h-6 w-6 text-primary mt-1"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:f.title}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.instructor,"  ",f.technique_name]})]}),r.jsxs(ae,{variant:"default",className:"ml-2",children:[Math.round((f.helpful_ratio||0)*100),"% helpful"]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Qi,{className:"h-3 w-3"}),f.total_votes||0," votes"]}),r.jsxs("span",{children:["Quality: ",f.quality_score||0,"/10"]})]}),r.jsx(Z,{size:"sm",variant:"outline",onClick:()=>u(f),"data-testid":`button-play-top-${f.id}`,children:"Play Video"})]})]},f.id))})})]})})]}),s&&t&&r.jsx(Ll,{videoId:t.youtube_video_id,startTime:t.key_detail_timestamp,title:t.title||t.technique_name,instructor:t.instructor,onClose:()=>{i(!1),n(null)}})]})})}function ije(e,t){return x.useReducer((n,s)=>t[n][s]??n,e)}var i2="ScrollArea",[oL,oSe]=Mr(i2),[aje,Ns]=oL(i2),lL=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,c]=x.useState(null),[d,u]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState(null),[g,y]=x.useState(null),[j,m]=x.useState(0),[b,N]=x.useState(0),[w,S]=x.useState(!1),[k,P]=x.useState(!1),E=ct(t,F=>c(F)),_=Zh(i);return r.jsx(aje,{scope:n,type:s,dir:_,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:u,content:f,onContentChange:h,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:w,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:k,onScrollbarYEnabledChange:P,onCornerWidthChange:m,onCornerHeightChange:N,children:r.jsx(He.div,{dir:_,...o,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});lL.displayName=i2;var cL="ScrollAreaViewport",dL=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:i,...a}=e,o=Ns(cL,n),l=x.useRef(null),c=ct(t,l,o.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),r.jsx(He.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});dL.displayName=cL;var Ti="ScrollAreaScrollbar",a2=x.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=Ns(Ti,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return x.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?r.jsx(oje,{...s,ref:t,forceMount:n}):i.type==="scroll"?r.jsx(lje,{...s,ref:t,forceMount:n}):i.type==="auto"?r.jsx(uL,{...s,ref:t,forceMount:n}):i.type==="always"?r.jsx(o2,{...s,ref:t}):null});a2.displayName=Ti;var oje=x.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=Ns(Ti,e.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),r.jsx(vs,{present:n||a,children:r.jsx(uL,{"data-state":a?"visible":"hidden",...s,ref:t})})}),lje=x.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=Ns(Ti,e.__scopeScrollArea),a=e.orientation==="horizontal",o=jy(()=>c("SCROLL_END"),100),[l,c]=ije("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,i.scrollHideDelay,c]),x.useEffect(()=>{const d=i.viewport,u=a?"scrollLeft":"scrollTop";if(d){let f=d[u];const h=()=>{const p=d[u];f!==p&&(c("SCROLL"),o()),f=p};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[i.viewport,a,c,o]),r.jsx(vs,{present:n||l!=="hidden",children:r.jsx(o2,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:$e(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:$e(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),uL=x.forwardRef((e,t)=>{const n=Ns(Ti,e.__scopeScrollArea),{forceMount:s,...i}=e,[a,o]=x.useState(!1),l=e.orientation==="horizontal",c=jy(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:u)}},10);return Md(n.viewport,c),Md(n.content,c),r.jsx(vs,{present:s||a,children:r.jsx(o2,{"data-state":a?"visible":"hidden",...i,ref:t})})}),o2=x.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,i=Ns(Ti,e.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[l,c]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=gL(l.viewport,l.content),u={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>a.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,p){return mje(h,o.current,l,p)}return n==="horizontal"?r.jsx(cje,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const h=i.viewport.scrollLeft,p=eO(h,l,i.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=f(h,i.dir))}}):n==="vertical"?r.jsx(dje,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const h=i.viewport.scrollTop,p=eO(h,l);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=f(h))}}):null}),cje=x.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=Ns(Ti,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),d=ct(t,c,a.onScrollbarXChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(hL,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":by(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(a.viewport){const h=a.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),vL(h,f)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ix(o.paddingLeft),paddingEnd:Ix(o.paddingRight)}})}})}),dje=x.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=Ns(Ti,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),d=ct(t,c,a.onScrollbarYChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(hL,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":by(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(a.viewport){const h=a.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),vL(h,f)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ix(o.paddingTop),paddingEnd:Ix(o.paddingBottom)}})}})}),[uje,fL]=oL(Ti),hL=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:f,...h}=e,p=Ns(Ti,n),[v,g]=x.useState(null),y=ct(t,E=>g(E)),j=x.useRef(null),m=x.useRef(""),b=p.viewport,N=s.content-s.viewport,w=yn(u),S=yn(c),k=jy(f,10);function P(E){if(j.current){const _=E.clientX-j.current.left,F=E.clientY-j.current.top;d({x:_,y:F})}}return x.useEffect(()=>{const E=_=>{const F=_.target;(v==null?void 0:v.contains(F))&&w(_,N)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[b,v,N,w]),x.useEffect(S,[s,S]),Md(v,k),Md(p.content,k),r.jsx(uje,{scope:n,scrollbar:v,hasThumb:i,onThumbChange:yn(a),onThumbPointerUp:yn(o),onThumbPositionChange:S,onThumbPointerDown:yn(l),children:r.jsx(He.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:$e(e.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),j.current=v.getBoundingClientRect(),m.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(E))}),onPointerMove:$e(e.onPointerMove,P),onPointerUp:$e(e.onPointerUp,E=>{const _=E.target;_.hasPointerCapture(E.pointerId)&&_.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=m.current,p.viewport&&(p.viewport.style.scrollBehavior=""),j.current=null})})})}),_x="ScrollAreaThumb",mL=x.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=fL(_x,e.__scopeScrollArea);return r.jsx(vs,{present:n||i.hasThumb,children:r.jsx(fje,{ref:t,...s})})}),fje=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...i}=e,a=Ns(_x,n),o=fL(_x,n),{onThumbPositionChange:l}=o,c=ct(t,f=>o.onThumbChange(f)),d=x.useRef(void 0),u=jy(()=>{d.current&&(d.current(),d.current=void 0)},100);return x.useEffect(()=>{const f=a.viewport;if(f){const h=()=>{if(u(),!d.current){const p=pje(f,l);d.current=p,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[a.viewport,u,l]),r.jsx(He.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:$e(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),v=f.clientX-p.left,g=f.clientY-p.top;o.onThumbPointerDown({x:v,y:g})}),onPointerUp:$e(e.onPointerUp,o.onThumbPointerUp)})});mL.displayName=_x;var l2="ScrollAreaCorner",pL=x.forwardRef((e,t)=>{const n=Ns(l2,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(hje,{...e,ref:t}):null});pL.displayName=l2;var hje=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,i=Ns(l2,n),[a,o]=x.useState(0),[l,c]=x.useState(0),d=!!(a&&l);return Md(i.scrollbarX,()=>{var f;const u=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),Md(i.scrollbarY,()=>{var f;const u=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),d?r.jsx(He.div,{...s,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ix(e){return e?parseInt(e,10):0}function gL(e,t){const n=e/t;return isNaN(n)?0:n}function by(e){const t=gL(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function mje(e,t,n,s="ltr"){const i=by(n),a=i/2,o=t||a,l=i-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,f=s==="ltr"?[0,u]:[u*-1,0];return xL([c,d],f)(e)}function eO(e,t,n="ltr"){const s=by(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-s,c=n==="ltr"?[0,o]:[o*-1,0],d=Gf(e,c);return xL([0,o],[0,l])(d)}function xL(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function vL(e,t){return e>0&&e<t}var pje=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,s=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(s)};function jy(e,t){const n=yn(e),s=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),x.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function Md(e,t){const n=yn(t);Xn(()=>{let s=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(s),i.unobserve(e)}}},[e,n])}var yL=lL,gje=dL,xje=pL;const ul=x.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(yL,{ref:s,className:Ce("relative overflow-hidden",e),...n,children:[r.jsx(gje,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(bL,{}),r.jsx(xje,{})]}));ul.displayName=yL.displayName;const bL=x.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(a2,{ref:s,orientation:t,className:Ce("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(mL,{className:"relative flex-1 rounded-full bg-border"})}));bL.displayName=a2.displayName;function $t(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ga(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function vje(e,t){const n=$t(e);return isNaN(t)?ga(e,NaN):(n.setDate(n.getDate()+t),n)}const jL=6048e5,yje=864e5,op=43200,tO=1440;let bje={};function xm(){return bje}function Dh(e,t){var l,c,d,u;const n=xm(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=$t(e),a=i.getDay(),o=(a<s?7:0)+a-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Rx(e){return Dh(e,{weekStartsOn:1})}function wL(e){const t=$t(e),n=t.getFullYear(),s=ga(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=Rx(s),a=ga(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Rx(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Mx(e){const t=$t(e);return t.setHours(0,0,0,0),t}function Fx(e){const t=$t(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function c2(e,t){const n=Mx(e),s=Mx(t),i=+n-Fx(n),a=+s-Fx(s);return Math.round((i-a)/yje)}function jje(e){const t=wL(e),n=ga(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Rx(n)}function Fp(e,t){const n=$t(e),s=$t(t),i=n.getTime()-s.getTime();return i<0?-1:i>0?1:i}function d2(e){return ga(e,Date.now())}function NL(e,t){const n=Mx(e),s=Mx(t);return+n==+s}function wje(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function SL(e){if(!wje(e)&&typeof e!="number")return!1;const t=$t(e);return!isNaN(Number(t))}function Nje(e,t){const n=$t(e),s=$t(t),i=n.getFullYear()-s.getFullYear(),a=n.getMonth()-s.getMonth();return i*12+a}function Sje(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function kje(e,t){return+$t(e)-+$t(t)}function Cje(e){const t=$t(e);return t.setHours(23,59,59,999),t}function Aje(e){const t=$t(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Pje(e){const t=$t(e);return+Cje(t)==+Aje(t)}function Eje(e,t){const n=$t(e),s=$t(t),i=Fp(n,s),a=Math.abs(Nje(n,s));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let l=Fp(n,s)===-i;Pje($t(e))&&a===1&&Fp(e,s)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function Tje(e,t,n){const s=kje(e,t)/1e3;return Sje(n==null?void 0:n.roundingMethod)(s)}function Oje(e){const t=$t(e),n=ga(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const _je={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ije=(e,t,n)=>{let s;const i=_je[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Gb(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Rje={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Mje={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fje={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$je={date:Gb({formats:Rje,defaultWidth:"full"}),time:Gb({formats:Mje,defaultWidth:"full"}),dateTime:Gb({formats:Fje,defaultWidth:"full"})},Dje={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Lje=(e,t,n,s)=>Dje[e];function Iu(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const Bje={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zje={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qje={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Uje={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Vje={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wje={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hje=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Kje={ordinalNumber:Hje,era:Iu({values:Bje,defaultWidth:"wide"}),quarter:Iu({values:zje,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Iu({values:qje,defaultWidth:"wide"}),day:Iu({values:Uje,defaultWidth:"wide"}),dayPeriod:Iu({values:Vje,defaultWidth:"wide",formattingValues:Wje,defaultFormattingWidth:"wide"})};function Ru(e){return(t,n={})=>{const s=n.width,i=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Yje(l,f=>f.test(o)):Gje(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function Gje(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Yje(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Qje(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const i=s[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const Jje=/^(\d+)(th|st|nd|rd)?/i,Xje=/\d+/i,Zje={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ewe={any:[/^b/i,/^(a|c)/i]},twe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nwe={any:[/1/i,/2/i,/3/i,/4/i]},rwe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},swe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iwe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},awe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},owe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lwe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cwe={ordinalNumber:Qje({matchPattern:Jje,parsePattern:Xje,valueCallback:e=>parseInt(e,10)}),era:Ru({matchPatterns:Zje,defaultMatchWidth:"wide",parsePatterns:ewe,defaultParseWidth:"any"}),quarter:Ru({matchPatterns:twe,defaultMatchWidth:"wide",parsePatterns:nwe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ru({matchPatterns:rwe,defaultMatchWidth:"wide",parsePatterns:swe,defaultParseWidth:"any"}),day:Ru({matchPatterns:iwe,defaultMatchWidth:"wide",parsePatterns:awe,defaultParseWidth:"any"}),dayPeriod:Ru({matchPatterns:owe,defaultMatchWidth:"any",parsePatterns:lwe,defaultParseWidth:"any"})},kL={code:"en-US",formatDistance:Ije,formatLong:$je,formatRelative:Lje,localize:Kje,match:cwe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dwe(e){const t=$t(e);return c2(t,Oje(t))+1}function uwe(e){const t=$t(e),n=+Rx(t)-+jje(t);return Math.round(n/jL)+1}function CL(e,t){var u,f,h,p;const n=$t(e),s=n.getFullYear(),i=xm(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=ga(e,0);o.setFullYear(s+1,0,a),o.setHours(0,0,0,0);const l=Dh(o,t),c=ga(e,0);c.setFullYear(s,0,a),c.setHours(0,0,0,0);const d=Dh(c,t);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function fwe(e,t){var l,c,d,u;const n=xm(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,i=CL(e,t),a=ga(e,0);return a.setFullYear(i,0,s),a.setHours(0,0,0,0),Dh(a,t)}function hwe(e,t){const n=$t(e),s=+Dh(n,t)-+fwe(n,t);return Math.round(s/jL)+1}function It(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const Aa={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return It(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):It(n+1,2)},d(e,t){return It(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return It(e.getHours()%12||12,t.length)},H(e,t){return It(e.getHours(),t.length)},m(e,t){return It(e.getMinutes(),t.length)},s(e,t){return It(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return It(i,t.length)}},Zl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nO={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return Aa.y(e,t)},Y:function(e,t,n,s){const i=CL(e,s),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return It(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):It(a,t.length)},R:function(e,t){const n=wL(e);return It(n,t.length)},u:function(e,t){const n=e.getFullYear();return It(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return It(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return It(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return Aa.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return It(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const i=hwe(e,s);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):It(i,t.length)},I:function(e,t,n){const s=uwe(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):It(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Aa.d(e,t)},D:function(e,t,n){const s=dwe(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):It(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return It(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return It(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),i=s===0?7:s;switch(t){case"i":return String(i);case"ii":return It(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let i;switch(s===12?i=Zl.noon:s===0?i=Zl.midnight:i=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let i;switch(s>=17?i=Zl.evening:s>=12?i=Zl.afternoon:s>=4?i=Zl.morning:i=Zl.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Aa.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Aa.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):It(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):It(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Aa.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Aa.s(e,t)},S:function(e,t){return Aa.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return sO(s);case"XXXX":case"XX":return Vo(s);case"XXXXX":case"XXX":default:return Vo(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return sO(s);case"xxxx":case"xx":return Vo(s);case"xxxxx":case"xxx":default:return Vo(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+rO(s,":");case"OOOO":default:return"GMT"+Vo(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+rO(s,":");case"zzzz":default:return"GMT"+Vo(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return It(s,t.length)},T:function(e,t,n){const s=e.getTime();return It(s,t.length)}};function rO(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=Math.trunc(s/60),a=s%60;return a===0?n+String(i):n+String(i)+t+It(a,2)}function sO(e,t){return e%60===0?(e>0?"-":"+")+It(Math.abs(e)/60,2):Vo(e,t)}function Vo(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=It(Math.trunc(s/60),2),a=It(s%60,2);return n+i+t+a}const iO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},AL=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},mwe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return iO(e,t);let a;switch(s){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",iO(s,t)).replace("{{time}}",AL(i,t))},pwe={p:AL,P:mwe},gwe=/^D+$/,xwe=/^Y+$/,vwe=["D","DD","YY","YYYY"];function ywe(e){return gwe.test(e)}function bwe(e){return xwe.test(e)}function jwe(e,t,n){const s=wwe(e,t,n);if(console.warn(s),vwe.includes(e))throw new RangeError(s)}function wwe(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Nwe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Swe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kwe=/^'([^]*?)'?$/,Cwe=/''/g,Awe=/[a-zA-Z]/;function br(e,t,n){var u,f,h,p;const s=xm(),i=s.locale??kL,a=s.firstWeekContainsDate??((f=(u=s.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,o=s.weekStartsOn??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,l=$t(e);if(!SL(l))throw new RangeError("Invalid time value");let c=t.match(Swe).map(v=>{const g=v[0];if(g==="p"||g==="P"){const y=pwe[g];return y(v,i.formatLong)}return v}).join("").match(Nwe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const g=v[0];if(g==="'")return{isToken:!1,value:Pwe(v)};if(nO[g])return{isToken:!0,value:v};if(g.match(Awe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const g=v.value;(bwe(g)||ywe(g))&&jwe(g,t,String(e));const y=nO[g[0]];return y(l,g,i.localize,d)}).join("")}function Pwe(e){const t=e.match(kwe);return t?t[1].replace(Cwe,"'"):e}function Ewe(e,t,n){const s=xm(),i=(n==null?void 0:n.locale)??s.locale??kL,a=2520,o=Fp(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,d;o>0?(c=$t(t),d=$t(e)):(c=$t(e),d=$t(t));const u=Tje(d,c),f=(Fx(d)-Fx(c))/1e3,h=Math.round((u-f)/60);let p;if(h<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,l):u<10?i.formatDistance("lessThanXSeconds",10,l):u<20?i.formatDistance("lessThanXSeconds",20,l):u<40?i.formatDistance("halfAMinute",0,l):u<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):h===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",h,l);if(h<45)return i.formatDistance("xMinutes",h,l);if(h<90)return i.formatDistance("aboutXHours",1,l);if(h<tO){const v=Math.round(h/60);return i.formatDistance("aboutXHours",v,l)}else{if(h<a)return i.formatDistance("xDays",1,l);if(h<op){const v=Math.round(h/tO);return i.formatDistance("xDays",v,l)}else if(h<op*2)return p=Math.round(h/op),i.formatDistance("aboutXMonths",p,l)}if(p=Eje(d,c),p<12){const v=Math.round(h/op);return i.formatDistance("xMonths",v,l)}else{const v=p%12,g=Math.trunc(p/12);return v<3?i.formatDistance("aboutXYears",g,l):v<9?i.formatDistance("overXYears",g,l):i.formatDistance("almostXYears",g+1,l)}}function Hi(e,t){return Ewe(e,d2(e),t)}function Twe(e){return NL(e,d2(e))}function Owe(e,t){return vje(e,-t)}function _we(e){return NL(e,Owe(d2(e),1))}function Iwe(){const{toast:e}=Je(),[t,n]=x.useState(null),[s,i]=x.useState(!1),[a,o]=x.useState(!1),[l,c]=x.useState(!1),[d,u]=x.useState(!1),[f,h]=x.useState(!1),[p,v]=x.useState(!1),{data:g,isLoading:y}=pe({queryKey:["/api/admin/meta/stats"],queryFn:()=>Ie("/api/admin/meta/stats")}),{data:j,isLoading:m}=pe({queryKey:["/api/admin/meta/trending"],queryFn:()=>Ie("/api/admin/meta/trending")}),{data:b,isLoading:N,refetch:w}=pe({queryKey:["/api/admin/meta/priorities"],queryFn:()=>Ie("/api/admin/meta/priorities")}),{data:S,isLoading:k}=pe({queryKey:["/api/admin/meta/requests"],queryFn:()=>Ie("/api/admin/meta/requests")}),{data:P,isLoading:E}=pe({queryKey:["/api/admin/meta/volume-stats"],queryFn:()=>Ie("/api/admin/meta/volume-stats")}),{data:_,isLoading:F}=pe({queryKey:["/api/admin/meta/unmet-requests"],queryFn:()=>Ie("/api/admin/meta/unmet-requests")}),{data:A,isLoading:T}=pe({queryKey:["/api/admin/meta/all-techniques"],queryFn:()=>Ie("/api/admin/meta/all-techniques"),enabled:d||p}),{data:M,isLoading:O,refetch:C}=pe({queryKey:["/api/admin/demand-curation/status"],queryFn:()=>Ie("/api/admin/demand-curation/status")}),R=async()=>{o(!0);try{const D=await Ie("/api/admin/demand-curation/toggle","POST",{enabled:!(M!=null&&M.enabled)});D.success&&(e({title:D.enabled?"Demand Curation Enabled":"Demand Curation Disabled",description:D.enabled?"Monday 3:15 AM runs will now use demand-driven curation":"Monday runs will use regular instructor-based curation"}),C())}catch(D){e({title:"Toggle Failed",description:D.message||"Failed to toggle demand curation",variant:"destructive"})}finally{o(!1)}},I=async()=>{c(!0);try{(await Ie("/api/admin/demand-curation/run","POST",{})).success&&e({title:"Demand Curation Started",description:"Check email for results when complete"})}catch(D){e({title:"Run Failed",description:D.message||"Failed to start demand curation",variant:"destructive"})}finally{c(!1)}},B=async D=>{n(D);try{const te=await Ie("/api/admin/meta/curate","POST",{technique:D,maxResults:10});if(te.success){const V=te.searchesPerformed?` (${te.searchesPerformed} searches)`:"";e({title:"Curation Complete",description:`Added ${te.curatedCount} videos for "${D.replace(/_/g," ")}"${V}`}),w()}}catch(te){e({title:"Curation Failed",description:te.message,variant:"destructive"})}finally{n(null)}},H=async()=>{i(!0);try{await Ie("/api/admin/meta/analyze","POST"),e({title:"Analysis Started",description:"Meta analysis running in background"})}catch(D){e({title:"Analysis Failed",description:D.message,variant:"destructive"})}finally{i(!1)}},Q=D=>{const te={hot:{variant:"destructive",icon:jn,label:"HOT"},rising:{variant:"default",icon:jn,label:"RISING"},cooling:{variant:"secondary",icon:vq,label:"COOLING"},stable:{variant:"outline",icon:Ds,label:"STABLE"}},V=te[D]||te.stable,J=V.icon;return r.jsxs(ae,{variant:V.variant,className:"gap-1",children:[r.jsx(J,{className:"h-3 w-3"}),V.label]})};return r.jsxs(Qt,{children:[r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Meta Insights Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Automated technique trend tracking and curation prioritization"})]}),r.jsxs(Z,{onClick:H,disabled:s,"data-testid":"button-run-analysis",children:[r.jsx(Ds,{className:"mr-2 h-4 w-4"}),s?"Analyzing...":"Run Analysis"]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{className:"cursor-pointer hover-elevate transition-colors",onClick:()=>u(!0),"data-testid":"card-techniques-tracked",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 gap-2 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Techniques Tracked"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Nr,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"})]})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-techniques-tracked",children:y?"...":(g==null?void 0:g.totalTechniquesTracked)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to view all"})]})]}),r.jsxs(G,{className:"cursor-pointer hover-elevate transition-colors",onClick:()=>h(!0),"data-testid":"card-user-requests",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 gap-2 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"User Requests (7d)"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ds,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"})]})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-user-requests",children:y?"...":(g==null?void 0:g.userRequestsLast7Days)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to view details"})]})]}),r.jsxs(G,{className:"cursor-pointer hover-elevate transition-colors",onClick:()=>v(!0),"data-testid":"card-needs-curation",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 gap-2 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Need Curation"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lr,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"})]})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-needs-curation",children:y?"...":(g==null?void 0:g.techniquesNeedingCuration)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to view techniques"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 gap-2 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Videos in Library"}),r.jsx(Ff,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-videos",children:y?"...":(g==null?void 0:g.totalVideosInLibrary)||0})})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Requests Today"}),r.jsx(Ds,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-requests-today",children:E?"...":(P==null?void 0:P.today)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"This Week"}),r.jsx(Ds,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-requests-week",children:E?"...":(P==null?void 0:P.thisWeek)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"This Month"}),r.jsx(Ds,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-requests-month",children:E?"...":(P==null?void 0:P.thisMonth)||0})})]}),r.jsxs(G,{className:"border-destructive/50",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Unmet Requests"}),r.jsx(lr,{className:"h-4 w-4 text-destructive"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold text-destructive","data-testid":"text-unmet-requests",children:E?"...":(P==null?void 0:P.unmetRequests)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"No videos returned"})]})]})]}),r.jsxs(G,{className:"border-primary/30",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 gap-4 pb-4",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xl",children:""}),"Weekly Demand-Driven Curation"]}),r.jsx(ze,{children:"Runs every Monday at 3:15 AM EST to fill content gaps based on user requests"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Z,{variant:M!=null&&M.enabled?"default":"outline",size:"sm",onClick:R,disabled:a||O,"data-testid":"button-toggle-demand-curation",children:a?"Updating...":M!=null&&M.enabled?"Enabled":"Disabled"}),r.jsx(Z,{variant:"outline",size:"sm",onClick:I,disabled:l||!(M!=null&&M.enabled),"data-testid":"button-run-demand-curation",children:l?"Running...":"Run Now"})]})]}),(M==null?void 0:M.lastResult)&&r.jsx(ee,{className:"pt-0",children:r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[r.jsxs("span",{children:["Last run: ",M.lastRunAt?Hi(new Date(M.lastRunAt),{addSuffix:!0}):"Never"]}),r.jsx("span",{children:"|"}),r.jsxs("span",{children:["Techniques: ",M.lastResult.techniquesAnalyzed]}),r.jsx("span",{children:"|"}),r.jsxs("span",{className:"text-green-500",children:["Videos added: ",M.lastResult.totalVideosAdded]}),M.lastResult.stillUnmet.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"|"}),r.jsxs("span",{className:"text-amber-500",children:["Still unmet: ",M.lastResult.stillUnmet.length]})]})]})})]}),r.jsxs(Il,{defaultValue:"trending",className:"space-y-4",children:[r.jsxs(Eo,{children:[r.jsx(an,{value:"trending","data-testid":"tab-trending",children:"Trending Techniques"}),r.jsx(an,{value:"priorities","data-testid":"tab-priorities",children:"Curation Priorities"}),r.jsx(an,{value:"requests","data-testid":"tab-requests",children:"User Requests"}),r.jsx(an,{value:"unmet","data-testid":"tab-unmet",children:"Unmet Requests"})]}),r.jsx(on,{value:"trending",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Trending Techniques"}),r.jsx(ze,{children:"Techniques with hot or rising meta status based on user requests and competition data"})]}),r.jsx(ee,{children:m?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):((j==null?void 0:j.techniques.length)||0)===0?r.jsxs("div",{className:"text-center py-8 space-y-2",children:[r.jsx("p",{className:"text-muted-foreground",children:"No trending techniques yet"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:'Techniques become "trending" when they have HOT or RISING status based on user demand scores. Click "Run Analysis" to update technique statuses based on recent user requests.'})]}):r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Technique"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Meta Score"}),r.jsx(X,{children:"User Score"}),r.jsx(X,{children:"Comp Score"}),r.jsx(X,{children:"Videos"}),r.jsx(X,{children:"Coverage"})]})}),r.jsx(wt,{children:j==null?void 0:j.techniques.map(D=>r.jsxs(ke,{children:[r.jsx(W,{className:"font-medium capitalize",children:D.techniqueName}),r.jsx(W,{children:Q(D.metaStatus)}),r.jsx(W,{children:Number(D.overallMetaScore).toFixed(1)}),r.jsx(W,{children:Number(D.userRequestScore).toFixed(1)}),r.jsx(W,{children:Number(D.competitionMetaScore).toFixed(1)}),r.jsx(W,{children:D.videosInLibrary}),r.jsx(W,{children:D.coverageAdequate?r.jsx(ae,{variant:"outline",children:"Adequate"}):r.jsx(ae,{variant:"secondary",children:"Needs More"})})]},D.techniqueName))})]})})]})}),r.jsx(on,{value:"priorities",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Curation Priorities"}),r.jsx(ze,{children:"High-priority techniques needing video curation"})]}),r.jsx(ee,{children:N?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):((b==null?void 0:b.priorities.length)||0)===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No priorities at the moment"}):r.jsx("div",{className:"space-y-4",children:b==null?void 0:b.priorities.map(D=>{var te;return r.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold capitalize text-lg",children:D.techniqueName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Priority: ",D.curationPriority,"/10 | Meta Score: ",Number(D.overallMetaScore).toFixed(1)," | Videos: ",D.videosInLibrary]})]}),r.jsx(Z,{size:"sm",onClick:()=>B(D.techniqueName),disabled:t===D.techniqueName,"data-testid":`button-curate-${D.techniqueName}`,children:t===D.techniqueName?"Curating...":"Curate Now"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(te=D.suggestedSearches)==null?void 0:te.map((V,J)=>r.jsx(ae,{variant:"outline",className:"text-xs",children:V},J))})]},D.techniqueName)})})})]})}),r.jsx(on,{value:"requests",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Recent User Technique Requests"}),r.jsx(ze,{children:"Techniques users are asking about in chat"})]}),r.jsx(ee,{children:k?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):((S==null?void 0:S.requests.length)||0)===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No requests yet"}):r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"User"}),r.jsx(X,{children:"Technique"}),r.jsx(X,{children:"Belt"}),r.jsx(X,{children:"Gi/NoGi"}),r.jsx(X,{children:"Context"}),r.jsx(X,{children:"When"})]})}),r.jsx(wt,{children:S==null?void 0:S.requests.slice(0,20).map(D=>r.jsxs(ke,{"data-testid":`row-request-${D.id}`,children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium text-sm",children:D.userName||"Unknown"}),r.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[180px]",children:D.userEmail||D.userId})]})}),r.jsx(W,{className:"font-medium capitalize",children:D.techniqueMentioned}),r.jsx(W,{children:D.beltLevel||"-"}),r.jsx(W,{children:D.giPreference||"-"}),r.jsx(W,{className:"max-w-md truncate text-sm text-muted-foreground",children:D.requestContext}),r.jsx(W,{className:"text-sm text-muted-foreground",children:Hi(new Date(D.requestedAt),{addSuffix:!0})})]},D.id))})]})})]})}),r.jsx(on,{value:"unmet",className:"space-y-4",children:r.jsxs(G,{className:"border-destructive/30",children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"h-5 w-5 text-destructive"}),"Unmet Requests - Content Gaps"]}),r.jsx(ze,{children:"User questions where Professor OS had no video recommendations - immediate curation opportunities"})]}),r.jsx(ee,{children:F?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):((_==null?void 0:_.requests.length)||0)===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No unmet requests - all user questions have video coverage!"}):r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"User"}),r.jsx(X,{children:"Technique"}),r.jsx(X,{children:"Belt"}),r.jsx(X,{children:"Question"}),r.jsx(X,{children:"When"}),r.jsx(X,{children:"Action"})]})}),r.jsx(wt,{children:_==null?void 0:_.requests.slice(0,30).map(D=>r.jsxs(ke,{"data-testid":`row-unmet-${D.id}`,children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium text-sm",children:D.userName||"Unknown"}),r.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[150px]",children:D.userEmail||D.userId})]})}),r.jsx(W,{className:"font-medium capitalize",children:D.techniqueMentioned}),r.jsx(W,{children:D.beltLevel||"-"}),r.jsx(W,{className:"max-w-sm truncate text-sm text-muted-foreground",children:D.requestContext}),r.jsx(W,{className:"text-sm text-muted-foreground",children:Hi(new Date(D.requestedAt),{addSuffix:!0})}),r.jsx(W,{children:r.jsx(Z,{size:"sm",variant:"outline",onClick:()=>B(D.techniqueMentioned),disabled:t===D.techniqueMentioned,"data-testid":`button-curate-unmet-${D.id}`,children:t===D.techniqueMentioned?"Curating...":"Curate"})})]},D.id))})]})})]})})]})]}),r.jsx(Nn,{open:d,onOpenChange:u,children:r.jsxs(mn,{className:"max-w-3xl max-h-[80vh]","data-testid":"modal-techniques-tracked",children:[r.jsxs(pn,{children:[r.jsxs(gn,{"data-testid":"text-modal-techniques-title",children:["All Tracked Techniques (",(g==null?void 0:g.totalTechniquesTracked)||0,")"]}),r.jsx(zn,{children:"Techniques being monitored for user demand and curation needs"})]}),r.jsx(ul,{className:"h-[60vh]",children:T?r.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-modal-loading",children:"Loading..."}):r.jsxs(bt,{"data-testid":"table-tracked-techniques",children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Technique"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Score"}),r.jsx(X,{children:"Videos"}),r.jsx(X,{children:"Needs Curation"})]})}),r.jsx(wt,{children:A==null?void 0:A.techniques.map(D=>r.jsxs(ke,{"data-testid":`row-technique-${D.techniqueName}`,children:[r.jsx(W,{className:"font-medium capitalize","data-testid":`cell-technique-name-${D.techniqueName}`,children:D.techniqueName}),r.jsx(W,{"data-testid":`cell-technique-status-${D.techniqueName}`,children:Q(D.metaStatus)}),r.jsx(W,{"data-testid":`cell-technique-score-${D.techniqueName}`,children:Number(D.overallMetaScore).toFixed(1)}),r.jsx(W,{"data-testid":`cell-technique-videos-${D.techniqueName}`,children:D.videosInLibrary}),r.jsx(W,{"data-testid":`cell-technique-curation-${D.techniqueName}`,children:D.needsCuration?r.jsx(ae,{variant:"destructive",children:"Yes"}):r.jsx(ae,{variant:"outline",children:"No"})})]},D.techniqueName))})]})})]})}),r.jsx(Nn,{open:f,onOpenChange:h,children:r.jsxs(mn,{className:"max-w-4xl max-h-[80vh]","data-testid":"modal-user-requests",children:[r.jsxs(pn,{children:[r.jsxs(gn,{"data-testid":"text-modal-requests-title",children:["User Requests - Last 7 Days (",(g==null?void 0:g.userRequestsLast7Days)||0,")"]}),r.jsx(zn,{children:"All technique requests from user conversations"})]}),r.jsx(ul,{className:"h-[60vh]",children:k?r.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-modal-requests-loading",children:"Loading..."}):((S==null?void 0:S.requests.length)||0)===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-modal-requests-empty",children:"No requests in the last 7 days"}):r.jsxs(bt,{"data-testid":"table-user-requests",children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"User"}),r.jsx(X,{children:"Technique"}),r.jsx(X,{children:"Belt"}),r.jsx(X,{children:"Gi/NoGi"}),r.jsx(X,{children:"Had Video?"}),r.jsx(X,{children:"Videos Returned"}),r.jsx(X,{children:"When"})]})}),r.jsx(wt,{children:S==null?void 0:S.requests.map(D=>r.jsxs(ke,{"data-testid":`row-request-modal-${D.id}`,children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium text-sm","data-testid":`text-request-user-${D.id}`,children:D.userName||"Unknown"}),r.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[150px]",children:D.userEmail||D.userId})]})}),r.jsx(W,{className:"font-medium capitalize","data-testid":`text-request-technique-${D.id}`,children:D.techniqueMentioned}),r.jsx(W,{children:D.beltLevel||"-"}),r.jsx(W,{children:D.giPreference||"-"}),r.jsx(W,{"data-testid":`badge-request-video-result-${D.id}`,children:D.hadVideoResult===null?r.jsx(ae,{variant:"outline",children:"Unknown"}):D.hadVideoResult?r.jsx(ae,{variant:"default",children:"Yes"}):r.jsx(ae,{variant:"destructive",children:"No"})}),r.jsx(W,{"data-testid":`text-request-video-count-${D.id}`,children:D.videoCountReturned??"-"}),r.jsx(W,{className:"text-sm text-muted-foreground",children:Hi(new Date(D.requestedAt),{addSuffix:!0})})]},D.id))})]})})]})}),r.jsx(Nn,{open:p,onOpenChange:v,children:r.jsxs(mn,{className:"max-w-3xl max-h-[80vh]","data-testid":"modal-needs-curation",children:[r.jsxs(pn,{children:[r.jsxs(gn,{"data-testid":"text-modal-curation-title",children:["Techniques Needing Curation (",(g==null?void 0:g.techniquesNeedingCuration)||0,")"]}),r.jsx(zn,{children:"High-demand techniques with insufficient video coverage"})]}),r.jsx(ul,{className:"h-[60vh]",children:T?r.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-modal-curation-loading",children:"Loading..."}):r.jsxs(bt,{"data-testid":"table-needs-curation",children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Technique"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Score"}),r.jsx(X,{children:"Current Videos"}),r.jsx(X,{children:"Action"})]})}),r.jsx(wt,{children:A==null?void 0:A.techniques.filter(D=>D.needsCuration).map(D=>r.jsxs(ke,{"data-testid":`row-curation-${D.techniqueName}`,children:[r.jsx(W,{className:"font-medium capitalize","data-testid":`cell-curation-name-${D.techniqueName}`,children:D.techniqueName}),r.jsx(W,{"data-testid":`cell-curation-status-${D.techniqueName}`,children:Q(D.metaStatus)}),r.jsx(W,{"data-testid":`cell-curation-score-${D.techniqueName}`,children:Number(D.overallMetaScore).toFixed(1)}),r.jsx(W,{"data-testid":`cell-curation-videos-${D.techniqueName}`,children:D.videosInLibrary}),r.jsx(W,{children:r.jsx(Z,{size:"sm",variant:"outline",onClick:()=>{v(!1),B(D.techniqueName)},disabled:t===D.techniqueName,"data-testid":`button-curate-modal-${D.techniqueName}`,children:t===D.techniqueName?"Curating...":"Curate"})})]},D.techniqueName))})]})})]})})]})}function Rwe(){const[e,t]=x.useState(""),[n,s]=x.useState(""),[i,a]=x.useState(!1),{toast:o}=Je(),l=qe({mutationFn:async u=>await Ie("/api/admin/magic-link/generate",{method:"POST",body:{phoneNumber:u}}),onSuccess:u=>{s(u.magicLink),o({title:"Magic Link Generated!",description:`Link created for ${u.phoneNumber}. Expires in 7 days.`})},onError:u=>{o({title:"Error",description:u.message||"Failed to generate magic link",variant:"destructive"})}}),c=()=>{if(!e.trim()){o({title:"Phone Required",description:"Please enter a phone number",variant:"destructive"});return}s(""),a(!1),l.mutate(e)},d=async()=>{await navigator.clipboard.writeText(n),a(!0),o({title:"Copied!",description:"Magic link copied to clipboard"}),setTimeout(()=>a(!1),2e3)};return r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold",children:"Magic Link Generator"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate beta access links for testing"})]}),r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"phone-input",children:"Phone Number"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(je,{id:"phone-input",type:"tel",placeholder:"(914) 837-3750 or 9148373750",value:e,onChange:u=>t(u.target.value),onKeyDown:u=>u.key==="Enter"&&c(),disabled:l.isPending,"data-testid":"input-phone-number",className:"flex-1"}),r.jsx(Z,{onClick:c,disabled:l.isPending,"data-testid":"button-generate-link",children:l.isPending?r.jsx(r.Fragment,{children:"Generating..."}):r.jsxs(r.Fragment,{children:[r.jsx(iq,{className:"w-4 h-4 mr-2"}),"Generate Link"]})})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Accepts formats: (914) 837-3750, 9148373750, +19148373750"})]}),n&&r.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[r.jsx(Qs,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Link Generated Successfully!"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Magic Link"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(je,{value:n,readOnly:!0,"data-testid":"text-magic-link",className:"font-mono text-sm"}),r.jsx(Z,{variant:"outline",size:"icon",onClick:d,"data-testid":"button-copy-link",children:i?r.jsx(Qs,{className:"w-4 h-4 text-green-600"}):r.jsx(dg,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(zf,{className:"w-4 h-4"}),"Next Steps"]}),r.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[r.jsx("li",{children:"Copy the link above"}),r.jsxs("li",{children:["Text it to the beta tester at ",e]}),r.jsx("li",{children:"They click the link  instant access + auto-login"}),r.jsx("li",{children:"Link expires after first use or 7 days"}),r.jsx("li",{children:"Grants lifetime access to the platform"})]})]})]})]})}),r.jsx(G,{className:"p-6 bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-900",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"How Magic Links Work"}),r.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"For Beta Launch:"})," No SMS verification needed - just magic links!"]}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[r.jsx("li",{children:"Generate a unique link for each beta tester"}),r.jsx("li",{children:"Text them the link personally"}),r.jsx("li",{children:"They click  auto-login with lifetime access"}),r.jsx("li",{children:"No phone verification codes needed"}),r.jsx("li",{children:"Full control over who gets access"})]})]})]})})]})})}var PL=["PageUp","PageDown"],EL=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],TL={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},lu="Slider",[i1,Mwe,Fwe]=iv(lu),[OL,lSe]=Mr(lu,[Fwe]),[$we,wy]=OL(lu),_L=x.forwardRef((e,t)=>{const{name:n,min:s=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:v,...g}=e,y=x.useRef(new Set),j=x.useRef(0),b=o==="horizontal"?Dwe:Lwe,[N=[],w]=bi({prop:u,defaultProp:d,onChange:F=>{var T;(T=[...y.current][j.current])==null||T.focus(),f(F)}}),S=x.useRef(N);function k(F){const A=Vwe(N,F);_(F,A)}function P(F){_(F,j.current)}function E(){const F=S.current[j.current];N[j.current]!==F&&h(N)}function _(F,A,{commit:T}={commit:!1}){const M=Gwe(a),O=Ywe(Math.round((F-s)/a)*a+s,M),C=Gf(O,[s,i]);w((R=[])=>{const I=qwe(R,C,A);if(Kwe(I,c*a)){j.current=I.indexOf(C);const B=String(I)!==String(R);return B&&T&&h(I),B?I:R}else return R})}return r.jsx($we,{scope:e.__scopeSlider,name:n,disabled:l,min:s,max:i,valueIndexToChangeRef:j,thumbs:y.current,values:N,orientation:o,form:v,children:r.jsx(i1.Provider,{scope:e.__scopeSlider,children:r.jsx(i1.Slot,{scope:e.__scopeSlider,children:r.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:$e(g.onPointerDown,()=>{l||(S.current=N)}),min:s,max:i,inverted:p,onSlideStart:l?void 0:k,onSlideMove:l?void 0:P,onSlideEnd:l?void 0:E,onHomeKeyDown:()=>!l&&_(s,0,{commit:!0}),onEndKeyDown:()=>!l&&_(i,N.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:A})=>{if(!l){const O=PL.includes(F.key)||F.shiftKey&&EL.includes(F.key)?10:1,C=j.current,R=N[C],I=a*O*A;_(R+I,C,{commit:!0})}}})})})})});_L.displayName=lu;var[IL,RL]=OL(lu,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Dwe=x.forwardRef((e,t)=>{const{min:n,max:s,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[f,h]=x.useState(null),p=ct(t,b=>h(b)),v=x.useRef(void 0),g=Zh(i),y=g==="ltr",j=y&&!a||!y&&a;function m(b){const N=v.current||f.getBoundingClientRect(),w=[0,N.width],k=u2(w,j?[n,s]:[s,n]);return v.current=N,k(b-N.left)}return r.jsx(IL,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:r.jsx(ML,{dir:g,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const N=m(b.clientX);o==null||o(N)},onSlideMove:b=>{const N=m(b.clientX);l==null||l(N)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:b=>{const w=TL[j?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:w?-1:1})}})})}),Lwe=x.forwardRef((e,t)=>{const{min:n,max:s,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=x.useRef(null),f=ct(t,u),h=x.useRef(void 0),p=!i;function v(g){const y=h.current||u.current.getBoundingClientRect(),j=[0,y.height],b=u2(j,p?[s,n]:[n,s]);return h.current=y,b(g-y.top)}return r.jsx(IL,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:r.jsx(ML,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=v(g.clientY);a==null||a(y)},onSlideMove:g=>{const y=v(g.clientY);o==null||o(y)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:g=>{const j=TL[p?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:j?-1:1})}})})}),ML=x.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=wy(lu,n);return r.jsx(He.span,{...d,ref:t,onKeyDown:$e(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):PL.concat(EL).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:$e(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(h)?h.focus():s(f)}),onPointerMove:$e(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:$e(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),a(f))})})}),FL="SliderTrack",$L=x.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=wy(FL,n);return r.jsx(He.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:t})});$L.displayName=FL;var a1="SliderRange",DL=x.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=wy(a1,n),a=RL(a1,n),o=x.useRef(null),l=ct(t,o),c=i.values.length,d=i.values.map(h=>BL(h,i.min,i.max)),u=c>1?Math.min(...d):0,f=100-Math.max(...d);return r.jsx(He.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:l,style:{...e.style,[a.startEdge]:u+"%",[a.endEdge]:f+"%"}})});DL.displayName=a1;var o1="SliderThumb",LL=x.forwardRef((e,t)=>{const n=Mwe(e.__scopeSlider),[s,i]=x.useState(null),a=ct(t,l=>i(l)),o=x.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(Bwe,{...e,ref:a,index:o})}),Bwe=x.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:i,...a}=e,o=wy(o1,n),l=RL(o1,n),[c,d]=x.useState(null),u=ct(t,m=>d(m)),f=c?o.form||!!c.closest("form"):!0,h=xv(c),p=o.values[s],v=p===void 0?0:BL(p,o.min,o.max),g=Uwe(s,o.values.length),y=h==null?void 0:h[l.size],j=y?Wwe(y,v,l.direction):0;return x.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${j}px)`},children:[r.jsx(i1.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(He.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:u,style:p===void 0?{display:"none"}:e.style,onFocus:$e(e.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),f&&r.jsx(zwe,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},s)]})});LL.displayName=o1;var zwe=e=>{const{value:t,...n}=e,s=x.useRef(null),i=Cv(t);return x.useEffect(()=>{const a=s.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==t&&c){const d=new Event("input",{bubbles:!0});c.call(a,t),a.dispatchEvent(d)}},[i,t]),r.jsx("input",{style:{display:"none"},...n,ref:s,defaultValue:t})};function qwe(e=[],t,n){const s=[...e];return s[n]=t,s.sort((i,a)=>i-a)}function BL(e,t,n){const a=100/(n-t)*(e-t);return Gf(a,[0,100])}function Uwe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Vwe(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),s=Math.min(...n);return n.indexOf(s)}function Wwe(e,t,n){const s=e/2,a=u2([0,50],[0,s]);return(s-a(t)*n)*n}function Hwe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Kwe(e,t){if(t>0){const n=Hwe(e);return Math.min(...n)>=t}return!0}function u2(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Gwe(e){return(String(e).split(".")[1]||"").length}function Ywe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var zL=_L,Qwe=$L,Jwe=DL,Xwe=LL;const mf=x.forwardRef(({className:e,...t},n)=>r.jsxs(zL,{ref:n,className:Ce("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(Qwe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Jwe,{className:"absolute h-full bg-primary"})}),r.jsx(Xwe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));mf.displayName=zL.displayName;function Zwe(){var M;const{toast:e}=Je(),[t,n]=x.useState(""),[s,i]=x.useState("all"),[a,o]=x.useState("all"),[l,c]=x.useState(!1),[d,u]=x.useState(null),[f,h]=x.useState(!1),[p,v]=x.useState({feature_level:1,search_boost:0,recommendation_boost:0,homepage_featured:!1,partnership_status:"regular"}),{data:g}=pe({queryKey:["/api/admin/instructors/stats"],queryFn:()=>Ie("/api/admin/instructors/stats")}),{data:y,isLoading:j}=pe({queryKey:["/api/admin/instructors",s,a],queryFn:async()=>{const O=new URLSearchParams;s&&s!=="all"&&O.append("tier",s),a==="needs_review"?O.append("needs_review","true"):a==="auto_discovered"&&O.append("auto_discovered","true");const C=`/api/admin/instructors?${O.toString()}`;return Ie(C)}}),{data:m}=pe({queryKey:["/api/admin/instructors/balance-report"],queryFn:()=>Ie("/api/admin/instructors/balance-report")}),b=qe({mutationFn:async O=>{if(!d)throw new Error("No instructor selected");return Ie(`/api/admin/instructors/${d.id}`,"PATCH",O)},onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/instructors"]}),_e.invalidateQueries({queryKey:["/api/admin/instructors/stats"]}),c(!1),e({title:"Promotion updated",description:"Instructor promotion settings saved successfully"})},onError:O=>{e({variant:"destructive",title:"Update failed",description:O.message})}}),N=qe({mutationFn:async O=>{if(!d)throw new Error("No instructor selected");return Ie(`/api/admin/instructors/${d.id}/review`,"POST",O)},onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/instructors"]}),_e.invalidateQueries({queryKey:["/api/admin/instructors/stats"]}),h(!1),e({title:"Review completed",description:"Instructor review saved successfully"})},onError:O=>{e({variant:"destructive",title:"Review failed",description:O.message})}}),w=O=>{u(O),v({feature_level:O.featureLevel||O.feature_level||1,search_boost:O.searchBoost||O.search_boost||0,recommendation_boost:O.recommendationBoost||O.recommendation_boost||0,homepage_featured:O.homepageFeatured||O.homepage_featured||!1,partnership_status:O.partnershipStatus||O.partnership_status||"regular"}),c(!0)},S=()=>{b.mutate(p)},k=O=>{u(O),h(!0)},P=(O,C,R)=>{N.mutate({approved:O,notes:C,tier:R})},E=(y==null?void 0:y.instructors)||[],_=(m==null?void 0:m.instructors)||[],F=E.filter(O=>!t||O.name.toLowerCase().includes(t.toLowerCase())),A=O=>{const C={1:{variant:"default",label:"Tier 1 - Elite"},2:{variant:"secondary",label:"Tier 2 - Established"},3:{variant:"outline",label:"Tier 3 - Unknown"}};return C[O]||C[3]},T=O=>{if(!O)return null;const C={regular:{variant:"outline",label:"Regular",icon:null},affiliate:{variant:"secondary",label:"Affiliate",icon:oo},active_partner:{variant:"default",label:"Partner",icon:qn},featured_partner:{variant:"default",label:"Featured",icon:ll},blacklisted:{variant:"destructive",label:"Blacklisted",icon:lr}},{variant:R,label:I,icon:B}=C[O]||C.regular;return r.jsxs(ae,{variant:R,children:[B&&r.jsx(B,{className:"w-3 h-3 mr-1"}),I]})};return r.jsx(Qt,{children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Instructor Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Auto-discovery, promotion controls, and balanced curation"})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Instructors"}),r.jsx(qu,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:(g==null?void 0:g.total)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Needs Review"}),r.jsx(Bn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-needs-review",children:(g==null?void 0:g.needsReview)||(g==null?void 0:g.needs_review)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-discovered instructors"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Auto-Discovered"}),r.jsx(ll,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-auto-discovered",children:(g==null?void 0:g.autoDiscovered)||(g==null?void 0:g.auto_discovered)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Found during curation"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Featured"}),r.jsx(qn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-featured",children:(g==null?void 0:g.featured)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Homepage featured"})]})]})]}),r.jsxs(Il,{defaultValue:"all",className:"space-y-4",children:[r.jsxs(Eo,{children:[r.jsx(an,{value:"all","data-testid":"tab-all",children:"All Instructors"}),r.jsxs(an,{value:"needs-review","data-testid":"tab-needs-review",children:["Needs Review ",((g==null?void 0:g.needsReview)||(g==null?void 0:g.needs_review))>0&&`(${(g==null?void 0:g.needsReview)||(g==null?void 0:g.needs_review)})`]}),r.jsx(an,{value:"balance","data-testid":"tab-balance",children:"Balanced Curation"})]}),r.jsxs(on,{value:"all",className:"space-y-4",children:[r.jsx(G,{children:r.jsx(ee,{className:"pt-6",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),r.jsx(je,{placeholder:"Search instructors...",value:t,onChange:O=>n(O.target.value),className:"pl-10","data-testid":"input-search"})]}),r.jsxs(et,{value:s,onValueChange:i,children:[r.jsx(Xe,{"data-testid":"select-tier-filter",children:r.jsx(tt,{placeholder:"All Tiers"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Tiers"}),r.jsx(ne,{value:"1",children:"Tier 1 - Elite"}),r.jsx(ne,{value:"2",children:"Tier 2 - Established"}),r.jsx(ne,{value:"3",children:"Tier 3 - Unknown"})]})]}),r.jsxs(et,{value:a,onValueChange:o,children:[r.jsx(Xe,{"data-testid":"select-review-filter",children:r.jsx(tt,{placeholder:"All Status"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Status"}),r.jsx(ne,{value:"needs_review",children:"Needs Review"}),r.jsx(ne,{value:"auto_discovered",children:"Auto-Discovered"})]})]})]})})}),j?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground",children:"Loading instructors..."})}):F.length===0?r.jsx(G,{children:r.jsx(ee,{className:"py-12",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-muted-foreground",children:"No instructors found"})})})}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:F.map(O=>r.jsxs(G,{className:"hover-elevate","data-testid":`card-instructor-${O.id}`,children:[r.jsx(re,{children:r.jsx("div",{className:"flex items-start justify-between gap-2",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(se,{className:"text-lg",children:O.name}),(O.autoDiscovered||O.auto_discovered)&&r.jsxs(ae,{variant:"secondary",className:"shrink-0",children:[r.jsx(ll,{className:"w-3 h-3 mr-1"}),"Auto"]}),(O.needsAdminReview||O.needs_admin_review)&&r.jsxs(ae,{variant:"destructive",className:"shrink-0",children:[r.jsx(lr,{className:"w-3 h-3 mr-1"}),"Review"]})]}),r.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[A(O.tier)&&r.jsx(ae,{variant:A(O.tier).variant,children:A(O.tier).label}),T(O.partnershipStatus||O.partnership_status)]})]})})}),r.jsxs(ee,{className:"space-y-3",children:[(O.autoDiscovered||O.auto_discovered)&&r.jsxs("div",{className:"p-2 bg-muted rounded-md text-sm",children:[r.jsx("p",{className:"font-medium",children:"Discovery Info"}),r.jsxs("p",{className:"text-muted-foreground text-xs",children:["Source: ",O.discoverySource||O.discovery_source||"Unknown"]}),(O.autoTierAssignment||O.auto_tier_assignment)&&r.jsxs("p",{className:"text-muted-foreground text-xs",children:["AI Suggested: ",O.autoTierAssignment||O.auto_tier_assignment]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Feature Level"}),r.jsxs("p",{className:"font-medium",children:[O.featureLevel||O.feature_level||1,"/5 "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Search Boost"}),r.jsxs("p",{className:"font-medium",children:[O.searchBoost||O.search_boost||0,"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Rec. Boost"}),r.jsxs("p",{className:"font-medium",children:[O.recommendationBoost||O.recommendation_boost||0,"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Homepage"}),r.jsx("p",{className:"font-medium",children:O.homepageFeatured||O.homepage_featured?"":""})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Videos"}),r.jsx("p",{className:"font-medium",children:O.videosInLibrary||O.videos_in_library||0})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Recommendations"}),r.jsx("p",{className:"font-medium",children:O.totalRecommendations||O.total_recommendations||0})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[(O.needsAdminReview||O.needs_admin_review)&&r.jsxs(Z,{size:"sm",variant:"default",className:"flex-1",onClick:()=>k(O),"data-testid":`button-review-${O.id}`,children:[r.jsx(eC,{className:"w-4 h-4 mr-1"}),"Review"]}),r.jsxs(Z,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>w(O),"data-testid":`button-promote-${O.id}`,children:[r.jsx(_l,{className:"w-4 h-4 mr-1"}),"Promote"]})]})]})]},O.id))})]}),r.jsx(on,{value:"needs-review",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Instructors Pending Review"}),r.jsx(ze,{children:"Auto-discovered instructors that need admin approval before being added to the library"})]}),r.jsx(ee,{children:E.filter(O=>O.needsAdminReview||O.needs_admin_review).length===0?r.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No instructors pending review"}):r.jsx("div",{className:"space-y-4",children:E.filter(O=>O.needsAdminReview||O.needs_admin_review).map(O=>r.jsxs("div",{className:"p-4 border rounded-lg space-y-2","data-testid":`review-card-${O.id}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:O.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Discovered via ",O.discoverySource||O.discovery_source||"Unknown"]})]}),r.jsxs(Z,{size:"sm",onClick:()=>k(O),"data-testid":`button-review-${O.id}`,children:[r.jsx(eC,{className:"w-4 h-4 mr-1"}),"Review"]})]}),(O.autoTierReason||O.auto_tier_reason)&&r.jsxs("p",{className:"text-sm bg-muted p-2 rounded",children:[r.jsx("strong",{children:"AI Reasoning:"})," ",O.autoTierReason||O.auto_tier_reason]})]},O.id))})})]})}),r.jsx(on,{value:"balance",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Balanced Curation Report"}),r.jsx(ze,{children:"Instructors sorted by representation ratio to ensure balanced recommendations across the library"})]}),r.jsx(ee,{children:_.length===0?r.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No balance data available"}):r.jsx("div",{className:"space-y-2",children:_.map(O=>{const C=O.videosInLibrary||O.videos_in_library||0,R=O.totalRecommendations||O.total_recommendations||0,I=O.representationRatio||O.representation_ratio||0;return r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded hover-elevate",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:O.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Tier ",O.tier,"  ",C," videos  ",R," recommendations"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-medium",children:["Ratio: ",(I==null?void 0:I.toFixed(2))||"0.00"]}),r.jsx(ae,{variant:I<1?"destructive":I<2?"secondary":"default",children:I<1?"Underrepresented":I<2?"Balanced":"Overrepresented"})]})]},O.id)})})})]})})]}),r.jsx(Nn,{open:l,onOpenChange:c,children:r.jsxs(mn,{className:"max-w-2xl",children:[r.jsxs(pn,{children:[r.jsxs(gn,{children:["Promotion Controls: ",d==null?void 0:d.name]}),r.jsx(zn,{children:"Configure search boosts, recommendation priority, and homepage featuring"})]}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Feature Level (1-5 stars)"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(mf,{value:[p.feature_level],onValueChange:O=>v({...p,feature_level:O[0]}),min:1,max:5,step:1,className:"flex-1","data-testid":"slider-feature-level"}),r.jsxs("span",{className:"text-sm font-medium w-8",children:[p.feature_level,"/5"]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Higher feature levels prioritize this instructor in recommendations"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Search Boost (0-100%)"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(mf,{value:[p.search_boost],onValueChange:O=>v({...p,search_boost:O[0]}),min:0,max:100,step:5,className:"flex-1","data-testid":"slider-search-boost"}),r.jsxs("span",{className:"text-sm font-medium w-12",children:[p.search_boost,"%"]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Percentage boost applied to search ranking scores"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Recommendation Boost (0-100%)"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(mf,{value:[p.recommendation_boost],onValueChange:O=>v({...p,recommendation_boost:O[0]}),min:0,max:100,step:5,className:"flex-1","data-testid":"slider-recommendation-boost"}),r.jsxs("span",{className:"text-sm font-medium w-12",children:[p.recommendation_boost,"%"]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Percentage boost applied to recommendation algorithm"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vs,{id:"homepage_featured",checked:p.homepage_featured,onCheckedChange:O=>v({...p,homepage_featured:O}),"data-testid":"checkbox-homepage-featured"}),r.jsx(fe,{htmlFor:"homepage_featured",className:"cursor-pointer",children:'Show in "Featured Instructors" section on homepage'})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Partnership Status"}),r.jsxs(et,{value:p.partnership_status,onValueChange:O=>v({...p,partnership_status:O}),children:[r.jsx(Xe,{"data-testid":"select-partnership-status",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"regular",children:"Regular"}),r.jsx(ne,{value:"affiliate",children:"Affiliate"}),r.jsx(ne,{value:"active_partner",children:"Active Partner"}),r.jsx(ne,{value:"featured_partner",children:"Featured Partner"}),r.jsx(ne,{value:"blacklisted",children:"Blacklisted"})]})]})]})]}),r.jsxs(bo,{children:[r.jsx(Z,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),r.jsx(Z,{onClick:S,disabled:b.isPending,"data-testid":"button-save-promotion",children:b.isPending?"Saving...":"Save Changes"})]})]})}),r.jsx(Nn,{open:f,onOpenChange:h,children:r.jsxs(mn,{children:[r.jsxs(pn,{children:[r.jsxs(gn,{children:["Review Instructor: ",d==null?void 0:d.name]}),r.jsx(zn,{children:"Approve or reject this auto-discovered instructor"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[((d==null?void 0:d.autoTierAssignment)||(d==null?void 0:d.auto_tier_assignment))&&r.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium",children:"AI Suggested Tier"}),r.jsx("p",{className:"text-sm",children:d.autoTierAssignment||d.auto_tier_assignment}),(d.autoTierReason||d.auto_tier_reason)&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d.autoTierReason||d.auto_tier_reason})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"review-notes",children:"Review Notes"}),r.jsx(Ci,{id:"review-notes",placeholder:"Add notes about this instructor...","data-testid":"textarea-review-notes"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Assign Tier"}),r.jsxs(et,{defaultValue:((M=d==null?void 0:d.tier)==null?void 0:M.toString())||"2",children:[r.jsx(Xe,{"data-testid":"select-review-tier",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"1",children:"Tier 1 - Elite"}),r.jsx(ne,{value:"2",children:"Tier 2 - Established"}),r.jsx(ne,{value:"3",children:"Tier 3 - Unknown"})]})]})]})]}),r.jsxs(bo,{className:"flex gap-2",children:[r.jsx(Z,{variant:"outline",onClick:()=>{var C;const O=((C=document.getElementById("review-notes"))==null?void 0:C.value)||"";P(!1,O)},"data-testid":"button-reject",children:"Reject"}),r.jsx(Z,{onClick:()=>{var I;const O=((I=document.getElementById("review-notes"))==null?void 0:I.value)||"",C=document.querySelector('[data-testid="select-review-tier"]'),R=parseInt((C==null?void 0:C.value)||"2");P(!0,O,R)},disabled:N.isPending,"data-testid":"button-approve",children:N.isPending?"Approving...":"Approve"})]})]})})]})})}function e1e(){const{toast:e}=Je(),[t,n]=x.useState("all"),[s,i]=x.useState("all"),[a,o]=x.useState(""),[l,c]=x.useState(!1),[d,u]=x.useState(null),[f,h]=x.useState(!1),[p,v]=x.useState(null),{data:g=[],isLoading:y}=pe({queryKey:["/api/admin/partnerships",t,s],queryFn:async()=>{const P=new URLSearchParams;return t!=="all"&&P.append("feature_level",t),s!=="all"&&P.append("is_active",s),Ie(`/api/admin/partnerships?${P}`)}}),{data:j=[]}=pe({queryKey:["/api/admin/instructors/all"],queryFn:async()=>(await Ie("/api/admin/instructors")).instructors||[]}),{data:m}=pe({queryKey:["/api/admin/partnerships/stats"],queryFn:()=>Ie("/api/admin/partnerships/stats")}),b=qe({mutationFn:async P=>d?Ie(`/api/admin/partnerships/${d.id}`,"PATCH",P):Ie("/api/admin/partnerships","POST",P),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/partnerships"]}),_e.invalidateQueries({queryKey:["/api/admin/partnerships/stats"]}),c(!1),u(null),e({title:d?"Partnership updated":"Partnership created",description:"Changes saved successfully"})},onError:P=>{e({title:"Error",description:P.message||"Failed to save partnership",variant:"destructive"})}}),N=qe({mutationFn:P=>Ie(`/api/admin/partnerships/${P}`,"DELETE"),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/partnerships"]}),_e.invalidateQueries({queryKey:["/api/admin/partnerships/stats"]}),h(!1),v(null),e({title:"Partnership deleted",description:"Partnership removed successfully"})},onError:P=>{e({title:"Error",description:P.message||"Failed to delete partnership",variant:"destructive"})}}),w=P=>{P.preventDefault();const E=new FormData(P.currentTarget),_={instructor_id:E.get("instructor_id"),feature_level:E.get("feature_level"),search_priority_percentage:parseInt(E.get("search_priority_percentage")),recommendation_boost_percentage:parseInt(E.get("recommendation_boost_percentage")),show_badge:E.get("show_badge")==="on",show_name_callout:E.get("show_name_callout")==="on",custom_callout_text:E.get("custom_callout_text")||null,start_date:E.get("start_date"),end_date:E.get("end_date")||null,is_active:E.get("is_active")==="on",partnership_type:E.get("partnership_type")||null,partnership_agreement:E.get("partnership_agreement")||null,social_post_completed:E.get("social_post_completed")==="on",social_post_date:E.get("social_post_date")||null,link_in_bio_until:E.get("link_in_bio_until")||null,partnership_notes:E.get("partnership_notes")||null};b.mutate(_)},S=g.filter(P=>{var E;return!(a&&!((E=P.instructorName)!=null&&E.toLowerCase().includes(a.toLowerCase())))}),k=P=>{const E={primary:{variant:"default",icon:qn,label:"Primary"},secondary:{variant:"secondary",icon:oo,label:"Secondary"},spotlight:{variant:"outline",icon:jn,label:"Spotlight"}},{variant:_,icon:F,label:A}=E[P]||E.secondary;return r.jsxs(ae,{variant:_,className:"gap-1",children:[r.jsx(F,{className:"w-3 h-3"}),A]})};return r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Instructor Partnerships"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage featured instructor partnerships and promotional agreements"})]}),r.jsxs(Z,{onClick:()=>{u(null),c(!0)},"data-testid":"button-create-partnership",children:[r.jsx(fv,{className:"w-4 h-4 mr-2"}),"Add Partnership"]})]}),m&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Partnerships"}),r.jsx(oo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:m.total||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Active Partnerships"}),r.jsx(qn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-active",children:m.active||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Primary Features"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-primary",children:m.primaryCount||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Social Posts"}),r.jsx(oo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-social",children:m.socialPostsCompleted||0})})]})]}),r.jsxs(G,{children:[r.jsx(re,{children:r.jsx(se,{children:"Filters"})}),r.jsxs(ee,{className:"flex gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(fe,{children:"Search"}),r.jsx(je,{placeholder:"Search instructor name...",value:a,onChange:P=>o(P.target.value),"data-testid":"input-search"})]}),r.jsxs("div",{className:"w-48",children:[r.jsx(fe,{children:"Feature Level"}),r.jsxs(et,{value:t,onValueChange:n,children:[r.jsx(Xe,{"data-testid":"select-filter-level",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Levels"}),r.jsx(ne,{value:"primary",children:"Primary"}),r.jsx(ne,{value:"secondary",children:"Secondary"}),r.jsx(ne,{value:"spotlight",children:"Spotlight"})]})]})]}),r.jsxs("div",{className:"w-48",children:[r.jsx(fe,{children:"Status"}),r.jsxs(et,{value:s,onValueChange:i,children:[r.jsx(Xe,{"data-testid":"select-filter-active",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Status"}),r.jsx(ne,{value:"true",children:"Active"}),r.jsx(ne,{value:"false",children:"Inactive"})]})]})]})]})]}),r.jsx(G,{children:r.jsx(ee,{className:"p-0",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Instructor"}),r.jsx(X,{children:"Feature Level"}),r.jsx(X,{children:"Search Boost"}),r.jsx(X,{children:"Rec. Boost"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Partnership Type"}),r.jsx(X,{children:"Social Post"}),r.jsx(X,{children:"Recommendations"}),r.jsx(X,{className:"text-right",children:"Actions"})]})}),r.jsx(wt,{children:y?r.jsx(ke,{children:r.jsx(W,{colSpan:9,className:"text-center",children:"Loading..."})}):S.length===0?r.jsx(ke,{children:r.jsx(W,{colSpan:9,className:"text-center",children:"No partnerships found"})}):S.map(P=>r.jsxs(ke,{"data-testid":`row-partnership-${P.id}`,children:[r.jsx(W,{className:"font-medium",children:P.instructorName||"Unknown"}),r.jsx(W,{children:k(P.featureLevel)}),r.jsxs(W,{children:[P.searchPriorityPercentage,"%"]}),r.jsxs(W,{children:[P.recommendationBoostPercentage,"%"]}),r.jsx(W,{children:r.jsx(ae,{variant:P.isActive?"default":"secondary",children:P.isActive?"Active":"Inactive"})}),r.jsx(W,{children:P.partnershipType?r.jsx(ae,{variant:"outline",children:P.partnershipType}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(W,{children:P.socialPostCompleted?r.jsx(ae,{variant:"default",children:" Done"}):r.jsx(ae,{variant:"secondary",children:"Pending"})}),r.jsx(W,{children:P.totalRecommendations.toLocaleString()}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>{u(P),c(!0)},"data-testid":`button-edit-${P.id}`,children:r.jsx(KI,{className:"w-4 h-4"})}),r.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>{v(P.id),h(!0)},"data-testid":`button-delete-${P.id}`,children:r.jsx(Si,{className:"w-4 h-4"})})]})})]},P.id))})]})})}),r.jsx(Nn,{open:l,onOpenChange:c,children:r.jsx(mn,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:w,children:[r.jsxs(pn,{children:[r.jsx(gn,{children:d?"Edit Partnership":"Create Partnership"}),r.jsx(zn,{children:"Configure featured instructor partnership settings"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"instructor_id",children:"Instructor *"}),r.jsxs(et,{name:"instructor_id",defaultValue:d==null?void 0:d.instructorId,required:!0,disabled:!!d,children:[r.jsx(Xe,{"data-testid":"input-instructor",children:r.jsx(tt,{placeholder:"Select instructor"})}),r.jsx(Ze,{children:j.map(P=>r.jsxs(ne,{value:P.id,children:[P.name," (Tier ",P.tier,")"]},P.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"feature_level",children:"Feature Level *"}),r.jsxs(et,{name:"feature_level",defaultValue:(d==null?void 0:d.featureLevel)||"secondary",required:!0,children:[r.jsx(Xe,{"data-testid":"input-feature-level",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"primary",children:"Primary"}),r.jsx(ne,{value:"secondary",children:"Secondary"}),r.jsx(ne,{value:"spotlight",children:"Spotlight"})]})]})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"search_priority_percentage",children:"Search Priority %"}),r.jsx(je,{id:"search_priority_percentage",name:"search_priority_percentage",type:"number",min:"0",max:"100",defaultValue:(d==null?void 0:d.searchPriorityPercentage)||10,required:!0,"data-testid":"input-search-priority"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"recommendation_boost_percentage",children:"Rec. Boost %"}),r.jsx(je,{id:"recommendation_boost_percentage",name:"recommendation_boost_percentage",type:"number",min:"0",max:"100",defaultValue:(d==null?void 0:d.recommendationBoostPercentage)||30,required:!0,"data-testid":"input-recommendation-boost"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vs,{id:"show_badge",name:"show_badge",defaultChecked:(d==null?void 0:d.showBadge)??!0,"data-testid":"input-show-badge"}),r.jsx(fe,{htmlFor:"show_badge",children:"Show Badge"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vs,{id:"show_name_callout",name:"show_name_callout",defaultChecked:(d==null?void 0:d.showNameCallout)??!0,"data-testid":"input-show-callout"}),r.jsx(fe,{htmlFor:"show_name_callout",children:"Show Name Callout"})]})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"custom_callout_text",children:"Custom Callout Text"}),r.jsx(je,{id:"custom_callout_text",name:"custom_callout_text",placeholder:"e.g., 'Your instructor' or 'Elite competitor'",defaultValue:(d==null?void 0:d.customCalloutText)||"","data-testid":"input-callout-text"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"start_date",children:"Start Date *"}),r.jsx(je,{id:"start_date",name:"start_date",type:"date",defaultValue:(d==null?void 0:d.startDate)||new Date().toISOString().split("T")[0],required:!0,"data-testid":"input-start-date"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"end_date",children:"End Date (optional)"}),r.jsx(je,{id:"end_date",name:"end_date",type:"date",defaultValue:(d==null?void 0:d.endDate)||"","data-testid":"input-end-date"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vs,{id:"is_active",name:"is_active",defaultChecked:(d==null?void 0:d.isActive)??!0,"data-testid":"input-is-active"}),r.jsx(fe,{htmlFor:"is_active",children:"Active"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"partnership_type",children:"Partnership Type"}),r.jsxs(et,{name:"partnership_type",defaultValue:(d==null?void 0:d.partnershipType)||"",children:[r.jsx(Xe,{"data-testid":"input-partnership-type",children:r.jsx(tt,{placeholder:"Select type"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"",children:"None"}),r.jsx(ne,{value:"co_founder",children:"Co-Founder"}),r.jsx(ne,{value:"promotional",children:"Promotional"}),r.jsx(ne,{value:"standard",children:"Standard"})]})]})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"social_post_date",children:"Social Post Date"}),r.jsx(je,{id:"social_post_date",name:"social_post_date",type:"date",defaultValue:(d==null?void 0:d.socialPostDate)||"","data-testid":"input-social-post-date"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vs,{id:"social_post_completed",name:"social_post_completed",defaultChecked:(d==null?void 0:d.socialPostCompleted)||!1,"data-testid":"input-social-completed"}),r.jsx(fe,{htmlFor:"social_post_completed",children:"Social Post Completed"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"link_in_bio_until",children:"Link in Bio Until"}),r.jsx(je,{id:"link_in_bio_until",name:"link_in_bio_until",type:"date",defaultValue:(d==null?void 0:d.linkInBioUntil)||"","data-testid":"input-link-bio-until"})]})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"partnership_agreement",children:"Partnership Agreement"}),r.jsx(Ci,{id:"partnership_agreement",name:"partnership_agreement",placeholder:"Partnership agreement details...",defaultValue:(d==null?void 0:d.partnershipAgreement)||"","data-testid":"input-agreement"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(fe,{htmlFor:"partnership_notes",children:"Notes"}),r.jsx(Ci,{id:"partnership_notes",name:"partnership_notes",placeholder:"Additional notes...",defaultValue:(d==null?void 0:d.partnershipNotes)||"","data-testid":"input-notes"})]})]}),r.jsxs(bo,{children:[r.jsx(Z,{type:"button",variant:"outline",onClick:()=>c(!1),"data-testid":"button-cancel",children:"Cancel"}),r.jsx(Z,{type:"submit",disabled:b.isPending,"data-testid":"button-save",children:b.isPending?"Saving...":"Save Partnership"})]})]})})}),r.jsx(Nn,{open:f,onOpenChange:h,children:r.jsxs(mn,{children:[r.jsxs(pn,{children:[r.jsx(gn,{children:"Delete Partnership"}),r.jsx(zn,{children:"Are you sure you want to delete this partnership? This action cannot be undone."})]}),r.jsxs(bo,{children:[r.jsx(Z,{variant:"outline",onClick:()=>h(!1),"data-testid":"button-cancel-delete",children:"Cancel"}),r.jsx(Z,{variant:"destructive",onClick:()=>p&&N.mutate(p),disabled:N.isPending,"data-testid":"button-confirm-delete",children:N.isPending?"Deleting...":"Delete"})]})]})})]})})}var t1e="Separator",aO="horizontal",n1e=["horizontal","vertical"],qL=x.forwardRef((e,t)=>{const{decorative:n,orientation:s=aO,...i}=e,a=r1e(s)?s:aO,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return r.jsx(He.div,{"data-orientation":a,...l,...i,ref:t})});qL.displayName=t1e;function r1e(e){return n1e.includes(e)}var UL=qL;const $p=x.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},i)=>r.jsx(UL,{ref:i,decorative:n,orientation:t,className:Ce("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));$p.displayName=UL.displayName;function s1e(){var y,j;const[e,t]=x.useState(null),[n,s]=x.useState("all"),[i,a]=x.useState("all"),[o,l]=x.useState("all"),[c,d]=x.useState(""),{data:u}=pe({queryKey:["/api/admin/chains/stats"],queryFn:()=>Ie("/api/admin/chains/stats")}),{data:f=[],isLoading:h}=pe({queryKey:["/api/chains",n,i,o],queryFn:async()=>{const m=new URLSearchParams({limit:"100"});return n!=="all"&&m.append("position",n),i!=="all"&&m.append("difficulty",i),o!=="all"&&m.append("category",o),Ie(`/api/chains?${m}`)}}),p=f.filter(m=>{var b;return m.name.toLowerCase().includes(c.toLowerCase())||((b=m.description)==null?void 0:b.toLowerCase().includes(c.toLowerCase()))}),v=m=>({white:"outline",blue:"default",purple:"default",brown:"secondary",black:"secondary"})[m]||"outline",g=m=>({beginner:"outline",intermediate:"default",advanced:"secondary"})[m]||"outline";return r.jsx(Qt,{children:r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Technique Chains"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage pre-built BJJ technique sequences"})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Chains"}),r.jsx(HI,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-chains",children:(u==null?void 0:u.totalChains)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Saved"}),r.jsx(fg,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-saved",children:(u==null?void 0:u.totalSaved)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Feedback"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-feedback",children:(u==null?void 0:u.totalFeedback)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Top Chain Saves"}),r.jsx(qf,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-top-saves",children:((j=(y=u==null?void 0:u.topChains)==null?void 0:y[0])==null?void 0:j.timesSaved)||0})})]})]}),r.jsxs(G,{children:[r.jsx(re,{children:r.jsx(se,{children:"Filters"})}),r.jsx(ee,{className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsx(je,{placeholder:"Search chains...",value:c,onChange:m=>d(m.target.value),"data-testid":"input-search-chains"}),r.jsxs(et,{value:n,onValueChange:s,children:[r.jsx(Xe,{"data-testid":"select-position-filter",children:r.jsx(tt,{placeholder:"Position"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all","data-testid":"select-option-all-positions",children:"All Positions"}),r.jsx(ne,{value:"closed_guard","data-testid":"select-option-closed-guard",children:"Closed Guard"}),r.jsx(ne,{value:"mount","data-testid":"select-option-mount",children:"Mount"}),r.jsx(ne,{value:"back_control","data-testid":"select-option-back-control",children:"Back Control"}),r.jsx(ne,{value:"side_control","data-testid":"select-option-side-control",children:"Side Control"}),r.jsx(ne,{value:"half_guard","data-testid":"select-option-half-guard",children:"Half Guard"})]})]}),r.jsxs(et,{value:i,onValueChange:a,children:[r.jsx(Xe,{"data-testid":"select-difficulty-filter",children:r.jsx(tt,{placeholder:"Difficulty"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all","data-testid":"select-option-all-difficulty",children:"All Levels"}),r.jsx(ne,{value:"beginner","data-testid":"select-option-beginner",children:"Beginner"}),r.jsx(ne,{value:"intermediate","data-testid":"select-option-intermediate",children:"Intermediate"}),r.jsx(ne,{value:"advanced","data-testid":"select-option-advanced",children:"Advanced"})]})]}),r.jsxs(et,{value:o,onValueChange:l,children:[r.jsx(Xe,{"data-testid":"select-category-filter",children:r.jsx(tt,{placeholder:"Category"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all","data-testid":"select-option-all-category",children:"All Categories"}),r.jsx(ne,{value:"submissions","data-testid":"select-option-submissions",children:"Submissions"}),r.jsx(ne,{value:"sweeps","data-testid":"select-option-sweeps",children:"Sweeps"}),r.jsx(ne,{value:"passing","data-testid":"select-option-passing",children:"Passing"}),r.jsx(ne,{value:"escapes","data-testid":"select-option-escapes",children:"Escapes"})]})]})]})})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{children:["All Chains (",p.length,")"]}),r.jsx(ze,{children:"Click on a chain to view details"})]}),r.jsx(ee,{children:h?r.jsx("div",{children:"Loading chains..."}):r.jsx("div",{className:"space-y-2",children:p.map(m=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover-elevate cursor-pointer",onClick:()=>t(m),"data-testid":`chain-item-${m.id}`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold","data-testid":`text-chain-name-${m.id}`,children:m.name}),r.jsx(ae,{variant:v(m.minBeltLevel),"data-testid":`badge-belt-${m.id}`,children:m.minBeltLevel}),r.jsx(ae,{variant:g(m.difficultyLevel),"data-testid":`badge-difficulty-${m.id}`,children:m.difficultyLevel})]}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1","data-testid":`text-chain-description-${m.id}`,children:m.description}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[r.jsxs("span",{"data-testid":`text-step-count-${m.id}`,children:[m.stepCount," steps"]}),r.jsx("span",{children:""}),r.jsx("span",{"data-testid":`text-category-${m.id}`,children:m.primaryCategory}),r.jsx("span",{children:""}),r.jsxs("span",{"data-testid":`text-position-flow-${m.id}`,children:[m.positionStart,"  ",m.positionEnd]}),r.jsx("span",{children:""}),r.jsxs("span",{"data-testid":`text-saves-${m.id}`,children:[m.timesSaved," saves"]})]})]}),r.jsx(Cn,{className:"h-5 w-5 text-muted-foreground","data-testid":`icon-chevron-${m.id}`})]},m.id))})})]}),r.jsx(Nn,{open:e!==null,onOpenChange:m=>!m&&t(null),children:r.jsxs(mn,{className:"max-w-4xl max-h-[90vh]","data-testid":"dialog-chain-detail",children:[r.jsxs(pn,{children:[r.jsx(gn,{"data-testid":"text-dialog-chain-name",children:e==null?void 0:e.name}),r.jsx(zn,{"data-testid":"text-dialog-chain-description",children:e==null?void 0:e.description})]}),r.jsx(ul,{className:"h-[500px] pr-4",children:e&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap gap-2","data-testid":"section-chain-metadata",children:[r.jsxs(ae,{variant:v(e.minBeltLevel),"data-testid":"badge-dialog-belt",children:[e.minBeltLevel," belt"]}),r.jsx(ae,{variant:g(e.difficultyLevel),"data-testid":"badge-dialog-difficulty",children:e.difficultyLevel}),r.jsx(ae,{variant:"outline","data-testid":"badge-dialog-category",children:e.primaryCategory}),r.jsx(ae,{variant:"outline","data-testid":"badge-dialog-gi-preference",children:e.giPreference}),r.jsx(ae,{variant:"outline","data-testid":"badge-dialog-technical",children:e.technicalVsAthletic}),e.requiresAthleticism&&r.jsx(ae,{variant:"outline","data-testid":"badge-dialog-athleticism",children:"Requires Athleticism"}),e.requiresFlexibility&&r.jsx(ae,{variant:"outline","data-testid":"badge-dialog-flexibility",children:"Requires Flexibility"})]}),r.jsx($p,{}),r.jsxs("div",{className:"space-y-4","data-testid":"section-chain-steps",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Technique Steps"}),e.steps.map((m,b)=>r.jsxs(G,{"data-testid":`card-step-${b}`,children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary text-primary-foreground","data-testid":`badge-step-number-${b}`,children:m.step}),r.jsx(se,{className:"text-base","data-testid":`text-step-name-${b}`,children:m.name})]})}),r.jsxs(ee,{className:"space-y-3",children:[r.jsx("p",{className:"text-sm","data-testid":`text-step-description-${b}`,children:m.description}),m.key_points&&m.key_points.length>0&&r.jsxs("div",{"data-testid":`section-key-points-${b}`,children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Key Points:"}),r.jsx("ul",{className:"space-y-1",children:m.key_points.map((N,w)=>r.jsxs("li",{className:"text-sm flex items-start gap-2","data-testid":`text-key-point-${b}-${w}`,children:[r.jsx(Kn,{className:"h-4 w-4 text-green-500 dark:text-green-400 mt-0.5"}),r.jsx("span",{children:N})]},w))})]}),m.technique_search&&r.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":`text-technique-search-${b}`,children:["Search: ",m.technique_search]})]})]},b))]}),r.jsx($p,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4","data-testid":"section-chain-analytics",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Times Recommended"}),r.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-dialog-recommended",children:e.timesRecommended})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Times Saved"}),r.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-dialog-saved",children:e.timesSaved})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Helpful Votes"}),r.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-dialog-helpful",children:e.helpfulCount})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Not Helpful Votes"}),r.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-dialog-not-helpful",children:e.notHelpfulCount})]})]}),r.jsx($p,{}),r.jsxs("div",{"data-testid":"section-helpful-ratio",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Helpful Ratio"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("p",{className:"text-3xl font-bold","data-testid":"stat-dialog-ratio",children:e.helpfulRatio?`${parseFloat(e.helpfulRatio).toFixed(1)}%`:"N/A"}),e.helpfulRatio&&parseFloat(e.helpfulRatio)>=80&&r.jsx(ae,{variant:"default","data-testid":"badge-highly-rated",children:"Highly Rated"})]})]})]})})]})})]})})}function i1e(){var y,j;const[e,t]=x.useState(""),[n,s]=x.useState("7d"),[i,a]=x.useState("all"),[o,l]=x.useState("all"),[c,d]=x.useState(1),u=50,{data:f,isLoading:h}=pe({queryKey:["/api/admin/ai-logs",{dateFilter:n,statusFilter:i,modelFilter:o,page:c}],queryFn:()=>Ie(`/api/admin/ai-logs?dateFilter=${n}&statusFilter=${i}&modelFilter=${o}&page=${c}&pageSize=${u}`)}),{data:p}=pe({queryKey:["/api/admin/ai-logs/stats"],queryFn:()=>Ie("/api/admin/ai-logs/stats")}),v=((y=f==null?void 0:f.logs)==null?void 0:y.filter(m=>{var N,w,S;if(!e)return!0;const b=e.toLowerCase();return((N=m.userMessage)==null?void 0:N.toLowerCase().includes(b))||((w=m.aiResponse)==null?void 0:w.toLowerCase().includes(b))||((S=m.userPhone)==null?void 0:S.toLowerCase().includes(b))}))||[],g=()=>{const m=[["Timestamp","User","User Message","AI Response","Response Time (ms)","Tokens","Model","Status"].join(","),...v.map(S=>{var k,P;return[br(new Date(S.timestamp),"yyyy-MM-dd HH:mm:ss"),S.userPhone||S.userEmail||"Unknown",`"${((k=S.userMessage)==null?void 0:k.replace(/"/g,'""'))||""}"`,`"${((P=S.aiResponse)==null?void 0:P.replace(/"/g,'""'))||""}"`,S.responseTimeMs||0,S.tokensUsed||0,S.model||"Claude Sonnet 4",S.status||"success"].join(",")})].join(`
`),b=new Blob([m],{type:"text/csv"}),N=window.URL.createObjectURL(b),w=document.createElement("a");w.href=N,w.download=`ai-logs-${br(new Date,"yyyy-MM-dd")}.csv`,w.click()};return r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"AI Conversation Logs"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor Prof. OS conversations and performance"})]}),r.jsxs(Z,{onClick:g,variant:"outline","data-testid":"button-export-csv",children:[r.jsx(fj,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(G,{"data-testid":"card-total-conversations",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Conversations"}),r.jsx(sd,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:(p==null?void 0:p.total)||0})})]}),r.jsxs(G,{"data-testid":"card-avg-response-time",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Avg Response Time"}),r.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"text-2xl font-bold","data-testid":"stat-avg-time",children:[(p==null?void 0:p.avgResponseTime)||0,"ms"]})})]}),r.jsxs(G,{"data-testid":"card-total-tokens",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Tokens Used"}),r.jsx(qf,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-tokens",children:((j=p==null?void 0:p.totalTokens)==null?void 0:j.toLocaleString())||0})})]}),r.jsxs(G,{"data-testid":"card-success-rate",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Success Rate"}),r.jsx(jr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"text-2xl font-bold","data-testid":"stat-success-rate",children:[(p==null?void 0:p.successRate)||0,"%"]})})]})]}),r.jsxs(G,{children:[r.jsx(re,{children:r.jsx(se,{children:"Filters"})}),r.jsxs(ee,{className:"flex flex-wrap gap-4",children:[r.jsx("div",{className:"flex-1 min-w-[200px]",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search messages, users...",value:e,onChange:m=>t(m.target.value),className:"pl-10","data-testid":"input-search"})]})}),r.jsxs(et,{value:n,onValueChange:s,children:[r.jsx(Xe,{className:"w-[180px]","data-testid":"select-date-filter",children:r.jsx(tt,{placeholder:"Date range"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"24h",children:"Last 24 hours"}),r.jsx(ne,{value:"7d",children:"Last 7 days"}),r.jsx(ne,{value:"30d",children:"Last 30 days"}),r.jsx(ne,{value:"all",children:"All time"})]})]}),r.jsxs(et,{value:i,onValueChange:a,children:[r.jsx(Xe,{className:"w-[150px]","data-testid":"select-status-filter",children:r.jsx(tt,{placeholder:"Status"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All"}),r.jsx(ne,{value:"success",children:"Success"}),r.jsx(ne,{value:"error",children:"Error"})]})]}),r.jsxs(et,{value:o,onValueChange:l,children:[r.jsx(Xe,{className:"w-[200px]","data-testid":"select-model-filter",children:r.jsx(tt,{placeholder:"AI Model"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Models"}),r.jsx(ne,{value:"gpt-4o",children:"GPT-4o"}),r.jsx(ne,{value:"claude-sonnet-4",children:"Claude Sonnet 4"}),r.jsx(ne,{value:"gpt-4o-fallback",children:"GPT-4o (Fallback)"})]})]})]})]}),r.jsx(G,{children:r.jsxs(ee,{className:"pt-6",children:[h?r.jsx("div",{className:"text-center py-8",children:"Loading..."}):v.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No logs found"}):r.jsx("div",{className:"rounded-md border",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Timestamp"}),r.jsx(X,{children:"User"}),r.jsx(X,{className:"max-w-[300px]",children:"User Message"}),r.jsx(X,{className:"max-w-[300px]",children:"Prof. OS Response"}),r.jsx(X,{children:"AI Model"}),r.jsx(X,{children:"Complexity"}),r.jsx(X,{children:"Time"}),r.jsx(X,{children:"Status"})]})}),r.jsx(wt,{children:v.map(m=>r.jsxs(ke,{"data-testid":`row-log-${m.id}`,children:[r.jsx(W,{className:"text-sm",children:br(new Date(m.timestamp),"MMM dd, HH:mm:ss")}),r.jsx(W,{className:"text-sm",children:m.userPhone||m.userEmail||"Unknown"}),r.jsx(W,{className:"max-w-[300px] truncate text-sm",children:m.userMessage}),r.jsx(W,{className:"max-w-[300px] truncate text-sm",children:m.aiResponse}),r.jsx(W,{children:m.modelUsed==="claude-sonnet-4"?r.jsx(ae,{variant:"default","data-testid":`badge-model-${m.id}`,children:"Claude S4"}):m.modelUsed==="gpt-4o-fallback"?r.jsx(ae,{variant:"secondary","data-testid":`badge-model-${m.id}`,children:"GPT-4o (FB)"}):r.jsx(ae,{variant:"outline","data-testid":`badge-model-${m.id}`,children:"GPT-4o"})}),r.jsx(W,{className:"text-sm",children:m.complexityScore!==null&&m.complexityScore!==void 0?r.jsxs("span",{className:m.complexityScore>7?"text-orange-500 font-semibold":"text-muted-foreground",children:[m.complexityScore,"/10"]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(W,{className:"text-sm",children:m.responseTimeMs?`${m.responseTimeMs}ms`:"-"}),r.jsx(W,{children:m.status==="error"?r.jsxs(ae,{variant:"destructive","data-testid":`badge-status-${m.id}`,children:[r.jsx(lr,{className:"w-3 h-3 mr-1"}),"Error"]}):r.jsxs(ae,{variant:"default","data-testid":`badge-status-${m.id}`,children:[r.jsx(jr,{className:"w-3 h-3 mr-1"}),"Success"]})})]},m.id))})]})}),(f==null?void 0:f.totalPages)>1&&r.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[r.jsx(Z,{variant:"outline",size:"sm",onClick:()=>d(m=>Math.max(1,m-1)),disabled:c===1,"data-testid":"button-prev-page",children:"Previous"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",c," of ",f.totalPages]}),r.jsx(Z,{variant:"outline",size:"sm",onClick:()=>d(m=>Math.min(f.totalPages,m+1)),disabled:c===f.totalPages,"data-testid":"button-next-page",children:"Next"})]})]})})]})})}function a1e(){const{toast:e}=Je(),[t,n]=x.useState(!1),[s,i]=x.useState(null),[a,o]=x.useState({name:"",time:"09:00",message:"",active:!0}),l=()=>{o({name:"",time:"09:00",message:"",active:!0}),i(null)},{data:c,isLoading:d}=pe({queryKey:["/api/admin/schedules"],queryFn:()=>Ie("/api/admin/schedules")}),{data:u}=pe({queryKey:["/api/admin/schedules/stats"],queryFn:()=>Ie("/api/admin/schedules/stats")}),f=qe({mutationFn:async j=>s?await Ie(`/api/admin/schedules/${s.id}`,"PATCH",j):await Ie("/api/admin/schedules","POST",j),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/schedules"]}),_e.invalidateQueries({queryKey:["/api/admin/schedules/stats"]}),n(!1),l(),e({title:s?"Schedule Updated":"Schedule Created",description:s?"Schedule has been updated successfully":"New schedule has been created"})},onError:j=>{e({title:"Error",description:j.message||"Failed to save schedule",variant:"destructive"})}}),h=qe({mutationFn:async j=>await Ie(`/api/admin/schedules/${j}/toggle`,"POST",{}),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/schedules"]}),e({title:"Schedule Updated",description:"Schedule status has been changed"})}}),p=qe({mutationFn:async j=>await Ie(`/api/admin/schedules/${j}`,"DELETE",{}),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/schedules"]}),e({title:"Schedule Deleted",description:"Schedule has been permanently deleted"})}}),v=j=>{i(j),o({name:j.message||"",time:j.scheduleTime||"09:00",message:j.message||"",active:j.active!==!1}),n(!0)},g=j=>{j.preventDefault(),f.mutate(a)},y=(c==null?void 0:c.schedules)||[];return r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"SMS & Email Schedules"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage automated delivery schedules"})]}),r.jsxs(Nn,{open:t,onOpenChange:j=>{j||l(),n(j)},children:[r.jsx(Yf,{asChild:!0,children:r.jsxs(Z,{"data-testid":"button-create-schedule",children:[r.jsx(fv,{className:"w-4 h-4 mr-2"}),"Create Schedule"]})}),r.jsx(mn,{children:r.jsxs("form",{onSubmit:g,children:[r.jsxs(pn,{children:[r.jsx(gn,{children:s?"Edit Schedule":"Create New Schedule"}),r.jsx(zn,{children:s?"Update the schedule details":"Set up a new automated delivery schedule"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"message",children:"Message/Schedule Name"}),r.jsx(Ci,{id:"message",value:a.message,onChange:j=>o({...a,message:j.target.value,name:j.target.value}),placeholder:"Daily technique delivery",required:!0,rows:2,"data-testid":"textarea-message"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"time",children:"Time of Day (24-hour format)"}),r.jsx(je,{id:"time",type:"time",value:a.time,onChange:j=>o({...a,time:j.target.value}),required:!0,"data-testid":"input-schedule-time"})]})]}),r.jsxs(bo,{children:[r.jsx(Z,{type:"button",variant:"outline",onClick:()=>n(!1),"data-testid":"button-cancel",children:"Cancel"}),r.jsx(Z,{type:"submit",disabled:f.isPending,"data-testid":"button-save-schedule",children:f.isPending?"Saving...":s?"Update":"Create"})]})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(G,{"data-testid":"card-total-schedules",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Schedules"}),r.jsx(dv,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:(u==null?void 0:u.total)||0})})]}),r.jsxs(G,{"data-testid":"card-active-schedules",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Active"}),r.jsx(Rr,{className:"h-4 w-4 text-green-500"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-active",children:(u==null?void 0:u.active)||0})})]}),r.jsxs(G,{"data-testid":"card-total-recipients",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Recipients"}),r.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-recipients",children:(u==null?void 0:u.totalRecipients)||0})})]}),r.jsxs(G,{"data-testid":"card-sent-today",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Sent Today"}),r.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-sent-today",children:(u==null?void 0:u.sentToday)||0})})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"All Schedules"}),r.jsx(ze,{children:"Manage your automated delivery schedules"})]}),r.jsx(ee,{children:d?r.jsx("div",{className:"text-center py-8",children:"Loading..."}):y.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No schedules found. Create your first schedule to get started."}):r.jsx("div",{className:"rounded-md border",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Message/Name"}),r.jsx(X,{children:"Time"}),r.jsx(X,{children:"Recipients"}),r.jsx(X,{children:"Last Sent"}),r.jsx(X,{children:"Status"}),r.jsx(X,{className:"text-right",children:"Actions"})]})}),r.jsx(wt,{children:y.map(j=>r.jsxs(ke,{"data-testid":`row-schedule-${j.id}`,children:[r.jsx(W,{className:"font-medium",children:j.message}),r.jsx(W,{children:j.scheduleTime}),r.jsx(W,{children:j.recipientCount||0}),r.jsx(W,{className:"text-sm text-muted-foreground",children:j.lastSent?br(new Date(j.lastSent),"MMM dd, HH:mm"):"Never"}),r.jsx(W,{children:j.active?r.jsxs(ae,{variant:"default","data-testid":`badge-status-${j.id}`,children:[r.jsx(Rr,{className:"w-3 h-3 mr-1"}),"Active"]}):r.jsxs(ae,{variant:"secondary","data-testid":`badge-status-${j.id}`,children:[r.jsx(ug,{className:"w-3 h-3 mr-1"}),"Paused"]})}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>h.mutate(j.id),"data-testid":`button-toggle-${j.id}`,children:j.active?r.jsx(ug,{className:"w-4 h-4"}):r.jsx(Rr,{className:"w-4 h-4"})}),r.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>v(j),"data-testid":`button-edit-${j.id}`,children:r.jsx(rf,{className:"w-4 h-4"})}),r.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>p.mutate(j.id),"data-testid":`button-delete-${j.id}`,children:r.jsx(Si,{className:"w-4 h-4"})})]})})]},j.id))})]})})})]})]})})}function o1e(){var m,b,N;const[e,t]=x.useState(""),[n,s]=x.useState("all"),[i,a]=x.useState("all"),[o,l]=x.useState("all"),[c,d]=x.useState("all"),[u,f]=x.useState(null),{data:h,isLoading:p}=pe({queryKey:["/api/admin/techniques",{instructorFilter:n,categoryFilter:i,scoreFilter:o,statusFilter:c}],queryFn:()=>Ie(`/api/admin/techniques?instructor=${n}&category=${i}&score=${o}&status=${c}`)}),{data:v}=pe({queryKey:["/api/admin/techniques/stats"],queryFn:()=>Ie("/api/admin/techniques/stats")}),{data:g}=pe({queryKey:["/api/admin/techniques/instructors"],queryFn:()=>Ie("/api/admin/techniques/instructors")}),y=((m=h==null?void 0:h.techniques)==null?void 0:m.filter(w=>{var k,P,E;if(!e)return!0;const S=e.toLowerCase();return((k=w.title)==null?void 0:k.toLowerCase().includes(S))||((P=w.instructorName)==null?void 0:P.toLowerCase().includes(S))||((E=w.position)==null?void 0:E.toLowerCase().includes(S))}))||[],j=w=>w>=80?"default":w>=70?"secondary":"destructive";return r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Techniques & Videos"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Browse and manage analyzed BJJ technique videos"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(G,{"data-testid":"card-total-videos",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Videos"}),r.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:(v==null?void 0:v.total)||0})})]}),r.jsxs(G,{"data-testid":"card-avg-score",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Avg Score"}),r.jsx(qn,{className:"h-4 w-4 text-yellow-500"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-avg-score",children:((b=v==null?void 0:v.avgScore)==null?void 0:b.toFixed(1))||0})})]}),r.jsxs(G,{"data-testid":"card-top-instructors",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Unique Instructors"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-instructors",children:(v==null?void 0:v.uniqueInstructors)||0})})]}),r.jsxs(G,{"data-testid":"card-analyzed",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Analyzed"}),r.jsx(jr,{className:"h-4 w-4 text-green-500"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-analyzed",children:(v==null?void 0:v.analyzed)||0})})]})]}),r.jsxs(G,{children:[r.jsx(re,{children:r.jsx(se,{children:"Filters"})}),r.jsxs(ee,{className:"flex flex-wrap gap-4",children:[r.jsx("div",{className:"flex-1 min-w-[200px]",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search techniques, instructors...",value:e,onChange:w=>t(w.target.value),className:"pl-10","data-testid":"input-search"})]})}),r.jsxs(et,{value:n,onValueChange:s,children:[r.jsx(Xe,{className:"w-[200px]","data-testid":"select-instructor",children:r.jsx(tt,{placeholder:"All instructors"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Instructors"}),(N=g==null?void 0:g.instructors)==null?void 0:N.map(w=>r.jsx(ne,{value:w,children:w},w))]})]}),r.jsxs(et,{value:i,onValueChange:a,children:[r.jsx(Xe,{className:"w-[150px]","data-testid":"select-category",children:r.jsx(tt,{placeholder:"Category"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Categories"}),r.jsx(ne,{value:"submission",children:"Submission"}),r.jsx(ne,{value:"sweep",children:"Sweep"}),r.jsx(ne,{value:"pass",children:"Pass"}),r.jsx(ne,{value:"escape",children:"Escape"}),r.jsx(ne,{value:"takedown",children:"Takedown"})]})]}),r.jsxs(et,{value:o,onValueChange:l,children:[r.jsx(Xe,{className:"w-[150px]","data-testid":"select-score",children:r.jsx(tt,{placeholder:"Score range"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Scores"}),r.jsx(ne,{value:"80+",children:"80+ (Elite)"}),r.jsx(ne,{value:"70-79",children:"70-79 (Good)"}),r.jsx(ne,{value:"60-69",children:"60-69 (Fair)"}),r.jsx(ne,{value:"0-59",children:"Below 60"})]})]}),r.jsxs(et,{value:c,onValueChange:d,children:[r.jsx(Xe,{className:"w-[150px]","data-testid":"select-status",children:r.jsx(tt,{placeholder:"Status"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All Status"}),r.jsx(ne,{value:"analyzed",children:"Analyzed"}),r.jsx(ne,{value:"pending",children:"Pending"}),r.jsx(ne,{value:"failed",children:"Failed"})]})]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"All Techniques"}),r.jsx(ze,{children:"View analyzed videos with detailed scoring"})]}),r.jsx(ee,{children:p?r.jsx("div",{className:"text-center py-8",children:"Loading..."}):y.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No techniques found matching your filters."}):r.jsx("div",{className:"rounded-md border",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{className:"max-w-[250px]",children:"Title"}),r.jsx(X,{children:"Instructor"}),r.jsx(X,{children:"Quality"}),r.jsx(X,{children:"Teaching"}),r.jsx(X,{children:"Production"}),r.jsx(X,{children:"Detail"}),r.jsx(X,{className:"text-right",children:"Views"}),r.jsx(X,{className:"text-right",children:"Helpful"}),r.jsx(X,{children:"Date"}),r.jsx(X,{className:"text-right",children:"Actions"})]})}),r.jsx(wt,{children:y.map(w=>{const S=Number(w.finalScore||0),k=Number(w.teachingClarity||0),P=Number(w.productionQuality||0),E=Number(w.keyDetailQuality||0),_=w.viewCount||0,F=w.helpfulRatio||0;return r.jsxs(ke,{"data-testid":`row-technique-${w.id}`,children:[r.jsx(W,{className:"max-w-[250px] truncate font-medium",children:w.title}),r.jsx(W,{className:"text-sm",children:w.instructorName||"Unknown"}),r.jsx(W,{children:r.jsxs(ae,{variant:j(S*10),"data-testid":`badge-score-${w.id}`,children:[S.toFixed(1),"/10"]})}),r.jsx(W,{className:"text-center font-mono text-sm",children:k>0?k.toFixed(1):"-"}),r.jsx(W,{className:"text-center font-mono text-sm",children:P>0?P.toFixed(1):"-"}),r.jsx(W,{className:"text-center font-mono text-sm",children:E>0?E.toFixed(1):"-"}),r.jsx(W,{className:"text-right font-mono text-sm",children:_>0?_.toLocaleString():"-"}),r.jsx(W,{className:"text-right font-mono text-sm",children:F>0?r.jsxs("span",{className:"text-green-600",children:[F,"%"]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(W,{className:"text-sm text-muted-foreground",children:w.createdAt?br(new Date(w.createdAt),"MMM dd"):"N/A"}),r.jsx(W,{className:"text-right",children:r.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>f(w),"data-testid":`button-view-${w.id}`,children:r.jsx(Bn,{className:"w-4 h-4"})})})]},w.id)})})]})})})]}),r.jsx(Nn,{open:!!u,onOpenChange:w=>!w&&f(null),children:r.jsxs(mn,{className:"max-w-3xl",children:[r.jsxs(pn,{children:[r.jsx(gn,{children:"Technique Analysis Details"}),r.jsx(zn,{children:u==null?void 0:u.title})]}),u&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-muted",children:r.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${u.videoId}`,title:u.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Quality Analysis"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Overall"}),r.jsx(qn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"text-2xl font-bold",children:[Number(u.finalScore||0).toFixed(1),"/10"]})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Teaching"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"text-2xl font-bold",children:[Number(u.teachingClarity||0)>0?Number(u.teachingClarity).toFixed(1):"-","/10"]})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Production"}),r.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"text-2xl font-bold",children:[Number(u.productionQuality||0)>0?Number(u.productionQuality).toFixed(1):"-","/10"]})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Detail"}),r.jsx(jr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"text-2xl font-bold",children:[Number(u.keyDetailQuality||0)>0?Number(u.keyDetailQuality).toFixed(1):"-","/10"]})})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-3",children:"User Engagement"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Views"}),r.jsx(Rr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold",children:u.viewCount>0?u.viewCount.toLocaleString():"-"})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Helpful"}),r.jsx(Qi,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.helpfulRatio>0?`${u.helpfulRatio}%`:"-"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.helpfulCount||0," helpful votes"]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Likes"}),r.jsx(Qi,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold",children:u.likeCount>0?u.likeCount.toLocaleString():"-"})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Bookmarks"}),r.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold",children:u.recommendationCount>0?u.recommendationCount:"-"})})]})]})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Instructor:"}),r.jsx("span",{className:"font-medium",children:u.instructorName||"Unknown"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Position:"}),r.jsx("span",{className:"font-medium capitalize",children:u.position||"N/A"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Technique Type:"}),r.jsx("span",{className:"font-medium capitalize",children:u.techniqueType||"N/A"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Belt Appropriate:"}),r.jsx("span",{className:"font-medium capitalize",children:u.beltAppropriate||"All"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Content Level:"}),r.jsx("span",{className:"font-medium",children:u.contentLevel||"N/A"})]})]}),u.keyDetails&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Key Details:"}),r.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:u.keyDetails})]}),r.jsx(Z,{asChild:!0,className:"w-full",children:r.jsx("a",{href:u.videoUrl,target:"_blank",rel:"noopener noreferrer",children:"Watch on YouTube"})})]})]})})]})})}function l1e(){const{toast:e}=Je(),[t,n]=x.useState(null),[s,i]=x.useState(!1),[a,o]=x.useState(null),{data:l,isLoading:c,error:d}=pe({queryKey:["/api/admin/flagged-accounts"],queryFn:()=>Ie("/api/admin/flagged-accounts")}),{data:u}=pe({queryKey:["/api/admin/devices",a],queryFn:()=>Ie(`/api/admin/devices/${a}`),enabled:!!a&&s}),f=qe({mutationFn:async({userId:y,resolution:j})=>await Ie(`/api/admin/flagged-accounts/${y}/review`,"POST",{resolution:j}),onSuccess:(y,j)=>{_e.invalidateQueries({queryKey:["/api/admin/flagged-accounts"]}),e({title:" Account Reviewed",description:j.resolution==="legitimate"?"Account marked as legitimate":"Account flagged as fraudulent"}),n(null)},onError:y=>{e({title:"Error",description:y.message||"Failed to resolve flag",variant:"destructive"})}}),h=(y,j)=>{o(y),n(j),i(!0)},p=y=>{switch(y){case"HIGH":return"bg-red-500/10 text-red-500 border-red-500/20";case"MEDIUM":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"LOW":return"bg-blue-500/10 text-blue-500 border-blue-500/20";default:return"bg-muted text-muted-foreground"}},v=(l==null?void 0:l.filter(y=>!y.isResolved))||[],g=(l==null?void 0:l.filter(y=>y.isResolved))||[];return r.jsx(Qt,{title:"Account Sharing Prevention",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Flagged"}),r.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-flagged",children:(l==null?void 0:l.length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Accounts requiring review"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Unresolved"}),r.jsx(Ni,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-unresolved-count",children:v.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending admin action"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"High Risk"}),r.jsx(Gs,{className:"h-4 w-4 text-red-500"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-500","data-testid":"text-high-risk-count",children:(l==null?void 0:l.filter(y=>y.riskLevel==="HIGH").length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Critical attention needed"})]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Flagged Accounts"}),r.jsx(ze,{children:"Review and take action on accounts with suspicious sharing patterns"})]}),r.jsx(ee,{children:d?r.jsxs("div",{className:"text-center py-8","data-testid":"error-flagged-accounts",children:[r.jsx(wi,{className:"h-12 w-12 mx-auto mb-2 text-red-500"}),r.jsx("p",{className:"text-red-500 font-medium",children:"Failed to load flagged accounts"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d.message})]}):c?r.jsx("div",{className:"flex justify-center py-8","data-testid":"loading-flagged-accounts",children:r.jsx(De,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):v.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-no-flagged-accounts",children:[r.jsx(Qs,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),r.jsx("p",{children:"No flagged accounts to review"})]}):r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"User"}),r.jsx(X,{children:"Risk Level"}),r.jsx(X,{children:"Fraud Score"}),r.jsx(X,{children:"Indicators"}),r.jsx(X,{children:"Devices"}),r.jsx(X,{children:"Flagged"}),r.jsx(X,{className:"text-right",children:"Actions"})]})}),r.jsx(wt,{children:v.map(y=>r.jsxs(ke,{"data-testid":`row-flagged-account-${y.userId}`,children:[r.jsx(W,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:y.name||"Unknown"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:y.phoneNumber})]})}),r.jsx(W,{children:r.jsx(ae,{className:p(y.riskLevel),"data-testid":`badge-risk-${y.userId}`,children:y.riskLevel})}),r.jsx(W,{children:r.jsx("div",{className:"font-mono text-sm","data-testid":`text-fraud-score-${y.userId}`,children:y.fraudScore.toFixed(2)})}),r.jsx(W,{children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[y.fraudIndicators.slice(0,2).map((j,m)=>r.jsx(ae,{variant:"outline",className:"text-xs",children:j},m)),y.fraudIndicators.length>2&&r.jsxs(ae,{variant:"outline",className:"text-xs",children:["+",y.fraudIndicators.length-2]})]})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(nf,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:y.deviceCount})]})}),r.jsx(W,{className:"text-sm text-muted-foreground",children:Hi(new Date(y.flaggedAt),{addSuffix:!0})}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>h(y.userId,y),"data-testid":`button-view-devices-${y.userId}`,children:[r.jsx(Bn,{className:"h-3 w-3 mr-1"}),"View"]}),r.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>f.mutate({userId:y.userId,resolution:"legitimate"}),disabled:f.isPending,"data-testid":`button-mark-legitimate-${y.userId}`,children:[r.jsx(Qs,{className:"h-3 w-3 mr-1"}),"Legitimate"]}),r.jsxs(Z,{size:"sm",variant:"destructive",onClick:()=>f.mutate({userId:y.userId,resolution:"fraudulent"}),disabled:f.isPending,"data-testid":`button-mark-fraudulent-${y.userId}`,children:[r.jsx(wi,{className:"h-3 w-3 mr-1"}),"Fraudulent"]})]})})]},y.id))})]})})]}),g.length>0&&r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Resolved Accounts"}),r.jsx(ze,{children:"Previously reviewed flagged accounts"})]}),r.jsx(ee,{children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"User"}),r.jsx(X,{children:"Risk Level"}),r.jsx(X,{children:"Fraud Score"}),r.jsx(X,{children:"Reviewed"})]})}),r.jsx(wt,{children:g.map(y=>r.jsxs(ke,{className:"opacity-60",children:[r.jsx(W,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:y.name||"Unknown"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:y.phoneNumber})]})}),r.jsx(W,{children:r.jsx(ae,{className:p(y.riskLevel),children:y.riskLevel})}),r.jsx(W,{children:r.jsx("div",{className:"font-mono text-sm",children:y.fraudScore.toFixed(2)})}),r.jsx(W,{className:"text-sm text-muted-foreground",children:y.lastReviewedAt?Hi(new Date(y.lastReviewedAt),{addSuffix:!0}):"Never"})]},y.id))})]})})]}),r.jsx(Nn,{open:s,onOpenChange:i,children:r.jsxs(mn,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(pn,{children:[r.jsx(gn,{children:"Device Details"}),r.jsx(zn,{children:t&&r.jsxs(r.Fragment,{children:["Authorized devices for ",t.name||t.phoneNumber," - ",r.jsxs(ae,{className:p(t.riskLevel),children:[t.riskLevel," RISK"]})]})})]}),t&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs(G,{children:[r.jsx(re,{children:r.jsx(se,{className:"text-sm",children:"Fraud Indicators"})}),r.jsx(ee,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:t.fraudIndicators.map((y,j)=>r.jsx(ae,{variant:"outline",children:y},j))})})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold mb-3",children:["Authorized Devices (",(u==null?void 0:u.length)||0,")"]}),u&&u.length>0?r.jsx("div",{className:"space-y-2",children:u.map(y=>r.jsx(G,{children:r.jsx(ee,{className:"p-4",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(nf,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:y.deviceName}),y.isActive?r.jsx(ae,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:"Active"}):r.jsx(ae,{variant:"outline",children:"Inactive"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"IP:"})," ",y.ipAddress]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Location:"})," ",y.location||"Unknown"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"First seen:"})," ",Hi(new Date(y.firstSeenAt),{addSuffix:!0})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Last seen:"})," ",Hi(new Date(y.lastSeenAt),{addSuffix:!0})]})]}),r.jsxs("div",{className:"mt-2 text-xs text-muted-foreground font-mono",children:["Fingerprint: ",y.fingerprint.substring(0,16),"..."]})]})})})},y.id))}):r.jsx("p",{className:"text-sm text-muted-foreground",children:"No devices found"})]})]})]})})]})})}function c1e(){const{toast:e}=Je(),[t,n]=x.useState(null),[s,i]=x.useState(!1),[a,o]=x.useState(!1),[l,c]=x.useState(""),{data:d,isLoading:u,error:f}=pe({queryKey:["/api/admin/instructors/priority/list"],queryFn:()=>Ie("/api/admin/instructors/priority/list")}),{data:h}=pe({queryKey:["/api/admin/instructors/priority/details",t==null?void 0:t.instructorId],queryFn:()=>Ie(`/api/admin/instructors/priority/${t==null?void 0:t.instructorId}`),enabled:!!t&&s}),p=qe({mutationFn:async b=>{const N=b?`/api/admin/instructors/priority/recalculate/${b}`:"/api/admin/instructors/priority/recalculate";return await Ie(N,"POST",{})},onSuccess:(b,N)=>{_e.invalidateQueries({queryKey:["/api/admin/instructors/priority/list"]}),N&&_e.invalidateQueries({queryKey:["/api/admin/instructors/priority/details",N]}),e({title:" Priority Recalculated",description:N?"Instructor priority updated successfully":`Recalculated priority for ${b.recalculated||0} instructors`})},onError:b=>{e({title:"Error",description:b.message||"Failed to recalculate priority",variant:"destructive"})}}),v=qe({mutationFn:async({instructorId:b,score:N})=>await Ie(`/api/admin/instructors/priority/override/${b}`,"POST",{manualScore:N}),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/instructors/priority/list"]}),t&&_e.invalidateQueries({queryKey:["/api/admin/instructors/priority/details",t.instructorId]}),e({title:" Manual Override Set",description:"Instructor priority manually overridden"}),o(!1),c("")},onError:b=>{e({title:"Error",description:b.message||"Failed to set manual override",variant:"destructive"})}}),g=b=>{n(b),i(!0),o(!1),c("")},y=()=>{if(!t||!l)return;const b=parseFloat(l);if(isNaN(b)||b<0||b>100){e({title:"Invalid Score",description:"Priority score must be between 0 and 100",variant:"destructive"});return}v.mutate({instructorId:t.instructorId,score:b})},j=b=>b>=80?"bg-green-500/10 text-green-500 border-green-500/20":b>=60?"bg-blue-500/10 text-blue-500 border-blue-500/20":b>=40?"bg-yellow-500/10 text-yellow-500 border-yellow-500/20":"bg-red-500/10 text-red-500 border-red-500/20",m=d?[...d].sort((b,N)=>N.priorityScore-b.priorityScore):[];return r.jsx(Qt,{title:"Instructor Priority Management",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Instructor Priority Scores"}),r.jsx("p",{className:"text-muted-foreground",children:"Auto-calculated scores based on YouTube subs, achievements, instructionals, and user feedback"})]}),r.jsxs(Z,{onClick:()=>p.mutate(),disabled:p.isPending,"data-testid":"button-recalculate-all",children:[p.isPending?r.jsx(De,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Recalculate All"]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Instructors"}),r.jsx(oo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-instructors",children:(d==null?void 0:d.length)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"High Priority"}),r.jsx(jn,{className:"h-4 w-4 text-green-500"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-500","data-testid":"text-high-priority-count",children:(d==null?void 0:d.filter(b=>b.priorityScore>=80).length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Score  80"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Manual Overrides"}),r.jsx(rf,{className:"h-4 w-4 text-blue-500"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold text-blue-500","data-testid":"text-manual-override-count",children:(d==null?void 0:d.filter(b=>b.isManualOverride).length)||0})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Avg Priority"}),r.jsx(UI,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-avg-priority",children:d!=null&&d.length?(d.reduce((b,N)=>b+N.priorityScore,0)/d.length).toFixed(1):"0.0"})})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Instructor Rankings"}),r.jsx(ze,{children:"Priority formula: YouTube (30pts) + Achievements (25pts) + Instructionals (20pts) + Feedback (25pts) = 100pts max"})]}),r.jsx(ee,{children:f?r.jsxs("div",{className:"text-center py-8","data-testid":"error-instructors",children:[r.jsx(XCircle,{className:"h-12 w-12 mx-auto mb-2 text-red-500"}),r.jsx("p",{className:"text-red-500 font-medium",children:"Failed to load instructor data"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.message})]}):u?r.jsx("div",{className:"flex justify-center py-8","data-testid":"loading-instructors",children:r.jsx(De,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):m.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-no-instructors",children:"No instructors found"}):r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Rank"}),r.jsx(X,{children:"Instructor"}),r.jsx(X,{children:"Priority Score"}),r.jsx(X,{children:"YouTube"}),r.jsx(X,{children:"Achievements"}),r.jsx(X,{children:"Instructionals"}),r.jsx(X,{children:"Feedback"}),r.jsx(X,{children:"Last Updated"}),r.jsx(X,{className:"text-right",children:"Actions"})]})}),r.jsx(wt,{children:m.map((b,N)=>r.jsxs(ke,{"data-testid":`row-instructor-${b.instructorId}`,children:[r.jsxs(W,{className:"font-medium",children:["#",N+1]}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:b.instructorName}),b.isManualOverride&&r.jsxs(ae,{variant:"outline",className:"text-xs",children:[r.jsx(rf,{className:"h-3 w-3 mr-1"}),"Manual"]})]})}),r.jsx(W,{children:r.jsx(ae,{className:j(b.priorityScore),"data-testid":`badge-priority-${b.instructorId}`,children:b.priorityScore.toFixed(1)})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(hj,{className:"h-3 w-3 text-red-500"}),r.jsx("span",{children:b.youtubeScore.toFixed(1)})]})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(oo,{className:"h-3 w-3 text-yellow-500"}),r.jsx("span",{children:b.achievementScore.toFixed(1)})]})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(yl,{className:"h-3 w-3 text-blue-500"}),r.jsx("span",{children:b.instructionalScore.toFixed(1)})]})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(qn,{className:"h-3 w-3 text-purple-500"}),r.jsx("span",{children:b.feedbackScore.toFixed(1)})]})}),r.jsx(W,{className:"text-sm text-muted-foreground",children:Hi(new Date(b.lastCalculated),{addSuffix:!0})}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Z,{size:"sm",variant:"outline",onClick:()=>g(b),"data-testid":`button-view-details-${b.instructorId}`,children:"View Details"}),r.jsx(Z,{size:"sm",variant:"outline",onClick:()=>p.mutate(b.instructorId),disabled:p.isPending,"data-testid":`button-recalculate-${b.instructorId}`,children:r.jsx(wr,{className:"h-3 w-3"})})]})})]},b.id))})]})})]}),r.jsx(Nn,{open:s,onOpenChange:i,children:r.jsxs(mn,{className:"max-w-2xl",children:[r.jsxs(pn,{children:[r.jsxs(gn,{children:[t==null?void 0:t.instructorName," - Priority Breakdown"]}),r.jsx(zn,{children:"Detailed calculation of instructor priority score"})]}),h&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(G,{children:r.jsxs(re,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{children:"Total Priority Score"}),r.jsxs(ae,{className:j(h.priorityScore),children:[h.priorityScore.toFixed(1)," / 100"]})]}),h.isManualOverride&&r.jsx(ze,{className:"text-blue-500",children:" Manual override active"})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(G,{children:r.jsxs(ee,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hj,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"font-medium",children:"YouTube Subscribers"})]}),r.jsxs("span",{className:"font-bold",children:[h.breakdown.youtube.score," / ",h.breakdown.youtube.maxScore]})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:h.breakdown.youtube.details})]})}),r.jsx(G,{children:r.jsxs(ee,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(oo,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{className:"font-medium",children:"Achievements"})]}),r.jsxs("span",{className:"font-bold",children:[h.breakdown.achievements.score," / ",h.breakdown.achievements.maxScore]})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:h.breakdown.achievements.details})]})}),r.jsx(G,{children:r.jsxs(ee,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yl,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"font-medium",children:"Instructionals"})]}),r.jsxs("span",{className:"font-bold",children:[h.breakdown.instructionals.score," / ",h.breakdown.instructionals.maxScore]})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:h.breakdown.instructionals.details})]})}),r.jsx(G,{children:r.jsxs(ee,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qn,{className:"h-4 w-4 text-purple-500"}),r.jsx("span",{className:"font-medium",children:"User Feedback"})]}),r.jsxs("span",{className:"font-bold",children:[h.breakdown.feedback.score," / ",h.breakdown.feedback.maxScore]})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:h.breakdown.feedback.details})]})})]}),r.jsxs(G,{children:[r.jsx(re,{children:r.jsx(se,{className:"text-sm",children:"Manual Override"})}),r.jsx(ee,{children:a?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(fe,{htmlFor:"manual-score",children:"Priority Score (0-100)"}),r.jsx(je,{id:"manual-score",type:"number",min:"0",max:"100",step:"0.1",value:l,onChange:b=>c(b.target.value),placeholder:"Enter manual priority score","data-testid":"input-manual-score"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Z,{onClick:y,disabled:v.isPending,"data-testid":"button-save-manual-override",children:[r.jsx(YI,{className:"h-4 w-4 mr-2"}),"Save Override"]}),r.jsxs(Z,{variant:"outline",onClick:()=>{o(!1),c("")},"data-testid":"button-cancel-manual-override",children:[r.jsx(ys,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}):r.jsxs(Z,{variant:"outline",onClick:()=>o(!0),"data-testid":"button-edit-manual-override",children:[r.jsx(rf,{className:"h-4 w-4 mr-2"}),"Set Manual Override"]})})]})]})]})})]})})}function d1e(){var g,y,j,m,b,N,w,S,k,P,E,_,F,A,T;const[e,t]=x.useState("24"),{data:n,isLoading:s,error:i}=pe({queryKey:[`/api/admin/activity/stats?hours=${e}`],refetchInterval:3e4,refetchIntervalInBackground:!1}),{data:a,isLoading:o,error:l}=pe({queryKey:["/api/admin/activity/feed?limit=100"],refetchInterval:3e4,refetchIntervalInBackground:!1}),{data:c,isLoading:d,error:u}=pe({queryKey:[`/api/admin/activity/metrics?hours=${e}`],refetchInterval:3e4,refetchIntervalInBackground:!1}),f=n==null?void 0:n.stats,h=(a==null?void 0:a.feed)||[],p=c==null?void 0:c.metrics,v=M=>{switch(M){case"user_signup":return"";case"video_approved":return"";case"video_rejected":return"";case"prof_query":return"";case"video_recommended":return"";case"video_saved":return"";case"referral":return"";case"lifetime_access":return"";default:return""}};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Activity Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"System health and activity monitoring"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:e==="1"?"default":"outline",onClick:()=>t("1"),"data-testid":"button-filter-1h",children:"Last Hour"}),r.jsx(Z,{variant:e==="6"?"default":"outline",onClick:()=>t("6"),"data-testid":"button-filter-6h",children:"6 Hours"}),r.jsx(Z,{variant:e==="24"?"default":"outline",onClick:()=>t("24"),"data-testid":"button-filter-24h",children:"24 Hours"})]})]}),(i||l||u)&&r.jsxs(G,{className:"border-destructive",children:[r.jsx(re,{children:r.jsx(se,{className:"text-destructive",children:"Error Loading Data"})}),r.jsx(ee,{children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:[i&&"Failed to load stats. ",l&&"Failed to load activity feed. ",u&&"Failed to load metrics. ","Please refresh the page."]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(G,{"data-testid":"card-new-users",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"New Users"}),r.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-new-users-count",children:s?"...":(f==null?void 0:f.newUsers)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last ",e," hours"]})]})]}),r.jsxs(G,{"data-testid":"card-video-curation",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:" Video Curation"}),r.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Videos"}),r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-videos",children:s?"...":((g=f==null?void 0:f.curation)==null?void 0:g.totalVideos)||0})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"TODAY'S ACTIVITY:"}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" Videos Saved:"}),r.jsx("span",{className:"font-mono text-green-600","data-testid":"text-videos-saved",children:((y=f==null?void 0:f.curation)==null?void 0:y.videosApproved)||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" Videos Searched:"}),r.jsx("span",{className:"font-mono","data-testid":"text-videos-searched",children:((j=f==null?void 0:f.curation)==null?void 0:j.videosAnalyzed)||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" Videos Rejected:"}),r.jsx("span",{className:"font-mono text-red-600","data-testid":"text-videos-rejected",children:((m=f==null?void 0:f.curation)==null?void 0:m.videosRejected)||0})]})]})]})]})})]}),r.jsxs(G,{"data-testid":"card-engagement",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Engagement"}),r.jsx(Ds,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-active-users",children:s?"...":((b=f==null?void 0:f.engagement)==null?void 0:b.activeUsers)||0}),r.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground mt-1",children:[r.jsxs("span",{children:[" ",((N=f==null?void 0:f.engagement)==null?void 0:N.profQueries)||0," queries"]}),r.jsxs("span",{children:[" ",((w=f==null?void 0:f.engagement)==null?void 0:w.videosSaved)||0," saves"]})]})]})]}),r.jsxs(G,{"data-testid":"card-referrals",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Referrals"}),r.jsx(Lf,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-new-referrals",children:s?"...":((S=f==null?void 0:f.referrals)==null?void 0:S.newReferrals)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["From ",((k=f==null?void 0:f.referrals)==null?void 0:k.uniqueReferrers)||0," referrers"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(G,{className:"lg:col-span-2","data-testid":"card-activity-feed",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Live Activity Feed"}),r.jsx(ze,{children:"Recent system events and user actions"})]}),r.jsx(ee,{children:r.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:o?r.jsx("p",{className:"text-muted-foreground",children:"Loading activity..."}):h.length===0?r.jsx("p",{className:"text-muted-foreground",children:"No recent activity"}):h.map(M=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover-elevate","data-testid":`activity-event-${M.id}`,children:[r.jsx("span",{className:"text-2xl",children:v(M.event_type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:M.description}),r.jsx("p",{className:"text-xs text-muted-foreground",children:br(new Date(M.created_at),"MMM d, h:mm a")})]}),r.jsx(ae,{variant:"outline",className:"text-xs",children:M.event_type.replace("_"," ")})]},M.id))})})]}),r.jsxs(G,{"data-testid":"card-quick-stats",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Quick Stats"}),r.jsx(ze,{children:"System health indicators"})]}),r.jsxs(ee,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"Approval Rate"}),r.jsxs("span",{className:"text-sm font-bold",children:[((P=f==null?void 0:f.curation)==null?void 0:P.approvalRate)||0,"%"]})]}),r.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:r.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${((E=f==null?void 0:f.curation)==null?void 0:E.approvalRate)||0}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"User Engagement"}),r.jsxs("span",{className:"text-sm font-bold",children:[((_=f==null?void 0:f.engagement)==null?void 0:_.activeUsers)||0," active"]})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avg ",Math.round((((F=f==null?void 0:f.engagement)==null?void 0:F.profQueries)||0)/Math.max(((A=f==null?void 0:f.engagement)==null?void 0:A.activeUsers)||1,1))," queries/user"]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"Video Library"}),r.jsx("span",{className:"text-sm font-bold",children:"Growing"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",((T=f==null?void 0:f.curation)==null?void 0:T.videosApproved)||0," videos today"]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{"data-testid":"card-curation-performance",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Curation Performance"}),r.jsx(ze,{children:"Success rates by search query"})]}),r.jsx(ee,{children:r.jsx("div",{className:"space-y-3",children:d?r.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):!(p!=null&&p.curationPerformance)||p.curationPerformance.length===0?r.jsx("p",{className:"text-muted-foreground",children:"No curation data available"}):p.curationPerformance.slice(0,5).map((M,O)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium truncate",children:M.search_query}),r.jsxs(ae,{variant:parseFloat(M.success_rate)>=30?"default":"secondary",children:[M.success_rate,"%"]})]}),r.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Found: ",M.videos_found]}),r.jsxs("span",{className:"text-green-600",children:[" ",M.approved]}),r.jsxs("span",{className:"text-red-600",children:[" ",M.rejected]}),r.jsxs("span",{children:["Avg: ",M.avg_score,"/10"]})]})]},O))})})]}),r.jsxs(G,{"data-testid":"card-top-videos",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Top Performing Videos"}),r.jsx(ze,{children:"Most saved and recommended"})]}),r.jsx(ee,{children:r.jsx("div",{className:"space-y-3",children:d?r.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):!(p!=null&&p.topVideos)||p.topVideos.length===0?r.jsx("p",{className:"text-muted-foreground",children:"No video data available"}):p.topVideos.slice(0,5).map((M,O)=>r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs(ae,{variant:"outline",className:"text-xs",children:["#",O+1]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:M.technique_name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:M.instructor_name}),r.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground mt-1",children:[r.jsxs("span",{children:[" ",M.times_saved," saves"]}),r.jsxs("span",{children:[" ",M.helpful_count," helpful"]}),r.jsxs("span",{children:[" ",M.quality_score]})]})]})]},M.id))})})]}),r.jsxs(G,{"data-testid":"card-user-growth",children:[r.jsxs(re,{children:[r.jsx(se,{children:"User Growth Trend"}),r.jsx(ze,{children:"Signups by hour"})]}),r.jsx(ee,{children:r.jsx("div",{className:"space-y-2",children:d?r.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):!(p!=null&&p.userGrowth)||p.userGrowth.length===0?r.jsx("p",{className:"text-muted-foreground",children:"No growth data available"}):p.userGrowth.slice(0,8).map((M,O)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm font-medium w-16",children:[Math.floor(parseFloat(M.hour)),":00"]}),r.jsx("div",{className:"flex-1 bg-secondary rounded-full h-6 overflow-hidden",children:r.jsx("div",{className:"bg-primary h-full flex items-center px-2",style:{width:`${Math.min(100,parseInt(M.new_users)/Math.max(...p.userGrowth.map(C=>parseInt(C.new_users)))*100)}%`},children:r.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:M.new_users})})})]},O))})})]}),r.jsxs(G,{"data-testid":"card-referral-performance",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Top Referrers"}),r.jsx(ze,{children:"Highest conversion rates"})]}),r.jsx(ee,{children:r.jsx("div",{className:"space-y-3",children:d?r.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):!(p!=null&&p.referralPerformance)||p.referralPerformance.length===0?r.jsx("p",{className:"text-muted-foreground",children:"No referral data available"}):p.referralPerformance.slice(0,5).map((M,O)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:M.referral_code}),r.jsxs(ae,{variant:"default",children:[M.conversion_rate,"% conversion"]})]}),r.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:[" ",M.referrer_phone]}),r.jsxs("span",{children:[" ",M.new_signups," referrals"]})]})]},O))})})]})]})]})}function u1e(){var y;const{toast:e}=Je(),{data:t,isLoading:n}=pe({queryKey:["/api/admin/curation-status"],queryFn:()=>Ie("/api/admin/curation-status"),refetchInterval:1e4}),{data:s}=pe({queryKey:["/api/admin/curation-runs"],queryFn:()=>Ie("/api/admin/curation-runs?limit=20"),refetchInterval:1e4}),i=qe({mutationFn:async j=>await Ie("/api/admin/toggle-curation","POST",{enabled:j}),onSuccess:(j,m)=>{_e.invalidateQueries({queryKey:["/api/admin/curation-status"]}),e({title:m?"Auto-Curation Enabled":"Auto-Curation Disabled",description:m?"Automatic video curation is now running on schedule":"Automatic video curation has been paused"})},onError:j=>{e({title:"Error",description:j.message||"Failed to update settings",variant:"destructive"})}}),a=qe({mutationFn:async()=>await Ie("/api/admin/run-curation","POST",{}),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/curation-status"]}),_e.invalidateQueries({queryKey:["/api/admin/curation-runs"]}),e({title:"Curation Started",description:"Manual curation run started successfully"})},onError:j=>{e({title:"Error",description:j.message||"Failed to start curation",variant:"destructive"})}}),o=(j,m)=>{if(!m)return"In progress...";const b=new Date(j).getTime(),w=new Date(m).getTime()-b,S=Math.floor(w/1e3);if(S<60)return`${S}s`;const k=Math.floor(S/60),P=S%60;return`${k}m ${P}s`},l=j=>new Date(j).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),c=j=>{switch(j){case"completed":return r.jsxs(ae,{variant:"default",className:"bg-green-600",children:[r.jsx(Qs,{className:"w-3 h-3 mr-1"}),"Completed"]});case"running":return r.jsxs(ae,{variant:"secondary",children:[r.jsx(De,{className:"w-3 h-3 mr-1 animate-spin"}),"Running"]});case"failed":return r.jsxs(ae,{variant:"destructive",children:[r.jsx(wi,{className:"w-3 h-3 mr-1"}),"Failed"]});default:return r.jsx(ae,{variant:"outline",children:j})}},d=j=>{if(!j)return r.jsx(ae,{variant:"outline",children:"-"});switch(j){case"ok":return r.jsxs(ae,{variant:"default",className:"bg-green-600 dark:bg-green-700",children:[r.jsx(Ni,{className:"w-3 h-3 mr-1"}),"OK"]});case"low":return r.jsxs(ae,{variant:"secondary",className:"bg-yellow-600 dark:bg-yellow-700 text-white dark:text-white",children:[r.jsx(Gs,{className:"w-3 h-3 mr-1"}),"Low"]});case"high":return r.jsxs(ae,{variant:"secondary",className:"bg-orange-600 dark:bg-orange-700 text-white dark:text-white",children:[r.jsx(Gs,{className:"w-3 h-3 mr-1"}),"High"]});case"critical":return r.jsxs(ae,{variant:"destructive",children:[r.jsx(lr,{className:"w-3 h-3 mr-1"}),"Critical"]});case"no-data":return r.jsxs(ae,{variant:"outline",children:[r.jsx(X7,{className:"w-3 h-3 mr-1"}),"No Data"]});default:return r.jsx(ae,{variant:"outline",children:j})}};if(n)return r.jsx(Qt,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(De,{className:"w-8 h-8 animate-spin"})})});const u=(t==null?void 0:t.enabled)||!1,f=(t==null?void 0:t.today)||{},h=(t==null?void 0:t.quota)||{},p=(t==null?void 0:t.capacity)||{},v=t==null?void 0:t.lastRun,g=(s==null?void 0:s.runs)||[];return r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold",children:"Video Library Auto-Curation"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Automated discovery and quality control for BJJ technique videos"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-muted rounded-lg",children:[r.jsx(fe,{htmlFor:"auto-curation-toggle",className:"cursor-pointer font-medium",children:"Auto-Curation"}),r.jsx(BN,{id:"auto-curation-toggle",checked:u,onCheckedChange:j=>i.mutate(j),disabled:i.isPending,"data-testid":"toggle-auto-curation"}),u?r.jsx(ae,{variant:"default",className:"bg-green-600",children:"ON"}):r.jsx(ae,{variant:"secondary",children:"OFF"})]}),r.jsx(Z,{onClick:()=>a.mutate(),disabled:a.isPending,"data-testid":"button-run-now",children:a.isPending?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Running..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Rr,{className:"w-4 h-4 mr-2"}),"Run Now"]})})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Today's Runs"}),r.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-today-runs",children:f.runs||0}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[f.videosApproved||0," videos added"]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Quota Used"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"stat-quota-used",children:[h.percentUsed||"0","%"]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h.used||0," / ",h.limit||0]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Quota Remaining"}),r.jsx(qn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-quota-remaining",children:((y=h.remaining)==null?void 0:y.toLocaleString())||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"API calls left"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-1",children:[r.jsx(se,{className:"text-sm font-medium",children:"Batch Size"}),r.jsx(Qs,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-batch-size",children:p.batchSize||0}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.runsPerDay||0,"x per day"]})]})]})]}),r.jsxs(G,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[r.jsxs("div",{children:[r.jsx(se,{children:"Recent Curation Runs"}),r.jsx(ze,{children:"Latest automated video discovery sessions"})]}),v&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(Kr,{className:"w-4 h-4"}),"Last run: ",l(v.runDate)]})]})}),r.jsx(ee,{children:g.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No curation runs yet. Click "Run Now" to start the first run.'}):r.jsx("div",{className:"rounded-lg border",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Started"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Guardrail"}),r.jsx(X,{className:"text-right",children:"Reviewed"}),r.jsx(X,{className:"text-right",children:"Added"}),r.jsx(X,{className:"text-right",children:"Rejected"}),r.jsx(X,{className:"text-right",children:"Skipped"}),r.jsx(X,{className:"text-right",children:"Accept Rate"}),r.jsx(X,{className:"text-right",children:"Duration"})]})}),r.jsx(wt,{children:g.map((j,m)=>r.jsxs(ke,{"data-testid":`row-run-${m}`,children:[r.jsx(W,{className:"text-sm",children:l(j.runDate||j.startedAt)}),r.jsx(W,{children:c(j.status)}),r.jsx(W,{children:d(j.guardrailStatus)}),r.jsx(W,{className:"text-right font-mono text-sm",children:j.videosAnalyzed||0}),r.jsx(W,{className:"text-right font-mono text-sm text-green-600",children:j.videosAdded||0}),r.jsx(W,{className:"text-right font-mono text-sm text-muted-foreground",children:j.videosRejected||0}),r.jsx(W,{className:"text-right font-mono text-sm text-muted-foreground",children:r.jsx(CN,{children:r.jsxs(L5,{children:[r.jsx(B5,{asChild:!0,children:r.jsx("span",{className:"cursor-help",children:(j.videosSkippedDuration||0)+(j.videosSkippedDuplicates||0)+(j.videosSkippedQuota||0)+(j.videosSkippedOther||0)})}),r.jsx(AN,{children:r.jsxs("div",{className:"text-xs space-y-1",children:[r.jsxs("div",{children:["Duration: ",j.videosSkippedDuration||0]}),r.jsxs("div",{children:["Duplicates: ",j.videosSkippedDuplicates||0]}),r.jsxs("div",{children:["Quota: ",j.videosSkippedQuota||0]}),r.jsxs("div",{children:["Other: ",j.videosSkippedOther||0]})]})})]})})}),r.jsx(W,{className:"text-right font-mono text-sm",children:j.acceptanceRate?`${Math.round(parseFloat(j.acceptanceRate))}%`:"-"}),r.jsx(W,{className:"text-right text-sm text-muted-foreground",children:o(j.startedAt,j.completedAt)})]},j.id||m))})]})})})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"How Auto-Curation Works"}),r.jsx(ze,{children:"Fully automated video discovery and quality control system"})]}),r.jsxs(ee,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:"1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"YouTube Discovery"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Searches YouTube for BJJ techniques using targeted queries"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:"2"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"AI Quality Analysis"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Claude analyzes teaching quality, instructor credibility, and content value"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:"3"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Metadata Extraction"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Extracts technique details, timestamps, prerequisites, and skill levels"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:"4"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Auto-Accept or Reject"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Videos scoring above threshold are automatically added to library"})]})]})]})]})]})})}function f1e(e){const t=new Date(e),s=new Date().getTime()-t.getTime(),i=Math.floor(s/6e4),a=Math.floor(s/36e5),o=Math.floor(s/864e5);return i<1?"Just now":i<60?`${i} min ago`:a<24?`${a} hours ago`:o===1?"Yesterday":o<7?`${o} days ago`:t.toLocaleDateString()}async function Mi(e,t="GET",n){const s=localStorage.getItem("adminToken"),i=await fetch(e,{method:t,headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},...n?{body:JSON.stringify(n)}:{}});if(!i.ok){const a=await i.json().catch(()=>({message:"Request failed"}));throw new Error(a.message||a.error||"Request failed")}return i.json()}function h1e(){var k,P,E,_,F,A;const e=va(),[t,n]=x.useState(""),[s,i]=x.useState(""),[a,o]=x.useState(""),[l,c]=x.useState(""),[d,u]=x.useState(""),[f,h]=x.useState(""),{data:p}=pe({queryKey:["/api/admin/curation/status"],queryFn:()=>Mi("/api/admin/curation/status"),refetchInterval:3e4}),{data:v}=pe({queryKey:["/api/admin/curation/library-stats"],queryFn:()=>Mi("/api/admin/curation/library-stats")}),{data:g}=pe({queryKey:["/api/admin/curation/active-jobs"],queryFn:()=>Mi("/api/admin/curation/active-jobs"),refetchInterval:5e3}),{data:y}=pe({queryKey:["/api/admin/curation/job-history"],queryFn:()=>Mi("/api/admin/curation/job-history")}),{data:j}=pe({queryKey:["/api/admin/curation/known-instructors"],queryFn:()=>Mi("/api/admin/curation/known-instructors")}),{data:m}=pe({queryKey:["/api/admin/curation/api-quota"],queryFn:()=>Mi("/api/admin/curation/api-quota"),refetchInterval:6e4}),b=["Closed Guard","Half Guard","Open Guard","Butterfly Guard","De La Riva","Mount","Back Control","Side Control","Knee on Belly","Turtle","Standing"],N=qe({mutationFn:async T=>Mi("/api/admin/curation/toggle","POST",{enabled:T}),onSuccess:()=>e.invalidateQueries({queryKey:["/api/admin/curation/status"]})}),w=qe({mutationFn:async T=>Mi("/api/admin/curation/run","POST",T),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/admin/curation/active-jobs"]}),e.invalidateQueries({queryKey:["/api/admin/curation/job-history"]})}}),S=qe({mutationFn:async T=>Mi(`/api/admin/curation/cancel/${T}`,"POST"),onSuccess:()=>e.invalidateQueries({queryKey:["/api/admin/curation/active-jobs"]})});return r.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(sn,{href:"/admin/dashboard",children:r.jsx("button",{className:"p-2 hover:bg-zinc-800 rounded-lg","data-testid":"button-back-dashboard",children:r.jsx(Gn,{className:"w-5 h-5"})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"CURATION COMMAND CENTER"}),r.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"Control and monitor video curation operations"})]})]})}),r.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(wr,{className:"w-5 h-5 text-lime-400"}),r.jsx("h2",{className:"text-lg font-semibold",children:"AUTO CURATION"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-zinc-400 text-sm",children:"Status"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${p!=null&&p.isActive?"bg-lime-400 animate-pulse":"bg-zinc-600"}`}),r.jsx("span",{className:"font-medium",children:p!=null&&p.isActive?"ACTIVE":"PAUSED"}),r.jsx("button",{onClick:()=>N.mutate(!(p!=null&&p.isActive)),disabled:N.isPending,className:`ml-auto px-3 py-1 rounded text-sm font-medium ${p!=null&&p.isActive?"bg-zinc-700 hover:bg-zinc-600":"bg-lime-500 hover:bg-lime-400 text-black"}`,"data-testid":"button-toggle-curation",children:p!=null&&p.isActive?r.jsxs(r.Fragment,{children:[r.jsx(ug,{className:"w-4 h-4 inline mr-1"})," Pause"]}):r.jsxs(r.Fragment,{children:[r.jsx(Rr,{className:"w-4 h-4 inline mr-1"})," Enable"]})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-zinc-400 text-sm",children:"Schedule"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kr,{className:"w-4 h-4 text-zinc-500"}),r.jsx("span",{children:"4x daily (3:15am, 9am, 3pm, 9pm EST)"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-zinc-400 text-sm",children:"Last Run"}),p!=null&&p.lastRun?r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:new Date(p.lastRun.timestamp).toLocaleString()}),r.jsxs("div",{className:"text-sm text-zinc-400",children:["Found: ",p.lastRun.discovered," | Added: ",p.lastRun.added]})]}):r.jsx("div",{className:"text-zinc-500",children:"No runs yet"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-zinc-400 text-sm",children:"Next Run"}),r.jsx("div",{className:"font-medium",children:(p==null?void 0:p.nextRun)||(p!=null&&p.isActive?"Scheduled":"Paused")})]})]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(_l,{className:"w-5 h-5 text-blue-400"}),r.jsx("h2",{className:"text-lg font-semibold",children:"QUALITY THRESHOLDS & LIBRARY STATS"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between py-2 border-b border-zinc-800",children:[r.jsx("span",{className:"text-zinc-400",children:"Pre-filter minimum"}),r.jsx("span",{className:"font-mono text-lime-400",children:"6.0"})]}),r.jsxs("div",{className:"flex justify-between py-2 border-b border-zinc-800",children:[r.jsx("span",{className:"text-zinc-400",children:"Auto-accept threshold"}),r.jsxs("span",{className:"font-mono text-lime-400",children:["7.5 ",r.jsx("span",{className:"text-zinc-500",children:"(7.0 trusted)"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between py-2 border-b border-zinc-800",children:[r.jsx("span",{className:"text-zinc-400",children:"Total Videos"}),r.jsx("span",{className:"font-mono",children:((k=v==null?void 0:v.totalVideos)==null?void 0:k.toLocaleString())||0})]}),r.jsxs("div",{className:"flex justify-between py-2 border-b border-zinc-800",children:[r.jsx("span",{className:"text-zinc-400",children:"Gi / No-Gi / Both"}),r.jsxs("span",{className:"font-mono",children:[(v==null?void 0:v.giVideos)||0," / ",(v==null?void 0:v.nogiVideos)||0," / ",(v==null?void 0:v.bothVideos)||0]})]}),r.jsxs("div",{className:"flex justify-between py-2 border-b border-zinc-800",children:[r.jsx("span",{className:"text-zinc-400",children:"Avg Quality"}),r.jsx("span",{className:"font-mono text-lime-400",children:((P=v==null?void 0:v.avgQualityScore)==null?void 0:P.toFixed(1))||0})]}),r.jsxs("div",{className:"flex justify-between py-2",children:[r.jsx("span",{className:"text-zinc-400",children:"Instructors"}),r.jsx("span",{className:"font-mono",children:(v==null?void 0:v.instructorCount)||0})]})]})]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(fg,{className:"w-5 h-5 text-orange-400"}),r.jsx("h2",{className:"text-lg font-semibold",children:"QUICK CURATION"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(uj,{className:"w-5 h-5 text-purple-400"}),r.jsx("h3",{className:"font-semibold",children:"META TECHNIQUES"})]}),r.jsx("p",{className:"text-sm text-zinc-400",children:"Curate all high-priority techniques"}),r.jsx("button",{onClick:()=>w.mutate({type:"meta"}),disabled:w.isPending,className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded font-medium disabled:opacity-50","data-testid":"button-curate-meta",children:w.isPending?r.jsx(De,{className:"w-4 h-4 animate-spin mx-auto"}):"Run Now"})]}),r.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Co,{className:"w-5 h-5 text-blue-400"}),r.jsx("h3",{className:"font-semibold",children:"INSTRUCTOR"})]}),r.jsxs("select",{value:t,onChange:T=>n(T.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded px-3 py-2","data-testid":"select-instructor",children:[r.jsx("option",{value:"",children:"Select instructor..."}),(j||["John Danaher","Gordon Ryan","Marcelo Garcia","Lachlan Giles","Craig Jones","Bernardo Faria"]).map(T=>r.jsx("option",{value:T,children:T},T))]}),r.jsx("input",{type:"text",value:s,onChange:T=>i(T.target.value),placeholder:"Or enter custom...",className:"w-full bg-zinc-700 border border-zinc-600 rounded px-3 py-2 placeholder-zinc-500","data-testid":"input-custom-instructor"}),r.jsx("button",{onClick:()=>{w.mutate({type:"instructor",query:s||t}),i(""),n("")},disabled:w.isPending||!t&&!s,className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded font-medium disabled:opacity-50","data-testid":"button-curate-instructor",children:"Run Now"})]}),r.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(fg,{className:"w-5 h-5 text-green-400"}),r.jsx("h3",{className:"font-semibold",children:"TECHNIQUE"})]}),r.jsx("input",{type:"text",value:a,onChange:T=>o(T.target.value),placeholder:'e.g. "guillotine"',className:"w-full bg-zinc-700 border border-zinc-600 rounded px-3 py-2 placeholder-zinc-500","data-testid":"input-technique"}),r.jsx("button",{onClick:()=>{w.mutate({type:"technique",query:a}),o("")},disabled:w.isPending||!a,className:"w-full bg-green-600 hover:bg-green-500 text-white py-2 px-4 rounded font-medium disabled:opacity-50","data-testid":"button-curate-technique",children:"Run Now"})]}),r.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nq,{className:"w-5 h-5 text-yellow-400"}),r.jsx("h3",{className:"font-semibold",children:"POSITION"})]}),r.jsxs("select",{value:l,onChange:T=>c(T.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded px-3 py-2","data-testid":"select-position",children:[r.jsx("option",{value:"",children:"Select position..."}),b.map(T=>r.jsx("option",{value:T,children:T},T))]}),r.jsx("button",{onClick:()=>{w.mutate({type:"position",query:l}),c("")},disabled:w.isPending||!l,className:"w-full bg-yellow-600 hover:bg-yellow-500 text-white py-2 px-4 rounded font-medium disabled:opacity-50","data-testid":"button-curate-position",children:"Run Now"})]}),r.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(eq,{className:"w-5 h-5 text-red-400"}),r.jsx("h3",{className:"font-semibold",children:"GI/NOGI BALANCE"})]}),r.jsxs("select",{value:d,onChange:T=>u(T.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded px-3 py-2","data-testid":"select-gi-nogi",children:[r.jsx("option",{value:"",children:"Select type..."}),r.jsx("option",{value:"gi",children:"Gi Only"}),r.jsx("option",{value:"nogi",children:"No-Gi Only"})]}),r.jsx("button",{onClick:()=>{w.mutate({type:"gi-nogi",filter:d}),u("")},disabled:w.isPending||!d,className:"w-full bg-red-600 hover:bg-red-500 text-white py-2 px-4 rounded font-medium disabled:opacity-50","data-testid":"button-curate-gi-nogi",children:"Run Now"})]}),r.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Nr,{className:"w-5 h-5 text-cyan-400"}),r.jsx("h3",{className:"font-semibold",children:"CUSTOM SEARCH"})]}),r.jsx("input",{type:"text",value:f,onChange:T=>h(T.target.value),placeholder:"Any YouTube query...",className:"w-full bg-zinc-700 border border-zinc-600 rounded px-3 py-2 placeholder-zinc-500","data-testid":"input-custom-search"}),r.jsx("button",{onClick:()=>{w.mutate({type:"custom",query:f}),h("")},disabled:w.isPending||!f,className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white py-2 px-4 rounded font-medium disabled:opacity-50","data-testid":"button-curate-custom",children:"Run Now"})]})]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Ds,{className:"w-5 h-5 text-lime-400"}),r.jsx("h2",{className:"text-lg font-semibold",children:"CURATION ACTIVITY"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-medium text-zinc-400 mb-3",children:"ACTIVE JOBS"}),g&&g.length>0?r.jsx("div",{className:"space-y-2",children:g.map(T=>r.jsxs("div",{className:"bg-zinc-800 rounded-lg p-3 flex items-center justify-between","data-testid":`job-active-${T.id}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(De,{className:"w-4 h-4 text-lime-400 animate-spin"}),r.jsxs("span",{className:"capitalize",children:[T.type,': "',T.query,'" (',T.progress,"%)"]})]}),r.jsx("button",{onClick:()=>S.mutate(T.id),className:"text-zinc-400 hover:text-red-400","data-testid":`button-cancel-job-${T.id}`,children:r.jsx(wi,{className:"w-5 h-5"})})]},T.id))}):r.jsx("div",{className:"text-zinc-500 text-sm",children:"No active jobs"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-zinc-400 mb-3",children:"RECENT HISTORY"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-zinc-400 border-b border-zinc-800",children:[r.jsx("th",{className:"text-left py-2 px-3",children:"Type"}),r.jsx("th",{className:"text-left py-2 px-3",children:"Query"}),r.jsx("th",{className:"text-right py-2 px-3",children:"Found"}),r.jsx("th",{className:"text-right py-2 px-3",children:"Added"}),r.jsx("th",{className:"text-right py-2 px-3",children:"When"}),r.jsx("th",{className:"text-center py-2 px-3",children:"Status"})]})}),r.jsxs("tbody",{children:[(y||[]).slice(0,10).map(T=>r.jsxs("tr",{className:"border-b border-zinc-800/50","data-testid":`job-history-${T.id}`,children:[r.jsx("td",{className:"py-2 px-3 capitalize",children:T.type}),r.jsx("td",{className:"py-2 px-3 text-zinc-400",children:T.query||"Scheduled"}),r.jsx("td",{className:"py-2 px-3 text-right",children:T.found}),r.jsx("td",{className:"py-2 px-3 text-right text-lime-400",children:T.added}),r.jsx("td",{className:"py-2 px-3 text-right text-zinc-500",children:f1e(T.completedAt||T.startedAt)}),r.jsxs("td",{className:"py-2 px-3 text-center",children:[T.status==="completed"&&r.jsx(jr,{className:"w-4 h-4 text-lime-400 inline"}),T.status==="failed"&&r.jsx(wi,{className:"w-4 h-4 text-red-400 inline"}),T.status==="cancelled"&&r.jsx(lr,{className:"w-4 h-4 text-yellow-400 inline"})]})]},T.id)),(!y||y.length===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"py-4 text-center text-zinc-500",children:"No job history"})})]})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(hj,{className:"w-5 h-5 text-red-500"}),r.jsx("h2",{className:"text-lg font-semibold",children:"CHANNEL MANAGEMENT"})]}),r.jsx("h3",{className:"text-sm font-medium text-zinc-400 mb-3",children:"TRUSTED CHANNELS (7.0 threshold)"}),r.jsxs("div",{className:"space-y-2",children:[["BJJ Fanatics","Bernardo Faria BJJ","Lachlan Giles","John Danaher","B-Team Jiu Jitsu","FloGrappling"].map(T=>r.jsx("div",{className:"flex items-center justify-between py-2 px-3 bg-zinc-800 rounded","data-testid":`channel-${T.replace(/\s+/g,"-")}`,children:r.jsx("span",{children:T})},T)),r.jsxs("button",{className:"flex items-center gap-2 text-sm text-lime-400 hover:text-lime-300 mt-2","data-testid":"button-add-channel",children:[r.jsx(fv,{className:"w-4 h-4"})," Add Channel"]})]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(uj,{className:"w-5 h-5 text-blue-400"}),r.jsx("h2",{className:"text-lg font-semibold",children:"API USAGE"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-zinc-400",children:"YouTube API"}),r.jsxs("span",{className:"font-mono",children:[((E=m==null?void 0:m.youtubeUsed)==null?void 0:E.toLocaleString())||0," / ",((_=m==null?void 0:m.youtubeLimit)==null?void 0:_.toLocaleString())||1e4," daily"]})]}),r.jsx("div",{className:"h-3 bg-zinc-800 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full ${((m==null?void 0:m.youtubeUsed)||0)/((m==null?void 0:m.youtubeLimit)||1e4)>.8?"bg-red-500":"bg-blue-500"}`,style:{width:`${Math.min(((m==null?void 0:m.youtubeUsed)||0)/((m==null?void 0:m.youtubeLimit)||1e4)*100,100)}%`}})})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-zinc-400",children:"Gemini API"}),r.jsxs("span",{className:"font-mono",children:["~$",((F=m==null?void 0:m.geminiCostToday)==null?void 0:F.toFixed(2))||"0.00"," today | ~$",((A=m==null?void 0:m.geminiCostMonth)==null?void 0:A.toFixed(2))||"0.00"," month"]})]})]})]})]})})}function m1e(){var g,y,j;const[e,t]=x.useState("today"),[n,s]=x.useState(30),[i,a]=x.useState(!1),{data:o,isLoading:l,refetch:c,dataUpdatedAt:d}=pe({queryKey:["/api/analytics/stats",e],queryFn:async()=>{const m=await fetch(`/api/analytics/stats?range=${e}`,{credentials:"include"});if(!m.ok)throw new Error("Failed to fetch analytics");return m.json()},refetchInterval:3e4}),{data:u,refetch:f}=pe({queryKey:["/api/analytics/raw-visitors",e],queryFn:async()=>{const m=await fetch(`/api/analytics/raw-visitors?range=${e}`,{credentials:"include"});if(!m.ok)throw new Error("Failed to fetch raw data");return m.json()},enabled:i,refetchInterval:3e4});x.useEffect(()=>{const m=setInterval(()=>{s(b=>b<=1?30:b-1)},1e3);return()=>clearInterval(m)},[]),x.useEffect(()=>{s(30)},[d]);const h=m=>{t(m)},p=()=>{c(),i&&f(),s(30)},v=m=>new Date(m).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return l||!o?r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-analytics-title",children:"Website Analytics"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Track visitor stats, geographic breakdown, and top pages"})]})}),r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-muted-foreground",children:"Loading analytics..."})})]})}):r.jsx(Qt,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-analytics-title",children:"Website Analytics"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Track visitor stats, geographic breakdown, and top pages"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-green-500/10 border border-green-500/30 px-3 py-2 rounded-lg","data-testid":"live-visitors-indicator",children:[r.jsxs("div",{className:"relative",children:[r.jsx(GI,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),r.jsxs("span",{className:"text-green-500 font-semibold",children:[o.liveVisitors," live"]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground text-sm","data-testid":"refresh-countdown",children:[r.jsx(Kr,{className:"w-3.5 h-3.5"}),r.jsxs("span",{children:["Refreshing in ",n,"s"]})]}),r.jsxs(et,{value:e,onValueChange:m=>h(m),children:[r.jsxs(Xe,{className:"w-[160px]","data-testid":"select-time-range",children:[r.jsx(dv,{className:"w-4 h-4 mr-2"}),r.jsx(tt,{})]}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"today","data-testid":"option-today",children:"Today"}),r.jsx(ne,{value:"7d","data-testid":"option-7d",children:"Last 7 Days"}),r.jsx(ne,{value:"30d","data-testid":"option-30d",children:"Last 30 Days"}),r.jsx(ne,{value:"all","data-testid":"option-all",children:"All Time"})]})]}),r.jsxs(Z,{variant:"outline",size:"sm",onClick:p,"data-testid":"button-refresh-analytics",children:[r.jsx(fq,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Views"}),r.jsx(Bn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-views",children:((g=o==null?void 0:o.stats)==null?void 0:g.totalViews)??0}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e==="today"&&"Page views in the last 24 hours",e==="7d"&&"Page views in the last 7 days",e==="30d"&&"Page views in the last 30 days",e==="all"&&"Total page views all time"]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Unique Visitors"}),r.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-unique-visitors",children:((y=o==null?void 0:o.stats)==null?void 0:y.uniqueVisitors)??0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Real humans (bots filtered)"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Sessions"}),r.jsx(cj,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-sessions",children:((j=o==null?void 0:o.stats)==null?void 0:j.sessions)??0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active browsing sessions"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Bots Filtered"}),r.jsx(J7,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-500","data-testid":"text-bot-count",children:(o==null?void 0:o.botCount)??0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Crawlers, scrapers, bots excluded"})]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(rb,{className:"w-5 h-5"}),"Device Breakdown"]}),r.jsx(ze,{children:"Mobile vs Desktop visitors (bots excluded)"})]}),r.jsx(ee,{children:o!=null&&o.deviceBreakdown&&o.deviceBreakdown.length>0?r.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:o.deviceBreakdown.map((m,b)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg","data-testid":`device-${m.deviceType||"unknown"}`,children:[m.deviceType==="mobile"?r.jsx(nf,{className:"w-8 h-8 text-blue-500"}):m.deviceType==="tablet"?r.jsx(nf,{className:"w-8 h-8 text-purple-500"}):r.jsx(rb,{className:"w-8 h-8 text-green-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold capitalize",children:m.deviceType||"Unknown"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.views," views (",m.uniqueVisitors," unique)"]})]})]},b))}):r.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No device data available"})})]}),r.jsxs(Il,{defaultValue:"pages",className:"space-y-4",children:[r.jsxs(Eo,{children:[r.jsx(an,{value:"pages",children:"Top Pages"}),r.jsx(an,{value:"sources",children:"Traffic Sources"}),r.jsx(an,{value:"raw",onClick:()=>a(!0),children:"Raw Visitor Data"})]}),r.jsx(on,{value:"pages",children:r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(cj,{className:"w-5 h-5"}),"Top Pages"]}),r.jsx(ze,{children:"Most visited pages (bots excluded)"})]}),r.jsx(ee,{children:o!=null&&o.topPages&&o.topPages.length>0?r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Page Path"}),r.jsx(X,{className:"text-right",children:"Views"})]})}),r.jsx(wt,{children:o.topPages.map((m,b)=>r.jsxs(ke,{"data-testid":`row-top-page-${b}`,children:[r.jsx(W,{className:"font-mono text-sm",children:m.pagePath}),r.jsx(W,{className:"text-right",children:r.jsx(ae,{variant:"secondary",children:m.views})})]},b))})]}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No page views recorded"})})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Xk,{className:"w-5 h-5"}),"Traffic Sources"]}),r.jsx(ze,{children:"Where visitors came from"})]}),r.jsx(ee,{children:o!=null&&o.sources&&o.sources.length>0?r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Source"}),r.jsx(X,{className:"text-right",children:"Views"})]})}),r.jsx(wt,{children:o.sources.map((m,b)=>r.jsxs(ke,{"data-testid":`row-source-${b}`,children:[r.jsx(W,{children:m.source??"Direct"}),r.jsx(W,{className:"text-right",children:r.jsx(ae,{variant:"secondary",children:m.views})})]},b))})]}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No traffic source data"})})]})]})}),r.jsx(on,{value:"sources",children:r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(lq,{className:"w-5 h-5"}),"USA States Breakdown"]}),r.jsx(ze,{children:"Top 20 US states by visitor count"})]}),r.jsx(ee,{children:o!=null&&o.usaStates&&o.usaStates.length>0?r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"State"}),r.jsx(X,{className:"text-right",children:"Views"}),r.jsx(X,{className:"text-right",children:"Visitors"})]})}),r.jsx(wt,{children:o.usaStates.map((m,b)=>r.jsxs(ke,{"data-testid":`row-state-${m.stateCode??b}`,children:[r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ae,{variant:"outline",className:"font-mono",children:m.stateCode??"Unknown"}),r.jsx("span",{children:m.stateName??"Unknown"})]})}),r.jsx(W,{className:"text-right",children:r.jsx(ae,{variant:"secondary",children:m.views})}),r.jsx(W,{className:"text-right",children:r.jsx(ae,{variant:"secondary",children:m.uniqueVisitors})})]},b))})]}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No US state data available"})})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Xk,{className:"w-5 h-5"}),"Countries Breakdown"]}),r.jsx(ze,{children:"Top 20 countries by visitor count"})]}),r.jsx(ee,{children:o!=null&&o.countries&&o.countries.length>0?r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Country"}),r.jsx(X,{className:"text-right",children:"Views"}),r.jsx(X,{className:"text-right",children:"Visitors"})]})}),r.jsx(wt,{children:o.countries.map((m,b)=>r.jsxs(ke,{"data-testid":`row-country-${m.countryCode??b}`,children:[r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ae,{variant:"outline",className:"font-mono",children:m.countryCode??"Unknown"}),r.jsx("span",{children:m.countryName??"Unknown"})]})}),r.jsx(W,{className:"text-right",children:r.jsx(ae,{variant:"secondary",children:m.views})}),r.jsx(W,{className:"text-right",children:r.jsx(ae,{variant:"secondary",children:m.uniqueVisitors})})]},b))})]}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No country data available"})})]})]})}),r.jsx(on,{value:"raw",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Mn,{className:"w-5 h-5"}),"Raw Visitor Data"]}),r.jsxs(ze,{children:["Detailed visitor information for verification (",(u==null?void 0:u.uniqueVisitors)??0," unique visitors today)"]})]}),r.jsx(ee,{children:u!=null&&u.visitors&&u.visitors.length>0?r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Visitor ID"}),r.jsx(X,{children:"Device"}),r.jsx(X,{children:"Browser/OS"}),r.jsx(X,{children:"Location"}),r.jsx(X,{children:"Pages"}),r.jsx(X,{children:"First Seen"}),r.jsx(X,{children:"Last Seen"})]})}),r.jsx(wt,{children:u.visitors.map((m,b)=>r.jsxs(ke,{"data-testid":`row-visitor-${b}`,children:[r.jsxs(W,{className:"font-mono text-xs",children:[m.visitorId.slice(0,8),"..."]}),r.jsx(W,{children:m.deviceType==="mobile"?r.jsxs(ae,{variant:"outline",className:"gap-1",children:[r.jsx(nf,{className:"w-3 h-3"})," Mobile"]}):r.jsxs(ae,{variant:"outline",className:"gap-1",children:[r.jsx(rb,{className:"w-3 h-3"})," Desktop"]})}),r.jsxs(W,{className:"text-sm",children:[m.browser||"Unknown"," / ",m.os||"Unknown"]}),r.jsx(W,{children:r.jsx(ae,{variant:"secondary",children:m.location||"Unknown"})}),r.jsx(W,{children:r.jsxs(ae,{children:[m.pageViews," pages"]})}),r.jsx(W,{className:"text-sm",children:v(m.firstSeen)}),r.jsx(W,{className:"text-sm",children:v(m.lastSeen)})]},b))})]}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:i?"No visitor data for today":"Click to load raw visitor data"})})]})})]})]})})}const p1e=["How many users signed up today?","What's the current MRR?","How many videos were added this week?","What's the trial conversion rate?","Are there any curation jobs running?","Show me today's key metrics"];function g1e(){const[e,t]=x.useState(""),[n,s]=x.useState(null),i=x.useRef(null),a=x.useRef(null),{toast:o}=Je(),{data:l,isLoading:c}=pe({queryKey:["/api/admin/dev-os/history"],refetchInterval:5e3}),d=(l==null?void 0:l.messages)||[];x.useEffect(()=>{if(console.log(" [FRONTEND] History data updated:",{messageCount:d.length,isLoading:c}),d.length>0){const j=d.slice(-3);console.log(" [FRONTEND] Last 3 messages:"),j.forEach((m,b)=>{var N,w;console.log(`  ${b+1}. Role: ${m.role}, Content length: ${((N=m.content)==null?void 0:N.length)||0}, Content: ${((w=m.content)==null?void 0:w.substring(0,100))||"[EMPTY]"}`)})}},[d,c]);const u=qe({mutationFn:async j=>{var b;console.log(" [FRONTEND] Sending message to Dev OS:",j);const m=await Ie("/api/admin/dev-os/chat","POST",{message:j});return console.log(" [FRONTEND] Response received:",m),console.log(" [FRONTEND] Response keys:",Object.keys(m||{})),console.log(" [FRONTEND] Response.response field:",m==null?void 0:m.response),console.log(" [FRONTEND] Response.response length:",(b=m==null?void 0:m.response)==null?void 0:b.length),m},onSuccess:async j=>{console.log(" [FRONTEND] Mutation success, data:",j),console.log(" [FRONTEND] Invalidating history query..."),await _e.invalidateQueries({queryKey:["/api/admin/dev-os/history"]}),console.log(" [FRONTEND] History query invalidated")},onError:j=>{console.error(" [FRONTEND] Mutation error:",j),o({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}}),f=qe({mutationFn:async()=>Ie("/api/admin/dev-os/clear-history","POST",{}),onSuccess:async()=>{await _e.invalidateQueries({queryKey:["/api/admin/dev-os/history"]}),o({title:"Chat Cleared",description:"Your chat history has been cleared"})},onError:()=>{o({title:"Error",description:"Failed to clear history",variant:"destructive"})}}),h=qe({mutationFn:async()=>Ie("/api/admin/dev-os/daily-report","GET",void 0),onSuccess:async()=>{await _e.invalidateQueries({queryKey:["/api/admin/dev-os/history"]}),o({title:"Daily Report Generated",description:"Check the chat for your daily report"})},onError:()=>{o({title:"Error",description:"Failed to generate daily report",variant:"destructive"})}}),p=j=>{const m=String(j||e);m.trim()&&(t(""),u.mutate(m))},v=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),p())},g=j=>{navigator.clipboard.writeText(j.content),s(j.id),setTimeout(()=>s(null),2e3),o({title:"Copied",description:"Message copied to clipboard"})},y=()=>{var j;(j=i.current)==null||j.scrollIntoView({behavior:"smooth"})};return x.useEffect(()=>{y()},[d]),x.useEffect(()=>{a.current&&(a.current.style.height="auto",a.current.style.height=a.current.scrollHeight+"px")},[e]),r.jsx(Qt,{children:r.jsxs("div",{className:"admin-chat-container",children:[r.jsxs("div",{className:"chat-page-header",children:[r.jsx("div",{className:"chat-header-title",children:r.jsx("h2",{children:"Dev OS"})}),r.jsxs("div",{className:"chat-header-actions",children:[r.jsxs(Z,{variant:"outline",onClick:()=>h.mutate(),disabled:h.isPending,className:"chat-action-btn","data-testid":"button-daily-report",children:[r.jsx(Df,{className:"w-4 h-4 btn-icon"}),r.jsx("span",{className:"btn-label",children:"Daily Report"})]}),r.jsxs(Z,{variant:"outline",onClick:()=>f.mutate(),disabled:d.length===0||f.isPending,className:"chat-action-btn","data-testid":"button-clear-chat",children:[r.jsx("span",{className:"btn-icon",children:""}),r.jsx("span",{className:"btn-label",children:"Clear History"})]})]})]}),r.jsxs(G,{className:"quick-prompts-section p-4",children:[r.jsx("h3",{className:"quick-prompts-title",children:"Quick Prompts"}),r.jsx("div",{className:"quick-prompts-grid",children:p1e.map((j,m)=>r.jsx(ae,{variant:"outline",className:"quick-prompt-badge cursor-pointer hover-elevate active-elevate-2",onClick:()=>p(j),"data-testid":`quick-prompt-${m}`,children:j},m))})]}),r.jsxs("div",{className:"chat-messages-wrapper",children:[r.jsxs("div",{className:"chat-messages-list",children:[c&&r.jsx("div",{className:"chat-loading",children:"Loading chat history..."}),!c&&d.length===0&&r.jsxs("div",{className:"chat-empty",children:[r.jsx("div",{className:"chat-empty-icon",children:r.jsx(ll,{})}),r.jsx("p",{className:"text-lg font-medium",children:"Start chatting with Dev OS"}),r.jsx("p",{className:"chat-empty-text",children:"Try one of the quick prompts above or type your own message"}),r.jsx("p",{className:"text-xs mt-2 opacity-60",children:"Messages persist for 48 hours"})]}),d.map(j=>r.jsx("div",{className:`flex ${j.role==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg p-4 relative group ${j.role==="user"?"bg-primary text-primary-foreground":j.messageType==="report"?"bg-accent border-2 border-primary":"bg-muted"}`,"data-testid":`message-${j.role}`,children:[r.jsx("button",{onClick:()=>g(j),className:`absolute top-2 right-2 p-1.5 rounded-md opacity-0 group-hover:opacity-100 transition-opacity ${j.role==="user"?"hover:bg-primary-foreground/20":"hover:bg-muted-foreground/20"}`,"data-testid":`button-copy-${j.id}`,children:n===j.id?r.jsx(Kn,{className:"w-4 h-4"}):r.jsx(dg,{className:"w-4 h-4"})}),j.messageType==="report"&&r.jsxs(ae,{variant:"secondary",className:"mb-2",children:[r.jsx(Df,{className:"w-3 h-3 mr-1"}),"Daily Report"]}),r.jsx("p",{className:"whitespace-pre-wrap pr-8",children:j.content}),r.jsx("p",{className:"text-xs mt-2 opacity-70",children:new Date(j.createdAt).toLocaleString()})]})},j.id)),u.isPending&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-muted rounded-lg p-4",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),r.jsx("div",{ref:i})]}),r.jsx("div",{className:"chat-input-wrapper",children:r.jsxs("div",{className:"chat-input-form",children:[r.jsx("div",{className:"chat-textarea-wrapper",children:r.jsx(Ci,{ref:a,value:e,onChange:j=>t(j.target.value),onKeyDown:v,placeholder:"Ask about BJJ OS metrics, system health, or business data...",className:"chat-textarea",rows:1,"data-testid":"input-message"})}),r.jsx(Z,{onClick:()=>p(),disabled:!e.trim()||u.isPending,className:"chat-send-btn","data-testid":"button-send",children:r.jsx(zf,{className:"w-4 h-4"})})]})})]})]})})}function x1e(){const[e,t]=x.useState({}),[n,s]=x.useState({}),[i,a]=x.useState([]),[o,l]=x.useState("idle"),[c,d]=x.useState(!1),[u,f]=x.useState({qualityThreshold:7,videosPerRun:20,focusInstructors:""}),[h,p]=x.useState([]),[v,g]=x.useState(null),y=x.useRef(null),j=x.useRef(null),{toast:m}=Je(),[b,N]=x.useState(!1),[w,S]=x.useState(null),[k,P]=x.useState(null),[E,_]=x.useState(!1),[F,A]=x.useState(""),[T,M]=x.useState(""),[O,C]=x.useState(""),[R,I]=x.useState(""),[B,H]=x.useState(""),[Q,D]=x.useState(""),[te,V]=x.useState(null),[J,me]=x.useState(!0),[de,ve]=x.useState(null),[ce,U]=x.useState([]),[L,z]=x.useState(!0),[Ne,le]=x.useState(null),[Ae,Ke]=x.useState([]),[Fe,ht]=x.useState(!0),[nt,pt]=x.useState(null);x.useEffect(()=>{ye(),ge(),Ot(),Y(),ie()},[]);const Ot=async()=>{try{const Ge=await(await fetch("/api/admin/curation/auto-status")).json();Ge&&(me(Ge.enabled),ve(Ge.lastRun))}catch(he){console.error("Failed to load auto curation status:",he)}},$=async()=>{try{(await fetch("/api/admin/curation/auto-toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!J})})).ok&&(me(!J),m({title:J?"Auto Curation Disabled":"Auto Curation Enabled",description:J?"Automatic curation paused":"Automatic curation will resume on schedule"}))}catch(he){console.error("Failed to toggle auto curation:",he),m({title:"Error",description:"Failed to toggle auto curation",variant:"destructive"})}},Y=async()=>{z(!0),le(null);try{const he=await fetch("/api/admin/instructors/all");if(!he.ok)throw new Error("Failed to fetch instructors");const Ge=await he.json();Ge.instructors&&U(Ge.instructors)}catch(he){console.error("Failed to load instructors:",he),le(he.message||"Failed to load instructors")}finally{z(!1)}},ie=async()=>{ht(!0),pt(null);try{const he=await fetch("/api/admin/positions/all");if(!he.ok)throw new Error("Failed to fetch positions");const Ge=await he.json();Ge.positions&&Ke(Ge.positions)}catch(he){console.error("Failed to load positions:",he),pt(he.message||"Failed to load positions")}finally{ht(!1)}};x.useEffect(()=>{j.current&&h.length>0&&j.current.scrollIntoView({behavior:"smooth"})},[h]);const be=he=>{y.current&&y.current.close(),g(he),p([]);const Ge=new EventSource(`/api/admin/curation/stream?runId=${he}`);y.current=Ge,Ge.onmessage=Lt=>{try{const at=JSON.parse(Lt.data);at.type==="success"&&at.message.includes("complete")?(p(dt=>[...dt,{id:crypto.randomUUID(),timestamp:at.time||new Date().toISOString(),message:at.message,icon:at.icon||""}]),l("idle"),ye(),Ge.close()):at.type==="error"?(p(dt=>[...dt,{id:crypto.randomUUID(),timestamp:at.time||new Date().toISOString(),message:at.message,icon:at.icon||""}]),l("idle"),Ge.close()):p(dt=>[...dt,{id:crypto.randomUUID(),timestamp:at.time||new Date().toISOString(),message:at.message,icon:at.icon||"",detail:at.data}])}catch(at){console.error("Failed to parse SSE event:",at)}},Ge.onerror=()=>{console.log("SSE connection closed or error"),Ge.close(),l("idle"),p(Lt=>[...Lt,{id:crypto.randomUUID(),timestamp:new Date().toISOString(),message:"Connection lost - check logs for final results",icon:""}]),ye()}};x.useEffect(()=>()=>{y.current&&y.current.close()},[]);const ye=async()=>{try{const Ge=await(await fetch("/api/admin/command/log?limit=20")).json();Ge.success&&a(Ge.logs)}catch(he){console.error("Failed to load command log:",he)}},ge=async()=>{var he;try{const Lt=await(await fetch("/api/admin/curation/settings")).json();Lt&&f({qualityThreshold:Lt.qualityThreshold||7,videosPerRun:Lt.videosPerRun||20,focusInstructors:((he=Lt.focusInstructors)==null?void 0:he.join(", "))||""})}catch(Ge){console.error("Failed to load settings:",Ge)}},Pe=async()=>{try{(await fetch("/api/admin/curation/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qualityThreshold:u.qualityThreshold,videosPerRun:u.videosPerRun,focusInstructors:u.focusInstructors.split(",").map(Ge=>Ge.trim()).filter(Boolean)})})).ok&&m({title:" Settings Saved",description:"Changes will apply to next curation run"})}catch(he){m({title:" Failed to Save",description:he.message,variant:"destructive"})}},We=async(he,Ge,Lt)=>{const at=Ge==null?void 0:Ge.trim();if(!at&&he!=="meta"){m({title:"Missing Query",description:"Please enter a search term",variant:"destructive"});return}V(he);try{const dt=await fetch("/api/admin/curation/quick-run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:he,query:at})}),Ss=await dt.json();dt.ok?(m({title:" Quick Curation Started",description:`${he}: "${at||"meta techniques"}" - Results in 5-10 minutes`}),Lt&&Lt()):m({title:" Curation Failed",description:Ss.error||"Unknown error",variant:"destructive"})}catch(dt){m({title:" Request Failed",description:dt.message,variant:"destructive"})}finally{V(null)}},_t=async(he=["all"])=>{N(!0),S(null),m({title:" Running QA Tests",description:"This may take 2-5 minutes depending on test categories..."});const Ge=new AbortController,Lt=setTimeout(()=>Ge.abort(),6e5);try{const at=await fetch("/api/admin/test-professor-os",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categories:he}),signal:Ge.signal});if(clearTimeout(Lt),!at.ok)throw new Error(`HTTP ${at.status}: ${at.statusText}`);const dt=await at.json();if(dt.error)throw new Error(dt.error);if(typeof dt.passPercentage!="number")throw console.error("Invalid report structure:",dt),new Error("Invalid test report format");S(dt),m({title:dt.passPercentage>=80?" QA Tests Complete":" QA Tests Complete",description:`${dt.passed}/${dt.totalTests} passed (${dt.passPercentage}%)`,variant:dt.passPercentage>=80?"default":"destructive"})}catch(at){clearTimeout(Lt);const dt=at.name==="AbortError"?"Test timed out after 10 minutes":at.message;m({title:" QA Test Failed",description:dt,variant:"destructive"})}finally{N(!1)}},nn=async()=>{_(!0);try{const Ge=await(await fetch("/api/admin/test-professor-os/data-quality")).json();P(Ge),m({title:Ge.healthPercentage>=95?" Data Quality Good":" Data Issues Found",description:Ge.summary,variant:Ge.healthPercentage>=95?"default":"destructive"})}catch(he){m({title:" Data Quality Check Failed",description:he.message,variant:"destructive"})}finally{_(!1)}},Na=async(he,Ge={})=>{var Lt;t(at=>({...at,[he]:!0}));try{const dt=await(await fetch("/api/admin/command",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:he,params:Ge})})).json();dt.result&&s(Bl=>({...Bl,[he]:dt.result}));const Ss=dt.runId||((Lt=dt.data)==null?void 0:Lt.runId);he==="run_curation"&&dt.success&&Ss?(l("running"),be(Ss),m({title:" Curation Started",description:"Watch live progress below!"})):he==="run_curation"&&dt.success?(l("running"),m({title:" Curation Started",description:"Running in background. You'll receive an email in 5-10 minutes with results."}),setTimeout(()=>l("idle"),3e4)):m({title:dt.success?" Command Executed":" Command Failed",description:dt.message,variant:dt.success?"default":"destructive"}),await ye(),t(Bl=>({...Bl,[he]:!1}))}catch(at){const dt=at.message||"Failed to execute command";s(Ss=>({...Ss,[he]:{status:"error",title:"Command Failed",timestamp:new Date().toISOString(),actions:[dt]}})),m({title:" Command Failed",description:dt,variant:"destructive"}),t(Ss=>({...Ss,[he]:!1}))}},Zn=({result:he})=>r.jsx("div",{className:`mt-3 rounded-lg border ${he.status==="success"?"border-green-500/50 bg-green-500/5":"border-destructive/50 bg-destructive/5"}`,children:r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:he.status==="success"?"":""}),r.jsx("span",{className:"font-semibold",children:he.title})]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(he.timestamp).toLocaleTimeString()})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold mb-1.5",children:"What Happened:"}),r.jsx("ul",{className:"space-y-1 text-sm text-muted-foreground",children:he.actions.map((Ge,Lt)=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-primary mt-0.5",children:""}),r.jsx("span",{children:Ge})]},Lt))})]}),he.metrics&&Object.keys(he.metrics).length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Results:"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(he.metrics).map(([Ge,Lt])=>r.jsxs("div",{className:"flex flex-col gap-0.5",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:Ge}),r.jsx("span",{className:"text-sm font-medium",children:Lt})]},Ge))})]}),he.changes&&he.changes.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold mb-1.5",children:"Changes Made:"}),r.jsx("ul",{className:"space-y-1 text-sm",children:he.changes.map((Ge,Lt)=>r.jsxs("li",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx("span",{children:Ge.before}),r.jsx("span",{className:"text-primary",children:""}),r.jsx("span",{className:"font-medium text-foreground",children:Ge.after})]},Lt))})]}),he.viewLink&&r.jsxs("a",{href:he.viewLink,className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:["View Details ",r.jsx($f,{className:"h-3 w-3"})]})]})}),Jt=({icon:he,title:Ge,duration:Lt,command:at,danger:dt=!1})=>{const Ss=e[at],Bl=n[at],cu=at==="run_curation"&&o==="running";return r.jsx(G,{className:`${dt?"border-destructive/50":""} hover-elevate`,children:r.jsx(ee,{className:"pt-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(he,{className:`h-5 w-5 ${dt?"text-destructive":"text-primary"}`}),r.jsx("h3",{className:"font-semibold",children:Ge})]}),r.jsx(ae,{variant:"outline",className:"text-xs",children:Ss||cu?" Running...":Lt})]}),r.jsx(Z,{onClick:()=>Na(at),disabled:Ss||cu,variant:dt?"destructive":"default",className:"w-full","data-testid":`button-${at}`,children:cu?"Running...":"Execute"}),at==="run_curation"&&cu&&h.length>0&&r.jsxs("div",{className:"bg-background border border-primary/30 rounded-md overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-primary/10 border-b border-primary/20",children:[r.jsx(GI,{className:"h-3 w-3 text-primary animate-pulse"}),r.jsx("span",{className:"text-xs font-medium text-primary",children:"Live Progress"}),r.jsxs(ae,{variant:"outline",className:"text-[10px] ml-auto",children:[h.length," events"]})]}),r.jsx(ul,{className:"h-48",children:r.jsxs("div",{className:"p-2 space-y-1 text-xs font-mono",children:[h.map(zl=>r.jsxs("div",{className:"flex items-start gap-2 py-0.5",children:[r.jsx("span",{className:"w-4 text-center flex-shrink-0",children:zl.icon}),r.jsx("span",{className:"text-muted-foreground flex-shrink-0",children:new Date(zl.timestamp).toLocaleTimeString("en-US",{hour12:!1})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:"text-foreground",children:zl.message}),zl.detail&&r.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",zl.detail,")"]})]})]},zl.id)),r.jsx("div",{ref:j})]})})]}),at==="run_curation"&&cu&&h.length===0&&r.jsxs("div",{className:"bg-muted/50 border border-border rounded-md p-3 text-sm space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(gs,{className:"h-4 w-4"}),r.jsx("span",{children:"Curation running in background"})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["You'll receive an email in 5-10 minutes with:",r.jsxs("ul",{className:"list-disc list-inside mt-1 ml-2",children:[r.jsx("li",{children:"Videos analyzed"}),r.jsx("li",{children:"Videos added to library"}),r.jsx("li",{children:"API quota used"})]})]})]}),Bl&&r.jsx(Zn,{result:Bl})]})})})};return r.jsx(Qt,{children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:" Command Center"}),r.jsx("p",{className:"text-muted-foreground",children:"Execute system commands and operations"})]}),r.jsxs(Z,{variant:"outline",onClick:ye,"data-testid":"button-refresh-logs",children:[r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Refresh Logs"]})]}),r.jsx(G,{className:"border-2",children:r.jsxs(ee,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-4 h-4 rounded-full ${J?"bg-green-500 animate-pulse":"bg-zinc-600"}`}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold",children:"AUTO CURATION"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:J?"Running 4x daily (3:15am, 9am, 3pm, 9pm EST)":"Paused - no automatic curation"})]})]}),r.jsx(Z,{onClick:$,variant:J?"destructive":"default",className:"px-6","data-testid":"button-toggle-auto-curation",children:J?"TURN OFF":"TURN ON"})]}),de&&r.jsxs("div",{className:"mt-4 pt-4 border-t grid grid-cols-4 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-400",children:de.discovered}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Discovered"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-400",children:de.analyzed}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Analyzed"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-green-400",children:de.accepted}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Added"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-zinc-400",children:de.rejected}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Rejected"})]})]})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-xl font-semibold",children:" Curation Controls"}),r.jsx(ae,{variant:"outline",children:"System Operations"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(Jt,{icon:Rr,title:" Run Curation",duration:"5-10 min",command:"run_curation"}),r.jsx(Jt,{icon:lj,title:" Take Snapshot",duration:"~30 sec",command:"take_snapshot"}),r.jsx(Jt,{icon:Si,title:" Flush Cache",duration:"Instant",command:"flush_cache"})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"cursor-pointer",onClick:()=>d(!c),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_l,{className:"h-5 w-5"}),r.jsx(se,{className:"text-base",children:" Curation Settings"})]}),c?r.jsx(fN,{className:"h-4 w-4"}):r.jsx(ji,{className:"h-4 w-4"})]}),r.jsx(ze,{className:"text-xs",children:"Customize curation parameters"})]}),c&&r.jsxs(ee,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(fe,{htmlFor:"quality-threshold",className:"text-sm flex justify-between",children:[r.jsx("span",{children:"Quality Threshold"}),r.jsx("span",{className:"font-bold",children:u.qualityThreshold})]}),r.jsx(mf,{id:"quality-threshold",min:5,max:9,step:.5,value:[u.qualityThreshold],onValueChange:he=>f({...u,qualityThreshold:he[0]}),className:"w-full"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum quality score for videos (5-9)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"videos-per-run",className:"text-sm",children:"Videos to Analyze Per Run"}),r.jsxs("select",{id:"videos-per-run",value:u.videosPerRun,onChange:he=>f({...u,videosPerRun:parseInt(he.target.value)}),className:"w-full p-2 border rounded bg-background",children:[r.jsx("option",{value:"10",children:"10 (Fast - 3 min)"}),r.jsx("option",{value:"20",children:"20 (Normal - 5 min)"}),r.jsx("option",{value:"30",children:"30 (Thorough - 8 min)"}),r.jsx("option",{value:"50",children:"50 (Maximum - 12 min)"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"More videos = longer runtime, more results"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"focus-instructors",className:"text-sm",children:"Priority Instructors"}),r.jsx(je,{id:"focus-instructors",type:"text",placeholder:"e.g., John Danaher, Gordon Ryan",value:u.focusInstructors,onChange:he=>f({...u,focusInstructors:he.target.value}),className:"w-full"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of instructors to prioritize"})]}),r.jsx(Z,{onClick:Pe,className:"w-full",variant:"default",children:" Save Settings"}),r.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Settings apply to next curation run"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{className:"flex items-center gap-2",children:" Quick Curation Presets"}),r.jsx(ze,{children:"Run targeted curation by instructor, technique, position, or custom search"})]}),r.jsx(ee,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsxs("span",{className:"font-semibold",children:["Instructor ",L?"(Loading...)":`(${ce.length})`]})]}),Ne?r.jsxs("div",{className:"text-destructive text-sm",children:["Failed to load instructors",r.jsx(Z,{variant:"link",size:"sm",onClick:Y,className:"ml-2","data-testid":"button-retry-instructors",children:"Retry"})]}):r.jsxs("select",{value:F,onChange:he=>A(he.target.value),className:"w-full bg-background border rounded px-3 py-2","data-testid":"select-instructor",disabled:L,children:[r.jsx("option",{value:"",children:L?"Loading...":"Select instructor..."}),ce.map(he=>r.jsx("option",{value:he,children:he},he))]}),r.jsx(je,{value:T,onChange:he=>M(he.target.value),placeholder:"Or type custom...","data-testid":"input-custom-instructor"}),r.jsx(Z,{onClick:()=>We("instructor",T||F),disabled:!F&&!T||te==="instructor",className:"w-full","data-testid":"button-curate-instructor",children:te==="instructor"?"Running...":"Run Now"})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{className:"font-semibold",children:"Technique"})]}),r.jsx(je,{value:O,onChange:he=>C(he.target.value),placeholder:'e.g. "guillotine"',"data-testid":"input-technique-search"}),r.jsx(Z,{onClick:()=>We("technique",O,()=>C("")),disabled:!O||te==="technique",className:"w-full","data-testid":"button-curate-technique",children:te==="technique"?"Running...":"Run Now"})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-yellow-400",children:""}),r.jsxs("span",{className:"font-semibold",children:["Position ",Fe?"(Loading...)":`(${Ae.length})`]})]}),nt?r.jsxs("div",{className:"text-destructive text-sm",children:["Failed to load positions",r.jsx(Z,{variant:"link",size:"sm",onClick:ie,className:"ml-2","data-testid":"button-retry-positions",children:"Retry"})]}):r.jsxs("select",{value:R,onChange:he=>I(he.target.value),className:"w-full bg-background border rounded px-3 py-2","data-testid":"select-position",disabled:Fe,children:[r.jsx("option",{value:"",children:Fe?"Loading...":"Select position..."}),Ae.map(he=>r.jsx("option",{value:he,children:he},he))]}),r.jsx(Z,{onClick:()=>We("position",R,()=>I("")),disabled:!R||te==="position",className:"w-full","data-testid":"button-curate-position",children:te==="position"?"Running...":"Run Now"})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{className:"font-semibold",children:"Gi/NoGi Balance"})]}),r.jsxs("select",{value:B,onChange:he=>H(he.target.value),className:"w-full bg-background border rounded px-3 py-2","data-testid":"select-gi-nogi",children:[r.jsx("option",{value:"",children:"Select type..."}),r.jsx("option",{value:"gi",children:"Gi Only"}),r.jsx("option",{value:"nogi",children:"No-Gi Only"})]}),r.jsx(Z,{onClick:()=>We("gi-nogi",B,()=>H("")),disabled:!B||te==="gi-nogi",className:"w-full","data-testid":"button-curate-gi-nogi",children:te==="gi-nogi"?"Running...":"Run Now"})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-cyan-400",children:""}),r.jsx("span",{className:"font-semibold",children:"Custom Search"})]}),r.jsx(je,{value:Q,onChange:he=>D(he.target.value),placeholder:"Any YouTube query...","data-testid":"input-custom-search"}),r.jsx(Z,{onClick:()=>We("custom",Q,()=>D("")),disabled:!Q||te==="custom",className:"w-full","data-testid":"button-curate-custom",children:te==="custom"?"Running...":"Run Now"})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-purple-400",children:""}),r.jsx("span",{className:"font-semibold",children:"Meta Techniques"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Curate high-priority trending techniques"}),r.jsx(Z,{onClick:()=>We("meta"),disabled:te==="meta",className:"w-full","data-testid":"button-curate-meta",children:te==="meta"?"Running...":"Run Now"})]})]})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-xl font-semibold",children:" System Maintenance"}),r.jsx(ae,{variant:"outline",children:"API Testing"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(Jt,{icon:tC,title:" Test APIs",duration:"~10 sec",command:"test_apis"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-xl font-semibold",children:" Professor OS QA"}),r.jsx(ae,{variant:"outline",children:"Quality Assurance"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(G,{className:"hover-elevate",children:r.jsx(ee,{className:"pt-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(tC,{className:"h-5 w-5 text-primary"}),r.jsx("h3",{className:"font-semibold",children:"Run Full QA Suite"})]}),r.jsx(ae,{variant:"outline",className:"text-xs",children:b?" Running...":"~5 min"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Tests video relevance, personality, and coaching quality"}),r.jsx(Z,{onClick:()=>_t(["all"]),disabled:b,className:"w-full","data-testid":"button-run-qa-tests",children:b?"Running Tests...":"Run All Tests"})]})})}),r.jsx(G,{className:"hover-elevate",children:r.jsx(ee,{className:"pt-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(uj,{className:"h-5 w-5 text-primary"}),r.jsx("h3",{className:"font-semibold",children:"Video Data Quality"})]}),r.jsx(ae,{variant:"outline",className:"text-xs",children:E?" Checking...":"Instant"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Check for missing thumbnails, instructors, YouTube IDs"}),r.jsx(Z,{onClick:nn,disabled:E,variant:"outline",className:"w-full","data-testid":"button-check-data-quality",children:E?"Checking...":"Check Data Quality"}),k&&r.jsxs("div",{className:"mt-3 p-3 rounded border bg-muted/30 text-sm space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Total Videos:"}),r.jsx("span",{className:"font-medium",children:k.totalVideos.toLocaleString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Missing Thumbnails:"}),r.jsx("span",{className:k.issues.missingThumbnails>0?"text-destructive font-medium":"text-green-500",children:k.issues.missingThumbnails})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Generic Instructors:"}),r.jsx("span",{className:k.issues.genericInstructors>0?"text-destructive font-medium":"text-green-500",children:k.issues.genericInstructors})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Missing YouTube IDs:"}),r.jsx("span",{className:k.issues.missingYoutubeIds>0?"text-destructive font-medium":"text-green-500",children:k.issues.missingYoutubeIds})]}),r.jsx("div",{className:"pt-2 border-t text-xs",children:r.jsxs(ae,{variant:k.healthPercentage>=95?"default":"destructive",children:[k.healthPercentage,"% Healthy"]})})]})]})})})]}),w&&r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(se,{className:"flex items-center gap-2",children:[w.passPercentage>=80?r.jsx(jr,{className:"h-5 w-5 text-green-500"}):r.jsx(wi,{className:"h-5 w-5 text-destructive"}),"QA Test Results"]}),r.jsxs(ae,{variant:w.passPercentage>=80?"default":"destructive",children:[w.passed,"/",w.totalTests," Passed (",w.passPercentage,"%)"]})]}),r.jsxs(ze,{children:["Run at ",new Date(w.timestamp).toLocaleString()]})]}),r.jsxs(ee,{children:[r.jsx(ul,{className:"h-80",children:r.jsx("div",{className:"space-y-2",children:w.results.map(he=>r.jsx("div",{className:`p-3 rounded border ${he.passed?"border-green-500/30 bg-green-500/5":"border-destructive/30 bg-destructive/5"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-lg",children:he.passed?"":""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(ae,{variant:"outline",className:"text-[10px]",children:he.category}),r.jsxs("span",{className:"font-medium text-sm",children:[he.id,": ",he.name]})]}),!he.passed&&r.jsxs("div",{className:"mt-2 text-xs space-y-1",children:[r.jsxs("div",{className:"text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Expected:"})," ",he.expected]}),r.jsxs("div",{className:"text-destructive",children:[r.jsx("span",{className:"font-medium",children:"Got:"})," ",he.actual]})]}),he.details&&r.jsx("div",{className:"mt-1 text-xs text-amber-500",children:he.details})]}),he.duration&&r.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[he.duration,"ms"]})]})},he.id))})}),w.warnings.length>0&&r.jsxs("div",{className:"mt-4 p-3 rounded border border-amber-500/30 bg-amber-500/5",children:[r.jsxs("div",{className:"flex items-center gap-2 text-amber-500 font-medium text-sm mb-2",children:[r.jsx(Gs,{className:"h-4 w-4"}),"Warnings"]}),r.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:w.warnings.map((he,Ge)=>r.jsx("li",{children:he},Ge))})]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h2",{className:"text-xl font-semibold",children:" Recent Commands"}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Execution Log"}),r.jsxs(ze,{children:["Last ",i.length," commands executed"]})]}),r.jsx(ee,{children:r.jsx("div",{className:"space-y-2",children:i.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No commands executed yet"}):i.map(he=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded border bg-card hover-elevate","data-testid":`log-entry-${he.id}`,children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx(ae,{variant:he.success?"default":"destructive",children:he.success?"":""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:he.command}),r.jsx("div",{className:"text-xs text-muted-foreground",children:he.message})]})]}),r.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[r.jsx("div",{children:new Date(he.timestamp).toLocaleString()}),r.jsxs("div",{className:"text-[10px]",children:[he.executionTimeMs,"ms"]})]})]},he.id))})})]})]})]})})}function v1e(){var m,b,N,w,S,k,P,E,_,F,A,T,M,O,C,R,I,B,H,Q,D,te,V;const[e,t]=x.useState(!1),[n,s]=x.useState(""),[i,a]=x.useState(""),[o,l]=x.useState(null),{toast:c}=Je(),d=qe({mutationFn:async J=>(await lt("POST","/api/admin/login",{password:J})).json(),onSuccess:()=>{t(!0),c({title:"Login successful"})},onError:()=>{c({title:"Invalid password",variant:"destructive"})}}),{data:u}=pe({queryKey:["/api/admin/dashboard/stats"],enabled:e}),{data:f,isLoading:h}=pe({queryKey:["/api/admin/users"],enabled:e}),{data:p}=pe({queryKey:["/api/admin/referrals/redemptions"],enabled:e}),{data:v}=pe({queryKey:["/api/admin/actions-log"],enabled:e}),{data:g}=pe({queryKey:["/api/admin/curation/batches"],enabled:e}),y=qe({mutationFn:async J=>(await lt("POST","/api/admin/grant-lifetime-access",J)).json(),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/users"]}),c({title:"Lifetime access granted successfully"}),l(null)},onError:J=>{c({title:"Error granting lifetime access",description:J.message,variant:"destructive"})}});if(!e)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Admin Login"}),r.jsx(ze,{children:"Enter admin password to continue"})]}),r.jsx(ee,{children:r.jsxs("form",{onSubmit:J=>{J.preventDefault(),d.mutate(n)},className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"password","data-testid":"label-password",children:"Password"}),r.jsx(je,{id:"password",type:"password",value:n,onChange:J=>s(J.target.value),placeholder:"Enter admin password","data-testid":"input-password"})]}),r.jsx(Z,{type:"submit",className:"w-full",disabled:d.isPending,"data-testid":"button-login",children:d.isPending?"Logging in...":"Login"})]})})]})});const j=(f==null?void 0:f.filter(J=>{var de,ve;const me=i.toLowerCase();return((de=J.email)==null?void 0:de.toLowerCase().includes(me))||((ve=J.username)==null?void 0:ve.toLowerCase().includes(me))}))||[];return r.jsx("div",{className:"min-h-screen bg-background p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-admin-title",children:"BJJ OS Admin Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Comprehensive system management and monitoring"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Users"}),r.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-users",children:((b=(m=u==null?void 0:u.stats)==null?void 0:m.users)==null?void 0:b.totalUsers)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",((w=(N=u==null?void 0:u.stats)==null?void 0:N.users)==null?void 0:w.newToday)||0," today"]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Active Subscriptions"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-active-subs",children:((k=(S=u==null?void 0:u.stats)==null?void 0:S.subscriptions)==null?void 0:k.active)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[((E=(P=u==null?void 0:u.stats)==null?void 0:P.subscriptions)==null?void 0:E.trialing)||0," trialing"]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"AI Messages Today"}),r.jsx(Ds,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-ai-messages",children:((F=(_=u==null?void 0:u.stats)==null?void 0:_.ai)==null?void 0:F.messagesToday)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[((T=(A=u==null?void 0:u.stats)==null?void 0:A.ai)==null?void 0:T.uniqueUsersToday)||0," unique users"]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Video Library"}),r.jsx(Ap,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-video-library",children:((O=(M=u==null?void 0:u.stats)==null?void 0:M.videoLibrary)==null?void 0:O.totalVideos)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avg rating: ",((I=(R=(C=u==null?void 0:u.stats)==null?void 0:C.videoLibrary)==null?void 0:R.avgVideoRating)==null?void 0:I.toFixed(1))||"N/A"]})]})]})]}),r.jsxs(Il,{defaultValue:"users",className:"space-y-4",children:[r.jsxs(Eo,{children:[r.jsx(an,{value:"users","data-testid":"tab-users",children:"User Management"}),r.jsx(an,{value:"referrals","data-testid":"tab-referrals",children:"Referral Redemptions"}),r.jsx(an,{value:"curation","data-testid":"tab-curation",children:"Video Curation"}),r.jsx(an,{value:"logs","data-testid":"tab-logs",children:"Admin Actions"})]}),r.jsx(on,{value:"users",className:"space-y-4",children:r.jsxs(G,{children:[r.jsx(re,{children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx(se,{children:"User Management"}),r.jsx(ze,{children:"Manage users, grant lifetime access, and view user details"})]})})}),r.jsxs(ee,{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Nr,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search by email, username, or phone...",value:i,onChange:J=>a(J.target.value),className:"pl-8","data-testid":"input-search-users"})]})}),r.jsx("div",{className:"rounded-md border",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Email"}),r.jsx(X,{children:"Username"}),r.jsx(X,{children:"Belt Rank"}),r.jsx(X,{children:"Subscription"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Actions"})]})}),r.jsx(wt,{children:h?r.jsx(ke,{children:r.jsx(W,{colSpan:6,className:"text-center",children:"Loading users..."})}):j.length===0?r.jsx(ke,{children:r.jsx(W,{colSpan:6,className:"text-center",children:"No users found"})}):j.map(J=>r.jsxs(ke,{"data-testid":`row-user-${J.id}`,children:[r.jsx(W,{className:"font-medium",children:J.email}),r.jsx(W,{children:J.username||"-"}),r.jsx(W,{children:J.beltRank||"-"}),r.jsx(W,{children:J.hasLifetimeAccess?r.jsxs(ae,{variant:"default",children:[r.jsx(Jk,{className:"w-3 h-3 mr-1"}),"Lifetime"]}):J.subscriptionStatus==="active"?r.jsx(ae,{variant:"default",children:"Active"}):J.subscriptionStatus==="trialing"?r.jsx(ae,{variant:"secondary",children:"Trial"}):r.jsx(ae,{variant:"outline",children:"None"})}),r.jsx(W,{children:J.isActive?r.jsx(ae,{variant:"default",children:"Active"}):r.jsx(ae,{variant:"destructive",children:"Inactive"})}),r.jsx(W,{children:r.jsx("div",{className:"flex gap-2",children:r.jsxs(Nn,{children:[r.jsx(Yf,{asChild:!0,children:r.jsx(Z,{variant:"outline",size:"sm",onClick:()=>l(J),"data-testid":`button-view-${J.id}`,children:r.jsx(Bn,{className:"w-4 h-4"})})}),r.jsxs(mn,{className:"max-w-2xl",children:[r.jsxs(pn,{children:[r.jsx(gn,{children:"User Details"}),r.jsx(zn,{children:"View and manage user information"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(fe,{children:"Email"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:o==null?void 0:o.email})]}),r.jsxs("div",{children:[r.jsx(fe,{children:"Username"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(o==null?void 0:o.username)||"Not set"})]}),r.jsxs("div",{children:[r.jsx(fe,{children:"Belt Rank"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(o==null?void 0:o.beltRank)||"Not set"})]}),r.jsxs("div",{children:[r.jsx(fe,{children:"Total Sessions"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(o==null?void 0:o.totalSessions)||0})]}),r.jsxs("div",{children:[r.jsx(fe,{children:"Total Hours"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(o==null?void 0:o.totalHours)||0})]})]}),!(o!=null&&o.hasLifetimeAccess)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Grant Lifetime Access"}),r.jsxs("form",{onSubmit:me=>{me.preventDefault();const ve=new FormData(me.currentTarget).get("reason");y.mutate({email:o.email,reason:ve})},className:"space-y-2",children:[r.jsx(Ci,{name:"reason",placeholder:"Reason for granting lifetime access...",required:!0,"data-testid":"input-lifetime-reason"}),r.jsxs(Z,{type:"submit",disabled:y.isPending,"data-testid":"button-grant-lifetime",children:[r.jsx(Jk,{className:"w-4 h-4 mr-2"}),y.isPending?"Granting...":"Grant Lifetime Access"]})]})]}),(o==null?void 0:o.hasLifetimeAccess)&&r.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium",children:"Lifetime Access Granted"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["By: ",o.grantedLifetimeBy||"Unknown"]}),o.grantedLifetimeReason&&r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Reason: ",o.grantedLifetimeReason]})]})]})]})]})})})]},J.id))})]})})]})]})}),r.jsx(on,{value:"referrals",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Referral Redemptions"}),r.jsx(ze,{children:"Track referral code usage and rewards"})]}),r.jsx(ee,{children:r.jsx("div",{className:"rounded-md border",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Code"}),r.jsx(X,{children:"Creator"}),r.jsx(X,{children:"Redeemed By"}),r.jsx(X,{children:"Reward"}),r.jsx(X,{children:"Date"})]})}),r.jsx(wt,{children:((B=p==null?void 0:p.redemptions)==null?void 0:B.length)===0?r.jsx(ke,{children:r.jsx(W,{colSpan:5,className:"text-center",children:"No redemptions found"})}):(H=p==null?void 0:p.redemptions)==null?void 0:H.map(J=>r.jsxs(ke,{children:[r.jsx(W,{className:"font-medium",children:J.code}),r.jsx(W,{children:J.creatorEmail}),r.jsx(W,{children:J.redeemerEmail}),r.jsx(W,{children:J.rewardApplied||"1 month free"}),r.jsx(W,{children:new Date(J.redeemedAt).toLocaleDateString()})]},J.id))})]})})})]})}),r.jsx(on,{value:"curation",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Video Curation Batches"}),r.jsx(ze,{children:"Monitor automated video curation performance"})]}),r.jsx(ee,{children:r.jsx("div",{className:"rounded-md border",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Batch Time"}),r.jsx(X,{children:"Videos Scanned"}),r.jsx(X,{children:"Approved"}),r.jsx(X,{children:"Rejected"}),r.jsx(X,{children:"Avg Rating"}),r.jsx(X,{children:"API Cost"})]})}),r.jsx(wt,{children:((Q=g==null?void 0:g.batches)==null?void 0:Q.length)===0?r.jsx(ke,{children:r.jsx(W,{colSpan:6,className:"text-center",children:"No curation batches found"})}):(D=g==null?void 0:g.batches)==null?void 0:D.map(J=>{var me,de;return r.jsxs(ke,{children:[r.jsx(W,{children:new Date(J.batchTime).toLocaleString()}),r.jsx(W,{children:J.videosScanned||0}),r.jsx(W,{children:r.jsx(ae,{variant:"default",children:J.videosApproved||0})}),r.jsx(W,{children:r.jsx(ae,{variant:"destructive",children:J.videosRejected||0})}),r.jsx(W,{children:((me=J.avgRating)==null?void 0:me.toFixed(1))||"N/A"}),r.jsxs(W,{children:["$",((de=J.apiCost)==null?void 0:de.toFixed(2))||"0.00"]})]},J.id)})})]})})})]})}),r.jsx(on,{value:"logs",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Admin Actions Log"}),r.jsx(ze,{children:"Track all admin actions for accountability"})]}),r.jsx(ee,{children:r.jsx("div",{className:"rounded-md border",children:r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Admin"}),r.jsx(X,{children:"Action Type"}),r.jsx(X,{children:"Target User"}),r.jsx(X,{children:"Date"})]})}),r.jsx(wt,{children:((te=v==null?void 0:v.actions)==null?void 0:te.length)===0?r.jsx(ke,{children:r.jsx(W,{colSpan:4,className:"text-center",children:"No admin actions found"})}):(V=v==null?void 0:v.actions)==null?void 0:V.map(J=>r.jsxs(ke,{children:[r.jsx(W,{className:"font-medium",children:J.adminEmail}),r.jsx(W,{children:r.jsx(ae,{variant:"outline",children:J.actionType})}),r.jsx(W,{children:J.targetUserEmail||J.targetUsername||"-"}),r.jsx(W,{children:new Date(J.createdAt).toLocaleString()})]},J.id))})]})})})]})})]})]})})}function y1e(){var k,P,E,_,F,A,T,M,O,C;const[e,t]=x.useState(!1),[n,s]=x.useState(""),[i,a]=x.useState(""),[o,l]=x.useState("all"),[c,d]=x.useState("all"),[u,f]=x.useState(""),{toast:h}=Je(),p=qe({mutationFn:async R=>(await lt("POST","/api/admin/login",{password:R})).json(),onSuccess:()=>{t(!0),h({title:"Login successful"})},onError:()=>{h({title:"Invalid password",variant:"destructive"})}}),{data:v,isLoading:g}=pe({queryKey:["/api/admin/email-stats"],enabled:e,refetchInterval:3e4}),{data:y,isLoading:j}=pe({queryKey:["/api/admin/email-logs",{search:i,type:o,status:c}],enabled:e,refetchInterval:3e4}),{data:m}=pe({queryKey:["/api/admin/email-problems"],enabled:e,refetchInterval:6e4}),b=qe({mutationFn:async R=>(await lt("POST",`/api/admin/email-logs/${R}/resend`,{})).json(),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/admin/email-logs"]}),_e.invalidateQueries({queryKey:["/api/admin/email-stats"]}),h({title:"Email resent successfully"})},onError:R=>{h({title:"Failed to resend email",description:R.message,variant:"destructive"})}}),N=qe({mutationFn:async R=>(await lt("POST","/api/admin/email/send-verification",{email:R})).json(),onSuccess:R=>{_e.invalidateQueries({queryKey:["/api/admin/email-logs"]}),_e.invalidateQueries({queryKey:["/api/admin/email-stats"]}),h({title:"Verification email sent",description:`Code: ${R.code}`}),f("")},onError:R=>{h({title:"Failed to send email",description:R.message,variant:"destructive"})}});if(!e)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Admin Login"}),r.jsx(ze,{children:"Enter admin password to continue"})]}),r.jsx(ee,{children:r.jsxs("form",{onSubmit:R=>{R.preventDefault(),p.mutate(n)},className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"password",children:"Password"}),r.jsx(je,{id:"password",type:"password",value:n,onChange:R=>s(R.target.value),placeholder:"Enter admin password","data-testid":"input-admin-password"})]}),r.jsx(Z,{type:"submit",className:"w-full",disabled:p.isPending,"data-testid":"button-admin-login",children:p.isPending?"Logging in...":"Login"})]})})]})});const w=R=>{switch(R){case"sent":return r.jsxs(ae,{variant:"secondary",className:"gap-1",children:[r.jsx(Kr,{className:"h-3 w-3"})," Sent"]});case"delivered":return r.jsxs(ae,{variant:"default",className:"gap-1 bg-green-600",children:[r.jsx(jr,{className:"h-3 w-3"})," Delivered"]});case"failed":return r.jsxs(ae,{variant:"destructive",className:"gap-1",children:[r.jsx(wi,{className:"h-3 w-3"})," Failed"]});case"bounced":return r.jsxs(ae,{variant:"destructive",className:"gap-1",children:[r.jsx(Gs,{className:"h-3 w-3"})," Bounced"]});default:return r.jsx(ae,{variant:"outline",children:R})}},S=R=>{const I={verification:"bg-blue-500/20 text-blue-400 border-blue-500/30",welcome:"bg-green-500/20 text-green-400 border-green-500/30",lifetime_access:"bg-purple-500/20 text-purple-400 border-purple-500/30",lifetime_invite:"bg-amber-500/20 text-amber-400 border-amber-500/30"};return r.jsx(ae,{variant:"outline",className:I[R]||"",children:R.replace(/_/g," ")})};return r.jsx("div",{className:"min-h-screen bg-background p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-email-admin-title",children:"Email Tracking Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Monitor email delivery and debug issues"})]}),r.jsxs(Nn,{children:[r.jsx(Yf,{asChild:!0,children:r.jsxs(Z,{"data-testid":"button-send-test-email",children:[r.jsx(zf,{className:"h-4 w-4 mr-2"}),"Send Test Email"]})}),r.jsxs(mn,{children:[r.jsxs(pn,{children:[r.jsx(gn,{children:"Send Verification Email"}),r.jsx(zn,{children:"Send a verification email to any address for testing"})]}),r.jsx("div",{className:"space-y-4 py-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"email",children:"Email Address"}),r.jsx(je,{id:"email",type:"email",value:u,onChange:R=>f(R.target.value),placeholder:"test@example.com","data-testid":"input-test-email"})]})}),r.jsxs(bo,{children:[r.jsx(_K,{asChild:!0,children:r.jsx(Z,{variant:"outline",children:"Cancel"})}),r.jsx(Z,{onClick:()=>N.mutate(u),disabled:!u||N.isPending,"data-testid":"button-confirm-send",children:N.isPending?"Sending...":"Send Email"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Sent Today"}),r.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-sent-today",children:(v==null?void 0:v.sentToday)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[(v==null?void 0:v.total)||0," total emails tracked"]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Delivery Rate"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-500","data-testid":"text-delivery-rate",children:[(v==null?void 0:v.deliveryRate)||0,"%"]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[(v==null?void 0:v.delivered)||0," delivered"]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Failed"}),r.jsx(Zk,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-500","data-testid":"text-failed-count",children:(v==null?void 0:v.failed)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Need attention"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Bounced"}),r.jsx(oq,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold text-amber-500","data-testid":"text-bounced-count",children:(v==null?void 0:v.bounced)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Invalid addresses"})]})]})]}),r.jsxs(Il,{defaultValue:"logs",className:"space-y-4",children:[r.jsxs(Eo,{children:[r.jsx(an,{value:"logs","data-testid":"tab-logs",children:"All Emails"}),r.jsxs(an,{value:"problems","data-testid":"tab-problems",children:["Problems",(((k=m==null?void 0:m.problemEmails)==null?void 0:k.length)||0)+(((P=m==null?void 0:m.unverifiedUsers)==null?void 0:P.length)||0)>0&&r.jsx(ae,{variant:"destructive",className:"ml-2",children:(((E=m==null?void 0:m.problemEmails)==null?void 0:E.length)||0)+(((_=m==null?void 0:m.unverifiedUsers)==null?void 0:_.length)||0)})]})]}),r.jsxs(on,{value:"logs",className:"space-y-4",children:[r.jsx(G,{children:r.jsx(ee,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx(fe,{htmlFor:"search",children:"Search Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"search",placeholder:"Search by email address...",value:i,onChange:R=>a(R.target.value),className:"pl-8","data-testid":"input-search-email"})]})]}),r.jsxs("div",{className:"w-[150px]",children:[r.jsx(fe,{children:"Email Type"}),r.jsxs(et,{value:o,onValueChange:l,children:[r.jsx(Xe,{"data-testid":"select-type-filter",children:r.jsx(tt,{placeholder:"All types"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All types"}),r.jsx(ne,{value:"verification",children:"Verification"}),r.jsx(ne,{value:"welcome",children:"Welcome"}),r.jsx(ne,{value:"lifetime_access",children:"Lifetime Access"}),r.jsx(ne,{value:"lifetime_invite",children:"Lifetime Invite"})]})]})]}),r.jsxs("div",{className:"w-[150px]",children:[r.jsx(fe,{children:"Status"}),r.jsxs(et,{value:c,onValueChange:d,children:[r.jsx(Xe,{"data-testid":"select-status-filter",children:r.jsx(tt,{placeholder:"All statuses"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All statuses"}),r.jsx(ne,{value:"sent",children:"Sent"}),r.jsx(ne,{value:"delivered",children:"Delivered"}),r.jsx(ne,{value:"failed",children:"Failed"}),r.jsx(ne,{value:"bounced",children:"Bounced"})]})]})]}),r.jsx(Z,{variant:"outline",onClick:()=>{a(""),l("all"),d("all")},"data-testid":"button-clear-filters",children:"Clear"})]})})}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Email Logs"}),r.jsxs(ze,{children:[(y==null?void 0:y.total)||0," total emails found"]})]}),r.jsx(ee,{children:j?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):((F=y==null?void 0:y.logs)==null?void 0:F.length)===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No emails found"}):r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Recipient"}),r.jsx(X,{children:"Type"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Subject"}),r.jsx(X,{children:"Sent"}),r.jsx(X,{children:"Actions"})]})}),r.jsx(wt,{children:(A=y==null?void 0:y.logs)==null?void 0:A.map(R=>r.jsxs(ke,{"data-testid":`row-email-${R.id}`,children:[r.jsx(W,{className:"font-medium",children:R.recipientEmail}),r.jsx(W,{children:S(R.emailType)}),r.jsx(W,{children:w(R.status)}),r.jsx(W,{className:"max-w-[200px] truncate",title:R.subject,children:R.subject}),r.jsx(W,{children:R.sentAt?br(new Date(R.sentAt),"MMM d, h:mm a"):"-"}),r.jsx(W,{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>b.mutate(R.id),disabled:b.isPending,"data-testid":`button-resend-${R.id}`,children:[r.jsx(wr,{className:"h-3 w-3 mr-1"}),"Resend"]}),R.errorMessage&&r.jsxs(Nn,{children:[r.jsx(Yf,{asChild:!0,children:r.jsxs(Z,{size:"sm",variant:"destructive",children:[r.jsx(Gs,{className:"h-3 w-3 mr-1"}),"Error"]})}),r.jsxs(mn,{children:[r.jsx(pn,{children:r.jsx(gn,{children:"Error Details"})}),r.jsx("div",{className:"p-4 bg-red-500/10 rounded-lg text-sm",children:r.jsx("code",{children:R.errorMessage})})]})]})]})})]},R.id))})]})})]})]}),r.jsxs(on,{value:"problems",className:"space-y-4",children:[r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Zk,{className:"h-5 w-5 text-red-500"}),"Failed & Bounced Emails"]}),r.jsx(ze,{children:"Emails that need attention or resending"})]}),r.jsx(ee,{children:((T=m==null?void 0:m.problemEmails)==null?void 0:T.length)===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground flex flex-col items-center gap-2",children:[r.jsx(aq,{className:"h-8 w-8 text-green-500"}),r.jsx("p",{children:"No problem emails - all deliveries successful!"})]}):r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Recipient"}),r.jsx(X,{children:"Type"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Error"}),r.jsx(X,{children:"Actions"})]})}),r.jsx(wt,{children:(M=m==null?void 0:m.problemEmails)==null?void 0:M.map(R=>r.jsxs(ke,{"data-testid":`row-problem-${R.id}`,children:[r.jsx(W,{className:"font-medium",children:R.recipientEmail}),r.jsx(W,{children:S(R.emailType)}),r.jsx(W,{children:w(R.status)}),r.jsx(W,{className:"max-w-[250px] truncate text-red-400",children:R.errorMessage||"Bounced"}),r.jsx(W,{children:r.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>b.mutate(R.id),disabled:b.isPending,"data-testid":`button-resend-problem-${R.id}`,children:[r.jsx(wr,{className:"h-3 w-3 mr-1"}),"Retry"]})})]},R.id))})]})})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Gs,{className:"h-5 w-5 text-amber-500"}),"Unverified Users (24h+)"]}),r.jsx(ze,{children:"Users who signed up but never verified their email"})]}),r.jsx(ee,{children:((O=m==null?void 0:m.unverifiedUsers)==null?void 0:O.length)===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground flex flex-col items-center gap-2",children:[r.jsx(jr,{className:"h-8 w-8 text-green-500"}),r.jsx("p",{children:"All recent users have verified their emails!"})]}):r.jsxs(bt,{children:[r.jsx(jt,{children:r.jsxs(ke,{children:[r.jsx(X,{children:"Email"}),r.jsx(X,{children:"Signed Up"}),r.jsx(X,{children:"Actions"})]})}),r.jsx(wt,{children:(C=m==null?void 0:m.unverifiedUsers)==null?void 0:C.map(R=>r.jsxs(ke,{"data-testid":`row-unverified-${R.id}`,children:[r.jsx(W,{className:"font-medium",children:R.email}),r.jsx(W,{children:R.createdAt?br(new Date(R.createdAt),"MMM d, h:mm a"):"-"}),r.jsx(W,{children:r.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>N.mutate(R.email),disabled:N.isPending,"data-testid":`button-resend-verification-${R.id}`,children:[r.jsx(zf,{className:"h-3 w-3 mr-1"}),"Send Verification"]})})]},R.id))})]})})]})]})]})]})})}function b1e(){const[e,t]=x.useState(""),n=x.useRef(null),s=va(),{data:i,isLoading:a}=pe({queryKey:["/api/admin/dev-os/messages"],staleTime:1/0,refetchOnWindowFocus:!1}),o=(i==null?void 0:i.messages)||[],l=qe({mutationFn:async u=>{var h,p;console.log(" [FRONTEND] Sending Dev OS message:",u);const f=await lt("/api/admin/dev-os/chat",{method:"POST",body:JSON.stringify({message:u})});return console.log(" [FRONTEND] Dev OS response received:",{success:f.success,responseLength:(h=f.response)==null?void 0:h.length,actionsExecuted:((p=f.actionsExecuted)==null?void 0:p.length)||0}),f},onMutate:async u=>{await s.cancelQueries({queryKey:["/api/admin/dev-os/messages"]});const f=s.getQueryData(["/api/admin/dev-os/messages"]);return s.setQueryData(["/api/admin/dev-os/messages"],h=>h?{...h,messages:[...h.messages,{id:"temp-"+Date.now(),role:"user",content:u,createdAt:new Date().toISOString()}]}:{success:!0,messages:[{id:"temp-"+Date.now(),role:"user",content:u,createdAt:new Date().toISOString()}]}),{previousMessages:f}},onSuccess:()=>{console.log(" [FRONTEND] Streaming complete"),s.invalidateQueries({queryKey:["/api/admin/dev-os/messages"]}),t("")},onError:(u,f,h)=>{console.error(" [FRONTEND] Mutation error handler:",u),h!=null&&h.previousMessages&&s.setQueryData(["/api/admin/dev-os/messages"],h.previousMessages)}});x.useEffect(()=>{var u;(u=n.current)==null||u.scrollIntoView({behavior:"smooth"})},[o.length]);const c=()=>{!e.trim()||l.isPending||l.mutate(e.trim())},d=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),c())};return a?r.jsx("div",{className:"dev-os-chat-container",children:r.jsx("div",{className:"chat-loading",children:"Loading Dev OS..."})}):r.jsxs("div",{className:"dev-os-chat-container",children:[r.jsxs("div",{className:"chat-messages","data-testid":"devos-chat-messages",children:[o.length===0?r.jsxs("div",{className:"chat-empty-state",children:[r.jsx("div",{className:"empty-icon",children:""}),r.jsx("h3",{children:"Dev OS Intelligence"}),r.jsx("p",{children:"Ask me about system status, metrics, or run actions"}),r.jsxs("div",{className:"example-queries",children:[r.jsx("button",{onClick:()=>t("Give me a system status"),className:"example-chip","data-testid":"example-query-status",children:"System Status"}),r.jsx("button",{onClick:()=>t("How many active users today?"),className:"example-chip","data-testid":"example-query-users",children:"Active Users"}),r.jsx("button",{onClick:()=>t("What's our MRR?"),className:"example-chip","data-testid":"example-query-mrr",children:"MRR"})]})]}):o.map(u=>r.jsxs("div",{className:`chat-message ${u.role}`,"data-testid":`message-${u.role}`,children:[r.jsx("div",{className:"message-avatar",children:u.role==="user"?"":""}),r.jsxs("div",{className:"message-content",children:[r.jsx("div",{className:"message-text",children:u.content}),r.jsx("div",{className:"message-time",children:new Date(u.createdAt).toLocaleTimeString()})]})]},u.id)),l.isPending&&r.jsxs("div",{className:"chat-message assistant typing","data-testid":"typing-indicator",children:[r.jsx("div",{className:"message-avatar",children:""}),r.jsx("div",{className:"message-content",children:r.jsxs("div",{className:"typing-dots",children:[r.jsx("span",{}),r.jsx("span",{}),r.jsx("span",{})]})})]}),r.jsx("div",{ref:n})]}),r.jsx("div",{className:"chat-input-area",children:r.jsxs("div",{className:"chat-input-container",children:[r.jsx("textarea",{value:e,onChange:u=>t(u.target.value),onKeyPress:d,placeholder:"Ask Dev OS...",className:"chat-input",rows:1,disabled:l.isPending,"data-testid":"input-devos-message"}),r.jsx("button",{onClick:c,disabled:!e.trim()||l.isPending,className:"chat-send-button","data-testid":"button-send-devos-message",children:l.isPending?"":""})]})})]})}function j1e(){var j;const[e,t]=x.useState("overview"),[n,s]=x.useState(null),i=va(),{data:a,isLoading:o,isError:l,error:c,refetch:d}=pe({queryKey:["/api/admin/quick-metrics"],queryFn:async()=>{const m=await fetch("/api/admin/quick-metrics",{credentials:"include",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(m.status===401)throw window.location.href="/admin/login",new Error("Authentication required");if(!m.ok){const b=await m.text();throw new Error(`${m.status}: ${b}`)}return m.json()},refetchInterval:3e4,retry:1}),{data:u}=pe({queryKey:["/api/admin/system-health"],refetchInterval:3e4,retry:1,enabled:!!a}),{data:f}=pe({queryKey:["/api/admin/alerts"],queryFn:async()=>{const m=await fetch("/api/admin/alerts",{credentials:"include"});if(!m.ok)throw new Error("Failed to fetch alerts");return m.json()},refetchInterval:3e4,retry:1,enabled:!!a}),{data:h,refetch:p}=pe({queryKey:["/api/admin/elite-curator/stats"],queryFn:async()=>{const m=await fetch("/api/admin/elite-curator/stats",{credentials:"include"});if(!m.ok)throw new Error("Failed to fetch elite curator stats");return m.json()},refetchInterval:3e4,retry:1,enabled:!!a}),v=qe({mutationFn:async m=>{const b=await fetch(`/api/admin/alerts/${m}/dismiss`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!b.ok)throw new Error("Failed to dismiss alert");return b.json()},onSuccess:()=>{i.invalidateQueries({queryKey:["/api/admin/alerts"]})}}),g=((j=f==null?void 0:f.alerts)==null?void 0:j.filter(m=>!m.dismissedAt))||[];async function y(m,b){s(m);try{const w=await(await fetch(`/api/admin/actions/${m}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b||{})})).json();w.success?(alert(` ${w.message||"Action completed"}`),setTimeout(()=>d(),2e3)):alert(` ${w.error||"Action failed"}`)}catch(N){console.error("Action failed:",N),alert(` ${N.message}`)}finally{s(null)}}return o?r.jsx("div",{className:"dev-os-mobile loading-state",children:r.jsx("div",{className:"loading-spinner",children:"Loading Dev OS..."})}):l||!a?r.jsx("div",{className:"dev-os-mobile loading-state",children:r.jsxs("div",{className:"error-state",children:[r.jsx("p",{children:" Failed to load Dev OS"}),r.jsx("p",{className:"error-message",children:(c==null?void 0:c.toString())||"Unknown error"}),r.jsx("button",{onClick:()=>d(),className:"action-chip primary",style:{marginTop:"1rem"},children:"Retry"})]})}):r.jsxs("div",{className:"dev-os-mobile",children:[r.jsx("header",{className:"top-bar","data-testid":"devos-top-bar",children:r.jsxs("div",{className:"top-bar-content",children:[r.jsx("h1",{className:"top-bar-title",children:"Dev OS 2.0"}),r.jsx("button",{onClick:()=>d(),className:"refresh-btn","data-testid":"button-refresh-metrics",children:""})]})}),r.jsx("div",{className:"quick-actions-strip",children:r.jsxs("div",{className:"actions-scroll",children:[r.jsx("button",{onClick:()=>y("restart-curation"),className:"action-chip primary",disabled:!!n,"data-testid":"action-chip-restart",children:" Restart"}),r.jsx("button",{onClick:()=>y("view-logs",{service:"curation"}),className:"action-chip",disabled:!!n,"data-testid":"action-chip-logs",children:" Logs"}),r.jsx("button",{onClick:()=>y("diagnose-curation"),className:"action-chip",disabled:!!n,"data-testid":"action-chip-diagnose",children:" Diagnose"}),r.jsx("button",{onClick:()=>{const m=prompt("Enter threshold (0-10):","7.0");m&&fetch("/api/admin/execute/curation/adjust-threshold",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threshold:parseFloat(m)})}).then(b=>b.json()).then(b=>{alert(b.success?` ${b.message}`:` ${b.error}`)})},className:"action-chip",disabled:!!n,"data-testid":"action-chip-threshold",children:" Threshold"}),r.jsx("button",{onClick:()=>{fetch("/api/admin/execute/system/check-resources",{method:"POST",headers:{"Content-Type":"application/json"}}).then(m=>m.json()).then(m=>{m.success&&alert(` Resources:

Memory: ${m.memory.heapUsed}
Uptime: ${m.uptime}
Node: ${m.nodeVersion}`)})},className:"action-chip",disabled:!!n,"data-testid":"action-chip-resources",children:" Resources"})]})}),r.jsxs("div",{className:"efficiency-hero","data-testid":"efficiency-metrics",children:[r.jsx("div",{className:"efficiency-header",children:r.jsx("h2",{className:"efficiency-title",children:" Curation Efficiency (Today)"})}),r.jsxs("div",{className:"efficiency-stats",children:[r.jsxs("div",{className:"efficiency-stat",children:[r.jsx("div",{className:"efficiency-label",children:"Screened"}),r.jsx("div",{className:"efficiency-value",children:a.curationEfficiency.screened})]}),r.jsxs("div",{className:"efficiency-stat success",children:[r.jsx("div",{className:"efficiency-label",children:"Accepted"}),r.jsx("div",{className:"efficiency-value",children:a.curationEfficiency.accepted})]}),r.jsxs("div",{className:"efficiency-stat danger",children:[r.jsx("div",{className:"efficiency-label",children:"Rejected"}),r.jsx("div",{className:"efficiency-value",children:a.curationEfficiency.rejected})]}),r.jsxs("div",{className:"efficiency-stat primary",children:[r.jsx("div",{className:"efficiency-label",children:"Acceptance Rate"}),r.jsxs("div",{className:"efficiency-value",children:[a.curationEfficiency.acceptanceRate.toFixed(1),"%"]})]})]})]}),g.length>0&&r.jsx("div",{className:"alerts-container","data-testid":"alerts-container",children:g.map(m=>r.jsxs("div",{className:`alert alert-${m.severity}`,"data-testid":`alert-${m.severity}`,children:[r.jsxs("div",{className:"alert-content",children:[r.jsxs("div",{className:"alert-header",children:[r.jsxs("span",{className:"alert-icon",children:[m.severity==="critical"&&"",m.severity==="warning"&&"",m.severity==="info"&&""]}),r.jsx("span",{className:"alert-title",children:m.title})]}),r.jsx("p",{className:"alert-message",children:m.message})]}),r.jsx("button",{className:"alert-dismiss",onClick:()=>v.mutate(m.id),disabled:v.isPending,"data-testid":"button-dismiss-alert",children:""})]},m.id))}),r.jsxs("div",{className:"metrics-compact",children:[r.jsxs("div",{className:"metric-row",children:[r.jsx(lp,{icon:"",label:"Curation",value:a.curationRunning?" Active":" Offline",subtitle:a.minutesSinceRun<999?`${a.minutesSinceRun}m ago`:"Never",status:a.curationRunning?"good":"critical","data-testid":"metric-curation"}),r.jsx(lp,{icon:"",label:"Library",value:a.totalVideos,subtitle:`+${a.videosToday} today`,"data-testid":"metric-videos"})]}),r.jsxs("div",{className:"metric-row",children:[r.jsx(lp,{icon:"",label:"API Quota",value:"N/A",subtitle:"Check system","data-testid":"metric-quota"}),r.jsx(lp,{icon:"",label:"Users",value:a.totalUsers,subtitle:`${a.activeSubscriptions} active`,"data-testid":"metric-users"})]})]}),r.jsxs("div",{className:"main-content",children:[e==="overview"&&r.jsxs("div",{className:"overview-section",children:[r.jsx("h2",{className:"section-title",children:"System Status"}),r.jsx("p",{className:"section-description",children:"Core metrics and operational status at a glance"}),r.jsxs("div",{className:"status-summary",children:[r.jsxs("div",{className:"status-item",children:[r.jsx("span",{className:"status-label",children:"Curation Pipeline"}),r.jsx("span",{className:`status-badge ${a.curationRunning?"running":"stopped"}`,children:a.curationRunning?" Active":" Offline"})]}),r.jsxs("div",{className:"status-item",children:[r.jsx("span",{className:"status-label",children:"Last Curation Run"}),r.jsx("span",{className:"status-value",children:a.minutesSinceRun<999?`${a.minutesSinceRun} minutes ago`:"Never"})]}),r.jsxs("div",{className:"status-item",children:[r.jsx("span",{className:"status-label",children:"Efficiency Status"}),r.jsxs("span",{className:`status-badge ${a.curationEfficiency.status==="optimal"?"running":a.curationEfficiency.status==="strict"?"warning":a.curationEfficiency.status==="unknown"?"neutral":"stopped"}`,children:[a.curationEfficiency.status==="optimal"&&" Optimal (2-5%)",a.curationEfficiency.status==="strict"&&" Strict (<2%)",a.curationEfficiency.status==="too_strict"&&" Too Strict",a.curationEfficiency.status==="loose"&&" Loose (>5%)",a.curationEfficiency.status==="too_loose"&&" Too Loose",a.curationEfficiency.status==="unknown"&&" No Data"]})]})]})]}),e==="stats"&&u&&r.jsxs("div",{className:"stats-section",children:[r.jsx("h2",{className:"section-title",children:"Detailed Statistics"}),r.jsxs(cp,{title:" Curation Pipeline",defaultOpen:!0,children:[r.jsx(fr,{label:"Status",value:u.curation.isRunning?" RUNNING":" OFFLINE"}),r.jsx(fr,{label:"Last Run",value:`${u.curation.minutesSinceLastRun} min ago`}),r.jsx(fr,{label:"Screened (Hour)",value:u.curation.lastHour.screened}),r.jsx(fr,{label:"Accepted (Hour)",value:u.curation.lastHour.accepted}),r.jsx(fr,{label:"Acceptance Rate",value:`${u.curation.lastHour.acceptanceRate}%`}),r.jsx(fr,{label:"API Quota",value:`${u.curation.apiQuota.percentUsed}%`})]}),r.jsxs(cp,{title:" Video Library",children:[r.jsx(fr,{label:"Total Videos",value:u.videos.total}),r.jsx(fr,{label:"Elite Tier",value:`${u.videos.elite} (${u.videos.elitePercent}%)`}),r.jsx(fr,{label:"Added Today",value:u.videos.addedToday})]}),r.jsxs(cp,{title:" Revenue & Subscriptions",children:[r.jsx(fr,{label:"MRR",value:`$${u.stripe.mrr}`}),r.jsx(fr,{label:"Active Subscriptions",value:u.stripe.activeSubscriptions}),r.jsx(fr,{label:"Trial Users",value:u.stripe.trialUsers})]}),r.jsxs(cp,{title:" User Metrics",children:[r.jsx(fr,{label:"Total Users",value:u.users.total}),r.jsx(fr,{label:"Signed Up Today",value:u.users.signedUpToday}),r.jsx(fr,{label:"Lifetime Access",value:u.users.lifetimeAccess})]})]}),e==="actions"&&r.jsxs("div",{className:"actions-section",children:[r.jsx("h2",{className:"section-title",children:"System Operations"}),r.jsxs("div",{className:"action-category",children:[r.jsx("h3",{className:"category-title",children:"Curation Control"}),r.jsxs("div",{className:"action-buttons-grid",children:[r.jsx(As,{icon:"",label:"Restart Curation",onClick:()=>y("restart-curation"),variant:"primary","data-testid":"button-action-restart"}),r.jsx(As,{icon:"",label:"View Logs",onClick:()=>y("view-logs"),"data-testid":"button-action-logs"}),r.jsx(As,{icon:"",label:"Diagnose",onClick:()=>y("diagnose-curation"),"data-testid":"button-action-diagnose"})]})]}),r.jsxs("div",{className:"action-category",children:[r.jsx("h3",{className:"category-title",children:"Video Management"}),r.jsxs("div",{className:"action-buttons-grid",children:[r.jsx(As,{icon:"",label:"Add Video",onClick:()=>{const m=prompt("Enter YouTube URL:");m&&fetch("/api/admin/execute/video/add-manual",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:m})}).then(b=>b.json()).then(b=>{alert(b.success?` ${b.message}`:` ${b.error}`),b.success&&d()})},variant:"primary","data-testid":"button-action-add-video"}),r.jsx(As,{icon:"",label:"Delete Video",onClick:()=>{const m=prompt("Enter video ID:");m&&confirm("Delete this video?")&&fetch("/api/admin/execute/video/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:m})}).then(b=>b.json()).then(b=>{alert(b.success?` ${b.message}`:` ${b.error}`),b.success&&d()})},"data-testid":"button-action-delete-video"})]})]}),r.jsxs("div",{className:"action-category",children:[r.jsx("h3",{className:"category-title",children:" Elite Curator"}),h?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"efficiency-stats",style:{marginBottom:"1rem"},children:[r.jsxs("div",{className:"efficiency-stat",children:[r.jsx("div",{className:"efficiency-label",children:"Status"}),r.jsx("div",{className:"efficiency-value",children:h.enabled?" ON":" OFF"})]}),r.jsxs("div",{className:"efficiency-stat",children:[r.jsx("div",{className:"efficiency-label",children:"Searches Today"}),r.jsxs("div",{className:"efficiency-value",children:[h.dailySearchesUsed,"/",h.maxDailySearches]})]}),r.jsxs("div",{className:"efficiency-stat success",children:[r.jsx("div",{className:"efficiency-label",children:"Approval Rate"}),r.jsxs("div",{className:"efficiency-value",children:[h.today.approvalRate,"%"]})]}),r.jsxs("div",{className:"efficiency-stat primary",children:[r.jsx("div",{className:"efficiency-label",children:"Library Progress"}),r.jsxs("div",{className:"efficiency-value",children:[h.library.progress,"%"]})]})]}),r.jsxs("div",{className:"action-buttons-grid",children:[r.jsx(As,{icon:h.enabled?"":"",label:h.enabled?"Disable":"Enable",onClick:()=>{fetch("/api/admin/elite-curator/toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!h.enabled})}).then(m=>m.json()).then(m=>{alert(m.success?` ${m.message}`:` ${m.error}`),m.success&&(p(),d())})},variant:h.enabled?"default":"primary","data-testid":"button-elite-curator-toggle"}),r.jsx(As,{icon:"",label:"Run Now",onClick:()=>{confirm("Start elite curator run? This will use YouTube API quota.")&&(s("elite-curator"),fetch("/api/admin/elite-curator/run",{method:"POST",headers:{"Content-Type":"application/json"}}).then(m=>m.json()).then(m=>{alert(m.success?` ${m.message}

Approved: ${m.videosApproved}
Approval Rate: ${m.approvalRate.toFixed(1)}%`:` ${m.message}`),m.success&&(p(),d())}).finally(()=>s(null)))},variant:"primary",disabled:!!n||!h.enabled,"data-testid":"button-elite-curator-run"})]}),r.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",opacity:.7},children:[r.jsxs("div",{children:["Elite Instructors: ",h.eliteInstructorCount]}),r.jsxs("div",{children:["Library: ",h.library.current,"/",h.library.target," (",h.library.remaining," remaining)"]}),r.jsxs("div",{children:["Today: ",h.today.searches," searches, ",h.today.approved," approved"]})]})]}):r.jsx("div",{style:{padding:"1rem",textAlign:"center",opacity:.5},children:"Loading elite curator stats..."})]}),r.jsxs("div",{className:"action-category",children:[r.jsx("h3",{className:"category-title",children:"User Management"}),r.jsxs("div",{className:"action-buttons-grid",children:[r.jsx(As,{icon:"",label:"Grant Lifetime",onClick:()=>{const m=prompt("Enter email:");m&&fetch("/api/admin/execute/user/create-lifetime",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m})}).then(b=>b.json()).then(b=>{alert(b.success?` ${b.message}`:` ${b.error}`),b.success&&d()})},variant:"primary","data-testid":"button-action-lifetime"}),r.jsx(As,{icon:"",label:"Cancel Sub",onClick:()=>{const m=prompt("Enter user ID:");m&&confirm("Cancel subscription?")&&fetch("/api/admin/execute/user/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:m})}).then(b=>b.json()).then(b=>{alert(b.success?` ${b.message}`:` ${b.error}`),b.success&&d()})},"data-testid":"button-action-cancel-sub"})]})]}),r.jsxs("div",{className:"action-category",children:[r.jsx("h3",{className:"category-title",children:"System"}),r.jsxs("div",{className:"action-buttons-grid",children:[r.jsx(As,{icon:"",label:"Clear Cache",onClick:()=>{confirm("Clear cache?")&&fetch("/api/admin/execute/system/clear-cache",{method:"POST",headers:{"Content-Type":"application/json"}}).then(m=>m.json()).then(m=>{alert(m.success?` ${m.message}`:` ${m.error}`)})},"data-testid":"button-action-clear-cache"}),r.jsx(As,{icon:"",label:"Resources",onClick:()=>{fetch("/api/admin/execute/system/check-resources",{method:"POST",headers:{"Content-Type":"application/json"}}).then(m=>m.json()).then(m=>{m.success&&alert(` Resources:

Memory: ${m.memory.heapUsed}
Uptime: ${m.uptime}
Node: ${m.nodeVersion}`)})},"data-testid":"button-action-resources"})]})]})]})]}),e==="chat"&&r.jsx("div",{className:"view-content",children:r.jsx(b1e,{})}),r.jsxs("nav",{className:"bottom-nav",children:[r.jsxs("button",{onClick:()=>t("overview"),className:`nav-btn ${e==="overview"?"active":""}`,"data-testid":"nav-overview",children:[r.jsx("span",{className:"nav-icon",children:""}),r.jsx("span",{className:"nav-label",children:"Overview"})]}),r.jsxs("button",{onClick:()=>t("stats"),className:`nav-btn ${e==="stats"?"active":""}`,"data-testid":"nav-stats",children:[r.jsx("span",{className:"nav-icon",children:""}),r.jsx("span",{className:"nav-label",children:"Stats"})]}),r.jsxs("button",{onClick:()=>t("actions"),className:`nav-btn ${e==="actions"?"active":""}`,"data-testid":"nav-actions",children:[r.jsx("span",{className:"nav-icon",children:""}),r.jsx("span",{className:"nav-label",children:"Actions"})]}),r.jsxs("button",{onClick:()=>t("chat"),className:`nav-btn ${e==="chat"?"active":""}`,"data-testid":"nav-chat",children:[r.jsx("span",{className:"nav-icon",children:""}),r.jsx("span",{className:"nav-label",children:"Chat"})]})]})]})}function lp({icon:e,label:t,value:n,subtitle:s,status:i}){const a={good:"#4ade80",warning:"#fbbf24",critical:"#ef4444"}[i||"good"];return r.jsxs("div",{className:"metric-card-compact",children:[r.jsxs("div",{className:"metric-header",children:[r.jsx("span",{className:"metric-icon",children:e}),r.jsx("span",{className:"metric-label",children:t})]}),r.jsx("div",{className:"metric-value",style:i?{color:a}:{},children:n}),s&&r.jsx("div",{className:"metric-subtitle",children:s})]})}function cp({title:e,children:t,defaultOpen:n=!1}){const[s,i]=x.useState(n);return r.jsxs("div",{className:"expandable-section",children:[r.jsxs("button",{onClick:()=>i(!s),className:"section-header","data-testid":`expand-${e.toLowerCase().replace(/\s+/g,"-")}`,children:[r.jsx("span",{children:e}),r.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&r.jsx("div",{className:"section-content",children:t})]})}function fr({label:e,value:t}){return r.jsxs("div",{className:"stat-row",children:[r.jsx("span",{className:"stat-label",children:e}),r.jsx("span",{className:"stat-value",children:t})]})}function As({icon:e,label:t,onClick:n,variant:s="default"}){return r.jsxs("button",{onClick:n,className:`action-button ${s}`,children:[r.jsx("span",{className:"action-icon",children:e}),r.jsx("span",{className:"action-label",children:t})]})}function w1e(){const[,e]=it();return r.jsxs("div",{className:"not-found-page page-container",children:[r.jsxs("div",{className:"not-found-container",children:[r.jsxs("div",{className:"not-found-logo",children:[r.jsxs("div",{className:"not-found-logo-mark",children:[r.jsx("div",{className:"not-found-logo-line"}),r.jsx("div",{className:"not-found-logo-line"}),r.jsx("div",{className:"not-found-logo-line"}),r.jsx("div",{className:"not-found-logo-line"})]}),r.jsx("span",{className:"not-found-logo-text",children:"BJJ OS"})]}),r.jsxs("div",{className:"not-found-content",children:[r.jsx("h1",{className:"not-found-code",children:"404"}),r.jsx("h2",{className:"not-found-title",children:"Page Not Found"}),r.jsx("p",{className:"not-found-description",children:"The page you're looking for doesn't exist or has been moved."}),r.jsxs("div",{className:"not-found-actions",children:[r.jsx("button",{className:"not-found-button primary",onClick:()=>e("/"),"data-testid":"button-home",children:"Go Home"}),r.jsx("button",{className:"not-found-button secondary",onClick:()=>e("/login"),"data-testid":"button-login",children:"Login"})]})]})]}),r.jsx("style",{children:`
        /* ==================== GLOBAL VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0F0F0F;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
          --blue-hover-1: #1D4ED8;
          --purple-hover-1: #6D28D9;
          --font-mono: 'JetBrains Mono', monospace;
        }

        /* ==================== BASE STYLES ==================== */
        .not-found-page {
          font-family: var(--font-mono);
          background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
          color: var(--white);
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          position: relative;
          padding: 40px;
        }

        /* Subtle grain texture overlay */
        .not-found-page::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
          pointer-events: none;
          z-index: 9999;
          mix-blend-mode: overlay;
        }

        /* ==================== CONTAINER ==================== */
        .not-found-container {
          max-width: 600px;
          text-align: center;
          position: relative;
          z-index: 1;
        }

        /* ==================== LOGO ==================== */
        .not-found-logo {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          margin-bottom: 64px;
        }

        .not-found-logo-mark {
          display: flex;
          gap: 2px;
          height: 20px;
        }

        .not-found-logo-line {
          width: 1px;
          height: 20px;
          background: var(--white);
        }

        .not-found-logo-line:nth-child(2) {
          margin-right: 2px;
        }

        .not-found-logo-line:nth-child(3) {
          margin-left: 2px;
        }

        .not-found-logo-text {
          font-weight: 700;
          font-size: 16px;
          color: var(--white);
        }

        /* ==================== CONTENT ==================== */
        .not-found-content {
          background: var(--black-elevated);
          padding: 64px 48px;
          border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .not-found-code {
          font-size: 96px;
          font-weight: 700;
          color: var(--white);
          line-height: 1;
          margin-bottom: 24px;
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        @supports not (background-clip: text) {
          .not-found-code {
            color: var(--blue);
          }
        }

        .not-found-title {
          font-size: 32px;
          font-weight: 700;
          color: var(--white);
          margin-bottom: 16px;
        }

        .not-found-description {
          font-size: 16px;
          color: var(--gray-light);
          line-height: 1.6;
          margin-bottom: 48px;
        }

        /* ==================== ACTIONS ==================== */
        .not-found-actions {
          display: flex;
          gap: 16px;
          justify-content: center;
          flex-wrap: wrap;
        }

        .not-found-button {
          font-family: var(--font-mono);
          font-weight: 700;
          font-size: 16px;
          padding: 14px 32px;
          border: none;
          cursor: pointer;
          transition: all 150ms ease;
        }

        .not-found-button.primary {
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          background-size: 200% 200%;
          animation: gradient-shift 8s ease infinite;
          color: var(--white);
        }

        .not-found-button.primary:hover {
          background: linear-gradient(135deg, var(--blue-hover-1) 0%, var(--purple-hover-1) 100%);
        }

        .not-found-button.secondary {
          background: transparent;
          border: 1px solid var(--gray-dark);
          color: var(--gray-light);
        }

        .not-found-button.secondary:hover {
          border: 1px solid var(--blue);
          color: var(--blue);
        }

        .not-found-button:active {
          transform: translateY(1px);
        }

        @keyframes gradient-shift {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .not-found-page {
            padding: 24px;
          }

          .not-found-content {
            padding: 48px 32px;
          }

          .not-found-code {
            font-size: 72px;
          }

          .not-found-title {
            font-size: 24px;
          }

          .not-found-actions {
            flex-direction: column;
          }

          .not-found-button {
            width: 100%;
          }
        }
      `})]})}const oO=[{path:"/chat",icon:sd,label:"Chat",testId:"nav-chat"},{path:"/library",icon:yl,label:"Videos",testId:"nav-library"},{path:"/saved-videos",icon:WI,label:"Saved",testId:"nav-saved"},{path:"/settings",icon:_l,label:"Settings",testId:"nav-settings"}];function ra({children:e}){const[t]=it(),{data:n}=pe({queryKey:["/api/auth/me"]});return r.jsxs("div",{className:"flex h-screen w-full overflow-hidden",children:[r.jsxs("aside",{className:"hidden md:flex md:w-64 flex-col border-r bg-card",children:[r.jsxs("div",{className:"p-6 border-b",children:[r.jsx("a",{href:"/","data-testid":"link-home",children:r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-8 w-auto"})}),(n==null?void 0:n.displayName)&&r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n.displayName})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:oO.map(s=>{const i=s.icon,a=t===s.path;return r.jsx(sn,{href:s.path,children:r.jsxs("a",{"data-testid":s.testId,className:`
                    flex items-center gap-3 px-4 py-3 rounded-md
                    transition-colors hover-elevate active-elevate-2 cursor-pointer
                    ${a?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent"}
                  `,children:[r.jsx(i,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:s.label})]})},s.path)})})]}),r.jsx("main",{className:"flex-1 overflow-auto flex flex-col pb-16 md:pb-0",children:e}),r.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-[100] bg-card border-t",style:{paddingBottom:"max(0px, env(safe-area-inset-bottom))"},children:r.jsx("div",{className:"flex items-center justify-around h-16 px-2",children:oO.map(s=>{const i=s.icon,a=t===s.path;return r.jsx(sn,{href:s.path,children:r.jsxs("a",{"data-testid":`${s.testId}-mobile`,className:`
                    flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-md
                    transition-colors min-w-[60px] cursor-pointer
                    ${a?"text-primary":"text-muted-foreground hover:text-foreground"}
                  `,children:[r.jsx(i,{className:`w-5 h-5 ${a?"fill-primary":""}`}),r.jsx("span",{className:"text-xs font-medium",children:s.label})]})},s.path)})})})]})}var N1e="AspectRatio",VL=x.forwardRef((e,t)=>{const{ratio:n=1/1,style:s,...i}=e;return r.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/n}%`},"data-radix-aspect-ratio-wrapper":"",children:r.jsx(He.div,{...i,ref:t,style:{...s,position:"absolute",top:0,right:0,bottom:0,left:0}})})});VL.displayName=N1e;var S1e=VL;const lO=S1e,k1e="/assets/bjjos-logo-DpAxDpQq.png";function f2({thumbnailUrl:e,videoId:t,title:n,className:s=""}){const[i,a]=x.useState(0),[o,l]=x.useState(!0),c=p=>p?/^[a-zA-Z0-9_-]{11}$/.test(p.trim()):!1,d=x.useMemo(()=>{const p=[];if(e&&e.trim()&&p.push(e),t&&c(t)){const v=t.trim();p.push(`https://img.youtube.com/vi/${v}/maxresdefault.jpg`),p.push(`https://img.youtube.com/vi/${v}/hqdefault.jpg`),p.push(`https://img.youtube.com/vi/${v}/mqdefault.jpg`),p.push(`https://i.ytimg.com/vi/${v}/mqdefault.jpg`)}return p},[e,t]);x.useEffect(()=>{a(0),l(!0)},[d]);const u=d[i];if(!u)return r.jsx(lO,{ratio:16/9,className:s,children:r.jsx("div",{className:"w-full h-full rounded-lg flex items-center justify-center border border-[#1A1A1C]",style:{background:"linear-gradient(135deg, #0A0A0B 0%, #1A1A1C 50%, #0A0A0B 100%)"},children:r.jsx("img",{src:k1e,alt:"BJJ OS",className:"h-10 w-auto opacity-70",onError:p=>{p.target.style.display="none"}})})});const f=()=>{a(i+1),l(!0)},h=p=>{const v=p.currentTarget;if(v.naturalWidth===120&&v.naturalHeight===90){f();return}l(!1)};return r.jsx(lO,{ratio:16/9,className:s,children:r.jsxs("div",{className:"relative w-full h-full rounded-lg overflow-hidden",style:{background:"linear-gradient(135deg, #0A0A0B 0%, #1A1A1C 50%, #0A0A0B 100%)"},children:[o&&r.jsx("div",{className:"absolute inset-0 bg-[#2A2A2C] animate-pulse"}),r.jsx("img",{src:u,alt:n,className:`w-full h-full object-cover transition-opacity duration-200 ${o?"opacity-0":"opacity-100"}`,loading:"lazy",onLoad:h,onError:f},u),r.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:r.jsx(Rr,{className:"w-12 h-12 text-white drop-shadow-lg"})})]})})}function h2({size:e="md",className:t}){const n={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return r.jsxs("div",{className:Ce("relative inline-block",n[e],t),"data-testid":"ios-spinner",children:[r.jsx("div",{className:"absolute inset-0",children:[...Array(12)].map((s,i)=>r.jsx("div",{className:"absolute left-1/2 top-0 -translate-x-1/2 w-[8%] h-[25%] bg-current rounded-full origin-[center_200%]",style:{transform:`rotate(${i*30}deg) translateX(-50%)`,opacity:1-i*.08,animation:"ios-spinner 1s linear infinite",animationDelay:`${-i*(1/12)}s`}},i))}),r.jsx("style",{children:`
        @keyframes ios-spinner {
          from { opacity: 1; }
          to { opacity: 0.15; }
        }
      `})]})}function C1e(e){var l;if(!e)return[{text:""}];const t=[],n=/\[VIDEO:\s*([^\]]+)\]/g,s=new Set,i=new Set;let a=0,o;for(;(o=n.exec(e))!==null;){o.index>a&&t.push({text:e.slice(a,o.index)});const c=o[1].split("|").map(d=>d.trim());if(c.length>=5){const d=((l=c[3])==null?void 0:l.trim())||"",u=parseInt(c[4],10);if(isNaN(u))console.warn("[parseVideoTokens] Invalid video ID (NaN), using fallback:",c[4]);else{if(s.has(u)){console.log("[parseVideoTokens] Skipping duplicate video ID:",u),a=o.index+o[0].length;continue}s.add(u);let f=0;if(c.length>=6&&c[5]){const p=c[5].trim();if(p.includes(":")){const v=p.split(":").map(Number);v.length===2&&!isNaN(v[0])&&!isNaN(v[1])?f=v[0]*60+v[1]:v.length===3&&!isNaN(v[0])&&!isNaN(v[1])&&!isNaN(v[2])&&(f=v[0]*3600+v[1]*60+v[2]),console.log("[parseVideoTokens] Extracted enriched timestamp (MM:SS):",p,"",f,"seconds")}else{const v=parseInt(p,10);isNaN(v)||(f=v,console.log("[parseVideoTokens] Extracted enriched timestamp (seconds):",f))}}if(f===0&&c[2]){const p=c[2].match(/(?:START:\s*)?(\d+):(\d+)/i);p&&(f=parseInt(p[1],10)*60+parseInt(p[2],10),console.log("[parseVideoTokens] Extracted duration timestamp:",f,"seconds"))}const h={title:c[0],instructor:c[1],duration:c[2],videoId:d,id:u,startTimeSeconds:f};d||console.warn("[parseVideoTokens] Enriched token missing videoId:",c),t.push({text:"",video:h}),a=o.index+o[0].length;continue}}if(c.length<5||isNaN(parseInt(c[4],10))){console.warn("[parseVideoTokens] Enrichment failed, using fallback format. Parts:",c.length);const u=(c[0]||"").match(/^(.+?)\s+by\s+(.+)$/i);let f=0,h="";const p=o[1].match(/START:\s*(\d+):(\d+)/i);if(p){const v=parseInt(p[1],10),g=parseInt(p[2],10);f=v*60+g,h=`${v}:${p[2].padStart(2,"0")}`,console.log("[parseVideoTokens] Extracted START timestamp:",h,"(",f,"seconds)")}if(u){const v=u[1].trim(),g=u[2].trim(),y=`${v.toLowerCase()}-${g.toLowerCase()}`;if(i.has(y)){console.log("[parseVideoTokens] Skipping duplicate video by title:",v),a=o.index+o[0].length;continue}i.add(y);const j={title:v,instructor:g,duration:h||"full",videoId:"",id:Date.now(),startTimeSeconds:f};t.push({text:"",video:j}),console.log("[parseVideoTokens] Rendered fallback card:",v,"by",g,h?`@ ${h}`:"")}else console.warn("[parseVideoTokens] Could not parse video token:",o[1]),t.push({text:o[0]})}a=o.index+o[0].length}return a<e.length&&t.push({text:e.slice(a)}),t.length>0?t:[{text:e}]}function A1e(){var O;const[e,t]=x.useState(""),[n,s]=x.useState(!1),[i,a]=x.useState(new Set),[o,l]=x.useState(null),[c,d]=x.useState("Analyzing your training"),{messages:u,setMessages:f,historyLoaded:h,setHistoryLoaded:p}=PN(),v=x.useRef(null),{toast:g}=Je(),[,y]=it(),{data:j,isLoading:m,error:b,isFetching:N}=pe({queryKey:["/api/auth/me"]}),w=((O=j==null?void 0:j.id)==null?void 0:O.toString())||"",{data:S,isLoading:k}=pe({queryKey:["/api/ai/chat/history",w],enabled:!!w,refetchOnMount:!0,staleTime:0});x.useLayoutEffect(()=>{var I;if(u.length>0||h){console.log("[CHAT] Context already has",u.length,"messages - skipping reload");return}const C=_e.getQueryData(["/api/auth/me"]),R=(I=C==null?void 0:C.id)==null?void 0:I.toString();if(R){const B=_e.getQueryData(["/api/ai/chat/history",R]);if(B!=null&&B.messages&&B.messages.length>0){const H=new Set,Q=B.messages.filter(D=>{const te=String(D.id);return H.has(te)?(console.warn("[CHAT] Skipping duplicate message ID from cache:",te),!1):(H.add(te),!0)}).map(D=>({id:D.id,role:D.role,content:D.content,timestamp:D.createdAt}));console.log("[CHAT] Loading",Q.length,"messages from React Query cache (deduplicated from",B.messages.length,")"),f(Q),p(!0)}}},[]);const{data:P}=pe({queryKey:["/api/ai/saved-videos",w],enabled:!!w});x.useEffect(()=>{P!=null&&P.videos&&a(new Set(P.videos.map(C=>parseInt(C.id))))},[P]),x.useEffect(()=>{b&&!m&&(g({title:"Authentication Required",description:"Please log in to continue",variant:"destructive"}),y("/login"))},[b,m,y,g]),x.useEffect(()=>{!m&&!N&&j&&(console.log("[CHAT] User data loaded, checking onboarding status:",{onboardingCompleted:j.onboardingCompleted,isFetching:N,isLoading:m}),j.onboardingCompleted?console.log("[CHAT] User has completed onboarding, staying on /chat"):(console.log("[CHAT] User has not completed onboarding, redirecting to /onboarding"),y("/onboarding")))},[j,m,N,y]),x.useEffect(()=>{if(!(u.length>0||h)&&S!=null&&S.messages&&S.messages.length>0){const C=new Set,R=S.messages.filter(I=>{const B=String(I.id);return C.has(B)?(console.warn("[CHAT] Skipping duplicate message ID from history:",B),!1):(C.add(B),!0)}).map(I=>({id:I.id,role:I.role,content:I.content,timestamp:I.createdAt}));console.log("[CHAT] Loading",R.length,"messages from API response (deduplicated from",S.messages.length,")"),f(R),p(!0)}},[S,u.length,h,f,p]),x.useEffect(()=>{var C;(C=v.current)==null||C.scrollIntoView({behavior:"smooth"})},[u]),x.useEffect(()=>{if(!n){d("Analyzing your training");return}const C=["Analyzing your training","Reviewing your patterns","Finding relevant techniques","Crafting response"];let R=0;const I=setInterval(()=>{R=(R+1)%C.length,d(C[R])},2e3);return()=>clearInterval(I)},[n]);const E=async()=>{var H;if(!e.trim()||n)return;oe("light");const C=e.trim();t("");const R={id:Date.now().toString(),role:"user",content:C,timestamp:new Date().toISOString()};f(Q=>[...Q,R]),s(!0);const I=Date.now().toString()+"-assistant",B={id:I,role:"assistant",content:"",timestamp:new Date().toISOString()};f(Q=>[...Q,B]);try{const Q=await fetch("/api/ai/chat/claude/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:C,userId:w})});if(!Q.ok)throw new Error("Failed to send message");const D=(H=Q.body)==null?void 0:H.getReader(),te=new TextDecoder;let V="",J="",me=!1;if(D)for(;;){const{done:de,value:ve}=await D.read();if(de)break;J+=te.decode(ve,{stream:!0});const ce=J.split(`
`);J=ce.pop()||"";for(const U of ce)if(U.startsWith("data: ")){const L=U.slice(6);if(L==="[DONE]"){me=!0,s(!1);break}try{const z=JSON.parse(L);if(z.error){console.error("[SSE] Server error:",z.error),V="I had trouble with that message. This can happen when certain words trigger safety filters, even in normal BJJ context. Could you try rephrasing? For example, instead of 'I got destroyed,' you could say 'I struggled against mount.'",f(Ne=>Ne.map(le=>le.id===I?{...le,content:V}:le)),s(!1),me=!0;break}if(z.chunk||z.content){const Ne=z.chunk||z.content;V+=Ne,f(le=>le.map(Ae=>Ae.id===I?{...Ae,content:V}:Ae))}else z.processedContent?(console.log("[VIDEO TOKENS]  Received processed content with video tokens (REPLACING, not appending)"),V=z.processedContent,f(Ne=>Ne.map(le=>le.id===I?{...le,content:z.processedContent}:le))):z.done&&console.log("[SSE]  Stream complete. Metadata:",z.metadata)}catch{console.debug("[SSE] Skipping unparseable data:",L.substring(0,50))}}if(me)break}s(!1),console.log("[CHAT] Message sent successfully, invalidating chat history cache"),_e.invalidateQueries({queryKey:["/api/ai/chat/history",w]})}catch(Q){s(!1),f(D=>D.filter(te=>te.id!==I)),g({title:"Error",description:Q.message||"Failed to send message",variant:"destructive"})}},_=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),E())},F=qe({mutationFn:async C=>(console.log("[CHAT SAVE] Attempting to save video:",{videoId:C,userId:w}),oe("light"),await lt("POST","/api/ai/saved-videos",{videoId:C,userId:w})),onSuccess:(C,R)=>{console.log("[CHAT SAVE] Successfully saved video:",R),oe("success"),a(I=>new Set([...Array.from(I),R])),g({title:"Saved",description:"Video added to your library"}),_e.invalidateQueries({queryKey:["/api/ai/saved-videos",w]})},onError:(C,R)=>{console.error("[CHAT SAVE] Failed to save video:",{videoId:R,error:C.message||C}),g({title:"Error",description:C.message||"Failed to save video",variant:"destructive"})}}),A=qe({mutationFn:async C=>(console.log("[CHAT UNSAVE] Attempting to unsave video:",{videoId:C,userId:w}),await lt("DELETE",`/api/ai/saved-videos/${C}`,{userId:w})),onSuccess:(C,R)=>{console.log("[CHAT UNSAVE] Successfully unsaved video:",R),a(I=>{const B=Array.from(I);return new Set(B.filter(H=>H!==R))}),g({title:"Removed",description:"Video removed from your library"}),_e.invalidateQueries({queryKey:["/api/ai/saved-videos",w]})},onError:(C,R)=>{console.error("[CHAT UNSAVE] Failed to unsave video:",{videoId:R,error:C.message||C}),g({title:"Error",description:C.message||"Failed to remove video",variant:"destructive"})}}),T=C=>{console.log("[CHAT TOGGLE SAVE] Toggle save for video:",{videoId:C,isSaved:i.has(C),userId:w}),i.has(C)?A.mutate(C):F.mutate(C)};if(m)return r.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex items-center justify-center",children:r.jsx(h2,{size:"lg",className:"text-purple-400"})});const M=u.length>0;return r.jsxs(ra,{children:[r.jsxs("div",{className:"h-full bg-[#0A0A0B] flex flex-col overflow-hidden",children:[r.jsx("header",{className:"sticky top-0 z-100 bg-[#0A0A0B] border-b border-[#1A1A1C]",style:{height:"80px"},"data-testid":"chat-header",children:r.jsxs("div",{className:"h-full flex flex-col items-center justify-center px-6",children:[r.jsx("h1",{className:"text-[20px] md:text-[24px] font-bold text-white tracking-tight",children:"Prof. OS"}),r.jsxs("p",{className:"text-[13px] md:text-[14px] text-white/70 text-center leading-relaxed mt-1",style:{letterSpacing:"0.02em"},children:["Learns your game.",r.jsx("br",{className:"md:hidden"})," Makes you better."]})]})}),r.jsxs("main",{className:"flex-1 overflow-y-auto pb-48 md:pb-32",style:{WebkitOverflowScrolling:"touch"},children:[!M&&r.jsx("div",{className:"flex items-center justify-center min-h-full px-5 py-20",children:r.jsxs("div",{className:"bg-[#0A0A0B] border border-[#1A1A1C] rounded-xl p-10 md:p-16 max-w-[600px] w-full text-center",style:{boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},"data-testid":"welcome-message",children:[r.jsx("h2",{className:"text-[24px] md:text-[28px] font-medium text-white mb-8",style:{letterSpacing:"0.02em"},children:"Prof. OS"}),r.jsxs("div",{className:"space-y-6 mb-10",children:[r.jsxs("p",{className:"text-[15px] md:text-[16px] text-white/90 leading-relaxed",style:{letterSpacing:"0.02em"},children:["I've analyzed 10,000+",r.jsx("br",{}),"videos from elite",r.jsx("br",{}),"instructors."]}),r.jsxs("p",{className:"text-[15px] md:text-[16px] text-white/90 leading-relaxed",style:{letterSpacing:"0.02em"},children:["I track patterns in",r.jsx("br",{}),"your training you",r.jsx("br",{}),"can't see."]}),r.jsxs("p",{className:"text-[15px] md:text-[16px] text-white/90 leading-relaxed",style:{letterSpacing:"0.02em"},children:["I remember every",r.jsx("br",{}),"detail you share."]})]}),r.jsxs("p",{className:"text-[15px] md:text-[16px] text-white/85 leading-relaxed mb-16",style:{letterSpacing:"0.02em"},children:["The more we talk,",r.jsx("br",{}),"the smarter I get",r.jsx("br",{}),"about YOUR jiu jitsu."]}),r.jsxs("p",{className:"text-[16px] md:text-[18px] font-medium text-white",style:{letterSpacing:"0.02em"},children:["What did you work",r.jsx("br",{}),"on today?"]})]})}),M&&r.jsxs("div",{className:"max-w-[600px] mx-auto px-5 py-6 space-y-2",children:[u.map(C=>r.jsx("div",{className:`flex ${C.role==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-3 ${C.role==="user"?"bg-[#2563EB] text-white rounded-tr-sm chat-message-sent":"bg-[#111113] text-white/90 rounded-tl-sm chat-message-streaming"}`,style:{fontSize:"15px",lineHeight:"1.5"},children:[C1e(C.content).map((R,I)=>r.jsxs("div",{children:[R.text&&r.jsx("p",{className:"whitespace-pre-wrap",children:R.text}),R.video&&r.jsxs("div",{className:"mt-3 bg-[#0A0A0B] border border-[#1A1A1C] rounded-lg overflow-hidden","data-testid":`video-card-${R.video.id}`,children:[r.jsx(f2,{videoId:R.video.videoId,title:R.video.title,className:"bg-[#1A1A1C]"}),r.jsxs("div",{className:"p-3 space-y-2",children:[r.jsx("h4",{className:"text-[14px] font-semibold text-white/90",children:R.video.title}),r.jsx("p",{className:"text-[12px] text-[#2563EB]",children:R.video.instructor}),r.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[r.jsx(Z,{size:"sm",className:"h-9 bg-[#2563EB] hover:bg-[#1d4ed8] text-white rounded-full",onClick:()=>l({videoId:R.video.videoId,title:R.video.title,instructor:R.video.instructor,startTimeSeconds:R.video.startTimeSeconds||0}),"data-testid":`button-watch-${R.video.id}`,children:R.video.startTimeSeconds&&R.video.startTimeSeconds>0?`@ ${Math.floor(R.video.startTimeSeconds/60)}:${String(R.video.startTimeSeconds%60).padStart(2,"0")}`:"full"}),r.jsx(Z,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0",onClick:()=>T(R.video.id),"data-testid":`button-save-${R.video.id}`,children:i.has(R.video.id)?r.jsx(cv,{className:"h-4 w-4 text-[#2563EB]"}):r.jsx(ps,{className:"h-4 w-4 text-white/50"})})]})]})]})]},I)),r.jsx("div",{className:"text-[12px] text-white/50 mt-2",children:new Date(C.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})},C.id)),n&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-[#111113] text-white/90 rounded-2xl rounded-tl-sm px-4 py-3 chat-thinking-indicator",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex gap-1 mt-1",children:[r.jsx("span",{className:"w-2 h-2 bg-white/50 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-white/50 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-white/50 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),r.jsxs("div",{className:"text-[14px] text-white/70",children:[c,"..."]})]})})}),r.jsx("div",{ref:v})]})]}),r.jsx("div",{className:"fixed left-0 right-0 z-50 bg-[#0A0A0B] border-t border-[#1A1A1C] px-4 pb-4 md:bottom-0 bottom-16",style:{paddingTop:"16px",paddingBottom:"calc(16px + env(safe-area-inset-bottom))"},"data-testid":"chat-input-area",children:r.jsxs("div",{className:"max-w-[600px] mx-auto space-y-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("textarea",{ref:C=>C&&(C.style.fontSize="16px"),value:e,onChange:C=>t(C.target.value),onKeyPress:_,placeholder:"Ask Prof. OS...",className:"w-full bg-[#111113] border border-[#333333] rounded-3xl px-5 py-3 pr-14 text-white placeholder:text-white/60 resize-none focus:outline-none focus:ring-2 focus:ring-[#2563EB] focus:border-transparent",style:{fontSize:"16px",minHeight:"48px",maxHeight:"120px"},rows:1,"data-testid":"input-message"}),r.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center text-white/70 hover:text-white transition-colors rounded-full","data-testid":"button-voice",children:r.jsx(mN,{className:"w-5 h-5"})})]}),r.jsx(Z,{onClick:E,disabled:!e.trim()||n,className:"w-full h-12 bg-[#2563EB] hover:bg-[#1d4ed8] text-white font-medium rounded-3xl text-[16px]","data-testid":"button-send",children:"Send"})]})})]}),o&&r.jsx(Ll,{videoId:o.videoId,title:o.title,instructor:o.instructor,startTime:o.startTimeSeconds||0,onClose:()=>l(null)})]})}const Yb=768;function P1e(){const[e,t]=x.useState(void 0);return x.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Yb-1}px)`),s=()=>{t(window.innerWidth<Yb)};return n.addEventListener("change",s),t(window.innerWidth<Yb),()=>n.removeEventListener("change",s)},[]),!!e}const E1e=WN,T1e=HN,WL=x.forwardRef(({className:e,...t},n)=>r.jsx(tm,{className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));WL.displayName=tm.displayName;const O1e=Ud("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),HL=x.forwardRef(({side:e="right",className:t,children:n,...s},i)=>r.jsxs(T1e,{children:[r.jsx(WL,{}),r.jsxs(nm,{ref:i,className:Ce(O1e({side:e}),t),...s,children:[n,r.jsxs(im,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(ys,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));HL.displayName=nm.displayName;const KL=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col space-y-2 text-center sm:text-left",e),...t});KL.displayName="SheetHeader";const GL=x.forwardRef(({className:e,...t},n)=>r.jsx(rm,{ref:n,className:Ce("text-lg font-semibold text-foreground",e),...t}));GL.displayName=rm.displayName;const YL=x.forwardRef(({className:e,...t},n)=>r.jsx(sm,{ref:n,className:Ce("text-sm text-muted-foreground",e),...t}));YL.displayName=sm.displayName;const _1e="sidebar_state",I1e=60*60*24*7,R1e="16rem",M1e="18rem",F1e="3rem",$1e="b",QL=x.createContext(null);function JL(){const e=x.useContext(QL);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function D1e({defaultOpen:e=!0,open:t,onOpenChange:n,className:s,style:i,children:a,...o}){const l=P1e(),[c,d]=x.useState(!1),[u,f]=x.useState(e),h=t??u,p=x.useCallback(j=>{const m=typeof j=="function"?j(h):j;n?n(m):f(m),document.cookie=`${_1e}=${m}; path=/; max-age=${I1e}`},[n,h]),v=x.useCallback(()=>l?d(j=>!j):p(j=>!j),[l,p,d]);x.useEffect(()=>{const j=m=>{m.key===$1e&&(m.metaKey||m.ctrlKey)&&(m.preventDefault(),v())};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[v]);const g=h?"expanded":"collapsed",y=x.useMemo(()=>({state:g,open:h,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:v}),[g,h,p,l,c,d,v]);return r.jsx(QL.Provider,{value:y,children:r.jsx(CN,{delayDuration:0,children:r.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":R1e,"--sidebar-width-icon":F1e,...i},className:Ce("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",s),...o,children:a})})})}function L1e({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:s,children:i,...a}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:d}=JL();return n==="none"?r.jsx("div",{"data-slot":"sidebar",className:Ce("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",s),...a,children:i}):o?r.jsx(E1e,{open:c,onOpenChange:d,...a,children:r.jsxs(HL,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":M1e},side:e,children:[r.jsxs(KL,{className:"sr-only",children:[r.jsx(GL,{children:"Sidebar"}),r.jsx(YL,{children:"Displays the mobile sidebar."})]}),r.jsx("div",{className:"flex h-full w-full flex-col",children:i})]})}):r.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":t,"data-side":e,"data-slot":"sidebar",children:[r.jsx("div",{"data-slot":"sidebar-gap",className:Ce("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),r.jsx("div",{"data-slot":"sidebar-container",className:Ce("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",s),...a,children:r.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:i})})]})}function B1e({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:Ce("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t})}function z1e({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:Ce("relative flex w-full min-w-0 flex-col p-2",e),...t})}function q1e({className:e,asChild:t=!1,...n}){const s=t?sv:"div";return r.jsx(s,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:Ce("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})}function U1e({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:Ce("w-full text-sm",e),...t})}function V1e({className:e,...t}){return r.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:Ce("flex w-full min-w-0 flex-col gap-1",e),...t})}function W1e({className:e,...t}){return r.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:Ce("group/menu-item relative",e),...t})}const H1e=Ud("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function K1e({asChild:e=!1,isActive:t=!1,variant:n="default",size:s="default",tooltip:i,className:a,...o}){const l=e?sv:"button",{isMobile:c,state:d}=JL(),u=r.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":s,"data-active":t,className:Ce(H1e({variant:n,size:s}),a),...o});return i?(typeof i=="string"&&(i={children:i}),r.jsxs(L5,{children:[r.jsx(B5,{asChild:!0,children:u}),r.jsx(AN,{side:"right",align:"center",hidden:d!=="collapsed"||c,...i})]})):u}const G1e=[{title:"Profile",path:"/settings/profile",icon:Co},{title:"Security",path:"/settings/security",icon:Ni},{title:"Subscription",path:"/settings/subscription",icon:_s},{title:"Referrals",path:"/settings/referrals",icon:Mn}];function Y1e(){const[e]=it();return r.jsx(L1e,{children:r.jsx(B1e,{children:r.jsxs(z1e,{children:[r.jsxs(q1e,{className:"flex items-center gap-2 mb-4",children:[r.jsx(Gd,{className:"w-4 h-4 text-primary"}),r.jsx("span",{className:"text-base font-semibold",children:"BJJ OS Settings"})]}),r.jsx(U1e,{children:r.jsx(V1e,{children:G1e.map(t=>{const n=t.icon,s=e===t.path;return r.jsx(W1e,{children:r.jsx(K1e,{asChild:!0,"data-active":s,children:r.jsxs(sn,{href:t.path,"data-testid":`link-${t.title.toLowerCase()}`,children:[r.jsx(n,{className:"w-4 h-4"}),r.jsx("span",{children:t.title})]})})},t.title)})})})]})})})}function jo({children:e}){const[,t]=it(),n=async()=>{const{clearAuth:i}=await or(async()=>{const{clearAuth:a}=await Promise.resolve().then(()=>Mf);return{clearAuth:a}},void 0);await i(),t("/")},s={"--sidebar-width":"16rem","--sidebar-width-icon":"3rem"};return r.jsx(D1e,{style:s,children:r.jsxs("div",{className:"flex h-screen w-full",children:[r.jsx(Y1e,{}),r.jsxs("div",{className:"flex flex-col flex-1",children:[r.jsxs("header",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx(sn,{href:"/chat",children:r.jsxs(Z,{variant:"ghost",size:"sm","data-testid":"button-back-chat",children:[r.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Back to Chat"]})}),r.jsxs(Z,{variant:"ghost",size:"sm",onClick:n,"data-testid":"button-logout",children:[r.jsx(Vd,{className:"w-4 h-4 mr-2"}),"Logout"]})]}),r.jsx("main",{className:"flex-1 overflow-auto p-6",children:e})]})]})})}function Q1e(){var g;const{toast:e}=Je(),[t,n]=x.useState(!1),[s,i]=x.useState({displayName:"",username:"",beltLevel:"white",style:"gi",trainingFrequency:2,struggleAreaCategory:"guard_passing",heightFeet:"",heightInches:"",weight:"",age:""}),a=y=>{if(!y)return{feet:"",inches:""};const j=parseInt(y);return isNaN(j)?{feet:"",inches:""}:{feet:String(Math.floor(j/12)),inches:String(j%12)}},o=()=>{const y=parseInt(s.heightFeet)||0,j=parseInt(s.heightInches)||0;if(!(y===0&&j===0))return String(y*12+j)},l=y=>{if(!y)return"Not set";const j=parseInt(y);if(isNaN(j))return y;const m=Math.floor(j/12),b=j%12;return`${m}'${b}"`},{data:c,isLoading:d}=pe({queryKey:["/api/auth/me"],refetchOnMount:!0});x.useEffect(()=>{if(c!=null&&c.user){const y=a(c.user.height);i({displayName:c.user.displayName||"",username:c.user.username||"",beltLevel:c.user.beltLevel||"white",style:c.user.style||"gi",trainingFrequency:c.user.trainingFrequency||2,struggleAreaCategory:c.user.struggleAreaCategory||"guard_passing",heightFeet:y.feet,heightInches:y.inches,weight:c.user.weight||"",age:c.user.age||""})}},[c==null?void 0:c.user]),console.log("[ProfileSettings] Query data:",c),console.log("[ProfileSettings] User:",c==null?void 0:c.user),console.log("[ProfileSettings] Belt level:",(g=c==null?void 0:c.user)==null?void 0:g.beltLevel);const u=qe({mutationFn:async y=>await lt("PATCH","/api/auth/profile",y),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/auth/me"]}),e({title:"Profile Updated",description:"Your profile has been successfully updated"}),n(!1)},onError:y=>{e({title:"Update Failed",description:y.message,variant:"destructive"})}}),f=()=>{console.log("[ProfileSettings] Edit button clicked"),console.log("[ProfileSettings] User data:",c==null?void 0:c.user);const y=c==null?void 0:c.user,j=a(y==null?void 0:y.height);i({displayName:(y==null?void 0:y.displayName)||"",username:(y==null?void 0:y.username)||"",beltLevel:(y==null?void 0:y.beltLevel)||"white",style:(y==null?void 0:y.style)||"gi",trainingFrequency:(y==null?void 0:y.trainingFrequency)||2,struggleAreaCategory:(y==null?void 0:y.struggleAreaCategory)||"guard_passing",heightFeet:j.feet,heightInches:j.inches,weight:(y==null?void 0:y.weight)||"",age:(y==null?void 0:y.age)||""}),n(!0),console.log("[ProfileSettings] Edit mode enabled")},h=()=>{const y={...s,height:o()};u.mutate(y)},p=()=>{n(!1)};if(d)return r.jsx(jo,{children:r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(De,{className:"w-8 h-8 animate-spin text-primary"})})});const v=c==null?void 0:c.user;return r.jsx(jo,{children:r.jsxs("div",{className:"max-w-2xl",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Profile Settings"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Manage your personal information and training preferences"}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Personal Information"}),r.jsx(ze,{children:"Your profile helps us personalize your training experience"})]}),r.jsxs(ee,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Name"}),t?r.jsx(je,{value:s.displayName,onChange:y=>i({...s,displayName:y.target.value}),placeholder:"Enter your name","data-testid":"input-name"}):r.jsx(je,{value:(v==null?void 0:v.displayName)||"Not set",disabled:!0,"data-testid":"text-name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Email"}),r.jsx(je,{value:(v==null?void 0:v.email)||(v==null?void 0:v.phoneNumber)||"",disabled:!0,"data-testid":"input-email"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Belt Level"}),t?r.jsxs(et,{value:s.beltLevel,onValueChange:y=>i({...s,beltLevel:y}),children:[r.jsx(Xe,{"data-testid":"select-belt",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"white",children:"White Belt"}),r.jsx(ne,{value:"blue",children:"Blue Belt"}),r.jsx(ne,{value:"purple",children:"Purple Belt"}),r.jsx(ne,{value:"brown",children:"Brown Belt"}),r.jsx(ne,{value:"black",children:"Black Belt"})]})]}):r.jsx(je,{value:v!=null&&v.beltLevel?`${v.beltLevel.charAt(0).toUpperCase()+v.beltLevel.slice(1)} Belt`:"Not set",disabled:!0,"data-testid":"text-belt"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Training Style"}),t?r.jsxs(et,{value:s.style,onValueChange:y=>i({...s,style:y}),children:[r.jsx(Xe,{"data-testid":"select-style",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"gi",children:"Gi"}),r.jsx(ne,{value:"nogi",children:"No-Gi"}),r.jsx(ne,{value:"both",children:"Both"})]})]}):r.jsx(je,{value:v!=null&&v.style?v.style==="both"?"Gi & No-Gi":v.style==="nogi"?"No-Gi":"Gi":"Not set",disabled:!0,"data-testid":"text-style"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Biggest Struggle"}),t?r.jsxs(et,{value:s.struggleAreaCategory,onValueChange:y=>i({...s,struggleAreaCategory:y}),children:[r.jsx(Xe,{"data-testid":"select-struggle",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"guard_passing",children:"Guard Passing"}),r.jsx(ne,{value:"guard_retention",children:"Guard Retention"}),r.jsx(ne,{value:"submissions",children:"Submissions from Top"}),r.jsx(ne,{value:"escapes",children:"Escapes from Bottom"}),r.jsx(ne,{value:"takedowns",children:"Takedowns"}),r.jsx(ne,{value:"transitions",children:"Position Transitions"}),r.jsx(ne,{value:"other",children:"Other"})]})]}):r.jsx(je,{value:v!=null&&v.struggleAreaCategory?v.struggleAreaCategory.split("_").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "):"Not set",disabled:!0,"data-testid":"text-struggle"})]}),r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Optional Information"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Height"}),t?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(je,{type:"number",min:"0",max:"8",placeholder:"5",value:s.heightFeet,onChange:y=>i({...s,heightFeet:y.target.value}),"data-testid":"input-height-feet"})}),r.jsx("span",{className:"text-muted-foreground font-medium",children:"ft"}),r.jsx("div",{className:"flex-1",children:r.jsx(je,{type:"number",min:"0",max:"11",placeholder:"10",value:s.heightInches,onChange:y=>i({...s,heightInches:y.target.value}),"data-testid":"input-height-inches"})}),r.jsx("span",{className:"text-muted-foreground font-medium",children:"in"})]}):r.jsx(je,{value:l(v==null?void 0:v.height),disabled:!0,"data-testid":"text-height"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Weight"}),t?r.jsx(je,{value:s.weight,onChange:y=>i({...s,weight:y.target.value}),placeholder:"e.g., 170 lbs or 77kg","data-testid":"input-weight"}):r.jsx(je,{value:(v==null?void 0:v.weight)||"Not set",disabled:!0,"data-testid":"text-weight"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Age"}),t?r.jsx(je,{value:s.age,onChange:y=>i({...s,age:y.target.value}),placeholder:"e.g., 32","data-testid":"input-age"}):r.jsx(je,{value:(v==null?void 0:v.age)||"Not set",disabled:!0,"data-testid":"text-age"})]})]}),r.jsx("div",{className:"flex gap-3 pt-4",children:t?r.jsxs(r.Fragment,{children:[r.jsxs(Z,{onClick:h,disabled:u.isPending,"data-testid":"button-save",children:[u.isPending&&r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Save Changes"]}),r.jsx(Z,{variant:"outline",onClick:p,disabled:u.isPending,"data-testid":"button-cancel",children:"Cancel"})]}):r.jsx(Z,{onClick:f,"data-testid":"button-edit",children:"Edit Profile"})})]})]})]})})}function J1e(){const{toast:e}=Je(),[t,n]=x.useState(!1),[s,i]=x.useState(!1),[a,o]=x.useState(!1),[l,c]=x.useState({currentPassword:"",newPassword:"",confirmPassword:""}),{data:d,isLoading:u}=pe({queryKey:["/api/auth/me"]}),f=qe({mutationFn:async g=>await lt("POST","/api/auth/set-password",g),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/auth/me"]}),e({title:"Password Updated",description:"Your password has been set successfully. You can now use it to log in faster."}),c({currentPassword:"",newPassword:"",confirmPassword:""})},onError:g=>{e({title:"Failed to Set Password",description:g.message,variant:"destructive"})}}),h=()=>{if(l.newPassword.length<8){e({title:"Password Too Short",description:"Password must be at least 8 characters",variant:"destructive"});return}if(l.newPassword!==l.confirmPassword){e({title:"Passwords Don't Match",description:"Please make sure your passwords match",variant:"destructive"});return}f.mutate({newPassword:l.newPassword,currentPassword:d!=null&&d.hasPassword?l.currentPassword:void 0})};if(u)return r.jsx(jo,{children:r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(De,{className:"w-8 h-8 animate-spin text-primary"})})});const p=d,v=p==null?void 0:p.hasPassword;return r.jsx(jo,{children:r.jsxs("div",{className:"max-w-2xl",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Security Settings"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Manage your password and account security"}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(pi,{className:"w-5 h-5"}),v?"Change Password":"Set Password (Optional)"]}),r.jsx(ze,{children:v?"Update your password to keep your account secure":"Add a password to log in faster. You can always use email verification instead."})]}),r.jsxs(ee,{className:"space-y-4",children:[v&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"currentPassword",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(je,{id:"currentPassword",type:t?"text":"password",value:l.currentPassword,onChange:g=>c({...l,currentPassword:g.target.value}),placeholder:"Enter current password","data-testid":"input-current-password"}),r.jsx(Z,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full",onClick:()=>n(!t),"data-testid":"button-toggle-current-password",children:t?r.jsx(Yi,{className:"w-4 h-4"}):r.jsx(Bn,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"newPassword",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(je,{id:"newPassword",type:s?"text":"password",value:l.newPassword,onChange:g=>c({...l,newPassword:g.target.value}),placeholder:"Enter new password (min 8 characters)","data-testid":"input-new-password"}),r.jsx(Z,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full",onClick:()=>i(!s),"data-testid":"button-toggle-new-password",children:s?r.jsx(Yi,{className:"w-4 h-4"}):r.jsx(Bn,{className:"w-4 h-4"})})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"confirmPassword",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(je,{id:"confirmPassword",type:a?"text":"password",value:l.confirmPassword,onChange:g=>c({...l,confirmPassword:g.target.value}),placeholder:"Confirm new password","data-testid":"input-confirm-password"}),r.jsx(Z,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full",onClick:()=>o(!a),"data-testid":"button-toggle-confirm-password",children:a?r.jsx(Yi,{className:"w-4 h-4"}):r.jsx(Bn,{className:"w-4 h-4"})})]})]}),r.jsxs(Z,{onClick:h,disabled:f.isPending||!l.newPassword||!l.confirmPassword,"data-testid":"button-set-password",children:[f.isPending&&r.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),v?"Update Password":"Set Password"]})]})]}),r.jsxs(G,{className:"mt-6",children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"w-5 h-5"}),"Login Methods"]}),r.jsx(ze,{children:"Ways you can sign in to your account"})]}),r.jsxs(ee,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Email Verification"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sign in with a code sent to ",(p==null?void 0:p.email)||"your email"]})]}),r.jsx("span",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Always Available"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Password"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:v?"Sign in with your password for faster access":"Set a password for faster login (optional)"})]}),r.jsx("span",{className:`text-sm font-medium ${v?"text-green-600 dark:text-green-400":"text-muted-foreground"}`,children:v?"Enabled":"Not Set"})]})]})]})]})})}function X1e(){var u,f,h;const{toast:e}=Je(),{data:t,isLoading:n}=pe({queryKey:["/api/auth/me"]});if(n)return r.jsx(jo,{children:r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(De,{className:"w-8 h-8 animate-spin text-primary"})})});const s=(t==null?void 0:t.subscriptionType)||"free";t!=null&&t.subscriptionStatus;const i=t==null?void 0:t.trialEndDate,a=s==="lifetime",o=!a&&i&&new Date(i)>new Date,l=i?Math.ceil((new Date(i).getTime()-new Date().getTime())/(1e3*60*60*24)):0,c=[{id:"free",name:"Free",price:"$0",period:"forever",features:["Basic chat with Prof. OS","5 video recommendations per day","Community support"],isCurrent:s==="free"},{id:"monthly",name:o?`Monthly (Trial - ${l} days left)`:"Monthly",price:"$30",period:"per month",features:["Unlimited AI coaching","Unlimited video recommendations","Full video library access","Save favorite videos","Priority support"],isCurrent:s==="monthly"},{id:"founding",name:"Founding Member",price:"$89",period:"per year",badge:"Best Value",features:["Unlimited AI coaching","Unlimited video recommendations","Voice input & output","Priority support","Early access to new features","Lifetime discount locked in"],isCurrent:s==="founding"},{id:"pro",name:"Pro",price:"$179",period:"per year",features:["Everything in Founding","Advanced technique analysis","Competition prep plans","Personal training schedules","1-on-1 strategy sessions (quarterly)"],isCurrent:s==="pro"}],d=()=>{e({title:"Coming Soon",description:"Subscription management will be available soon"})};return r.jsx(jo,{children:r.jsxs("div",{className:"max-w-4xl",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Subscription"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Manage your subscription plan and billing"}),r.jsxs(G,{className:"mb-6",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Current Plan"}),r.jsx(ze,{children:a?r.jsx("span",{className:"font-semibold text-primary flex items-center gap-2",children:"Lifetime Access "}):r.jsxs(r.Fragment,{children:["You're currently on the ",r.jsx("span",{className:"font-semibold text-foreground",children:(u=c.find(p=>p.isCurrent))==null?void 0:u.name})," plan"]})})]}),r.jsx(ee,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"space-y-1",children:a?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-2xl font-bold text-primary",children:"Lifetime Access"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Status: ",r.jsx("span",{className:"text-green-600 font-medium",children:"Active"})]}),r.jsx("p",{className:"text-sm text-muted-foreground italic mt-2",children:"No subscription to manage - you own this forever!"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-2xl font-bold",children:[(f=c.find(p=>p.isCurrent))==null?void 0:f.price,r.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:(h=c.find(p=>p.isCurrent))==null?void 0:h.period})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s==="free"||s==="free_trial"?"Upgrade anytime to unlock premium features":"Thank you for your support!"})]})}),!a&&s!=="free"&&s!=="free_trial"&&r.jsxs(Z,{variant:"outline",onClick:d,"data-testid":"button-manage",children:[r.jsx(_s,{className:"w-4 h-4 mr-2"}),"Manage Billing"]})]})})]}),zt()?r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Manage Subscription"}),r.jsx(ze,{children:"Subscription management is available on the web"})]}),r.jsxs(ee,{children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"To upgrade, change, or manage your subscription, please visit bjjos.app in your browser."}),r.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[r.jsx($f,{className:"w-4 h-4"}),r.jsx("span",{children:"bjjos.app"})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Available Plans"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:c.map(p=>r.jsxs(G,{className:p.isCurrent?"border-primary":"","data-testid":`card-plan-${p.id}`,children:[r.jsxs(re,{children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx(se,{className:"text-lg",children:p.name}),p.badge&&r.jsx(ae,{variant:"default",className:"text-xs",children:p.badge}),p.isCurrent&&r.jsx(ae,{variant:"secondary",className:"text-xs",children:"Current"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-3xl font-bold",children:p.price}),r.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:p.period})]})]}),r.jsxs(ee,{children:[r.jsx("ul",{className:"space-y-2 mb-4",children:p.features.map((v,g)=>r.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[r.jsx(Kn,{className:"w-4 h-4 text-primary shrink-0 mt-0.5"}),r.jsx("span",{children:v})]},g))}),p.isCurrent?r.jsx(Z,{className:"w-full",disabled:!0,"data-testid":`button-current-${p.id}`,children:"Current Plan"}):p.id==="free"?r.jsx(Z,{variant:"outline",className:"w-full",disabled:!0,"data-testid":`button-downgrade-${p.id}`,children:"Downgrade"}):r.jsx(sn,{href:"/pricing",children:r.jsx(Z,{className:"w-full","data-testid":`button-upgrade-${p.id}`,children:s==="free"?"Upgrade":"Switch Plan"})})]})]},p.id))})]})]})})}function Z1e(){var y;const{toast:e}=Je(),[t,n]=x.useState(!1),{data:s,isLoading:i}=pe({queryKey:["/api/auth/me"]}),{data:a,isLoading:o,error:l}=pe({queryKey:["/api/referrals/my-code"],enabled:!!(s!=null&&s.user.id),retry:!1}),c=i||o,d=()=>{h&&h!=="N/A"&&(navigator.clipboard.writeText(h),n(!0),e({title:"Copied!",description:"Referral code copied to clipboard"}),setTimeout(()=>n(!1),2e3))},u=()=>{if(h&&h!=="N/A"){const j=`${window.location.origin}/signup?ref=${h}`;navigator.clipboard.writeText(j),e({title:"Copied!",description:"Referral link copied to clipboard"})}};if(c)return r.jsx(jo,{children:r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(De,{className:"w-8 h-8 animate-spin text-primary"})})});const f=s==null?void 0:s.user,h=(a==null?void 0:a.referralCode)||((y=f==null?void 0:f.phoneNumber)==null?void 0:y.slice(-6))||"N/A",p=(a==null?void 0:a.totalReferrals)||0,v=(a==null?void 0:a.activeReferrals)||0,g=l&&!a;return r.jsx(jo,{children:r.jsxs("div",{className:"max-w-3xl",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Referrals"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Share BJJ OS with your training partners and earn rewards"}),r.jsxs(G,{className:"mb-6",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Your Referral Code"}),r.jsx(ze,{children:g?"Referral program coming soon. Your temporary code is shown below.":"Share this code with friends to give them a discount and earn rewards"})]}),r.jsxs(ee,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(je,{value:h,readOnly:!0,className:"font-mono text-lg","data-testid":"input-referral-code"}),r.jsx(Z,{onClick:d,variant:"outline","data-testid":"button-copy-code",children:t?r.jsx(Kn,{className:"w-4 h-4"}):r.jsx(dg,{className:"w-4 h-4"})})]}),r.jsxs(Z,{onClick:u,variant:"secondary",className:"w-full","data-testid":"button-copy-link",children:[r.jsx(dg,{className:"w-4 h-4 mr-2"}),"Copy Referral Link"]}),g&&r.jsx("p",{className:"text-xs text-muted-foreground",children:"Referral tracking is being set up. Your code will work once the program launches."})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Referrals"}),r.jsx(Mn,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-referrals",children:p}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All-time sign-ups"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Active Referrals"}),r.jsx(Lf,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-active-referrals",children:v}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently subscribed"})]})]})]}),r.jsxs(G,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Referral Rewards"}),r.jsx(ze,{children:"Earn rewards when your friends join BJJ OS"})]}),r.jsxs(ee,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(ae,{variant:"secondary",className:"mt-1",children:"Friend"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"10% off first year"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Your friend gets a discount on their subscription"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(ae,{variant:"secondary",className:"mt-1",children:"You"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"1 month free per referral"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Earn free months when friends subscribe"})]})]})]}),r.jsx("div",{className:"pt-4 border-t",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Rewards are automatically applied to your account. Questions? Contact support."})})]})]})]})})}const cO=[{id:"chat",label:"Chat",icon:Us,path:"/chat"},{id:"library",label:"Videos",icon:Ji,path:"/library"},{id:"saved",label:"Saved",icon:ps,path:"/saved-videos"},{id:"settings",label:"Settings",icon:_l,path:"/settings"}],eNe={white:"#FFFFFF",blue:"#2563EB",purple:"#7C3AED",brown:"#92400E",black:"#000000"};function tNe({children:e}){const[t,n]=it(),{toast:s}=Je(),{data:i}=pe({queryKey:["/api/auth/me"]}),a=async()=>{try{await lt("POST","/api/auth/logout");const{clearAuth:u}=await or(async()=>{const{clearAuth:f}=await Promise.resolve().then(()=>Mf);return{clearAuth:f}},void 0);await u(),n("/email-login"),s({title:"Logged out",description:"See you on the mat!"})}catch(u){console.error("Logout error:",u)}},o=u=>t===u,l=(i==null?void 0:i.name)||(i==null?void 0:i.username)||"User",c=(i==null?void 0:i.beltLevel)||"white",d=eNe[c];return r.jsxs("div",{className:"adaptive-layout",children:[r.jsx("aside",{className:"desktop-sidebar",children:r.jsxs("div",{className:"sidebar-content",children:[r.jsx("div",{className:"sidebar-header",children:r.jsxs("div",{className:"logo",children:[r.jsx(Us,{className:"logo-icon"}),r.jsx("span",{className:"logo-text",children:"BJJ OS"})]})}),r.jsx("nav",{className:"sidebar-nav",children:cO.map(u=>{const f=u.icon,h=o(u.path);return r.jsxs("button",{onClick:()=>n(u.path),className:`nav-item ${h?"active":""}`,"data-testid":`nav-${u.id}`,children:[r.jsx(f,{className:"nav-icon"}),r.jsx("span",{className:"nav-label",children:u.label}),h&&r.jsx("div",{className:"active-indicator"})]},u.id)})}),r.jsx("div",{className:"sidebar-footer",children:r.jsxs("div",{className:"user-profile",children:[r.jsxs("div",{className:"user-info",children:[r.jsx("span",{className:"user-name",children:l}),r.jsx(ae,{style:{backgroundColor:d,color:c==="white"?"#000":"#fff"},className:"belt-badge",children:c.toUpperCase()})]}),r.jsx(Z,{variant:"ghost",size:"sm",onClick:a,className:"logout-btn","data-testid":"button-logout",children:r.jsx(Vd,{className:"w-4 h-4"})})]})})]})}),r.jsx("main",{className:"main-content",children:e}),r.jsx("nav",{className:"mobile-bottom-nav",children:cO.map(u=>{const f=u.icon,h=o(u.path);return r.jsxs("button",{onClick:()=>n(u.path),className:`bottom-nav-item ${h?"active":""}`,"data-testid":`mobile-nav-${u.id}`,children:[r.jsx(f,{className:"bottom-nav-icon"}),r.jsx("span",{className:"bottom-nav-label",children:u.label})]},u.id)})}),r.jsx("style",{children:`
        /* ==================== LAYOUT STRUCTURE ==================== */
        .adaptive-layout {
          display: flex;
          height: 100vh;
          width: 100%;
          background: #000;
          color: #fff;
          overflow: hidden;
        }

        .main-content {
          flex: 1;
          overflow-y: auto;
          overflow-x: hidden;
          padding-bottom: 80px; /* Space for mobile bottom nav */
        }

        /* ==================== DESKTOP SIDEBAR ==================== */
        .desktop-sidebar {
          display: none;
        }

        @media (min-width: 768px) {
          .desktop-sidebar {
            display: flex;
            flex-direction: column;
            width: 240px;
            background: #0F0F0F;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
          }

          .main-content {
            padding-bottom: 0;
          }
        }

        .sidebar-content {
          display: flex;
          flex-direction: column;
          height: 100%;
          padding: 16px;
        }

        .sidebar-header {
          margin-bottom: 32px;
        }

        .logo {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 8px;
        }

        .logo-icon {
          width: 32px;
          height: 32px;
          background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
          border-radius: 8px;
          padding: 6px;
        }

        .logo-text {
          font-size: 20px;
          font-weight: 700;
          background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .sidebar-nav {
          flex: 1;
          display: flex;
          flex-direction: column;
          gap: 4px;
        }

        .nav-item {
          position: relative;
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          background: transparent;
          border: none;
          border-radius: 8px;
          color: #A0A0A0;
          cursor: pointer;
          transition: all 150ms ease;
          font-size: 15px;
          font-weight: 500;
        }

        .nav-item:hover {
          background: rgba(255, 255, 255, 0.05);
          color: #fff;
        }

        .nav-item.active {
          background: rgba(37, 99, 235, 0.1);
          color: #fff;
        }

        .nav-item.active .nav-icon {
          background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .nav-icon {
          width: 20px;
          height: 20px;
        }

        .nav-label {
          flex: 1;
          text-align: left;
        }

        .active-indicator {
          position: absolute;
          left: 0;
          top: 50%;
          transform: translateY(-50%);
          width: 3px;
          height: 24px;
          background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
          border-radius: 0 2px 2px 0;
        }

        .sidebar-footer {
          border-top: 1px solid rgba(255, 255, 255, 0.1);
          padding-top: 16px;
        }

        .user-profile {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 8px;
        }

        .user-info {
          display: flex;
          flex-direction: column;
          gap: 4px;
        }

        .user-name {
          font-size: 14px;
          font-weight: 600;
          color: #fff;
        }

        .belt-badge {
          font-size: 10px;
          font-weight: 700;
          padding: 2px 8px;
          border-radius: 4px;
        }

        .logout-btn {
          opacity: 0.6;
        }

        .logout-btn:hover {
          opacity: 1;
        }

        /* ==================== MOBILE BOTTOM NAV ==================== */
        .mobile-bottom-nav {
          display: flex;
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          height: 64px;
          background: rgba(0, 0, 0, 0.95);
          backdrop-filter: blur(20px);
          border-top: 1px solid rgba(255, 255, 255, 0.1);
          z-index: 1000;
          padding-bottom: env(safe-area-inset-bottom);
        }

        @media (min-width: 768px) {
          .mobile-bottom-nav {
            display: none;
          }
        }

        .bottom-nav-item {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 4px;
          background: transparent;
          border: none;
          color: #71717A;
          cursor: pointer;
          transition: all 150ms ease;
          padding: 8px;
        }

        .bottom-nav-item.active {
          color: #fff;
        }

        .bottom-nav-item.active .bottom-nav-icon {
          color: #7C3AED;
        }

        .bottom-nav-icon {
          width: 24px;
          height: 24px;
          stroke: currentColor;
        }

        .bottom-nav-label {
          font-size: 11px;
          font-weight: 600;
        }

        /* ==================== MOBILE OPTIMIZATIONS ==================== */
        @media (max-width: 767px) {
          .main-content {
            padding-bottom: calc(64px + env(safe-area-inset-bottom));
          }
        }
      `})]})}const nNe={white:"#FFFFFF",blue:"#2563EB",purple:"#7C3AED",brown:"#92400E",black:"#000000"};function rNe(){const{toast:e}=Je(),[,t]=it(),[n,s]=x.useState(!1),[i,a]=x.useState(!1),[o,l]=x.useState(!1),{data:c}=pe({queryKey:["/api/auth/me"]}),[d,u]=x.useState({name:"",email:"",beltLevel:"white",style:"both",struggleTechnique:"",heightFeet:"",heightInches:"",weight:"",trainingFrequency:"",age:"",injuries:""}),f=b=>{if(!b)return{feet:"",inches:""};const N=typeof b=="string"?parseInt(b):b;return isNaN(N)?{feet:"",inches:""}:{feet:String(Math.floor(N/12)),inches:String(N%12)}},h=()=>{const b=parseInt(d.heightFeet)||0,N=parseInt(d.heightInches)||0;return b===0&&N===0?null:b*12+N};x.useEffect(()=>{var b,N,w;if(c){const S=f(c.height);u({name:c.name||"",email:c.email||"",beltLevel:c.beltLevel||"white",style:c.style||"both",struggleTechnique:c.struggleTechnique||"",heightFeet:S.feet,heightInches:S.inches,weight:((b=c.weight)==null?void 0:b.toString())||"",trainingFrequency:((N=c.trainingFrequency)==null?void 0:N.toString())||"",age:((w=c.age)==null?void 0:w.toString())||"",injuries:Array.isArray(c.injuries)?c.injuries.join(", "):""})}},[c]);const p=qe({mutationFn:async b=>(await lt("PATCH","/api/auth/profile",b)).json(),onSuccess:()=>{e({title:"Profile updated",description:"Your changes have been saved"}),_e.invalidateQueries({queryKey:["/api/auth/me"]}),s(!1)},onError:b=>{e({title:"Error",description:b.message||"Failed to update profile",variant:"destructive"}),s(!1)}}),v=()=>{s(!0);const b={name:d.name,beltLevel:d.beltLevel,style:d.style,struggleTechnique:d.struggleTechnique,height:h(),weight:d.weight?parseInt(d.weight):null,trainingFrequency:d.trainingFrequency?parseInt(d.trainingFrequency):null,age:d.age,injuries:d.injuries?d.injuries.split(",").map(N=>N.trim()).filter(Boolean):[]};p.mutate(b)},g=async()=>{try{await lt("POST","/api/auth/logout"),await nd(),t("/email-login"),e({title:"Logged out",description:"See you on the mat!"})}catch(b){console.error("Logout error:",b)}},y=async()=>{a(!0);try{await lt("/api/user/chat-history","DELETE"),_e.invalidateQueries({queryKey:["/api/ai/chat/history"]}),e({title:"Chat History Deleted",description:"All your conversations have been removed."})}catch(b){e({title:"Error",description:b.message||"Failed to delete chat history",variant:"destructive"})}finally{a(!1)}},j=async()=>{l(!0);try{await lt("/api/user/reset-profile","DELETE"),_e.invalidateQueries({queryKey:["/api/auth/me"]}),_e.invalidateQueries({queryKey:["/api/auth/profile"]}),_e.invalidateQueries({queryKey:["/api/ai/chat/history"]}),e({title:"Profile Reset Complete",description:"Redirecting to onboarding..."}),setTimeout(()=>{t("/onboarding")},1e3)}catch(b){e({title:"Error",description:b.message||"Failed to reset profile",variant:"destructive"}),l(!1)}},m=nNe[d.beltLevel];return r.jsx(tNe,{children:r.jsxs("div",{className:"settings-page",children:[r.jsx("header",{className:"page-header",children:r.jsx("h1",{className:"page-title",children:"Settings"})}),r.jsxs("div",{className:"settings-content",children:[r.jsxs(G,{className:"settings-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx(Co,{className:"section-icon"}),r.jsx("h2",{className:"section-title",children:"Profile"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{htmlFor:"name",children:"Name"}),r.jsx(je,{id:"name",value:d.name,onChange:b=>u({...d,name:b.target.value}),placeholder:"Your name","data-testid":"input-name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{htmlFor:"email",children:"Email"}),r.jsx(je,{id:"email",type:"email",value:d.email,disabled:!0,className:"disabled-input","data-testid":"input-email"}),r.jsx("p",{className:"field-hint",children:"Email cannot be changed"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{htmlFor:"belt",children:"Belt Level"}),r.jsxs(et,{value:d.beltLevel,onValueChange:b=>u({...d,beltLevel:b}),children:[r.jsx(Xe,{id:"belt","data-testid":"select-belt",children:r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:r.jsx(ae,{style:{backgroundColor:m,color:d.beltLevel==="white"?"#000":"#fff"},children:d.beltLevel.toUpperCase()})})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"white",children:"White Belt"}),r.jsx(ne,{value:"blue",children:"Blue Belt"}),r.jsx(ne,{value:"purple",children:"Purple Belt"}),r.jsx(ne,{value:"brown",children:"Brown Belt"}),r.jsx(ne,{value:"black",children:"Black Belt"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{htmlFor:"style",children:"Training Style"}),r.jsxs(et,{value:d.style,onValueChange:b=>u({...d,style:b}),children:[r.jsx(Xe,{id:"style","data-testid":"select-style",children:r.jsx(tt,{})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"gi",children:"Gi Only"}),r.jsx(ne,{value:"nogi",children:"No-Gi Only"}),r.jsx(ne,{value:"both",children:"Both Gi & No-Gi"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{htmlFor:"struggle",children:"Biggest Struggle"}),r.jsx("textarea",{id:"struggle",value:d.struggleTechnique,onChange:b=>u({...d,struggleTechnique:b.target.value}),placeholder:"What technique do you struggle with most?",rows:3,className:"struggle-textarea","data-testid":"input-struggle"}),r.jsx("p",{className:"field-hint",children:"This helps Professor OS personalize recommendations"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{children:"Height"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(je,{id:"height-feet",type:"number",min:"0",max:"8",placeholder:"5",value:d.heightFeet,onChange:b=>u({...d,heightFeet:b.target.value}),"data-testid":"input-height-feet"})}),r.jsx("span",{className:"text-muted-foreground font-medium",children:"ft"}),r.jsx("div",{className:"flex-1",children:r.jsx(je,{id:"height-inches",type:"number",min:"0",max:"11",placeholder:"10",value:d.heightInches,onChange:b=>u({...d,heightInches:b.target.value}),"data-testid":"input-height-inches"})}),r.jsx("span",{className:"text-muted-foreground font-medium",children:"in"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{htmlFor:"weight",children:"Weight (pounds)"}),r.jsx(je,{id:"weight",type:"number",value:d.weight,onChange:b=>u({...d,weight:b.target.value}),placeholder:"e.g. 180","data-testid":"input-weight"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{htmlFor:"frequency",children:"Training Frequency"}),r.jsxs(et,{value:d.trainingFrequency,onValueChange:b=>u({...d,trainingFrequency:b}),children:[r.jsx(Xe,{id:"frequency","data-testid":"select-frequency",children:r.jsx(tt,{placeholder:"How many days per week?"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"1",children:"1x per week"}),r.jsx(ne,{value:"2",children:"2x per week"}),r.jsx(ne,{value:"3",children:"3x per week"}),r.jsx(ne,{value:"4",children:"4x per week"}),r.jsx(ne,{value:"5",children:"5x per week"}),r.jsx(ne,{value:"6",children:"6x per week"}),r.jsx(ne,{value:"7",children:"7x per week"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{htmlFor:"age",children:"Age"}),r.jsx(je,{id:"age",type:"text",value:d.age,onChange:b=>u({...d,age:b.target.value}),placeholder:"e.g. 35","data-testid":"input-age"}),r.jsx("p",{className:"field-hint",children:"Used for personalized training advice"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(fe,{htmlFor:"injuries",children:"Injuries (comma-separated)"}),r.jsx(je,{id:"injuries",value:d.injuries,onChange:b=>u({...d,injuries:b.target.value}),placeholder:"e.g. knee, shoulder, lower back","data-testid":"input-injuries"}),r.jsx("p",{className:"field-hint",children:"Helps avoid problematic techniques"})]}),r.jsx(Z,{onClick:v,disabled:n,className:"save-button","data-testid":"button-save",children:n?"Saving...":"Save Changes"})]}),r.jsxs(G,{className:"settings-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{className:"section-title",children:"Subscription"})}),r.jsxs("div",{className:"subscription-info",children:[r.jsxs("p",{className:"subscription-type",children:["Plan: ",r.jsx("strong",{children:(c==null?void 0:c.subscriptionType)||"Free"})]}),r.jsxs("p",{className:"subscription-status",children:["Status: ",r.jsx("strong",{children:(c==null?void 0:c.subscriptionStatus)||"Inactive"})]}),r.jsxs(Z,{variant:"outline",onClick:async()=>{zt()?await yy.open({url:"https://bjjos.app/settings/subscription"}):t("/settings/subscription")},className:"manage-button",children:[r.jsx($f,{className:"w-4 h-4 mr-2"}),"Manage Subscription"]})]})]}),r.jsxs(G,{className:"settings-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx(Ni,{className:"section-icon"}),r.jsx("h2",{className:"section-title",children:"Data & Privacy"})]}),r.jsxs("div",{className:"data-action-row",children:[r.jsxs("div",{className:"data-action-info",children:[r.jsxs("div",{className:"data-action-label",children:[r.jsx(Si,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete Chat History"})]}),r.jsx("p",{className:"field-hint",children:"Removes all messages. Your profile stays intact."})]}),r.jsxs(Tx,{children:[r.jsx(QT,{asChild:!0,children:r.jsx(Z,{variant:"outline",size:"sm",disabled:i,"data-testid":"button-delete-chat",children:i?r.jsx(De,{className:"w-4 h-4 animate-spin"}):"Delete"})}),r.jsxs(Oh,{className:"bg-[#1A1A1A] border-white/10",children:[r.jsxs(_h,{children:[r.jsx(Rh,{className:"text-white",children:"Delete Chat History?"}),r.jsx(Mh,{className:"text-white/70",children:"This will permanently delete all your conversations with Professor OS. Your profile (belt rank, goals, preferences) will not be affected. This cannot be undone."})]}),r.jsxs(Ih,{children:[r.jsx($h,{className:"bg-white/10 text-white border-white/10",children:"Cancel"}),r.jsx(Fh,{onClick:y,className:"bg-red-500 text-white hover:bg-red-600","data-testid":"button-confirm-delete-chat",children:"Delete"})]})]})]})]}),r.jsx("div",{className:"data-action-divider"}),r.jsxs("div",{className:"data-action-row",children:[r.jsxs("div",{className:"data-action-info",children:[r.jsxs("div",{className:"data-action-label",children:[r.jsx(wr,{className:"w-4 h-4"}),r.jsx("span",{children:"Reset Professor OS Memory"})]}),r.jsx("p",{className:"field-hint",children:"Start fresh. Removes all conversations AND your profile."})]}),r.jsxs(Tx,{children:[r.jsx(QT,{asChild:!0,children:r.jsx(Z,{variant:"destructive",size:"sm",disabled:o,"data-testid":"button-reset-profile",children:o?r.jsx(De,{className:"w-4 h-4 animate-spin"}):"Reset"})}),r.jsxs(Oh,{className:"bg-[#1A1A1A] border-white/10",children:[r.jsxs(_h,{children:[r.jsx(Rh,{className:"text-white",children:"Reset Everything?"}),r.jsx(Mh,{className:"text-white/70",children:"This will delete ALL your data including conversations, your belt rank, goals, training preferences, and everything Professor OS has learned about you. You will need to set up your profile again. This cannot be undone."})]}),r.jsxs(Ih,{children:[r.jsx($h,{className:"bg-white/10 text-white border-white/10",children:"Cancel"}),r.jsx(Fh,{onClick:j,className:"bg-red-500 text-white hover:bg-red-600","data-testid":"button-confirm-reset-profile",children:"Reset Everything"})]})]})]})]})]}),r.jsxs(Z,{variant:"destructive",onClick:g,className:"logout-button","data-testid":"button-logout",children:[r.jsx(Vd,{className:"w-4 h-4 mr-2"}),"Log Out"]})]}),r.jsx("style",{children:`
          /* ==================== PAGE LAYOUT ==================== */
          .settings-page {
            min-height: 100vh;
            background: #000;
            color: #fff;
          }

          .page-header {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
          }

          .page-title {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
          }

          /* ==================== CONTENT ==================== */
          .settings-content {
            padding: 16px;
            max-width: 600px;
            margin: 0 auto;
          }

          @media (min-width: 768px) {
            .settings-content {
              padding: 24px;
            }
          }

          .settings-card {
            background: #0F0F0F;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
          }

          .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
          }

          .section-icon {
            width: 24px;
            height: 24px;
            color: #7C3AED;
          }

          .section-title {
            font-size: 20px;
            font-weight: 700;
            margin: 0;
          }

          /* ==================== FORM ==================== */
          .form-group {
            margin-bottom: 20px;
          }

          .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #A0A0A0;
          }

          .form-group input,
          .form-group select {
            background: #000;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            width: 100%;
          }

          .disabled-input {
            opacity: 0.5;
            cursor: not-allowed;
          }

          .struggle-textarea {
            width: 100%;
            background: #000;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-size: 15px;
            font-family: inherit;
            resize: vertical;
            outline: none;
          }

          .struggle-textarea:focus {
            border-color: #7C3AED;
          }

          .struggle-textarea::placeholder {
            color: #71717A;
          }

          .field-hint {
            font-size: 12px;
            color: #71717A;
            margin-top: 4px;
          }

          .save-button {
            width: 100%;
            background: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
            color: #fff;
            font-weight: 600;
            margin-top: 8px;
          }

          .save-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
          }

          /* ==================== SUBSCRIPTION ==================== */
          .subscription-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
          }

          .subscription-type,
          .subscription-status {
            font-size: 15px;
            color: #A0A0A0;
            margin: 0;
          }

          .subscription-type strong,
          .subscription-status strong {
            color: #fff;
          }

          .manage-button {
            margin-top: 8px;
          }

          /* ==================== DATA & PRIVACY ==================== */
          .data-action-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 8px 0;
          }

          .data-action-info {
            flex: 1;
          }

          .data-action-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 4px;
          }

          .data-action-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 12px 0;
          }

          /* ==================== LOGOUT ==================== */
          .logout-button {
            width: 100%;
            margin-top: 8px;
          }
        `})]})})}function sNe(){var o;const{data:e,isLoading:t}=pe({queryKey:["/api/auth/me"]});if(t)return r.jsx(ra,{children:r.jsx("div",{className:"flex items-center justify-center w-full h-full",children:r.jsx("div",{className:"text-2xl",children:"Loading..."})})});if(!e)return r.jsx(ra,{children:r.jsx("div",{className:"flex items-center justify-center w-full h-full",children:r.jsx("div",{className:"text-xl text-muted-foreground",children:"Please log in to view your progress"})})});const n=e.createdAt?br(new Date(e.createdAt),"MMMM d, yyyy"):"Unknown",s=e.totalLogins||0,i=e.currentStreak||0,a=e.beltLevel||"blue";return r.jsx(ra,{children:r.jsx("div",{className:"w-full h-full p-6 overflow-auto",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("h1",{className:"text-4xl font-bold",children:"Your Progress"}),r.jsx("div",{className:"flex justify-center",children:r.jsx(Gd,{rank:a,size:"large"})}),r.jsxs("p",{className:"text-muted-foreground text-lg",children:[a.charAt(0).toUpperCase()+a.slice(1)," Belt"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Member Since"}),r.jsx(dv,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Your journey began"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Logins"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Training sessions"})]})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Current Streak"}),r.jsx(hN,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ee,{children:[r.jsx("div",{className:"text-2xl font-bold",children:i}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i===1?"day":"days"," in a row"]})]})]})]}),r.jsxs(G,{children:[r.jsx(re,{children:r.jsx(se,{children:"Training Profile"})}),r.jsxs(ee,{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Training Style:"}),r.jsx("span",{className:"font-medium capitalize",children:e.style||"Not set"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Training Frequency:"}),r.jsxs("span",{className:"font-medium",children:[e.trainingFrequency||0," days/week"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Subscription:"}),r.jsx("span",{className:"font-medium capitalize",children:((o=e.subscriptionType)==null?void 0:o.replace("_"," "))||"Free Trial"})]})]})]})]})})})}function dO(){const[e,t]=x.useState(""),[n,s]=x.useState(""),[i,a]=x.useState("all"),[o,l]=x.useState("all"),[c,d]=x.useState(null);x.useEffect(()=>{const A=setTimeout(()=>s(e),300);return()=>clearTimeout(A)},[e]);const{data:u}=pe({queryKey:["/api/auth/me"]}),{data:f,isLoading:h}=pe({queryKey:["/api/ai/saved-videos",u==null?void 0:u.id],enabled:!!(u!=null&&u.id)}),p=(f==null?void 0:f.videos)||[],{instructorToTechniques:v,techniqueToInstructors:g,allInstructors:y,allTechniques:j}=x.useMemo(()=>{const A=new Map,T=new Map,M=new Set,O=new Set;for(const C of p){const R=C.instructor,I=C.category;R&&(M.add(R),A.has(R)||A.set(R,new Set),I&&A.get(R).add(I)),I&&(O.add(I),T.has(I)||T.set(I,new Set),R&&T.get(I).add(R))}return{instructorToTechniques:A,techniqueToInstructors:T,allInstructors:Array.from(M).sort((C,R)=>C.localeCompare(R)),allTechniques:Array.from(O).sort((C,R)=>C.localeCompare(R))}},[p]),m=x.useMemo(()=>{if(o==="all")return y;const A=g.get(o);return A?y.filter(T=>A.has(T)):y},[o,y,g]),b=x.useMemo(()=>{if(i==="all")return j;const A=v.get(i);return A?j.filter(T=>A.has(T)):j},[i,j,v]),N=A=>{if(a(A),A!=="all"&&o!=="all"){const T=v.get(A);(!T||!T.has(o))&&l("all")}},w=A=>{if(l(A),A!=="all"&&i!=="all"){const T=g.get(A);(!T||!T.has(i))&&a("all")}},S=A=>o==="all"?p.filter(T=>T.instructor===A).length:p.filter(T=>T.instructor===A&&T.category===o).length,k=A=>i==="all"?p.filter(T=>T.category===A).length:p.filter(T=>T.category===A&&T.instructor===i).length,P=x.useMemo(()=>p.filter(A=>{var R,I;const T=n.toLowerCase(),M=!n||((R=A.title)==null?void 0:R.toLowerCase().includes(T))||((I=A.instructor)==null?void 0:I.toLowerCase().includes(T)),O=i==="all"||A.instructor===i,C=o==="all"||A.category===o;return M&&O&&C}),[p,n,i,o]),E=A=>{var T;return A.videoUrl?A.videoUrl.includes("v=")?((T=A.videoUrl.split("v=")[1])==null?void 0:T.split("&")[0])||"":A.videoUrl.split("/").pop()||"":""},_=A=>{if(A.thumbnailUrl)return A.thumbnailUrl;const T=E(A);return T?`https://img.youtube.com/vi/${T}/mqdefault.jpg`:""},F=x.useMemo(()=>({total_videos:p.length,unique_instructors:y.length,unique_techniques:j.length}),[p,y,j]);return h?r.jsx(ra,{children:r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[r.jsx(h2,{size:"lg",className:"text-purple-400 mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading saved videos..."})]})}):r.jsxs(ra,{children:[r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[r.jsx(ps,{className:"h-8 w-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Saved Videos"})]}),r.jsx("p",{className:"text-muted-foreground",children:"Your personal collection of BJJ technique videos"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Saved Videos"}),r.jsx(Ff,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-videos",children:F.total_videos})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Instructors"}),r.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-instructors",children:F.unique_instructors})})]}),r.jsxs(G,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Techniques"}),r.jsx(uv,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ee,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-techniques",children:F.unique_techniques})})]})]}),r.jsx(G,{children:r.jsx(ee,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search by title or instructor...",value:e,onChange:A=>t(A.target.value),className:"pl-10","data-testid":"input-search"})]}),r.jsxs(et,{value:i,onValueChange:N,children:[r.jsx(Xe,{className:"w-full md:w-[250px]","data-testid":"select-instructor",children:r.jsx(tt,{placeholder:"All Instructors"})}),r.jsxs(Ze,{children:[r.jsxs(ne,{value:"all",children:["All Instructors (",m.length,")"]}),m.map(A=>r.jsxs(ne,{value:A,children:[A," (",S(A),")"]},A))]})]}),r.jsxs(et,{value:o,onValueChange:w,children:[r.jsx(Xe,{className:"w-full md:w-[250px]","data-testid":"select-technique",children:r.jsx(tt,{placeholder:"All Techniques"})}),r.jsxs(Ze,{children:[r.jsxs(ne,{value:"all",children:["All Techniques (",b.length,")"]}),b.map(A=>r.jsxs(ne,{value:A,children:[A," (",k(A),")"]},A))]})]})]})})}),r.jsx("div",{children:P.length===0?r.jsx(G,{children:r.jsxs(ee,{className:"py-12 text-center",children:[r.jsx(ps,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-xl text-muted-foreground",children:p.length===0?"No saved videos yet. Start saving videos from chat!":"No videos match your filters"})]})}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:P.map((A,T)=>{const M=E(A);return r.jsxs(G,{className:"overflow-hidden cursor-pointer hover-elevate transition-all","data-testid":`card-video-${A.id||T}`,onClick:()=>d(A),children:[r.jsxs("div",{className:"relative aspect-video bg-muted",children:[r.jsx("img",{src:_(A),alt:A.title,className:"w-full h-full object-cover",onError:O=>{O.target.src=`https://img.youtube.com/vi/${M}/mqdefault.jpg`}}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 hover:bg-black/30 transition-colors",children:r.jsx(Ff,{className:"h-12 w-12 text-white opacity-0 hover:opacity-100 transition-opacity"})}),A.duration&&r.jsx("span",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded",children:A.duration})]}),r.jsxs(ee,{className:"p-3 space-y-2",children:[r.jsx("h3",{className:"font-medium text-sm line-clamp-2",title:A.title,children:A.title}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[r.jsx("span",{className:"truncate max-w-[120px]",title:A.instructor,children:A.instructor||"Unknown"}),A.qualityScore&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(qn,{className:"h-3 w-3 text-yellow-500"}),r.jsx("span",{children:Number(A.qualityScore).toFixed(1)})]})]}),A.category&&r.jsx(ae,{variant:"secondary",className:"text-xs truncate max-w-full",children:A.category})]})]},A.id||T)})})})]}),r.jsx(Nn,{open:!!c,onOpenChange:A=>!A&&d(null),children:r.jsxs(mn,{className:"max-w-4xl p-0 overflow-hidden",children:[r.jsxs(pn,{className:"p-4 pb-2",children:[r.jsx(gn,{className:"pr-8 line-clamp-2",children:c==null?void 0:c.title}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx("span",{children:c==null?void 0:c.instructor}),(c==null?void 0:c.category)&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"-"}),r.jsx(ae,{variant:"secondary",className:"text-xs",children:c==null?void 0:c.category})]}),(c==null?void 0:c.qualityScore)&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"-"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(qn,{className:"h-3 w-3 text-yellow-500"}),r.jsx("span",{children:Number(c.qualityScore).toFixed(1)})]})]})]})]}),r.jsx("div",{className:"aspect-video w-full",children:c&&r.jsx("iframe",{src:`https://www.youtube.com/embed/${E(c)}?autoplay=1&rel=0`,title:c.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})})]})}const ec="bjjos_monthly";let rs=null,Mu=!1,Bt=null,$o=null;const Li={isIOS:()=>tn.isNativePlatform()&&tn.getPlatform()==="ios",async initialize(){if(!this.isIOS()||Mu)return;if(await new Promise(i=>{document.readyState==="complete"?i():document.addEventListener("deviceready",()=>i(),!1)}),!window.CdvPurchase){console.error("CdvPurchase not available");return}const{store:e,ProductType:t,Platform:n,LogLevel:s}=window.CdvPurchase;$o=e,e.verbosity=s.DEBUG,e.register([{id:ec,type:t.PAID_SUBSCRIPTION,platform:n.APPLE_APPSTORE}]),e.when().productUpdated(i=>{i.id===ec&&(console.log("[IAP] Product updated:",i.id,i.canPurchase),Bt=i)}).approved(i=>{var l;console.log("[IAP] Transaction approved:",i.transactionId);const a=i.parentReceipt,o=(l=a==null?void 0:a.nativeData)==null?void 0:l.appStoreReceipt;if(rs){const c=rs;rs=null,c({success:!0,receiptData:o,transactionId:i.transactionId})}i.verify()}).verified(i=>{console.log("[IAP] Receipt verified locally"),i.finish()}).finished(i=>{console.log("[IAP] Transaction finished:",i.transactionId)}).unverified(i=>{if(console.error("[IAP] Receipt verification failed:",i.reason),rs){const a=rs;rs=null,a({success:!1,error:"Receipt verification failed"})}}),e.error(i=>{if(console.error("[IAP] Store error:",i),rs){const a=rs;rs=null,a({success:!1,error:i.message||"Purchase failed"})}}),await e.initialize([n.APPLE_APPSTORE]),await e.update(),Bt=e.get(ec,n.APPLE_APPSTORE),Mu=!0,console.log("[IAP] Initialized. Product:",Bt==null?void 0:Bt.id,"canPurchase:",Bt==null?void 0:Bt.canPurchase)},getProduct(){return Bt},getPrice(){var e;return(e=Bt==null?void 0:Bt.pricing)!=null&&e.price?Bt.pricing.price:"$19.99"},isReady(){return Mu&&Bt!==null},async purchase(e){var n,s;if(!this.isIOS()){e({success:!1,error:"Apple purchase only available on iOS"});return}if(Mu||(console.log("[IAP] Not initialized, initializing now..."),await this.initialize()),!Bt&&$o){console.log("[IAP] Product not available, trying to refresh...");try{await $o.update();const{Platform:i}=window.CdvPurchase;Bt=$o.get(ec,i.APPLE_APPSTORE),console.log("[IAP] After refresh - Product:",Bt==null?void 0:Bt.id,"canPurchase:",Bt==null?void 0:Bt.canPurchase)}catch(i){console.error("[IAP] Failed to refresh product:",i)}}if(!Bt){console.error("[IAP] Product still not available after refresh. PRODUCT_ID:",ec),e({success:!1,error:"Product not available. Please check your internet connection and try again."});return}rs=e;const t=((n=Bt.getOffer)==null?void 0:n.call(Bt))||((s=Bt.offers)==null?void 0:s[0]);if(!t){rs=null,e({success:!1,error:"No offer available for this product"});return}try{console.log("[IAP] Starting purchase for offer:",t.id),await t.order()}catch(i){console.error("[IAP] Order error:",i),rs=null,e({success:!1,error:i.message||"Failed to start purchase"})}},async restorePurchases(){if(!this.isIOS())return{success:!1,restored:0,error:"Only available on iOS"};if(Mu||await this.initialize(),!$o)return{success:!1,restored:0,error:"Store not available"};const{Platform:e}=window.CdvPurchase;try{await $o.restorePurchases();const t=$o.get(ec,e.APPLE_APPSTORE);return{success:!0,restored:(t==null?void 0:t.owned)||!1?1:0}}catch(t){return{success:!1,restored:0,error:t.message||"Failed to restore purchases"}}}},pf=Object.freeze(Object.defineProperty({__proto__:null,ApplePurchaseService:Li},Symbol.toStringTag,{value:"Module"})),iNe=()=>{var v,g,y,j,m;const[e,t]=x.useState(!1),[n,s]=x.useState(null),[i,a]=x.useState("$19.99"),[o,l]=x.useState(!1),c=Li.isIOS(),d=!tn.isNativePlatform(),u=pe({queryKey:["/api/user/subscription-status"],staleTime:1e3*60*5,retry:1}),f=qe({mutationFn:async b=>(await lt("POST","/api/subscriptions/apple/verify",b)).json(),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/user/subscription-status"]})}});x.useEffect(()=>{c?Li.initialize().then(()=>{const b=Li.getPrice();a(b),l(Li.isReady())}):l(!0)},[c]);const h=x.useCallback(async()=>{t(!0),s(null);try{return c?new Promise(b=>{Li.purchase(async N=>{if(N.success&&N.receiptData)try{await f.mutateAsync({receiptData:N.receiptData,transactionId:N.transactionId}),t(!1),b({success:!0})}catch(w){t(!1),s(w.message||"Verification failed"),b({success:!1,error:w.message})}else t(!1),s(N.error||"Purchase failed"),b({success:!1,error:N.error})})}):(window.location.href="/api/stripe/create-checkout-session",{success:!0})}catch(b){return t(!1),s(b.message||"Purchase failed"),{success:!1,error:b.message}}},[c,f]),p=x.useCallback(async()=>{if(!c)return{success:!1,restored:0,error:"Only available on iOS"};t(!0),s(null);try{const b=await Li.restorePurchases();return b.success&&b.restored>0&&_e.invalidateQueries({queryKey:["/api/user/subscription-status"]}),t(!1),b}catch(b){return t(!1),s(b.message),{success:!1,restored:0,error:b.message}}},[c]);return{subscribe:h,restorePurchases:p,isIOS:c,isWeb:d,isPro:((v=u.data)==null?void 0:v.isPro)??!1,provider:(g=u.data)==null?void 0:g.provider,status:(y=u.data)==null?void 0:y.status,expiresAt:(j=u.data)==null?void 0:j.expiresAt,subscriptionType:(m=u.data)==null?void 0:m.subscriptionType,isLoading:e||u.isLoading||f.isPending,error:n,price:i,isReady:o}},aNe=()=>{const[e,t]=x.useState(!1),{toast:n}=Je();if(!Li.isIOS())return null;const s=async()=>{t(!0);try{const i=await Li.restorePurchases();i.success?i.restored>0?(_e.invalidateQueries({queryKey:["/api/user/subscription-status"]}),n({title:"Purchases Restored",description:"Your subscription has been restored successfully."})):n({title:"No Purchases Found",description:"No previous purchases were found to restore."}):n({title:"Restore Failed",description:i.error||"Failed to restore purchases",variant:"destructive"})}catch(i){n({title:"Error",description:i.message||"Failed to restore purchases",variant:"destructive"})}finally{t(!1)}};return r.jsx(Z,{onClick:s,disabled:e,variant:"link",className:"text-blue-400 text-sm","data-testid":"button-restore-purchases",children:e?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-3 h-3 mr-1 animate-spin"}),"Restoring..."]}):"Restore Purchases"})};function oNe(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState(!1),[i,a]=x.useState("monthly"),[o,l]=x.useState(""),[c,d]=x.useState(!1),[u,f]=x.useState(null),[h,p]=x.useState(""),v=tn.isNativePlatform()&&tn.getPlatform()==="ios",{subscribe:g,isLoading:y,price:j,error:m}=iNe(),{data:b,isLoading:N}=pe({queryKey:["/api/auth/me"]});x.useEffect(()=>{window.scrollTo(0,0)},[]),x.useEffect(()=>{b&&((b.subscriptionType==="lifetime"||b.subscriptionType==="free_admin_grant")&&(console.log("[PAYMENT] User has lifetime/admin access, redirecting to /chat"),e("/chat")),(b.subscriptionStatus==="trialing"||b.subscriptionStatus==="active")&&(console.log("[PAYMENT] User already has active subscription, redirecting to /chat"),e("/chat")))},[b,e]);const w=async()=>{if(o.trim()){d(!0),p("");try{const M=await(await lt("POST","/api/validate-referral",{code:o.trim()})).json();M.valid?(f({code:M.code,discountDescription:M.discountDescription||"Valid referral code"}),t({title:"Referral code applied!",description:M.discountDescription||"Your discount will be applied at checkout."})):p(M.error||"Invalid referral code")}catch{p("Failed to validate referral code")}finally{d(!1)}}},S=()=>{f(null),l(""),p("")},k=async()=>{if(v){const T=await g();T.success?(t({title:"Subscription Active!",description:"Welcome to BJJ OS"}),e("/chat")):T.error&&t({title:"Purchase Failed",description:T.error,variant:"destructive"});return}s(!0);try{console.log(`[PAYMENT] Creating checkout session for ${i} plan`);const T=await lt("POST","/api/create-checkout-session",{priceId:i,referralCode:(u==null?void 0:u.code)||null}),M=await T.json();if(!T.ok)throw new Error(M.error||"Failed to create checkout session");console.log("[PAYMENT] Checkout session created:",M),M.devBypass?(t({title:"Trial Started!",description:"Your 7-day trial is now active (dev mode)"}),e(M.url)):window.location.href=M.url}catch(T){t({title:"Error",description:T.message||"Failed to start trial",variant:"destructive"}),s(!1)}};if(N)return r.jsx("div",{className:"payment-page page-container",children:r.jsxs("div",{className:"payment-loading",children:[r.jsx(De,{className:"w-8 h-8 animate-spin text-white/60"}),r.jsx("p",{className:"text-white/60 mt-4",children:"Loading..."})]})});const P=v?j:"$19.99",E="$179.88",_=v?y:n,A=new Date(Date.now()+7*24*60*60*1e3).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return r.jsxs("div",{className:"payment-page page-container",children:[r.jsxs("div",{className:"payment-container",children:[r.jsxs("div",{className:"payment-header",children:[r.jsx("h1",{className:"payment-headline",children:v?"Subscribe to BJJ OS":"Complete Your Setup"}),r.jsx("p",{className:"payment-subheadline",children:v?"Get unlimited access to Professor OS and 3,000+ technique videos":"Choose your plan and start your 7-day free trial"})]}),!v&&r.jsxs("div",{className:"plan-selector",children:[r.jsxs("button",{onClick:()=>a("monthly"),className:`plan-card ${i==="monthly"?"plan-card-selected":""}`,"data-testid":"button-plan-monthly",children:[r.jsxs("div",{className:"plan-card-header",children:[r.jsx("div",{className:"plan-card-title",children:"Monthly"}),i==="monthly"&&r.jsx("div",{className:"plan-card-badge",children:r.jsx(Kn,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"plan-card-price",children:[P,r.jsx("span",{className:"plan-card-period",children:"/month"})]}),r.jsx("div",{className:"plan-card-description",children:"Billed monthly, cancel anytime"})]}),r.jsxs("button",{onClick:()=>a("annual"),className:`plan-card ${i==="annual"?"plan-card-selected":""}`,"data-testid":"button-plan-annual",children:[r.jsxs("div",{className:"plan-card-header",children:[r.jsx("div",{className:"plan-card-title",children:"Annual"}),i==="annual"&&r.jsx("div",{className:"plan-card-badge",children:r.jsx(Kn,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"plan-card-price",children:[E,r.jsx("span",{className:"plan-card-period",children:"/year"})]}),r.jsx("div",{className:"plan-card-description",children:"Save 17% with annual billing"})]})]}),v&&r.jsxs("div",{className:"ios-price-display",children:[r.jsxs("div",{className:"ios-price",children:[P,r.jsx("span",{className:"ios-period",children:"/month"})]}),r.jsx("div",{className:"ios-billing-note",children:"Billed monthly through App Store"})]}),r.jsxs("div",{className:"trial-info",children:[r.jsx("div",{className:"trial-info-badge",children:v?"BJJ OS":"7-Day Free Trial"}),r.jsx("p",{className:"trial-info-text",children:v?"Unlimited access to Professor OS and 3,000+ technique videos":r.jsxs(r.Fragment,{children:["You won't be charged until ",r.jsx("strong",{children:A})]})}),r.jsx("p",{className:"trial-info-subtext",children:v?"Manage subscription in App Store Settings":`Cancel anytime before ${A} - no charge`})]}),!v&&r.jsxs("div",{className:"referral-section",children:[r.jsxs("div",{className:"referral-header",children:[r.jsx(mq,{className:"w-4 h-4"}),r.jsx("span",{children:"Have a referral code?"})]}),u?r.jsxs("div",{className:"referral-applied","data-testid":"referral-applied",children:[r.jsxs("div",{className:"referral-applied-content",children:[r.jsx(jr,{className:"w-5 h-5 text-green-500"}),r.jsxs("div",{className:"referral-applied-text",children:[r.jsx("span",{className:"referral-code-display",children:u.code}),r.jsx("span",{className:"referral-discount",children:u.discountDescription})]})]}),r.jsx("button",{onClick:S,className:"referral-remove","data-testid":"button-remove-referral",children:r.jsx(ys,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:"referral-input-container",children:[r.jsx(je,{type:"text",placeholder:"Enter referral code",value:o,onChange:T=>{l(T.target.value.toUpperCase()),p("")},onKeyDown:T=>{T.key==="Enter"&&(T.preventDefault(),w())},className:"referral-input","data-testid":"input-referral-code"}),r.jsx(Z,{onClick:w,disabled:!o.trim()||c,variant:"outline",className:"referral-apply-btn","data-testid":"button-apply-referral",children:c?r.jsx(De,{className:"w-4 h-4 animate-spin"}):"Apply"})]}),h&&r.jsx("p",{className:"referral-error","data-testid":"referral-error",children:h})]}),r.jsxs("div",{className:"features-list",children:[r.jsx("h3",{className:"features-title",children:"What's Included"}),r.jsxs("div",{className:"features-grid",children:[r.jsxs("div",{className:"feature-item",children:[r.jsx(Kn,{className:"feature-icon"}),r.jsx("span",{children:"AI-powered BJJ coaching with Professor OS"})]}),r.jsxs("div",{className:"feature-item",children:[r.jsx(Kn,{className:"feature-icon"}),r.jsx("span",{children:"Personalized video recommendations"})]}),r.jsxs("div",{className:"feature-item",children:[r.jsx(Kn,{className:"feature-icon"}),r.jsx("span",{children:"3-brain memory system that remembers you"})]}),r.jsxs("div",{className:"feature-item",children:[r.jsx(Kn,{className:"feature-icon"}),r.jsx("span",{children:"Daily technique drills tailored to your level"})]}),r.jsxs("div",{className:"feature-item",children:[r.jsx(Kn,{className:"feature-icon"}),r.jsx("span",{children:"Progress tracking and performance analytics"})]}),r.jsxs("div",{className:"feature-item",children:[r.jsx(Kn,{className:"feature-icon"}),r.jsx("span",{children:"Access to 300+ curated BJJ technique videos"})]})]})]}),r.jsx(Z,{onClick:k,disabled:_,className:"payment-cta","data-testid":"button-start-trial",children:_?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-5 h-5 mr-2 animate-spin"}),v?"Processing...":"Starting Trial..."]}):r.jsxs(r.Fragment,{children:[r.jsx(_s,{className:"w-5 h-5 mr-2"}),v?`Subscribe - ${P}/month`:"Start 7-Day Free Trial"]})}),v&&r.jsx("div",{className:"text-center mt-4",children:r.jsx(aNe,{})}),r.jsxs("div",{className:"trust-signals",children:[r.jsx("p",{className:"trust-text",children:v?"Payment will be charged to your Apple ID account":" Secure payment powered by Stripe"}),r.jsx("p",{className:"trust-text",children:v?"Subscription automatically renews unless canceled 24 hours before period end":" Cancel anytime, no questions asked"})]})]}),r.jsx("style",{children:`
        /* ==================== VARIABLES ==================== */
        :root {
          --black: #000000;
          --black-elevated: #0F0F0F;
          --white: #FFFFFF;
          --gray-light: #A0A0A0;
          --gray-medium: #71717A;
          --gray-dark: #1A1A1A;
          --blue: #2563EB;
          --purple: #7C3AED;
        }

        /* ==================== BASE STYLES ==================== */
        .payment-page {
          background: radial-gradient(circle at 50% 0%, #0A0812 0%, #15111F 50%, #0A0812 100%);
          color: var(--white);
          min-height: 100vh;
          padding: 80px 20px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .payment-container {
          width: 100%;
          max-width: 700px;
        }

        .payment-loading {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 400px;
        }

        /* ==================== HEADER ==================== */
        .payment-header {
          text-align: center;
          margin-bottom: 48px;
        }

        .payment-headline {
          font-size: 48px;
          font-weight: 700;
          color: var(--white);
          line-height: 1.1;
          letter-spacing: -0.01em;
          margin-bottom: 16px;
        }

        .payment-subheadline {
          font-size: 18px;
          font-weight: 400;
          color: var(--gray-light);
          line-height: 1.6;
        }

        /* ==================== iOS PRICE DISPLAY ==================== */
        .ios-price-display {
          text-align: center;
          margin-bottom: 32px;
        }

        .ios-price {
          font-size: 48px;
          font-weight: 700;
          color: var(--white);
        }

        .ios-period {
          font-size: 18px;
          font-weight: 400;
          color: var(--gray-light);
        }

        .ios-billing-note {
          font-size: 14px;
          color: var(--gray-medium);
          margin-top: 8px;
        }

        /* ==================== PLAN SELECTOR ==================== */
        .plan-selector {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 16px;
          margin-bottom: 32px;
        }

        .plan-card {
          background: var(--black-elevated);
          border: 2px solid rgba(255, 255, 255, 0.1);
          padding: 24px;
          cursor: pointer;
          transition: all 150ms ease;
          text-align: left;
        }

        .plan-card:hover {
          border-color: rgba(255, 255, 255, 0.2);
        }

        .plan-card-selected {
          border-color: var(--purple);
          background: rgba(124, 58, 237, 0.1);
        }

        .plan-card-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 12px;
        }

        .plan-card-title {
          font-size: 20px;
          font-weight: 700;
          color: var(--white);
        }

        .plan-card-badge {
          width: 24px;
          height: 24px;
          border-radius: 50%;
          background: var(--purple);
          color: var(--white);
          display: flex;
          align-items: center;
          justify-center;
        }

        .plan-card-price {
          font-size: 32px;
          font-weight: 700;
          color: var(--white);
          margin-bottom: 8px;
        }

        .plan-card-period {
          font-size: 16px;
          font-weight: 400;
          color: var(--gray-light);
        }

        .plan-card-description {
          font-size: 14px;
          color: var(--gray-light);
        }

        /* ==================== TRIAL INFO ==================== */
        .trial-info {
          background: rgba(124, 58, 237, 0.1);
          border: 1px solid rgba(124, 58, 237, 0.3);
          padding: 24px;
          text-align: center;
          margin-bottom: 32px;
        }

        .trial-info-badge {
          font-size: 18px;
          font-weight: 700;
          color: var(--white);
          margin-bottom: 12px;
        }

        .trial-info-text {
          font-size: 16px;
          color: var(--white);
          margin-bottom: 8px;
        }

        .trial-info-subtext {
          font-size: 14px;
          color: var(--gray-light);
        }

        /* ==================== REFERRAL CODE ==================== */
        .referral-section {
          background: var(--black-elevated);
          border: 1px solid rgba(255, 255, 255, 0.1);
          padding: 20px;
          margin-bottom: 32px;
        }

        .referral-header {
          display: flex;
          align-items: center;
          gap: 8px;
          color: var(--gray-light);
          font-size: 14px;
          margin-bottom: 12px;
        }

        .referral-input-container {
          display: flex;
          gap: 8px;
        }

        .referral-input {
          flex: 1;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.15);
          color: var(--white);
          text-transform: uppercase;
        }

        .referral-input::placeholder {
          color: var(--gray-medium);
          text-transform: none;
        }

        .referral-apply-btn {
          min-width: 80px;
          border-color: rgba(255, 255, 255, 0.2);
          color: var(--white);
        }

        .referral-applied {
          display: flex;
          align-items: center;
          justify-content: space-between;
          background: rgba(34, 197, 94, 0.1);
          border: 1px solid rgba(34, 197, 94, 0.3);
          padding: 12px 16px;
        }

        .referral-applied-content {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .referral-applied-text {
          display: flex;
          flex-direction: column;
          gap: 2px;
        }

        .referral-code-display {
          font-weight: 700;
          color: var(--white);
          font-size: 14px;
        }

        .referral-discount {
          font-size: 13px;
          color: rgb(34, 197, 94);
        }

        .referral-remove {
          background: transparent;
          border: none;
          color: var(--gray-light);
          cursor: pointer;
          padding: 4px;
          transition: color 150ms ease;
        }

        .referral-remove:hover {
          color: var(--white);
        }

        .referral-error {
          color: rgb(239, 68, 68);
          font-size: 13px;
          margin-top: 8px;
        }

        /* ==================== FEATURES ==================== */
        .features-list {
          margin-bottom: 32px;
        }

        .features-title {
          font-size: 20px;
          font-weight: 700;
          color: var(--white);
          margin-bottom: 16px;
        }

        .features-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 12px;
        }

        .feature-item {
          display: flex;
          align-items: center;
          gap: 12px;
          font-size: 16px;
          color: var(--white);
        }

        .feature-icon {
          width: 20px;
          height: 20px;
          color: var(--purple);
          flex-shrink: 0;
        }

        /* ==================== CTA BUTTON ==================== */
        .payment-cta {
          width: 100%;
          background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
          border: none;
          font-weight: 700;
          font-size: 18px;
          color: var(--white);
          padding: 20px 48px;
          cursor: pointer;
          transition: all 150ms ease;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 24px;
          min-height: 60px;
        }

        .payment-cta:hover:not(:disabled) {
          background: linear-gradient(135deg, #1D4ED8 0%, #6D28D9 100%);
        }

        .payment-cta:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        /* ==================== TRUST SIGNALS ==================== */
        .trust-signals {
          text-align: center;
        }

        .trust-text {
          font-size: 14px;
          color: var(--gray-light);
          margin-bottom: 8px;
        }

        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 768px) {
          .payment-page {
            padding: 60px 20px;
          }

          .payment-headline {
            font-size: 36px;
          }

          .plan-selector {
            grid-template-columns: 1fr;
          }
        }
      `})]})}function lNe(){const[e,t]=x.useState(""),[n,s]=x.useState("all"),[i,a]=x.useState("newest"),[o,l]=x.useState("all"),[c,d]=x.useState("all"),[u,f]=x.useState(null),[h,p]=x.useState(new Set),{toast:v}=Je(),[,g]=it(),{data:y,isLoading:j,error:m}=pe({queryKey:["/api/auth/me"]});x.useEffect(()=>{m&&!j&&(v({title:"Authentication Required",description:"Please log in to continue",variant:"destructive"}),g("/login"))},[m,j,g,v]);const{data:b}=pe({queryKey:["/api/ai/saved-videos",y==null?void 0:y.id],enabled:!!(y!=null&&y.id)});x.useEffect(()=>{b!=null&&b.videos&&p(new Set(b.videos.map(I=>parseInt(I.id))))},[b]);const N=qe({mutationFn:async I=>(oe("light"),await lt("POST","/api/ai/saved-videos",{userId:y==null?void 0:y.id,videoId:I})),onSuccess:(I,B)=>{oe("success"),p(H=>new Set([...Array.from(H),B])),v({title:"Saved",description:"Video saved to your library"}),_e.invalidateQueries({queryKey:["/api/ai/saved-videos",y==null?void 0:y.id]})}}),w=qe({mutationFn:async I=>await lt("DELETE",`/api/ai/saved-videos/${I}`,{userId:y==null?void 0:y.id}),onSuccess:(I,B)=>{p(H=>{const Q=new Set(Array.from(H));return Q.delete(B),Q}),v({title:"Removed",description:"Video removed from your library"}),_e.invalidateQueries({queryKey:["/api/ai/saved-videos",y==null?void 0:y.id]})}}),S=(I,B)=>{B.stopPropagation(),h.has(I)?w.mutate(I):N.mutate(I)},k=(I,B,H)=>{f({videoId:I,title:B,instructor:H})},{data:P,isLoading:E,error:_,isFetching:F}=pe({queryKey:["/api/ai/videos"]});x.useEffect(()=>{var I;console.log("[LIBRARY DEBUG] Query state:",{isLoading:E,isFetching:F,hasData:!!P,videosCount:((I=P==null?void 0:P.videos)==null?void 0:I.length)||0,error:(_==null?void 0:_.message)||null})},[E,F,P,_]);const A=(P==null?void 0:P.videos)||[],{data:T}=pe({queryKey:["/api/ai/techniques"]}),M=(T==null?void 0:T.techniques)||[],{data:O}=pe({queryKey:["/api/ai/instructors"]}),C=(O==null?void 0:O.instructors)||[],R=x.useMemo(()=>{console.log("[LIBRARY FILTER] Running filter with:",{searchQuery:e,giFilter:n,sortBy:i,instructorFilter:o,techniqueFilter:c,totalVideos:A.length});let I=A.filter(B=>{var V,J,me,de,ve,ce;const H=!e||((V=B.title)==null?void 0:V.toLowerCase().includes(e.toLowerCase()))||((J=B.techniqueName)==null?void 0:J.toLowerCase().includes(e.toLowerCase()))||((me=B.instructorName)==null?void 0:me.toLowerCase().includes(e.toLowerCase())),Q=n==="all"||((de=B.giOrNogi)==null?void 0:de.toLowerCase())===n.toLowerCase(),D=o==="all"||((ve=B.instructorName)==null?void 0:ve.toLowerCase())===o.toLowerCase(),te=c==="all"||((ce=B.techniqueName)==null?void 0:ce.toLowerCase())===c.toLowerCase();return H&&Q&&D&&te});return console.log("[LIBRARY FILTER] Filtered to",I.length,"videos"),i==="newest"?I.sort((B,H)=>{const Q=new Date(B.createdAt??0).getTime();return new Date(H.createdAt??0).getTime()-Q}):i==="popular"?I.sort((B,H)=>{const Q=B.viewCount??0;return(H.viewCount??0)-Q}):i==="instructor"?I.sort((B,H)=>{const Q=(B.instructorName||"").localeCompare(H.instructorName||"");if(Q!==0)return Q;const D=new Date(B.createdAt??0).getTime();return new Date(H.createdAt??0).getTime()-D}):I.sort((B,H)=>{const Q=new Date(B.createdAt??0).getTime();return new Date(H.createdAt??0).getTime()-Q})},[A,e,n,i,o,c]);return j?r.jsx(ra,{children:r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(h2,{size:"lg",className:"text-purple-400"})})}):m||!y?r.jsx(ra,{children:r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"text-muted-foreground",children:"Redirecting to login..."})})}):r.jsxs(ra,{children:[r.jsxs("div",{className:"library-page w-full h-full overflow-auto",children:[r.jsx("header",{className:"page-header",children:r.jsxs("div",{className:"header-content",children:[r.jsx("h1",{className:"page-title",children:"Video Library"}),r.jsx(Nr,{className:"search-icon-header"})]})}),r.jsxs("div",{className:"filters-section",children:[r.jsxs("div",{className:"search-bar",children:[r.jsx(Nr,{className:"search-icon"}),r.jsx(je,{type:"text",placeholder:"Search techniques...",value:e,onChange:I=>t(I.target.value),className:"search-input","data-testid":"input-search"})]}),r.jsxs("div",{className:"filter-row",children:[r.jsxs(et,{value:i,onValueChange:I=>a(I),children:[r.jsx(Xe,{className:"filter-select","data-testid":"select-sort",children:r.jsx(tt,{placeholder:"Sort"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"newest",children:"Newest First"}),r.jsx(ne,{value:"popular",children:"Most Watched"}),r.jsx(ne,{value:"instructor",children:"By Instructor"})]})]}),r.jsxs(et,{value:n,onValueChange:s,children:[r.jsx(Xe,{className:"filter-select","data-testid":"select-gi",children:r.jsx(tt,{placeholder:"Gi/No-Gi"})}),r.jsxs(Ze,{children:[r.jsx(ne,{value:"all",children:"All"}),r.jsx(ne,{value:"gi",children:"Gi"}),r.jsx(ne,{value:"nogi",children:"No-Gi"}),r.jsx(ne,{value:"both",children:"Both"})]})]}),r.jsxs(et,{value:c,onValueChange:d,children:[r.jsx(Xe,{className:"filter-select","data-testid":"select-technique",children:r.jsx(tt,{placeholder:"All Techniques"})}),r.jsxs(Ze,{children:[r.jsxs(ne,{value:"all",children:["All Techniques (",(T==null?void 0:T.totalCount)||0,")"]}),M.map(I=>r.jsxs(ne,{value:I.name.toLowerCase(),children:[I.name," (",I.count,")"]},I.name))]})]}),r.jsxs(et,{value:o,onValueChange:l,children:[r.jsx(Xe,{className:"filter-select","data-testid":"select-instructor",children:r.jsx(tt,{placeholder:"All Instructors"})}),r.jsxs(Ze,{children:[r.jsxs(ne,{value:"all",children:["All Instructors (",(O==null?void 0:O.totalCount)||0,")"]}),C.map(I=>r.jsxs(ne,{value:I.name.toLowerCase(),children:[I.name," (",I.count,")"]},I.name))]})]})]}),r.jsx("div",{className:"result-count","data-testid":"video-count",children:E?"Loading...":`${R.length} videos`})]}),r.jsx("div",{className:"video-grid",children:E?r.jsx("div",{className:"loading-state",children:"Loading videos..."}):R.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("p",{children:"No videos found"}),r.jsx("p",{className:"empty-hint",children:i==="instructor"&&o?`No videos found for instructor "${o}"`:"Try adjusting your filters"})]}):R.map(I=>r.jsxs("div",{className:"video-card","data-testid":`video-card-${I.id}`,onClick:()=>I.videoId&&k(I.videoId,I.techniqueName||I.title,I.instructorName),children:[r.jsxs("div",{className:"video-thumbnail",children:[r.jsx(f2,{thumbnailUrl:I.thumbnailUrl,videoId:I.videoId,title:I.techniqueName||I.title}),r.jsx("div",{className:"play-overlay",children:r.jsx("div",{className:"play-button-circle",children:""})}),r.jsx("button",{className:"save-button","data-testid":`button-save-${I.id}`,onClick:B=>S(I.id,B),children:r.jsx(WI,{className:"heart-icon",fill:h.has(I.id)?"#ff4444":"none",stroke:h.has(I.id)?"#ff4444":"#fff"})}),I.qualityScore&&r.jsxs("div",{className:"quality-badge",children:[" ",I.qualityScore.toFixed(1)]})]}),r.jsxs("div",{className:"video-info",children:[r.jsx("h3",{className:"video-title",children:I.techniqueName||I.title}),r.jsx("p",{className:"video-instructor",children:I.instructorName}),r.jsx("div",{className:"video-metadata",children:I.giOrNogi&&r.jsx("span",{className:"metadata-badge gi-badge","data-testid":`badge-gi-${I.id}`,children:I.giOrNogi==="gi"?"Gi":I.giOrNogi==="nogi"?"No-Gi":"Both"})})]})]},I.id))}),r.jsx("style",{children:`
          /* ==================== PAGE LAYOUT ==================== */
          .library-page {
            min-height: 100vh;
            background: #000;
            color: #fff;
          }

          .page-header {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
          }

          .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
          }

          .page-title {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
          }

          .search-icon-header {
            width: 24px;
            height: 24px;
            color: #71717A;
          }

          /* ==================== FILTERS ==================== */
          .filters-section {
            padding: 16px;
            background: #000;
          }

          .search-bar {
            position: relative;
            margin-bottom: 12px;
          }

          .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: #71717A;
            pointer-events: none;
          }

          .search-input {
            padding-left: 40px;
            background: #0F0F0F;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            width: 100%;
          }

          .search-input::placeholder {
            color: #71717A;
          }

          .filter-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 12px;
          }
          
          .instructor-search-bar {
            margin-bottom: 12px;
          }
          
          .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
          }

          .filter-select {
            background: #0F0F0F;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
          }

          .result-count {
            font-size: 14px;
            color: #71717A;
            text-align: center;
          }

          /* ==================== VIDEO GRID ==================== */
          .video-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 16px;
          }

          @media (min-width: 768px) {
            .video-grid {
              grid-template-columns: repeat(4, 1fr);
              gap: 16px;
            }
          }

          .video-card {
            background: #0F0F0F;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 150ms ease;
          }

          .video-card:hover {
            transform: scale(1.02);
          }

          .video-thumbnail {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            background: #1A1A1A;
          }

          .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
          }

          .save-button {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 150ms ease;
          }

          .save-button:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.1);
          }

          .heart-icon {
            width: 18px;
            height: 18px;
            color: #fff;
          }

          .quality-badge {
            position: absolute;
            bottom: 8px;
            right: 8px;
            padding: 4px 8px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            color: #FFD700;
          }

          .video-info {
            padding: 12px;
          }

          .video-title {
            font-size: 14px;
            font-weight: 600;
            color: #fff;
            margin: 0 0 4px 0;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
          }

          .video-instructor {
            font-size: 12px;
            color: #71717A;
            margin: 0 0 8px 0;
          }

          /* ==================== VIDEO METADATA BADGES ==================== */
          .video-metadata {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 8px;
          }

          .metadata-badge {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: capitalize;
            white-space: nowrap;
          }

          /* Belt level badges with authentic BJJ colors */
          .belt-white {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.3);
          }

          .belt-blue {
            background: rgba(59, 130, 246, 0.2);
            color: #60A5FA;
            border: 1px solid rgba(59, 130, 246, 0.4);
          }

          .belt-purple {
            background: rgba(168, 85, 247, 0.2);
            color: #C084FC;
            border: 1px solid rgba(168, 85, 247, 0.4);
          }

          .belt-brown {
            background: rgba(180, 83, 9, 0.2);
            color: #FDBA74;
            border: 1px solid rgba(180, 83, 9, 0.4);
          }

          .belt-black {
            background: rgba(255, 255, 255, 0.1);
            color: #FFD700;
            border: 1px solid rgba(255, 215, 0, 0.4);
          }

          /* Gi/No-Gi badge */
          .gi-badge {
            background: rgba(139, 92, 246, 0.15);
            color: #A78BFA;
            border: 1px solid rgba(139, 92, 246, 0.3);
          }

          /* Technique type badge */
          .type-badge {
            background: rgba(34, 197, 94, 0.15);
            color: #4ADE80;
            border: 1px solid rgba(34, 197, 94, 0.3);
          }

          /* Duration badge */
          .duration-badge {
            background: rgba(251, 146, 60, 0.15);
            color: #FB923C;
            border: 1px solid rgba(251, 146, 60, 0.3);
          }

          /* ==================== STATES ==================== */
          .loading-state,
          .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 48px 16px;
            color: #71717A;
          }

          .empty-hint {
            margin-top: 8px;
            font-size: 14px;
          }

          /* ==================== PLAY OVERLAY ==================== */
          .play-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 150ms ease;
          }

          .video-card:hover .play-overlay {
            opacity: 1;
          }

          .play-button-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #fff;
            padding-left: 4px;
          }
        `})]}),u&&r.jsx(Ll,{videoId:u.videoId,title:u.title,instructor:u.instructor,onClose:()=>f(null)})]})}const cNe=ko("Share",{web:()=>or(()=>import("./web-DPaPLg7r.js"),[]).then(e=>new e.ShareWeb)});async function dNe(e){var t,n;console.log("=== SHARE ATTEMPT ==="),console.log("Platform:",tn.getPlatform()),console.log("Is Native:",tn.isNativePlatform()),console.log("Options:",JSON.stringify(e,null,2));try{if(tn.isNativePlatform()){console.log("Calling Share.share() for native platform...");const s=await cNe.share({title:e.title,text:e.text,url:e.url,dialogTitle:e.dialogTitle||"Share"});return console.log("=== SHARE SUCCESS ===",s),!0}else return navigator.share?(await navigator.share({title:e.title,text:e.text,url:e.url}),!0):e.url?(await navigator.clipboard.writeText(e.url),!0):!1}catch(s){console.log("=== SHARE ERROR ==="),console.log("Error name:",s==null?void 0:s.name),console.log("Error message:",s==null?void 0:s.message),console.log("Full error:",s);const i=((t=s==null?void 0:s.message)==null?void 0:t.toLowerCase())||"";return(((n=s==null?void 0:s.name)==null?void 0:n.toLowerCase())||"")==="aborterror"||i.includes("cancel")||i.includes("abort")||i.includes("dismiss")?(console.log("User cancelled share - not an error"),!1):(console.warn("Share failed unexpectedly:",s),!1)}}async function Ny(e,t,n){console.log("=== SHARE VIDEO CALLED ==="),console.log("Title:",e),console.log("Instructor:",t),console.log("VideoId:",n);let s,i;return n?(s=`https://www.youtube.com/watch?v=${n}`,i=`${e}
${t}

${s}

Professor OS found this - 3,500+ videos analyzed with timestamps and key details.

https://bjjos.app`):(s=`https://www.youtube.com/results?search_query=${encodeURIComponent(`${e} ${t} BJJ`)}`,i=`${e} by ${t}

Search: ${s}

Professor OS recommended this technique - 3,500+ videos analyzed.

https://bjjos.app`),console.log("URL:",s),console.log("Calling shareContent..."),dNe({title:e||"BJJ Technique",text:i,dialogTitle:"Share this technique"})}function uNe(e){return e?e<=3?"Beginner":e<=6?"Intermediate":"Advanced":"All Levels"}function fNe(e){return e?e<=3?"#22C55E":e<=6?"#F59E0B":"#EF4444":"#71717A"}function hNe(e){return e==="gi"?"Gi":e==="nogi"?"No-Gi":"Both"}function m2({videoId:e,onClose:t,onTimestampClick:n}){var h,p,v;const{data:s,isLoading:i,error:a}=pe({queryKey:["/api/ai/videos",e,"analysis"],queryFn:async()=>{const g=await fetch(`/api/ai/videos/${e}/analysis`);if(!g.ok)throw new Error("Failed to fetch analysis");return g.json()},enabled:!!e}),o=g=>{oe("light"),n&&n(g)};if(i)return r.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:t,children:r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx(De,{className:"animate-spin",size:40,color:"#8B5CF6"}),r.jsx("p",{style:{color:"#fff",marginTop:"16px"},children:"Loading analysis..."})]})});if(a||!s)return r.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:t,children:r.jsxs("div",{style:{background:"#1A1A1D",padding:"24px",borderRadius:"16px",textAlign:"center",maxWidth:"300px"},children:[r.jsx(Gs,{size:40,color:"#EF4444",style:{marginBottom:"16px"}}),r.jsx("p",{style:{color:"#fff"},children:"Analysis not available"}),r.jsx("button",{onClick:t,"data-testid":"button-close-analysis-error",style:{marginTop:"16px",padding:"8px 24px",background:"#8B5CF6",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Close"})]})});const{video:l,techniques:c,hasGeminiAnalysis:d}=s,u=Array.isArray(l.keyTimestamps)?l.keyTimestamps:[],f=[];return l.setupTimestamp&&f.push({time:l.setupTimestamp,label:"Setup",type:"setup"}),l.executionTimestamp&&f.push({time:l.executionTimestamp,label:"Execution",type:"execution"}),l.troubleshootingTimestamp&&f.push({time:l.troubleshootingTimestamp,label:"Troubleshooting",type:"troubleshooting"}),l.commonMistakesTimestamp&&f.push({time:l.commonMistakesTimestamp,label:"Common Mistakes",type:"mistakes"}),u.forEach(g=>{g.time&&g.description&&f.push({time:g.time,label:g.description,type:"key"})}),r.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.85)",zIndex:1e3,display:"flex",flexDirection:"column"},onClick:g=>g.target===g.currentTarget&&t(),children:r.jsxs("div",{style:{flex:1,background:"#0A0A0B",marginTop:"40px",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:g=>g.stopPropagation(),children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #2A2A2E",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(Us,{size:24,color:"#8B5CF6"}),r.jsx("span",{style:{fontWeight:600,fontSize:"18px",color:"#fff"},children:"Video Analysis"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("button",{onClick:async()=>{oe("light"),await Ny(l.title,l.instructorName,l.youtubeId)},"data-testid":"button-share-analysis",style:{background:"#1A1A1D",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#71717A"},children:r.jsx(hv,{size:18})}),r.jsx("button",{onClick:t,"data-testid":"button-close-analysis",style:{background:"#1A1A1D",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#71717A"},children:r.jsx(ys,{size:20})})]})]}),r.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:[r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h2",{style:{fontSize:"20px",fontWeight:700,color:"#fff",marginBottom:"4px"},children:l.title}),r.jsx("p",{style:{color:"#71717A",fontSize:"14px"},children:l.instructorName})]}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"24px"},children:[l.qualityScore&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",background:"#1A1A1D",padding:"6px 12px",borderRadius:"20px",fontSize:"13px",color:"#FFD700"},children:[r.jsx(qn,{size:14,fill:"#FFD700"}),l.qualityScore.toFixed(1)]}),r.jsx("span",{style:{background:"#1A1A1D",padding:"6px 12px",borderRadius:"20px",fontSize:"13px",color:"#fff"},children:hNe(l.giOrNogi)}),r.jsx("span",{style:{background:"#1A1A1D",padding:"6px 12px",borderRadius:"20px",fontSize:"13px",color:fNe(l.difficultyScore)},children:uNe(l.difficultyScore)}),l.positionCategory&&r.jsx("span",{style:{background:"#1A1A1D",padding:"6px 12px",borderRadius:"20px",fontSize:"13px",color:"#8B5CF6"},children:l.positionCategory}),l.duration&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",background:"#1A1A1D",padding:"6px 12px",borderRadius:"20px",fontSize:"13px",color:"#71717A"},children:[r.jsx(Kr,{size:14}),l.duration]})]}),f.length>0&&r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:"#fff",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Kr,{size:16,color:"#8B5CF6"}),"Jump To"]}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:f.map((g,y)=>r.jsxs("button",{onClick:()=>o(g.time),"data-testid":`button-timestamp-${y}`,style:{background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"#fff",fontSize:"13px"},children:[r.jsx("span",{style:{color:"#8B5CF6",fontWeight:600},children:g.time}),r.jsx("span",{children:g.label})]},y))})]}),d&&c.length>0&&r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:"#fff",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(fg,{size:16,color:"#22C55E"}),"Techniques Covered"]}),c.map((g,y)=>r.jsxs("div",{style:{background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"12px",padding:"16px",marginBottom:"12px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[r.jsxs("div",{children:[r.jsx("h4",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:g.techniqueName}),g.positionContext&&r.jsx("span",{style:{color:"#71717A",fontSize:"13px"},children:g.positionContext})]}),g.timestampStart&&r.jsxs("button",{onClick:()=>o(g.timestampStart),style:{background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"6px",padding:"4px 10px",color:"#8B5CF6",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(Kr,{size:12}),g.timestampStart]})]}),g.keyConcepts&&g.keyConcepts.length>0&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("p",{style:{fontSize:"12px",color:"#71717A",marginBottom:"6px"},children:"Key Concepts"}),r.jsx("ul",{style:{margin:0,paddingLeft:"16px"},children:g.keyConcepts.map((j,m)=>r.jsx("li",{style:{fontSize:"13px",color:"#fff",marginBottom:"4px"},children:j},m))})]}),g.instructorTips&&g.instructorTips.length>0&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("p",{style:{fontSize:"12px",color:"#22C55E",marginBottom:"6px"},children:"Instructor Tips"}),r.jsx("ul",{style:{margin:0,paddingLeft:"16px"},children:g.instructorTips.map((j,m)=>r.jsxs("li",{style:{fontSize:"13px",color:"#22C55E",marginBottom:"4px"},children:['"',j,'"']},m))})]}),g.commonMistakes&&g.commonMistakes.length>0&&r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"12px",color:"#EF4444",marginBottom:"6px"},children:"Common Mistakes"}),r.jsx("ul",{style:{margin:0,paddingLeft:"16px"},children:g.commonMistakes.map((j,m)=>r.jsx("li",{style:{fontSize:"13px",color:"#EF4444",marginBottom:"4px"},children:j},m))})]})]},y))]}),((h=l.commonMistakes)==null?void 0:h.length)>0&&r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:"#fff",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Gs,{size:16,color:"#EF4444"}),"Common Mistakes"]}),r.jsx("div",{style:{background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"12px",padding:"16px"},children:r.jsx("ul",{style:{margin:0,paddingLeft:"16px"},children:l.commonMistakes.map((g,y)=>r.jsx("li",{style:{fontSize:"14px",color:"#EF4444",marginBottom:"8px"},children:g},y))})})]}),((p=l.keyDetails)==null?void 0:p.length)>0&&r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:"#fff",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(sq,{size:16,color:"#F59E0B"}),"Key Details"]}),r.jsx("div",{style:{background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"12px",padding:"16px"},children:r.jsx("ul",{style:{margin:0,paddingLeft:"16px"},children:l.keyDetails.map((g,y)=>r.jsx("li",{style:{fontSize:"14px",color:"#fff",marginBottom:"8px"},children:g},y))})})]}),((v=l.prerequisites)==null?void 0:v.length)>0&&r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:"#fff",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(uv,{size:16,color:"#8B5CF6"}),"Prerequisites"]}),r.jsx("div",{style:{background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"12px",padding:"16px"},children:r.jsx("ul",{style:{margin:0,paddingLeft:"16px"},children:l.prerequisites.map((g,y)=>r.jsx("li",{style:{fontSize:"14px",color:"#71717A",marginBottom:"8px"},children:g},y))})})]}),!d&&r.jsxs("div",{style:{background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"12px",padding:"24px",textAlign:"center"},children:[r.jsx(Us,{size:40,color:"#71717A",style:{marginBottom:"12px"}}),r.jsx("p",{style:{color:"#71717A",fontSize:"14px"},children:"Detailed AI analysis is being processed for this video. Check back soon!"})]})]})]})})}function $x(e){if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())&&SL(t)}function mNe(e){if(!$x(e))return"Just now";const t=new Date(e),s=c2(new Date,t);return s===0?br(t,"h:mm a"):s<7?br(t,"EEE, h:mm a"):br(t,"MMM d, h:mm a")}function pNe(e){if(!$x(e))return"Recent";const t=new Date(e);if(Twe(t))return"Today";if(_we(t))return"Yesterday";{const n=new Date;return t.getFullYear()===n.getFullYear()?br(t,"MMM d"):br(t,"MMM d, yyyy")}}function gNe(e,t){if(!t)return!0;if(!$x(e)||!$x(t))return!1;const n=new Date(e),s=new Date(t);return c2(n,s)!==0}function Fd(e){if(!e)return"";const t={"&#39;":"'","&apos;":"'","&#x27;":"'","&quot;":'"',"&#34;":'"',"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&nbsp;":" ","&#160;":" "};let n=e;for(const[s,i]of Object.entries(t))n=n.split(s).join(i);return n}async function uO(e){tn.isNativePlatform()?await yy.open({url:e,presentationStyle:"popover"}):window.open(e,"_blank")}function xNe(e){try{const t=[],n=/\[VIDEO:\s*([^\]]+)\]/g;let s=0,i;for(;(i=n.exec(e))!==null;)try{i.index>s&&t.push({text:e.slice(s,i.index)});const a=i[1],o=a.split("|").map(p=>p.trim());if(o.length>=5){const p={title:o[0],instructor:o[1],duration:o[2],videoId:o[3],id:parseInt(o[4],10),startTime:o[5]||void 0};if(p.title&&p.instructor&&p.videoId&&!isNaN(p.id)){t.push({text:"",video:p}),s=i.index+i[0].length;continue}}let l="",c="",d;const u=a.match(/\|\s*START:\s*(\d{1,2}:\d{2})/i);u&&(d=u[1]);const f=a.replace(/\|\s*START:\s*\d{1,2}:\d{2}/i,"").trim(),h=f.match(/^(.+?)\s+by\s+(.+)$/i);if(h)l=h[1].trim(),c=h[2].trim();else{const p=f.match(/^(.+?)\s*\(([^)]+)\)$/);p?(l=p[1].trim(),c=p[2].trim()):(l=f,c="BJJ Instructor")}if(l){const p=Math.abs((l+c).split("").reduce((v,g)=>(v=(v<<5)-v+g.charCodeAt(0),v&v),0));t.push({text:"",video:{id:p,title:l,instructor:c,duration:d||"Watch",videoId:"",startTime:d}})}else t.push({text:i[0]});s=i.index+i[0].length}catch(a){console.error(" Error parsing individual video token:",a),t.push({text:i[0]}),s=i.index+i[0].length}return s<e.length&&t.push({text:e.slice(s)}),t.length>0?t:[{text:e}]}catch(t){return console.error(" CRITICAL: Video parsing failed completely, returning plain text:",t),[{text:e}]}}function vNe({message:e,sender:t,timestamp:n,isLastMessage:s=!1}){const[i,a]=x.useState(new Set),[o,l]=x.useState(null),[c,d]=x.useState(new Set),[u,f]=x.useState(null),{toast:h}=Je(),p=localStorage.getItem("mobileUserId")||"";x.useEffect(()=>{if(!p)return;(async()=>{try{const b=await fetch(`/api/ai/saved-videos/${p}`);if(b.ok){const w=(await b.json()).videos||[],S=new Set(w.map(k=>parseInt(k.id,10)));a(S)}}catch(b){console.error("Failed to fetch saved videos:",b)}})()},[p]);const v=async m=>{d(b=>new Set(b).add(m.id));try{const b=new URLSearchParams;b.append("title",m.title),b.append("instructor",m.instructor),b.append("limit","1");const w=await(await fetch(`/api/ai/videos/search?${b.toString()}`)).json();if(w.videos&&w.videos.length>0&&w.videos[0].videoId){const k=w.videos[0];l({videoId:k.videoId,title:k.title,instructor:k.instructorName,startTime:m.startTime}),g(k.id||m.id,m.startTime);return}const S=encodeURIComponent(`${m.title} ${m.instructor} BJJ`);uO(`https://www.youtube.com/results?search_query=${S}`)}catch(b){console.error("Video search failed:",b);const N=encodeURIComponent(`${m.title} ${m.instructor} BJJ`);uO(`https://www.youtube.com/results?search_query=${N}`)}finally{d(b=>{const N=new Set(b);return N.delete(m.id),N})}},g=async(m,b)=>{if(p)try{await fetch("/api/ai/engagement/video-click",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:p,videoId:typeof m=="string"?parseInt(m,10):m,startTimestamp:b?parseInt(b,10):void 0})}),console.log(" Video click tracked for dashboard")}catch(N){console.error("Failed to track video click:",N)}},y=async m=>{if(!p){h({variant:"destructive",title:"Not logged in",description:"Please log in to save videos."});return}const b=i.has(m);try{b?(await lt("DELETE",`/api/ai/saved-videos/${m}`,{userId:p}),a(N=>{const w=new Set(N);return w.delete(m),w}),oe("light"),h({title:"Video removed",description:"Video removed from saved videos"})):(await lt("POST","/api/ai/saved-videos",{userId:p,videoId:m}),a(N=>new Set(N).add(m)),oe("success"),h({title:"Video saved",description:"Video added to your saved videos"}))}catch(N){console.error("Save video error:",N),oe("error"),h({variant:"destructive",title:"Error",description:N.message||"Failed to save video. Please try again."})}},j=xNe(e||"");return r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",flexDirection:t==="user"?"row-reverse":"row",width:"100%"},children:[t==="assistant"&&r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,fontSize:"14px",fontWeight:600,color:"white",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)"},"data-testid":"avatar-professor-os",children:"OS"}),r.jsxs("div",{className:`mobile-message-bubble ${t}`,"data-testid":`message-${t}`,children:[j.map((m,b)=>r.jsxs("div",{children:[m.text&&r.jsx("p",{style:{marginBottom:"0.5rem",whiteSpace:"pre-line"},children:m.text}),m.video&&r.jsx("div",{style:{marginTop:"0.75rem",marginBottom:"0.75rem"},children:r.jsxs("div",{style:{backgroundColor:"var(--mobile-surface)",borderRadius:"0.75rem",overflow:"hidden",border:"1px solid var(--mobile-border)"},children:[m.video.videoId?r.jsx("div",{style:{position:"relative"},children:r.jsxs("button",{onClick:()=>{l({videoId:m.video.videoId,title:m.video.title,instructor:m.video.instructor,startTime:m.video.startTime}),g(m.video.id,m.video.startTime)},style:{width:"100%",border:"none",cursor:"pointer",padding:0,background:"#000",overflow:"hidden",position:"relative"},"data-testid":`button-play-video-${m.video.id}`,title:"Play video",children:[r.jsx(f2,{videoId:m.video.videoId,title:m.video.title}),r.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"3.5rem",height:"3.5rem",background:"rgba(102, 126, 234, 0.95)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",zIndex:10},children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 16 16",fill:"white",children:r.jsx("path",{d:"M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"})})})]})}):r.jsx("button",{onClick:()=>v(m.video),disabled:c.has(m.video.id),style:{width:"100%",border:"none",cursor:c.has(m.video.id)?"wait":"pointer",padding:"1.5rem 1rem",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:c.has(m.video.id)?.7:1},"data-testid":`button-search-video-${m.video.id}`,title:"Find and play video",children:c.has(m.video.id)?r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid rgba(167, 139, 250, 0.3)",borderTopColor:"#A78BFA",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("span",{style:{fontSize:"0.75rem",color:"#A78BFA"},children:"Finding video..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{width:"3rem",height:"3rem",background:"rgba(102, 126, 234, 0.8)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"white",children:r.jsx("path",{d:"M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"})})}),r.jsx("span",{style:{fontSize:"0.75rem",color:"#A78BFA"},children:"Tap to play"})]})}),r.jsxs("div",{style:{padding:"0.75rem"},children:[r.jsxs("div",{onClick:()=>{m.video.videoId?l({videoId:m.video.videoId,title:m.video.title,instructor:m.video.instructor,startTime:m.video.startTime}):v(m.video)},style:{cursor:"pointer",marginBottom:m.video.videoId?"0.5rem":0},children:[r.jsx("p",{style:{fontWeight:"600",fontSize:"0.875rem",marginBottom:"0.25rem",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:"1.3",wordBreak:"break-word"},children:Fd(m.video.title)}),r.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--mobile-text-secondary)",lineHeight:"1.4",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[m.video.instructor,m.video.videoId&&(()=>{const N=m.video.startTime;if(!N)return"  full";if(N.includes(":")){const P=N.split(":").map(Number);let E=0;return P.length===2?E=P[0]*60+P[1]:P.length===3&&(E=P[0]*3600+P[1]*60+P[2]),E===0?"  full":`  @ ${N}`}const w=parseInt(N,10);if(isNaN(w)||w<=0)return"  full";const S=Math.floor(w/60),k=w%60;return`  @ ${S}:${String(k).padStart(2,"0")}`})()]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:[m.video.videoId&&r.jsxs("button",{onClick:()=>f(m.video.id),style:{background:"rgba(139, 92, 246, 0.15)",border:"none",borderRadius:"6px",padding:"0.35rem 0.6rem",cursor:"pointer",color:"#8B5CF6",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.7rem",fontWeight:500},"data-testid":`button-analysis-video-${m.video.id}`,title:"View full analysis",children:[r.jsx(Us,{size:12}),"Analysis"]}),m.video.videoId&&r.jsxs("button",{onClick:()=>y(m.video.id),style:{background:i.has(m.video.id)?"rgba(34, 197, 94, 0.15)":"rgba(39, 39, 42, 0.5)",border:"none",borderRadius:"6px",padding:"0.35rem 0.6rem",cursor:"pointer",color:i.has(m.video.id)?"#22C55E":"var(--mobile-text-secondary)",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.7rem",fontWeight:500},"data-testid":`button-save-video-${m.video.id}`,title:i.has(m.video.id)?"Remove from saved":"Save video",children:[i.has(m.video.id)?r.jsx(cv,{size:12}):r.jsx(ps,{size:12}),i.has(m.video.id)?"Saved":"Save"]}),r.jsxs("button",{onClick:async()=>{oe("light"),await Ny(Fd(m.video.title),m.video.instructor,m.video.videoId||"")},style:{background:"rgba(16, 185, 129, 0.15)",border:"none",borderRadius:"6px",padding:"0.35rem 0.6rem",cursor:"pointer",color:"#10B981",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.7rem",fontWeight:500},"data-testid":`button-share-video-${m.video.id}`,title:"Share video",children:[r.jsx(hv,{size:12}),"Share"]})]})]})]})})]},b)),s&&r.jsx("span",{style:{fontSize:"0.75rem",opacity:.5,display:"block",marginTop:"0.5rem"},children:mNe(n)}),o&&r.jsx(Ll,{videoId:o.videoId,title:o.title,instructor:o.instructor,startTime:o.startTime,onClose:()=>l(null)}),u&&r.jsx(m2,{videoId:u,onClose:()=>f(null)})]})]})}function yNe({onTranscriptionComplete:e,disabled:t}){const[n,s]=x.useState(!1),[i,a]=x.useState(!1),[o,l]=x.useState([0,0,0,0,0,0,0,0]),[c,d]=x.useState(0),u=x.useRef(null),f=x.useRef([]),h=x.useRef(null),p=x.useRef(null),v=x.useRef(null),g=x.useRef(null),y=x.useRef(null),j=()=>{g.current&&(cancelAnimationFrame(g.current),g.current=null),y.current&&(clearInterval(y.current),y.current=null),h.current&&(h.current.getTracks().forEach(S=>S.stop()),h.current=null),p.current&&(p.current.close().catch(console.error),p.current=null),v.current=null,l([0,0,0,0,0,0,0,0])};x.useEffect(()=>()=>{j()},[]);const m=async()=>{try{const S=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:16e3}});h.current=S,f.current=[],d(0);const k=new AudioContext;p.current=k;const P=k.createMediaStreamSource(S),E=k.createAnalyser();E.fftSize=32,P.connect(E),v.current=E;const _=()=>{if(!v.current)return;const T=new Uint8Array(v.current.frequencyBinCount);v.current.getByteFrequencyData(T);const M=Array.from(T.slice(0,8)).map(O=>O/255*100);l(M),g.current=requestAnimationFrame(_)};_(),y.current=setInterval(()=>{d(T=>T+1)},1e3);const F=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm",A=new MediaRecorder(S,{mimeType:F});u.current=A,A.ondataavailable=T=>{T.data.size>0&&f.current.push(T.data)},A.onstop=async()=>{const T=[...f.current];if(j(),T.length>0){const M=new Blob(T,{type:F});await N(M)}},A.start(100),s(!0)}catch(S){console.error("Error starting recording:",S),alert("Could not access microphone. Please check permissions.")}},b=()=>{u.current&&n&&(u.current.stop(),s(!1))},N=async S=>{a(!0);try{const k=new FormData;k.append("audio",S,"recording.webm");const P=Zt("/api/voice/transcribe"),E=await rv(),_={};E&&(_.Authorization=`Bearer ${E}`);const F=await fetch(P,{method:"POST",headers:_,credentials:"include",body:k});if(!F.ok)throw new Error(`Transcription failed: ${F.status}`);const A=await F.json();A.text&&A.text.trim()&&(e==null||e(A.text.trim()))}catch(k){console.error("Transcription error:",k)}finally{a(!1),d(0)}},w=S=>{const k=Math.floor(S/60),P=S%60;return`${k}:${P.toString().padStart(2,"0")}`};return i?r.jsx("div",{className:"mobile-voice-recorder","data-testid":"voice-transcribing",children:r.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[r.jsx(De,{className:"animate-spin",size:20,color:"var(--mobile-primary)"}),r.jsx("span",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)"},children:"Transcribing..."})]})}):n?r.jsx("div",{className:"mobile-voice-recorder","data-testid":"voice-recorder",children:r.jsxs("div",{className:"flex items-center gap-3 w-full",children:[r.jsx("button",{onClick:b,className:"mobile-btn-icon recording-pulse",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--mobile-error-red)"},"data-testid":"button-stop-recording",children:r.jsx(QI,{size:18,fill:"currentColor"})}),r.jsx("div",{className:"mobile-voice-wave flex-1",children:o.map((S,k)=>r.jsx("div",{className:"mobile-voice-bar",style:{height:`${Math.max(15,S)}%`}},k))}),r.jsx("span",{style:{fontSize:"0.875rem",color:"var(--mobile-error-red)",fontFamily:"monospace",minWidth:"40px"},children:w(c)})]})}):r.jsx("button",{onClick:m,disabled:t,className:"mobile-btn-icon",style:{opacity:t?.5:1},"data-testid":"button-start-recording",children:r.jsx(mN,{size:20})})}function XL(){const e=localStorage.getItem("sessionToken")||localStorage.getItem("token"),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t}async function bNe(){const e=await rv(),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t}async function fO(e,t=20,n=null){var s;try{let i=Zt(`/api/ai/chat/history/${e}?limit=${t}`);n&&(i+=`&before=${encodeURIComponent(n)}`),console.log("[API] getChatHistory URL:",i,"before:",n||"none");const a=await bNe(),o=await fetch(i,{headers:a,credentials:"include"});if(o.status===401)return console.error("[API] getChatHistory 401 - auth invalid"),{messages:[],hasMore:!1,authError:!0};if(!o.ok)throw console.error("[API] getChatHistory error:",o.status,o.statusText),new Error("Failed to get history");const l=await o.json();return console.log("[API] getChatHistory response:",{hasData:!!l,messageCount:((s=l==null?void 0:l.messages)==null?void 0:s.length)||0}),{messages:Array.isArray(l==null?void 0:l.messages)?l.messages:[],hasMore:(l==null?void 0:l.hasMore)||!1}}catch(i){return console.error("History API error:",i),{messages:[],hasMore:!1}}}async function jNe(e){try{const t=await fetch(Zt(`/api/ai/saved-videos/${e}`),{headers:XL(),credentials:"include"});if(!t.ok)throw new Error("Failed to get saved videos");return await t.json()}catch(t){return console.error("Saved videos API error:",t),{videos:[]}}}async function wNe(e,t){try{const n=await fetch(Zt(`/api/ai/saved-videos/${t}`),{method:"DELETE",headers:XL(),credentials:"include",body:JSON.stringify({userId:e})});if(!n.ok)throw new Error("Failed to unsave video");return await n.json()}catch(n){throw console.error("Unsave video API error:",n),n}}function ZL(){var U;const e=PN(),t=e.messages.map(L=>({id:L.id,sender:L.role==="user"?"user":"assistant",message:L.content,timestamp:new Date(L.timestamp),videos:[]})),[n,s]=x.useState(""),[i,a]=x.useState(!1),[o,l]=x.useState(()=>!e.historyLoaded),[c,d]=x.useState(()=>{try{const L=sessionStorage.getItem("bjjos_chat_loaded_user_id");return L&&L!=="none"?L:null}catch{return null}}),[u,f]=x.useState(()=>{try{return sessionStorage.getItem("bjjos_welcome_shown")==="true"}catch{return!1}}),h=L=>{d(L);try{L&&L!=="none"?sessionStorage.setItem("bjjos_chat_loaded_user_id",L):sessionStorage.removeItem("bjjos_chat_loaded_user_id"),L&&(sessionStorage.setItem("bjjos_welcome_shown","true"),f(!0))}catch{}},[p,v]=x.useState(!0),[g,y]=x.useState(!1),[j,m]=x.useState(null),[b,N]=x.useState(!0),[w,S]=x.useState(null),[k,P]=x.useState(0),E=x.useRef(null),_=x.useRef(null),F=x.useRef(null),A=x.useRef(null),T=x.useRef(null);x.useEffect(()=>{if(!tn.isNativePlatform())return;const L=window.visualViewport;if(!L)return;const z=()=>{const Ne=window.innerHeight-L.height;console.log("[KEYBOARD] VisualViewport offset:",Ne),P(Ne>50?Ne:0),Ne>50&&T.current&&setTimeout(()=>{var le;(le=T.current)==null||le.scrollIntoView({behavior:"smooth",block:"end"})},100)};return L.addEventListener("resize",z),L.addEventListener("scroll",z),()=>{L.removeEventListener("resize",z),L.removeEventListener("scroll",z)}},[]);const{data:M,isLoading:O,error:C}=pe({queryKey:["/api/auth/me"],retry:!1});x.useEffect(()=>{C&&String(C).includes("401")&&(console.error("[MOBILE-CHAT] 401 auth error, clearing auth and redirecting to login"),or(async()=>{const{clearAuth:L,isNativeApp:z}=await Promise.resolve().then(()=>Mf);return{clearAuth:L,isNativeApp:z}},void 0).then(({clearAuth:L,isNativeApp:z})=>{L().then(()=>{z()?window.location.href="/ios-login":window.location.href="/login"})}))},[C]);const R=((U=M==null?void 0:M.id)==null?void 0:U.toString())||localStorage.getItem("mobileUserId")||"1",I=["Analyzing your question...","Searching training database...","Finding relevant techniques...","Formulating response..."],B=()=>{H();let L=0;S(I[0]),E.current=setInterval(()=>{L=(L+1)%I.length,S(I[L])},2e3)},H=()=>{E.current&&(clearInterval(E.current),E.current=null),S(null)};x.useEffect(()=>()=>{E.current&&clearInterval(E.current)},[]);const Q=e.messages.length,D=e.historyLoaded;x.useEffect(()=>{if(!o||D)return;const L=setTimeout(()=>{console.warn("[CHAT] Emergency timeout - forcing chat to load"),l(!1),e.setHistoryLoaded(!0),Q===0&&e.addMessage({id:"timeout-welcome",role:"assistant",content:`Hey! I'm Professor OS.

I've broken down thousands of videos from the best - Danaher, Lachlan, Gordon, Marcelo, and hundreds more. Every recommendation comes with full analysis: key details, timestamps, what to focus on. Tap "Analysis" to see my breakdown, Save videos to your library, or Share them with training partners.

Here's what makes me different: I remember everything. Every technique you're working on, every problem you mention, every win you share. The more we train together, the sharper I get.

What are you working on right now?`,timestamp:new Date().toISOString()})},1e4);return()=>clearTimeout(L)},[o,D]);const te=L=>{var z;(z=_.current)==null||z.scrollIntoView({behavior:L?"instant":"smooth"})};x.useEffect(()=>{b&&te()},[t.length,i,b]),x.useEffect(()=>{const L=()=>{document.visibilityState==="visible"&&t.length>0&&requestAnimationFrame(()=>te(!0))},z=()=>{t.length>0&&requestAnimationFrame(()=>te(!0))},Ne=()=>{t.length>0&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{te(!0)})})};return document.addEventListener("visibilitychange",L),window.addEventListener("focus",z),window.addEventListener("ios-chat-return",Ne),t.length>0&&requestAnimationFrame(()=>te(!0)),()=>{document.removeEventListener("visibilitychange",L),window.removeEventListener("focus",z),window.removeEventListener("ios-chat-return",Ne)}},[t.length]),x.useEffect(()=>{var Ne;const L=(Ne=M==null?void 0:M.id)==null?void 0:Ne.toString(),z=localStorage.getItem("mobileUserId");if(L&&L!==c){V(L),h(L);return}if(!O&&!M&&c===null){z&&z!=="1"?(V(z),h(z)):(e.addMessage({id:"0",role:"assistant",content:`Hey! I'm Professor OS.

I've broken down thousands of videos from the best - Danaher, Lachlan, Gordon, Marcelo, and hundreds more. Every recommendation comes with full analysis: key details, timestamps, what to focus on. Tap "Analysis" to see my breakdown, Save videos to your library, or Share them with training partners.

Here's what makes me different: I remember everything. Every technique you're working on, every problem you mention, every win you share. The more we train together, the sharper I get.

What are you working on right now?`,timestamp:new Date().toISOString()}),l(!1),h("none"),e.setHistoryLoaded(!0));return}O&&c===null&&z&&z!=="1"&&(V(z),h(z))},[M,O,c]);const V=async L=>{console.log("[HISTORY] Loading for user:",L);try{const z=await fO(L);if(z.authError){console.error("[HISTORY] Auth error - redirecting to login"),or(async()=>{const{clearAuth:Ne,isNativeApp:le}=await Promise.resolve().then(()=>Mf);return{clearAuth:Ne,isNativeApp:le}},void 0).then(({clearAuth:Ne,isNativeApp:le})=>{Ne().then(()=>{le()?window.location.href="/ios-login":window.location.href="/login"})});return}if(z.messages&&z.messages.length>0){const Ne=z.messages.map((Fe,ht)=>({id:Fe.id||String(ht),role:Fe.role==="user"||Fe.sender==="user"?"user":"assistant",content:Fe.content||Fe.message||"",timestamp:new Date(Fe.createdAt||Fe.timestamp).toISOString()})),le=["Welcome back! Ready to pick up where we left off?","Good to see you again. What are we working on today?","Back on the mats? Let's get after it.","Ready when you are. What's on your mind?","Let's build on what we covered last time. What's up?","Back for more? I like that. What do you need?","The grind continues. What can I help with?","Another day, another chance to level up. What's the focus?","Consistency wins. What are we sharpening today?","You keep showing up. That's how black belts are made. What's on your mind?","Oss! What technique is giving you trouble?","How were the rolls? What do we need to fix?","Did you get any taps since we last talked?","Who gave you problems today? Let's solve it.","Ready to add another weapon to your game?","Back already? Your training partners are in trouble.","Let me guess - someone passed your guard again?","Missed me? I've been studying more tape. What do you need?","I was just reviewing some Danaher. Perfect timing.","No rest days from learning. What's up?","Every session counts. Let's make this one matter.","Small improvements, big results. What are we working on?","Future you will thank present you. What's the focus today?","Trust the process. What do you need help with?","What happened in training? Tell me everything.","Any breakthroughs since last time?","What's been stuck in your head since we last talked?","Something specific bring you back, or just here to learn?"],Ae=le[Math.floor(Math.random()*le.length)],Ke={id:"welcome-back-"+Date.now(),role:"assistant",content:Ae,timestamp:new Date().toISOString()};e.setMessages([...Ne,Ke]),Ne.length>0&&m(Ne[0].timestamp),v(z.hasMore??!1)}else e.addMessage({id:"welcome",role:"assistant",content:`Hey! I'm Professor OS.

I've broken down thousands of videos from the best - Danaher, Lachlan, Gordon, Marcelo, and hundreds more. Every recommendation comes with full analysis: key details, timestamps, what to focus on. Tap "Analysis" to see my breakdown, Save videos to your library, or Share them with training partners.

Here's what makes me different: I remember everything. Every technique you're working on, every problem you mention, every win you share. The more we train together, the sharper I get.

What are you working on right now?`,timestamp:new Date().toISOString()});e.setHistoryLoaded(!0),l(!1),requestAnimationFrame(()=>te(!0))}catch(z){console.error("[HISTORY] Failed to load:",z),e.addMessage({id:"error-welcome",role:"assistant",content:`Hey! I'm Professor OS.

I've broken down thousands of videos from the best - Danaher, Lachlan, Gordon, Marcelo, and hundreds more. Every recommendation comes with full analysis: key details, timestamps, what to focus on. Tap "Analysis" to see my breakdown, Save videos to your library, or Share them with training partners.

Here's what makes me different: I remember everything. Every technique you're working on, every problem you mention, every win you share. The more we train together, the sharper I get.

What are you working on right now?`,timestamp:new Date().toISOString()}),e.setHistoryLoaded(!0),l(!1)}},J=async()=>{if(g||!p||!j)return;y(!0);const L=F.current,z=(L==null?void 0:L.scrollHeight)||0;try{const Ne=await fO(R,30,j);if(Ne.messages&&Ne.messages.length>0){const le=Ne.messages.map((Fe,ht)=>({id:Fe.id||`older-${ht}-${Date.now()}`,role:Fe.role==="user"||Fe.sender==="user"?"user":"assistant",content:Fe.content||Fe.message||"",timestamp:new Date(Fe.createdAt||Fe.timestamp).toISOString()}));le.length>0&&m(le[0].timestamp);const Ae=new Set(e.messages.map(Fe=>Fe.id)),Ke=le.filter(Fe=>!Ae.has(Fe.id));e.setMessages([...Ke,...e.messages]),v(Ne.hasMore??!1),requestAnimationFrame(()=>{if(L){const Fe=L.scrollHeight;L.scrollTop=Fe-z}})}else v(!1)}catch(Ne){console.error("[LOAD-MORE] Failed:",Ne)}finally{y(!1)}},me=async(L=n)=>{var Ae,Ke,Fe,ht,nt;const z=String(L||"").trim();if(!z||i)return;N(!0),oe("light");const Ne=Date.now().toString();e.addMessage({id:Ne,role:"user",content:z,timestamp:new Date().toISOString()}),s(""),a(!0),B();const le=(Date.now()+1).toString();e.addMessage({id:le,role:"assistant",content:"",timestamp:new Date().toISOString()}),console.log("Added assistant placeholder to context:",le);try{const pt=Zt("/api/ai/chat/claude/stream"),Ot=await rv();console.log("[CHAT DEBUG] Stream URL:",pt),console.log("[CHAT DEBUG] Auth token exists:",!!Ot),console.log("[CHAT DEBUG] User ID:",R);const $={"Content-Type":"application/json"};Ot&&($.Authorization=`Bearer ${Ot}`),console.log("[CHAT DEBUG] Sending request...");const Y=await fetch(pt,{method:"POST",headers:$,credentials:"include",body:JSON.stringify({message:z,userId:R})});if(console.log("[CHAT DEBUG] Response status:",Y.status),console.log("[CHAT DEBUG] Response ok:",Y.ok),!Y.ok){let We="";try{const _t=await Y.json();We=_t.error||JSON.stringify(_t),console.error("[CHAT DEBUG] Error response body:",We)}catch{We=Y.statusText}throw new Error(`Request failed (${Y.status}): ${We}`)}const ie=(Ae=Y.body)==null?void 0:Ae.getReader(),be=new TextDecoder;let ye="",ge="",Pe=!1;if(ie)for(;;){const{done:We,value:_t}=await ie.read();if(We)break;ge+=be.decode(_t,{stream:!0});const nn=ge.split(`
`);ge=nn.pop()||"";for(const Na of nn)if(Na.startsWith("data: ")){const Zn=Na.slice(6);if(Zn==="[DONE]"){Pe=!0,H(),a(!1),oe("light");break}try{const Jt=JSON.parse(Zn);if(Jt.error){console.error("[SSE] Server error:",Jt.error),H(),e.updateMessage(le,{content:"I had trouble with that message. Could you try rephrasing?"}),a(!1),Pe=!0;break}if(Jt.chunk||Jt.content){const he=Jt.chunk||Jt.content;ye+=he,H(),e.updateMessage(le,{content:ye})}else Jt.processedContent?(console.log("[MOBILE-CHAT] Received processed content with video tokens"),H(),ye=Jt.processedContent,e.updateMessage(le,{content:Jt.processedContent})):Jt.done&&console.log("[MOBILE-CHAT] Stream complete signal")}catch{}}if(Pe)break}a(!1)}catch(pt){console.error("[MOBILE-CHAT] Failed to send:",pt),console.error("[MOBILE-CHAT] Error name:",pt.name),console.error("[MOBILE-CHAT] Error message:",pt.message),console.error("[MOBILE-CHAT] Error stack:",pt.stack),H(),a(!1);let Ot="Sorry, I'm having trouble right now. Please try again!";(Ke=pt.message)!=null&&Ke.includes("401")?Ot="Your session has expired. Please log out and log back in.":(Fe=pt.message)!=null&&Fe.includes("network")||(ht=pt.message)!=null&&ht.includes("fetch")?Ot="Connection issue. Please check your internet and try again.":(nt=pt.message)!=null&&nt.includes("timeout")&&(Ot="Request timed out. Please try again in a moment."),e.updateMessage(le,{content:Ot})}finally{H(),console.log("=== HANDLE SEND COMPLETE ===")}},de=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),me())},ve=L=>{var z;L&&(s(L),(z=A.current)==null||z.focus())};return o||!e.historyLoaded?r.jsx("div",{className:"mobile-chat-container",children:r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:r.jsx("div",{style:{fontSize:"2rem",animation:"spin 1s linear infinite"},children:""})})}):r.jsxs("div",{className:"mobile-chat-container",style:{display:"flex",flexDirection:"column",height:"100%"},children:[r.jsx("div",{className:"mobile-chat-header mobile-safe-area-top",style:{flexShrink:0},children:r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",marginBottom:"0.25rem"},children:"Prof. OS"}),r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)"},children:"Your Training Partner"})]})}),r.jsxs("div",{className:"mobile-chat-messages",ref:F,onScroll:L=>{L.currentTarget.scrollTop<100&&p&&!g&&J()},style:{flex:1,overflowY:"auto",paddingBottom:20},children:[g&&r.jsxs("div",{style:{textAlign:"center",padding:"12px",color:"var(--mobile-text-secondary)"},children:[r.jsx("span",{style:{animation:"spin 1s linear infinite",display:"inline-block"},children:""})," Loading older messages..."]}),!p&&t.length>20&&r.jsx("div",{style:{textAlign:"center",padding:"12px",color:"var(--mobile-text-secondary)",fontSize:"0.75rem"},children:"Beginning of conversation"}),t.map((L,z)=>{const Ne=z>0?t[z-1]:null,le=gNe(L.timestamp,(Ne==null?void 0:Ne.timestamp)??void 0);return r.jsxs("div",{children:[le&&r.jsx("div",{style:{textAlign:"center",padding:"16px 0 8px",color:"var(--mobile-text-secondary)",fontSize:"0.75rem",fontWeight:500},children:pNe(L.timestamp)}),r.jsx(vNe,{sender:L.sender,message:L.message,timestamp:L.timestamp,videos:L.videos,isLastMessage:z===t.length-1})]},L.id)}),i&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",background:"var(--mobile-card-bg)",borderRadius:"16px",maxWidth:"80%"},children:[r.jsxs("div",{style:{display:"flex",gap:"4px"},children:[r.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--mobile-primary)",animation:"pulse 1.4s ease-in-out infinite"}}),r.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--mobile-primary)",animation:"pulse 1.4s ease-in-out infinite 0.2s"}}),r.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--mobile-primary)",animation:"pulse 1.4s ease-in-out infinite 0.4s"}})]}),w&&r.jsx("span",{style:{fontSize:"14px",color:"var(--mobile-text-secondary)",marginLeft:"8px"},children:w})]}),r.jsx("div",{ref:_})]}),r.jsx("div",{ref:T,className:"mobile-chat-input-container mobile-safe-area-bottom",style:{flexShrink:0,background:"#0A0A0B",borderTop:"1px solid var(--mobile-border)",paddingBottom:k>0?`${k+12}px`:"calc(12px + env(safe-area-inset-bottom, 0px))",transition:"padding-bottom 0.25s ease-out"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px",padding:"12px 16px"},children:[r.jsx(yNe,{onTranscriptionComplete:ve,disabled:i}),r.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",background:"#111113",borderRadius:"24px",padding:"12px 16px",minHeight:"48px",maxHeight:"150px",border:"1px solid #333333"},children:r.jsx("textarea",{ref:A,value:n,onChange:L=>{s(L.target.value);const z=L.target;z.style.height="auto";const Ne=Math.min(z.scrollHeight,120);z.style.height=Ne+"px"},onKeyPress:de,placeholder:"Ask Professor OS...",disabled:i,"data-testid":"input-chat-message",style:{width:"100%",border:"none",background:"transparent",color:"var(--mobile-text-primary)",fontSize:"1rem",resize:"none",outline:"none",maxHeight:"120px",minHeight:"24px",lineHeight:"1.4",overflowY:"auto",overflowX:"hidden"},rows:1})}),r.jsx("button",{onClick:()=>me(),disabled:!n.trim()||i,"data-testid":"button-send-message",style:{width:"44px",height:"44px",borderRadius:"50%",border:"none",background:n.trim()&&!i?"#2563EB":"#333333",color:n.trim()&&!i?"white":"#6B7280",display:"flex",alignItems:"center",justifyContent:"center",cursor:n.trim()&&!i?"pointer":"default",transition:"all 0.2s ease",flexShrink:0,boxShadow:n.trim()&&!i?"0 4px 12px rgba(139, 92, 246, 0.4)":"none"},children:r.jsx(zf,{size:20})})]})})]})}function Pl(){const[e]=it(),t=[{path:"/chat",icon:Bf,label:"Chat"},{path:"/library",icon:yl,label:"Videos"},{path:"/saved-videos",icon:ps,label:"Saved"},{path:"/settings",icon:Co,label:"Settings"}],n=()=>{oe("light")};return r.jsx("nav",{className:"mobile-bottom-nav mobile-safe-area-bottom",children:t.map(s=>{const i=s.icon,a=e===s.path;return r.jsxs(sn,{href:s.path,className:`mobile-bottom-nav-item ${a?"active":""}`,"data-testid":`nav-${s.label.toLowerCase()}`,onClick:n,children:[r.jsx(i,{className:"w-6 h-6"}),r.jsx("span",{children:s.label})]},s.path)})})}console.log(" MOBILE coach loaded - WRONG if you see this in iOS app");function hO(){return r.jsx("div",{className:"mobile-app",children:r.jsxs("div",{className:"mobile-container",children:[r.jsx(ZL,{}),r.jsx(Pl,{})]})})}function NNe({videoId:e,title:t,thumbnail:n,instructor:s,duration:i,onSave:a,onPlay:o}){const[l,c]=x.useState(!1),d=u=>{u.stopPropagation(),c(!l),a==null||a()};return r.jsxs("div",{className:"mobile-video-card",onClick:o,"data-testid":`video-card-${e}`,children:[r.jsxs("div",{style:{position:"relative"},children:[r.jsx("img",{src:n,alt:t,className:"mobile-video-thumbnail"}),r.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.6)",borderRadius:"50%",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Rr,{fill:"white",color:"white",size:24})}),i&&i!=="0:00"&&i!=="0:0"&&r.jsx("div",{style:{position:"absolute",bottom:"0.5rem",right:"0.5rem",background:"rgba(0, 0, 0, 0.85)",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:500,color:"#FFFFFF"},children:i})]}),r.jsxs("div",{className:"mobile-video-info",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[r.jsx("h3",{className:"mobile-video-title",children:t}),r.jsx("button",{onClick:d,className:"mobile-btn-icon",style:{flexShrink:0},"data-testid":`save-video-${e}`,children:r.jsx(ps,{fill:l?"var(--mobile-primary-purple)":"none"})})]}),r.jsx("p",{className:"mobile-video-meta",children:s})]})]})}const SNe=["All","Submissions","Passes","Sweeps","Escapes","Takedowns","Guard Retention","Position Control","Other"];function kNe(){const[e,t]=x.useState(""),[n,s]=x.useState("All"),[i,a]=x.useState("All"),[o,l]=x.useState([]),[c,d]=x.useState(!0),[u,f]=x.useState(null),h=localStorage.getItem("mobileUserId")||"1";x.useEffect(()=>{p()},[]);const p=async()=>{try{const b=(await jNe(h)).videos.map(N=>({id:N.id,title:N.title,thumbnail:N.thumbnailUrl||(N.videoUrl?`https://img.youtube.com/vi/${v(N.videoUrl)}/mqdefault.jpg`:""),instructor:N.instructor||N.instructorName||"Unknown",duration:N.duration||"",category:N.category||"other",savedDate:N.savedDate,note:N.note,videoUrl:N.videoUrl}));l(b)}catch(m){console.error("Failed to load saved videos:",m),l([])}finally{d(!1)}},v=m=>{if(!m)return"";const b=m.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);return b?b[1]:""},g=async m=>{try{await wNe(h,m),l(b=>b.filter(N=>N.id!==m))}catch(b){console.error("Failed to unsave video:",b),alert("Failed to remove video")}},y=["All",...new Set(o.map(m=>m.instructor).filter(Boolean))],j=o.filter(m=>{var S,k,P;const b=m.title.toLowerCase().includes(e.toLowerCase())||((S=m.instructor)==null?void 0:S.toLowerCase().includes(e.toLowerCase())),N=n==="All"||((k=m.category)==null?void 0:k.toLowerCase())===n.toLowerCase(),w=i==="All"||((P=m.instructor)==null?void 0:P.toLowerCase())===i.toLowerCase();return b&&N&&w});return c?r.jsxs("div",{className:"mobile-app",children:[r.jsx("div",{className:"mobile-container",children:r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:r.jsx("div",{style:{fontSize:"2rem",animation:"spin 1s linear infinite"},children:""})})}),r.jsx(Pl,{})]}):r.jsx("div",{className:"mobile-app",children:r.jsxs("div",{className:"mobile-container",children:[r.jsxs("div",{style:{flex:1,overflowY:"auto",paddingBottom:"80px"},children:[r.jsx("div",{className:"mobile-chat-header mobile-safe-area-top",style:{position:"sticky",top:0,zIndex:10},children:r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",marginBottom:"0.25rem"},children:"Saved Videos"}),r.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)"},children:[o.length," videos saved"]})]})}),r.jsx("div",{style:{padding:"1rem"},children:r.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",background:"var(--mobile-medium-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",padding:"0.75rem 1rem",gap:"0.75rem"},children:[r.jsx(Nr,{size:18,color:"var(--mobile-text-secondary)"}),r.jsx("input",{type:"text",placeholder:"Search saved videos...",value:e,onChange:m=>t(m.target.value),"data-testid":"input-search-videos",style:{flex:1,background:"transparent",border:"none",color:"var(--mobile-text-primary)",fontSize:"1rem",outline:"none"}}),e&&r.jsx("button",{onClick:()=>t(""),"data-testid":"button-clear-search",style:{background:"transparent",border:"none",color:"var(--mobile-text-secondary)",padding:"0.25rem",cursor:"pointer"},children:r.jsx(ys,{size:18})})]})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",padding:"0 1rem 1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem",fontWeight:"600"},children:"Category"}),r.jsx("select",{value:n,onChange:m=>s(m.target.value),"data-testid":"select-category-filter",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-medium-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:SNe.map(m=>r.jsx("option",{value:m,children:m},m))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem",fontWeight:"600"},children:"Instructor"}),r.jsx("select",{value:i,onChange:m=>a(m.target.value),"data-testid":"select-instructor-filter",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-medium-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:y.map(m=>r.jsx("option",{value:m,children:m},m))})]})]}),r.jsxs("div",{style:{padding:"0 1rem 0.75rem",fontSize:"0.75rem",color:"var(--mobile-text-secondary)"},children:["Showing ",j.length," of ",o.length," videos"]}),j.length===0?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",textAlign:"center",gap:"1rem"},children:[r.jsx(ps,{size:48,color:"var(--mobile-text-tertiary)"}),r.jsx("h3",{style:{color:"var(--mobile-text-secondary)"},children:e||n!=="All"||i!=="All"?"No videos found":"No saved videos yet"}),r.jsx("p",{style:{color:"var(--mobile-text-tertiary)",fontSize:"0.875rem"},children:e||n!=="All"||i!=="All"?"Try adjusting your search or filters":"Save videos from Prof. OS to watch later"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",padding:"0 1rem 1rem"},children:j.map(m=>r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[r.jsx(NNe,{videoId:m.id,title:m.title,thumbnail:m.thumbnail,instructor:m.instructor,duration:m.duration,onPlay:()=>{const b=v(m.videoUrl);b?f({videoId:b,title:m.title,instructor:m.instructor}):console.error("No valid YouTube URL for video:",m.id)},onSave:()=>g(m.id)}),m.note&&r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)",fontStyle:"italic",padding:"0.5rem 0.75rem",background:"var(--mobile-dark-gray)",borderLeft:"3px solid var(--mobile-primary-purple)",borderRadius:"var(--mobile-radius-sm)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(sd,{size:14,color:"var(--mobile-primary-purple)"}),r.jsxs("span",{children:['"',m.note,'"']})]}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--mobile-text-tertiary)",paddingLeft:"0.75rem"},children:["Saved ",m.savedDate]})]},m.id))})]}),r.jsx(Pl,{}),u&&r.jsx(Ll,{videoId:u.videoId,title:u.title,instructor:u.instructor,onClose:()=>f(null)})]})})}console.log(" MOBILE settings loaded - WRONG if you see this in iOS app");function mO(){it();const[e,t]=x.useState(""),{data:n}=pe({queryKey:["/api/auth/me"]}),{data:s,isLoading:i}=pe({queryKey:["/api/auth/profile"],enabled:!!n}),[a,o]=x.useState({username:"",displayName:"",name:"",beltLevel:"white",style:"both",age:"",weight:"",gym:"",timezone:"America/New_York",weeklyRecapEnabled:!0});x.useEffect(()=>{s&&o({username:s.username||"",displayName:s.displayName||"",name:s.name||"",beltLevel:s.beltLevel||"white",style:s.style||"both",age:s.age||"",weight:s.weight||"",gym:s.gym||"",timezone:s.timezone||"America/New_York",weeklyRecapEnabled:s.weeklyRecapEnabled??!0})},[s]);const l=qe({mutationFn:async d=>await lt("PATCH","/api/auth/profile",d),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/auth/profile"]}),_e.invalidateQueries({queryKey:["/api/auth/me"]}),t("saved"),setTimeout(()=>t(""),2e3)},onError:d=>{t("error"),console.error("Update error:",d),setTimeout(()=>t(""),3e3)}}),c=()=>{l.mutate(a)};return i?r.jsx("div",{className:"mobile-app",children:r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--mobile-dark-bg)"},children:r.jsx(De,{className:"w-8 h-8 animate-spin",color:"var(--mobile-text-primary)"})})}):r.jsx("div",{className:"mobile-app",children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"var(--mobile-dark-bg)",color:"var(--mobile-text-primary)",paddingBottom:"var(--mobile-bottom-nav-height)",overflow:"hidden"},children:[r.jsx("div",{style:{position:"sticky",top:0,zIndex:10,background:"var(--mobile-dark-bg)",borderBottom:"1px solid var(--mobile-border-gray)",padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--mobile-text-primary)"},children:"Settings"}),r.jsx("button",{onClick:c,disabled:l.isPending,"data-testid":"button-save",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:e==="saved"?"var(--mobile-success)":"var(--mobile-primary)",color:"white",border:"none",borderRadius:"var(--mobile-radius-md)",fontSize:"0.875rem",fontWeight:"var(--mobile-font-medium)",cursor:l.isPending?"not-allowed":"pointer",opacity:l.isPending?.6:1},children:l.isPending?r.jsxs(r.Fragment,{children:[r.jsx(De,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e==="saved"?" Saved":r.jsxs(r.Fragment,{children:[r.jsx(YI,{className:"w-4 h-4"}),"Save"]})})]})}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[r.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[r.jsx(Co,{size:20,color:"var(--mobile-primary)"}),r.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"var(--mobile-font-semibold)",color:"var(--mobile-text-primary)"},children:"Profile"})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Username *"}),r.jsx("input",{type:"text",value:a.username,onChange:d=>o({...a,username:d.target.value}),"data-testid":"input-username",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Display Name"}),r.jsx("input",{type:"text",value:a.displayName,onChange:d=>o({...a,displayName:d.target.value}),"data-testid":"input-display-name",placeholder:"John Smith",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Full Name"}),r.jsx("input",{type:"text",value:a.name,onChange:d=>o({...a,name:d.target.value}),"data-testid":"input-name",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]})]})]}),r.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[r.jsx(uv,{size:20,color:"var(--mobile-primary)"}),r.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"var(--mobile-font-semibold)",color:"var(--mobile-text-primary)"},children:"Training"})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Belt Level *"}),r.jsx("select",{value:a.beltLevel,onChange:d=>o({...a,beltLevel:d.target.value}),"data-testid":"select-belt-level",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:["white","blue","purple","brown","black"].map(d=>r.jsxs("option",{value:d,children:[d.charAt(0).toUpperCase()+d.slice(1)," Belt"]},d))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Training Style *"}),r.jsxs("select",{value:a.style,onChange:d=>o({...a,style:d.target.value}),"data-testid":"select-style",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:[r.jsx("option",{value:"gi",children:"Gi Only"}),r.jsx("option",{value:"nogi",children:"No-Gi Only"}),r.jsx("option",{value:"both",children:"Both Gi & No-Gi"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Age"}),r.jsx("input",{type:"text",value:a.age,onChange:d=>o({...a,age:d.target.value}),"data-testid":"input-age",placeholder:"25",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Weight (lbs)"}),r.jsx("input",{type:"text",value:a.weight,onChange:d=>o({...a,weight:d.target.value}),"data-testid":"input-weight",placeholder:"170",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Gym/Academy"}),r.jsx("input",{type:"text",value:a.gym,onChange:d=>o({...a,gym:d.target.value}),"data-testid":"input-gym",placeholder:"Gracie Barra",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"}})]})]})]}),r.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1rem"},children:[r.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"var(--mobile-font-semibold)",color:"var(--mobile-text-primary)",marginBottom:"1rem"},children:"Preferences"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:"Timezone"}),r.jsxs("select",{value:a.timezone,onChange:d=>o({...a,timezone:d.target.value}),"data-testid":"select-timezone",style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",outline:"none"},children:[r.jsx("option",{value:"America/New_York",children:"Eastern (ET)"}),r.jsx("option",{value:"America/Chicago",children:"Central (CT)"}),r.jsx("option",{value:"America/Denver",children:"Mountain (MT)"}),r.jsx("option",{value:"America/Los_Angeles",children:"Pacific (PT)"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"var(--mobile-font-medium)",color:"var(--mobile-text-primary)"},children:"Weekly Recap Emails"}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--mobile-text-tertiary)",marginTop:"0.25rem"},children:"Receive weekly progress summaries"})]}),r.jsx("input",{type:"checkbox",checked:a.weeklyRecapEnabled,onChange:d=>o({...a,weeklyRecapEnabled:d.target.checked}),"data-testid":"toggle-weekly-recap",style:{width:"3rem",height:"1.5rem",cursor:"pointer"}})]})]})]})]})}),r.jsx(Pl,{})]})})}function CNe(){var l;const e=localStorage.getItem("mobileUserId")||"1",{data:t,isLoading:n}=pe({queryKey:["/api/users",e]});if(n)return r.jsx("div",{className:"mobile-app",children:r.jsxs("div",{className:"mobile-container",children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"calc(100vh - 60px)",background:"var(--mobile-bg-primary)"},children:r.jsx("div",{style:{fontSize:"1.5rem",color:"var(--mobile-text-primary)"},children:"Loading..."})}),r.jsx(Pl,{})]})});const s=t!=null&&t.createdAt?br(new Date(t.createdAt),"MMMM d, yyyy"):"Unknown",i=(t==null?void 0:t.totalLogins)||0,a=(t==null?void 0:t.currentStreak)||0,o=(t==null?void 0:t.beltLevel)||"blue";return r.jsx("div",{className:"mobile-app",children:r.jsxs("div",{className:"mobile-container",children:[r.jsx("div",{style:{minHeight:"calc(100vh - 60px)",background:"var(--mobile-bg-primary)",overflowY:"auto"},children:r.jsxs("div",{className:"mobile-safe-area-top",style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[r.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1.5rem",color:"var(--mobile-text-primary)"},children:"Your Progress"}),r.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"},children:r.jsx(Gd,{rank:o,size:"large"})}),r.jsxs("p",{style:{color:"var(--mobile-text-secondary)",fontSize:"1.125rem"},children:[o.charAt(0).toUpperCase()+o.slice(1)," Belt"]})]}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{background:"var(--mobile-surface)",border:"1px solid var(--mobile-border)",borderRadius:"0.75rem",padding:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--mobile-text-secondary)"},children:"Member Since"}),r.jsx(dv,{size:16,style:{color:"var(--mobile-text-secondary)"}})]}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--mobile-text-primary)"},children:s}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginTop:"0.25rem"},children:"Your journey began"})]}),r.jsxs("div",{style:{background:"var(--mobile-surface)",border:"1px solid var(--mobile-border)",borderRadius:"0.75rem",padding:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--mobile-text-secondary)"},children:"Total Logins"}),r.jsx(jn,{size:16,style:{color:"var(--mobile-text-secondary)"}})]}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--mobile-text-primary)"},children:i}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginTop:"0.25rem"},children:"Training sessions"})]}),r.jsxs("div",{style:{background:"var(--mobile-surface)",border:"1px solid var(--mobile-border)",borderRadius:"0.75rem",padding:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--mobile-text-secondary)"},children:"Current Streak"}),r.jsx(hN,{size:16,style:{color:"#f59e0b"}})]}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--mobile-text-primary)"},children:a}),r.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--mobile-text-secondary)",marginTop:"0.25rem"},children:[a===1?"day":"days"," in a row"]})]})]}),r.jsxs("div",{style:{background:"var(--mobile-surface)",border:"1px solid var(--mobile-border)",borderRadius:"0.75rem",padding:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"1rem",color:"var(--mobile-text-primary)"},children:"Training Profile"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:"Training Style:"}),r.jsx("span",{style:{fontWeight:"500",textTransform:"capitalize",color:"var(--mobile-text-primary)"},children:(t==null?void 0:t.style)||"Not set"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:"Training Frequency:"}),r.jsxs("span",{style:{fontWeight:"500",color:"var(--mobile-text-primary)"},children:[(t==null?void 0:t.trainingFrequency)||0," days/week"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:"Subscription:"}),r.jsx("span",{style:{fontWeight:"500",textTransform:"capitalize",color:"var(--mobile-text-primary)"},children:((l=t==null?void 0:t.subscriptionType)==null?void 0:l.replace("_"," "))||"Free Trial"})]})]})]})]})}),r.jsx(Pl,{})]})})}function Pa(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState(1),[i,a]=x.useState(!1),[o,l]=x.useState({name:"",beltLevel:"",style:"",heightFeet:5,heightInches:9,heightCm:175,weight:170,useMetric:!1}),c=[{value:"white",label:"White Belt",color:"#ffffff"},{value:"blue",label:"Blue Belt",color:"#3b82f6"},{value:"purple",label:"Purple Belt",color:"#a855f7"},{value:"brown",label:"Brown Belt",color:"#92400e"},{value:"black",label:"Black Belt",color:"#000000"}],d=[{value:"gi",label:"Gi"},{value:"nogi",label:"No-Gi"},{value:"both",label:"Both"}],u=h=>{if(h&&!o.useMetric){const p=o.heightFeet*12+o.heightInches,v=Math.round(p*2.54);l({...o,heightCm:v,weight:Math.round(o.weight/2.205),useMetric:!0})}else if(!h&&o.useMetric){const p=Math.round(o.heightCm/2.54);l({...o,heightFeet:Math.floor(p/12),heightInches:p%12,weight:Math.round(o.weight*2.205),useMetric:!1})}},f=async()=>{a(!0);const h=o.useMetric?`${o.heightCm}cm`:`${o.heightFeet}'${o.heightInches}"`;try{if(await lt("PATCH","/api/auth/profile",{displayName:o.name.trim(),beltLevel:o.beltLevel,style:o.style,height:h,weight:o.weight,unitPreference:o.useMetric?"metric":"imperial",onboardingCompleted:!0}),await _e.invalidateQueries({queryKey:["/api/auth/me"]}),zt()){const p=localStorage.getItem("mobileUserId")||"1";await _n.set({key:"mobileUserId",value:p}),e("/ios-chat")}else window.location.href="/chat"}catch(p){t({title:"Error",description:p.message||"Failed to save profile",variant:"destructive"}),a(!1)}};return r.jsx("div",{className:"mobile-app",children:r.jsxs("div",{className:"mobile-container",style:{padding:"2rem",display:"flex",flexDirection:"column",justifyContent:"center"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[1,2,3,4].map(h=>r.jsx("div",{style:{flex:1,height:"4px",borderRadius:"2px",background:h<=n?"var(--mobile-primary-purple)":"var(--mobile-border-gray)"}},h))}),r.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)"},children:["Step ",n," of 4"]})]}),n===1&&r.jsxs("div",{className:"mobile-animate-slide-in",children:[r.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Welcome to BJJ OS"}),r.jsx("p",{style:{fontSize:"1rem",color:"var(--mobile-text-secondary)",marginBottom:"2rem"},children:"What's your name?"}),r.jsx("input",{type:"text",placeholder:"Enter your first name",value:o.name,onChange:h=>l({...o,name:h.target.value}),autoFocus:!0,style:{width:"100%",padding:"1rem",fontSize:"1rem",background:"var(--mobile-dark-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-lg)",color:"white",marginBottom:"1.5rem"},"data-testid":"input-name"}),r.jsx("button",{onClick:()=>o.name.trim()&&s(2),disabled:!o.name.trim(),style:{width:"100%",padding:"1rem",background:o.name.trim()?"var(--mobile-primary-gradient)":"var(--mobile-dark-gray)",borderRadius:"var(--mobile-radius-lg)",fontSize:"1rem",fontWeight:600,opacity:o.name.trim()?1:.5},"data-testid":"button-next",children:"Continue"})]}),n===2&&r.jsxs("div",{className:"mobile-animate-slide-in",children:[r.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"What's your belt?"}),r.jsx("p",{style:{fontSize:"1rem",color:"var(--mobile-text-secondary)",marginBottom:"2rem"},children:"Select your current rank"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:c.map(h=>r.jsxs("button",{onClick:()=>{l({...o,beltLevel:h.value}),s(3)},style:{padding:"1.25rem",background:o.beltLevel===h.value?"var(--mobile-primary-gradient)":"var(--mobile-dark-gray)",borderRadius:"var(--mobile-radius-lg)",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"1rem"},"data-testid":`belt-${h.value}`,children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(dj,{size:24,fill:h.color,color:h.color,style:{flexShrink:0}}),r.jsx("span",{children:h.label})]}),r.jsx(Cn,{})]},h.value))}),r.jsx("button",{onClick:()=>s(1),style:{marginTop:"1.5rem",padding:"0.75rem",background:"transparent",color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},"data-testid":"button-back",children:"Back"})]}),n===3&&r.jsxs("div",{className:"mobile-animate-slide-in",children:[r.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"What do you train?"}),r.jsx("p",{style:{fontSize:"1rem",color:"var(--mobile-text-secondary)",marginBottom:"2rem"},children:"Choose your training focus"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:d.map(h=>r.jsxs("button",{onClick:()=>{l({...o,style:h.value}),s(4)},style:{padding:"1.25rem",background:o.style===h.value?"var(--mobile-primary-gradient)":"var(--mobile-dark-gray)",borderRadius:"var(--mobile-radius-lg)",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"1rem"},"data-testid":`style-${h.value}`,children:[r.jsx("span",{children:h.label}),r.jsx(Cn,{})]},h.value))}),r.jsx("button",{onClick:()=>s(2),style:{marginTop:"1.5rem",padding:"0.75rem",background:"transparent",color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},"data-testid":"button-back",children:"Back"})]}),n===4&&r.jsxs("div",{className:"mobile-animate-slide-in",children:[r.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Height & Weight"}),r.jsx("p",{style:{fontSize:"1rem",color:"var(--mobile-text-secondary)",marginBottom:"2rem"},children:"Helps with technique recommendations"}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[r.jsx("button",{onClick:()=>u(!1),style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:500,background:o.useMetric?"var(--mobile-dark-gray)":"var(--mobile-primary-purple)",color:o.useMetric?"var(--mobile-text-secondary)":"white"},"data-testid":"button-imperial",children:"Imperial"}),r.jsx("button",{onClick:()=>u(!0),style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:500,background:o.useMetric?"var(--mobile-primary-purple)":"var(--mobile-dark-gray)",color:o.useMetric?"white":"var(--mobile-text-secondary)"},"data-testid":"button-metric",children:"Metric"})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},children:"Height"}),o.useMetric?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"number",value:o.heightCm,onChange:h=>l({...o,heightCm:parseInt(h.target.value)||0}),style:{width:"5rem",padding:"0.75rem",background:"var(--mobile-dark-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"0.5rem",color:"white",textAlign:"center"},min:100,max:250,"data-testid":"input-height-cm"}),r.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:"cm"})]}):r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"number",value:o.heightFeet,onChange:h=>l({...o,heightFeet:parseInt(h.target.value)||0}),style:{width:"4rem",padding:"0.75rem",background:"var(--mobile-dark-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"0.5rem",color:"white",textAlign:"center"},min:4,max:7,"data-testid":"input-height-feet"}),r.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:"ft"}),r.jsx("input",{type:"number",value:o.heightInches,onChange:h=>l({...o,heightInches:parseInt(h.target.value)||0}),style:{width:"4rem",padding:"0.75rem",background:"var(--mobile-dark-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"0.5rem",color:"white",textAlign:"center"},min:0,max:11,"data-testid":"input-height-inches"}),r.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:"in"})]})]}),r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},children:"Weight"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"number",value:o.weight,onChange:h=>l({...o,weight:parseInt(h.target.value)||0}),style:{width:"5rem",padding:"0.75rem",background:"var(--mobile-dark-gray)",border:"1px solid var(--mobile-border-gray)",borderRadius:"0.5rem",color:"white",textAlign:"center"},min:o.useMetric?40:90,max:o.useMetric?200:400,"data-testid":"input-weight"}),r.jsx("span",{style:{color:"var(--mobile-text-secondary)"},children:o.useMetric?"kg":"lbs"})]})]}),r.jsx("button",{onClick:f,disabled:i,style:{width:"100%",padding:"1rem",background:"var(--mobile-primary-gradient)",borderRadius:"var(--mobile-radius-lg)",fontSize:"1rem",fontWeight:600,opacity:i?.7:1},"data-testid":"button-complete",children:i?"Saving...":"Get Started"}),r.jsx("button",{onClick:()=>s(3),disabled:i,style:{marginTop:"1rem",padding:"0.75rem",background:"transparent",color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},"data-testid":"button-back",children:"Back"})]})]})})}const ANe="1.0.0";function PNe(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"N/A"}}function ENe(){var j;const[,e]=it(),[t,n]=x.useState(!1),[s,i]=x.useState(!1),{data:a,isLoading:o}=pe({queryKey:["/api/auth/me"]}),{data:l}=pe({queryKey:["/api/auth/profile"],enabled:!!a}),c=async()=>{oe("medium"),i(!0);try{await nd(),zt()?e("/ios-login"):e("/")}catch(m){console.error("Logout error:",m),i(!1)}},d=m=>{oe("light"),e(m)},u=async m=>{oe("light"),zt()?await yy.open({url:m}):window.open(m,"_blank")},f=async()=>{oe("light"),window.location.href="mailto:support@bjjos.app?subject=BJJ OS Support Request"},h=()=>{oe("light"),n(!0)},p=m=>({white:"#FFFFFF",blue:"#3B82F6",purple:"#8B5CF6",brown:"#92400E",black:"#1F2937"})[m]||"#FFFFFF",v=m=>m!=null&&m.isLifetime?"Lifetime":m!=null&&m.isPro?"Pro":"Free";if(o)return r.jsx("div",{className:"mobile-app",children:r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--mobile-dark-bg)"},children:r.jsx(De,{className:"w-8 h-8 animate-spin",color:"var(--mobile-text-primary)"})})});const g={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"transparent",border:"none",width:"100%",cursor:"pointer",borderBottom:"1px solid var(--mobile-border-gray)"},y={display:"flex",alignItems:"center",gap:"0.75rem"};return r.jsxs("div",{className:"mobile-app",children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"var(--mobile-dark-bg)",color:"var(--mobile-text-primary)",paddingBottom:"var(--mobile-bottom-nav-height)",overflow:"hidden"},children:[r.jsx("div",{style:{position:"sticky",top:0,zIndex:10,background:"var(--mobile-dark-bg)",borderBottom:"1px solid var(--mobile-border-gray)",padding:"1rem"},children:r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--mobile-text-primary)"},children:"Profile"})}),r.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:[r.jsx("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1.25rem",marginBottom:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"var(--mobile-primary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Co,{size:28,color:"white"})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:"var(--mobile-text-primary)",marginBottom:"0.25rem"},children:(l==null?void 0:l.displayName)||(l==null?void 0:l.username)||((j=a==null?void 0:a.email)==null?void 0:j.split("@")[0])||"User"}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--mobile-text-secondary)",marginBottom:"0.5rem"},children:(a==null?void 0:a.email)||"No email set"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"var(--mobile-primary)",color:"white",borderRadius:"var(--mobile-radius-sm)"},children:v(a)}),(l==null?void 0:l.beltLevel)&&r.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:p(l.beltLevel),color:l.beltLevel==="white"?"#000":"#FFF",borderRadius:"var(--mobile-radius-sm)",border:l.beltLevel==="white"?"1px solid #666":"none"},children:[l.beltLevel.charAt(0).toUpperCase()+l.beltLevel.slice(1)," Belt"]})]})]})]})}),r.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1.25rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[r.jsx(uq,{size:20,color:"var(--mobile-primary)"}),r.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"var(--mobile-text-primary)"},children:"Subscription"})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},children:"Plan"}),r.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.875rem",fontWeight:"500"},children:a!=null&&a.isLifetime?"BJJ OS Lifetime":a!=null&&a.isPro?"BJJ OS":"Free"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},children:"Status"}),r.jsx("span",{style:{color:a!=null&&a.isPro||a!=null&&a.isLifetime?"#22C55E":"var(--mobile-text-tertiary)",fontSize:"0.875rem",fontWeight:"500"},children:a!=null&&a.isLifetime?"Lifetime Access":a!=null&&a.isPro?"Active":"Inactive"})]}),(a==null?void 0:a.isPro)&&!(a!=null&&a.isLifetime)&&(a==null?void 0:a.subscriptionEndDate)&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--mobile-text-secondary)",fontSize:"0.875rem"},children:"Renews"}),r.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.875rem"},children:PNe(a==null?void 0:a.subscriptionEndDate)})]})]}),((a==null?void 0:a.isPro)||(a==null?void 0:a.isLifetime))&&r.jsxs("button",{onClick:()=>u("https://bjjos.app/settings/subscription"),style:{width:"100%",padding:"0.75rem",background:"var(--mobile-dark-bg)",border:"1px solid var(--mobile-border-gray)",borderRadius:"var(--mobile-radius-md)",color:"var(--mobile-text-primary)",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},"data-testid":"button-manage-subscription",children:[r.jsx(_s,{size:16}),"Manage Subscription"]}),!(a!=null&&a.isPro)&&!(a!=null&&a.isLifetime)&&r.jsx("div",{style:{textAlign:"center",color:"var(--mobile-text-tertiary)",fontSize:"0.8125rem",lineHeight:"1.5"},children:"Visit bjjos.app to subscribe"})]}),r.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",overflow:"hidden",marginBottom:"1.5rem"},children:[r.jsxs("button",{onClick:()=>d("/app/settings"),style:g,"data-testid":"button-settings",children:[r.jsxs("div",{style:y,children:[r.jsx(_l,{size:20,color:"var(--mobile-text-secondary)"}),r.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem"},children:"Settings"})]}),r.jsx(Cn,{size:20,color:"var(--mobile-text-tertiary)"})]}),r.jsxs("button",{onClick:h,style:g,"data-testid":"button-security",children:[r.jsxs("div",{style:y,children:[r.jsx(Ni,{size:20,color:"var(--mobile-text-secondary)"}),r.jsxs("div",{children:[r.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem",display:"block"},children:"Security"}),r.jsx("span",{style:{color:"var(--mobile-text-tertiary)",fontSize:"0.75rem"},children:"Change password on web"})]})]}),r.jsx(Cn,{size:20,color:"var(--mobile-text-tertiary)"})]}),r.jsxs("button",{onClick:f,style:{...g,borderBottom:"none"},"data-testid":"button-support",children:[r.jsxs("div",{style:y,children:[r.jsx(VI,{size:20,color:"var(--mobile-text-secondary)"}),r.jsxs("div",{children:[r.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem",display:"block"},children:"Help & Support"}),r.jsx("span",{style:{color:"var(--mobile-text-tertiary)",fontSize:"0.75rem"},children:"support@bjjos.app"})]})]}),r.jsx(gs,{size:20,color:"var(--mobile-text-tertiary)"})]})]}),r.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",overflow:"hidden",marginBottom:"1.5rem"},children:[r.jsxs("button",{onClick:()=>u("https://bjjos.app/terms"),style:g,"data-testid":"button-terms",children:[r.jsxs("div",{style:y,children:[r.jsx(Df,{size:20,color:"var(--mobile-text-secondary)"}),r.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem"},children:"Terms of Service"})]}),r.jsx(Cn,{size:20,color:"var(--mobile-text-tertiary)"})]}),r.jsxs("button",{onClick:()=>u("https://bjjos.app/privacy"),style:{...g,borderBottom:"none"},"data-testid":"button-privacy",children:[r.jsxs("div",{style:y,children:[r.jsx(pi,{size:20,color:"var(--mobile-text-secondary)"}),r.jsx("span",{style:{color:"var(--mobile-text-primary)",fontSize:"0.9375rem"},children:"Privacy Policy"})]}),r.jsx(Cn,{size:20,color:"var(--mobile-text-tertiary)"})]})]}),r.jsxs("button",{onClick:c,disabled:s,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",padding:"1rem",background:"transparent",border:"1px solid #EF4444",borderRadius:"var(--mobile-radius-lg)",color:"#EF4444",fontSize:"1rem",fontWeight:"600",cursor:s?"not-allowed":"pointer",opacity:s?.6:1,marginBottom:"1.5rem"},"data-testid":"button-logout",children:[s?r.jsx(De,{size:20,className:"animate-spin"}):r.jsx(Vd,{size:20}),s?"Logging out...":"Log Out"]}),r.jsxs("div",{style:{textAlign:"center",color:"var(--mobile-text-tertiary)",fontSize:"0.75rem",paddingBottom:"2rem"},children:["BJJ OS v",ANe]})]}),r.jsx(Pl,{})]}),t&&r.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100,padding:"1rem"},onClick:()=>{oe("light"),n(!1)},children:r.jsxs("div",{style:{background:"var(--mobile-medium-gray)",borderRadius:"var(--mobile-radius-lg)",padding:"1.5rem",maxWidth:"320px",width:"100%"},onClick:m=>m.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[r.jsx(Ni,{size:24,color:"var(--mobile-primary)"}),r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"var(--mobile-text-primary)"},children:"Security Settings"})]}),r.jsx("p",{style:{color:"var(--mobile-text-secondary)",fontSize:"0.9375rem",lineHeight:"1.5",marginBottom:"1.5rem"},children:"To change your password or manage security settings, please visit:"}),r.jsx("div",{style:{background:"var(--mobile-dark-bg)",padding:"0.75rem",borderRadius:"var(--mobile-radius-md)",textAlign:"center",marginBottom:"1.5rem"},children:r.jsx("span",{style:{color:"var(--mobile-primary)",fontSize:"0.9375rem",fontWeight:"500"},children:"bjjos.app/settings"})}),r.jsx("button",{onClick:()=>{oe("light"),n(!1)},style:{width:"100%",padding:"0.75rem",background:"var(--mobile-primary)",border:"none",borderRadius:"var(--mobile-radius-md)",color:"white",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},"data-testid":"button-close-security",children:"Got it"})]})})]})}const TNe={white:"#FFFFFF",blue:"#1E3A8A",purple:"#7C3AED",brown:"#78350F",black:"#000000"};function ONe({color:e,stripes:t=0,selected:n=!1,onClick:s}){const i=TNe[e],a=e==="black"?"#DC2626":"#000000",o=e==="white";return r.jsx("div",{onClick:s,className:"relative w-full h-12 cursor-pointer transition-none",style:{backgroundColor:i,border:n?"2px solid white":o?"1px solid #333":"none"},"data-testid":`belt-${e}`,children:t>0&&r.jsx("div",{className:"absolute flex flex-col justify-center h-full",style:{right:"16px",gap:"8px"},children:[...Array(t)].map((l,c)=>r.jsx("div",{className:"stripe",style:{width:"4px",height:"32px",backgroundColor:a},"data-testid":`stripe-${c}`},c))})})}const _Ne=[{color:"white",label:"White Belt"},{color:"blue",label:"Blue Belt"},{color:"purple",label:"Purple Belt"},{color:"brown",label:"Brown Belt"},{color:"black",label:"Black Belt"}];function INe(){const{toast:e}=Je(),[t,n]=x.useState("blue"),[s,i]=x.useState(0),{data:a}=pe({queryKey:["/api/auth/me"]});x.useEffect(()=>{a!=null&&a.themeBelt&&t!==a.themeBelt&&n(a.themeBelt),(a==null?void 0:a.themeStripes)!==void 0&&s!==a.themeStripes&&i(a.themeStripes)},[a==null?void 0:a.themeBelt,a==null?void 0:a.themeStripes,t,s]);const o=qe({mutationFn:async({belt:d,stripes:u})=>(await lt("PATCH","/api/user/theme",{themeBelt:d,themeStripes:u})).json(),onSuccess:()=>{_e.invalidateQueries({queryKey:["/api/auth/me"]}),e({title:"Theme updated",description:"Your belt theme has been saved"})},onError:d=>{e({title:"Error",description:d.message||"Failed to update theme",variant:"destructive"})}}),l=d=>{n(d),o.mutate({belt:d,stripes:s})},c=d=>{i(d),o.mutate({belt:t,stripes:d})};return r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2","data-testid":"text-page-title",children:"Theme Settings"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose your current belt and stripe count"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-medium",children:"Select Your Belt"}),_Ne.map(d=>r.jsxs("div",{onClick:()=>l(d.color),className:"cursor-pointer group","data-testid":`belt-option-${d.color}`,children:[r.jsx("div",{className:"mb-2",children:r.jsx(ONe,{color:d.color,stripes:t===d.color?s:0,selected:t===d.color})}),r.jsxs("div",{className:"flex items-center gap-3 pl-1",children:[r.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center transition-none ${t===d.color?"border-white bg-white":"border-muted-foreground"}`,children:t===d.color&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-black"})}),r.jsx("span",{className:"text-sm font-medium","data-testid":`text-${d.color}-label`,children:d.label})]})]},d.color))]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-medium",children:"Number of Stripes"}),r.jsx("div",{className:"flex gap-2",children:[0,1,2,3,4].map(d=>r.jsx(Z,{variant:s===d?"default":"outline",onClick:()=>c(d),"data-testid":`button-stripes-${d}`,children:d},d))}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Select the number of stripes on your current belt (0-4)"})]}),r.jsx("p",{className:"text-xs text-muted-foreground pt-4",children:"Your selected belt will be used as the primary color theme throughout the app"})]})})}function $d(){const[e]=it(),t=[{path:"/ios-chat",icon:Bf,label:"Chat"},{path:"/ios-library",icon:yl,label:"Videos"},{path:"/ios-saved",icon:ps,label:"Saved"},{path:"/ios-profile",icon:Co,label:"Profile"}],n=s=>{oe("light"),s==="/ios-chat"&&window.dispatchEvent(new CustomEvent("ios-chat-return"))};return r.jsx("nav",{className:"ios-bottom-nav",style:{position:"fixed",bottom:0,left:0,right:0,background:"#121214",borderTop:"1px solid #2A2A2E",display:"flex",justifyContent:"space-around",padding:"8px 0",paddingBottom:"max(8px, env(safe-area-inset-bottom))",zIndex:9999},"data-testid":"ios-bottom-nav",children:t.map(s=>{const i=s.icon,a=e===s.path||e.startsWith(s.path+"/");return r.jsxs(sn,{href:s.path,onClick:()=>n(s.path),"data-testid":`nav-${s.label.toLowerCase().replace(" ","-")}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",color:a?"#8B5CF6":"#71717A",textDecoration:"none",padding:"8px 16px",fontSize:"11px",fontWeight:a?600:400,WebkitTapHighlightColor:"rgba(139, 92, 246, 0.3)"},children:[r.jsx(i,{size:24,strokeWidth:a?2.5:2,fill:a?"#8B5CF6":"none"}),r.jsx("span",{children:s.label})]},s.path)})})}function RNe(){const[,e]=it(),{data:t}=pe({queryKey:["/api/auth/me"]}),{data:n}=pe({queryKey:["/api/user/stats"],enabled:!!t}),s=a=>{oe("light"),e(a)},i=a=>({white:"White Belt",blue:"Blue Belt",purple:"Purple Belt",brown:"Brown Belt",black:"Black Belt"})[a||"white"]||"White Belt";return r.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"100px"},children:[r.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("h1",{style:{fontSize:"28px",fontWeight:700,margin:0},children:["Welcome back",t!=null&&t.displayName?`, ${t.displayName.split(" ")[0]}`:""]}),r.jsx("p",{style:{color:"#71717A",fontSize:"14px",marginTop:"4px"},children:i(t==null?void 0:t.beltLevel)})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",padding:"20px"},children:[r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"16px",border:"1px solid #2A2A2E"},"data-testid":"stat-messages",children:[r.jsx(Bf,{size:24,color:"#8B5CF6"}),r.jsxs("div",{style:{marginTop:"12px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:700},children:(n==null?void 0:n.messagesCount)||0}),r.jsx("div",{style:{fontSize:"12px",color:"#71717A"},children:"Coaching Sessions"})]})]}),r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"16px",border:"1px solid #2A2A2E"},"data-testid":"stat-videos",children:[r.jsx(yl,{size:24,color:"#8B5CF6"}),r.jsxs("div",{style:{marginTop:"12px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:700},children:(n==null?void 0:n.savedVideos)||0}),r.jsx("div",{style:{fontSize:"12px",color:"#71717A"},children:"Saved Techniques"})]})]}),r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"16px",border:"1px solid #2A2A2E"},"data-testid":"stat-streak",children:[r.jsx(hN,{size:24,color:"#F97316"}),r.jsxs("div",{style:{marginTop:"12px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:700},children:(n==null?void 0:n.streak)||0}),r.jsx("div",{style:{fontSize:"12px",color:"#71717A"},children:"Day Streak"})]})]}),r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"16px",border:"1px solid #2A2A2E"},"data-testid":"stat-progress",children:[r.jsx(jn,{size:24,color:"#22C55E"}),r.jsxs("div",{style:{marginTop:"12px"},children:[r.jsxs("div",{style:{fontSize:"24px",fontWeight:700},children:[(n==null?void 0:n.progressPercent)||0,"%"]}),r.jsx("div",{style:{fontSize:"12px",color:"#71717A"},children:"Weekly Progress"})]})]})]}),r.jsxs("div",{style:{padding:"0 20px"},children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px"},children:"Quick Actions"}),r.jsxs("button",{onClick:()=>s("/ios-chat"),onTouchEnd:()=>s("/ios-chat"),"data-testid":"button-start-coaching",style:{width:"100%",background:"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)",border:"none",borderRadius:"16px",padding:"20px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"16px",cursor:"pointer"},children:[r.jsx("div",{style:{width:"48px",height:"48px",background:"rgba(255,255,255,0.2)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Bf,{size:24,color:"#FFFFFF"})}),r.jsxs("div",{style:{textAlign:"left"},children:[r.jsx("div",{style:{color:"#FFFFFF",fontSize:"16px",fontWeight:600},children:"Start Coaching Session"}),r.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"13px"},children:"Chat with Professor OS"})]})]}),r.jsxs("button",{onClick:()=>s("/ios-library"),onTouchEnd:()=>s("/ios-library"),"data-testid":"button-browse-library",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"16px",padding:"20px",display:"flex",alignItems:"center",gap:"16px",cursor:"pointer"},children:[r.jsx("div",{style:{width:"48px",height:"48px",background:"#2A2A2E",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(yl,{size:24,color:"#8B5CF6"})}),r.jsxs("div",{style:{textAlign:"left"},children:[r.jsx("div",{style:{color:"#FFFFFF",fontSize:"16px",fontWeight:600},children:"Browse Technique Library"}),r.jsx("div",{style:{color:"#71717A",fontSize:"13px"},children:"2,000+ instructional videos"})]})]})]}),r.jsx($d,{})]})}console.log(" ios-chat.tsx LOADED");function MNe(){const[,e]=it(),[t,n]=x.useState(!1);return x.useEffect(()=>{const s=localStorage.getItem("mobileUserId"),i=localStorage.getItem("sessionToken")||localStorage.getItem("token");if(console.log("[IOS-CHAT] Auth check - mobileUserId:",s,"hasToken:",!!i),!s||!i){console.log("[IOS-CHAT] Missing auth (userId or token), clearing and redirecting to login"),nd().then(()=>{e("/ios-login")});return}n(!0)},[e]),t?r.jsxs("div",{className:"ios-page",style:{height:"100vh",background:"#0A0A0B",display:"flex",flexDirection:"column"},children:[r.jsx("div",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:r.jsx(ZL,{})}),r.jsx($d,{})]}):r.jsx("div",{className:"ios-page",style:{height:"100vh",background:"#0A0A0B",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})})}console.log(" iOS LIBRARY loaded");function FNe(){var O;const[e,t]=x.useState(""),[n,s]=x.useState("All"),[i,a]=x.useState("All"),[o,l]=x.useState(!1),[c,d]=x.useState(null),[u,f]=x.useState(null),h=va(),{toast:p}=Je(),{data:v}=pe({queryKey:["/api/auth/me"]}),{data:g,isLoading:y}=pe({queryKey:["/api/ai/videos"]}),j=x.useCallback(async()=>{l(!0),oe("medium"),await h.invalidateQueries({queryKey:["/api/ai/videos"]}),await h.invalidateQueries({queryKey:[`/api/ai/saved-videos/${v==null?void 0:v.id}`]}),setTimeout(()=>l(!1),500)},[h,v==null?void 0:v.id]),m=((g==null?void 0:g.videos)||[]).map(C=>({id:C.id,title:C.title,instructor:C.instructorName,youtubeId:C.videoId,thumbnail:C.thumbnailUrl||(C.videoId?`https://img.youtube.com/vi/${C.videoId}/mqdefault.jpg`:void 0),duration:C.duration,technique:C.techniqueType,position:C.positionCategory})),{data:b}=pe({queryKey:[`/api/ai/saved-videos/${v==null?void 0:v.id}`],enabled:!!(v!=null&&v.id)}),N=((O=b==null?void 0:b.videos)==null?void 0:O.map(C=>String(C.id)))||[],w=qe({mutationFn:async({videoId:C})=>lt("POST","/api/ai/saved-videos",{userId:v==null?void 0:v.id,videoId:C}),onSuccess:()=>{h.invalidateQueries({queryKey:[`/api/ai/saved-videos/${v==null?void 0:v.id}`]}),p({title:"Saved!",description:"Video added to your library"}),oe("success")},onError:()=>{p({title:"Error",description:"Failed to save video",variant:"destructive"}),oe("error")}}),S=qe({mutationFn:async({videoId:C})=>lt("DELETE",`/api/ai/saved-videos/${C}`,{userId:v==null?void 0:v.id}),onSuccess:()=>{h.invalidateQueries({queryKey:[`/api/ai/saved-videos/${v==null?void 0:v.id}`]}),p({title:"Removed",description:"Video removed from saved"}),oe("light")},onError:()=>{p({title:"Error",description:"Failed to remove video",variant:"destructive"}),oe("error")}}),k=C=>{if(!(v!=null&&v.id)){p({title:"Sign in required",description:"Please sign in to save videos",variant:"destructive"});return}M(C)?S.mutate({videoId:C}):w.mutate({videoId:C})},P=x.useMemo(()=>i==="All"?m:m.filter(C=>C.instructor===i),[m,i]),E=x.useMemo(()=>n==="All"?m:m.filter(C=>(C.technique||"Other")===n),[m,n]),_=x.useMemo(()=>{const C=P,R={};C.forEach(B=>{const H=B.technique||"Other";R[H]=(R[H]||0)+1});const I=Object.entries(R).sort((B,H)=>H[1]-B[1]);return[{name:"All",count:C.length},...I.map(([B,H])=>({name:B,count:H}))]},[P]),F=x.useMemo(()=>{const C=E,R={};C.forEach(H=>{const Q=H.instructor||"Unknown";R[Q]=(R[Q]||0)+1});const I=Object.entries(R).sort((H,Q)=>Q[1]-H[1]);return[{name:"All",count:Object.keys(R).length},...I.map(([H,Q])=>({name:H,count:Q}))]},[E]),A=m==null?void 0:m.filter(C=>{const R=!e||C.title.toLowerCase().includes(e.toLowerCase())||C.instructor.toLowerCase().includes(e.toLowerCase()),I=n==="All"||(C.technique||"Other")===n,B=i==="All"||C.instructor===i;return R&&I&&B}),T=C=>{oe("light"),d({videoId:C.youtubeId,title:C.title,instructor:C.instructor})},M=C=>N.includes(String(C));return r.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"100px"},children:[r.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[r.jsx("h1",{style:{fontSize:"28px",fontWeight:700,margin:0},children:"Technique Library"}),r.jsx("button",{onClick:j,disabled:o,"data-testid":"button-refresh-library",style:{background:"transparent",border:"none",padding:"8px",cursor:"pointer",color:o?"#8B5CF6":"#71717A"},children:r.jsx(wr,{size:22,className:o?"animate-spin":""})})]}),r.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[r.jsx(Nr,{size:20,color:"#71717A",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),r.jsx("input",{type:"text",placeholder:"Search techniques or instructors...",value:e,onChange:C=>t(C.target.value),"data-testid":"input-search-library",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"12px",padding:"12px 12px 12px 44px",color:"#FFFFFF",fontSize:"15px",outline:"none"}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[r.jsxs("div",{style:{position:"relative"},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",color:"#71717A",marginBottom:"6px",fontWeight:600},children:"Techniques"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("select",{value:n,onChange:C=>{oe("light"),s(C.target.value)},"data-testid":"select-technique-filter",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"10px",padding:"12px 36px 12px 12px",color:"#FFFFFF",fontSize:"14px",outline:"none",appearance:"none",cursor:"pointer"},children:_.map(({name:C,count:R})=>r.jsxs("option",{value:C,"data-testid":`option-technique-${C.toLowerCase().replace(/\s+/g,"-")}`,children:[C," (",R,")"]},C))}),r.jsx(ji,{size:16,color:"#71717A",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"}})]})]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",color:"#71717A",marginBottom:"6px",fontWeight:600},children:"Professors"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("select",{value:i,onChange:C=>{oe("light"),a(C.target.value)},"data-testid":"select-professor-filter",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"10px",padding:"12px 36px 12px 12px",color:"#FFFFFF",fontSize:"14px",outline:"none",appearance:"none",cursor:"pointer"},children:F.map(({name:C,count:R})=>r.jsxs("option",{value:C,"data-testid":`option-professor-${C.toLowerCase().replace(/\s+/g,"-")}`,children:[C," (",R,")"]},C))}),r.jsx(ji,{size:16,color:"#71717A",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"}})]})]})]})]}),r.jsx("div",{style:{padding:"16px 20px"},children:y?r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:r.jsx(De,{className:"animate-spin",size:32,color:"#8B5CF6"})}):(A==null?void 0:A.length)===0?r.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#71717A"},children:[r.jsx("p",{children:"No videos found"}),r.jsx("p",{style:{fontSize:"14px",marginTop:"8px"},children:"Try a different search or filter"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:A==null?void 0:A.map(C=>r.jsxs("button",{onClick:()=>T(C),"data-testid":`video-card-${C.id}`,style:{background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"12px",padding:"12px",display:"flex",gap:"12px",cursor:"pointer",textAlign:"left",width:"100%"},children:[r.jsxs("div",{style:{width:"120px",height:"68px",borderRadius:"8px",background:"#2A2A2E",flexShrink:0,position:"relative",overflow:"hidden"},children:[C.thumbnail||C.youtubeId?r.jsx("img",{src:C.thumbnail||`https://img.youtube.com/vi/${C.youtubeId}/mqdefault.jpg`,alt:C.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):null,r.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.3)"},children:r.jsx(Rr,{size:24,color:"#FFFFFF",fill:"#FFFFFF"})}),C.duration&&r.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0,0,0,0.8)",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",color:"#FFFFFF"},children:C.duration})]}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#FFFFFF",lineHeight:1.3,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Fd(C.title)}),r.jsx("div",{style:{fontSize:"13px",color:"#8B5CF6",marginTop:"4px"},children:C.instructor}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px"},children:[r.jsxs("button",{onClick:R=>{R.stopPropagation(),oe("light"),f(C.id)},"data-testid":`button-view-analysis-${C.id}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:"#8B5CF6",background:"rgba(139, 92, 246, 0.15)",padding:"2px 8px",borderRadius:"4px",border:"none",cursor:"pointer"},children:[r.jsx(Us,{size:12}),"Analysis"]}),r.jsxs("button",{onClick:R=>{R.stopPropagation(),k(C.id)},"data-testid":`button-save-video-${C.id}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:M(C.id)?"#22C55E":"#71717A",background:M(C.id)?"rgba(34, 197, 94, 0.15)":"rgba(39, 39, 42, 0.5)",padding:"2px 8px",borderRadius:"4px",border:"none",cursor:"pointer"},children:[M(C.id)?r.jsx(cv,{size:12}):r.jsx(ps,{size:12}),M(C.id)?"Saved":"Save"]}),r.jsxs("button",{onClick:async R=>{R.stopPropagation(),oe("light"),await Ny(Fd(C.title),C.instructor,C.youtubeId)},"data-testid":`button-share-video-${C.id}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:"#10B981",background:"rgba(16, 185, 129, 0.15)",padding:"2px 8px",borderRadius:"4px",border:"none",cursor:"pointer"},children:[r.jsx(hv,{size:12}),"Share"]})]})]})]},C.id))})}),r.jsx($d,{}),c&&r.jsx(Ll,{videoId:c.videoId,title:c.title,instructor:c.instructor,onClose:()=>d(null)}),u&&r.jsx(m2,{videoId:u,onClose:()=>f(null)})]})}console.log(" iOS SAVED loaded");function $Ne(){const[e,t]=x.useState(""),[n,s]=x.useState("All"),[i,a]=x.useState("All"),[o,l]=x.useState(!1),[c,d]=x.useState(null),[u,f]=x.useState(null),h=va(),{toast:p}=Je(),{data:v}=pe({queryKey:["/api/auth/me"]}),{data:g,isLoading:y}=pe({queryKey:[`/api/ai/saved-videos/${v==null?void 0:v.id}`],enabled:!!(v!=null&&v.id)}),j=(g==null?void 0:g.videos)||[],m=qe({mutationFn:async({videoId:A})=>lt("DELETE",`/api/ai/saved-videos/${A}`,{userId:v==null?void 0:v.id}),onSuccess:()=>{h.invalidateQueries({queryKey:[`/api/ai/saved-videos/${v==null?void 0:v.id}`]}),p({title:"Removed",description:"Video removed from saved"}),oe("light")},onError:()=>{p({title:"Error",description:"Failed to remove video",variant:"destructive"}),oe("error")}}),b=A=>{v!=null&&v.id&&m.mutate({videoId:A})},N=x.useCallback(async()=>{l(!0),oe("medium"),await h.invalidateQueries({queryKey:[`/api/ai/saved-videos/${v==null?void 0:v.id}`]}),setTimeout(()=>l(!1),500)},[h,v==null?void 0:v.id]),w=A=>{if(!A)return"";const T=A.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);return T?T[1]:""},S=x.useMemo(()=>i==="All"?j:j.filter(A=>A.instructor===i),[j,i]),k=x.useMemo(()=>n==="All"?j:j.filter(A=>(A.techniqueType||A.category||"Other")===n),[j,n]),P=x.useMemo(()=>{const A=S,T={};A.forEach(O=>{const C=O.techniqueType||O.category||"Other";T[C]=(T[C]||0)+1});const M=Object.entries(T).sort((O,C)=>C[1]-O[1]);return[{name:"All",count:A.length},...M.map(([O,C])=>({name:O,count:C}))]},[S]),E=x.useMemo(()=>{const A=k,T={};A.forEach(O=>{const C=O.instructor||"Unknown";T[C]=(T[C]||0)+1});const M=Object.entries(T).sort((O,C)=>C[1]-O[1]);return[{name:"All",count:A.length},...M.map(([O,C])=>({name:O,count:C}))]},[k]),_=j.filter(A=>{var C;const T=!e||A.title.toLowerCase().includes(e.toLowerCase())||((C=A.instructor)==null?void 0:C.toLowerCase().includes(e.toLowerCase())),M=n==="All"||(A.techniqueType||A.category||"Other")===n,O=i==="All"||A.instructor===i;return T&&M&&O}),F=A=>{oe("light");const T=w(A.videoUrl);T&&d({videoId:T,title:A.title,instructor:A.instructor})};return y?r.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",display:"flex",alignItems:"center",justifyContent:"center"},children:[r.jsx(De,{className:"animate-spin",size:32,color:"#8B5CF6"}),r.jsx($d,{})]}):r.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"100px"},children:[r.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h1",{style:{fontSize:"28px",fontWeight:700,margin:0},children:"Saved Videos"}),r.jsx("button",{onClick:N,disabled:o,"data-testid":"button-refresh-saved",style:{background:"transparent",border:"none",padding:"8px",cursor:"pointer",color:o?"#8B5CF6":"#71717A"},children:r.jsx(wr,{size:22,className:o?"animate-spin":""})})]}),r.jsxs("p",{style:{color:"#71717A",fontSize:"14px",marginTop:"4px",marginBottom:"16px"},children:[j.length," videos saved"]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",background:"#1A1A1D",borderRadius:"12px",padding:"12px 16px",border:"1px solid #2A2A2E",marginBottom:"12px"},children:[r.jsx(Nr,{size:20,color:"#71717A"}),r.jsx("input",{type:"text",placeholder:"Search saved videos...",value:e,onChange:A=>t(A.target.value),"data-testid":"input-search-saved",style:{flex:1,background:"transparent",border:"none",color:"#FFFFFF",fontSize:"16px",outline:"none"}}),e&&r.jsx("button",{onClick:()=>t(""),"data-testid":"button-clear-search",style:{background:"transparent",border:"none",padding:"4px",cursor:"pointer"},children:r.jsx(ys,{size:20,color:"#71717A"})})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[r.jsxs("div",{style:{position:"relative"},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",color:"#71717A",marginBottom:"6px",fontWeight:600},children:"Techniques"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("select",{value:n,onChange:A=>{oe("light"),s(A.target.value)},"data-testid":"select-technique-filter",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"10px",padding:"12px 36px 12px 12px",color:"#FFFFFF",fontSize:"14px",outline:"none",appearance:"none",cursor:"pointer"},children:P.map(({name:A,count:T})=>r.jsxs("option",{value:A,"data-testid":`option-technique-${A.toLowerCase().replace(/\s+/g,"-")}`,children:[A," (",T,")"]},A))}),r.jsx(ji,{size:16,color:"#71717A",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"}})]})]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",color:"#71717A",marginBottom:"6px",fontWeight:600},children:"Professors"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("select",{value:i,onChange:A=>{oe("light"),a(A.target.value)},"data-testid":"select-professor-filter",style:{width:"100%",background:"#1A1A1D",border:"1px solid #2A2A2E",borderRadius:"10px",padding:"12px 36px 12px 12px",color:"#FFFFFF",fontSize:"14px",outline:"none",appearance:"none",cursor:"pointer"},children:E.map(({name:A,count:T})=>r.jsxs("option",{value:A,"data-testid":`option-professor-${A.toLowerCase().replace(/\s+/g,"-")}`,children:[A," (",T,")"]},A))}),r.jsx(ji,{size:16,color:"#71717A",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"}})]})]})]})]}),r.jsx("div",{style:{padding:"16px 20px"},children:_.length===0?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",textAlign:"center"},children:[r.jsx(ps,{size:48,color:"#3F3F46"}),r.jsx("h3",{style:{color:"#71717A",fontSize:"18px",fontWeight:600,marginTop:"16px"},children:e||n!=="All"||i!=="All"?"No videos found":"No saved videos yet"}),r.jsx("p",{style:{color:"#52525B",fontSize:"14px",marginTop:"8px"},children:e||n!=="All"||i!=="All"?"Try a different search or filter":"Save videos from Professor OS to watch later"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:_.map(A=>{const T=w(A.videoUrl),M=A.thumbnailUrl||(T?`https://img.youtube.com/vi/${T}/mqdefault.jpg`:"");return r.jsxs("button",{onClick:()=>F(A),"data-testid":`video-card-${A.id}`,style:{display:"flex",gap:"12px",background:"#1A1A1D",borderRadius:"16px",padding:"12px",border:"1px solid #2A2A2E",cursor:"pointer",textAlign:"left",width:"100%"},children:[r.jsxs("div",{style:{width:"120px",height:"68px",borderRadius:"8px",overflow:"hidden",flexShrink:0,background:"#2A2A2E",position:"relative"},children:[M?r.jsx("img",{src:M,alt:A.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Rr,{size:24,color:"#71717A"})}),A.duration&&r.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0,0,0,0.8)",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",color:"#FFFFFF"},children:A.duration})]}),r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px",minWidth:0},children:[r.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#FFFFFF",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:Fd(A.title)}),r.jsx("div",{style:{fontSize:"13px",color:"#8B5CF6"},children:A.instructor}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:[r.jsxs("button",{onClick:O=>{O.stopPropagation(),oe("light"),f(A.id)},"data-testid":`button-view-analysis-${A.id}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:"#8B5CF6",background:"rgba(139, 92, 246, 0.15)",padding:"2px 8px",borderRadius:"4px",border:"none",cursor:"pointer"},children:[r.jsx(Us,{size:12}),"Analysis"]}),r.jsxs("button",{onClick:O=>{O.stopPropagation(),b(A.id)},"data-testid":`button-unsave-video-${A.id}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:"#22C55E",background:"rgba(34, 197, 94, 0.15)",padding:"2px 8px",borderRadius:"4px",border:"none",cursor:"pointer"},children:[r.jsx(cv,{size:12}),"Saved"]}),r.jsxs("button",{onClick:async O=>{O.stopPropagation(),oe("light");const C=w(A.videoUrl);C&&await Ny(Fd(A.title),A.instructor,C)},"data-testid":`button-share-video-${A.id}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:"#10B981",background:"rgba(16, 185, 129, 0.15)",padding:"2px 8px",borderRadius:"4px",border:"none",cursor:"pointer"},children:[r.jsx(hv,{size:12}),"Share"]})]})]})]},A.id)})})}),r.jsx($d,{}),c&&r.jsx(Ll,{videoId:c.videoId,title:c.title,instructor:c.instructor,onClose:()=>d(null)}),u&&r.jsx(m2,{videoId:u,onClose:()=>f(null)})]})}var Ki;(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(Ki||(Ki={}));var gf;(function(e){e.Rear="REAR",e.Front="FRONT"})(gf||(gf={}));var l1;(function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"})(l1||(l1={}));class DNe extends tv{async getPhoto(t){return new Promise(async(n,s)=>{if(t.webUseInput||t.source===Ki.Photos)this.fileInputExperience(t,n,s);else if(t.source===Ki.Prompt){let i=document.querySelector("pwa-action-sheet");i||(i=document.createElement("pwa-action-sheet"),document.body.appendChild(i)),i.header=t.promptLabelHeader||"Photo",i.cancelable=!1,i.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],i.addEventListener("onSelection",async a=>{a.detail===0?this.fileInputExperience(t,n,s):this.cameraExperience(t,n,s)})}else this.cameraExperience(t,n,s)})}async pickImages(t){return new Promise(async(n,s)=>{this.multipleFileInputExperience(n,s)})}async cameraExperience(t,n,s){if(customElements.get("pwa-camera-modal")){const i=document.createElement("pwa-camera-modal");i.facingMode=t.direction===gf.Front?"user":"environment",document.body.appendChild(i);try{await i.componentOnReady(),i.addEventListener("onPhoto",async a=>{const o=a.detail;o===null?s(new kc("User cancelled photos app")):o instanceof Error?s(o):n(await this._getCameraPhoto(o,t)),i.dismiss(),document.body.removeChild(i)}),i.present()}catch{this.fileInputExperience(t,n,s)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,n,s)}fileInputExperience(t,n,s){let i=document.querySelector("#_capacitor-camera-input");const a=()=>{var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input",i.type="file",i.hidden=!0,document.body.appendChild(i),i.addEventListener("change",o=>{const l=i.files[0];let c="jpeg";if(l.type==="image/png"?c="png":l.type==="image/gif"&&(c="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){const d=new FileReader;d.addEventListener("load",()=>{if(t.resultType==="dataUrl")n({dataUrl:d.result,format:c});else if(t.resultType==="base64"){const u=d.result.split(",")[1];n({base64String:u,format:c})}a()}),d.readAsDataURL(l)}else n({webPath:URL.createObjectURL(l),format:c}),a()}),i.addEventListener("cancel",o=>{s(new kc("User cancelled photos app")),a()})),i.accept="image/*",i.capture=!0,t.source===Ki.Photos||t.source===Ki.Prompt?i.removeAttribute("capture"):t.direction===gf.Front?i.capture="user":t.direction===gf.Rear&&(i.capture="environment"),i.click()}multipleFileInputExperience(t,n){let s=document.querySelector("#_capacitor-camera-input-multiple");const i=()=>{var a;(a=s.parentNode)===null||a===void 0||a.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input-multiple",s.type="file",s.hidden=!0,s.multiple=!0,document.body.appendChild(s),s.addEventListener("change",a=>{const o=[];for(let l=0;l<s.files.length;l++){const c=s.files[l];let d="jpeg";c.type==="image/png"?d="png":c.type==="image/gif"&&(d="gif"),o.push({webPath:URL.createObjectURL(c),format:d})}t({photos:o}),i()}),s.addEventListener("cancel",a=>{n(new kc("User cancelled photos app")),i()})),s.accept="image/*",s.click()}_getCameraPhoto(t,n){return new Promise((s,i)=>{const a=new FileReader,o=t.type.split("/")[1];n.resultType==="uri"?s({webPath:URL.createObjectURL(t),format:o,saved:!1}):(a.readAsDataURL(t),a.onloadend=()=>{const l=a.result;n.resultType==="dataUrl"?s({dataUrl:l,format:o,saved:!1}):s({base64String:l.split(",")[1],format:o,saved:!1})},a.onerror=l=>{i(l)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const Fu=ko("Camera",{web:()=>new DNe});console.log(" iOS PROFILE loaded");const dp=["white","blue","purple","brown","black"],up=["gi","nogi","both"],LNe=Array.from({length:201},(e,t)=>100+t),BNe=Array.from({length:91},(e,t)=>45+t),e6=[];for(let e=4;e<=7;e++)for(let t=0;t<12&&(e6.push(`${e}'${t}"`),!(e===7&&t===0));t++);const zNe=Array.from({length:96},(e,t)=>120+t);function qNe(){const[,e]=it(),t=va(),[n,s]=x.useState(null),[i,a]=x.useState(""),[o,l]=x.useState(!1),[c,d]=x.useState(!1),u=x.useRef(null),f=x.useRef(null),h=x.useRef(null),p=x.useRef(null),v=x.useRef(null),g=x.useRef(null),y=x.useRef(-1),j=x.useRef(-1),m=x.useRef(-1),b=x.useRef(-1),{data:N,isLoading:w}=pe({queryKey:["/api/auth/me"]}),S=(N==null?void 0:N.unitPreference)==="metric",k=S?BNe:LNe,P=S?zNe.map(V=>`${V} cm`):e6,E=S?"kg":"lbs",_=()=>{if(!(N!=null&&N.weight))return;const V=typeof N.weight=="string"?parseInt(N.weight):N.weight;if(!isNaN(V))return`${V} ${E}`},F=async V=>{oe("light");let J={unitPreference:V};if(N!=null&&N.weight){const me=typeof N.weight=="string"?parseInt(N.weight):N.weight;if(!isNaN(me)){if(V==="metric"&&!S){const de=Math.round(me*.453592);J.weight=Math.max(45,Math.min(135,de))}else if(V==="imperial"&&S){const de=Math.round(me*2.20462);J.weight=Math.max(100,Math.min(300,de))}}}if(N!=null&&N.height){if(V==="metric"&&!S){const me=N.height.match(/(\d+)'(\d+)"/);if(me){const de=parseInt(me[1]),ve=parseInt(me[2]),ce=de*12+ve,U=Math.round(ce*2.54),L=Math.max(120,Math.min(215,U));J.height=`${L} cm`}}else if(V==="imperial"&&S){const me=N.height.match(/(\d+)\s*cm/);if(me){const de=parseInt(me[1]),ve=Math.max(122,Math.min(213,de)),ce=Math.round(ve/2.54),U=Math.floor(ce/12),L=ce%12,z=Math.max(4,Math.min(7,U)),Ne=z===7?0:L;J.height=`${z}'${Ne}"`}}}A.mutate(J)};x.useEffect(()=>{if(n==="weight"&&f.current&&g.current!=="weight"){const V=parseInt(i)||(S?80:180),J=k.indexOf(V);J>=0&&(setTimeout(()=>{f.current&&(f.current.scrollTop=J*40)},50),g.current="weight")}else n!=="weight"&&n!=="height"&&(g.current=null)},[n,S]),x.useEffect(()=>{if(n==="height"&&h.current&&g.current!=="height"){let V=P.indexOf(i);V<0&&(S?V=P.indexOf("178 cm"):V=P.indexOf(`5'10"`)),V>=0&&(setTimeout(()=>{h.current&&(h.current.scrollTop=V*40)},50),g.current="height")}else["weight","height","beltLevel","style"].includes(n||"")||(g.current=null)},[n,S]),x.useEffect(()=>{if(n==="beltLevel"&&p.current&&g.current!=="beltLevel"){let V=dp.indexOf(i.toLowerCase());V<0&&(V=0),V>=0&&(setTimeout(()=>{p.current&&(p.current.scrollTop=V*40)},50),g.current="beltLevel")}},[n,i]),x.useEffect(()=>{if(n==="style"&&v.current&&g.current!=="style"){let V=up.indexOf(i.toLowerCase());V<0&&(V=0),V>=0&&(setTimeout(()=>{v.current&&(v.current.scrollTop=V*40)},50),g.current="style")}},[n,i]);const A=qe({mutationFn:async V=>{var de;console.log("[PROFILE] Saving updates:",V),console.log("[PROFILE] Token in localStorage:",((de=localStorage.getItem("sessionToken"))==null?void 0:de.substring(0,20))+"...");const me=await(await lt("PATCH","/api/auth/profile",V)).json();return console.log("[PROFILE] Save response:",me),me},onSuccess:V=>{console.log("[PROFILE] Save SUCCESS:",V),t.invalidateQueries({queryKey:["/api/auth/me"]}),s(null),a(""),oe("light")},onError:V=>{console.error("[PROFILE] Save FAILED:",V),oe("error")}}),T=async V=>{console.log("[CAMERA] ====== CAMERA BUTTON TAPPED ======"),console.log("[CAMERA] Source:",V===Ki.Camera?"CAMERA":"PHOTOS"),l(!1),d(!0);try{console.log("[CAMERA] About to call Camera.getPhoto..."),console.log("[CAMERA] Camera object exists:",!!Fu),console.log("[CAMERA] Camera.getPhoto exists:",!!(Fu!=null&&Fu.getPhoto));const J=await Fu.getPhoto({quality:80,allowEditing:!0,resultType:l1.DataUrl,source:V,width:400,height:400});if(console.log("[CAMERA] Camera.getPhoto returned successfully"),console.log("[CAMERA] Photo object:",J),console.log("[CAMERA] Has dataUrl:",!!(J!=null&&J.dataUrl)),!J.dataUrl){console.log("[CAMERA] No dataUrl - user cancelled or no photo returned"),d(!1);return}console.log("[CAMERA] dataUrl length:",J.dataUrl.length),console.log("[CAMERA] Starting upload to server..."),await M(J.dataUrl),console.log("[CAMERA] Upload complete")}catch(J){console.error("[CAMERA] ====== CAMERA ERROR ======"),console.error("[CAMERA] Error object:",J),console.error("[CAMERA] Error message:",J==null?void 0:J.message),console.error("[CAMERA] Error code:",J==null?void 0:J.code),console.error("[CAMERA] Full error JSON:",JSON.stringify(J,null,2));const me=(J==null?void 0:J.message)||String(J);me.includes("cancelled")||me.includes("User cancelled")?console.log("[CAMERA] User cancelled photo selection"):me.includes("permission")||me.includes("denied")?(console.error("[CAMERA] Permission denied:",me),alert("Camera or photo access was denied. Please enable access in Settings.")):me.includes("no camera")||me.includes("unavailable")?(console.error("[CAMERA] Camera unavailable:",me),alert("Camera is not available on this device.")):me.includes("UNIMPLEMENTED")?(console.error("[CAMERA] Plugin not installed - UNIMPLEMENTED error"),alert("Camera plugin not installed. Please reinstall the app.")):(console.error("[CAMERA] Unknown error:",J),alert("Camera error: "+me)),oe("error")}finally{console.log("[CAMERA] ====== CAMERA FLOW COMPLETE ======"),d(!1)}},M=async V=>{try{const J=await C(V,400),me=localStorage.getItem("sessionToken")||localStorage.getItem("token");if(!(await fetch(Zt("/api/auth/avatar"),{method:"POST",headers:{"Content-Type":"application/json",...me?{Authorization:`Bearer ${me}`}:{}},credentials:"include",body:JSON.stringify({avatarUrl:J})})).ok)throw new Error("Failed to upload avatar");t.invalidateQueries({queryKey:["/api/auth/me"]}),oe("success")}catch(J){console.error("[AVATAR] Upload error:",J),oe("error")}},O=async V=>{if(V.size>2*1024*1024){console.error("File too large (max 2MB)"),oe("error");return}d(!0),l(!1);try{const J=await new Promise((me,de)=>{const ve=new FileReader;ve.onload=ce=>{var U;return me((U=ce.target)==null?void 0:U.result)},ve.onerror=de,ve.readAsDataURL(V)});await M(J)}catch(J){console.error("Avatar upload error:",J),oe("error")}finally{d(!1)}},C=(V,J)=>new Promise(me=>{const de=document.createElement("img");de.onload=()=>{const ve=document.createElement("canvas");let ce=de.width,U=de.height;ce>U?ce>J&&(U=Math.round(U*J/ce),ce=J):U>J&&(ce=Math.round(ce*J/U),U=J),ve.width=ce,ve.height=U;const L=ve.getContext("2d");L==null||L.drawImage(de,0,0,ce,U),me(ve.toDataURL("image/jpeg",.8))},de.src=V}),R=async()=>{l(!1),d(!0);try{const V=localStorage.getItem("sessionToken")||localStorage.getItem("token");if(!(await fetch(Zt("/api/auth/avatar"),{method:"POST",headers:{"Content-Type":"application/json",...V?{Authorization:`Bearer ${V}`}:{}},credentials:"include",body:JSON.stringify({avatarUrl:null})})).ok)throw new Error("Failed to remove avatar");t.invalidateQueries({queryKey:["/api/auth/me"]}),oe("light")}catch(V){console.error("Avatar remove error:",V),oe("error")}finally{d(!1)}},I=V=>{oe("light"),e(V)},B=(V,J)=>{oe("light"),s(V),a(V==="beltLevel"||V==="style"?(J||"").toLowerCase():J||"")},H=()=>{if(!n)return;oe("medium");let V=i;n==="weight"&&(V=parseInt(i)||0),A.mutate({[n]:V})},Q=()=>{oe("light"),s(null),a("")},D=V=>({white:"#FFFFFF",blue:"#3B82F6",purple:"#8B5CF6",brown:"#92400E",black:"#1F2937"})[(V==null?void 0:V.toLowerCase())||"white"]||"#FFFFFF";if(w)return r.jsx("div",{style:{minHeight:"100vh",background:"#0A0A0B",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(De,{className:"animate-spin",size:32,color:"#8B5CF6"})});const te=({label:V,value:J,field:me,placeholder:de="Tap to set"})=>r.jsxs("button",{onClick:()=>B(me,String(J||"")),"data-testid":`button-edit-${me}`,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid #2A2A2E",padding:"16px 0",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",textAlign:"left"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"13px",color:"#71717A",marginBottom:"4px"},children:V}),r.jsx("div",{style:{fontSize:"16px",color:J?"#FFFFFF":"#52525B",textTransform:me==="beltLevel"||me==="style"?"capitalize":"none"},"data-testid":`text-${me}`,children:J||de})]}),r.jsx(Cn,{size:20,color:"#71717A"})]});return r.jsxs("div",{className:"ios-page",style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"100px"},children:[r.jsx("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E"},children:r.jsx("h1",{style:{fontSize:"28px",fontWeight:700,margin:0},children:"Profile"})}),r.jsxs("div",{style:{padding:"20px"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"32px"},children:[r.jsxs("button",{onClick:()=>{oe("light"),l(!0)},"data-testid":"button-edit-avatar",style:{width:"80px",height:"80px",borderRadius:"50%",background:N!=null&&N.avatarUrl?"transparent":`linear-gradient(135deg, ${D(N==null?void 0:N.beltLevel)} 0%, #8B5CF6 100%)`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",border:"none",cursor:"pointer",overflow:"hidden",position:"relative"},children:[c?r.jsx(De,{className:"animate-spin",size:32,color:"#8B5CF6"}):N!=null&&N.avatarUrl?r.jsx("img",{src:N.avatarUrl,alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx(Co,{size:36,color:"#FFFFFF"}),r.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"24px",height:"24px",borderRadius:"50%",background:"#8B5CF6",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #0A0A0B"},children:r.jsx(lj,{size:12,color:"#FFFFFF"})})]}),r.jsx("input",{ref:u,type:"file",accept:"image/*",style:{display:"none"},onChange:V=>{var me;const J=(me=V.target.files)==null?void 0:me[0];J&&O(J),V.target.value=""},"data-testid":"input-avatar-file"})]}),r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"0 20px",marginBottom:"24px",border:"1px solid #2A2A2E"},children:[r.jsx(te,{label:"Name",value:(N==null?void 0:N.name)||(N==null?void 0:N.displayName)||(N==null?void 0:N.username),field:"name"}),r.jsx(te,{label:"Belt",value:N==null?void 0:N.beltLevel,field:"beltLevel"}),r.jsx(te,{label:"Weight",value:_(),field:"weight",placeholder:"Tap to set"}),r.jsx(te,{label:"Height",value:N==null?void 0:N.height,field:"height",placeholder:"Tap to set"}),r.jsxs("div",{style:{padding:"16px 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},children:"Units"}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>F("imperial"),"data-testid":"button-unit-imperial",style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:500,cursor:"pointer",background:S?"#2A2A2E":"#8B5CF6",color:S?"#71717A":"#FFFFFF"},children:"Imperial"}),r.jsx("button",{onClick:()=>F("metric"),"data-testid":"button-unit-metric",style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:500,cursor:"pointer",background:S?"#8B5CF6":"#2A2A2E",color:S?"#FFFFFF":"#71717A"},children:"Metric"})]})]}),r.jsx("div",{style:{borderBottom:"none"},children:r.jsx(te,{label:"Style",value:N==null?void 0:N.style,field:"style"})})]}),r.jsx("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E"},children:r.jsxs("button",{onClick:()=>I("/ios-settings"),"data-testid":"button-settings",style:{width:"100%",background:"transparent",border:"none",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(_l,{size:20,color:"#71717A"}),r.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"App Settings"})]}),r.jsx(Cn,{size:20,color:"#71717A"})]})})]}),n&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-end",zIndex:1e3},onClick:Q,"data-testid":"modal-edit-overlay",children:r.jsxs("div",{style:{width:"100%",background:"#1A1A1D",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",padding:"20px",paddingBottom:"max(20px, env(safe-area-inset-bottom))"},onClick:V=>V.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[r.jsx("button",{onClick:Q,"data-testid":"button-cancel-edit",style:{background:"transparent",border:"none",padding:"8px",cursor:"pointer"},children:r.jsx(ys,{size:24,color:"#71717A"})}),r.jsxs("span",{style:{fontSize:"17px",fontWeight:600,textTransform:"capitalize"},children:["Edit ",n==="beltLevel"?"Belt":n]}),r.jsx("button",{onClick:H,disabled:A.isPending,"data-testid":"button-save-edit",style:{background:"transparent",border:"none",padding:"8px",cursor:"pointer",opacity:A.isPending?.5:1},children:A.isPending?r.jsx(De,{className:"animate-spin",size:24,color:"#8B5CF6"}):r.jsx(Kn,{size:24,color:"#8B5CF6"})})]}),n==="beltLevel"?r.jsx("div",{children:r.jsxs("div",{style:{height:"200px",overflow:"hidden",position:"relative",background:"#0A0A0B",borderRadius:"12px",border:"1px solid #2A2A2E"},"data-testid":"picker-belt",children:[r.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"40px",transform:"translateY(-50%)",background:"rgba(139, 92, 246, 0.2)",borderTop:"1px solid #8B5CF6",borderBottom:"1px solid #8B5CF6",pointerEvents:"none",zIndex:1}}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"80px",background:"linear-gradient(to bottom, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"80px",background:"linear-gradient(to top, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),r.jsx("div",{ref:p,style:{height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",paddingTop:"80px",paddingBottom:"80px"},onScroll:V=>{const J=V.currentTarget,me=40,de=J.scrollTop,ve=Math.round(de/me);dp[ve]!==void 0&&ve!==y.current&&(oe("light"),y.current=ve,a(dp[ve]))},children:dp.map(V=>r.jsxs("div",{onClick:()=>a(V),"data-testid":`option-belt-${V}`,style:{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",fontSize:"20px",color:i===V?"#FFFFFF":"#71717A",fontWeight:i===V?600:400,scrollSnapAlign:"center",cursor:"pointer",textTransform:"capitalize"},children:[r.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:D(V),border:V==="white"?"1px solid #52525B":"none"}}),V]},V))})]})}):n==="style"?r.jsx("div",{children:r.jsxs("div",{style:{height:"200px",overflow:"hidden",position:"relative",background:"#0A0A0B",borderRadius:"12px",border:"1px solid #2A2A2E"},"data-testid":"picker-style",children:[r.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"40px",transform:"translateY(-50%)",background:"rgba(139, 92, 246, 0.2)",borderTop:"1px solid #8B5CF6",borderBottom:"1px solid #8B5CF6",pointerEvents:"none",zIndex:1}}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"80px",background:"linear-gradient(to bottom, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"80px",background:"linear-gradient(to top, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),r.jsx("div",{ref:v,style:{height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",paddingTop:"80px",paddingBottom:"80px"},onScroll:V=>{const J=V.currentTarget,me=40,de=J.scrollTop,ve=Math.round(de/me);up[ve]!==void 0&&ve!==j.current&&(oe("light"),j.current=ve,a(up[ve]))},children:up.map(V=>r.jsx("div",{onClick:()=>a(V),"data-testid":`option-style-${V}`,style:{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:i===V?"#FFFFFF":"#71717A",fontWeight:i===V?600:400,scrollSnapAlign:"center",cursor:"pointer"},children:V==="nogi"?"No-Gi":V==="both"?"Both":"Gi"},V))})]})}):n==="weight"?r.jsx("div",{children:r.jsxs("div",{style:{height:"200px",overflow:"hidden",position:"relative",background:"#0A0A0B",borderRadius:"12px",border:"1px solid #2A2A2E"},"data-testid":"picker-weight",children:[r.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"40px",transform:"translateY(-50%)",background:"rgba(139, 92, 246, 0.2)",borderTop:"1px solid #8B5CF6",borderBottom:"1px solid #8B5CF6",pointerEvents:"none",zIndex:1}}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"80px",background:"linear-gradient(to bottom, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"80px",background:"linear-gradient(to top, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),r.jsx("div",{ref:f,style:{height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",paddingTop:"80px",paddingBottom:"80px"},onScroll:V=>{const J=V.currentTarget,me=40,de=J.scrollTop,ve=Math.round(de/me);k[ve]!==void 0&&ve!==m.current&&(oe("light"),m.current=ve,a(String(k[ve])))},children:k.map(V=>r.jsxs("div",{onClick:()=>a(String(V)),style:{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:i===String(V)?"#FFFFFF":"#71717A",fontWeight:i===String(V)?600:400,scrollSnapAlign:"center",cursor:"pointer"},children:[V," ",E]},V))})]})}):n==="height"?r.jsx("div",{children:r.jsxs("div",{style:{height:"200px",overflow:"hidden",position:"relative",background:"#0A0A0B",borderRadius:"12px",border:"1px solid #2A2A2E"},"data-testid":"picker-height",children:[r.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"40px",transform:"translateY(-50%)",background:"rgba(139, 92, 246, 0.2)",borderTop:"1px solid #8B5CF6",borderBottom:"1px solid #8B5CF6",pointerEvents:"none",zIndex:1}}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"80px",background:"linear-gradient(to bottom, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"80px",background:"linear-gradient(to top, #0A0A0B, transparent)",pointerEvents:"none",zIndex:2}}),r.jsx("div",{ref:h,style:{height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",paddingTop:"80px",paddingBottom:"80px"},onScroll:V=>{const J=V.currentTarget,me=40,de=J.scrollTop,ve=Math.round(de/me);P[ve]!==void 0&&ve!==b.current&&(oe("light"),b.current=ve,a(P[ve]))},children:P.map(V=>r.jsx("div",{onClick:()=>a(V),style:{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:i===V?"#FFFFFF":"#71717A",fontWeight:i===V?600:400,scrollSnapAlign:"center",cursor:"pointer"},children:V},V))})]})}):r.jsx("input",{type:"text",value:i,onChange:V=>a(V.target.value),placeholder:`Enter ${n}`,autoFocus:!0,"data-testid":`input-${n}`,style:{width:"100%",padding:"16px",background:"#0A0A0B",border:"1px solid #2A2A2E",borderRadius:"12px",color:"#FFFFFF",fontSize:"16px",outline:"none"}})]})}),o&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-end",zIndex:1e3},onClick:()=>l(!1),"data-testid":"modal-avatar-overlay",children:r.jsxs("div",{style:{width:"100%",background:"#1A1A1D",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",padding:"20px",paddingBottom:"max(20px, env(safe-area-inset-bottom))"},onClick:V=>V.stopPropagation(),children:[r.jsx("div",{style:{width:"36px",height:"4px",background:"#3A3A3C",borderRadius:"2px",margin:"0 auto 20px"}}),r.jsxs("button",{onClick:()=>T(Ki.Camera),"data-testid":"button-take-photo",style:{width:"100%",padding:"16px",background:"#2A2A2E",border:"none",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",marginBottom:"8px"},children:[r.jsx(lj,{size:20,color:"#FFFFFF"}),r.jsx("span",{style:{color:"#FFFFFF",fontSize:"16px"},children:"Take Photo"})]}),r.jsxs("button",{onClick:()=>T(Ki.Photos),"data-testid":"button-choose-photo",style:{width:"100%",padding:"16px",background:"#2A2A2E",border:"none",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",marginBottom:"8px"},children:[r.jsx(tq,{size:20,color:"#FFFFFF"}),r.jsx("span",{style:{color:"#FFFFFF",fontSize:"16px"},children:"Choose from Library"})]}),(N==null?void 0:N.avatarUrl)&&r.jsxs("button",{onClick:R,"data-testid":"button-remove-photo",style:{width:"100%",padding:"16px",background:"transparent",border:"none",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",marginBottom:"8px"},children:[r.jsx(Si,{size:20,color:"#DC2626"}),r.jsx("span",{style:{color:"#DC2626",fontSize:"16px"},children:"Remove Photo"})]}),r.jsx("button",{onClick:()=>l(!1),"data-testid":"button-cancel-avatar",style:{width:"100%",padding:"16px",background:"transparent",border:"none",borderRadius:"12px",cursor:"pointer",marginTop:"8px"},children:r.jsx("span",{style:{color:"#71717A",fontSize:"16px"},children:"Cancel"})})]})}),r.jsx($d,{})]})}function tc(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"N/A"}}function UNe(){const[,e]=it(),t=va(),n=PN(),[s,i]=x.useState(!0),[a,o]=x.useState(!0),[l,c]=x.useState(!0),[d,u]=x.useState(!0),[f,h]=x.useState(!0),[p,v]=x.useState(!1),[g,y]=x.useState(!1),[j,m]=x.useState(!1),[b,N]=x.useState(!1),[w,S]=x.useState(!1),[k,P]=x.useState("confirm"),{data:E}=pe({queryKey:["/api/auth/me"]}),{data:_,isLoading:F}=pe({queryKey:["/api/subscription"]}),A=qe({mutationFn:async()=>{const D=localStorage.getItem("sessionToken")||localStorage.getItem("token");if(!(await fetch(Zt("/api/user/chat-history"),{method:"DELETE",credentials:"include",headers:{...D?{Authorization:`Bearer ${D}`}:{}}})).ok)throw new Error("Failed to delete chat history");return{success:!0}},onSuccess:()=>{n.clearMessages(),t.invalidateQueries({queryKey:["/api/chat/history"]}),y(!1),oe("success")}}),T=qe({mutationFn:async()=>{const D=localStorage.getItem("sessionToken")||localStorage.getItem("token");if(!(await fetch(Zt("/api/user/reset-profile"),{method:"DELETE",credentials:"include",headers:{...D?{Authorization:`Bearer ${D}`}:{}}})).ok)throw new Error("Failed to reset profile");return{success:!0}},onSuccess:()=>{n.clearMessages(),t.invalidateQueries({queryKey:["/api/auth/me"]}),t.invalidateQueries({queryKey:["/api/chat/history"]}),m(!1),oe("success"),e("/ios-onboarding")}}),M=qe({mutationFn:async()=>{const D=localStorage.getItem("sessionToken")||localStorage.getItem("token"),te=await fetch(Zt("/api/subscription/cancel"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...D?{Authorization:`Bearer ${D}`}:{}}});if(!te.ok){const V=await te.json();throw new Error(V.error||"Failed to cancel subscription")}return te.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/subscription"]}),t.invalidateQueries({queryKey:["/api/auth/me"]}),N(!1),oe("success")}}),O=qe({mutationFn:async()=>{const D=localStorage.getItem("sessionToken")||localStorage.getItem("token"),te=await fetch(Zt("/api/user/account"),{method:"DELETE",credentials:"include",headers:{...D?{Authorization:`Bearer ${D}`}:{}}});if(!te.ok){const V=await te.json();throw new Error(V.error||"Failed to delete account")}return te.json()},onSuccess:async()=>{oe("success"),S(!1),await nd(),e("/ios-login")}}),C=()=>{oe("light"),e("/ios-profile")},R=async()=>{oe("medium"),v(!0);try{await nd(),e("/ios-login")}catch(D){console.error("Logout error:",D),v(!1)}},I=D=>{oe("light"),e(D)},B=()=>{oe("medium"),(_==null?void 0:_.type)==="lifetime"?P("lifetime"):_!=null&&_.cancelAtPeriodEnd?P("already_cancelled"):P("confirm"),N(!0)},H=(D,te)=>{oe("light"),D(!te)},Q=({enabled:D,onToggle:te,testId:V})=>r.jsx("button",{onClick:te,style:{width:"51px",height:"31px",borderRadius:"15.5px",background:D?"#8B5CF6":"#3A3A3C",border:"none",padding:"2px",cursor:"pointer",transition:"background 0.2s ease"},"data-testid":V,children:r.jsx("div",{style:{width:"27px",height:"27px",borderRadius:"50%",background:"#FFFFFF",transition:"transform 0.2s ease",transform:D?"translateX(20px)":"translateX(0)"}})});return r.jsxs("div",{style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF",paddingBottom:"40px"},children:[r.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",display:"flex",alignItems:"center",gap:"16px"},children:[r.jsx("button",{onClick:C,"data-testid":"button-back",style:{background:"transparent",border:"none",padding:"8px",marginLeft:"-8px",cursor:"pointer",display:"flex",alignItems:"center"},children:r.jsx(Gn,{size:24,color:"#8B5CF6"})}),r.jsx("h1",{style:{fontSize:"20px",fontWeight:600,margin:0},children:"Settings"})]}),r.jsxs("div",{style:{padding:"20px"},children:[r.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"Subscription"}),r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:[F&&r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(_s,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Plan"})]}),r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Loading..."})]}),!F&&(_==null?void 0:_.type)==="lifetime"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(_s,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Plan"})]}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF",fontWeight:600},"data-testid":"text-plan",children:F?"...":"Lifetime Member"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Status"}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},children:"No charge - Forever"})]})]}),!F&&(_==null?void 0:_.type)==="trial"&&!(_!=null&&_.cancelAtPeriodEnd)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(_s,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Plan"})]}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF",fontWeight:600},"data-testid":"text-plan",children:"Monthly ($19.99/month)"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Status"}),r.jsx("span",{style:{fontSize:"15px",color:"#8B5CF6"},children:"7-day free trial"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"First billing"}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},"data-testid":"text-billing-date",children:tc((_==null?void 0:_.trialEnd)||(_==null?void 0:_.billingDate))})]})]}),!F&&(_==null?void 0:_.type)==="referral"&&!(_!=null&&_.cancelAtPeriodEnd)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(_s,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Plan"})]}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF",fontWeight:600},"data-testid":"text-plan",children:"Monthly ($19.99/month)"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Status"}),r.jsx("span",{style:{fontSize:"15px",color:"#8B5CF6"},children:"30-day free trial"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"First billing"}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},"data-testid":"text-billing-date",children:tc((_==null?void 0:_.trialEnd)||(_==null?void 0:_.billingDate))})]})]}),!F&&(_==null?void 0:_.type)==="paying"&&!(_!=null&&_.cancelAtPeriodEnd)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(_s,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Plan"})]}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF",fontWeight:600},"data-testid":"text-plan",children:"Monthly"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Price"}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},children:"$19.99/month"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Next billing"}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},"data-testid":"text-billing-date",children:tc(_==null?void 0:_.billingDate)})]})]}),!F&&(_==null?void 0:_.cancelAtPeriodEnd)&&(_==null?void 0:_.type)!=="lifetime"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(_s,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Plan"})]}),r.jsx("span",{style:{fontSize:"15px",color:"#F59E0B",fontWeight:600},"data-testid":"text-plan",children:"Monthly (Cancelled)"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Access until"}),r.jsx("span",{style:{fontSize:"15px",color:"#F59E0B"},"data-testid":"text-billing-date",children:tc(_==null?void 0:_.billingDate)})]}),r.jsxs("div",{style:{padding:"16px 20px",background:"rgba(245, 158, 11, 0.1)"},children:[r.jsx("p",{style:{fontSize:"14px",color:"#F59E0B",margin:0},children:"Your subscription has been cancelled."}),r.jsx("p",{style:{fontSize:"14px",color:"#F59E0B",margin:"4px 0 0 0"},children:"You won't be charged again."})]})]}),!F&&((_==null?void 0:_.type)==="none"||!(_!=null&&_.type)&&!(_!=null&&_.cancelAtPeriodEnd))&&r.jsx(r.Fragment,{children:r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(_s,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Plan"})]}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF",fontWeight:600},"data-testid":"text-plan",children:"No active subscription"})]})}),!F&&(_==null?void 0:_.type)&&(_==null?void 0:_.type)!=="none"&&r.jsx("button",{onClick:B,"data-testid":"button-cancel-subscription",style:{width:"100%",background:"transparent",border:"none",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderTop:"1px solid #2A2A2E"},children:r.jsx("span",{style:{fontSize:"15px",color:"#EF4444"},children:"Cancel Subscription"})})]}),E&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"Account"}),r.jsx("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:r.jsxs("div",{style:{padding:"14px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(gs,{size:18,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px",color:"#71717A"},children:"Email"})]}),r.jsx("span",{style:{fontSize:"15px",color:"#FFFFFF"},"data-testid":"text-user-email",children:E.email||"Not set"})]})})]}),r.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"App Settings"}),r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:[r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(Q7,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px"},children:"Push Notifications"})]}),r.jsx(Q,{enabled:s,onToggle:()=>H(i,s),testId:"toggle-notifications"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(dq,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px"},children:"Dark Mode"})]}),r.jsx(Q,{enabled:a,onToggle:()=>H(o,a),testId:"toggle-dark-mode"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(jq,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px"},children:"Sound Effects"})]}),r.jsx(Q,{enabled:l,onToggle:()=>H(c,l),testId:"toggle-sound"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2A2A2E"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(bq,{size:20,color:"#71717A"}),r.jsx("span",{style:{fontSize:"15px"},children:"Haptic Feedback"})]}),r.jsx(Q,{enabled:d,onToggle:()=>H(u,d),testId:"toggle-haptics"})]}),r.jsxs("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(mN,{size:20,color:"#71717A"}),r.jsxs("div",{children:[r.jsx("span",{style:{fontSize:"15px"},children:"Voice Input"}),r.jsx("p",{style:{fontSize:"12px",color:"#71717A",margin:"2px 0 0 0"},children:"Use microphone with Whisper AI"})]})]}),r.jsx(Q,{enabled:f,onToggle:()=>H(h,f),testId:"toggle-voice-input"})]})]}),r.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"Data & Privacy"}),r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:[r.jsxs("button",{onClick:()=>{oe("light"),y(!0)},"data-testid":"button-delete-chat",style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid #2A2A2E",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(Si,{size:20,color:"#71717A"}),r.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Delete Chat History"})]}),r.jsx("p",{style:{fontSize:"13px",color:"#71717A",margin:"4px 0 0 32px",textAlign:"left"},children:"Removes all messages. Your profile stays intact."})]}),r.jsx(Cn,{size:20,color:"#71717A"})]}),r.jsxs("button",{onClick:()=>{oe("light"),m(!0)},"data-testid":"button-reset-profile",style:{width:"100%",background:"transparent",border:"none",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(hq,{size:20,color:"#71717A"}),r.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Reset Professor OS Memory"})]}),r.jsx("p",{style:{fontSize:"13px",color:"#71717A",margin:"4px 0 0 32px",textAlign:"left"},children:"Start completely fresh. Removes conversations AND profile."})]}),r.jsx(Cn,{size:20,color:"#71717A"})]})]}),r.jsx("h2",{style:{fontSize:"13px",fontWeight:600,color:"#71717A",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingLeft:"8px"},children:"Legal & Support"}),r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E",marginBottom:"24px"},children:[r.jsxs("button",{onClick:()=>I("/ios-terms"),"data-testid":"button-terms",style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid #2A2A2E",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(Df,{size:20,color:"#71717A"}),r.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Terms of Service"})]}),r.jsx(Cn,{size:20,color:"#71717A"})]}),r.jsxs("button",{onClick:()=>I("/ios-privacy"),"data-testid":"button-privacy",style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid #2A2A2E",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(Ni,{size:20,color:"#71717A"}),r.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Privacy Policy"})]}),r.jsx(Cn,{size:20,color:"#71717A"})]}),r.jsxs("button",{onClick:()=>I("/ios-help"),"data-testid":"button-help",style:{width:"100%",background:"transparent",border:"none",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(VI,{size:20,color:"#71717A"}),r.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px"},children:"Help & Support"})]}),r.jsx(Cn,{size:20,color:"#71717A"})]})]}),r.jsxs("button",{onClick:R,disabled:p,"data-testid":"button-logout",style:{width:"100%",background:"#1A1A1D",border:"1px solid #DC2626",borderRadius:"16px",padding:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:p?"not-allowed":"pointer",opacity:p?.5:1},children:[p?r.jsx(De,{className:"animate-spin",size:20,color:"#DC2626"}):r.jsx(Vd,{size:20,color:"#DC2626"}),r.jsx("span",{style:{color:"#DC2626",fontSize:"15px",fontWeight:600},children:p?"Logging out...":"Log Out"})]}),r.jsxs("button",{onClick:()=>{oe("medium"),S(!0)},"data-testid":"button-delete-account",style:{width:"100%",background:"#DC2626",border:"none",borderRadius:"16px",padding:"16px",marginTop:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer"},children:[r.jsx(Si,{size:20,color:"#FFFFFF"}),r.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px",fontWeight:600},children:"Delete Account"})]}),r.jsx("p",{style:{marginTop:"16px",padding:"0 8px",fontSize:"13px",color:"#71717A",lineHeight:1.5,textAlign:"center"},children:"BJJ OS v1.0.0"})]}),g&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:()=>y(!1),"data-testid":"modal-delete-overlay",children:r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"24px",maxWidth:"320px",width:"100%"},onClick:D=>D.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px",color:"#FFFFFF"},children:"Delete Chat History?"}),r.jsx("p",{style:{fontSize:"14px",color:"#A1A1AA",lineHeight:1.5,marginBottom:"24px"},children:"This will permanently delete all your conversations with Professor OS. Your profile (belt rank, goals, preferences) will not be affected. This cannot be undone."}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>y(!1),"data-testid":"button-cancel-delete",style:{flex:1,padding:"14px",background:"#2A2A2E",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:()=>A.mutate(),disabled:A.isPending,"data-testid":"button-confirm-delete",style:{flex:1,padding:"14px",background:"#DC2626",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer",opacity:A.isPending?.5:1},children:A.isPending?"Deleting...":"Delete"})]})]})}),j&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:()=>m(!1),"data-testid":"modal-reset-overlay",children:r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"24px",maxWidth:"320px",width:"100%"},onClick:D=>D.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px",color:"#FFFFFF"},children:"Reset Professor OS Memory?"}),r.jsx("p",{style:{fontSize:"14px",color:"#A1A1AA",lineHeight:1.5,marginBottom:"24px"},children:"Professor OS will forget everything about your training history, goals, and preferences. You'll start fresh like a new user. This cannot be undone."}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>m(!1),"data-testid":"button-cancel-reset",style:{flex:1,padding:"14px",background:"#2A2A2E",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:()=>T.mutate(),disabled:T.isPending,"data-testid":"button-confirm-reset",style:{flex:1,padding:"14px",background:"#DC2626",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer",opacity:T.isPending?.5:1},children:T.isPending?"Resetting...":"Reset"})]})]})}),b&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:()=>N(!1),"data-testid":"modal-cancel-subscription-overlay",children:r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"24px",maxWidth:"320px",width:"100%"},onClick:D=>D.stopPropagation(),children:[k==="lifetime"&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px",color:"#FFFFFF"},children:"Lifetime Membership"}),r.jsx("p",{style:{fontSize:"14px",color:"#A1A1AA",lineHeight:1.5,marginBottom:"24px"},children:"You have a lifetime membership. There's nothing to cancel."}),r.jsx("button",{onClick:()=>N(!1),"data-testid":"button-ok-lifetime",style:{width:"100%",padding:"14px",background:"#8B5CF6",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer"},children:"OK"})]}),k==="already_cancelled"&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px",color:"#FFFFFF"},children:"Already Cancelled"}),r.jsxs("p",{style:{fontSize:"14px",color:"#A1A1AA",lineHeight:1.5,marginBottom:"24px"},children:["Your subscription is already cancelled. You have access until ",tc(_==null?void 0:_.billingDate),"."]}),r.jsx("button",{onClick:()=>N(!1),"data-testid":"button-ok-cancelled",style:{width:"100%",padding:"14px",background:"#8B5CF6",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer"},children:"OK"})]}),k==="confirm"&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px",color:"#FFFFFF"},children:"Cancel Subscription?"}),r.jsxs("p",{style:{fontSize:"14px",color:"#A1A1AA",lineHeight:1.5,marginBottom:"24px"},children:["Are you sure? You'll keep access until ",tc((_==null?void 0:_.trialEnd)||(_==null?void 0:_.billingDate)),"."]}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>N(!1),"data-testid":"button-keep-subscription",style:{flex:1,padding:"14px",background:"#8B5CF6",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer"},children:"Keep Subscription"}),r.jsx("button",{onClick:()=>M.mutate(),disabled:M.isPending,"data-testid":"button-confirm-cancel-subscription",style:{flex:1,padding:"14px",background:"#2A2A2E",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer",opacity:M.isPending?.5:1},children:M.isPending?"Cancelling...":"Yes, Cancel"})]})]})]})}),w&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:()=>S(!1),"data-testid":"modal-delete-account-overlay",children:r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"24px",maxWidth:"320px",width:"100%"},onClick:D=>D.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px",color:"#FFFFFF"},children:"Delete Account?"}),r.jsx("p",{style:{fontSize:"14px",color:"#A1A1AA",lineHeight:1.5,marginBottom:"24px"},children:"This will permanently delete your account and all data. Any active subscriptions will be cancelled. This cannot be undone."}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>S(!1),"data-testid":"button-cancel-delete-account",style:{flex:1,padding:"14px",background:"#2A2A2E",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:()=>O.mutate(),disabled:O.isPending,"data-testid":"button-confirm-delete-account",style:{flex:1,padding:"14px",background:"#DC2626",border:"none",borderRadius:"12px",color:"#FFFFFF",fontSize:"15px",fontWeight:600,cursor:"pointer",opacity:O.isPending?.5:1},children:O.isPending?"Deleting...":"Delete Account"})]})]})})]})}function VNe(){const e=()=>{oe("light"),window.history.back()};return r.jsxs("div",{style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF"},children:[r.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",display:"flex",alignItems:"center",gap:"16px",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[r.jsx("button",{onClick:e,"data-testid":"button-back",style:{background:"transparent",border:"none",padding:"8px",marginLeft:"-8px",cursor:"pointer",display:"flex",alignItems:"center"},children:r.jsx(Gn,{size:24,color:"#8B5CF6"})}),r.jsx("h1",{style:{fontSize:"20px",fontWeight:600,margin:0},children:"Terms of Service"})]}),r.jsxs("div",{style:{padding:"20px",paddingBottom:"100px",lineHeight:1.7},children:[r.jsx("p",{style:{color:"#71717A",fontSize:"13px",marginBottom:"24px"},children:"Last updated: December 2024"}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"1. Acceptance of Terms"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:'By accessing and using BJJ OS ("the App"), you accept and agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the App.'}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"2. Description of Service"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"BJJ OS is an AI-powered training platform for Brazilian Jiu-Jitsu practitioners. The App provides personalized coaching advice, video recommendations, and training resources. The App is intended for educational and informational purposes only."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"3. User Accounts"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"You are responsible for maintaining the confidentiality of your account credentials. You agree to provide accurate information when creating your account and to update your information as needed."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"4. Subscription and Payments"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"Some features of BJJ OS require a paid subscription. Subscription fees are billed in advance on a monthly or annual basis. You may cancel your subscription at any time, but no refunds will be provided for partial billing periods."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"5. Disclaimer"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"BJJ OS provides training advice for educational purposes only. The App is not a substitute for professional instruction. Always train under qualified supervision and consult a physician before beginning any exercise program. We are not liable for any injuries resulting from training activities."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"6. Intellectual Property"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"All content in the App, including text, graphics, logos, and software, is the property of BJJ OS or its licensors and is protected by intellectual property laws. You may not reproduce, distribute, or create derivative works without our express permission."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"7. Changes to Terms"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"We reserve the right to modify these Terms at any time. We will notify users of significant changes via the App or email. Continued use of the App after changes constitutes acceptance of the new Terms."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"8. Contact"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"For questions about these Terms, please contact us at support@bjjos.app"})]})]})}function WNe(){const e=()=>{oe("light"),window.history.back()};return r.jsxs("div",{style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF"},children:[r.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",display:"flex",alignItems:"center",gap:"16px",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[r.jsx("button",{onClick:e,"data-testid":"button-back",style:{background:"transparent",border:"none",padding:"8px",marginLeft:"-8px",cursor:"pointer",display:"flex",alignItems:"center"},children:r.jsx(Gn,{size:24,color:"#8B5CF6"})}),r.jsx("h1",{style:{fontSize:"20px",fontWeight:600,margin:0},children:"Privacy Policy"})]}),r.jsxs("div",{style:{padding:"20px",paddingBottom:"100px",lineHeight:1.7},children:[r.jsx("p",{style:{color:"#71717A",fontSize:"13px",marginBottom:"24px"},children:"Last updated: December 2024"}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"1. Information We Collect"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"16px"},children:"We collect information you provide directly, including:"}),r.jsxs("ul",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px",paddingLeft:"20px"},children:[r.jsx("li",{style:{marginBottom:"8px"},children:"Account information (email, name, belt level)"}),r.jsx("li",{style:{marginBottom:"8px"},children:"Training preferences and goals"}),r.jsx("li",{style:{marginBottom:"8px"},children:"Chat conversations with Professor OS"}),r.jsx("li",{style:{marginBottom:"8px"},children:"Video viewing history and saved content"})]}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"2. How We Use Your Information"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"16px"},children:"We use your information to:"}),r.jsxs("ul",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px",paddingLeft:"20px"},children:[r.jsx("li",{style:{marginBottom:"8px"},children:"Provide personalized training recommendations"}),r.jsx("li",{style:{marginBottom:"8px"},children:"Improve our AI coaching capabilities"}),r.jsx("li",{style:{marginBottom:"8px"},children:"Send you relevant training content and updates"}),r.jsx("li",{style:{marginBottom:"8px"},children:"Process payments and manage subscriptions"})]}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"3. Data Storage and Security"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"Your data is stored securely using industry-standard encryption. We use secure cloud infrastructure to protect your information. We retain your data for as long as your account is active or as needed to provide services."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"4. AI and Chat Data"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"Conversations with Professor OS are used to improve coaching quality and personalize your experience. Chat data may be analyzed to enhance our AI models. We do not share individual conversations with third parties."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"5. Third-Party Services"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"We use trusted third-party services for payments, analytics, and AI processing. These services have their own privacy policies. We only share the minimum data necessary to provide our services."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"6. Your Rights"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"16px"},children:"You have the right to:"}),r.jsxs("ul",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px",paddingLeft:"20px"},children:[r.jsx("li",{style:{marginBottom:"8px"},children:"Access your personal data"}),r.jsx("li",{style:{marginBottom:"8px"},children:"Request correction of inaccurate data"}),r.jsx("li",{style:{marginBottom:"8px"},children:"Delete your account and associated data"}),r.jsx("li",{style:{marginBottom:"8px"},children:"Export your data in a portable format"})]}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"7. Children's Privacy"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"BJJ OS is not intended for children under 13. We do not knowingly collect information from children under 13. If you believe we have collected such information, please contact us immediately."}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"12px"},children:"8. Contact Us"}),r.jsx("p",{style:{color:"#A1A1AA",fontSize:"15px",marginBottom:"24px"},children:"For privacy-related inquiries, please contact us at privacy@bjjos.app"})]})]})}const pO=[{question:"How does Professor OS work?",answer:"Professor OS is your AI coach with perfect memory. It learns your game - your strengths, struggles, and goals. The more you share about your training, the smarter it gets. It draws from over 3,500 analyzed technique videos to give you personalized recommendations with exact timestamps."},{question:"Can I cancel my subscription anytime?",answer:"Yes. Cancel anytime with no questions asked. Your subscription stays active until the end of your billing period."},{question:"Is my data private?",answer:"Yes. Your conversations are private and only used to improve your coaching experience. You can delete your chat history or reset Professor OS memory anytime in Settings."}];function HNe(){const[e,t]=x.useState(null),n=()=>{oe("light"),window.history.back()},s=i=>{oe("light"),t(e===i?null:i)};return r.jsxs("div",{style:{minHeight:"100vh",background:"#0A0A0B",color:"#FFFFFF"},children:[r.jsxs("div",{style:{padding:"16px 20px",paddingTop:"max(16px, env(safe-area-inset-top))",borderBottom:"1px solid #2A2A2E",display:"flex",alignItems:"center",gap:"16px",position:"sticky",top:0,background:"#0A0A0B",zIndex:10},children:[r.jsx("button",{onClick:n,"data-testid":"button-back",style:{background:"transparent",border:"none",padding:"8px",marginLeft:"-8px",cursor:"pointer",display:"flex",alignItems:"center"},children:r.jsx(Gn,{size:24,color:"#8B5CF6"})}),r.jsx("h1",{style:{fontSize:"20px",fontWeight:600,margin:0},children:"Help & Support"})]}),r.jsxs("div",{style:{padding:"20px",paddingBottom:"100px"},children:[r.jsxs("div",{style:{background:"#1A1A1D",borderRadius:"16px",padding:"20px",marginBottom:"24px",border:"1px solid #2A2A2E"},children:[r.jsx("h2",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px"},children:"Contact Support"}),r.jsxs("a",{href:"mailto:support@bjjos.app",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#2A2A2E",borderRadius:"12px",textDecoration:"none",marginBottom:"12px"},"data-testid":"link-email-support",children:[r.jsx(gs,{size:20,color:"#8B5CF6"}),r.jsxs("div",{children:[r.jsx("div",{style:{color:"#FFFFFF",fontSize:"15px",fontWeight:500},children:"Email Support"}),r.jsx("div",{style:{color:"#71717A",fontSize:"13px"},children:"support@bjjos.app"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#2A2A2E",borderRadius:"12px"},children:[r.jsx(Bf,{size:20,color:"#8B5CF6"}),r.jsxs("div",{children:[r.jsx("div",{style:{color:"#FFFFFF",fontSize:"15px",fontWeight:500},children:"Response Time"}),r.jsx("div",{style:{color:"#71717A",fontSize:"13px"},children:"Usually within 24 hours"})]})]})]}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px"},children:"Frequently Asked Questions"}),r.jsx("div",{style:{background:"#1A1A1D",borderRadius:"16px",overflow:"hidden",border:"1px solid #2A2A2E"},children:pO.map((i,a)=>r.jsxs("div",{style:{borderBottom:a<pO.length-1?"1px solid #2A2A2E":"none"},children:[r.jsxs("button",{onClick:()=>s(a),"data-testid":`faq-${a}`,style:{width:"100%",padding:"16px 20px",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",textAlign:"left"},children:[r.jsx("span",{style:{color:"#FFFFFF",fontSize:"15px",fontWeight:500,flex:1,paddingRight:"12px"},children:i.question}),e===a?r.jsx(fN,{size:20,color:"#71717A"}):r.jsx(ji,{size:20,color:"#71717A"})]}),e===a&&r.jsx("div",{style:{padding:"0 20px 16px 20px",color:"#A1A1AA",fontSize:"14px",lineHeight:1.6},children:i.answer})]},a))}),r.jsx("p",{style:{marginTop:"24px",textAlign:"center",color:"#71717A",fontSize:"13px"},children:"Can't find what you're looking for? Email us anytime."})]})]})}console.log(" iOS SUBSCRIBE loaded");function KNe(){const[,e]=it(),{toast:t}=Je(),[n,s]=x.useState(!1),[i,a]=x.useState(!1),[o,l]=x.useState(!1),[c,d]=x.useState("");x.useEffect(()=>{u()},[]);const u=async()=>{try{const{initApplePurchase:g,registerProducts:y,isStoreReady:j}=await or(async()=>{const{initApplePurchase:b,registerProducts:N,isStoreReady:w}=await Promise.resolve().then(()=>pf);return{initApplePurchase:b,registerProducts:N,isStoreReady:w}},void 0);await g(),await y();const m=setInterval(()=>{j()&&(l(!0),clearInterval(m))},500);setTimeout(()=>clearInterval(m),1e4)}catch(g){console.error("[SUBSCRIBE] Store init error:",g),l(!0)}},f=async()=>{var g;d(""),oe("light"),a(!0);try{const{purchaseProduct:y,restorePurchases:j}=await or(async()=>{const{purchaseProduct:b,restorePurchases:N}=await Promise.resolve().then(()=>pf);return{purchaseProduct:b,restorePurchases:N}},void 0),m=await y("bjjos_monthly");if(m.success)oe("success"),t({title:"Subscription activated!",description:"Welcome to BJJ OS"}),e("/ios-onboarding");else throw new Error(m.error||"Purchase failed")}catch(y){if(console.error("[SUBSCRIBE] Purchase error:",y),(g=y.message)!=null&&g.includes("cancel")){a(!1);return}d(y.message||"Purchase failed. Please try again."),oe("error")}finally{a(!1)}},h=async()=>{d(""),oe("light"),s(!0);try{const{restorePurchases:g}=await or(async()=>{const{restorePurchases:j}=await Promise.resolve().then(()=>pf);return{restorePurchases:j}},void 0),y=await g();y.success&&y.hasActiveSubscription?(oe("success"),t({title:"Subscription restored!",description:"Welcome back to BJJ OS"}),e("/ios-chat")):t({title:"No subscription found",description:"No active subscription to restore",variant:"destructive"})}catch(g){console.error("[SUBSCRIBE] Restore error:",g),d(g.message||"Restore failed. Please try again."),oe("error")}finally{s(!1)}},p=()=>{oe("light"),t({title:"Free trial started",description:"Enjoy limited access to BJJ OS"}),e("/ios-onboarding")},v=["Unlimited AI coaching with Professor OS","3,000+ curated BJJ technique videos","Personalized training recommendations","Progress tracking & insights","New videos added daily"];return r.jsx("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col ios-safe-area",children:r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:r.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-[#8B5CF6] to-[#6366F1] rounded-2xl flex items-center justify-center mb-4",children:r.jsx(ll,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Unlock BJJ OS"}),r.jsx("p",{className:"text-gray-400",children:"Your personal AI BJJ coach awaits"})]}),r.jsxs("div",{className:"bg-[#1A1A1B] rounded-2xl p-5 space-y-4 border border-[#2A2A2B]",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-white font-medium",children:"Monthly"}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-2xl font-bold text-white",children:"$19.99"}),r.jsx("span",{className:"text-gray-400 text-sm",children:"/month"})]})]}),r.jsx("div",{className:"space-y-3",children:v.map((g,y)=>r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#8B5CF6]/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx(Kn,{className:"w-3 h-3 text-[#8B5CF6]"})}),r.jsx("span",{className:"text-gray-300 text-sm",children:g})]},y))})]}),c&&r.jsx("p",{className:"text-red-500 text-sm text-center","data-testid":"text-error",children:c}),r.jsx(Z,{onClick:f,disabled:i||!o,className:"w-full h-14 bg-[#8B5CF6] text-white font-semibold hover:bg-[#7C3AED] rounded-xl text-lg","data-testid":"button-subscribe",children:i?r.jsx(De,{className:"w-5 h-5 animate-spin"}):o?"Subscribe Now":"Loading..."}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("button",{onClick:h,disabled:n,className:"text-[#8B5CF6] text-sm font-medium hover:text-[#A78BFA] transition-colors py-2","data-testid":"button-restore",children:n?"Restoring...":"Restore Purchases"}),r.jsx("button",{onClick:p,className:"text-gray-500 text-sm hover:text-gray-400 transition-colors py-2","data-testid":"button-skip",children:"Continue with limited access"})]}),r.jsx("p",{className:"text-gray-500 text-xs text-center leading-relaxed",children:"Subscription automatically renews monthly. Cancel anytime in Settings  Apple ID  Subscriptions."})]})})})}function GNe({isAuthenticated:e,authRestored:t}){const[,n]=it();return x.useEffect(()=>{if(!t){console.log("[NATIVE HOME] Waiting for auth restoration...");return}zt()&&(console.log("[NATIVE HOME] Auth restored, isAuthenticated:",e),e?(console.log("[NATIVE HOME] Redirecting to /ios-chat"),n("/ios-chat")):(console.log("[NATIVE HOME] Redirecting to /ios-login"),n("/ios-login")))},[e,t,n]),zt()?null:r.jsx(W9,{})}function YNe(){const[e,t]=x.useState(!zt()),[n,s]=x.useState(!1);x.useEffect(()=>{async function a(){var o;if(zt()){const l=await uI();if(console.log("[AUTH] Native auth restored from Preferences:",l),console.log("[AUTH] mobileUserId after restore:",localStorage.getItem("mobileUserId")),console.log("[AUTH] token after restore:",((o=localStorage.getItem("sessionToken"))==null?void 0:o.substring(0,20))||"none"),l)try{const c=localStorage.getItem("sessionToken")||localStorage.getItem("token"),d=await or(()=>Promise.resolve().then(()=>Mf),void 0),u=d.getApiUrl("/api/auth/me");console.log("[AUTH] Validating token with:",u);const f=await fetch(u,{headers:c?{Authorization:`Bearer ${c}`}:{},credentials:"include"});f.ok?(console.log("[AUTH] Token validated with server - auth is valid"),s(!0)):(console.log("[AUTH] Token validation failed (status:",f.status,") - clearing invalid auth"),await d.clearAuth(),s(!1))}catch(c){console.error("[AUTH] Token validation error:",c);const d=localStorage.getItem("mobileUserId")!==null;s(d)}else s(!1);t(!0)}}a()},[]);const i=zt()?n:localStorage.getItem("mobileUserId")!==null;return x.useEffect(()=>{const a=()=>{if(zt()){const l=localStorage.getItem("mobileUserId")!==null;console.log("[AUTH] Storage changed, updating isNativeAuthenticated:",l),s(l)}};window.addEventListener("storage",a);const o=()=>{if(zt()){const l=localStorage.getItem("mobileUserId")!==null;console.log("[AUTH] Auth change event, updating isNativeAuthenticated:",l),s(l)}};return window.addEventListener("bjjos-auth-change",o),()=>{window.removeEventListener("storage",a),window.removeEventListener("bjjos-auth-change",o)}},[]),x.useEffect(()=>{R9()},[]),e?r.jsx(Az,{client:_e,children:r.jsx(I9,{children:r.jsx(CN,{children:r.jsxs(O9,{defaultTheme:"dark",children:[r.jsxs(oz,{children:[r.jsx(Ee,{path:"/",children:r.jsx(GNe,{isAuthenticated:i,authRestored:e})}),r.jsx(Ee,{path:"/pricing",component:H9}),r.jsx(Ee,{path:"/success",component:mC}),r.jsx(Ee,{path:"/terms",component:K9}),r.jsx(Ee,{path:"/privacy",component:G9}),r.jsx(Ee,{path:"/refund",component:Y9}),r.jsx(Ee,{path:"/login",component:dV}),r.jsx(Ee,{path:"/signup",component:uV}),r.jsx(Ee,{path:"/email-signup",component:gW}),r.jsx(Ee,{path:"/email-login",component:vW}),r.jsx(Ee,{path:"/ios-login",component:wW}),r.jsx(Ee,{path:"/ios-forgot-password",component:NW}),r.jsx(Ee,{path:"/ios-verify-reset",component:SW}),r.jsx(Ee,{path:"/ios-reset-password",component:kW}),r.jsx(Ee,{path:"/forgot-password",component:yW}),r.jsx(Ee,{path:"/lifetime-signup",component:CW}),r.jsx(Ee,{path:"/welcome/lifetime",component:PW}),r.jsx(Ee,{path:"/auth/magic",component:ZH}),r.jsx(Ee,{path:"/ios-home",component:RNe}),r.jsx(Ee,{path:"/ios-chat",component:MNe}),r.jsx(Ee,{path:"/ios-library",component:FNe}),r.jsx(Ee,{path:"/ios-saved",component:$Ne}),r.jsx(Ee,{path:"/ios-profile",component:qNe}),r.jsx(Ee,{path:"/ios-settings",component:UNe}),r.jsx(Ee,{path:"/ios-terms",component:VNe}),r.jsx(Ee,{path:"/ios-privacy",component:WNe}),r.jsx(Ee,{path:"/ios-help",component:HNe}),r.jsx(Ee,{path:"/ios-onboarding",component:Pa}),r.jsx(Ee,{path:"/ios-subscribe",component:KNe}),r.jsx(Ee,{path:"/chat",component:A1e}),r.jsx(Ee,{path:"/dashboard",children:()=>{const[,a]=it();return x.useEffect(()=>{a("/chat")},[a]),null}}),r.jsx(Ee,{path:"/settings",component:rNe}),r.jsx(Ee,{path:"/settings/profile",component:Q1e}),r.jsx(Ee,{path:"/settings/security",component:J1e}),r.jsx(Ee,{path:"/settings/subscription",component:X1e}),r.jsx(Ee,{path:"/settings/referrals",component:Z1e}),r.jsx(Ee,{path:"/mobile-settings",component:mO}),r.jsx(Ee,{path:"/progress",component:sNe}),r.jsx(Ee,{path:"/saved-videos",component:dO}),r.jsx(Ee,{path:"/saved",component:dO}),r.jsx(Ee,{path:"/library",component:lNe}),r.jsx(Ee,{path:"/onboarding",component:XH}),r.jsx(Ee,{path:"/onboarding/full",component:EW}),r.jsx(Ee,{path:"/payment",component:oNe}),r.jsx(Ee,{path:"/payment/success",component:mC}),r.jsx(Ee,{path:"/theme-settings",component:INe}),r.jsx(Ee,{path:"/mobile-onboarding",component:Pa}),r.jsx(Ee,{path:"/app",children:()=>zt()?null:i?r.jsx(hO,{}):r.jsx(Pa,{})}),r.jsx(Ee,{path:"/app/chat",children:()=>zt()?null:i?r.jsx(hO,{}):r.jsx(Pa,{})}),r.jsx(Ee,{path:"/app/saved",children:i?r.jsx(kNe,{}):r.jsx(Pa,{})}),r.jsx(Ee,{path:"/app/progress",children:i?r.jsx(CNe,{}):r.jsx(Pa,{})}),r.jsx(Ee,{path:"/app/settings",children:i?r.jsx(mO,{}):r.jsx(Pa,{})}),r.jsx(Ee,{path:"/app/profile",children:i?r.jsx(ENe,{}):r.jsx(Pa,{})}),r.jsx(Ee,{path:"/launch-admin",component:mK}),r.jsx(Ee,{path:"/admin/login",component:lK}),r.jsx(Ee,{path:"/admin",component:nA}),r.jsx(Ee,{path:"/admin/dashboard",component:nA}),r.jsx(Ee,{path:"/admin/chat",component:g1e}),r.jsx(Ee,{path:"/admin/command-center",component:x1e}),r.jsx(Ee,{path:"/admin/videos",component:nje}),r.jsx(Ee,{path:"/admin/users",component:bK}),r.jsx(Ee,{path:"/admin/users-management",component:v1e}),r.jsx(Ee,{path:"/admin/referrals",component:M0e}),r.jsx(Ee,{path:"/admin/lifetime",component:JT}),r.jsx(Ee,{path:"/admin/lifetime-access",component:JT}),r.jsx(Ee,{path:"/admin/feedback",component:sje}),r.jsx(Ee,{path:"/admin/meta",component:Iwe}),r.jsx(Ee,{path:"/admin/instructors",component:Zwe}),r.jsx(Ee,{path:"/admin/partnerships",component:e1e}),r.jsx(Ee,{path:"/admin/chains",component:s1e}),r.jsx(Ee,{path:"/admin/logs",component:i1e}),r.jsx(Ee,{path:"/admin/schedules",component:a1e}),r.jsx(Ee,{path:"/admin/techniques",component:o1e}),r.jsx(Ee,{path:"/admin/flagged-accounts",component:l1e}),r.jsx(Ee,{path:"/admin/instructor-priority",component:c1e}),r.jsx(Ee,{path:"/admin/activity",component:d1e}),r.jsx(Ee,{path:"/admin/magic-links",component:Rwe}),r.jsx(Ee,{path:"/admin/auto-curation",component:u1e}),r.jsx(Ee,{path:"/admin/curation",component:h1e}),r.jsx(Ee,{path:"/admin/dev-os",component:j1e}),r.jsx(Ee,{path:"/admin/analytics",component:m1e}),r.jsx(Ee,{path:"/admin/emails",component:y1e}),r.jsx(Ee,{component:w1e})]}),r.jsx(rU,{})]})})})}):r.jsxs("div",{className:"min-h-screen bg-[#0A0A0B] flex flex-col items-center justify-center",children:[r.jsx("img",{src:"/bjjos-logo.png",alt:"BJJ OS",className:"h-8 w-auto mb-4"}),r.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})]})}L4(document.getElementById("root")).render(r.jsx(YNe,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("SW registered:",e)}).catch(e=>{console.log("SW registration failed:",e)})});export{tn as C,of as I,lf as N,tv as W,or as _,ko as r};

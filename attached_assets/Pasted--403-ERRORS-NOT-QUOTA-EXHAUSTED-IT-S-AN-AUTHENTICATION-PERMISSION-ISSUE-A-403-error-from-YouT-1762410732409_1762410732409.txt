**403 ERRORS = NOT QUOTA EXHAUSTED, ITâ€™S AN AUTHENTICATION/PERMISSION ISSUE**

A 403 error from YouTube API means:

- âŒ NOT â€œquota exceededâ€ (that would be 429)
- âœ… â€œAccess forbiddenâ€ - your API key doesnâ€™t have permission

-----

## **WHAT 403 MEANS:**

**Possible causes:**

1. **API key is invalid/expired**
1. **YouTube Data API v3 not enabled** in Google Cloud project
1. **API key has domain restrictions** (only allows certain domains)
1. **Wrong credentials** (using wrong API key)
1. **Service account issue** (if using service account)

-----

# **ğŸ“‹ URGENT: DEBUG YOUTUBE API 403 ERRORS - SEND TO REPLIT AGENT:**

```
CRITICAL: YouTube API returning 403 errors - curation completely blocked

The system reports "API maxed out" but we're getting 403 errors, which means 
PERMISSION DENIED, not quota exceeded. The API key either doesn't work or 
doesn't have the right permissions.

This is blocking ALL video curation. Fix this immediately.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DIAGNOSIS REQUIRED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. CHECK ENVIRONMENT VARIABLE
   ```bash
   echo $YOUTUBE_API_KEY
```

Does it exist?
Is it the correct format? (Should look like: AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX)

1. TEST API KEY MANUALLY
   Make a direct curl request:
   
   ```bash
   curl "https://www.googleapis.com/youtube/v3/search?part=snippet&q=bjj&type=video&key=$YOUTUBE_API_KEY"
   ```
   
   Expected responses:
   â€¢ 200 = Key works âœ…
   â€¢ 403 = Permission denied âŒ
   â€¢ 400 = Invalid key format âŒ
   â€¢ 429 = Quota exceeded (different from 403) âš ï¸
   
   Show me the EXACT error message from YouTube.
1. CHECK YOUTUBE DATA API v3 IS ENABLED
   The API key needs YouTube Data API v3 enabled in Google Cloud Console.
   
   Go to: <https://console.cloud.google.com/apis/library/youtube.googleapis.com>
   
   Is it ENABLED for this project?
   If not, click â€œEnableâ€ and wait 2 minutes.
1. CHECK API KEY RESTRICTIONS
   Go to: <https://console.cloud.google.com/apis/credentials>
   
   Find your API key â†’ Click Edit
   
   Check:
   â€¢ Application restrictions: Should be â€œNoneâ€ or include bjjos.app domain
   â€¢ API restrictions: Should include â€œYouTube Data API v3â€
   
   If restricted to wrong domain/IP, curation will fail.
1. CHECK ACTUAL QUOTA USAGE
   Go to: <https://console.cloud.google.com/apis/api/youtube.googleapis.com/quotas>
   
   Show me:
   â€¢ Queries per day: X / 10,000
   â€¢ Whatâ€™s the actual number used today?
   
   If it says 0 used, that proves the API calls arenâ€™t even reaching YouTube.
1. CHECK SERVER LOGS FOR EXACT ERROR
   
   ```bash
   tail -100 /var/log/app.log | grep -i "403\|youtube\|forbidden"
   ```
   
   Show me the FULL error message, including:
   â€¢ Error code
   â€¢ Error message from YouTube
   â€¢ Request URL being called

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LIKELY CAUSES (IN ORDER)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CAUSE 1: YouTube Data API v3 not enabled (90% probability)
â€¢ Go to Google Cloud Console
â€¢ Navigate to APIs & Services â†’ Library
â€¢ Search â€œYouTube Data API v3â€
â€¢ Click Enable
â€¢ Wait 2 minutes, try again

CAUSE 2: API key has domain restrictions
â€¢ Go to Google Cloud Console â†’ Credentials
â€¢ Click on your API key
â€¢ Under â€œApplication restrictionsâ€: Set to â€œNoneâ€
â€¢ Under â€œAPI restrictionsâ€: Ensure â€œYouTube Data API v3â€ is checked
â€¢ Save changes

CAUSE 3: Wrong API key in environment
â€¢ Double-check the API key in Replit Secrets
â€¢ Generate a NEW API key if needed:

- Go to Google Cloud Console â†’ Credentials
- Click â€œCreate Credentialsâ€ â†’ â€œAPI Keyâ€
- Copy new key
- Update YOUTUBE_API_KEY in Replit Secrets
- Restart server

CAUSE 4: IP/Domain not whitelisted
â€¢ If using Application restrictions on the API key
â€¢ Add bjjos.app and Replitâ€™s IP ranges
â€¢ Or set to â€œNoneâ€ temporarily for testing

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TEMPORARY TEST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Create a simple test script to isolate the issue:

File: test-youtube-api.js

```javascript
const axios = require('axios');

async function testYouTubeAPI() {
  const apiKey = process.env.YOUTUBE_API_KEY;
  
  console.log('Testing YouTube API...');
  console.log('API Key exists:', !!apiKey);
  console.log('API Key length:', apiKey?.length);
  console.log('API Key format:', apiKey?.substring(0, 10) + '...');
  
  try {
    // Simple search request
    const response = await axios.get('https://www.googleapis.com/youtube/v3/search', {
      params: {
        part: 'snippet',
        q: 'bjj',
        type: 'video',
        maxResults: 1,
        key: apiKey
      }
    });
    
    console.log('âœ… SUCCESS! API key works');
    console.log('Response:', response.data);
    
  } catch (error) {
    console.error('âŒ ERROR:', error.response?.status);
    console.error('Error message:', error.response?.data);
    console.error('Full error:', error.message);
    
    if (error.response?.status === 403) {
      console.error('\nğŸš¨ 403 FORBIDDEN - This means:');
      console.error('1. YouTube Data API v3 is NOT enabled in Google Cloud');
      console.error('2. OR API key has wrong restrictions');
      console.error('3. OR API key is invalid');
      console.error('\nGo to: https://console.cloud.google.com/apis/library/youtube.googleapis.com');
      console.error('And click ENABLE');
    }
    
    if (error.response?.status === 400) {
      console.error('\nğŸš¨ 400 BAD REQUEST - API key format is wrong');
    }
    
    if (error.response?.status === 429) {
      console.error('\nğŸš¨ 429 TOO MANY REQUESTS - Quota actually exceeded');
    }
  }
}

testYouTubeAPI();
```

Run this:

```bash
node test-youtube-api.js
```

Show me the EXACT output.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
IF API KEY IS THE PROBLEM - GET NEW ONE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Steps to create a fresh API key:

1. Go to: <https://console.cloud.google.com/apis/credentials>
1. Click â€œCreate Credentialsâ€ â†’ â€œAPI Keyâ€
1. Copy the new key (starts with AIzaâ€¦)
1. Click â€œEdit API Keyâ€
1. Under â€œAPI restrictionsâ€:

- Select â€œRestrict keyâ€
- Check ONLY â€œYouTube Data API v3â€

1. Under â€œApplication restrictionsâ€:

- Set to â€œNoneâ€ for now (can restrict later)

1. Save
1. Update in Replit:

- Go to Replit Secrets
- Update YOUTUBE_API_KEY with new value

1. Restart server
1. Test again

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
AFTER FIXING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Once API key works:

1. Start curation immediately
1. Verify videos are being screened
1. Check quota usage increases in Google Cloud Console

Show me:
â€¢ Screenshot of successful API test
â€¢ Quota usage showing requests going through
â€¢ First video being analyzed

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DELIVERABLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Exact 403 error message from logs
1. Output of test-youtube-api.js script
1. Screenshot of YouTube Data API v3 status (enabled/disabled)
1. Screenshot of API key restrictions
1. Actual quota usage from Google Cloud Console

This is CRITICAL - curation is completely blocked without working YouTube API.

```
---

**SEND THIS TO REPLIT AGENT**

Then let me know what the error message actually says. 

My bet: **YouTube Data API v3 is not enabled** in the Google Cloud project. That's the #1 cause of 403 errors. ğŸ¯â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹
```
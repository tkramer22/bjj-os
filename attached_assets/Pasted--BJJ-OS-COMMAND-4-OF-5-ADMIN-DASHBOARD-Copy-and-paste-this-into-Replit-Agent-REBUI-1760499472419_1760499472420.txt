# BJJ OS - COMMAND 4 OF 5: ADMIN DASHBOARD

Copy and paste this into Replit Agent:

-----

```
REBUILD BJJ OS WEBSITE - COMMAND 4 OF 5: ADMIN DASHBOARD

CRITICAL REQUIREMENTS:
âœ… Admin login separate from user login
âœ… Grant free lifetime memberships (for beta users)
âœ… Referral code system (20% recurring commission for influencers)
âœ… User management (view all users, subscriptions, usage)
âœ… Analytics dashboard (revenue, churn, engagement)
âœ… Override subscriptions, pause/cancel
âœ… View AI conversation logs (for quality control)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PART 1: ADMIN LOGIN PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Create /public/admin/login.html:

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Login - BJJ OS</title>
  <link rel="stylesheet" href="/styles/admin.css">
</head>
<body>
  
  <div class="admin-login-container">
    <div class="admin-login-card">
      
      <div class="admin-logo">
        <span class="logo-icon">ğŸ¥‹</span>
        <h1>BJJ OS Admin</h1>
      </div>
      
      <form class="admin-login-form" id="admin-login-form">
        <div class="form-group">
          <label>Admin Email</label>
          <input type="email" id="admin-email" required placeholder="admin@bjjos.app">
        </div>
        
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="admin-password" required placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
        </div>
        
        <button type="submit" class="btn-admin-login">
          Login to Dashboard
        </button>
      </form>
      
      <div class="admin-security">
        ğŸ”’ Admin access only â€¢ All actions are logged
      </div>
      
    </div>
  </div>

  <script src="/scripts/admin-login.js"></script>
</body>
</html>

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PART 2: ADMIN DASHBOARD HTML
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Create /public/admin/dashboard.html:

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - BJJ OS</title>
  <link rel="stylesheet" href="/styles/admin.css">
</head>
<body>
  
  <div class="admin-container">
    
    <!-- Sidebar -->
    <aside class="admin-sidebar">
      <div class="admin-sidebar-header">
        <span class="logo-icon">ğŸ¥‹</span>
        <span class="logo-text">BJJ OS Admin</span>
      </div>
      
      <nav class="admin-nav">
        <a href="#overview" class="admin-nav-item active" onclick="showSection('overview')">
          <span>ğŸ“Š</span> Overview
        </a>
        <a href="#users" class="admin-nav-item" onclick="showSection('users')">
          <span>ğŸ‘¥</span> Users
        </a>
        <a href="#referrals" class="admin-nav-item" onclick="showSection('referrals')">
          <span>ğŸ</span> Referral Codes
        </a>
        <a href="#lifetime" class="admin-nav-item" onclick="showSection('lifetime')">
          <span>â­</span> Lifetime Access
        </a>
        <a href="#subscriptions" class="admin-nav-item" onclick="showSection('subscriptions')">
          <span>ğŸ’³</span> Subscriptions
        </a>
        <a href="#analytics" class="admin-nav-item" onclick="showSection('analytics')">
          <span>ğŸ“ˆ</span> Analytics
        </a>
        <a href="#logs" class="admin-nav-item" onclick="showSection('logs')">
          <span>ğŸ“</span> AI Logs
        </a>
      </nav>
      
      <div class="admin-sidebar-footer">
        <button class="btn-admin-logout" onclick="adminLogout()">
          Logout
        </button>
      </div>
    </aside>
    
    <!-- Main Content -->
    <main class="admin-main">
      
      <!-- Overview Section -->
      <section class="admin-section active" id="overview">
        <div class="admin-header">
          <h1>Dashboard Overview</h1>
          <div class="admin-date" id="current-date"></div>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">ğŸ‘¥</div>
            <div class="stat-info">
              <div class="stat-label">Total Users</div>
              <div class="stat-value" id="stat-total-users">0</div>
              <div class="stat-change positive">+12 this week</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">ğŸ’°</div>
            <div class="stat-info">
              <div class="stat-label">MRR</div>
              <div class="stat-value" id="stat-mrr">$0</div>
              <div class="stat-change positive">+8.3%</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">ğŸ</div>
            <div class="stat-info">
              <div class="stat-label">Active Referrals</div>
              <div class="stat-value" id="stat-referrals">0</div>
              <div class="stat-change">3 pending</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">â­</div>
            <div class="stat-info">
              <div class="stat-label">Lifetime Members</div>
              <div class="stat-value" id="stat-lifetime">0</div>
              <div class="stat-change">Beta users</div>
            </div>
          </div>
        </div>
        
        <div class="charts-grid">
          <div class="chart-card">
            <h3>Revenue (Last 30 Days)</h3>
            <div class="chart-placeholder">
              <canvas id="revenue-chart"></canvas>
            </div>
          </div>
          
          <div class="chart-card">
            <h3>User Growth</h3>
            <div class="chart-placeholder">
              <canvas id="growth-chart"></canvas>
            </div>
          </div>
        </div>
        
        <div class="recent-activity">
          <h3>Recent Activity</h3>
          <div class="activity-list" id="activity-list">
            <!-- Activity items will be inserted here -->
          </div>
        </div>
      </section>
      
      <!-- Users Section -->
      <section class="admin-section" id="users">
        <div class="admin-header">
          <h1>User Management</h1>
          <div class="admin-actions">
            <input type="text" placeholder="Search users..." class="search-input" id="user-search">
            <button class="btn-admin-action" onclick="refreshUsers()">
              ğŸ”„ Refresh
            </button>
          </div>
        </div>
        
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Plan</th>
                <th>Belt</th>
                <th>Status</th>
                <th>Joined</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="users-table-body">
              <!-- Users will be inserted here -->
            </tbody>
          </table>
        </div>
      </section>
      
      <!-- Referral Codes Section -->
      <section class="admin-section" id="referrals">
        <div class="admin-header">
          <h1>Referral Code Management</h1>
          <button class="btn-admin-primary" onclick="showCreateReferralModal()">
            â• Create Referral Code
          </button>
        </div>
        
        <div class="info-card">
          <h3>ğŸ“¢ How Referral Codes Work</h3>
          <p>Create custom referral codes for influencers and partners. They get <strong>20% recurring commission</strong> on every subscription they refer, paid monthly.</p>
        </div>
        
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Code</th>
                <th>Owner</th>
                <th>Commission</th>
                <th>Uses</th>
                <th>Revenue Generated</th>
                <th>Commission Owed</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="referrals-table-body">
              <!-- Referral codes will be inserted here -->
            </tbody>
          </table>
        </div>
      </section>
      
      <!-- Lifetime Access Section -->
      <section class="admin-section" id="lifetime">
        <div class="admin-header">
          <h1>Lifetime Access Management</h1>
          <button class="btn-admin-primary" onclick="showGrantLifetimeModal()">
            â­ Grant Lifetime Access
          </button>
        </div>
        
        <div class="info-card">
          <h3>â­ Lifetime Memberships</h3>
          <p>Grant free lifetime access to beta testers, special contributors, or VIP users. They get full access forever without paying.</p>
        </div>
        
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Email</th>
                <th>Belt</th>
                <th>Granted Date</th>
                <th>Granted By</th>
                <th>Reason</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="lifetime-table-body">
              <!-- Lifetime users will be inserted here -->
            </tbody>
          </table>
        </div>
      </section>
      
      <!-- Subscriptions Section -->
      <section class="admin-section" id="subscriptions">
        <div class="admin-header">
          <h1>Subscription Management</h1>
          <div class="admin-filters">
            <select id="subscription-filter" onchange="filterSubscriptions()">
              <option value="all">All Subscriptions</option>
              <option value="active">Active</option>
              <option value="trial">Trial</option>
              <option value="cancelled">Cancelled</option>
              <option value="past_due">Past Due</option>
            </select>
          </div>
        </div>
        
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Plan</th>
                <th>Status</th>
                <th>Next Billing</th>
                <th>MRR</th>
                <th>Customer Since</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="subscriptions-table-body">
              <!-- Subscriptions will be inserted here -->
            </tbody>
          </table>
        </div>
      </section>
      
      <!-- Analytics Section -->
      <section class="admin-section" id="analytics">
        <div class="admin-header">
          <h1>Analytics & Insights</h1>
          <div class="admin-date-range">
            <select id="analytics-period">
              <option value="7">Last 7 days</option>
              <option value="30" selected>Last 30 days</option>
              <option value="90">Last 90 days</option>
              <option value="365">Last year</option>
            </select>
          </div>
        </div>
        
        <div class="analytics-grid">
          <div class="analytics-card">
            <h3>Revenue Metrics</h3>
            <div class="metric-row">
              <span>Total Revenue</span>
              <strong id="total-revenue">$0</strong>
            </div>
            <div class="metric-row">
              <span>MRR</span>
              <strong id="mrr-analytics">$0</strong>
            </div>
            <div class="metric-row">
              <span>ARR</span>
              <strong id="arr">$0</strong>
            </div>
            <div class="metric-row">
              <span>ARPU</span>
              <strong id="arpu">$0</strong>
            </div>
          </div>
          
          <div class="analytics-card">
            <h3>User Metrics</h3>
            <div class="metric-row">
              <span>Total Users</span>
              <strong id="total-users-analytics">0</strong>
            </div>
            <div class="metric-row">
              <span>Active Users</span>
              <strong id="active-users">0</strong>
            </div>
            <div class="metric-row">
              <span>Trial Users</span>
              <strong id="trial-users">0</strong>
            </div>
            <div class="metric-row">
              <span>Churn Rate</span>
              <strong id="churn-rate">0%</strong>
            </div>
          </div>
          
          <div class="analytics-card">
            <h3>Engagement</h3>
            <div class="metric-row">
              <span>Avg Messages/Day</span>
              <strong id="avg-messages">0</strong>
            </div>
            <div class="metric-row">
              <span>Videos Watched</span>
              <strong id="videos-watched">0</strong>
            </div>
            <div class="metric-row">
              <span>Videos Saved</span>
              <strong id="videos-saved">0</strong>
            </div>
            <div class="metric-row">
              <span>DAU/MAU</span>
              <strong id="dau-mau">0%</strong>
            </div>
          </div>
          
          <div class="analytics-card">
            <h3>Belt Distribution</h3>
            <div class="belt-chart" id="belt-distribution">
              <!-- Belt distribution will be inserted here -->
            </div>
          </div>
        </div>
      </section>
      
      <!-- AI Logs Section -->
      <section class="admin-section" id="logs">
        <div class="admin-header">
          <h1>AI Conversation Logs</h1>
          <div class="admin-actions">
            <input type="date" id="log-date" class="date-input">
            <select id="log-user" class="filter-select">
              <option value="all">All Users</option>
            </select>
            <button class="btn-admin-action" onclick="refreshLogs()">
              ğŸ”„ Refresh
            </button>
          </div>
        </div>
        
        <div class="info-card">
          <h3>ğŸ” Quality Control</h3>
          <p>Review AI conversations to ensure Prof. OS is providing accurate, helpful coaching. Flag any issues for improvement.</p>
        </div>
        
        <div class="logs-container" id="logs-container">
          <!-- Conversation logs will be inserted here -->
        </div>
      </section>
      
    </main>
  </div>
  
  <!-- Modals -->
  
  <!-- Create Referral Code Modal -->
  <div class="modal hidden" id="create-referral-modal">
    <div class="modal-overlay" onclick="closeModal('create-referral-modal')"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Create Referral Code</h2>
        <button class="modal-close" onclick="closeModal('create-referral-modal')">âœ•</button>
      </div>
      <form class="modal-form" id="create-referral-form">
        <div class="form-group">
          <label>Referral Code</label>
          <input type="text" id="referral-code" required placeholder="INFLUENCER2025">
          <small>Alphanumeric, uppercase recommended</small>
        </div>
        
        <div class="form-group">
          <label>Owner Name</label>
          <input type="text" id="referral-owner" required placeholder="John Doe">
        </div>
        
        <div class="form-group">
          <label>Owner Email</label>
          <input type="email" id="referral-email" required placeholder="john@example.com">
        </div>
        
        <div class="form-group">
          <label>Commission Rate</label>
          <input type="number" id="referral-commission" value="20" min="0" max="100" required>
          <small>% of subscription price (default: 20%)</small>
        </div>
        
        <div class="form-group">
          <label>Notes (Optional)</label>
          <textarea id="referral-notes" placeholder="Instagram influencer with 50k followers"></textarea>
        </div>
        
        <button type="submit" class="btn-modal-submit">Create Referral Code</button>
      </form>
    </div>
  </div>
  
  <!-- Grant Lifetime Access Modal -->
  <div class="modal hidden" id="grant-lifetime-modal">
    <div class="modal-overlay" onclick="closeModal('grant-lifetime-modal')"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Grant Lifetime Access</h2>
        <button class="modal-close" onclick="closeModal('grant-lifetime-modal')">âœ•</button>
      </div>
      <form class="modal-form" id="grant-lifetime-form">
        <div class="form-group">
          <label>User Email</label>
          <input type="email" id="lifetime-email" required placeholder="user@example.com">
          <small>Must be an existing user</small>
        </div>
        
        <div class="form-group">
          <label>Reason</label>
          <select id="lifetime-reason" required>
            <option value="">Select reason...</option>
            <option value="beta_tester">Beta Tester</option>
            <option value="contributor">Special Contributor</option>
            <option value="vip">VIP</option>
            <option value="compensation">Compensation</option>
            <option value="other">Other</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Additional Notes</label>
          <textarea id="lifetime-notes" placeholder="Details about why this user gets lifetime access"></textarea>
        </div>
        
        <div class="warning-box">
          âš ï¸ This will give the user <strong>free lifetime access</strong> to Full AI Package. This action cannot be undone.
        </div>
        
        <button type="submit" class="btn-modal-submit">Grant Lifetime Access</button>
      </form>
    </div>
  </div>
  
  <!-- User Details Modal -->
  <div class="modal hidden" id="user-details-modal">
    <div class="modal-overlay" onclick="closeModal('user-details-modal')"></div>
    <div class="modal-content large">
      <div class="modal-header">
        <h2>User Details</h2>
        <button class="modal-close" onclick="closeModal('user-details-modal')">âœ•</button>
      </div>
      <div class="user-details" id="user-details-content">
        <!-- User details will be inserted here -->
      </div>
    </div>
  </div>

  <script src="/scripts/admin-dashboard.js"></script>
</body>
</html>

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PART 3: ADMIN STYLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Create /public/styles/admin.css:

:root {
  --black: #000000;
  --dark: #0a0a0a;
  --gray: #1a1a1a;
  --border: #333333;
  --text-secondary: #888888;
  --text-tertiary: #555555;
  --primary: #667eea;
  --primary-dark: #764ba2;
  --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --success: #4ade80;
  --warning: #fbbf24;
  --error: #f87171;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  background: var(--black);
  color: #ffffff;
}

/* Admin Login Page */
.admin-login-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
}

.admin-login-card {
  width: 100%;
  max-width: 400px;
  background: var(--dark);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 3rem;
}

.admin-logo {
  text-align: center;
  margin-bottom: 2rem;
}

.logo-icon {
  font-size: 3rem;
}

.admin-logo h1 {
  font-size: 1.5rem;
  margin-top: 0.5rem;
}

.admin-login-form {
  margin-bottom: 1.5rem;
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  font-size: 0.875rem;
}

.form-group input,
.form-group textarea,
.form-group select {
  width: 100%;
  padding: 0.75rem;
  background: var(--gray);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: white;
  font-size: 1rem;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
  outline: none;
  border-color: var(--primary);
}

.form-group small {
  display: block;
  margin-top: 0.25rem;
  font-size: 0.75rem;
  color: var(--text-tertiary);
}

.btn-admin-login {
  width: 100%;
  padding: 0.75rem;
  background: var(--gradient);
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s;
}

.btn-admin-login:hover {
  transform: translateY(-2px);
}

.admin-security {
  text-align: center;
  font-size: 0.75rem;
  color: var(--text-tertiary);
}

/* Admin Dashboard Layout */
.admin-container {
  display: flex;
  height: 100vh;
}

.admin-sidebar {
  width: 260px;
  background: var(--dark);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
}

.admin-sidebar-header {
  padding: 1.5rem;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.logo-text {
  font-size: 1.125rem;
  font-weight: 700;
}

.admin-nav {
  flex: 1;
  padding: 1rem 0;
  overflow-y: auto;
}

.admin-nav-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1.5rem;
  color: var(--text-secondary);
  text-decoration: none;
  transition: all 0.2s;
  cursor: pointer;
}

.admin-nav-item:hover {
  background: var(--gray);
  color: white;
}

.admin-nav-item.active {
  background: var(--gray);
  color: white;
  border-left: 3px solid var(--primary);
}

.admin-sidebar-footer {
  padding: 1rem;
  border-top: 1px solid var(--border);
}

.btn-admin-logout {
  width: 100%;
  padding: 0.5rem;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.btn-admin-logout:hover {
  background: var(--gray);
  color: white;
}

/* Main Content */
.admin-main {
  flex: 1;
  overflow-y: auto;
  padding: 2rem;
}

.admin-section {
  display: none;
}

.admin-section.active {
  display: block;
}

.admin-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
}

.admin-header h1 {
  font-size: 2rem;
}

.admin-date {
  color: var(--text-secondary);
  font-size: 0.875rem;
}

.admin-actions {
  display: flex;
  gap: 0.75rem;
}

.search-input,
.date-input,
.filter-select {
  padding: 0.5rem 1rem;
  background: var(--gray);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: white;
  font-size: 0.875rem;
}

.btn-admin-action {
  padding: 0.5rem 1rem;
  background: var(--gray);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: white;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s;
}

.btn-admin-action:hover {
  background: var(--border);
}

.btn-admin-primary {
  padding: 0.75rem 1.5rem;
  background: var(--gradient);
  border: none;
  border-radius: 8px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s;
}

.btn-admin-primary:hover {
  transform: translateY(-2px);
}

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.stat-card {
  background: var(--dark);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 1.5rem;
  display: flex;
  gap: 1rem;
}

.stat-icon {
  font-size: 2.5rem;
}

.stat-info {
  flex: 1;
}

.stat-label {
  font-size: 0.875rem;
  color: var(--text-secondary);
  margin-bottom: 0.5rem;
}

.stat-value {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.25rem;
}

.stat-change {
  font-size: 0.75rem;
  color: var(--text-secondary);
}

.stat-change.positive {
  color: var(--success);
}

.stat-change.negative {
  color: var(--error);
}

/* Info Card */
.info-card {
  background: var(--dark);
  border: 1px solid var(--border);
  border-left: 3px solid var(--primary);
  border-radius: 8px;
  padding: 1.5rem;
  margin-bottom: 2rem;
}

.info-card h3 {
  font-size: 1.125rem;
  margin-bottom: 0.5rem;
}

.info-card p {
  color: var(--text-secondary);
  line-height: 1.6;
}

/* Tables */
.table-container {
  background: var(--dark);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}

.admin-table {
  width: 100%;
  border-collapse: collapse;
}

.admin-table thead {
  background: var(--gray);
  border-bottom: 1px solid var(--border);
}

.admin-table th {
  padding: 1rem;
  text-align: left;
  font-weight: 600;
  font-size: 0.875rem;
  color: var(--text-secondary);
}

.admin-table td {
  padding: 1rem;
  border-bottom: 1px solid var(--border);
}

.admin-table tr:last-child td {
  border-bottom: none;
}

.admin-table tr:hover {
  background: var(--gray);
}

.status-badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
}

.status-badge.active {
  background: rgba(74, 222, 128, 0.2);
  color: var(--success);
}

.status-badge.trial {
  background: rgba(251, 191, 36, 0.2);
  color: var(--warning);
}

.status-badge.cancelled {
  background: rgba(248, 113, 113, 0.2);
  color: var(--error);
}

.status-badge.lifetime {
  background: rgba(102, 126, 234, 0.2);
  color: var(--primary);
}

.table-action-btn {
  padding: 0.25rem 0.75rem;
  background: var(--gray);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: white;
  font-size: 0.75rem;
  cursor: pointer;
  margin-right: 0.5rem;
  transition: all 0.2s;
}

.table-action-btn:hover {
  background: var(--border);
}

.table-action-btn.danger {
  border-color: var(--error);
  color: var(--error);
}

.table-action-btn.danger:hover {
  background: var(--error);
  color: white;
}

/* Analytics */
.analytics-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.5rem;
}

.analytics-card {
  background: var(--dark);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 1.5rem;
}

.analytics-card h3 {
  font-size: 1.125rem;
  margin-bottom: 1rem;
}

.metric-row {
  display: flex;
  justify-content: space-between;
  padding: 0.75rem 0;
  border-bottom: 1px solid var(--border);
}

.metric-row:last-child {
  border-bottom: none;
}

.metric-row span {
  color: var(--text-secondary);
}

.metric-row strong {
  color: white;
}

/* Modals */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal.hidden {
  display: none;
}

.modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
}

.modal-content {
  position: relative;
  background: var(--dark);
  border: 1px solid var(--border);
  border-radius: 16px;
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  overflow-y: auto;
}

.modal-content.large {
  max-width: 800px;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem;
  border-bottom: 1px solid var(--border);
}

.modal-header h2 {
  font-size: 1.25rem;
}

.modal-close {
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 1.5rem;
  cursor: pointer;
  padding: 0.5rem;
}

.modal-form {
  padding: 1.5rem;
}

.btn-modal-submit {
  width: 100%;
  padding: 0.75rem;
  background: var(--gradient);
  border: none;
  border-radius: 8px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  margin-top: 1rem;
}

.warning-box {
  background: rgba(248, 113, 113, 0.1);
  border: 1px solid var(--error);
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1rem;
  font-size: 0.875rem;
}

/* Responsive */
@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .analytics-grid {
    grid-template-columns: 1fr;
  }
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PART 4: ADMIN DASHBOARD JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Create /public/scripts/admin-dashboard.js:

// Admin session
let adminId = localStorage.getItem('adminId');
let adminEmail = localStorage.getItem('adminEmail');

// Initialize
document.addEventListener('DOMContentLoaded', async () => {
  // Check admin auth
  if (!adminId) {
    window.location.href = '/admin/login.html';
    return;
  }
  
  // Set current date
  document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-US', {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
  
  // Load overview data
  await loadOverviewData();
  
  // Setup form handlers
  setupFormHandlers();
});

// Load overview data
async function loadOverviewData() {
  try {
    const response = await fetch('/api/admin/overview', {
      headers: { 'X-Admin-Id': adminId }
    });
    const data = await response.json();
    
    // Update stats
    document.getElementById('stat-total-users').textContent = data.totalUsers || 0;
    document.getElementById('stat-mrr').textContent = `$${data.mrr || 0}`;
    document.getElementById('stat-referrals').textContent = data.activeReferrals || 0;
    document.getElementById('stat-lifetime').textContent = data.lifetimeMembers || 0;
    
    // Load recent activity
    loadRecentActivity(data.recentActivity);
    
  } catch (error) {
    console.error('Failed to load overview:', error);
  }
}

// Load recent activity
function loadRecentActivity(activities) {
  const container = document.getElementById('activity-list');
  container.innerHTML = '';
  
  if (!activities || activities.length === 0) {
    container.innerHTML = '<p style="color: var(--text-secondary); padding: 1rem;">No recent activity</p>';
    return;
  }
  
  activities.forEach(activity => {
    const item = document.createElement('div');
    item.className = 'activity-item';
    item.innerHTML = `
      <div class="activity-icon">${activity.icon}</div>
      <div class="activity-content">
        <div class="activity-text">${activity.text}</div>
        <div class="activity-time">${formatTimeAgo(activity.timestamp)}</div>
      </div>
    `;
    container.appendChild(item);
  });
}

// Section navigation
function showSection(sectionId) {
  // Hide all sections
  document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
  
  // Show target section
  document.querySelector(`#${sectionId}`).classList.add('active');
  
  // Update nav
  document.querySelectorAll('.admin-nav-item').forEach(n => n.classList.remove('active'));
  document.querySelector(`a[href="#${sectionId}"]`).classList.add('active');
  
  // Load data for section
  switch(sectionId) {
    case 'users':
      loadUsers();
      break;
    case 'referrals':
      loadReferrals();
      break;
    case 'lifetime':
      loadLifetimeUsers();
      break;
    case 'subscriptions':
      loadSubscriptions();
      break;
    case 'analytics':
      loadAnalytics();
      break;
    case 'logs':
      loadLogs();
      break;
  }
}

// Load users
async function loadUsers() {
  try {
    const response = await fetch('/api/admin/users', {
      headers: { 'X-Admin-Id': adminId }
    });
    const data = await response.json();
    
    const tbody = document.getElementById('users-table-body');
    tbody.innerHTML = '';
    
    data.users.forEach(user => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${user.name}</td>
        <td>${user.email}</td>
        <td>${user.phone}</td>
        <td>${user.plan}</td>
        <td><span class="belt-badge ${user.belt}">${user.belt}</span></td>
        <td><span class="status-badge ${user.status}">${user.status}</span></td>
        <td>${formatDate(user.created_at)}</td>
        <td>
          <button class="table-action-btn" onclick="viewUserDetails('${user.id}')">View</button>
          <button class="table-action-btn" onclick="loginAsUser('${user.id}')">Login As</button>
        </td>
      `;
      tbody.appendChild(row);
    });
    
  } catch (error) {
    console.error('Failed to load users:', error);
  }
}

// Load referrals
async function loadReferrals() {
  try {
    const response = await fetch('/api/admin/referrals', {
      headers: { 'X-Admin-Id': adminId }
    });
    const data = await response.json();
    
    const tbody = document.getElementById('referrals-table-body');
    tbody.innerHTML = '';
    
    data.referrals.forEach(ref => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td><strong>${ref.code}</strong></td>
        <td>${ref.owner_name}</td>
        <td>${ref.commission_rate}%</td>
        <td>${ref.uses}</td>
        <td>$${ref.revenue_generated}</td>
        <td>$${ref.commission_owed}</td>
        <td><span class="status-badge ${ref.status}">${ref.status}</span></td>
        <td>
          <button class="table-action-btn" onclick="editReferral('${ref.id}')">Edit</button>
          <button class="table-action-btn danger" onclick="deactivateReferral('${ref.id}')">Deactivate</button>
        </td>
      `;
      tbody.appendChild(row);
    });
    
  } catch (error) {
    console.error('Failed to load referrals:', error);
  }
}

// Load lifetime users
async function loadLifetimeUsers() {
  try {
    const response = await fetch('/api/admin/lifetime', {
      headers: { 'X-Admin-Id': adminId }
    });
    const data = await response.json();
    
    const tbody = document.getElementById('lifetime-table-body');
    tbody.innerHTML = '';
    
    if (data.users.length === 0) {
      tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: var(--text-secondary);">No lifetime members yet</td></tr>';
      return;
    }
    
    data.users.forEach(user => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${user.name}</td>
        <td>${user.email}</td>
        <td><span class="belt-badge ${user.belt}">${user.belt}</span></td>
        <td>${formatDate(user.lifetime_granted_date)}</td>
        <td>${user.granted_by}</td>
        <td>${user.reason}</td>
        <td>
          <button class="table-action-btn danger" onclick="revokeLifetime('${user.id}')">Revoke</button>
        </td>
      `;
      tbody.appendChild(row);
    });
    
  } catch (error) {
    console.error('Failed to load lifetime users:', error);
  }
}

// Setup form handlers
function setupFormHandlers() {
  // Create referral form
  document.getElementById('create-referral-form')?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = {
      code: document.getElementById('referral-code').value,
      owner_name: document.getElementById('referral-owner').value,
      owner_email: document.getElementById('referral-email').value,
      commission_rate: document.getElementById('referral-commission').value,
      notes: document.getElementById('referral-notes').value
    };
    
    try {
      const response = await fetch('/api/admin/referrals/create', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-Admin-Id': adminId
        },
        body: JSON.stringify(formData)
      });
      
      const data = await response.json();
      
      if (data.success) {
        alert('Referral code created!');
        closeModal('create-referral-modal');
        loadReferrals();
      } else {
        alert('Failed to create referral code: ' + data.error);
      }
    } catch (error) {
      console.error('Failed to create referral:', error);
      alert('Failed to create referral code');
    }
  });
  
  // Grant lifetime form
  document.getElementById('grant-lifetime-form')?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = {
      email: document.getElementById('lifetime-email').value,
      reason: document.getElementById('lifetime-reason').value,
      notes: document.getElementById('lifetime-notes').value,
      granted_by: adminEmail
    };
    
    if (!confirm('Grant FREE lifetime access to this user?')) return;
    
    try {
      const response = await fetch('/api/admin/lifetime/grant', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-Admin-Id': adminId
        },
        body: JSON.stringify(formData)
      });
      
      const data = await response.json();
      
      if (data.success) {
        alert('Lifetime access granted!');
        closeModal('grant-lifetime-modal');
        loadLifetimeUsers();
      } else {
        alert('Failed to grant lifetime access: ' + data.error);
      }
    } catch (error) {
      console.error('Failed to grant lifetime:', error);
      alert('Failed to grant lifetime access');
    }
  });
}

// Modal functions
function showCreateReferralModal() {
  document.getElementById('create-referral-modal').classList.remove('hidden');
}

function showGrantLifetimeModal() {
  document.getElementById('grant-lifetime-modal').classList.remove('hidden');
}

function closeModal(modalId) {
  document.getElementById(modalId).classList.add('hidden');
}

// Utility functions
function formatDate(date) {
  return new Date(date).toLocaleDateString('en-US', {
    month: 'short',
    day: 'numeric',
    year: 'numeric'
  });
}

function formatTimeAgo(date) {
  const seconds = Math.floor((new Date() - new Date(date)) / 1000);
  
  if (seconds < 60) return 'Just now';
  if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;
  if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;
  return `${Math.floor(seconds / 86400)}d ago`;
}

function adminLogout() {
  localStorage.removeItem('adminId');
  localStorage.removeItem('adminEmail');
  window.location.href = '/admin/login.html';
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
VERIFICATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

After Command 4:

1. Access admin login at /admin/login.html
2. Login with admin credentials
3. See dashboard overview with stats
4. Navigate to Users section - see all users
5. Navigate to Referral Codes section
   - Create new referral code (e.g., INFLUENCER2025)
   - Set 20% commission
   - Code should work on signup
6. Navigate to Lifetime Access section
   - Grant lifetime access to beta tester
   - User should have free access forever
7. Test all sections work
8. Verify admin can view AI conversation logs

Next: Command 5 will integrate everything and finalize the system.
```

-----

**ğŸ“‹ PASTE COMMAND 4 INTO REPLIT AGENT NOW**

Let me know when complete and Iâ€™ll give you Command 5 (Final Integration)! ğŸš€â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹
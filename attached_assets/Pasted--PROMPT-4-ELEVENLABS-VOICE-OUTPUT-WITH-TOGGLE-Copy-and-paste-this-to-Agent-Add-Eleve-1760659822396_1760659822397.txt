# ğŸ“‹ PROMPT 4: ELEVENLABS VOICE OUTPUT WITH TOGGLE

**Copy and paste this to Agent:**

```
Add ElevenLabs voice output with user toggle control.

FEATURE: Voice Response Mode (Toggle ON/OFF)

USER CONTROL:
Users can enable/disable voice output in chat interface.
Default: OFF (let users discover it)
Toggle shows at top of chat interface.

ELEVENLABS SETUP:

1. API Configuration:
   - Sign up: elevenlabs.io
   - Get API key
   - Add to environment: ELEVENLABS_API_KEY
   - Start with Creator plan ($22/month, 100K characters)

2. Voice Selection:
   Primary: "Antoni" (voice_id: ErXwobaYiN019PkySvjV)
   - Warm, friendly, encouraging
   - Sounds like training partner
   - Perfect for "black belt best friend" persona
   
   Alternative: "Adam" (voice_id: pNInz6obpgDQGcFmaJgB)
   - Deep, authoritative, confident
   - More instructional tone
   - Sounds like John Danaher

3. Voice Settings:
   - stability: 60% (balanced expressiveness)
   - similarity: 80% (close to base voice)
   - style: 40% (natural enthusiasm)
   - speaker_boost: true (enhanced clarity)

IMPLEMENTATION:

1. Chat Interface - Add Toggle:
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ğŸ’¬ Prof. OS        [ğŸ”Š Voice: OFF]â”‚ â† Toggle button
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   
   Toggle states:
   OFF: [ğŸ”‡ Voice: OFF] (gray)
   ON: [ğŸ”Š Voice: ON] (blue)
   
   Click to toggle, saves preference to database

2. When Voice Mode = ON:
   Flow:
   - User speaks (Whisper) or types
   - Text sent to Claude â†’ Prof. OS response
   - Response text â†’ ElevenLabs API â†’ Audio file (MP3)
   - Audio plays automatically
   - Transcript displayed simultaneously
   - Videos shown below transcript
   
   UI while speaking:
   [ğŸ”Š Playing...] Prof. OS:
   "Alright, triangle from closed guard..."
   
   Audio player:
   - Auto-play when received
   - Pause button (space bar or tap)
   - Progress bar (optional)
   - No skip/rewind (keep simple)

3. When Voice Mode = OFF:
   - Standard text-only chat (current behavior)
   - No audio generation (saves API costs)
   - User can still use voice input if desired

VOICE-FRIENDLY RESPONSE FORMAT:

Update Prof. OS system prompt to detect voice mode:

"When voice_mode is enabled:
- Keep responses under 200 words (30-45 seconds of speech)
- Use natural, conversational language
- Add contractions (you're, I'm, don't)
- Reference videos naturally: 'I'm sending you three videos...'
  NOT: 'Here is [VIDEO: Title by Instructor]'
- Natural pauses with punctuation
- Avoid reading technical terms or URLs

Example voice-friendly:
'Alright, triangle from closed guard. The key is angle - most 
people try to finish straight on and wonder why it doesn't work. 
You need to get perpendicular. I'm sending you three videos that 
break this down perfectly. Lachlan Giles has the best explanation. 
Watch those and let me know if the angle part makes sense.'

Then display below:
[VIDEO: 'Triangle Fundamentals' by Lachlan Giles]
[VIDEO: 'Triangle Finishing Details' by John Danaher]
[VIDEO: 'Common Triangle Mistakes' by Gordon Ryan]"

USER SETTINGS:

Add to /settings page:

Voice Settings:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”Š VOICE SETTINGS                  â”‚
â”‚                                     â”‚
â”‚  Voice Mode:        [ON] / OFF      â”‚
â”‚                                     â”‚
â”‚  Voice:             [Antoni â–¼]      â”‚
â”‚                     - Antoni (Friendly)
â”‚                     - Adam (Authoritative)
â”‚                                     â”‚
â”‚  Speed:             [1.0x â–¼]        â”‚
â”‚                     - 0.75x (Slower)
â”‚                     - 1.0x (Normal)
â”‚                     - 1.25x (Faster)
â”‚                                     â”‚
â”‚  Auto-play:         [ON] / OFF      â”‚
â”‚                                     â”‚
â”‚  [ğŸ”Š Test Voice]                    â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Test button sends: "This is what Prof. OS sounds like" 
to ElevenLabs and plays audio.

DATABASE:
Add to User model:
â€¢ voice_enabled: boolean (default: false)
â€¢ voice_selection: 'antoni' | 'adam' (default: 'antoni')
â€¢ voice_speed: float (default: 1.0, range: 0.75-1.5)
â€¢ voice_autoplay: boolean (default: true)

API ENDPOINT:
POST /api/voice/generate
Body: { text: string, voice: 'antoni' | 'adam', speed: number }
Response: { audio_url: string, duration: number }

ERROR HANDLING:
â€¢ ElevenLabs API fails â†’ Show text only, no audio
â€¢ Notification: "Voice temporarily unavailable"
â€¢ Log error to admin dashboard
â€¢ Retry once, then fall back gracefully
â€¢ Don't break chat experience

COST TRACKING:
â€¢ Log character usage per request
â€¢ Track in admin dashboard
â€¢ Alert at 80% of plan limit
â€¢ Show usage: "Voice: 87K / 100K characters this month"

This creates premium voice experience with user control.
```

-----

**Paste this into Agent and wait for â€œCheckpoint madeâ€ âœ…**

**Then let me know when youâ€™re ready for Prompt 5!** ğŸ¤â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹
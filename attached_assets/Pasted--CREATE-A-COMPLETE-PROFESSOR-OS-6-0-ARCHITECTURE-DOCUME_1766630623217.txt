```
CREATE A COMPLETE PROFESSOR OS 6.0 ARCHITECTURE DOCUMENT

I need a comprehensive document that shows me EXACTLY how Professor OS works. Generate this as a downloadable document or display it fully in chat.

═══════════════════════════════════════════════════════════════════════════════
SECTION 1: THE SYSTEM PROMPT
═══════════════════════════════════════════════════════════════════════════════

1. File location: Where is buildSystemPrompt.ts (or equivalent)?
2. Show me the COMPLETE system prompt text - every single line
3. Identify each section:
   - Identity/personality
   - Rules (list all numbered rules)
   - User context injection point
   - Video library injection point
   - Credentials injection point
   - News injection point
   - Conversation history injection point
4. Total character count and estimated token count

═══════════════════════════════════════════════════════════════════════════════
SECTION 2: DATA SOURCES
═══════════════════════════════════════════════════════════════════════════════

For EACH data source Professor OS uses, document:

A. USER PROFILE
   - Database table name
   - Fields used (belt_level, goals, struggles, etc.)
   - Function that fetches this data
   - How it's formatted and injected into prompt

B. VIDEO LIBRARY
   - Database table name (ai_video_knowledge)
   - Total video count
   - What fields are sent to Professor OS
   - Function that fetches relevant videos (analyzeMessageForVideoQuery, fetchRelevantVideos)
   - How many videos are injected per query
   - Show me the exact SQL/query used

C. INSTRUCTOR CREDENTIALS
   - Database table names (instructor_verified_credentials, adcc_results)
   - Function that looks up credentials
   - How credentials are formatted in the prompt
   - What happens if no credentials exist for an instructor

D. COMBAT SPORTS NEWS
   - Database table name
   - How many days of news included
   - What sources are scraped
   - Function that fetches news

E. CONVERSATION HISTORY
   - Database table name
   - How many messages are loaded (the limit)
   - Function that fetches history
   - Format sent to Claude

═══════════════════════════════════════════════════════════════════════════════
SECTION 3: THE COMPLETE FLOW
═══════════════════════════════════════════════════════════════════════════════

Document the exact code path when a user sends a message:

1. User sends message from iOS app
2. → Which component handles it? (file name, function name)
3. → Which API endpoint is called? (route, method)
4. → Which server file handles the request? (file name, line number)
5. → What functions run BEFORE calling Claude?
   - Message analysis?
   - Video retrieval?
   - Credentials lookup?
   - User profile fetch?
6. → How is the system prompt built? (function name)
7. → What model is called? (Claude Sonnet 4.5? GPT-4o?)
8. → How is the response streamed back?
9. → How is the message saved to database?

Show me the actual function calls in order.

═══════════════════════════════════════════════════════════════════════════════
SECTION 4: ALL RULES IN THE PROMPT
═══════════════════════════════════════════════════════════════════════════════

List EVERY rule currently in the system prompt:
- Rule number
- Rule name
- Exact text of the rule
- Line number in the file

Example format:
RULE #1 (Lines 45-52): NO THIRD PERSON
"Always address the user directly using 'you' and 'your'. Never refer to them in third person like 'Todd has been working on...'"

Do this for ALL rules.

═══════════════════════════════════════════════════════════════════════════════
SECTION 5: INJECTION TEMPLATE
═══════════════════════════════════════════════════════════════════════════════

Show me a SAMPLE of what the complete prompt looks like when sent to Claude.

Include:
- The static system prompt text
- A sample user profile injected
- Sample video library section (show 3 example videos)
- Sample credentials section
- Sample conversation history (show 3 messages)

This shows me exactly what Claude "sees" for a typical query.

═══════════════════════════════════════════════════════════════════════════════
SECTION 6: IDENTIFIED ISSUES
═══════════════════════════════════════════════════════════════════════════════

Based on your review, identify:
1. Are the no-repetition rules at the TOP of the prompt or buried in the middle?
2. Is the prompt too long (over 3000 tokens)?
3. Are there duplicate or conflicting instructions?
4. Is anything missing that should be there?

═══════════════════════════════════════════════════════════════════════════════
OUTPUT FORMAT
═══════════════════════════════════════════════════════════════════════════════

Generate this as a structured document I can reference. Include:
- Code snippets with file names and line numbers
- Database table schemas
- Function signatures
- The complete system prompt text

This is for my records so I understand exactly how Professor OS 6.0 is architected.
```
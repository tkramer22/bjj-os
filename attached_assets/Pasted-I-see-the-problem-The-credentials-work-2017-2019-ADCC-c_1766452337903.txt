I see the problem. The credentials work (2017, 2019 ADCC - correct), but:

1. **Video retrieval is STILL broken** - It’s saying “I don’t have JT Torres videos” when you have 50+
1. **Repetition is happening** - RULE #7 isn’t being followed
1. **Double responses** - Something is triggering twice

The intelligent video retrieval code either wasn’t deployed correctly or isn’t being called.

**Send this to Replit immediately:**

```
URGENT DEBUG: Professor OS video retrieval is not working

EVIDENCE:
- User asked "Do you have vids of his you can suggest" (referring to JT Torres)
- Professor OS responded "No, I don't have any JT Torres instructionals in my library"
- We have 50+ JT Torres videos in the database
- The intelligent video retrieval we just built is NOT working

DEBUG STEPS:

1. Check if analyzeMessageForVideoQuery function exists and is being called
   - Add this log at the start of the /api/ai/chat/message endpoint:
   console.log('[DEBUG] Starting chat message handler');

2. Check if the function is being called:
   - After analyzeMessageForVideoQuery runs, log:
   console.log('[DEBUG] Message analysis result:', JSON.stringify(messageAnalysis));

3. Check if videos are being fetched:
   - After fetchRelevantVideos runs, log:
   console.log('[DEBUG] Videos fetched:', availableVideos.length);
   console.log('[DEBUG] First 3 videos:', availableVideos.slice(0,3).map(v => v.instructorName + ': ' + v.title));

4. VERIFY the functions exist in routes.ts:
   - Search for "analyzeMessageForVideoQuery" - does it exist?
   - Search for "fetchRelevantVideos" - does it exist?
   - If NOT, the code was never actually added

5. Check if old code is still running:
   - Search for where availableVideos is set
   - Is it still using the OLD generic "top 30" query instead of the new intelligent retrieval?

6. FIX THE REPETITION:
   - Find RULE #7 in the system prompt
   - Make sure it says: "RULE #7: NO REPETITION - Never repeat the same information within a single response. Say it once, move on."
   - If it doesn't exist, ADD IT

7. TEST QUERY:
   Run this database query to confirm JT Torres videos exist:
   SELECT COUNT(*) FROM ai_video_knowledge WHERE LOWER(instructor_name) LIKE '%torres%';

Show me:
- The console logs when a message is sent
- Whether analyzeMessageForVideoQuery and fetchRelevantVideos functions exist
- What the video count query returns

This needs to work NOW.
```
FINAL TRAINING TAB SPEC â€” COMPLETE WITH ALL REFINEMENTS

This replaces ALL previous training tab specs and fix files.
Apply everything in this document.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CORE PRINCIPLE: THIS IS A TRAINING PARTNER, NOT A DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Every label, every word, every interaction should feel like your
BJJ training partner â€” not a corporate analytics tool. No stiff
labels. No spreadsheet language. Conversational, warm, premium.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TAB BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Bottom tabs: Chat | Videos | Training | Profile

- â€œSavedâ€ is gone from the bottom bar
- Saved videos now live inside Videos tab as a sub-tab: Library | Saved
- Training icon: calendar glyph, matching weight of other icons
- Active: purple icon + label. Inactive: gray icon + label.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MULTIPLE SESSIONS PER DAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

REMOVE the UNIQUE constraint on (user_id, session_date). Users can
log multiple sessions per day (morning class + evening sparring,
competition day, etc.).

Calendar dot logic:

- Purple dot = at least one session that day
- One dot regardless of how many sessions (not multiple dots)

Tapping a date with ONE session: opens bottom sheet in edit mode
with that sessionâ€™s data pre-filled. â€œAdd another sessionâ€ link
at the bottom of the sheet.

Tapping a date with MULTIPLE sessions: shows a mini list of that
dayâ€™s sessions:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Monday, February 16                        â”‚
â”‚                                             â”‚
â”‚  ğŸ”¥ Great Â· Class Â· Gi         10:00 AM     â”‚
â”‚  Armbar Â· Triangle                    Edit  â”‚
â”‚                                             â”‚
â”‚  ğŸ‘ Good Â· Sparring Â· No-Gi    7:00 PM      â”‚
â”‚  Guard Pass Â· Back Take               Edit  â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   + Add another session  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tapping â€œEditâ€ on a session opens the bottom sheet pre-filled.
Tapping â€œ+ Add another sessionâ€ opens a fresh bottom sheet.

Tapping a date with NO sessions: opens fresh bottom sheet to log.

Streak logic: counts UNIQUE DAYS trained, not session count.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TRAINING TAB â€” MAIN SCREEN LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

From top to bottom:

HEADER:

- â€œTrainingâ€ on the left â€” bold, same size as â€œTechnique Libraryâ€
  and â€œProf. OSâ€ headers on other tabs
- Nothing on the right. No buttons. Clean.

STREAK LINE:

- Single line below header:
  ğŸ”¥ 12 day streak
- White text for number, secondary gray for â€œday streakâ€
- Flame emoji adds warmth
- When streak is 0: â€œStart your streakâ€ in gray (no flame)
- Tapping the streak line opens a simple stats detail view:
  Sessions this week: 4
  Sessions this month: 18
  Longest streak: 23 days
  Total sessions: 87
  (Simple list, same dark card styling, back arrow to return)

MONTHLY CALENDAR GRID:

- Dark surface card background, rounded corners matching appâ€™s cards
- Month/year header: â€œFebruary 2026â€ centered
- Left/right chevrons to navigate months
- Swipe left/right also works
- Day headers: S M T W T F S in small secondary gray text

Date cells:

- UNTRAINED past dates: just the number in gray, no circle
- TRAINED dates: number inside a FILLED PURPLE CIRCLE with
  subtle glow/shadow
- TODAY (not logged): number with a PURPLE RING (unfilled) â€”
  this is the visual invitation to tap
- TODAY (logged): filled purple circle with white ring around it
- FUTURE dates: numbers at lower opacity (dimmed)

Tap behavior:

- Tapping any past or today date: brief highlight flash (100ms),
  then appropriate action (log, edit, or multi-session list)
- Tapping future dates: nothing happens
- Haptic: light tap on date press (iOS only)

NO weekly dots row. NO â€œ+ Logâ€ button. NO â€œLog todayâ€™s trainingâ€
card. The calendar IS the interface.

FIRST-TIME HINT:
If user has fewer than 3 total sessions logged, show a subtle
gray text line below the calendar grid:
â€œTap a date to log your sessionâ€
After 3 sessions, this hint disappears permanently.

RECENT SESSIONS (scrollable below calendar):
Show last 5-7 sessions as compact cards:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Feb 16 Â· ğŸ”¥ Great Â· Class Â· Gi            â”‚
â”‚  Armbar Â· Half Guard Sweeps                 â”‚
â”‚  â€œHit the kimura chain twiceâ€¦â€            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- Date, mood emoji, session type, gi/nogi on first line
- Technique chips on second line
- Notes preview (first line, truncated) in quotes on third line
  Only show notes line if they actually wrote notes
- Cards styled exactly like other cards in the app
- Tapping a card opens that session for editing

PROFESSOR OS INSIGHT CARD (at bottom of scroll):
Purple OS avatar on the left, message on the right.
Dark card, slightly different from session cards (maybe subtle
purple border or left accent stripe to distinguish it).

The tone must sound like Professor OS â€” conversational,
encouraging, specific. NOT corporate analytics language.

Examples of GOOD insight messages:

- â€œ4 sessions this week. Youâ€™re in a groove â€” donâ€™t let up.â€
- â€œNo training today? Good. Your body needs this.â€
- â€œYouâ€™ve been all over armbars lately. That obsession phase
  is where breakthroughs happen.â€
- â€œğŸ”¥ 14 days straight. Thatâ€™s discipline. Thatâ€™s growth.â€
- â€œFirst session logged! This is where the journey starts.â€
- â€œYou trained twice today. Thatâ€™s a competitorâ€™s mentality.â€

Examples of BAD insight messages (do NOT write like this):

- â€œYouâ€™ve trained 4 times this week. Consistency is up 15%.â€
- â€œRest day detected. Recovery is important for performance.â€
- â€œYour most practiced technique this month is armbar.â€

Template logic for v1:

```
if (streak >= 14): "ğŸ”¥ {streak} days straight. That's elite."
if (streak >= 7): "ğŸ”¥ {streak} days. You're building something."
if (sessionsThisWeek >= 5): "5 sessions this week. You're a machine."
if (sessionsThisWeek >= 3): "{n} sessions this week. Solid work."
if (daysSinceLastSession == 0 && sessionsToday > 1): 
  "Twice today. That's a competitor's mentality."
if (daysSinceLastSession == 1): "Back on the mat. Let's go."
if (daysSinceLastSession >= 2): "Haven't seen you in a couple days. Your mat is waiting."
if (daysSinceLastSession >= 5): "It's been a minute. No judgment â€” just get back."
if (totalSessions == 1): "First one logged. This is where it starts."
if (totalSessions == 0): "Log your first session and I'll start tracking your journey."
if (mostLoggedTechnique): 
  "You've been drilling {technique} a lot. That focus pays off."
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
BOTTOM SHEET â€” QUICK LOG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Slides up from bottom. Calendar visible but dimmed behind.
Drag handle at top (small gray bar). Swipe down to dismiss. X button
top right to close.

Background: appâ€™s elevated surface color
Rounded top corners (16px or matching existing modals)

LAYOUT (top to bottom):

1. DATE
   â€œHow was training?â€
   Monday, February 16
   
   â€œHow was training?â€ in bold white (the header â€” conversational)
   Date in secondary gray below it
1. MOOD (one row, 4 chips)
   ğŸ”¥ Great    ğŸ‘ Good    ğŸ˜¤ Tough    ğŸ’€ Rough
- One row, no wrapping
- No label above (no â€œHow did it feel?â€ â€” the header already asks)
- Tap to select, selected = purple background + white text
- Only one selectable
- Haptic: light tap on selection
1. SESSION TYPE (one row, 4 chips)
   ğŸ¥‹ Class    ğŸ¤¼ Sparring    ğŸ“š Open Mat    ğŸ† Comp
- One row, no wrapping
- NO label above (no â€œSession Typeâ€ text â€” chips are self-explanatory)
- Tap to select, selected = purple background + white text
- Only one selectable
- Haptic: light tap on selection
1. TECHNIQUES
   Label: â€œWhat did you work on?â€ (conversational, secondary gray)
   
   CHIP ROW (recent or defaults):
   For new users (fewer than 3 sessions):
   Armbar Â· Triangle Â· Guard Pass Â· Sweep Â· Takedown Â· Back Take
   
   For returning users:
   Their last 6-8 logged techniques (most recent first)
   
   Chips are tappable â€” tap to select (turns purple), tap again
   to deselect. Multiple can be selected.
   
   SEARCH FIELD below chips:
   â€œSearch techniquesâ€¦â€
   Autocomplete from taxonomy â€” DEDUPLICATED results (no duplicate
   Armbars). Tapping a result adds it as a selected chip.
   
   Selected techniques show as purple chips above the search field
   with X to remove each.
1. GI / NO-GI (toggle)
   Simple two-segment toggle: Gi | No-Gi
   Default: Gi selected (purple)
   No label needed â€” self-explanatory
1. ADD MORE â–¾ (expandable)
   Tapping expands to reveal:
- Duration: 30m | 1hr | 1.5hr | 2hr | 2.5hr | 3hr
  (horizontal scrollable chips)
- Rolls: [ - ] 0 [ + ]
- Submissions: [ - ] 0 [ + ]
- Taps: [ - ] 0 [ + ]
- Notes: â€œAdd a noteâ€¦â€ (text field, expandable)
   
   Number steppers styled simply, haptic light tap on each press.
   
   When expanded, text changes to â€œLess â–´â€
   All of these fields are optional.
1. SAVE BUTTON (full width, bottom)
   â€œSaveâ€ â€” purple background, white text, full width
   Matches existing button styling in app
   
   ON SAVE:
   a) Haptic: medium impact
   b) Bottom sheet slides down
   c) Purple dot appears/stays on calendar (scale animation, 300ms)
   d) Streak line updates
   e) Toast slides down from top (auto-dismiss 2 seconds):
   â€œSession logged Â· ğŸ”¥ 1 day streakâ€
   For milestones (7, 14, 21, 30, 60, 90, 100):
   â€œğŸ”¥ 14 day streak! Keep pushing.â€
   f) New session card appears in recent sessions list
   g) Haptic: success notification for streak milestones

EDIT MODE:
When editing an existing session, all fields pre-filled.
Button says â€œUpdateâ€ instead of â€œSaveâ€
Red â€œDelete sessionâ€ text link below the Update button.
Deleting shows a brief confirmation: â€œDelete this session?â€
with Cancel and Delete options.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EMPTY STATE (first visit, zero sessions)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Calendar grid visible but empty.
Streak line shows: â€œStart your streakâ€

Below the calendar, centered:

â€œTrack Your Trainingâ€
â€œTap a date to log your first session.â€

Bold white header, gray subtitle. Clean. Minimal.
No illustrations, no icons, no emojis in the empty state.
Premium and restrained.

After first session is logged, empty state disappears forever.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROFESSOR OS SYSTEM PROMPT INTEGRATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Update buildSystemPrompt() to inject training data:

Add a section to the DYNAMIC part of the system prompt:

TRAINING LOG:
Current streak: {streak} days
Sessions this week: {count}
Last 5 sessions:

- Feb 16: Great, Class, Gi. Techniques: Armbar, Half Guard Sweeps.
  Notes: â€œHit the kimura chain twiceâ€
- Feb 15: Good, Sparring, No-Gi. Techniques: Guard Pass, Back Take.
- Feb 14: Tough, Open Mat, Gi. Techniques: Triangle, Sweep.
  [etc.]
  Most trained techniques (last 30 days): Armbar (5x), Half Guard
  Sweeps (4x), Guard Pass (3x)
  Wins: Armbar, Triangle, Back Take
  Working On: Guard Retention, Passing

Professor OS should reference this NATURALLY when relevant:

- â€œYouâ€™ve been drilling armbars all week â€” want to add a
  kimura chain to complement it?â€
- â€œ3 tough sessions in a row. Youâ€™re in a grind phase.
  Thatâ€™s where growth happens.â€
- â€œYour guard retention keeps showing up in â€˜working onâ€™ â€”
  letâ€™s fix that tonight.â€

DO NOT force training references when not relevant.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
HAPTIC FEEDBACK (iOS ONLY)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import { Haptics, ImpactStyle } from â€˜@capacitor/hapticsâ€™;

- Date tap: Haptics.impact({ style: ImpactStyle.Light })
- Mood selection: Haptics.impact({ style: ImpactStyle.Light })
- Session type selection: Haptics.impact({ style: ImpactStyle.Light })
- Technique chip tap: Haptics.impact({ style: ImpactStyle.Light })
- Number stepper +/-: Haptics.impact({ style: ImpactStyle.Light })
- Save session: Haptics.impact({ style: ImpactStyle.Medium })
- Streak milestone: Haptics.notification({ type: â€˜successâ€™ })
- Month swipe: no haptic

Only on iOS (Capacitor.getPlatform() === â€˜iosâ€™). No haptics on web.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DESIGN RULES (NON-NEGOTIABLE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

COLORS:

- All selected states: PURPLE (app accent color). No green. No blue.
- Text primary: white
- Text secondary: gray (same gray as instructor names on video cards)
- Backgrounds: same dark as rest of app
- Card surfaces: same elevated dark as video cards
- Destructive: red (delete only)
- Streak flame: emoji handles the color naturally

TYPOGRAPHY:

- Same font as rest of app throughout
- Same sizes, same weights
- NO new fonts, NO different sizes

SPACING:

- 8px grid system
- Same padding as other screens
- Same card border radius
- Consistent with Chat, Videos, Profile tabs

ANIMATIONS:

- Subtle, fast (200-300ms), ease-out
- No bounces, no springs, no playful physics
- Premium and restrained

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TESTING BEFORE PUBLISH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ 4 tabs: Chat, Videos, Training, Profile
â–¡ Videos tab has Library | Saved sub-tabs
â–¡ All saved videos accessible and working
â–¡ Training tab: clean header, streak line, calendar grid
â–¡ No â€œ+ Logâ€ button, no weekly dots row, no â€œLog todayâ€ card
â–¡ Todayâ€™s date has purple ring (unfilled) when not logged
â–¡ Tapping date opens bottom sheet
â–¡ Bottom sheet: â€œHow was training?â€, mood emojis, session types,
technique chips, gi/nogi, expandable details, save button
â–¡ Mood chips have emojis, one row, selected = purple (NOT green)
â–¡ Session types: 4 options, one row
â–¡ Technique autocomplete: no duplicates
â–¡ Default technique chips for new users
â–¡ Saving: haptic, dot appears, streak updates, toast shows
â–¡ Multiple sessions per day works
â–¡ Tapping date with multiple sessions shows list
â–¡ Edit mode pre-fills data
â–¡ Delete works with confirmation
â–¡ Recent sessions show below calendar with notes preview
â–¡ Professor OS insight card at bottom with warm tone
â–¡ Empty state for first visit
â–¡ First-time hint text disappears after 3 sessions
â–¡ Stats detail accessible by tapping streak
â–¡ Professor OS in Chat can reference training data
â–¡ Visual consistency with rest of app
â–¡ Dark theme matches exactly
â–¡ No corporate language anywhere

DO NOT PUBLISH UNTIL I CONFIRM.